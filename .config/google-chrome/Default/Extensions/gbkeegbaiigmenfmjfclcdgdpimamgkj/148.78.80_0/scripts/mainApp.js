/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("third_party/domready/domReady",[],function(){function c(){if(!p){p=!0;a&&clearInterval(a);var c=k;if(p&&c.length){k=[];var e;for(e=0;e<c.length;e+=1)c[e](r)}}}function h(a){p?a(r):k.push(a);return h}var l,f,a,e="undefined"!==typeof window&&window.document,p=!e,r=e?document:null,k=[];if(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c);f=document.createElement("div");
try{l=null===window.frameElement}catch(w){}f.doScroll&&l&&window.external&&(a=setInterval(function(){try{f.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}h.version="2.0.1";h.load=function(a,c,e,f){f.isBuild?e(null):h(e)};return h});
(function(){function c(c){var l=null;if(this.id===c)return this;if(this.hasChildNodes())for(var f=0,a=this.childNodes.length;f<a&&(this.childNodes[f].nodeType!==Node.ELEMENT_NODE||!(l=this.childNodes[f].getElementById(c))||l.id!==c);f++);return l}Element.prototype.clear=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);return this};Element.prototype.removeElm=function(){return this.parentNode?(this.parentNode.removeChild(this),this):null};Function.prototype.bake=
function(c){var l=this,f=[].slice.call(arguments,1);return function(){return l.apply(c,f.concat([].slice.call(arguments,0)))}};Element.prototype.getElementById=c;DocumentFragment.prototype.getElementById=c})();define("qowtRoot/lib/framework/framework",function(){});
(function(){var c,h=h||{},l=this,f=function(b){return void 0!==b},a=function(){},e=function(b){var m=typeof b;if("object"==m)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return m;var x=Object.prototype.toString.call(b);if("[object Window]"==x)return"object";if("[object Array]"==x||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==x||"undefined"!=typeof b.call&&
"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==m&&"undefined"==typeof b.call)return"object";return m},p=function(b){return"array"==e(b)},r=function(b){var m=e(b);return"array"==m||"object"==m&&"number"==typeof b.length},k=function(b){return"string"==typeof b},w=function(b){return"number"==typeof b},q=function(b){return"function"==e(b)},v=function(b){var m=typeof b;return"object"==m&&null!=b||"function"==m},O=function(b,
m,x){return b.call.apply(b.bind,arguments)},P=function(b,m,x){if(!b)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(x,a);return b.apply(m,x)}}return function(){return b.apply(m,arguments)}},A=function(b,m,x){A=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?O:P;return A.apply(null,arguments)},B=function(b,m){var x=Array.prototype.slice.call(arguments,
1);return function(){var m=x.slice();m.push.apply(m,arguments);return b.apply(this,m)}},C=Date.now||function(){return+new Date},t=function(b,m){var x=b.split("."),a=l;x[0]in a||!a.execScript||a.execScript("var "+x[0]);for(var d;x.length&&(d=x.shift());)!x.length&&f(m)?a[d]=m:a=a[d]?a[d]:a[d]={}},H=function(b,m){function x(){}x.prototype=m.prototype;b.K=m.prototype;b.prototype=new x;b.Qc=function(b,x,a){return m.prototype[x].apply(b,Array.prototype.slice.call(arguments,2))}};Function.prototype.bind=
Function.prototype.bind||function(b,m){if(1<arguments.length){var x=Array.prototype.slice.call(arguments,1);x.unshift(this,b);return A.apply(null,x)}return A(this,b)};var N=function(b){if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var m=Error().stack;m&&(this.stack=m)}b&&(this.message=String(b))};H(N,Error);N.prototype.name="CustomError";var ka=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ca=function(b,m){return b<
m?-1:b>m?1:0},D=Array.prototype,la=D.indexOf?function(b,m,x){return D.indexOf.call(b,m,x)}:function(b,m,x){x=null==x?0:0>x?Math.max(0,b.length+x):x;if(k(b))return k(m)&&1==m.length?b.indexOf(m,x):-1;for(;x<b.length;x++)if(x in b&&b[x]===m)return x;return-1},da=D.forEach?function(b,m,x){D.forEach.call(b,m,x)}:function(b,m,x){for(var a=b.length,d=k(b)?b.split(""):b,c=0;c<a;c++)c in d&&m.call(x,d[c],c,b)},ha=D.some?function(b,m,x){return D.some.call(b,m,x)}:function(b,m,x){for(var a=b.length,d=k(b)?
b.split(""):b,c=0;c<a;c++)if(c in d&&m.call(x,d[c],c,b))return!0;return!1},R=D.every?function(b,m,x){return D.every.call(b,m,x)}:function(b,m,x){for(var a=b.length,d=k(b)?b.split(""):b,c=0;c<a;c++)if(c in d&&!m.call(x,d[c],c,b))return!1;return!0},S=function(b){var m;a:{m=Pd;for(var x=b.length,a=k(b)?b.split(""):b,d=0;d<x;d++)if(d in a&&m.call(void 0,a[d],d,b)){m=d;break a}m=-1}return 0>m?null:k(b)?b.charAt(m):b[m]},Ab=function(b,m){var x=la(b,m),a;(a=0<=x)&&D.splice.call(b,x,1);return a},u=function(b){return D.concat.apply(D,
arguments)},La=function(b,m,x){return 2>=arguments.length?D.slice.call(b,m):D.slice.call(b,m,x)},Dc="StopIteration"in l?l.StopIteration:Error("StopIteration"),Ma=function(){};Ma.prototype.next=function(){throw Dc;};Ma.prototype.wc=function(){return this};var Na=function(b,m,x){for(var a in b)m.call(x,b[a],a,b)},ua=function(b){var m=[],x=0,a;for(a in b)m[x++]=b[a];return m},fb=function(b){var m=[],x=0,a;for(a in b)m[x++]=a;return m},cc=function(b,m){var x;a:{for(x in b)if(m.call(void 0,b[x],x,b))break a;
x=void 0}return x&&b[x]},Ca="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Nb=function(b,m){for(var x,a,d=1;d<arguments.length;d++){a=arguments[d];for(x in a)b[x]=a[x];for(var c=0;c<Ca.length;c++)x=Ca[c],Object.prototype.hasOwnProperty.call(a,x)&&(b[x]=a[x])}},ia=function(b,m){this.q={};this.b=[];this.ra=this.j=0;var x=arguments.length;if(1<x){if(x%2)throw Error("Uneven number of arguments");for(var a=0;a<x;a+=2)this.set(arguments[a],arguments[a+
1])}else b&&this.la(b)};ia.prototype.w=function(){pb(this);for(var b=[],m=0;m<this.b.length;m++)b.push(this.q[this.b[m]]);return b};ia.prototype.H=function(){pb(this);return this.b.concat()};ia.prototype.R=function(b){return gb(this.q,b)};ia.prototype.remove=function(b){return gb(this.q,b)?(delete this.q[b],this.j--,this.ra++,this.b.length>2*this.j&&pb(this),!0):!1};var pb=function(b){if(b.j!=b.b.length){for(var m=0,a=0;m<b.b.length;){var d=b.b[m];gb(b.q,d)&&(b.b[a++]=d);m++}b.b.length=a}if(b.j!=
b.b.length){for(var c={},a=m=0;m<b.b.length;)d=b.b[m],gb(c,d)||(b.b[a++]=d,c[d]=1),m++;b.b.length=a}};c=ia.prototype;c.get=function(b,m){return gb(this.q,b)?this.q[b]:m};c.set=function(b,m){gb(this.q,b)||(this.j++,this.b.push(b),this.ra++);this.q[b]=m};c.la=function(b){var m;b instanceof ia?(m=b.H(),b=b.w()):(m=fb(b),b=ua(b));for(var a=0;a<m.length;a++)this.set(m[a],b[a])};c.forEach=function(b,m){for(var a=this.H(),d=0;d<a.length;d++){var c=a[d],e=this.get(c);b.call(m,e,c,this)}};c.clone=function(){return new ia(this)};
c.Lb=function(){pb(this);for(var b={},m=0;m<this.b.length;m++){var a=this.b[m];b[a]=this.q[a]}return b};c.wc=function(b){pb(this);var m=0,a=this.b,d=this.q,c=this.ra,e=this,f=new Ma;f.next=function(){for(;;){if(c!=e.ra)throw Error("The map has changed since the iterator was created");if(m>=a.length)throw Dc;var f=a[m++];return b?f:d[f]}};return f};var gb=function(b,m){return Object.prototype.hasOwnProperty.call(b,m)},n,qb,dc={id:"hitType",name:"t",valueType:"text",maxLength:void 0,defaultValue:void 0},
Ec={id:"sessionControl",name:"sc",valueType:"text",maxLength:void 0,defaultValue:void 0},Fc={id:"description",name:"cd",valueType:"text",maxLength:2048,defaultValue:void 0},Gc={id:"eventCategory",name:"ec",valueType:"text",maxLength:150,defaultValue:void 0},ec={id:"eventAction",name:"ea",valueType:"text",maxLength:500,defaultValue:void 0},Bb={id:"eventLabel",name:"el",valueType:"text",maxLength:500,defaultValue:void 0},hb={id:"eventValue",name:"ev",valueType:"integer",maxLength:void 0,defaultValue:void 0},
Hc={qd:dc,Rc:{id:"anonymizeIp",name:"aip",valueType:"boolean",maxLength:void 0,defaultValue:void 0},Bd:{id:"queueTime",name:"qt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Xc:{id:"cacheBuster",name:"z",valueType:"text",maxLength:void 0,defaultValue:void 0},Hd:Ec,Id:{id:"sessionGroup",name:"sg",valueType:"text",maxLength:void 0,defaultValue:void 0},Yd:{id:"userId",name:"uid",valueType:"text",maxLength:void 0,defaultValue:void 0},yd:{id:"nonInteraction",name:"ni",valueType:"boolean",
maxLength:void 0,defaultValue:void 0},gd:Fc,Rd:{id:"title",name:"dt",valueType:"text",maxLength:1500,defaultValue:void 0},Tc:{id:"appId",name:"aid",valueType:"text",maxLength:150,defaultValue:void 0},Uc:{id:"appInstallerId",name:"aiid",valueType:"text",maxLength:150,defaultValue:void 0},kd:Gc,jd:ec,ld:Bb,md:hb,Kd:{id:"socialNetwork",name:"sn",valueType:"text",maxLength:50,defaultValue:void 0},Jd:{id:"socialAction",name:"sa",valueType:"text",maxLength:50,defaultValue:void 0},Ld:{id:"socialTarget",
name:"st",valueType:"text",maxLength:2048,defaultValue:void 0},Ud:{id:"transactionId",name:"ti",valueType:"text",maxLength:500,defaultValue:void 0},Td:{id:"transactionAffiliation",name:"ta",valueType:"text",maxLength:500,defaultValue:void 0},Vd:{id:"transactionRevenue",name:"tr",valueType:"currency",maxLength:void 0,defaultValue:void 0},Wd:{id:"transactionShipping",name:"ts",valueType:"currency",maxLength:void 0,defaultValue:void 0},Xd:{id:"transactionTax",name:"tt",valueType:"currency",maxLength:void 0,
defaultValue:void 0},ed:{id:"currencyCode",name:"cu",valueType:"text",maxLength:10,defaultValue:void 0},ud:{id:"itemPrice",name:"ip",valueType:"currency",maxLength:void 0,defaultValue:void 0},vd:{id:"itemQuantity",name:"iq",valueType:"integer",maxLength:void 0,defaultValue:void 0},sd:{id:"itemCode",name:"ic",valueType:"text",maxLength:500,defaultValue:void 0},td:{id:"itemName",name:"in",valueType:"text",maxLength:500,defaultValue:void 0},rd:{id:"itemCategory",name:"iv",valueType:"text",maxLength:500,
defaultValue:void 0},cd:{id:"campaignSource",name:"cs",valueType:"text",maxLength:100,defaultValue:void 0},ad:{id:"campaignMedium",name:"cm",valueType:"text",maxLength:50,defaultValue:void 0},bd:{id:"campaignName",name:"cn",valueType:"text",maxLength:100,defaultValue:void 0},$c:{id:"campaignKeyword",name:"ck",valueType:"text",maxLength:500,defaultValue:void 0},Yc:{id:"campaignContent",name:"cc",valueType:"text",maxLength:500,defaultValue:void 0},Zc:{id:"campaignId",name:"ci",valueType:"text",maxLength:100,
defaultValue:void 0},pd:{id:"gclid",name:"gclid",valueType:"text",maxLength:void 0,defaultValue:void 0},fd:{id:"dclid",name:"dclid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ad:{id:"pageLoadTime",name:"plt",valueType:"integer",maxLength:void 0,defaultValue:void 0},hd:{id:"dnsTime",name:"dns",valueType:"integer",maxLength:void 0,defaultValue:void 0},Md:{id:"tcpConnectTime",name:"tcp",valueType:"integer",maxLength:void 0,defaultValue:void 0},Gd:{id:"serverResponseTime",name:"srt",valueType:"integer",
maxLength:void 0,defaultValue:void 0},zd:{id:"pageDownloadTime",name:"pdt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Cd:{id:"redirectResponseTime",name:"rrt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Nd:{id:"timingCategory",name:"utc",valueType:"text",maxLength:150,defaultValue:void 0},Qd:{id:"timingVar",name:"utv",valueType:"text",maxLength:500,defaultValue:void 0},Pd:{id:"timingValue",name:"utt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Od:{id:"timingLabel",
name:"utl",valueType:"text",maxLength:500,defaultValue:void 0},nd:{id:"exDescription",name:"exd",valueType:"text",maxLength:150,defaultValue:void 0},od:{id:"exFatal",name:"exf",valueType:"boolean",maxLength:void 0,defaultValue:"1"}},fc=function(b){if(1>b||200<b)throw Error("Expected dimension index range 1-200, but was : "+b);return{id:"dimension"+b,name:"cd"+b,valueType:"text",maxLength:150,defaultValue:void 0}},Ic=function(b){if(1>b||200<b)throw Error("Expected metric index range 1-200, but was : "+
b);return{id:"metric"+b,name:"cm"+b,valueType:"integer",maxLength:void 0,defaultValue:void 0}},gc=function(b){if(1>b)return"0";if(3>b)return"1-2";b=Math.floor(Math.log(b-1)/Math.log(2));return Math.pow(2,b)+1+"-"+Math.pow(2,b+1)},Jc=function(b,m){for(var a=0,d=b.length-1,c=0;a<=d;){var e=Math.floor((a+d)/2),c=b[e];if(m<=c){d=0==e?0:b[e-1];if(m>d)return(d+1).toString()+"-"+c.toString();d=e-1}else if(m>c){if(e>=b.length-1)return(b[b.length-1]+1).toString()+"+";a=e+1}}return"<= 0"},Oa=function(){this.bb=
[]},Kc=function(){return new Oa};c=Oa.prototype;c.when=function(b){this.bb.push(b);return this};c.Ab=function(b){var m=arguments;this.when(function(b){return 0<=la(m,b.Ib())});return this};c.Pc=function(b,m){var a=La(arguments,1);this.when(function(m){m=m.W().get(b);return 0<=la(a,m)});return this};c.zb=function(b,m){if(v(this.g))throw Error("Filter has already been set.");this.g=v(m)?A(b,m):b;return this};c.Da=function(){if(0==this.bb.length)throw Error("Must specify at least one predicate using #when or a helper method.");
if(!v(this.g))throw Error("Must specify a delegate filter using #applyFilter.");return A(function(b){R(this.bb,function(m){return m(b)})&&this.g(b)},this)};var oa=function(){this.Cb=!1;this.Db="";this.sb=!1;this.Aa=null};oa.prototype.xc=function(b){this.Cb=!0;this.Db=b||" - ";return this};oa.prototype.Oc=function(){this.sb=!0;return this};oa.prototype.Fc=function(){return Lc(this,gc)};oa.prototype.Gc=function(b){return Lc(this,B(Jc,b))};var Lc=function(b,m){if(null!=b.Aa)throw Error("LabelerBuilder: Only one labeling strategy may be used.");
b.Aa=A(function(b){var a=b.W().get(hb),d=b.W().get(Bb);w(a)&&(a=m(a),null!=d&&this.Cb&&(a=d+this.Db+a),b.W().set(Bb,a))},b);return b};oa.prototype.Da=function(){if(null==this.Aa)throw Error("LabelerBuilder: a labeling strategy must be specified prior to calling build().");return Kc().Ab("event").zb(A(function(b){this.Aa(b);this.sb&&b.W().remove(hb)},this)).Da()};var hc=function(b,m){var a=Array.prototype.slice.call(arguments),d=a.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");
return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(b,m,d,c,e,f,k,h){if("%"==f)return"%";var u=a.shift();if("undefined"==typeof u)throw Error("[goog.string.format] Not enough arguments");arguments[0]=u;return rb[f].apply(null,arguments)})},rb={s:function(b,m,a){return isNaN(a)||""==a||b.length>=a?b:-1<m.indexOf("-",0)?b+Array(a-b.length+1).join(" "):Array(a-b.length+1).join(" ")+b},f:function(b,m,a,d,c){d=b.toString();isNaN(c)||""==c||(d=b.toFixed(c));var e;e=0>b?"-":0<=m.indexOf("+")?
"+":0<=m.indexOf(" ")?" ":"";0<=b&&(d=e+d);if(isNaN(a)||d.length>=a)return d;d=isNaN(c)?Math.abs(b).toString():Math.abs(b).toFixed(c);b=a-d.length-e.length;return 0<=m.indexOf("-",0)?e+d+Array(b+1).join(" "):e+Array(b+1).join(0<=m.indexOf("0",0)?"0":" ")+d},d:function(b,m,a,d,c,e,f,k){return rb.f(parseInt(b,10),m,a,d,0,e,f,k)}};rb.i=rb.d;rb.u=rb.d;var kd=function(b){if("function"==typeof b.w)return b.w();if(k(b))return b.split("");if(r(b)){for(var m=[],a=b.length,d=0;d<a;d++)m.push(b[d]);return m}return ua(b)},
Pa=function(b,m){if("function"==typeof b.forEach)b.forEach(m,void 0);else if(r(b)||k(b))da(b,m,void 0);else{var a;if("function"==typeof b.H)a=b.H();else if("function"!=typeof b.w)if(r(b)||k(b)){a=[];for(var d=b.length,c=0;c<d;c++)a.push(c)}else a=fb(b);else a=void 0;for(var d=kd(b),c=d.length,e=0;e<c;e++)m.call(void 0,d[e],a&&a[e],b)}},aa=function(b){this.F=new ia;if(0<arguments.length%2)throw Error("Uneven number of arguments to ParameterMap constructor.");for(var m=arguments,a=0;a<m.length;a+=2)this.set(m[a],
m[a+1])};aa.prototype.set=function(b,m){if(null==m)throw Error("undefined-or-null value for key: "+b.name);this.F.set(b.name,{key:b,value:m})};aa.prototype.remove=function(b){this.F.remove(b.name)};aa.prototype.get=function(b){b=this.F.get(b.name,null);return null===b?null:b.value};aa.prototype.la=function(b){this.F.la(b.F)};var ma=function(b,m){da(b.F.w(),function(b){m(b.key,b.value)})};aa.prototype.Lb=function(){var b={};ma(this,function(m,a){b[m.id]=a});return b};aa.prototype.clone=function(){var b=
new aa;b.F=this.F.clone();return b};aa.prototype.toString=function(){var b={};ma(this,function(m,a){b[m.id]=a});return JSON.stringify(b)};var ba=function(b){this.g=b};c=ba.prototype;c.yc=function(b){var m=new ba(A(this.Q,this));m.I=Gc;m.M=b;return m};c.action=function(b){var m=new ba(A(this.Q,this));m.I=ec;m.M=b;return m};c.label=function(b){var m=new ba(A(this.Q,this));m.I=Bb;m.M=b;return m};c.value=function(b){var m=new ba(A(this.Q,this));m.I=hb;m.M=b;return m};c.zc=function(b){var m=new ba(A(this.Q,
this));m.I=fc(b.index);m.M=b.value;return m};c.Ec=function(b){var m=new ba(A(this.Q,this));m.I=Ic(b.index);m.M=b.value;return m};c.send=function(b){var m=new aa;this.Q(m);return b.send("event",m)};c.Q=function(b){null!=this.I&&null!=this.M&&!b.F.R(this.I.name)&&b.set(this.I,this.M);v(this.g)&&this.g(b)};var ic=new ba(a),ib=function(){this.ba=this.ba;this.Ea=this.Ea};ib.prototype.ba=!1;ib.prototype.$=function(){this.ba||(this.ba=!0,this.l())};ib.prototype.l=function(){if(this.Ea)for(;this.Ea.length;)this.Ea.shift()()};
var Qa=function(b,m){this.type=b;this.currentTarget=this.target=m;this.defaultPrevented=this.X=!1;this.nb=!0};Qa.prototype.l=function(){};Qa.prototype.$=function(){};Qa.prototype.preventDefault=function(){this.defaultPrevented=!0;this.nb=!1};var jc=function(b){jc[" "](b);return b};jc[" "]=a;var Da;a:{var Ob=l.navigator;if(Ob){var Cb=Ob.userAgent;if(Cb){Da=Cb;break a}}Da=""}var Ea=function(b){return-1!=Da.indexOf(b)},Mc=Ea("Opera")||Ea("OPR"),G=Ea("Trident")||Ea("MSIE"),ya=Ea("Gecko")&&-1==Da.toLowerCase().indexOf("webkit")&&
!(Ea("Trident")||Ea("MSIE")),Ra=-1!=Da.toLowerCase().indexOf("webkit"),Pb=function(){var b=l.document;return b?b.documentMode:void 0},Sa=function(){var b="",m;if(Mc&&l.opera)return b=l.opera.version,q(b)?b():b;ya?m=/rv\:([^\);]+)(\)|;)/:G?m=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Ra&&(m=/WebKit\/(\S+)/);m&&(b=(b=m.exec(Da))?b[1]:"");return G&&(m=Pb(),m>parseFloat(b))?String(m):b}(),Qb={},I=function(b){var m;if(!(m=Qb[b])){m=0;for(var a=ka(String(Sa)).split("."),d=ka(String(b)).split("."),c=Math.max(a.length,
d.length),e=0;0==m&&e<c;e++){var f=a[e]||"",k=d[e]||"",u=/(\d*)(\D*)/g,h=/(\d*)(\D*)/g;do{var l=u.exec(f)||["","",""],p=h.exec(k)||["","",""];if(0==l[0].length&&0==p[0].length)break;m=ca(0==l[1].length?0:parseInt(l[1],10),0==p[1].length?0:parseInt(p[1],10))||ca(0==l[2].length,0==p[2].length)||ca(l[2],p[2])}while(0==m)}m=Qb[b]=0<=m}return m},M=l.document,ea=M&&G?Pb()||("CSS1Compat"==M.compatMode?parseInt(Sa,10):5):void 0,W=!G||G&&9<=ea,Fa=G&&!I("9"),U=!Ra||I("528"),jb=ya&&I("1.9b")||G&&I("8")||Mc&&
I("9.5")||Ra&&I("528"),Nc=ya&&!I("8")||G&&!I("9"),Ta=function(b,m){Qa.call(this,b?b.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Fb=this.state=null;if(b){var a=this.type=b.type;this.target=b.target||b.srcElement;this.currentTarget=m;var d=b.relatedTarget;if(d){if(ya){var c;a:{try{jc(d.nodeName);c=!0;break a}catch(e){}c=
!1}c||(d=null)}}else"mouseover"==a?d=b.fromElement:"mouseout"==a&&(d=b.toElement);this.relatedTarget=d;this.offsetX=Ra||void 0!==b.offsetX?b.offsetX:b.layerX;this.offsetY=Ra||void 0!==b.offsetY?b.offsetY:b.layerY;this.clientX=void 0!==b.clientX?b.clientX:b.pageX;this.clientY=void 0!==b.clientY?b.clientY:b.pageY;this.screenX=b.screenX||0;this.screenY=b.screenY||0;this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==a?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=
b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.state=b.state;this.Fb=b;b.defaultPrevented&&this.preventDefault()}};H(Ta,Qa);Ta.prototype.preventDefault=function(){Ta.K.preventDefault.call(this);var b=this.Fb;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,Fa)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(m){}};Ta.prototype.l=function(){};var z="closure_listenable_"+(1E6*Math.random()|0),V=function(b){return!(!b||!b[z])},Oc=0,Ua=function(b,m,a,d,
c){this.O=b;this.proxy=null;this.src=m;this.type=a;this.sa=!!d;this.va=c;this.key=++Oc;this.removed=this.ta=!1},Va=function(b){b.removed=!0;b.O=null;b.proxy=null;b.src=null;b.va=null},za=function(b){this.src=b;this.k={};this.ca=0};za.prototype.add=function(b,m,a,d,c){var e=b.toString();(b=this.k[e])||(b=this.k[e]=[],this.ca++);var f=Wa(b,m,d,c);-1<f?(m=b[f],a||(m.ta=!1)):(m=new Ua(m,this.src,e,!!d,c),m.ta=a,b.push(m));return m};za.prototype.remove=function(b,m,a,d){b=b.toString();if(!(b in this.k))return!1;
var c=this.k[b];m=Wa(c,m,a,d);return-1<m?(Va(c[m]),D.splice.call(c,m,1),0==c.length&&(delete this.k[b],this.ca--),!0):!1};var Aa=function(b,m){var a=m.type;if(!(a in b.k))return!1;var d=Ab(b.k[a],m);d&&(Va(m),0==b.k[a].length&&(delete b.k[a],b.ca--));return d};za.prototype.removeAll=function(b){b=b&&b.toString();var m=0,a;for(a in this.k)if(!b||a==b){for(var d=this.k[a],c=0;c<d.length;c++)++m,Va(d[c]);delete this.k[a];this.ca--}return m};za.prototype.aa=function(b,m,a,d){b=this.k[b.toString()];var c=
-1;b&&(c=Wa(b,m,a,d));return-1<c?b[c]:null};var Wa=function(b,m,a,d){for(var c=0;c<b.length;++c){var e=b[c];if(!e.removed&&e.O==m&&e.sa==!!a&&e.va==d)return c}return-1},pe="closure_lm_"+(1E6*Math.random()|0),d={},Oe=0,ld=function(b,m,a,d,c){if(p(m)){for(var e=0;e<m.length;e++)ld(b,m[e],a,d,c);return null}a=kc(a);return V(b)?b.listen(m,a,d,c):J(b,m,a,!1,d,c)},J=function(b,m,a,d,c,e){if(!m)throw Error("Invalid event type");var f=!!c,k=Rb(b);k||(b[pe]=k=new za(b));a=k.add(m,a,d,c,e);if(a.proxy)return a;
d=xf();a.proxy=d;d.src=b;d.O=a;b.addEventListener?b.addEventListener(m.toString(),d,f):b.attachEvent(Pe(m.toString()),d);Oe++;return a},xf=function(){var b=yf,m=W?function(a){return b.call(m.src,m.O,a)}:function(a){a=b.call(m.src,m.O,a);if(!a)return a};return m},Qe=function(b,m,a,d,c){if(p(m)){for(var e=0;e<m.length;e++)Qe(b,m[e],a,d,c);return null}a=kc(a);return V(b)?b.cb(m,a,d,c):J(b,m,a,!0,d,c)},Re=function(b,m,a,d,c){if(p(m))for(var e=0;e<m.length;e++)Re(b,m[e],a,d,c);else a=kc(a),V(b)?b.Wa(m,
a,d,c):b&&(b=Rb(b))&&(m=b.aa(m,a,!!d,c))&&md(m)},md=function(b){if(w(b)||!b||b.removed)return!1;var m=b.src;if(V(m))return Aa(m.D,b);var a=b.type,d=b.proxy;m.removeEventListener?m.removeEventListener(a,d,b.sa):m.detachEvent&&m.detachEvent(Pe(a),d);Oe--;(a=Rb(m))?(Aa(a,b),0==a.ca&&(a.src=null,m[pe]=null)):Va(b);return!0},Pe=function(b){return b in d?d[b]:d[b]="on"+b},Te=function(b,m,a,d){var c=1;if(b=Rb(b))if(m=b.k[m.toString()])for(m=m.concat(),b=0;b<m.length;b++){var e=m[b];e&&e.sa==a&&!e.removed&&
(c&=!1!==Se(e,d))}return Boolean(c)},Se=function(b,m){var a=b.O,d=b.va||b.src;b.ta&&md(b);return a.call(d,m)},yf=function(b,m){if(b.removed)return!0;if(!W){var a;if(!(a=m))a:{a=["window","event"];for(var d=l,c;c=a.shift();)if(null!=d[c])d=d[c];else{a=null;break a}a=d}c=a;a=new Ta(c,this);d=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var e=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(f){e=!0}if(e||void 0==c.returnValue)c.returnValue=!0}c=[];for(e=a.currentTarget;e;e=e.parentNode)c.push(e);
for(var e=b.type,k=c.length-1;!a.X&&0<=k;k--)a.currentTarget=c[k],d&=Te(c[k],e,!0,a);for(k=0;!a.X&&k<c.length;k++)a.currentTarget=c[k],d&=Te(c[k],e,!1,a)}return d}return Se(b,new Ta(m,this))},Rb=function(b){b=b[pe];return b instanceof za?b:null},qe="__closure_events_fn_"+(1E9*Math.random()>>>0),kc=function(b){if(q(b))return b;b[qe]||(b[qe]=function(m){return b.handleEvent(m)});return b[qe]},Z=function(){ib.call(this);this.D=new za(this);this.mc=this;this.Ra=null};H(Z,ib);Z.prototype[z]=!0;c=Z.prototype;
c.addEventListener=function(b,m,a,d){ld(this,b,m,a,d)};c.removeEventListener=function(b,m,a,d){Re(this,b,m,a,d)};c.dispatchEvent=function(b){var m,a=this.Ra;if(a){m=[];for(var d=1;a;a=a.Ra)m.push(a),++d}a=this.mc;d=b.type||b;if(k(b))b=new Qa(b,a);else if(b instanceof Qa)b.target=b.target||a;else{var c=b;b=new Qa(d,a);Nb(b,c)}var c=!0,e;if(m)for(var f=m.length-1;!b.X&&0<=f;f--)e=b.currentTarget=m[f],c=Pc(e,d,!0,b)&&c;b.X||(e=b.currentTarget=a,c=Pc(e,d,!0,b)&&c,b.X||(c=Pc(e,d,!1,b)&&c));if(m)for(f=
0;!b.X&&f<m.length;f++)e=b.currentTarget=m[f],c=Pc(e,d,!1,b)&&c;return c};c.l=function(){Z.K.l.call(this);this.D&&this.D.removeAll(void 0);this.Ra=null};c.listen=function(b,a,d,c){return this.D.add(String(b),a,!1,d,c)};c.cb=function(b,a,d,c){return this.D.add(String(b),a,!0,d,c)};c.Wa=function(b,a,d,c){return this.D.remove(String(b),a,d,c)};var Pc=function(b,a,d,c){a=b.D.k[String(a)];if(!a)return!0;a=a.concat();for(var e=!0,f=0;f<a.length;++f){var k=a[f];if(k&&!k.removed&&k.sa==d){var u=k.O,h=k.va||
k.src;k.ta&&Aa(b.D,k);e=!1!==u.call(h,c)&&e}}return e&&0!=c.nb};Z.prototype.aa=function(b,a,d,c){return this.D.aa(String(b),a,d,c)};var nd=function(b){l.setTimeout(function(){throw b;},0)},lc,od=function(){var b=l.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var b=document.createElement("iframe");b.style.display="none";b.src="";document.documentElement.appendChild(b);var a=b.contentWindow,b=a.document;b.open();b.write("");
b.close();var m="callImmediate"+Math.random(),d="file:"==a.location.protocol?"*":a.location.protocol+"//"+a.location.host,b=A(function(b){if(("*"==d||b.origin==d)&&b.data==m)this.port1.onmessage()},this);a.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){a.postMessage(m,d)}}});if("undefined"!==typeof b&&!Ea("Trident")&&!Ea("MSIE")){var a=new b,d={},c=d;a.port1.onmessage=function(){if(f(d.next)){d=d.next;var b=d.Hb;d.Hb=null;b()}};return function(b){c.next={Hb:b};c=
c.next;a.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(b){var a=document.createElement("script");a.onreadystatechange=function(){a.onreadystatechange=null;a.parentNode.removeChild(a);a=null;b();b=null};document.documentElement.appendChild(a)}:function(b){l.setTimeout(b,0)}},Ya=function(b,a){Xa||Sb();va||(Xa(),va=!0);Qc.push(new Qd(b,a))},Xa,Sb=function(){if(l.Promise&&l.Promise.resolve){var b=l.Promise.resolve();Xa=function(){b.then(Db)}}else Xa=
function(){var b=Db;!q(l.setImmediate)||l.Window&&l.Window.prototype.setImmediate==l.setImmediate?(lc||(lc=od()),lc(b)):l.setImmediate(b)}},va=!1,Qc=[],Db=function(){for(;Qc.length;){var b=Qc;Qc=[];for(var a=0;a<b.length;a++){var d=b[a];try{d.Ac.call(d.scope)}catch(c){nd(c)}}}va=!1},Qd=function(b,a){this.Ac=b;this.scope=a},sb=function(b){b.prototype.then=b.prototype.then;b.prototype.$goog_Thenable=!0},Rd=function(b){if(!b)return!1;try{return!!b.$goog_Thenable}catch(a){return!1}},kb=function(b,a){this.n=
0;this.B=void 0;this.o=this.p=null;this.wa=this.Ma=!1;try{var d=this;b.call(a,function(b){tb(d,2,b)},function(b){tb(d,3,b)})}catch(c){tb(this,3,c)}};kb.prototype.then=function(b,a,d){return Ga(this,q(b)?b:null,q(a)?a:null,d)};sb(kb);kb.prototype.cancel=function(b){0==this.n&&Ya(function(){var a=new Eb(b);T(this,a)},this)};var T=function(b,a){if(0==b.n)if(b.p){var d=b.p;if(d.o){for(var c=0,e=-1,f=0,k;k=d.o[f];f++)if(k=k.xa)if(c++,k==b&&(e=f),0<=e&&1<c)break;0<=e&&(0==d.n&&1==c?T(d,a):(c=d.o.splice(e,
1)[0],Rc(d),c.Oa(a)))}}else tb(b,3,a)},re=function(b,a){b.o&&b.o.length||2!=b.n&&3!=b.n||b.Ma||(b.Ma=!0,Ya(b.vc,b));b.o||(b.o=[]);b.o.push(a)},Ga=function(b,a,d,c){var e={xa:null,kb:null,Oa:null};e.xa=new kb(function(b,k){e.kb=a?function(d){try{var e=a.call(c,d);b(e)}catch(f){k(f)}}:b;e.Oa=d?function(a){try{var m=d.call(c,a);!f(m)&&a instanceof Eb?k(a):b(m)}catch(e){k(e)}}:k});e.xa.p=b;re(b,e);return e.xa};kb.prototype.xb=function(b){this.n=0;tb(this,2,b)};kb.prototype.yb=function(b){this.n=0;tb(this,
3,b)};var tb=function(b,a,d){if(0==b.n){if(b==d)a=3,d=new TypeError("Promise cannot resolve to itself");else{if(Rd(d)){b.n=1;d.then(b.xb,b.yb,b);return}if(v(d))try{var c=d.then;if(q(c)){Sc(b,d,c);return}}catch(e){a=3,d=e}}b.B=d;b.n=a;b.Ma||(b.Ma=!0,Ya(b.vc,b));3!=a||d instanceof Eb||pd(b,d)}},Sc=function(b,a,d){b.n=1;var c=!1,e=function(a){c||(c=!0,b.xb(a))},f=function(a){c||(c=!0,b.yb(a))};try{d.call(a,e,f)}catch(k){f(k)}};kb.prototype.vc=function(){for(;this.o&&this.o.length;){var b=this.o;this.o=
[];for(var a=0;a<b.length;a++){var d=b[a],c=this.B;2==this.n?d.kb(c):(Rc(this),d.Oa(c))}}this.Ma=!1};var Rc=function(b){for(;b&&b.wa;b=b.p)b.wa=!1},pd=function(b,a){b.wa=!0;Ya(function(){b.wa&&se.call(null,a)})},se=nd,Eb=function(b){N.call(this,b)};H(Eb,N);Eb.prototype.name="cancel";var X=function(b,a){this.ma=[];this.ib=b;this.hb=a||null;this.Z=this.A=!1;this.B=void 0;this.La=this.Nb=this.Ka=!1;this.na=0;this.p=null;this.Ja=0};X.prototype.cancel=function(b){if(this.A)this.B instanceof X&&this.B.cancel();
else{if(this.p){var a=this.p;delete this.p;b?a.cancel(b):(a.Ja--,0>=a.Ja&&a.cancel())}this.ib?this.ib.call(this.hb,this):this.La=!0;this.A||this.C(new Tb)}};X.prototype.jb=function(b,a){this.Ka=!1;Fb(this,b,a)};var Fb=function(b,a,d){b.A=!0;b.B=d;b.Z=!a;qd(b)},ub=function(b){if(b.A){if(!b.La)throw new Gb;b.La=!1}};X.prototype.t=function(b){ub(this);Fb(this,!0,b)};X.prototype.C=function(b){ub(this);Fb(this,!1,b)};X.prototype.N=function(b,a){return vb(this,b,null,a)};var vb=function(b,a,d,c){b.ma.push([a,
d,c]);b.A&&qd(b);return b};X.prototype.then=function(b,a,d){var c,e,f=new kb(function(b,a){c=b;e=a});vb(this,c,function(b){b instanceof Tb?f.cancel():e(b)});return f.then(b,a,d)};sb(X);var mc=function(b){var a=new X;vb(b,a.t,a.C,a);return a},rd=function(b){return ha(b.ma,function(b){return q(b[1])})},qd=function(b){if(b.na&&b.A&&rd(b)){var a=b.na,d=nc[a];d&&(l.clearTimeout(d.pa),delete nc[a]);b.na=0}b.p&&(b.p.Ja--,delete b.p);for(var a=b.B,c=d=!1;b.ma.length&&!b.Ka;){var e=b.ma.shift(),k=e[0],u=e[1],
e=e[2];if(k=b.Z?u:k)try{var h=k.call(e||b.hb,a);f(h)&&(b.Z=b.Z&&(h==a||h instanceof Error),b.B=a=h);Rd(a)&&(c=!0,b.Ka=!0)}catch(p){a=p,b.Z=!0,rd(b)||(d=!0)}}b.B=a;c&&(h=A(b.jb,b,!0),c=A(b.jb,b,!1),a instanceof X?(vb(a,h,c),a.Nb=!0):a.then(h,c));d&&(a=new sd(a),nc[a.pa]=a,b.na=a.pa)},Ub=function(b){var a=new X;a.t(b);return a},Td=function(){var b=Sd,a=new X;a.C(b);return a},Gb=function(){N.call(this)};H(Gb,N);Gb.prototype.message="Deferred has already fired";Gb.prototype.name="AlreadyCalledError";
var Tb=function(){N.call(this)};H(Tb,N);Tb.prototype.message="Deferred was canceled";Tb.prototype.name="CanceledError";var sd=function(b){this.pa=l.setTimeout(A(this.qc,this),0);this.ka=b};sd.prototype.qc=function(){delete nc[this.pa];throw this.ka;};var nc={},oc=function(b){this.ab=[];this.g=b};oc.prototype.V=function(b){if(!q(b))throw Error("Invalid filter. Must be a function.");this.ab.push(b)};oc.prototype.send=function(b,a){for(var d=new wb(b,a),c=0;c<this.ab.length&&(this.ab[c](d),!d.Za);c++);
return d.Za?Ub():this.g.send(b,a)};var wb=function(b,a){this.sc=b;this.rc=a;this.Za=!1};wb.prototype.Ib=function(){return this.sc};wb.prototype.W=function(){return this.rc};wb.prototype.cancel=function(){this.Za=!0};var pc=function(b,a){this.width=b;this.height=a};pc.prototype.clone=function(){return new pc(this.width,this.height)};pc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};!ya&&!G||G&&G&&9<=ea||ya&&I("1.9.1");G&&I("9");var td=
{id:"apiVersion",name:"v",valueType:"text",maxLength:void 0,defaultValue:void 0},Tc={id:"appName",name:"an",valueType:"text",maxLength:100,defaultValue:void 0},Uc={id:"appVersion",name:"av",valueType:"text",maxLength:100,defaultValue:void 0},Ha={id:"clientId",name:"cid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ud={id:"language",name:"ul",valueType:"text",maxLength:20,defaultValue:void 0},qc={id:"libVersion",name:"_v",valueType:"text",maxLength:void 0,defaultValue:void 0},rc={id:"sampleRateOverride",
name:"usro",valueType:"integer",maxLength:void 0,defaultValue:void 0},ud={id:"screenColors",name:"sd",valueType:"text",maxLength:20,defaultValue:void 0},xb={id:"screenResolution",name:"sr",valueType:"text",maxLength:20,defaultValue:void 0},sc={id:"trackingId",name:"tid",valueType:"text",maxLength:void 0,defaultValue:void 0},vd={id:"viewportSize",name:"vp",valueType:"text",maxLength:20,defaultValue:void 0},wd={Sc:td,Vc:Tc,Wc:Uc,dd:Ha,wd:Ud,xd:qc,Dd:rc,Ed:ud,Fd:xb,Sd:sc,Zd:vd},xd=function(b){if(!k(b))return b;
var a=Vd(b,Hc);if(v(a))return a;a=Vd(b,wd);if(v(a))return a;a=/^dimension(\d+)$/.exec(b);if(null!==a)return fc(parseInt(a[1],10));a=/^metric(\d+)$/.exec(b);if(null!==a)return Ic(parseInt(a[1],10));throw Error(b+" is not a valid parameter name.");},Vd=function(b,a){var d=cc(a,function(a){return a.id==b&&"metric"!=b&&"dimension"!=b});return v(d)?d:null},wa=function(b,a){this.bc=a;this.r=a.Ta();this.ub=new aa;this.Ya=!1};c=wa.prototype;c.set=function(b,a){if(null==a)throw Error("Value must be defined and not null. Parameter="+
b.id);var d=xd(b);this.ub.set(d,a)};c.V=function(b){this.bc.V(b)};c.send=function(b,a){if(b instanceof ba)return b.send(this);var d=this.ub.clone();a instanceof aa?d.la(a):v(a)&&Na(a,function(b,a){null!=b&&d.set(xd(a),b)},this);this.Ya&&(this.Ya=!1,d.set(Ec,"start"));return this.r.send(b,d)};c.Hc=function(b){var a={description:b};this.set(Fc,b);return this.send("appview",a)};c.Ic=function(b,a,d,c){return this.send("event",{eventCategory:b,eventAction:a,eventLabel:d,eventValue:c})};c.Kc=function(b,
a,d){return this.send("social",{socialNetwork:b,socialAction:a,socialTarget:d})};c.Jc=function(b,a){return this.send("exception",{exDescription:b,exFatal:a})};c.Eb=function(b,a,d,c,e){return this.send("timing",{timingCategory:b,timingVar:a,timingLabel:c,timingValue:d,sampleRateOverride:e})};c.Bc=function(){this.Ya=!0};c.Nc=function(b,a,d,c){return new tc(this,b,a,d,c)};var tc=function(b,a,d,c,e){this.Bb=b;this.hc=a;this.kc=d;this.ic=c;this.qa=e;this.jc=C()};tc.prototype.send=function(){var b=this.Bb.Eb(this.hc,
this.kc,C()-this.jc,this.ic,this.qa);this.Bb=null;return b};var Hb=function(b,a,d,c,e){this.gc=b;this.dc=a;this.ec=d;this.e=c;this.fc=e};Hb.prototype.Dc=function(b){var a=new wa(0,this.fc.create());a.set(qc,this.gc);a.set(td,1);a.set(Tc,this.dc);a.set(Uc,this.ec);a.set(sc,b);(b=navigator.language||navigator.browserLanguage)&&a.set(Ud,b);(b=screen.colorDepth+"-bit")&&a.set(ud,b);(b=[screen.width,screen.height].join("x"))&&a.set(xb,b);b=window.document;b="CSS1Compat"==b.compatMode?b.documentElement:
b.body;b=new pc(b.clientWidth,b.clientHeight);(b=[b.width,b.height].join("x"))&&a.set(vd,b);return a};Hb.prototype.Cc=function(){return mc(this.e.Y)};var na=function(b){this.tc=b};na.prototype.send=function(b,a){this.tc.push({Ub:b,Vb:a});return Ub()};var lb=function(b,a,d){this.e=b;this.T=[];this.L={enabled:new na(this.T),disabled:d};this.r=this.L.enabled;vb(mc(this.e.Y),B(this.Rb,a),this.Qb,this)};lb.prototype.Rb=function(b,a){if(null===this.T)throw Error("Channel setup already completed.");if(a!=
this.e)throw Error("Yikes! Multiple settings instances!");this.L.enabled=b();Vc(this);da(this.T,function(b){this.send(b.Ub,b.Vb)},this);this.T=null;te(this.e,A(this.Yb,this))};lb.prototype.Qb=function(){if(null===this.T)throw Error("Channel setup already completed.");this.r=this.L.enabled=this.L.disabled;this.T=null};lb.prototype.send=function(b,a){return this.r.send(b,a)};var Vc=function(b){b.r=b.e.ya()?b.L.enabled:b.L.disabled};lb.prototype.Yb=function(b){switch(b){case "analytics.tracking-permitted":Vc(this)}};
var Vb=function(b,a,d,c,e,f){X.call(this,e,f);this.Na=b;this.Pa=[];this.lb=!!a;this.Pb=!!d;this.Ob=!!c;for(a=this.mb=0;a<b.length;a++)vb(b[a],A(this.tb,this,a,!0),A(this.tb,this,a,!1));0!=b.length||this.lb||this.t(this.Pa)};H(Vb,X);Vb.prototype.tb=function(b,a,d){this.mb++;this.Pa[b]=[a,d];this.A||(this.lb&&a?this.t([b,d]):this.Pb&&!a?this.C(d):this.mb==this.Na.length&&this.t(this.Pa));this.Ob&&!a&&(d=null);return d};Vb.prototype.C=function(b){Vb.K.C.call(this,b);for(b=0;b<this.Na.length;b++)this.Na[b].cancel()};
var Wc=function(b){return(new Vb(b,!1,!0)).N(function(b){for(var a=[],d=0;d<b.length;d++)a[d]=b[d][1];return a})},pa=function(b){this.m=b;this.qa=100;this.ob=[];this.U=this.Qa=null;this.Y=Wd(this);this.Y.N(function(){this.pb=ld(this.m,"a",A(this.Sb,this))},this)},Wd=function(b){return yd(b).N(function(){return this},b)},yd=function(b){return Wc([Xd(b),uc(b)])};pa.prototype.Sb=function(){Za(this);var b=yb(this),a=this.ya();yd(this).N(function(){if(b!=yb(this))throw Error("User ID changed unexpectedly!");
a!=this.ya()&&zd(this)},this)};var te=function(b,a){Za(b);b.ob.push(a)};pa.prototype.Mc=function(b){Za(this);var a=this.U!=b;this.U=b;this.m.set("analytics.tracking-permitted",b.toString());a&&zd(this)};pa.prototype.ya=function(){Za(this);var b;if(b=this.U)b=l._gaUserPrefs,b=!(b&&b.ioo&&b.ioo());return b};var Xd=function(b){return b.m.get("analytics.tracking-permitted").N(function(b){this.U=!0;if(f(b))switch(b){case "true":this.U=!0;break;case "false":this.U=!1}},b)},yb=function(b){Za(b);if(!k(b.Qa))throw Error("Invalid state. UserID is not a string.");
return b.Qa},uc=function(b){return b.m.get("analytics.user-id").N(function(b){if(!f(b)){b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(var a=0,d=b.length;a<d;a++)switch(b[a]){case "x":b[a]=Math.floor(16*Math.random()).toString(16);break;case "y":b[a]=(Math.floor(4*Math.random())+8).toString(16)}b=b.join("");this.m.set("analytics.user-id",b)}this.Qa=b},b)};pa.prototype.Lc=function(b){Za(this);this.qa=b};var Yd=function(b){Za(b);return b.qa},zd=function(b){da(b.ob,function(b){b("analytics.tracking-permitted")})};
pa.prototype.$=function(){null!=this.pb&&md(this.pb)};var Za=function(b){if(!mc(b.Y).A)throw Error("Settings object accessed prior to entering ready state.");},Wb=function(){Z.call(this);this.P="google-analytics";this.m=chrome.storage.local;chrome.storage.onChanged.addListener(A(this.$a,this))};H(Wb,Z);Wb.prototype.$a=function(b){Ad(this,b)&&this.dispatchEvent("a")};var Ad=function(b,a){return ha(fb(a),function(b){return 0==b.lastIndexOf(this.P,0)},b)};Wb.prototype.get=function(b){var a=new X,d=this.P+
"."+b;this.m.get(d,function(b){chrome.runtime.lastError?a.C(chrome.runtime.lastError):(b=b[d],a.t(null!=b?b.toString():void 0))});return a};Wb.prototype.set=function(b,a){var d=new X,c={};c[this.P+"."+b]=a;this.m.set(c,function(){chrome.runtime.lastError?d.C(chrome.runtime.lastError):d.t()});return d};var Ib=function(b,a){Z.call(this);this.za=b||1;this.S=a||l;this.Sa=A(this.nc,this);this.Ua=C()};H(Ib,Z);c=Ib.prototype;c.enabled=!1;c.h=null;c.nc=function(){if(this.enabled){var b=C()-this.Ua;0<b&&b<
.8*this.za?this.h=this.S.setTimeout(this.Sa,this.za-b):(this.h&&(this.S.clearTimeout(this.h),this.h=null),this.dispatchEvent("tick"),this.enabled&&(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=C()))}};c.start=function(){this.enabled=!0;this.h||(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=C())};c.stop=function(){this.enabled=!1;this.h&&(this.S.clearTimeout(this.h),this.h=null)};c.l=function(){Ib.K.l.call(this);this.stop();delete this.S};var Xc=function(b,a,d){if(q(b))d&&(b=A(b,d));else if(b&&
"function"==typeof b.handleEvent)b=A(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<a?-1:l.setTimeout(b,a||0)},Xb=function(){Z.call(this);this.P="google-analytics";this.m=window.localStorage;ld(window,"storage",A(this.$a,this),!1)};H(Xb,Z);Xb.prototype.get=function(b){var a=Bd(this,b),d=new X;Xc(function(){d.t(a)});return d};Xb.prototype.set=function(b,a){a!=Bd(this,b)&&(this.m.setItem(this.P+"."+b,a),this.dispatchEvent("a"));var d=new X;Xc(function(){d.t()});return d};
Xb.prototype.$a=function(b){b instanceof StorageEvent||"storage"!=b.type||(b=window.event);if(!("storageArea"in b))throw Error('"storageArea" property missing from event type: '+b.type);if(!("key"in b))throw Error('"key" property missing from event type: '+b.type);b.storageArea==this.m&&0==b.key.lastIndexOf(this.P,0)&&this.dispatchEvent("a")};var Bd=function(b,a){var d=b.m.getItem(b.P+"."+a);return null!=d?d:void 0},mb=function(){};mb.$b=function(){return mb.Kb?mb.Kb:mb.Kb=new mb};mb.prototype.send=
function(){return Ub()};var Ia=function(b,a){this.Xa=[];var d=A(function(){this.Ba=new oc(a.Ta());da(this.Xa,function(b){this.Ba.V(b)},this);this.Xa=null;return this.Ba},this);this.r=new lb(b,d,mb.$b())};Ia.prototype.Ta=function(){return this.r};Ia.prototype.V=function(b){this.Ba?this.Ba.V(b):this.Xa.push(b)};var Zd=function(b,a){this.e=b;this.oc=a};Zd.prototype.create=function(){return new Ia(this.e,this.oc)};var nb=function(b){ib.call(this);this.Va=b;this.b={}};H(nb,ib);var $d=[];nb.prototype.listen=
function(b,a,d,c){p(a)||(a&&($d[0]=a.toString()),a=$d);for(var e=0;e<a.length;e++){var f=ld(b,a[e],d||this.handleEvent,c||!1,this.Va||this);if(!f)break;this.b[f.key]=f}return this};nb.prototype.cb=function(b,a,d,c){return vc(this,b,a,d,c)};var vc=function(b,a,d,c,e,f){if(p(d))for(var k=0;k<d.length;k++)vc(b,a,d[k],c,e,f);else{a=Qe(a,d,c||b.handleEvent,e,f||b.Va||b);if(!a)return b;b.b[a.key]=a}return b};nb.prototype.Wa=function(b,a,d,c,e){if(p(a))for(var f=0;f<a.length;f++)this.Wa(b,a[f],d,c,e);else d=
d||this.handleEvent,e=e||this.Va||this,d=kc(d),c=!!c,(a=V(b)?b.aa(a,d,c,e):b?(b=Rb(b))?b.aa(a,d,c,e):null:null)&&(md(a),delete this.b[a.key]);return this};nb.prototype.removeAll=function(){Na(this.b,md);this.b={}};nb.prototype.l=function(){nb.K.l.call(this);this.removeAll()};nb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var F=function(){Z.call(this);this.ua=new nb(this);U&&(jb?this.ua.listen(Nc?document.body:window,["online","offline"],this.vb):(this.wb=
U?navigator.onLine:!0,this.h=new Ib(250),this.ua.listen(this.h,"tick",this.cc),this.h.start()))};H(F,Z);F.prototype.cc=function(){var b=U?navigator.onLine:!0;b!=this.wb&&(this.wb=b,this.vb())};F.prototype.vb=function(){this.dispatchEvent((U?navigator.onLine:1)?"online":"offline")};F.prototype.l=function(){F.K.l.call(this);this.ua.$();this.ua=null;this.h&&(this.h.$(),this.h=null)};var Yc=function(b,a){this.e=b;this.g=a};Yc.prototype.send=function(b,a){a.set(Ha,yb(this.e));return this.g.send(b,a)};
var wc=function(b){this.g=b};wc.prototype.send=function(b,a){Yb(a);Ja(a);return this.g.send(b,a)};var Yb=function(b){ma(b,function(a,d){f(a.maxLength)&&"text"==a.valueType&&0<a.maxLength&&d.length>a.maxLength&&b.set(a,d.substring(0,a.maxLength))})},Ja=function(b){ma(b,function(a,d){f(a.defaultValue)&&d==a.defaultValue&&b.remove(a)})},Sd={status:"device-offline",Ca:void 0},ue={status:"rate-limited",Ca:void 0},ve={status:"sampled-out",Ca:void 0},we={status:"sent",Ca:void 0},Cd=function(b,a){this.Zb=
b;this.g=a};Cd.prototype.send=function(b,a){var d;d=this.Zb;var c=d.rb(),e=Math.floor((c-d.qb)*d.Wb);0<e&&(d.da=Math.min(d.da+e,d.Xb),d.qb=c);1>d.da?d=!1:(--d.da,d=!0);return d||"item"==b||"transaction"==b?this.g.send(b,a):Ub(ue)};var $a=function(){this.da=60;this.Xb=500;this.Wb=5E-4;this.rb=function(){return(new Date).getTime()};this.qb=this.rb()},ab=function(b,a){this.e=b;this.g=a};ab.prototype.send=function(b,a){var d=a.get(Ha),d=parseInt(d.split("-")[1],16),c;"timing"!=b?c=Yd(this.e):((c=a.get(rc))&&
a.remove(rc),c=c||Yd(this.e));return d<655.36*c?this.g.send(b,a):Ub(ve)};var Zb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,xc=Ra,Zc=function(b,a){if(xc){xc=!1;var d=l.location;if(d){var c=d.href;if(c&&(c=(c=Zc(3,c))?decodeURI(c):c)&&c!=d.hostname)throw xc=!0,Error();}}return a.match(Zb)[b]||null},Dd=function(){};Dd.prototype.Gb=null;var $b=function(b){var a;(a=b.Gb)||(a={},Ed(b)&&(a[0]=!0,a[1]=!0),a=b.Gb=a);return a},$c,Fd=function(){};
H(Fd,Dd);var Gd=function(b){return(b=Ed(b))?new ActiveXObject(b):new XMLHttpRequest},Ed=function(b){if(!b.Jb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<a.length;d++){var c=a[d];try{return new ActiveXObject(c),b.Jb=c}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return b.Jb};$c=new Fd;var Ba=function(b){Z.call(this);
this.headers=new ia;this.ja=b||null;this.G=!1;this.ga=this.a=null;this.fa=this.Ga="";this.J=this.Fa=this.ea=this.Ia=!1;this.ia=0;this.ha=null;this.eb="";this.Ha=this.Mb=!1};H(Ba,Z);var qa=/^https?$/i,ae=["POST","PUT"],ad=[],Hd=function(b,a,d){var c=new Ba;ad.push(c);a&&c.listen("complete",a);c.cb("ready",c.uc);c.send(b,"POST",d,void 0)};Ba.prototype.uc=function(){this.$();Ab(ad,this)};Ba.prototype.send=function(b,a,d,c){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+
this.Ga+"; newUri="+b);a=a?a.toUpperCase():"GET";this.Ga=b;this.fa="";this.Ia=!1;this.G=!0;this.a=this.ja?Gd(this.ja):Gd($c);this.ga=this.ja?$b(this.ja):$b($c);this.a.onreadystatechange=A(this.fb,this);try{this.Fa=!0,this.a.open(a,String(b),!0),this.Fa=!1}catch(e){this.ka(5,e);return}b=d||"";var f=this.headers.clone();c&&Pa(c,function(b,a){f.set(a,b)});c=S(f.H());d=l.FormData&&b instanceof l.FormData;!(0<=la(ae,a))||c||d||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(b,
a){this.a.setRequestHeader(a,b)},this);this.eb&&(this.a.responseType=this.eb);"withCredentials"in this.a&&(this.a.withCredentials=this.Mb);try{Id(this),0<this.ia&&((this.Ha=be(this.a))?(this.a.timeout=this.ia,this.a.ontimeout=A(this.gb,this)):this.ha=Xc(this.gb,this.ia,this)),this.ea=!0,this.a.send(b),this.ea=!1}catch(e){this.ka(5,e)}};var be=function(b){return G&&I(9)&&w(b.timeout)&&f(b.ontimeout)},Pd=function(b){return"content-type"==b.toLowerCase()};Ba.prototype.gb=function(){"undefined"!=typeof h&&
this.a&&(this.fa="Timed out after "+this.ia+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};Ba.prototype.ka=function(b,a){this.G=!1;this.a&&(this.J=!0,this.a.abort(),this.J=!1);this.fa=a;yc(this);zc(this)};var yc=function(b){b.Ia||(b.Ia=!0,b.dispatchEvent("complete"),b.dispatchEvent("error"))};Ba.prototype.abort=function(){this.a&&this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),zc(this))};Ba.prototype.l=function(){this.a&&
(this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1),zc(this,!0));Ba.K.l.call(this)};Ba.prototype.fb=function(){this.ba||(this.Fa||this.ea||this.J?ce(this):this.lc())};Ba.prototype.lc=function(){ce(this)};var ce=function(b){if(b.G&&"undefined"!=typeof h&&(!b.ga[1]||4!=ac(b)||2!=bd(b)))if(b.ea&&4==ac(b))Xc(b.fb,0,b);else if(b.dispatchEvent("readystatechange"),4==ac(b)){b.G=!1;try{var a=bd(b),d,c;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!(d=
c)){var e;if(e=0===a){var f=Zc(1,String(b.Ga));if(!f&&self.location)var k=self.location.protocol,f=k.substr(0,k.length-1);e=!qa.test(f?f.toLowerCase():"")}d=e}if(d)b.dispatchEvent("complete"),b.dispatchEvent("success");else{var u;try{u=2<ac(b)?b.a.statusText:""}catch(l){u=""}b.fa=u+" ["+bd(b)+"]";yc(b)}}finally{zc(b)}}},zc=function(b,d){if(b.a){Id(b);var c=b.a,e=b.ga[0]?a:null;b.a=null;b.ga=null;d||b.dispatchEvent("ready");try{c.onreadystatechange=e}catch(f){}}},Id=function(b){b.a&&b.Ha&&(b.a.ontimeout=
null);w(b.ha)&&(l.clearTimeout(b.ha),b.ha=null)},ac=function(b){return b.a?b.a.readyState:0},bd=function(b){try{return 2<ac(b)?b.a.status:-1}catch(a){return-1}},cd=function(b,a,d){this.v=b||null;this.pc=!!d},Kb=function(b){if(!b.c&&(b.c=new ia,b.j=0,b.v))for(var a=b.v.split("&"),d=0;d<a.length;d++){var c=a[d].indexOf("="),e=null,f=null;0<=c?(e=a[d].substring(0,c),f=a[d].substring(c+1)):e=a[d];e=decodeURIComponent(e.replace(/\+/g," "));e=Jb(b,e);b.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}};
c=cd.prototype;c.c=null;c.j=null;c.add=function(b,a){Kb(this);this.v=null;b=Jb(this,b);var d=this.c.get(b);d||this.c.set(b,d=[]);d.push(a);this.j++;return this};c.remove=function(b){Kb(this);b=Jb(this,b);return this.c.R(b)?(this.v=null,this.j-=this.c.get(b).length,this.c.remove(b)):!1};c.R=function(b){Kb(this);b=Jb(this,b);return this.c.R(b)};c.H=function(){Kb(this);for(var b=this.c.w(),a=this.c.H(),d=[],c=0;c<a.length;c++)for(var e=b[c],f=0;f<e.length;f++)d.push(a[c]);return d};c.w=function(b){Kb(this);
var a=[];if(k(b))this.R(b)&&(a=u(a,this.c.get(Jb(this,b))));else{b=this.c.w();for(var d=0;d<b.length;d++)a=u(a,b[d])}return a};c.set=function(b,a){Kb(this);this.v=null;b=Jb(this,b);this.R(b)&&(this.j-=this.c.get(b).length);this.c.set(b,[a]);this.j++;return this};c.get=function(b,a){var d=b?this.w(b):[];return 0<d.length?String(d[0]):a};c.toString=function(){if(this.v)return this.v;if(!this.c)return"";for(var b=[],a=this.c.H(),d=0;d<a.length;d++)for(var c=a[d],e=encodeURIComponent(String(c)),c=this.w(c),
f=0;f<c.length;f++){var k=e;""!==c[f]&&(k+="="+encodeURIComponent(String(c[f])));b.push(k)}return this.v=b.join("&")};c.clone=function(){var b=new cd;b.v=this.v;this.c&&(b.c=this.c.clone(),b.j=this.j);return b};var Jb=function(b,a){var d=String(a);b.pc&&(d=d.toLowerCase());return d},Jd=function(b,a){this.ac=b;this.oa=a};Jd.prototype.send=function(b,a){if(U&&!navigator.onLine)return Td();var d=new X,c=de(b,a);c.length>this.oa?d.C({status:"payload-too-big",Ca:hc("Encoded hit length == %s, but should be <= %s.",
c.length,this.oa)}):Hd(this.ac,function(){d.t(we)},c);return d};var de=function(b,a){var d=new cd;d.add(dc.name,b);ma(a,function(b,a){d.add(b.name,a.toString())});return d.toString()},dd=function(b,a,d){this.e=b;this.Tb=a;this.oa=d};dd.prototype.Ta=function(){if(!this.r){if(!mc(this.e.Y).A)throw Error("Cannot construct shared channel prior to settings being ready.");new F;var b=new wc(new Jd(this.Tb,this.oa)),a=new $a;this.r=new Yc(this.e,new ab(this.e,new Cd(a,b)))}return this.r};var E=new ia,bb=
function(){if(!n){var b="chrome-extension:"==l.location.protocol?new Wb:new Xb;n=new pa(b)}return n};t("goog.async.Deferred",X);t("goog.async.Deferred.prototype.addCallback",X.prototype.N);t("goog.events.EventTarget",Z);t("goog.events.EventTarget.prototype.listen",Z.prototype.listen);t("analytics.getService",function(b,a){var d=E.get(b,null);if(null===d){if("chrome-extension:"==l.location.protocol)d=chrome.runtime.getManifest().version;else{if(!k(a)||/^[\s\xa0]*$/.test(a))throw Error("Invalid version. Must be non-empty string.");
d=a}var c=bb();if(!qb){var e=bb();qb=new Zd(e,new dd(e,"https://www.google-analytics.com/collect",8192))}d=new Hb("ca1.6.0prerelease",b,d,c,qb);E.set(b,d)}return d});t("analytics.internal.GoogleAnalyticsService",Hb);t("analytics.internal.GoogleAnalyticsService.prototype.getTracker",Hb.prototype.Dc);t("analytics.internal.GoogleAnalyticsService.prototype.getConfig",Hb.prototype.Cc);t("analytics.internal.ServiceSettings",pa);t("analytics.internal.ServiceSettings.prototype.setTrackingPermitted",pa.prototype.Mc);
t("analytics.internal.ServiceSettings.prototype.isTrackingPermitted",pa.prototype.ya);t("analytics.internal.ServiceSettings.prototype.setSampleRate",pa.prototype.Lc);t("analytics.internal.ServiceTracker",wa);t("analytics.internal.ServiceTracker.prototype.send",wa.prototype.send);t("analytics.internal.ServiceTracker.prototype.sendAppView",wa.prototype.Hc);t("analytics.internal.ServiceTracker.prototype.sendEvent",wa.prototype.Ic);t("analytics.internal.ServiceTracker.prototype.sendSocial",wa.prototype.Kc);
t("analytics.internal.ServiceTracker.prototype.sendException",wa.prototype.Jc);t("analytics.internal.ServiceTracker.prototype.sendTiming",wa.prototype.Eb);t("analytics.internal.ServiceTracker.prototype.startTiming",wa.prototype.Nc);t("analytics.internal.ServiceTracker.Timing",tc);t("analytics.internal.ServiceTracker.Timing.prototype.send",tc.prototype.send);t("analytics.internal.ServiceTracker.prototype.forceSessionStart",wa.prototype.Bc);t("analytics.internal.ServiceTracker.prototype.addFilter",
wa.prototype.V);t("analytics.internal.FilterChannel.Hit",wb);t("analytics.internal.FilterChannel.Hit.prototype.getHitType",wb.prototype.Ib);t("analytics.internal.FilterChannel.Hit.prototype.getParameters",wb.prototype.W);t("analytics.internal.FilterChannel.Hit.prototype.cancel",wb.prototype.cancel);t("analytics.ParameterMap",aa);t("analytics.ParameterMap.Entry",aa.Entry);t("analytics.ParameterMap.prototype.set",aa.prototype.set);t("analytics.ParameterMap.prototype.get",aa.prototype.get);t("analytics.ParameterMap.prototype.remove",
aa.prototype.remove);t("analytics.ParameterMap.prototype.toObject",aa.prototype.Lb);t("analytics.HitTypes.APPVIEW","appview");t("analytics.HitTypes.EVENT","event");t("analytics.HitTypes.SOCIAL","social");t("analytics.HitTypes.TRANSACTION","transaction");t("analytics.HitTypes.ITEM","item");t("analytics.HitTypes.TIMING","timing");t("analytics.HitTypes.EXCEPTION","exception");Na(Hc,function(b){var a=b.id.replace(/[A-Z]/,"_$&").toUpperCase();t("analytics.Parameters."+a,b)});t("analytics.filters.EventLabelerBuilder",
oa);t("analytics.filters.EventLabelerBuilder.prototype.appendToExistingLabel",oa.prototype.xc);t("analytics.filters.EventLabelerBuilder.prototype.stripValue",oa.prototype.Oc);t("analytics.filters.EventLabelerBuilder.prototype.powersOfTwo",oa.prototype.Fc);t("analytics.filters.EventLabelerBuilder.prototype.rangeBounds",oa.prototype.Gc);t("analytics.filters.EventLabelerBuilder.prototype.build",oa.prototype.Da);t("analytics.filters.FilterBuilder",Oa);t("analytics.filters.FilterBuilder.builder",Kc);t("analytics.filters.FilterBuilder.prototype.when",
Oa.prototype.when);t("analytics.filters.FilterBuilder.prototype.whenHitType",Oa.prototype.Ab);t("analytics.filters.FilterBuilder.prototype.whenValue",Oa.prototype.Pc);t("analytics.filters.FilterBuilder.prototype.applyFilter",Oa.prototype.zb);t("analytics.filters.FilterBuilder.prototype.build",Oa.prototype.Da);t("analytics.EventBuilder",ba);t("analytics.EventBuilder.builder",function(){return ic});t("analytics.EventBuilder.prototype.category",ba.prototype.yc);t("analytics.EventBuilder.prototype.action",
ba.prototype.action);t("analytics.EventBuilder.prototype.label",ba.prototype.label);t("analytics.EventBuilder.prototype.value",ba.prototype.value);t("analytics.EventBuilder.prototype.dimension",ba.prototype.zc);t("analytics.EventBuilder.prototype.metric",ba.prototype.Ec);t("analytics.EventBuilder.prototype.send",ba.prototype.send)})();define("third_party/googleAnalytics/google-analytics-bundle",function(){});
(function(){function c(a,d){return a.set(d[0],d[1]),a}function h(a,d){return a.add(d),a}function l(a,d,c){switch(c.length){case 0:return a.call(d);case 1:return a.call(d,c[0]);case 2:return a.call(d,c[0],c[1]);case 3:return a.call(d,c[0],c[1],c[2])}return a.apply(d,c)}function f(a,d,c,e){for(var f=-1,k=a.length;++f<k;){var h=a[f];d(e,h,c(h),a)}return e}function a(a,d){for(var c=-1,e=a.length;++c<e&&!1!==d(a[c],c,a););return a}function e(a,d){for(var c=-1,e=a.length;++c<e;)if(!d(a[c],c,a))return!1;
return!0}function p(a,d){for(var c=-1,e=a.length,f=-1,k=[];++c<e;){var h=a[c];d(h,c,a)&&(k[++f]=h)}return k}function r(a,d){return!!a.length&&-1<t(a,d,0)}function k(a,d,c){for(var e=-1,f=a.length;++e<f;)if(c(d,a[e]))return!0;return!1}function w(a,d){for(var c=-1,e=a.length,f=Array(e);++c<e;)f[c]=d(a[c],c,a);return f}function q(a,d){for(var c=-1,e=d.length,f=a.length;++c<e;)a[f+c]=d[c];return a}function v(a,d,c,e){var f=-1,k=a.length;for(e&&k&&(c=a[++f]);++f<k;)c=d(c,a[f],f,a);return c}function O(a,
d,c,e){var f=a.length;for(e&&f&&(c=a[--f]);f--;)c=d(c,a[f],f,a);return c}function P(a,d){for(var c=-1,e=a.length;++c<e;)if(d(a[c],c,a))return!0;return!1}function A(a,d,c){for(var e=-1,f=a.length;++e<f;){var k=a[e],h=d(k);if(null!=h&&(u===n?h===h:c(h,u)))var u=h,l=k}return l}function B(a,d,c,e){var f;return c(a,function(a,c,k){return d(a,c,k)?(f=e?c:a,!1):void 0}),f}function C(a,d,c){for(var e=a.length,f=c?e:-1;c?f--:++f<e;)if(d(a[f],f,a))return f;return-1}function t(a,d,c){if(d!==d)return Ma(a,c);
--c;for(var e=a.length;++c<e;)if(a[c]===d)return c;return-1}function H(a,d,c,e,f){return f(a,function(a,f,k){c=e?(e=!1,a):d(c,a,f,k)}),c}function N(a,d){var c=a.length;for(a.sort(d);c--;)a[c]=a[c].c;return a}function ka(a,d){for(var c,e=-1,f=a.length;++e<f;){var k=d(a[e]);k!==n&&(c=c===n?k:c+k)}return c}function ca(a,d){for(var c=-1,e=Array(a);++c<a;)e[c]=d(c);return e}function D(a,d){return w(d,function(d){return[d,a[d]]})}function la(a){return function(d){return a(d)}}function da(a,d){return w(d,
function(d){return a[d]})}function ha(a,d){for(var c=-1,e=a.length;++c<e&&-1<t(d,a[c],0););return c}function R(a,d){for(var c=a.length;c--&&-1<t(d,a[c],0););return c}function S(a){return a&&a.Object===Object?a:null}function Ab(a,d){if(a!==d){var c=null===a,e=a===n,f=a===a,k=null===d,h=d===n,u=d===d;if(a>d&&!k||!f||c&&!h&&u||e&&u)return 1;if(d>a&&!c||!u||k&&!e&&f||h&&f)return-1}return 0}function u(a){return ea[a]}function La(a){return W[a]}function Dc(a){return"\\"+jb[a]}function Ma(a,d,c){var e=a.length;
for(d+=c?0:-1;c?d--:++d<e;){var f=a[d];if(f!==f)return d}return-1}function Na(a){var d=!1;if(null!=a&&"function"!=typeof a.toString)try{d=!!(a+"")}catch(c){}return d}function ua(a,d){return a="number"==typeof a||Da.test(a)?+a:-1,-1<a&&0==a%1&&(null==d?9007199254740991:d)>a}function fb(a){for(var d,c=[];!(d=a.next()).done;)c.push(d.value);return c}function cc(a){var d=-1,c=Array(a.size);return a.forEach(function(a,e){c[++d]=[e,a]}),c}function Ca(a,d){for(var c=-1,e=a.length,f=-1,k=[];++c<e;){var h=
a[c];(h===d||"__lodash_placeholder__"===h)&&(a[c]="__lodash_placeholder__",k[++f]=c)}return k}function Nb(a){var d=-1,c=Array(a.size);return a.forEach(function(a){c[++d]=a}),c}function ia(a){if(!a||!ya.test(a))return a.length;for(var d=G.lastIndex=0;G.test(a);)d++;return d}function pb(a){return Fa[a]}function gb(z){function d(g){if(ja(g)&&!K(g)&&!(g instanceof J)){if(g instanceof S)return g;if(fa.call(g,"__wrapped__"))return Fd(g)}return new S(g)}function V(){}function S(g,y){this.__wrapped__=g;this.__actions__=
[];this.__chain__=!!y;this.__index__=0;this.__values__=n}function J(g){this.__wrapped__=g;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function U(){}function Ua(g){var y=-1,a=g?g.length:0;for(this.clear();++y<a;){var b=g[y];this.set(b[0],b[1])}}function ea(g){var y=-1,a=g?g.length:0;for(this.__data__=new Ua;++y<a;)this.push(g[y])}function Va(g,y){var a=g.__data__;return Zb(y)?(a=a.__data__,"__lodash_hash_undefined__"===
("string"==typeof y?a.string:a.hash)[y]):a.has(y)}function W(g){var y=-1,a=g?g.length:0;for(this.clear();++y<a;){var b=g[y];this.set(b[0],b[1])}}function za(g,y){var a=Fa(g,y);return 0>a?!1:(a==g.length-1?g.pop():ee.call(g,a,1),!0)}function Da(g,y){var a=Fa(g,y);return 0>a?n:g[a][1]}function Fa(g,y){for(var a=g.length;a--;)if(bb(g[a][0],y))return a;return-1}function Rb(g,y,a){var b=Fa(g,y);0>b?g.push([y,a]):g[b][1]=a}function jb(g,y,a,b){return g===n||bb(g,ed[a])&&!fa.call(b,a)?y:g}function kc(g,
y,a){(a===n||bb(g[y],a))&&("number"!=typeof y||a!==n||y in g)||(g[y]=a)}function Z(g,y,a){var b=g[y];fa.call(g,y)&&bb(b,a)&&(a!==n||y in g)||(g[y]=a)}function Pc(g,y,a,b){return Lb(g,function(g,d,c){y(b,g,a(g),c)}),b}function nd(g,y){return g&&lb(y,ta(y),g)}function lc(g,y){for(var a=-1,b=null==g,d=y.length,c=Array(d);++a<d;)c[a]=b?n:Kd(g,y[a]);return c}function od(g){return ga(g)?g:[]}function Ya(g){return"function"==typeof g?g:ob}function Xa(g){return K(g)?g:$c(g)}function Sb(g,y,a){return g===
g&&(a!==n&&(g=g>a?a:g),y!==n&&(g=y>g?y:g)),g}function va(g,y,b,d,c,e){var f;if(b&&(f=c?b(g,d,c,e):b(g)),f!==n)return f;if(!Y(g))return g;if(d=K(g)){if(f=ue(g),!y)return na(g,f)}else{var k=Ja(g),h="[object Function]"==k||"[object GeneratorFunction]"==k;if(Ue(g))return Vd(g,y);if("[object Object]"==k||"[object Arguments]"==k||h&&!c){if(Na(g))return c?g:{};if(f=ve(h?{}:g),!y)return Vb(g,nd(f,g))}else{if(!M[k])return c?g:{};f=we(g,k,y)}}return e||(e=new W),(c=e.get(g))?c:(e.set(g,f),(d?a:Ga)(g,function(a,
d){Z(f,d,va(a,y,b,d,g,e))}),d?f:Vb(g,f))}function Qc(g){var y=ta(g),a=y.length;return function(b){if(null==b)return!a;for(var d=a;d--;){var c=y[d],e=g[c],f=b[c];if(f===n&&!(c in Object(b))||!e(f))return!1}return!0}}function Db(g){return Y(g)?zf(g):{}}function Qd(g,y,a){if("function"!=typeof g)throw new cb("Expected a function");return fe(function(){g.apply(n,a)},y)}function sb(g,y,a,b){var d=-1,c=r,e=!0,f=g.length,h=[],u=y.length;if(!f)return h;a&&(y=w(y,la(a)));b?(c=k,e=!1):200<=y.length&&(c=Va,
e=!1,y=new ea(y));a:for(;++d<f;){var m=g[d],l=a?a(m):m;if(e&&l===l){for(var p=u;p--;)if(y[p]===l)continue a;h.push(m)}else c(y,l,b)||h.push(m)}return h}function Rd(g,y){var a=!0;return Lb(g,function(g,b,d){return a=!!y(g,b,d)}),a}function kb(g,a){var b=[];return Lb(g,function(g,d,c){a(g,d,c)&&b.push(g)}),b}function T(g,a,b,d){d||(d=[]);for(var c=-1,e=g.length;++c<e;){var f=g[c];0<a&&ga(f)&&(b||K(f)||m(f))?1<a?T(f,a-1,b,d):q(d,f):b||(d[d.length]=f)}return d}function re(g,a){return null==g?g:xe(g,a,
db)}function Ga(g,a){return g&&xe(g,a,ta)}function tb(g,a){return g&&Ve(g,a,ta)}function Sc(g,a){return p(a,function(a){return Ka(g[a])})}function Rc(g,a){a=ab(a,g)?[a+""]:Xa(a);for(var b=0,d=a.length;null!=g&&d>b;)g=g[a[b++]];return b&&b==d?g:n}function pd(g,a){return fa.call(g,a)||"object"==typeof g&&a in g&&null===ge(g)}function se(g,a){return a in Object(g)}function Eb(g,a,b){for(var d=b?k:r,c=g.length,e=c,f=Array(c),h=[];e--;){var u=g[e];e&&a&&(u=w(u,la(a)));f[e]=b||!a&&120>u.length?n:new ea(e&&
u)}var u=g[0],m=-1,l=u.length,p=f[0];a:for(;++m<l;){var z=u[m],q=a?a(z):z;if(p?!Va(p,q):!d(h,q,b)){for(e=c;--e;){var t=f[e];if(t?!Va(t,q):!d(g[e],q,b))continue a}p&&p.push(q);h.push(z)}}return h}function X(g,a,b,d){return Ga(g,function(g,c,e){a(d,b(g),c,e)}),d}function Fb(g,a,b){return ab(a,g)||(a=Xa(a),g=$b(g,a),a=qa(a)),a=null==g?g:g[a],null==a?n:l(a,g,b)}function ub(g,a,b,d,c){if(g===a)return!0;if(null==g||null==a||!Y(g)&&!ja(a))return g!==g&&a!==a;var e=K(g),f=K(a),k="[object Array]",h="[object Array]";
e||(k=Ja(g),"[object Arguments]"==k?k="[object Object]":"[object Object]"!=k&&(e=fd(g)));f||(h=Ja(a),"[object Arguments]"==h?h="[object Object]":"[object Object]"!=h&&fd(a));var u="[object Object]"==k&&!Na(g),f="[object Object]"==h&&!Na(a),h=k==h;!h||e||u?2&d||(k=u&&fa.call(g,"__wrapped__"),f=f&&fa.call(a,"__wrapped__"),!k&&!f)?h?(c||(c=new W),g=(e?Zd:$d)(g,a,ub,b,d,c)):g=!1:g=ub(k?g.value():g,f?a.value():a,b,d,c):g=nb(g,a,k,ub,b,d);return g}function vb(g,a,b,d){var c=b.length,e=c,f=!d;if(null==g)return!e;
for(g=Object(g);c--;){var k=b[c];if(f&&k[2]?k[1]!==g[k[0]]:!(k[0]in g))return!1}for(;++c<e;){var k=b[c],h=k[0],u=g[h],m=k[1];if(f&&k[2]){if(u===n&&!(h in g))return!1}else if(k=new W,h=d?d(u,m,h,g,a,k):n,h===n?!ub(m,u,d,3,k):!h)return!1}return!0}function mc(g){var a=typeof g;return"function"==a?g:null==g?ob:"object"==a?K(g)?Td(g[0],g[1]):Ub(g):We(g)}function rd(g){g=null==g?g:Object(g);var a,b=[];for(a in g)b.push(a);return b}function qd(g,a){var b=-1,d=x(g)?Array(g.length):[];return Lb(g,function(g,
c,e){d[++b]=a(g,c,e)}),d}function Ub(g){var a=Yc(g);if(1==a.length&&a[0][2]){var b=a[0][0],d=a[0][1];return function(g){return null==g?!1:g[b]===d&&(d!==n||b in Object(g))}}return function(b){return b===g||vb(b,g,a)}}function Td(g,a){return function(b){var d=Kd(b,g);return d===n&&d===a?Xe(b,g):ub(a,d,n,3)}}function Gb(g,b,d,c,e){if(g!==b){var f=K(b)||fd(b)?n:db(b);a(f||b,function(a,k){if(f&&(k=a,a=b[k]),Y(a)){e||(e=new W);var h=k,u=e,l=g[h],p=b[h],z=u.get(p);if(!z){var z=c?c(l,p,h+"",g,b,u):n,r=z===
n;r&&(z=p,K(p)||fd(p)?K(l)?z=l:ga(l)?z=na(l):(r=!1,z=va(p,!0)):oe(p)||m(p)?m(l)?z=Ye(l):!Y(l)||d&&Ka(l)?(r=!1,z=va(p,!0)):z=l:r=!1);u.set(p,z);r&&Gb(z,p,d,c,u)}kc(g,h,z)}else h=c?c(g[k],a,k+"",g,b,e):n,h===n&&(h=a),kc(g,k,h)})}}function Tb(g,a,b){var d=-1,c=F();return a=w(a.length?a:Array(1),function(g){return c(g)}),g=qd(g,function(g,b,c){return{a:w(a,function(a){return a(g)}),b:++d,c:g}}),N(g,function(g,a){var y;a:{y=-1;for(var d=g.a,c=a.a,e=d.length,f=b.length;++y<e;){var k=Ab(d[y],c[y]);if(k){if(y>=
f){y=k;break a}y=k*("desc"==b[y]?-1:1);break a}}y=g.b-a.b}return y})}function sd(g,a){return g=Object(g),v(a,function(a,b){return b in g&&(a[b]=g[b]),a},{})}function nc(g,a){var b={};return re(g,function(g,d){a(g,d)&&(b[d]=g)}),b}function oc(g){return function(a){return null==a?n:a[g]}}function wb(g){return function(a){return Rc(a,g)}}function pc(g,a,b){var d=-1,c=a.length,e=g;for(b&&(e=w(g,function(g){return b(g)}));++d<c;)for(var f=0,k=a[d],k=b?b(k):k;-1<(f=t(e,k,f));)e!==g&&ee.call(e,f,1),ee.call(g,
f,1);return g}function td(g,a){for(var b=g?a.length:0,d=b-1;b--;){var c=a[b];if(d==b||c!=e){var e=c;if(ua(c))ee.call(g,c,1);else if(ab(c,g))delete g[c];else{var c=Xa(c),f=$b(g,c);null!=f&&delete f[qa(c)]}}}return g}function Tc(g,a){return g+he(Ze()*(a-g+1))}function Uc(g,a,b,d){a=ab(a,g)?[a+""]:Xa(a);for(var c=-1,e=a.length,f=e-1,k=g;null!=k&&++c<e;){var h=a[c];if(Y(k)){var u=b;if(c!=f){var m=k[h],u=d?d(m,h,k):n;u===n&&(u=null==m?ua(a[c+1])?[]:{}:m)}Z(k,h,u)}k=k[h]}return g}function Ha(g,a,b){var d=
-1,c=g.length;0>a&&(a=-a>c?0:c+a);b=b>c?c:b;0>b&&(b+=c);c=a>b?0:b-a>>>0;a>>>=0;for(b=Array(c);++d<c;)b[d]=g[d+a];return b}function Ud(g,a){var b;return Lb(g,function(g,d,c){return b=a(g,d,c),!b}),!!b}function qc(g,a,b){var d=0,c=g?g.length:d;if("number"==typeof a&&a===a&&2147483647>=c){for(;c>d;){var e=d+c>>>1,f=g[e];(b?a>=f:a>f)&&null!==f?d=e+1:c=e}return c}return rc(g,a,ob,b)}function rc(g,a,b,d){a=b(a);for(var c=0,e=g?g.length:0,f=a!==a,k=null===a,h=a===n;e>c;){var u=he((c+e)/2),m=b(g[u]),l=m!==
n,p=m===m;(f?p||d:k?p&&l&&(d||null!=m):h?p&&(d||l):null==m?0:d?a>=m:a>m)?c=u+1:e=u}return eb(e,4294967294)}function ud(g,a){for(var b=0,d=g.length,c=g[0],e=a?a(c):c,f=e,k=0,h=[c];++b<d;)c=g[b],e=a?a(c):c,bb(e,f)||(f=e,h[++k]=c);return h}function xb(g,a,b){var d=-1,c=r,e=g.length,f=!0,h=[],u=h;if(b)f=!1,c=k;else if(200>e)u=a?[]:h;else{if(c=a?null:Af(g))return Nb(c);f=!1;c=Va;u=new ea}a:for(;++d<e;){var m=g[d],l=a?a(m):m;if(f&&l===l){for(var p=u.length;p--;)if(u[p]===l)continue a;a&&u.push(l);h.push(m)}else c(u,
l,b)||(u!==h&&u.push(l),h.push(m))}return h}function sc(g,a,b,d){for(var c=g.length,e=d?c:-1;(d?e--:++e<c)&&a(g[e],e,g););return b?Ha(g,d?0:e,d?e+1:c):Ha(g,d?e+1:0,d?c:e)}function vd(g,a){var b=g;return b instanceof J&&(b=b.value()),v(a,function(g,a){return a.func.apply(a.thisArg,q([g],a.args))},b)}function wd(g,a,b){for(var d=-1,c=g.length;++d<c;)var e=e?q(sb(e,g[d],a,b),sb(g[d],e,a,b)):g[d];return e&&e.length?xb(e,a,b):[]}function xd(g,a,b){for(var d=-1,c=g.length,e=a.length,f={};++d<c;)b(f,g[d],
e>d?a[d]:n);return f}function Vd(g,a){if(a)return g.slice();var b=new g.constructor(g.length);return g.copy(b),b}function wa(g){var a=new g.constructor(g.byteLength);return(new ie(a)).set(new ie(g)),a}function tc(g,a,b,d){var c=-1,e=g.length,f=b.length,k=-1,h=a.length,u=ra(e-f,0),m=Array(h+u);for(d=!d;++k<h;)m[k]=a[k];for(;++c<f;)(d||e>c)&&(m[b[c]]=g[c]);for(;u--;)m[k++]=g[c++];return m}function Hb(g,a,b,d){var c=-1,e=g.length,f=-1,k=b.length,h=-1,u=a.length,m=ra(e-k,0),l=Array(m+u);for(d=!d;++c<
m;)l[c]=g[c];for(m=c;++h<u;)l[m+h]=a[h];for(;++f<k;)(d||e>c)&&(l[m+b[f]]=g[c++]);return l}function na(g,a){var b=-1,d=g.length;for(a||(a=Array(d));++b<d;)a[b]=g[b];return a}function lb(g,a,b){return Vc(g,a,b)}function Vc(g,a,b,d){b||(b={});for(var c=-1,e=a.length;++c<e;){var f=a[c],k=d?d(b[f],g[f],f,b,g):g[f];Z(b,f,k)}return b}function Vb(g,a){return lb(g,Bf(g),a)}function Wc(g,a){return function(b,d){var c=K(b)?f:Pc,e=a?a():{};return c(b,g,F(d),e)}}function pa(g){return E(function(a,b){var d=-1,
c=b.length,e=1<c?b[c-1]:n,f=2<c?b[2]:n,e="function"==typeof e?(c--,e):n;f&&$a(b[0],b[1],f)&&(e=3>c?n:e,c=1);for(a=Object(a);++d<c;)(f=b[d])&&g(a,f,d,e);return a})}function Wd(g,a){return function(b,d){if(null==b)return b;if(!x(b))return g(b,d);for(var c=b.length,e=a?c:-1,f=Object(b);(a?e--:++e<c)&&!1!==d(f[e],e,f););return b}}function yd(g){return function(a,b,d){var c=-1,e=Object(a);d=d(a);for(var f=d.length;f--;){var k=d[g?f:++c];if(!1===b(e[k],k,e))break}return a}}function te(g,a,b){function d(){return(this&&
this!==Aa&&this instanceof d?e:g).apply(c?b:this,arguments)}var c=1&a,e=uc(g);return d}function Xd(g){return function(a){a=Q(a);var b=ya.test(a)?a.match(G):n,d=b?b[0]:a.charAt(0);return a=b?b.slice(1).join(""):a.slice(1),d[g]()+a}}function yb(g){return function(a){return v($e(af(a)),g,"")}}function uc(g){return function(){var a=arguments;switch(a.length){case 0:return new g;case 1:return new g(a[0]);case 2:return new g(a[0],a[1]);case 3:return new g(a[0],a[1],a[2]);case 4:return new g(a[0],a[1],a[2],
a[3]);case 5:return new g(a[0],a[1],a[2],a[3],a[4]);case 6:return new g(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new g(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var b=Db(g.prototype),a=g.apply(b,a);return Y(a)?a:b}}function Yd(g,a,b){function d(){for(var e=arguments.length,f=Array(e),k=e,h=Yb(d);k--;)f[k]=arguments[k];return k=3>e&&f[0]!==h&&f[e-1]!==h?[]:Ca(f,h),e-=k.length,b>e?Bd(g,a,Za,d.placeholder,n,f,k,n,n,b-e):l(this&&this!==Aa&&this instanceof d?c:g,this,f)}var c=uc(g);return d}function zd(g){return E(function(a){a=
T(a,1);var b=a.length,d=b,c=S.prototype.thru;for(g&&a.reverse();d--;){var e=a[d];if("function"!=typeof e)throw new cb("Expected a function");if(c&&!f&&"wrapper"==vc(e))var f=new S([],!0)}for(d=f?d:b;++d<b;)var e=a[d],c=vc(e),k="wrapper"==c?ye(e):n,f=k&&xc(k[0])&&424==k[1]&&!k[4].length&&1==k[9]?f[vc(k[0])].apply(f,k[3]):1==e.length&&xc(e)?f[c]():f.thru(e);return function(){var g=arguments,d=g[0];if(f&&1==g.length&&K(d)&&200<=d.length)return f.plant(d).value();for(var c=0,g=b?a[c].apply(this,g):d;++c<
b;)g=a[c].call(this,g);return g}})}function Za(g,a,b,d,c,e,f,k,h,u){function m(){for(var t=arguments.length,R=t,v=Array(t);R--;)v[R]=arguments[R];if(r){var La,V=Yb(m),R=v.length;for(La=0;R--;)v[R]===V&&La++}if(d&&(v=tc(v,d,c,r)),e&&(v=Hb(v,e,f,r)),t-=La,r&&u>t)return V=Ca(v,V),Bd(g,a,Za,m.placeholder,b,v,V,k,h,u-t);if(V=p?b:this,R=z?V[g]:g,t=v.length,k){La=v.length;for(var H=eb(k.length,La),S=na(v);H--;){var A=k[H];v[H]=ua(A,La)?S[A]:n}}else q&&1<t&&v.reverse();return l&&t>h&&(v.length=h),this&&this!==
Aa&&this instanceof m&&(R=w||uc(R)),R.apply(V,v)}var l=128&a,p=1&a,z=2&a,r=24&a,q=512&a,w=z?n:uc(g);return m}function Wb(g,a){return function(b,d){return X(b,g,a(d),{})}}function Ad(g){return E(function(a){return a=w(T(a,1),F()),E(function(b){var d=this;return g(a,function(g){return l(g,d,b)})})})}function Ib(g,a,b){return a=L(a),g=ia(g),a&&a>g?(a-=g,b=b===n?" ":b+"",g=bf(b,je(a/ia(b))),ya.test(b)?g.match(G).slice(0,a).join(""):g.slice(0,a)):""}function Xc(g,a,b,d){function c(){for(var a=-1,y=arguments.length,
k=-1,h=d.length,u=Array(h+y),m=this&&this!==Aa&&this instanceof c?f:g;++k<h;)u[k]=d[k];for(;y--;)u[k++]=arguments[++a];return l(m,e?b:this,u)}var e=1&a,f=uc(g);return c}function Xb(g){return function(a,b,d){d&&"number"!=typeof d&&$a(a,b,d)&&(b=d=n);a=sa(a);a=a===a?a:0;b===n?(b=a,a=0):b=sa(b)||0;d=d===n?b>a?1:-1:sa(d)||0;var c=-1;b=ra(je((b-a)/(d||1)),0);for(var e=Array(b);b--;)e[g?b:++c]=a,a+=d;return e}}function Bd(g,a,b,d,c,e,f,k,h,u){var m=8&a;k=k?na(k):n;var l=m?f:n;f=m?n:f;var p=m?e:n;return e=
m?n:e,a=(a|(m?32:64))&~(m?64:32),4&a||(a&=-4),a=[g,a,c,p,l,e,f,k,h,u],b=b.apply(n,a),xc(g)&&cf(b,a),b.placeholder=d,b}function mb(g){var a=gd[g];return function(g,b){if(g=sa(g),b=L(b)){var d=(Q(g)+"e").split("e"),d=a(d[0]+"e"+(+d[1]+b)),d=(Q(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-b))}return a(g)}}function Ia(g,a,b,d,c,e,f,k){var h=2&a;if(!h&&"function"!=typeof g)throw new cb("Expected a function");var u=d?d.length:0;if(u||(a&=-97,d=c=n),f=f===n?f:ra(L(f),0),k=k===n?k:L(k),u-=c?c.length:0,64&a){var m=
d,l=c;d=c=n}var p=h?n:ye(g);return e=[g,a,b,d,c,m,l,e,f,k],p&&(b=e[1],g=p[1],a=b|g,d=128==g&&8==b||128==g&&256==b&&p[8]>=e[7].length||384==g&&p[8]>=p[7].length&&8==b,131>a||d)&&(1&g&&(e[2]=p[2],a|=1&b?0:4),(b=p[3])&&(d=e[3],e[3]=d?tc(d,b,p[4]):na(b),e[4]=d?Ca(e[3],"__lodash_placeholder__"):na(p[4])),(b=p[5])&&(d=e[5],e[5]=d?Hb(d,b,p[6]):na(b),e[6]=d?Ca(e[5],"__lodash_placeholder__"):na(p[6])),(b=p[7])&&(e[7]=na(b)),128&g&&(e[8]=null==e[8]?p[8]:eb(e[8],p[8])),null==e[9]&&(e[9]=p[9]),e[0]=p[0],e[1]=
a),g=e[0],a=e[1],b=e[2],d=e[3],c=e[4],k=e[9]=null==e[9]?h?0:g.length:ra(e[9]-u,0),!k&&24&a&&(a&=-25),h=a&&1!=a?8==a||16==a?Yd(g,a,k):32!=a&&33!=a||c.length?Za.apply(n,e):Xc(g,a,b,d):te(g,a,b),(p?df:cf)(h,e)}function Zd(g,a,b,d,c,e){var f=-1,k=2&c,h=1&c,u=g.length,m=a.length;if(!(u==m||k&&m>u))return!1;if(m=e.get(g))return m==a;m=!0;for(e.set(g,a);++f<u;){var l=g[f],p=a[f];if(d)var z=k?d(p,l,f,a,g,e):d(l,p,f,g,a,e);if(z!==n){if(z)continue;m=!1;break}if(h){if(!P(a,function(g){return l===g||b(l,g,d,
c,e)})){m=!1;break}}else if(l!==p&&!b(l,p,d,c,e)){m=!1;break}}return e["delete"](g),m}function nb(g,a,b,d,c,e){switch(b){case "[object ArrayBuffer]":if(g.byteLength!=a.byteLength||!d(new ie(g),new ie(a)))break;return!0;case "[object Boolean]":case "[object Date]":return+g==+a;case "[object Error]":return g.name==a.name&&g.message==a.message;case "[object Number]":return g!=+g?a!=+a:g==+a;case "[object RegExp]":case "[object String]":return g==a+"";case "[object Map]":var f=cc;case "[object Set]":return f||
(f=Nb),(2&e||g.size==a.size)&&d(f(g),f(a),c,1|e);case "[object Symbol]":return!!Mb&&ze.call(g)==ze.call(a)}return!1}function $d(g,a,b,d,c,e){var f=2&c,k=ta(g),h=k.length,u=ta(a).length;if(h!=u&&!f)return!1;for(var m=h;m--;){var l=k[m];if(!(f?l in a:pd(a,l)))return!1}if(u=e.get(g))return u==a;u=!0;e.set(g,a);for(var p=f;++m<h;){var l=k[m],z=g[l],r=a[l];if(d)var q=f?d(r,z,l,a,g,e):d(z,r,l,g,a,e);if(q===n?z!==r&&!b(z,r,d,c,e):!q){u=!1;break}p||(p="constructor"==l)}return u&&!p&&(b=g.constructor,d=a.constructor,
b!=d&&"constructor"in g&&"constructor"in a&&!("function"==typeof b&&b instanceof b&&"function"==typeof d&&d instanceof d)&&(u=!1)),e["delete"](g),u}function vc(g){for(var a=g.name+"",b=Ld[a],d=fa.call(Ld,a)?b.length:0;d--;){var c=b[d],e=c.func;if(null==e||e==g)return c.name}return a}function F(){var g=d.iteratee||Ae,g=g===Ae?mc:g;return arguments.length?g(arguments[0],arguments[1]):g}function Yc(g){g=ef(g);for(var a=g.length;a--;){var b,d=g[a];b=g[a][1];b=b===b&&!Y(b);d[2]=b}return g}function wc(g,
a){var b=null==g?n:g[a];return Me(b)?b:n}function Yb(g){return(fa.call(d,"placeholder")?d:g).placeholder}function Ja(g){return xa.call(g)}function Sd(g,a,b){if(null==g)return!1;var d=b(g,a);return d||ab(a)||(a=Xa(a),g=$b(g,a),null!=g&&(a=qa(a),d=b(g,a))),b=g?g.length:n,d||!!b&&jd(b)&&ua(a,b)&&(K(g)||Ac(g)||m(g))}function ue(g){var a=g.length,b=g.constructor(a);return a&&"string"==typeof g[0]&&fa.call(g,"index")&&(b.index=g.index,b.input=g.input),b}function ve(g){return Ka(g.constructor)&&!Zc(g)?Db(ge(g)):
{}}function we(g,a,b){var d=g.constructor;switch(a){case "[object ArrayBuffer]":return wa(g);case "[object Boolean]":case "[object Date]":return new d(+g);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return a=g.buffer,b=b?wa(a):a,new g.constructor(b,g.byteOffset,g.length);case "[object Map]":return b=
g.constructor,v(cc(g),c,new b);case "[object Number]":case "[object String]":return new d(g);case "[object RegExp]":return b=new g.constructor(g.source,ma.exec(g)),b.lastIndex=g.lastIndex,b;case "[object Set]":return b=g.constructor,v(Nb(g),h,new b);case "[object Symbol]":return Mb?Object(ze.call(g)):{}}}function Cd(g){var a=g?g.length:n;return jd(a)&&(K(g)||Ac(g)||m(g))?ca(a,String):null}function $a(g,a,b){if(!Y(b))return!1;var d=typeof a;return("number"==d?x(b)&&ua(a,b.length):"string"==d&&a in
b)?bb(b[a],g):!1}function ab(g,a){return"number"==typeof g?!0:!K(g)&&(Oa.test(g)||!Jc.test(g)||null!=a&&g in Object(a))}function Zb(g){var a=typeof g;return"number"==a||"boolean"==a||"string"==a&&"__proto__"!=g||null==g}function xc(g){var a=vc(g),b=d[a];return"function"==typeof b&&a in J.prototype?g===b?!0:(a=ye(b),!!a&&g===a[0]):!1}function Zc(g){var a=g&&g.constructor,a=Ka(a)&&a.prototype||ed;return g===a}function Dd(g,a,b,d,c,e){return Y(g)&&Y(a)&&(e.set(a,g),Gb(g,a,n,Dd,e)),g}function $b(g,a){return 1==
a.length?g:Kd(g,Ha(a,0,-1))}function $c(g){var a=[];return Q(g).replace(Kc,function(g,b,d,c){a.push(d?c.replace(Pa,"$1"):b||g)}),a}function Fd(g){if(g instanceof J)return g.clone();var a=new S(g.__wrapped__,g.__chain__);return a.__actions__=na(g.__actions__),a.__index__=g.__index__,a.__values__=g.__values__,a}function Gd(g,a,b){var d=g?g.length:0;return d?(a=b||a===n?1:L(a),Ha(g,0>a?0:a,d)):[]}function Ed(g,a,b){var d=g?g.length:0;return d?(a=b||a===n?1:L(a),a=d-a,Ha(g,0,0>a?0:a)):[]}function Ba(g){return g?
g[0]:n}function qa(g){var a=g?g.length:0;return a?g[a-1]:n}function ae(g,a){return g&&g.length&&a&&a.length?pc(g,a):g}function ad(g){return g?Cf.call(g):g}function Hd(g){if(!g||!g.length)return[];var a=0;return g=p(g,function(g){return ga(g)?(a=ra(g.length,a),!0):void 0}),ca(a,function(a){return w(g,oc(a))})}function be(g,a){if(!g||!g.length)return[];var b=Hd(g);return null==a?b:w(b,function(g){return l(a,n,g)})}function Pd(g){return g=d(g),g.__chain__=!0,g}function yc(g,a){return a(g)}function ce(){return this}
function zc(g,b){return"function"==typeof b&&K(g)?a(g,b):Lb(g,Ya(b))}function Id(g,a){var b;if("function"==typeof a&&K(g)){for(b=g.length;b--&&!1!==a(g[b],b,g););b=g}else b=Be(g,Ya(a));return b}function ac(g,a){return(K(g)?w:qd)(g,F(a,3))}function bd(g,a){var b=-1,d=Ce(g),c=d.length,e=c-1;for(a=Sb(L(a),0,c);++b<a;){var c=Tc(b,e),f=d[c];d[c]=d[b];d[b]=f}return d.length=a,d}function cd(g,a,b){return a=b?n:a,a=g&&null==a?g.length:a,Ia(g,128,n,n,n,n,a)}function Kb(g,a){var b;if("function"!=typeof a)throw new cb("Expected a function");
return g=L(g),function(){return 0<--g&&(b=a.apply(this,arguments)),1>=g&&(a=n),b}}function Jb(g,a,b){return a=b?n:a,g=Ia(g,8,n,n,n,n,n,a),g.placeholder=Jb.placeholder,g}function Jd(a,b,d){return b=d?n:b,a=Ia(a,16,n,n,n,n,n,b),a.placeholder=Jd.placeholder,a}function de(a,b,d){function c(){r&&Md(r);m&&Md(m);w=0;u=m=z=r=q=n}function e(b,d){d&&Md(d);m=r=q=n;b&&(w=Nd(),l=a.apply(z,u),r||m||(u=z=n))}function f(){var a=b-(Nd()-p);0>=a||a>b?e(q,m):r=fe(f,a)}function k(){e(R,r)}function h(){if(u=arguments,
p=Nd(),z=this,q=R&&(r||!t),!1===v)var d=t&&!r;else{w||m||t||(w=p);var c=v-(p-w),e=(0>=c||c>v)&&(t||m);e?(m&&(m=Md(m)),w=p,l=a.apply(z,u)):m||(m=fe(k,c))}return e&&r?r=Md(r):r||b===v||(r=fe(f,b)),d&&(e=!0,l=a.apply(z,u)),!e||r||m||(u=z=n),l}var u,m,l,p,z,r,q,w=0,t=!1,v=!1,R=!0;if("function"!=typeof a)throw new cb("Expected a function");return b=sa(b)||0,Y(d)&&(t=!!d.leading,v="maxWait"in d&&ra(sa(d.maxWait)||0,b),R="trailing"in d?!!d.trailing:R),h.cancel=c,h.flush=function(){return(r&&q||m&&R)&&(l=
a.apply(z,u)),c(),l},h}function dd(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new cb("Expected a function");var d=function(){var c=arguments,e=b?b.apply(this,c):c[0],f=d.cache;return f.has(e)?f.get(e):(c=a.apply(this,c),d.cache=f.set(e,c),c)};return d.cache=new dd.Cache,d}function E(a,b){if("function"!=typeof a)throw new cb("Expected a function");return b=ra(b===n?a.length-1:L(b),0),function(){for(var d=arguments,c=-1,e=ra(d.length-b,0),f=Array(e);++c<e;)f[c]=d[b+c];switch(b){case 0:return a.call(this,
f);case 1:return a.call(this,d[0],f);case 2:return a.call(this,d[0],d[1],f)}e=Array(b+1);for(c=-1;++c<b;)e[c]=d[c];return e[b]=f,l(a,this,e)}}function bb(a,b){return a===b||a!==a&&b!==b}function b(a,b){return a>b}function m(a){return ga(a)&&fa.call(a,"callee")&&(!ff.call(a,"callee")||"[object Arguments]"==xa.call(a))}function x(a){return null!=a&&!("function"==typeof a&&Ka(a))&&jd(Df(a))}function ga(a){return ja(a)&&x(a)}function ne(a){return ja(a)?"[object Error]"==xa.call(a)||"string"==typeof a.message&&
"string"==typeof a.name:!1}function Ka(a){return a=Y(a)?xa.call(a):"","[object Function]"==a||"[object GeneratorFunction]"==a}function Le(a){return"number"==typeof a&&a==L(a)}function jd(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function Y(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function ja(a){return!!a&&"object"==typeof a}function Me(a){return null==a?!1:Ka(a)?gf.test(bc.call(a)):ja(a)&&(Na(a)?gf:Qa).test(a)}function Ne(a){return"number"==typeof a||ja(a)&&"[object Number]"==
xa.call(a)}function oe(a){return!ja(a)||"[object Object]"!=xa.call(a)||Na(a)?!1:(a=ge(a),null===a?!0:(a=a.constructor,"function"==typeof a&&a instanceof a&&bc.call(a)==Ef))}function hf(a){return Y(a)&&"[object RegExp]"==xa.call(a)}function Ac(a){return"string"==typeof a||!K(a)&&ja(a)&&"[object String]"==xa.call(a)}function jf(a){return"symbol"==typeof a||ja(a)&&"[object Symbol]"==xa.call(a)}function fd(a){return ja(a)&&jd(a.length)&&!!I[xa.call(a)]}function De(a,b){return b>a}function Ce(a){if(!a)return[];
if(x(a))return Ac(a)?a.match(G):na(a);if(Bc&&a[Bc])return fb(a[Bc]());var b=Ja(a);return("[object Map]"==b?cc:"[object Set]"==b?Nb:ke)(a)}function L(a){if(!a)return 0===a?a:0;if(a=sa(a),a===qb||a===-qb)return 1.7976931348623157E308*(0>a?-1:1);var b=a%1;return a===a?b?a-b:a:0}function kf(a){return a?Sb(L(a),0,4294967295):0}function sa(a){if(Y(a)&&(a=Ka(a.valueOf)?a.valueOf():a,a=Y(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(hc,"");var b=ib.test(a);return b||jc.test(a)?Ta(a.slice(2),
b?2:8):ic.test(a)?dc:+a}function Ye(a){return lb(a,db(a))}function Q(a){if("string"==typeof a)return a;if(null==a)return"";if(jf(a))return Mb?Ff.call(a):"";var b=a+"";return"0"==b&&1/a==-qb?"-0":b}function Kd(a,b,d){return a=null==a?n:Rc(a,b),a===n?d:a}function lf(a,b){return Sd(a,b,pd)}function Xe(a,b){return Sd(a,b,se)}function ta(a){var b=Zc(a);if(!b&&!x(a))return Gf(Object(a));var d,c=Cd(a),e=!!c,c=c||[],f=c.length;for(d in a)!pd(a,d)||e&&("length"==d||ua(d,f))||b&&"constructor"==d||c.push(d);
return c}function db(a){for(var b=-1,d=Zc(a),c=rd(a),e=c.length,f=Cd(a),k=!!f,f=f||[],h=f.length;++b<e;){var u=c[b];k&&("length"==u||ua(u,h))||"constructor"==u&&(d||!fa.call(a,u))||f.push(u)}return f}function ef(a){return D(a,ta(a))}function ke(a){return a?da(a,ta(a)):[]}function Ee(a){return mf(Q(a).toLowerCase())}function af(a){return(a=Q(a))&&a.replace(Ob,u).replace(Mc,"")}function bf(a,b){a=Q(a);b=L(b);var d="";if(!a||1>b||9007199254740991<b)return d;do b%2&&(d+=a),b=he(b/2),a+=a;while(b);return d}
function $e(a,b,d){return a=Q(a),b=d?n:b,b===n&&(b=Sa.test(a)?Pb:Ra),a.match(b)||[]}function Fe(a){return function(){return a}}function ob(a){return a}function Ae(a){return mc("function"==typeof a?a:va(a,!0))}function Ge(b,d,c){var e=ta(d),f=Sc(d,e);null!=c||Y(d)&&(f.length||!e.length)||(c=d,d=b,b=this,f=Sc(d,ta(d)));var k=Y(c)&&"chain"in c?c.chain:!0,h=Ka(b);return a(f,function(a){var c=d[a];b[a]=c;h&&(b.prototype[a]=function(){var a=this.__chain__;if(k||a){var d=b(this.__wrapped__);return(d.__actions__=
na(this.__actions__)).push({func:c,args:arguments,thisArg:b}),d.__chain__=a,d}return c.apply(b,q([this.value()],arguments))})}),b}function He(){}function We(a){return ab(a)?oc(a):wb(a)}function nf(a){return a&&a.length?ka(a,ob):0}z=z?Wa.defaults({},z,Wa.pick(Aa,Qb)):Aa;var Hf=z.Date,If=z.Error,gd=z.Math,Ie=z.RegExp,cb=z.TypeError,le=z.Array.prototype,ed=z.Object.prototype,bc=z.Function.prototype.toString,fa=ed.hasOwnProperty,Jf=0,Ef=bc.call(Object),xa=ed.toString,Kf=Aa._,gf=Ie("^"+bc.call(fa).replace(oa,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),of=Oc?z.Buffer:n,pf=z.Reflect,Mb=z.Symbol,ie=z.Uint8Array,Md=z.clearTimeout,qf=pf?pf.enumerate:n,ge=Object.getPrototypeOf,Lf=Object.getOwnPropertySymbols,Bc="symbol"==typeof(Bc=Mb&&Mb.iterator)?Bc:n,zf=Object.create,ff=ed.propertyIsEnumerable,fe=z.setTimeout,ee=le.splice,je=gd.ceil,he=gd.floor,Mf=z.isFinite,Nf=le.join,Gf=Object.keys,ra=gd.max,eb=gd.min,Of=z.parseInt,Ze=gd.random,Cf=le.reverse,zb=wc(z,"Map"),Cc=
wc(z,"Set"),hd=wc(z,"WeakMap"),id=wc(Object,"create"),me=hd&&new hd,Pf=zb?bc.call(zb):"",Qf=Cc?bc.call(Cc):"",Rf=hd?bc.call(hd):"",rf=Mb?Mb.prototype:n,ze=Mb?rf.valueOf:n,Ff=Mb?rf.toString:n,Ld={};d.templateSettings={escape:fc,evaluate:Ic,interpolate:gc,variable:"",imports:{_:d}};var Lb=Wd(Ga),Be=Wd(tb,!0),xe=yd(),Ve=yd(!0);qf&&!ff.call({valueOf:1},"valueOf")&&(rd=function(a){return fb(qf(a))});var df=me?function(a,b){return me.set(a,b),a}:ob,Af=Cc&&2===(new Cc([1,2])).size?function(a){return new Cc(a)}:
He,ye=me?function(a){return me.get(a)}:He,Df=oc("length"),Bf=Lf||function(){return[]};(zb&&"[object Map]"!=Ja(new zb)||Cc&&"[object Set]"!=Ja(new Cc)||hd&&"[object WeakMap]"!=Ja(new hd))&&(Ja=function(a){var b=xa.call(a);if(a="[object Object]"==b?a.constructor:null,a="function"==typeof a?bc.call(a):"")switch(a){case Pf:return"[object Map]";case Qf:return"[object Set]";case Rf:return"[object WeakMap]"}return b});var cf=function(){var a=0,b=0;return function(d,c){var e=Nd(),f=16-(e-b);if(b=e,0<f){if(150<=
++a)return d}else a=0;return df(d,c)}}(),Sf=E(function(a,b){K(a)||(a=null==a?[]:[Object(a)]);b=T(b,1);for(var d=a,c=b,e=-1,f=d.length,k=-1,h=c.length,u=Array(f+h);++e<f;)u[e]=d[e];for(;++k<h;)u[e++]=c[k];return u}),Tf=E(function(a,b){return ga(a)?sb(a,T(b,1,!0)):[]}),Uf=E(function(a,b){var d=qa(b);return ga(d)&&(d=n),ga(a)?sb(a,T(b,1,!0),F(d)):[]}),Vf=E(function(a,b){var d=qa(b);return ga(d)&&(d=n),ga(a)?sb(a,T(b,1,!0),n,d):[]}),Wf=E(function(a){var b=w(a,od);return b.length&&b[0]===a[0]?Eb(b):[]}),
Xf=E(function(a){var b=qa(a),d=w(a,od);return b===qa(d)?b=n:d.pop(),d.length&&d[0]===a[0]?Eb(d,F(b)):[]}),Yf=E(function(a){var b=qa(a),d=w(a,od);return b===qa(d)?b=n:d.pop(),d.length&&d[0]===a[0]?Eb(d,n,b):[]}),Zf=E(ae),$f=E(function(a,b){b=w(T(b,1),String);var d=lc(a,b);return td(a,b.sort(Ab)),d}),ag=E(function(a){return xb(T(a,1,!0))}),bg=E(function(a){var b=qa(a);return ga(b)&&(b=n),xb(T(a,1,!0),F(b))}),cg=E(function(a){var b=qa(a);return ga(b)&&(b=n),xb(T(a,1,!0),n,b)}),dg=E(function(a,b){return ga(a)?
sb(a,b):[]}),eg=E(function(a){return wd(p(a,ga))}),fg=E(function(a){var b=qa(a);return ga(b)&&(b=n),wd(p(a,ga),F(b))}),gg=E(function(a){var b=qa(a);return ga(b)&&(b=n),wd(p(a,ga),n,b)}),hg=E(Hd),ig=E(function(a){var b=a.length,b=1<b?a[b-1]:n,b="function"==typeof b?(a.pop(),b):n;return be(a,b)}),jg=E(function(a){a=T(a,1);var b=a.length,d=b?a[0]:0,c=this.__wrapped__,e=function(b){return lc(b,a)};return 1>=b&&!this.__actions__.length&&c instanceof J&&ua(d)?(c=c.slice(d,+d+(b?1:0)),c.__actions__.push({func:yc,
args:[e],thisArg:n}),(new S(c,this.__chain__)).thru(function(a){return b&&!a.length&&a.push(n),a})):this.thru(e)}),kg=Wc(function(a,b,d){fa.call(a,d)?++a[d]:a[d]=1}),lg=Wc(function(a,b,d){fa.call(a,d)?a[d].push(b):a[d]=[b]}),mg=E(function(a,b,d){var c=-1,e="function"==typeof b,f=ab(b),k=x(a)?Array(a.length):[];return Lb(a,function(a){var g=e?b:f&&null!=a?a[b]:n;k[++c]=g?l(g,a,d):Fb(a,b,d)}),k}),ng=Wc(function(a,b,d){a[d]=b}),og=Wc(function(a,b,d){a[d?0:1].push(b)},function(){return[[],[]]}),pg=E(function(a,
b){if(null==a)return[];var d=b.length;return 1<d&&$a(a,b[0],b[1])?b=[]:2<d&&$a(b[0],b[1],b[2])&&(b.length=1),Tb(a,T(b,1),[])}),Nd=Hf.now,Je=E(function(a,b,d){var c=1;if(d.length)var e=Ca(d,Yb(Je)),c=32|c;return Ia(a,c,b,d,e)}),sf=E(function(a,b,d){var c=3;if(d.length)var e=Ca(d,Yb(sf)),c=32|c;return Ia(b,c,a,d,e)}),qg=E(function(a,b){return Qd(a,1,b)}),rg=E(function(a,b,d){return Qd(a,sa(b)||0,d)}),sg=E(function(a,b){b=w(T(b,1),F());var d=b.length;return E(function(c){for(var e=-1,f=eb(c.length,d);++e<
f;)c[e]=b[e].call(this,c[e]);return l(a,this,c)})}),Ke=E(function(a,b){var d=Ca(b,Yb(Ke));return Ia(a,32,n,b,d)}),tf=E(function(a,b){var d=Ca(b,Yb(tf));return Ia(a,64,n,b,d)}),tg=E(function(a,b){return Ia(a,256,n,n,n,T(b,1))}),K=Array.isArray,Ue=of?function(a){return a instanceof of}:Fe(!1),ug=pa(function(a,b){lb(b,ta(b),a)}),uf=pa(function(a,b){lb(b,db(b),a)}),Od=pa(function(a,b,d,c){Vc(b,db(b),a,c)}),vg=pa(function(a,b,d,c){Vc(b,ta(b),a,c)}),wg=E(function(a,b){return lc(a,T(b,1))}),xg=E(function(a){return a.push(n,
jb),l(Od,n,a)}),yg=E(function(a){return a.push(n,Dd),l(vf,n,a)}),zg=Wb(function(a,b,d){a[b]=d},Fe(ob)),Ag=Wb(function(a,b,d){fa.call(a,b)?a[b].push(d):a[b]=[d]},F),Bg=E(Fb),Cg=pa(function(a,b,d){Gb(a,b,d)}),vf=pa(function(a,b,d,c){Gb(a,b,d,c)}),Dg=E(function(a,b){return null==a?{}:(b=w(T(b,1),String),sd(a,sb(db(a),b)))}),Eg=E(function(a,b){return null==a?{}:sd(a,T(b,1))}),Fg=yb(function(a,b,d){return b=b.toLowerCase(),a+(d?Ee(b):b)}),Gg=yb(function(a,b,d){return a+(d?"-":"")+b.toLowerCase()}),Hg=
yb(function(a,b,d){return a+(d?" ":"")+b.toLowerCase()}),Ig=Xd("toLowerCase"),mf=Xd("toUpperCase"),Jg=yb(function(a,b,d){return a+(d?"_":"")+b.toLowerCase()}),Kg=yb(function(a,b,d){return a+(d?" ":"")+Ee(b)}),Lg=yb(function(a,b,d){return a+(d?" ":"")+b.toUpperCase()}),wf=E(function(a,b){try{return l(a,n,b)}catch(d){return ne(d)?d:new If(d)}}),Mg=E(function(b,d){return a(T(d,1),function(a){b[a]=Je(b[a],b)}),b}),Ng=zd(),Og=zd(!0),Pg=E(function(a,b){return function(d){return Fb(d,a,b)}}),Qg=E(function(a,
b){return function(d){return Fb(a,d,b)}}),Rg=Ad(w),Sg=Ad(e),Tg=Ad(P),Ug=Xb(),Vg=Xb(!0),Wg=mb("ceil"),Xg=mb("floor"),Yg=mb("round");return d.prototype=V.prototype,S.prototype=Db(V.prototype),S.prototype.constructor=S,J.prototype=Db(V.prototype),J.prototype.constructor=J,U.prototype=id?id(null):ed,Ua.prototype.clear=function(){this.__data__={hash:new U,map:zb?new zb:[],string:new U}},Ua.prototype["delete"]=function(a){var b=this.__data__;return Zb(a)?(b="string"==typeof a?b.string:b.hash,(id?b[a]!==
n:fa.call(b,a))&&delete b[a]):zb?b.map["delete"](a):za(b.map,a)},Ua.prototype.get=function(a){var b=this.__data__;return Zb(a)?(b="string"==typeof a?b.string:b.hash,id?(a=b[a],a="__lodash_hash_undefined__"===a?n:a):a=fa.call(b,a)?b[a]:n,a):zb?b.map.get(a):Da(b.map,a)},Ua.prototype.has=function(a){var b=this.__data__;return Zb(a)?(b="string"==typeof a?b.string:b.hash,a=id?b[a]!==n:fa.call(b,a)):a=zb?b.map.has(a):-1<Fa(b.map,a),a},Ua.prototype.set=function(a,b){var d=this.__data__;return Zb(a)?("string"==
typeof a?d.string:d.hash)[a]=id&&b===n?"__lodash_hash_undefined__":b:zb?d.map.set(a,b):Rb(d.map,a,b),this},ea.prototype.push=function(a){var b=this.__data__;Zb(a)?(b=b.__data__,("string"==typeof a?b.string:b.hash)[a]="__lodash_hash_undefined__"):b.set(a,"__lodash_hash_undefined__")},W.prototype.clear=function(){this.__data__={array:[],map:null}},W.prototype["delete"]=function(a){var b=this.__data__,d=b.array;return d?za(d,a):b.map["delete"](a)},W.prototype.get=function(a){var b=this.__data__,d=b.array;
return d?Da(d,a):b.map.get(a)},W.prototype.has=function(a){var b=this.__data__,d=b.array;return d?-1<Fa(d,a):b.map.has(a)},W.prototype.set=function(a,b){var d=this.__data__,c=d.array;return c&&(199>c.length?Rb(c,a,b):(d.array=null,d.map=new Ua(c))),(d=d.map)&&d.set(a,b),this},dd.Cache=Ua,d.after=function(a,b){if("function"!=typeof b)throw new cb("Expected a function");return a=L(a),function(){return 1>--a?b.apply(this,arguments):void 0}},d.ary=cd,d.assign=ug,d.assignIn=uf,d.assignInWith=Od,d.assignWith=
vg,d.at=wg,d.before=Kb,d.bind=Je,d.bindAll=Mg,d.bindKey=sf,d.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return K(a)?a:[a]},d.chain=Pd,d.chunk=function(a,b){b=ra(L(b),0);var d=a?a.length:0;if(!d||1>b)return[];for(var c=0,e=-1,f=Array(je(d/b));d>c;)f[++e]=Ha(a,c,c+=b);return f},d.compact=function(a){for(var b=-1,d=a?a.length:0,c=-1,e=[];++b<d;){var f=a[b];f&&(e[++c]=f)}return e},d.concat=Sf,d.cond=function(a){var b=a?a.length:0,d=F();return a=b?w(a,function(a){if("function"!=
typeof a[1])throw new cb("Expected a function");return[d(a[0]),a[1]]}):[],E(function(d){for(var c=-1;++c<b;){var e=a[c];if(l(e[0],this,d))return l(e[1],this,d)}})},d.conforms=function(a){return Qc(va(a,!0))},d.constant=Fe,d.countBy=kg,d.create=function(a,b){var d=Db(a);return b?nd(d,b):d},d.curry=Jb,d.curryRight=Jd,d.debounce=de,d.defaults=xg,d.defaultsDeep=yg,d.defer=qg,d.delay=rg,d.difference=Tf,d.differenceBy=Uf,d.differenceWith=Vf,d.drop=Gd,d.dropRight=Ed,d.dropRightWhile=function(a,b){return a&&
a.length?sc(a,F(b,3),!0,!0):[]},d.dropWhile=function(a,b){return a&&a.length?sc(a,F(b,3),!0):[]},d.fill=function(a,b,d,c){var e=a?a.length:0;if(!e)return[];d&&"number"!=typeof d&&$a(a,b,d)&&(d=0,c=e);e=a.length;d=L(d);0>d&&(d=-d>e?0:e+d);c=c===n||c>e?e:L(c);0>c&&(c+=e);for(c=d>c?0:kf(c);c>d;)a[d++]=b;return a},d.filter=function(a,b){return(K(a)?p:kb)(a,F(b,3))},d.flatMap=function(a,b){return T(ac(a,b),1)},d.flatten=function(a){return a&&a.length?T(a,1):[]},d.flattenDeep=function(a){return a&&a.length?
T(a,qb):[]},d.flattenDepth=function(a,b){return a&&a.length?(b=b===n?1:L(b),T(a,b)):[]},d.flip=function(a){return Ia(a,512)},d.flow=Ng,d.flowRight=Og,d.fromPairs=function(a){for(var b=-1,d=a?a.length:0,c={};++b<d;){var e=a[b];c[e[0]]=e[1]}return c},d.functions=function(a){return null==a?[]:Sc(a,ta(a))},d.functionsIn=function(a){return null==a?[]:Sc(a,db(a))},d.groupBy=lg,d.initial=function(a){return Ed(a,1)},d.intersection=Wf,d.intersectionBy=Xf,d.intersectionWith=Yf,d.invert=zg,d.invertBy=Ag,d.invokeMap=
mg,d.iteratee=Ae,d.keyBy=ng,d.keys=ta,d.keysIn=db,d.map=ac,d.mapKeys=function(a,b){var d={};return b=F(b,3),Ga(a,function(a,g,c){d[b(a,g,c)]=a}),d},d.mapValues=function(a,b){var d={};return b=F(b,3),Ga(a,function(a,g,c){d[g]=b(a,g,c)}),d},d.matches=function(a){return Ub(va(a,!0))},d.matchesProperty=function(a,b){return Td(a,va(b,!0))},d.memoize=dd,d.merge=Cg,d.mergeWith=vf,d.method=Pg,d.methodOf=Qg,d.mixin=Ge,d.negate=function(a){if("function"!=typeof a)throw new cb("Expected a function");return function(){return!a.apply(this,
arguments)}},d.nthArg=function(a){return a=L(a),function(){return arguments[a]}},d.omit=Dg,d.omitBy=function(a,b){return b=F(b),nc(a,function(a,d){return!b(a,d)})},d.once=function(a){return Kb(2,a)},d.orderBy=function(a,b,d,c){return null==a?[]:(K(b)||(b=null==b?[]:[b]),d=c?n:d,K(d)||(d=null==d?[]:[d]),Tb(a,b,d))},d.over=Rg,d.overArgs=sg,d.overEvery=Sg,d.overSome=Tg,d.partial=Ke,d.partialRight=tf,d.partition=og,d.pick=Eg,d.pickBy=function(a,b){return null==a?{}:nc(a,F(b))},d.property=We,d.propertyOf=
function(a){return function(b){return null==a?n:Rc(a,b)}},d.pull=Zf,d.pullAll=ae,d.pullAllBy=function(a,b,d){return a&&a.length&&b&&b.length?pc(a,b,F(d)):a},d.pullAt=$f,d.range=Ug,d.rangeRight=Vg,d.rearg=tg,d.reject=function(a,b){var d=K(a)?p:kb;return b=F(b,3),d(a,function(a,d,g){return!b(a,d,g)})},d.remove=function(a,b){var d=[];if(!a||!a.length)return d;var c=-1,e=[],f=a.length;for(b=F(b,3);++c<f;){var k=a[c];b(k,c,a)&&(d.push(k),e.push(c))}return td(a,e),d},d.rest=E,d.reverse=ad,d.sampleSize=
bd,d.set=function(a,b,d){return null==a?a:Uc(a,b,d)},d.setWith=function(a,b,d,c){return c="function"==typeof c?c:n,null==a?a:Uc(a,b,d,c)},d.shuffle=function(a){return bd(a,4294967295)},d.slice=function(a,b,d){var c=a?a.length:0;return c?(d&&"number"!=typeof d&&$a(a,b,d)?(b=0,d=c):(b=null==b?0:L(b),d=d===n?c:L(d)),Ha(a,b,d)):[]},d.sortBy=pg,d.sortedUniq=function(a){return a&&a.length?ud(a):[]},d.sortedUniqBy=function(a,b){return a&&a.length?ud(a,F(b)):[]},d.split=function(a,b,d){return Q(a).split(b,
d)},d.spread=function(a,b){if("function"!=typeof a)throw new cb("Expected a function");return b=b===n?0:ra(L(b),0),E(function(d){var c=d[b];return d=d.slice(0,b),c&&q(d,c),l(a,this,d)})},d.tail=function(a){return Gd(a,1)},d.take=function(a,b,d){return a&&a.length?(b=d||b===n?1:L(b),Ha(a,0,0>b?0:b)):[]},d.takeRight=function(a,b,d){var c=a?a.length:0;return c?(b=d||b===n?1:L(b),b=c-b,Ha(a,0>b?0:b,c)):[]},d.takeRightWhile=function(a,b){return a&&a.length?sc(a,F(b,3),!1,!0):[]},d.takeWhile=function(a,
b){return a&&a.length?sc(a,F(b,3)):[]},d.tap=function(a,b){return b(a),a},d.throttle=function(a,b,d){var c=!0,e=!0;if("function"!=typeof a)throw new cb("Expected a function");return Y(d)&&(c="leading"in d?!!d.leading:c,e="trailing"in d?!!d.trailing:e),de(a,b,{leading:c,maxWait:b,trailing:e})},d.thru=yc,d.toArray=Ce,d.toPairs=ef,d.toPairsIn=function(a){return D(a,db(a))},d.toPath=function(a){return K(a)?w(a,String):$c(a)},d.toPlainObject=Ye,d.transform=function(b,d,c){var e=K(b)||fd(b);if(d=F(d,4),
null==c)if(e||Y(b)){var f=b.constructor;c=e?K(b)?new f:[]:Ka(f)?Db(ge(b)):{}}else c={};return(e?a:Ga)(b,function(a,b,g){return d(c,a,b,g)}),c},d.unary=function(a){return cd(a,1)},d.union=ag,d.unionBy=bg,d.unionWith=cg,d.uniq=function(a){return a&&a.length?xb(a):[]},d.uniqBy=function(a,b){return a&&a.length?xb(a,F(b)):[]},d.uniqWith=function(a,b){return a&&a.length?xb(a,n,b):[]},d.unset=function(a,b){var d;if(null==a)d=!0;else{d=a;var c=b,c=ab(c,d)?[c+""]:Xa(c);d=$b(d,c);c=qa(c);d=null!=d&&lf(d,c)?
delete d[c]:!0}return d},d.unzip=Hd,d.unzipWith=be,d.values=ke,d.valuesIn=function(a){return null==a?[]:da(a,db(a))},d.without=dg,d.words=$e,d.wrap=function(a,b){return b=null==b?ob:b,Ke(b,a)},d.xor=eg,d.xorBy=fg,d.xorWith=gg,d.zip=hg,d.zipObject=function(a,b){return xd(a||[],b||[],Z)},d.zipObjectDeep=function(a,b){return xd(a||[],b||[],Uc)},d.zipWith=ig,d.extend=uf,d.extendWith=Od,Ge(d,d),d.add=function(a,b){var d;return a===n&&b===n?0:(a!==n&&(d=a),b!==n&&(d=d===n?b:d+b),d)},d.attempt=wf,d.camelCase=
Fg,d.capitalize=Ee,d.ceil=Wg,d.clamp=function(a,b,d){return d===n&&(d=b,b=n),d!==n&&(d=sa(d),d=d===d?d:0),b!==n&&(b=sa(b),b=b===b?b:0),Sb(sa(a),b,d)},d.clone=function(a){return va(a)},d.cloneDeep=function(a){return va(a,!0)},d.cloneDeepWith=function(a,b){return va(a,!0,b)},d.cloneWith=function(a,b){return va(a,!1,b)},d.deburr=af,d.endsWith=function(a,b,d){a=Q(a);b="string"==typeof b?b:b+"";var c=a.length;return d=d===n?c:Sb(L(d),0,c),d-=b.length,0<=d&&a.indexOf(b,d)==d},d.eq=bb,d.escape=function(a){return(a=
Q(a))&&Hc.test(a)?a.replace(Bb,La):a},d.escapeRegExp=function(a){return(a=Q(a))&&Lc.test(a)?a.replace(oa,"\\$&"):a},d.every=function(a,b,d){var c=K(a)?e:Rd;return d&&$a(a,b,d)&&(b=n),c(a,F(b,3))},d.find=function(a,b){if(b=F(b,3),K(a)){var d=C(a,b);return-1<d?a[d]:n}return B(a,b,Lb)},d.findIndex=function(a,b){return a&&a.length?C(a,F(b,3)):-1},d.findKey=function(a,b){return B(a,F(b,3),Ga,!0)},d.findLast=function(a,b){if(b=F(b,3),K(a)){var d=C(a,b,!0);return-1<d?a[d]:n}return B(a,b,Be)},d.findLastIndex=
function(a,b){return a&&a.length?C(a,F(b,3),!0):-1},d.findLastKey=function(a,b){return B(a,F(b,3),tb,!0)},d.floor=Xg,d.forEach=zc,d.forEachRight=Id,d.forIn=function(a,b){return null==a?a:xe(a,Ya(b),db)},d.forInRight=function(a,b){return null==a?a:Ve(a,Ya(b),db)},d.forOwn=function(a,b){return a&&Ga(a,Ya(b))},d.forOwnRight=function(a,b){return a&&tb(a,Ya(b))},d.get=Kd,d.gt=b,d.gte=function(a,b){return a>=b},d.has=lf,d.hasIn=Xe,d.head=Ba,d.identity=ob,d.includes=function(a,b,d,c){return a=x(a)?a:ke(a),
d=d&&!c?L(d):0,c=a.length,0>d&&(d=ra(c+d,0)),Ac(a)?c>=d&&-1<a.indexOf(b,d):!!c&&-1<t(a,b,d)},d.indexOf=function(a,b,d){var c=a?a.length:0;return c?(d=L(d),0>d&&(d=ra(c+d,0)),t(a,b,d)):-1},d.inRange=function(a,b,d){return b=sa(b)||0,d===n?(d=b,b=0):d=sa(d)||0,a=sa(a),a>=eb(b,d)&&a<ra(b,d)},d.invoke=Bg,d.isArguments=m,d.isArray=K,d.isArrayBuffer=function(a){return ja(a)&&"[object ArrayBuffer]"==xa.call(a)},d.isArrayLike=x,d.isArrayLikeObject=ga,d.isBoolean=function(a){return!0===a||!1===a||ja(a)&&"[object Boolean]"==
xa.call(a)},d.isBuffer=Ue,d.isDate=function(a){return ja(a)&&"[object Date]"==xa.call(a)},d.isElement=function(a){return!!a&&1===a.nodeType&&ja(a)&&!oe(a)},d.isEmpty=function(a){if(x(a)&&(K(a)||Ac(a)||Ka(a.splice)||m(a)))return!a.length;for(var b in a)if(fa.call(a,b))return!1;return!0},d.isEqual=function(a,b){return ub(a,b)},d.isEqualWith=function(a,b,d){var c=(d="function"==typeof d?d:n)?d(a,b):n;return c===n?ub(a,b,d):!!c},d.isError=ne,d.isFinite=function(a){return"number"==typeof a&&Mf(a)},d.isFunction=
Ka,d.isInteger=Le,d.isLength=jd,d.isMap=function(a){return ja(a)&&"[object Map]"==Ja(a)},d.isMatch=function(a,b){return a===b||vb(a,b,Yc(b))},d.isMatchWith=function(a,b,d){return d="function"==typeof d?d:n,vb(a,b,Yc(b),d)},d.isNaN=function(a){return Ne(a)&&a!=+a},d.isNative=Me,d.isNil=function(a){return null==a},d.isNull=function(a){return null===a},d.isNumber=Ne,d.isObject=Y,d.isObjectLike=ja,d.isPlainObject=oe,d.isRegExp=hf,d.isSafeInteger=function(a){return Le(a)&&-9007199254740991<=a&&9007199254740991>=
a},d.isSet=function(a){return ja(a)&&"[object Set]"==Ja(a)},d.isString=Ac,d.isSymbol=jf,d.isTypedArray=fd,d.isUndefined=function(a){return a===n},d.isWeakMap=function(a){return ja(a)&&"[object WeakMap]"==Ja(a)},d.isWeakSet=function(a){return ja(a)&&"[object WeakSet]"==xa.call(a)},d.join=function(a,b){return a?Nf.call(a,b):""},d.kebabCase=Gg,d.last=qa,d.lastIndexOf=function(a,b,d){var c=a?a.length:0;if(!c)return-1;var e=c;if(d!==n&&(e=L(d),e=(0>e?ra(c+e,0):eb(e,c-1))+1),b!==b)return Ma(a,e,!0);for(;e--;)if(a[e]===
b)return e;return-1},d.lowerCase=Hg,d.lowerFirst=Ig,d.lt=De,d.lte=function(a,b){return b>=a},d.max=function(a){return a&&a.length?A(a,ob,b):n},d.maxBy=function(a,d){return a&&a.length?A(a,F(d),b):n},d.mean=function(a){return nf(a)/(a?a.length:0)},d.min=function(a){return a&&a.length?A(a,ob,De):n},d.minBy=function(a,b){return a&&a.length?A(a,F(b),De):n},d.noConflict=function(){return Aa._===this&&(Aa._=Kf),this},d.noop=He,d.now=Nd,d.pad=function(a,b,d){a=Q(a);b=L(b);var c=ia(a);return b&&b>c?(c=(b-
c)/2,b=he(c),c=je(c),Ib("",b,d)+a+Ib("",c,d)):a},d.padEnd=function(a,b,d){return a=Q(a),a+Ib(a,b,d)},d.padStart=function(a,b,d){return a=Q(a),Ib(a,b,d)+a},d.parseInt=function(a,b,d){return d||null==b?b=0:b&&(b=+b),a=Q(a).replace(hc,""),Of(a,b||(ba.test(a)?16:10))},d.random=function(a,b,d){if(d&&"boolean"!=typeof d&&$a(a,b,d)&&(b=d=n),d===n&&("boolean"==typeof b?(d=b,b=n):"boolean"==typeof a&&(d=a,a=n)),a===n&&b===n?(a=0,b=1):(a=sa(a)||0,b===n?(b=a,a=0):b=sa(b)||0),a>b){var c=a;a=b;b=c}return d||a%
1||b%1?(d=Ze(),eb(a+d*(b-a+Nc("1e-"+((d+"").length-1))),b)):Tc(a,b)},d.reduce=function(a,b,d){var c=K(a)?v:H,e=3>arguments.length;return c(a,F(b,4),d,e,Lb)},d.reduceRight=function(a,b,d){var c=K(a)?O:H,e=3>arguments.length;return c(a,F(b,4),d,e,Be)},d.repeat=bf,d.replace=function(){var a=arguments,b=Q(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},d.result=function(a,b,d){if(ab(b,a))c=null==a?n:a[b];else{b=Xa(b);var c=Kd(a,b);a=$b(a,b)}return c===n&&(c=d),Ka(c)?c.call(a):c},d.round=Yg,d.runInContext=
gb,d.sample=function(a){a=x(a)?a:ke(a);var b=a.length;return 0<b?a[Tc(0,b-1)]:n},d.size=function(a){if(null==a)return 0;if(x(a)){var b=a.length;return b&&Ac(a)?ia(a):b}return ta(a).length},d.snakeCase=Jg,d.some=function(a,b,d){var c=K(a)?P:Ud;return d&&$a(a,b,d)&&(b=n),c(a,F(b,3))},d.sortedIndex=function(a,b){return qc(a,b)},d.sortedIndexBy=function(a,b,d){return rc(a,b,F(d))},d.sortedIndexOf=function(a,b){var d=a?a.length:0;if(d){var c=qc(a,b);if(d>c&&bb(a[c],b))return c}return-1},d.sortedLastIndex=
function(a,b){return qc(a,b,!0)},d.sortedLastIndexBy=function(a,b,d){return rc(a,b,F(d),!0)},d.sortedLastIndexOf=function(a,b){if(a&&a.length){var d=qc(a,b,!0)-1;if(bb(a[d],b))return d}return-1},d.startCase=Kg,d.startsWith=function(a,b,d){return a=Q(a),d=Sb(L(d),0,a.length),a.lastIndexOf(b,d)==d},d.subtract=function(a,b){var d;return a===n&&b===n?0:(a!==n&&(d=a),b!==n&&(d=d===n?b:d-b),d)},d.sum=nf,d.sumBy=function(a,b){return a&&a.length?ka(a,F(b)):0},d.template=function(a,b,c){var e=d.templateSettings;
c&&$a(a,b,c)&&(b=n);a=Q(a);b=Od({},b,e,jb);c=Od({},b.imports,e.imports,jb);var f,k,h=ta(c),u=da(c,h),m=0;c=b.interpolate||Cb;var l="__p+='";c=Ie((b.escape||Cb).source+"|"+c.source+"|"+(c===gc?aa:Cb).source+"|"+(b.evaluate||Cb).source+"|$","g");var p="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,d,c,e,h,u){return c||(c=e),l+=a.slice(m,u).replace(Ea,Dc),d&&(f=!0,l+="'+__e("+d+")+'"),h&&(k=!0,l+="';"+h+";\n__p+='"),c&&(l+="'+((__t=("+c+"))==null?'':__t)+'"),m=u+b.length,
b}),l+="';",(b=b.variable)||(l="with(obj){"+l+"}"),l=(k?l.replace(Ec,""):l).replace(Fc,"$1").replace(Gc,"$1;"),l="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(f?",__e=_.escape":"")+(k?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",b=wf(function(){return Function(h,p+"return "+l).apply(n,u)}),b.source=l,ne(b))throw b;return b},d.times=function(a,b){if(a=L(a),1>a||9007199254740991<a)return[];var d=4294967295,c=eb(a,4294967295);
b=Ya(b);a-=4294967295;for(c=ca(c,b);++d<a;)b(d);return c},d.toInteger=L,d.toLength=kf,d.toLower=function(a){return Q(a).toLowerCase()},d.toNumber=sa,d.toSafeInteger=function(a){return Sb(L(a),-9007199254740991,9007199254740991)},d.toString=Q,d.toUpper=function(a){return Q(a).toUpperCase()},d.trim=function(a,b,d){return(a=Q(a))?d||b===n?a.replace(hc,""):(b+="")?(a=a.match(G),b=b.match(G),a.slice(ha(a,b),R(a,b)+1).join("")):a:a},d.trimEnd=function(a,b,d){return(a=Q(a))?d||b===n?a.replace(kd,""):(b+=
"")?(a=a.match(G),a.slice(0,R(a,b.match(G))+1).join("")):a:a},d.trimStart=function(a,b,d){return(a=Q(a))?d||b===n?a.replace(rb,""):(b+="")?(a=a.match(G),a.slice(ha(a,b.match(G))).join("")):a:a},d.truncate=function(a,b){var d=30,c="...";if(Y(b))var e="separator"in b?b.separator:e,d="length"in b?L(b.length):d,c="omission"in b?Q(b.omission):c;a=Q(a);var f=a.length;if(ya.test(a))var k=a.match(G),f=k.length;if(d>=f)return a;if(f=d-ia(c),1>f)return c;if(d=k?k.slice(0,f).join(""):a.slice(0,f),e===n)return d+
c;if(k&&(f+=d.length-f),hf(e)){if(a.slice(f).search(e)){var h=d;e.global||(e=Ie(e.source,Q(ma.exec(e))+"g"));for(e.lastIndex=0;k=e.exec(h);)var u=k.index;d=d.slice(0,u===n?f:u)}}else a.indexOf(e,f)!=f&&(e=d.lastIndexOf(e),-1<e&&(d=d.slice(0,e)));return d+c},d.unescape=function(a){return(a=Q(a))&&hb.test(a)?a.replace(ec,pb):a},d.uniqueId=function(a){var b=++Jf;return Q(a)+b},d.upperCase=Lg,d.upperFirst=mf,d.each=zc,d.eachRight=Id,d.first=Ba,Ge(d,function(){var a={};return Ga(d,function(b,c){fa.call(d.prototype,
c)||(a[c]=b)}),a}(),{chain:!1}),d.VERSION="4.5.1",a("bind bindKey curry curryRight partial partialRight".split(" "),function(a){d[a].placeholder=d}),a(["drop","take"],function(a,b){J.prototype[a]=function(d){var c=this.__filtered__;if(c&&!b)return new J(this);d=d===n?1:ra(L(d),0);var e=this.clone();return c?e.__takeCount__=eb(d,e.__takeCount__):e.__views__.push({size:eb(d,4294967295),type:a+(0>e.__dir__?"Right":"")}),e};J.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),a(["filter",
"map","takeWhile"],function(a,b){var d=b+1,c=1==d||3==d;J.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:F(a,3),type:d}),b.__filtered__=b.__filtered__||c,b}}),a(["head","last"],function(a,b){var d="take"+(b?"Right":"");J.prototype[a]=function(){return this[d](1).value()[0]}}),a(["initial","tail"],function(a,b){var d="drop"+(b?"":"Right");J.prototype[a]=function(){return this.__filtered__?new J(this):this[d](1)}}),J.prototype.compact=function(){return this.filter(ob)},
J.prototype.find=function(a){return this.filter(a).head()},J.prototype.findLast=function(a){return this.reverse().find(a)},J.prototype.invokeMap=E(function(a,b){return"function"==typeof a?new J(this):this.map(function(d){return Fb(d,a,b)})}),J.prototype.reject=function(a){return a=F(a,3),this.filter(function(b){return!a(b)})},J.prototype.slice=function(a,b){a=L(a);var d=this;return d.__filtered__&&(0<a||0>b)?new J(d):(0>a?d=d.takeRight(-a):a&&(d=d.drop(a)),b!==n&&(b=L(b),d=0>b?d.dropRight(-b):d.take(b-
a)),d)},J.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},J.prototype.toArray=function(){return this.take(4294967295)},Ga(J.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),e=/^(?:head|last)$/.test(b),f=d[e?"take"+("last"==b?"Right":""):b],k=e||/^find/.test(b);f&&(d.prototype[b]=function(){var b=this.__wrapped__,h=e?[1]:arguments,u=b instanceof J,m=h[0],l=u||K(b),p=function(a){return a=f.apply(d,q([a],h)),e&&z?a[0]:a};l&&c&&"function"==
typeof m&&1!=m.length&&(u=l=!1);var z=this.__chain__,r=!!this.__actions__.length,m=k&&!z,u=u&&!r;return!k&&l?(b=u?b:new J(this),b=a.apply(b,h),b.__actions__.push({func:yc,args:[p],thisArg:n}),new S(b,z)):m&&u?a.apply(this,h):(b=this.thru(p),m?e?b.value()[0]:b.value():b)})}),a("pop push shift sort splice unshift".split(" "),function(a){var b=le[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:pop|shift)$/.test(a);d.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?b.apply(this.value(),
a):this[c](function(d){return b.apply(d,a)})}}),Ga(J.prototype,function(a,b){var c=d[b];if(c){var e=c.name+"";(Ld[e]||(Ld[e]=[])).push({name:b,func:c})}}),Ld[Za(n,2).name]=[{name:"wrapper",func:n}],J.prototype.clone=function(){var a=new J(this.__wrapped__);return a.__actions__=na(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=na(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=na(this.__views__),a},J.prototype.reverse=function(){if(this.__filtered__){var a=
new J(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},J.prototype.value=function(){var a,b=this.__wrapped__.value(),d=this.__dir__,c=K(b),e=0>d,f=c?b.length:0;a=0;for(var k=f,h=this.__views__,u=-1,m=h.length;++u<m;){var l=h[u],p=l.size;switch(l.type){case "drop":a+=p;break;case "dropRight":k-=p;break;case "take":k=eb(k,a+p);break;case "takeRight":a=ra(a,k-p)}}if(a={start:a,end:k},k=a.start,h=a.end,a=h-k,e=e?h:k-1,k=this.__iteratees__,h=k.length,u=0,m=eb(a,this.__takeCount__),
!c||200>f||f==a&&m==a)return vd(b,this.__actions__);c=[];a:for(;a--&&m>u;){e+=d;f=-1;for(l=b[e];++f<h;){var z=k[f],p=z.type,z=(0,z.iteratee)(l);if(2==p)l=z;else if(!z){if(1==p)continue a;break a}}c[u++]=l}return c},d.prototype.at=jg,d.prototype.chain=function(){return Pd(this)},d.prototype.commit=function(){return new S(this.value(),this.__chain__)},d.prototype.flatMap=function(a){return this.map(a).flatten()},d.prototype.next=function(){this.__values__===n&&(this.__values__=Ce(this.value()));var a=
this.__index__>=this.__values__.length,b=a?n:this.__values__[this.__index__++];return{done:a,value:b}},d.prototype.plant=function(a){for(var b,d=this;d instanceof V;){var c=Fd(d);c.__index__=0;c.__values__=n;b?e.__wrapped__=c:b=c;var e=c,d=d.__wrapped__}return e.__wrapped__=a,b},d.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof J?(this.__actions__.length&&(a=new J(this)),a=a.reverse(),a.__actions__.push({func:yc,args:[ad],thisArg:n}),new S(a,this.__chain__)):this.thru(ad)},
d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function(){return vd(this.__wrapped__,this.__actions__)},Bc&&(d.prototype[Bc]=ce),d}var n,qb=1/0,dc=NaN,Ec=/\b__p\+='';/g,Fc=/\b(__p\+=)''\+/g,Gc=/(__e\(.*?\)|\b__t\))\+'';/g,ec=/&(?:amp|lt|gt|quot|#39|#96);/g,Bb=/[&<>"'`]/g,hb=RegExp(ec.source),Hc=RegExp(Bb.source),fc=/<%-([\s\S]+?)%>/g,Ic=/<%([\s\S]+?)%>/g,gc=/<%=([\s\S]+?)%>/g,Jc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oa=/^\w*$/,Kc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,
oa=/[\\^$.*+?()[\]{}|]/g,Lc=RegExp(oa.source),hc=/^\s+|\s+$/g,rb=/^\s+/,kd=/\s+$/,Pa=/\\(\\)?/g,aa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ma=/\w*$/,ba=/^0x/i,ic=/^[-+]0x[0-9a-f]+$/i,ib=/^0b[01]+$/i,Qa=/^\[object .+?Constructor\]$/,jc=/^0o[0-7]+$/i,Da=/^(?:0|[1-9]\d*)$/,Ob=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cb=/($^)/,Ea=/['\n\r\u2028\u2029\\]/g,Mc=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,G=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
ya=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,Ra=/[a-zA-Z0-9]+/g,Pb=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
Sa=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qb="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=
I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0;I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Error]"]=I["[object Function]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;var M={};M["[object Arguments]"]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object Boolean]"]=M["[object Date]"]=M["[object Float32Array]"]=
M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Map]"]=M["[object Number]"]=M["[object Object]"]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object Symbol]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0;M["[object Error]"]=M["[object Function]"]=M["[object WeakMap]"]=!1;var ea={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Fa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},U={"function":!0,object:!0},jb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nc=parseFloat,Ta=parseInt,
z=U[typeof exports]&&exports&&!exports.nodeType?exports:n,V=U[typeof module]&&module&&!module.nodeType?module:n,Oc=V&&V.exports===z?z:n,Ua=S(z&&V&&"object"==typeof global&&global),Va=S(U[typeof self]&&self),za=S(U[typeof window]&&window),U=S(U[typeof this]&&this),Aa=Ua||za!==(U&&U.window)&&za||Va||U||Function("return this")(),Wa=gb();(za||Va||{})._=Wa;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return Wa}):z&&V?(Oc&&((V.exports=
Wa)._=Wa),z._=Wa):Aa._=Wa}).call(this);
define("qowtRoot/utils/typeUtils",[],function(){function c(c,a,e){if(e.types.every(function(a){var c=l[a];if(!c)throw Error("Bad config to checkArgTypes: unknown type: "+a);return!c(e.value)})){var h=1===e.types.length?e.types[0]:"["+e.types.join(",")+"]";throw Error("Argument "+a+" passed to function "+c+" was supposed to be of type "+h+" but had value "+e.value);}}var h={checkArgTypes:function(f,a){for(var e in a){var h={value:a[e][0],types:a[e].slice(1)};c(f,e,h)}},isObject:function(c){return"object"===
typeof c&&null!==c},isPromise:function(c){return c instanceof Promise},isPromiseLike:function(c){return!(!c||!h.isFunction(c.then))},isList:function(c){return"[object Array]"===Object.prototype.toString.call(c)},isNumber:function(c){return"number"===typeof c&&!isNaN(c)},isInteger:function(c){return"number"===typeof c&&parseInt(c,10)===c},isFunction:function(c){return"function"===typeof c},isString:function(c){return"[object String]"===Object.prototype.toString.call(c)},isRegex:function(c){return"[object RegExp]"===
Object.prototype.toString.call(c)},isNode:function(c){return c instanceof Node},isNull:function(c){return null===c},isUndefined:function(c){return void 0===c},isBoolean:function(c){return"boolean"===typeof c},getType:function(c){var a;Object.keys(l).forEach(function(e){l[e](c)&&(a=e)});return a},isArgumentsObjectOrList:function(c){return c instanceof Object&&c.hasOwnProperty("length")},extend:function(c,a){for(var e in a)a.hasOwnProperty(e)&&(c[e]=a[e])},createNewType:function(c){var a=function(){},
e={isOfType:function(c){return void 0!==c&&null!==c&&c.constructor===a},markAsType:function(c){Object.defineProperty(c,"constructor",{value:a,configurable:!1,writable:!1,enumerable:!1});return c}};if(c){if(l[c])throw Error("Already registered type "+c);l[c]=e.isOfType}return e}},l={string:h.isString,object:h.isObject,promise:h.isPromise,promiseLike:h.isPromiseLike,node:h.isNode,regex:h.isRegex,"function":h.isFunction,number:h.isNumber,list:h.isList,boolean:h.isBoolean,"null":h.isNull,undefined:h.isUndefined};
return h});
define("qowtRoot/configs/common",[],function(){var c={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},
outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},
kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:c.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:c.DIALOGUE_CONFIG,DEFAULT_COLORS:c.DEFAULT_COLORS,ZOOM:c.ZOOM,LAYOUT_DEFAULT_MAXZOOM:c.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:c.LAYOUT_DEFAULT_MINZOOM,LAYOUT_DEFAULT_ZOOM_LEVEL:c.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return c});
(function(c){c("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,l,f){f.prototype.delay=function(a){var e=this;return new this.constructor(function(f,l,k){e.then(function(e){c(function(){f(e)},a)},l,k)})};f.prototype.timeout=function(a,e){var f=this,r=1<arguments.length;return new this.constructor(function(k,w,q){var v=c(function(){w(r?e:Error("timed out after "+a+"ms"))},a);f.then(function(a){l(v);k(a)},function(a){l(v);w(a)},q)})};return f}})})("function"===typeof define&&define.amd?
define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var l=Array.prototype.map,f=Array.prototype.reduce,a=Array.prototype.reduceRight,e=Array.prototype.forEach,p=c.resolve,r=c.all;c.any=function(a){return new c(function(c,f){function h(a){r.push(a);0===--l&&f(r)}var l=0,r=[];e.call(a,function(a){++l;p(a).then(c,h)});0===l&&c()})};c.some=function(a,f){return new c(function(c,h,l){function r(a){0<B&&(--B,t.push(a),0===B&&c(t))}function A(a){0<C&&(--C,H.push(a),0===C&&
h(H))}var B=0,C,t=[],H=[];e.call(a,function(a){++B;p(a).then(r,A,l)});f=Math.max(f,0);C=B-f+1;B=Math.min(f,B);0===B&&c(t)})};c.settle=function(a){return r(l.call(a,function(a){function c(){return a.inspect()}a=p(a);return a.then(c,c)}))};c.map=function(a,c,e){return r(l.call(a,function(a){return p(a).then(c,e)}))};c.reduce=function(a,c){function e(a,f,k){return p(a).then(function(a){return p(f).then(function(e){return c(a,e,k)})})}return 2<arguments.length?f.call(a,e,arguments[2]):f.call(a,e)};c.reduceRight=
function(c,e){function f(a,c,k){return p(a).then(function(a){return p(c).then(function(c){return e(a,c,k)})})}return 2<arguments.length?a.call(c,f,arguments[2]):a.call(c,f)};c.prototype.spread=function(a){return this.then(r).then(function(c){return a.apply(void 0,c)})};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var l=c("./timer").set;return function(c){l(function(){throw c;},0)}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function l(){throw new TypeError("catch predicate must be a function");}function f(a,c){return function(){a.call(this);return c}}function a(){}var e=c("./fatal");return function(c){function h(a,c){return function(e){return(c===Error||null!=c&&c.prototype instanceof Error?e instanceof c:c(e))?a.call(this,e):w(e)}}var k=c.resolve,w=c.reject,q=c.prototype["catch"];c.prototype.done=function(c,e){var f=this._handler;
f.when(this._maybeFatal,a,this,f.receiver,c,e)};c.prototype._maybeFatal=function(a){if(Object(a)===a)k(a)["catch"](this._fatal)};c.prototype._fatal=e;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?q.call(this,a):"function"!==typeof a?this.ensure(l):q.call(this,h(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(a){if("function"!==typeof a)return this;a=f(a,this);return this.then(a,a)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function l(c,f,h,k){function w(k){return a(h(k)).then(function(){return l(c,f,h,c(k))})}return a(k).then(function(c){return a(f(c)).then(function(a){return a?c:w(c)})})}function f(c,h,l,k){function w(k,w){return a(l(k)).then(function(){return f(c,h,l,w)})}return a(k).then(function(f){return a(h(f)).then(function(k){return k?f:a(c(f)).spread(w)})})}var a=c.resolve;c.iterate=l;c.unfold=f;return c}})})("function"===
typeof define&&define.amd?define:function(c){module.exports=c()});(function(c){c("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function l(a){var c=this;this._handler=new v;f(a,function(a){c._handler.resolve(a)},function(a){c._handler.reject(a)},function(a){c._handler.notify(a)})}function f(a,c,e,f){try{a(c,e,f)}catch(k){e(k)}}function a(a){return new e(new O(new C(a)))}function e(a){this._handler=a}function p(a,c){if(a instanceof l){var e=a._handler.join();return c===e?new C(new TypeError("Promise cycle")):e}return ka(a)?k(a):new B(a)}
function r(a){return a instanceof l?a._handler.join():k(a)}function k(a){try{var c=a.then;return"function"===typeof c?new A(c,a):new B(a)}catch(e){return new C(e)}}function w(){}function q(a){this.handler=a;if(this._isMonitored()){var c=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(c)}}function v(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function O(a){q.call(this,a)}function P(a,
c){q.call(this,a);this.receiver=c}function A(a,c){v.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=c}function B(a){this.value=a}function C(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function t(){return{state:"pending"}}function H(a,c,e,f,k,h,l,p){this.a=a;this.b=c;this.c=e;this.d=f;this.e=k;this.f=h;this.g=l;this.handler=p}function N(a,c){this.q=a;this.value=c}function ka(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function ca(c,e,f){try{return c.call(f,e)}catch(k){return a(k)}}function D(){}var la,da=c.scheduler,ha=Object.create||function(a){function c(){}c.prototype=a;return new c};l.resolve=function(a){return a instanceof l?a:new e(new O(p(a)))};l.reject=a;l.never=function(){return la};l._defer=function(){return new e(new v)};l.prototype.then=function(a,c,f){var k=this._handler,h=new v(k.receiver);k.when(h.resolve,h.notify,h,k.receiver,a,c,f);return new e(h)};l.prototype["catch"]=l.prototype.otherwise=
function(a){return this.then(void 0,a)};l.prototype._bindContext=function(a){return new e(new P(this._handler,a))};l.all=function(a){function c(a,e,f,k){f.when(D,D,void 0,a,function(a){e[k]=a;0===--h&&this.resolve(e)},a.reject,a.notify)}var f=new v,k=a.length>>>0,h=k,l=[],p,t;for(p=0;p<k;++p)p in a?(t=a[p],ka(t)?c(f,l,r(t),p):(l[p]=t,--h)):--h;0===h&&f.resolve(l);return new e(f)};l.race=function(a){if(Object(a)===a&&0===a.length)return la;for(var c=new v,f=0;f<a.length;++f)p(a[f]).when(D,D,void 0,
c,c.resolve,c.reject);return new e(c)};e.prototype=ha(l.prototype);w.prototype.inspect=t;w.prototype.when=D;w.prototype.resolve=D;w.prototype.reject=D;w.prototype.notify=D;w.prototype.join=function(){return this};w.prototype._env=c.monitor||l;w.prototype._addTrace=D;w.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};q.prototype=ha(w.prototype);q.prototype.join=function(){return this.handler.join()};q.prototype.inspect=function(){return this.handler.inspect()};
q.prototype._addTrace=function(a){return this.handler._addTrace(a)};v.prototype=ha(w.prototype);v.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():t()};v.prototype.resolve=function(a){this._join(p(a,this))};v.prototype.reject=function(a){this._join(new C(a))};v.prototype.join=function(){return this.resolved?this.handler.join():this};v.prototype.run=function(){var a=this.consumers,c=this.handler=this.handler.join();this.consumers=void 0;for(var e=0;e<a.length;e+=7)c.when(a[e],
a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])};v.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,da.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};v.prototype.when=function(a,c,e,f,k,h,l){this.resolved?da.enqueue(new H(a,c,e,f,k,h,l,this.handler.join())):this.consumers.push(a,c,e,f,k,h,l)};v.prototype.notify=function(a){this.resolved||da.enqueue(new N(this.consumers,a))};v.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):
a};O.prototype=ha(q.prototype);O.prototype.when=function(a,c,e,f,k,h,l){da.enqueue(new H(a,c,e,f,k,h,l,this.join()))};P.prototype=ha(q.prototype);P.prototype.when=function(a,c,e,f,k,h,l){void 0!==this.receiver&&(f=this.receiver);this.join().when(a,c,e,f,k,h,l)};A.prototype=ha(v.prototype);A.prototype.when=function(a,c,e,f,k,h,l){this.assimilated||(this.assimilated=!0,this._assimilate());v.prototype.when.call(this,a,c,e,f,k,h,l)};A.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,
this.thenable,function(c){a.resolve(c)},function(c){a.reject(c)},function(c){a.notify(c)})};A.prototype._try=function(a,c,e,f,k){try{a.call(c,e,f,k)}catch(h){f(h)}};B.prototype=ha(w.prototype);B.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};B.prototype.when=function(a,c,e,f,k){c="function"===typeof k?ca(k,this.value,f):this.value;a.call(e,c)};C.prototype=ha(w.prototype);C.prototype.inspect=function(){return{state:"rejected",reason:this.value}};C.prototype.when=function(c,
e,f,k,h,l){this._isMonitored()&&!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;e="function"===typeof l?ca(l,this.value,k):a(this.value);c.call(f,e)};C.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};la=new e(new w);H.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};N.prototype.run=function(){for(var a=this.q,c=1;c<a.length;c+=7)this._notify(a[c],a[c+1],a[c+2],a[c+5])};N.prototype._notify=
function(a,c,e,f){var k;if("function"===typeof f)try{k=f.call(e,this.value)}catch(h){k=h}else k=this.value;a.call(c,k)};return l}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/Queue",[],function(){function c(h){this.head=this.tail=this.length=0;this.buffer=Array(1<<h)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var f=this.head,a=this.buffer,e=Array(c),h=0,r;if(0===f)for(r=this.length;h<r;++h)e[h]=a[h];else{c=a.length;for(r=this.tail;f<c;++h,++f)e[h]=a[f];for(f=0;f<r;++h,++f)e[h]=a[f]}this.buffer=e;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function l(a){this._enqueue=a;this._handlerQueue=new f(15);var c=this;this.drainQueue=function(){c._drainQueue()}}var f=c("./Queue");l.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};l.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return l})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/async",["require"],function(c){var l;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(c){process.nextTick(c)}:(l="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(c,a){var e,h=c.createElement("div");(new a(function(){var a=e;e=void 0;a()})).observe(h,{attributes:!0});return function(a){e=a;h.setAttribute("class","x")}}(document,
l):function(c){var a=setTimeout;return function(c){a(c,0)}}(c)})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var l=c("./makePromise"),f=c("./scheduler");c=c("./async");return l({scheduler:new f(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function l(a,c,e,f){var k=C(a);return 2>arguments.length?k:k.then(c,e,f)}function f(a){return function(){return e(a,this,t.call(arguments))}}function a(a){return e(a,this,t.call(arguments,1))}function e(a,c,e){return B.all(e).then(function(e){return a.apply(c,e)})}function p(){function a(c){f._handler.resolve(c)}
function c(a){f._handler.reject(a)}function e(a){f._handler.notify(a)}var f=B._defer();this.promise=f;this.resolve=a;this.reject=c;this.notify=e;this.resolver={resolve:a,reject:c,notify:e}}var r=c("./lib/timer"),k=c("./lib/timed"),w=c("./lib/array"),q=c("./lib/flow"),v=c("./lib/inspect"),O=c("./lib/iterate"),P=c("./lib/progress"),A=c("./lib/with"),B=c("./lib/Promise"),B=[w,q,O,P,v,A].reduceRight(function(a,c){return c(a)},k(r.set,r.clear,B)),C=B.resolve,t=Array.prototype.slice;l.promise=function(a){return new B(a)};
l.resolve=B.resolve;l.reject=B.reject;l.lift=f;l["try"]=a;l.attempt=a;l.iterate=B.iterate;l.unfold=B.unfold;l.join=function(){return B.all(arguments)};l.all=function(a){return l(a,B.all)};l.settle=function(a){return l(a,B.settle)};l.any=f(B.any);l.some=f(B.some);l.map=function(a,c){return l(a,function(a){return B.map(a,c)})};l.reduce=function(a,c){var e=t.call(arguments,1);return l(a,function(a){e.unshift(a);return B.reduce.apply(B,e)})};l.reduceRight=function(a,c){var e=t.call(arguments,1);return l(a,
function(a){e.unshift(a);return B.reduceRight.apply(B,e)})};l.isPromiseLike=function(a){return a&&"function"===typeof a.then};l.Promise=B;l.defer=function(){return new p};return l})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(c,h,l){var f=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};f.prototype=Object.create(Object.prototype);f.prototype.constructor=
f;f.prototype.connect=function(a,e){if(!a||null===a||!c.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(e&&!c.isFunction(e))throw Error("MessageBus: The provided callback function is not of the correct type");for(var f=this.pendingConnections_.length,h=0;h<f;h++)if(this.pendingConnections_[h].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
f=this.acceptedConnections_.length;for(h=0;h<f;h++)if(this.acceptedConnections_[h].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");f=this.completedConnections_.length;for(h=0;h<f;h++)if(this.completedConnections_[h].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");f={win:a,callback:e,currentWaitTime:0,deferred:l.defer()};this.pendingConnections_.push(f);this.tryToConnect_(f);return f.deferred.promise};
f.prototype.pushMessage=function(e){if(!c.isObject(e))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var f=this.completedConnections_.length;if(0===f)this.pendingMsgs_.push(e);else{if(!c.isObject(e))throw Error("Cannot mark non-object value as quickoffice message");e.qoMessageBus=!0;this.msgQueue_.length>=a&&this.msgQueue_.shift();this.msgQueue_.push(e);for(var h=0;h<f;h++)this.completedConnections_[h].win.postMessage(e,"*")}};f.prototype.listen=function(a,
e){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(e&&!c.isFunction(e))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:e})};f.prototype.stopListening=function(a){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var e=this.listeners_.length,f=0;f<e;f++)if(this.listeners_[f].listener===a){this.listeners_.splice(f,
1);break}};f.prototype.isConnectedTo=function(a){for(var c=!1,e=this.completedConnections_.length,f=0;f<e;f++)if(a===this.completedConnections_[f].win){c=!0;break}return c};f.prototype.tryToConnect_=function(a){a.currentWaitTime>h.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=h.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(e,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),h.kMESSAGE_BUS_CONNECTION_RETRY))};f.prototype.handleTimeOut_=
function(a){var c=h.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(c=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(h.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?c+":qowt too late to connect":c+":qowt and app connected:handshake failed?":c+":qowt failed to connect");a.deferred.reject(Error(c))};f.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===e?this.handleConnectionRequestMsg_(a):a.data===p?this.handleConnectionAcceptedMsg_(a):a.data===r?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&("chrome-extension://gbkeegbaiigmenfmjfclcdgdpimamgkj"===a.origin||"chrome-extension://bpmcpldpdmajfigpchkicefoigmkfalc"===a.origin||"chrome-extension://ehibbfinohgbchlgdbfpikodjaojhccn"===a.origin)&&this.handleClientMsg_(a)}};f.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");
a.source.postMessage(p,"*")};f.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");for(var c=this.pendingConnections_.length,e=0;e<c;e++)if(this.pendingConnections_[e].win===a.source){c=this.pendingConnections_.splice(e,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(r,"*");break}};f.prototype.handleConnectionAckMsg_=
function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,e=0;e<c;e++)if(this.acceptedConnections_[e].win===a.source){a=this.acceptedConnections_.splice(e,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};f.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),e=c.length,f=0;f<e;f++){var h=c[f];!h||h.filter&&!h.filter.call(this,a)||h.listener.call(this,a)}e=
this.completedConnections_.length;for(f=0;f<e;f++)this.completedConnections_[f].win!==a.source&&this.completedConnections_[f].win.postMessage(a.data,"*")}};f.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var a=10,e="qoConnectionRequest",p="qoConnectionAccepted",r="qoConnectionAck";return f});
define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(c){return new c});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function c(a,c){var f=[],l=[],p=[],P=[];e[a]&&e[a].length&&(r++,e[a].forEach(function(a){a.config.after?l.push(a):f.push(a);a.config.once&&P.push(a)}),f.concat(l).forEach(function(e){p.push(e.callback(a,c))}),P.forEach(function(a){h(a.token)}));return Promise.all(p)}function h(a){var c;_.values(e).some(function(e){return e.some(function(f,h){return f.token===a?(c=e.splice(h,1)[0],!0):!1})});return c}function l(a){var c=
0;return c=a?e[a]?e[a].length:0:_.values(e).reduce(function(a,c){return a+c.length},0)}function f(){e={}}var a=Object.create(Object.prototype,{subscriberCount:{get:function(){return l()}},registeredSignals:{get:function(){return _.keys(e)}},publishCount:{get:function(){return r}}});a.subscribe=function(a,c,f){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");f=f||{};f.once=!!f.once;f.after=!!f.after;var h=(++p).toString();e[a]=
e[a]||[];e[a].push({token:h,callback:c,config:f});return h};a.publish=function(a,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");e=e||{};return c(a,e)};a.doAction=function(a,e){if(!_.isString(a)||!a)throw new TypeError("invalid action");e=e||{};e=_.isString(e)?{contentType:e}:e;return c("qowt:doAction",{action:a,context:e})};a.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return h(a)}};a.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return l(a)};a.clear=f;a.reset=function(){f();r=p=0};var e={},p=0,r=0;return a});(function(){var c={},h=window.sessionStorage.getItem("featureOverrides");h&&(c=JSON.parse(h));c.isRelease=!0;c.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(c));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var c={},h=window.sessionStorage.getItem("featureOverrides");h&&(c=JSON.parse(h));c.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(c))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(c){var h={isEnabled:function(f){f=c[f];return void 0===f?!1:f},enable:function(f){c[f]=!0},disable:function(f){c[f]=!1},setOverrides:function(f){for(var a in f)f.hasOwnProperty(a)&&(c[a]=f[a])},isDebug:function(){return void 0!==l?l:!h.isEnabled("isRelease")},setDebugOverride:function(c){l=c},clearDebugOverride:function(){l=void 0}},l;return h});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(c,h){var l={cast:function(c){return c instanceof Promise?c:Promise.resolve(c)},delay:function(c,a){c=c||0;return new Promise(function(e){setTimeout(e.bind(void 0,a),c)})},delayThenReject:function(c,a){c=c||0;return new Promise(function(e,h){setTimeout(h.bind(e,a),c)})},throwAndEscapeChain:function(c){c instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",c),c=
Error(c));h.reject(c).done();throw c;},pipeline:function(f){function a(){for(var h=Array.prototype.slice.call(arguments,0);0<f.length;){var k=f.shift();if(c.isPromiseLike(k))return l.cast(k).then(function(c){f.unshift(c);return a.apply(e,h)});c.checkArgTypes("PromiseUtils.pipeline",{task:[k,"function"]});k=k.apply(e,h);if(c.isPromiseLike(k))return l.cast(k).then(function(c){return a(c)});h=[k]}return h[0]}var e=this,h=Array.prototype.slice.call(arguments,0);if(h.some(c.isPromiseLike))return Promise.all(h).then(function(a){return l.pipeline.apply(e,
a)});c.checkArgTypes("PromiseUtils.pipeline",{tasks:[f,"list"]});f=f.slice(0);return a.apply(e,h.slice(1))},finally:function(c,a){function e(){return l.cast(a()).then(function(){return c})}return l.cast(c).then(e,e)},waitForNextMacroTurn:function(c){return new Promise(function(a){window.setTimeout(a.bind(null,c),0)})}};return l});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(c,h){function l(a,e){var h;void 0!==B?h=B?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!c.isDebug()||void 0!==window.__gaMock)?h=Promise.resolve():(console.warn("GA not supported on this platform"),h=Promise.reject(Error("GA not supported on this platform"))),
h=h.then(f).catch(p));return h.then(r).then(a.bind(null,e)).catch(function(){})}function f(){var c=Error("Crash reporting setting timed out");return Promise.race([a(),h.delayThenReject(1E3,c)]).then(e)}function a(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function e(a){return new Promise(function(c,e){C=window.analytics.getService(P);C.getConfig().addCallback(function(f){f.setTrackingPermitted(a);(B=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function p(){B=!1;return Promise.reject()}function r(){void 0===t&&k("QO");return Promise.resolve()}function k(a){t&&t.sendAppView(a);t=C.getTracker(O[a]);H&&t.set(window.analytics.Parameters.SESSION_GROUP,H);"QO"!==a&&N&&t.set(window.analytics.Parameters.APP_ID,N);t.forceSessionStart();return Promise.resolve()}function w(a){A!==a&&(A=a,t.sendAppView(a));return Promise.resolve()}function q(a){t.sendException(a.msg,a.fatal);return Promise.resolve()}function v(a){t.sendEvent(a.category,a.action,a.label,
a.value);return Promise.resolve()}var O={word:"UA-44583639-1",sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},P="Quickoffice",A,B,C,t,H,N;return{setFileExt:function(a){N=a},setSessionGroup:function(a){H=a},setTracker:function(a){return l(k,a)},sendState:function(a){return l(w,a)},sendException:function(a){return l(q,a)},sendEvent:function(a){return l(v,a)},reset:function(){t=C=B=A=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(c,h){var l={getMessage:function(f,a){var e="????";if(!chrome||!chrome.i18n)return f;c.isString(f)?(e=chrome.i18n.getMessage(f,a),e||(e=f,l.logError_("Missing translation",f))):l.logError_("Invalid string translation Id",f);return e},logError_:function(c,a){console.error(c+" "+a);h.sendException({msg:c,fatal:!1})}};return l});
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(c,h){var l=function(f){f=f||"";this.name="LocalisedError";c.isObject(f)&&_.extend(this,f);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(f)||this.title||this.details||this.additionalInfo);f.localised||this instanceof QOWTSilentError||(this.title=h.getMessage(this.title),this.details=f.fileName?h.getMessage(this.details,f.fileName):h.getMessage(this.details),
this.linkData&&this.linkData.msg&&(this.linkData.msg=h.getMessage(this.linkData.msg)||this.linkData.msg));Error.captureStackTrace(this,l)};l.prototype=Object.create(Error.prototype);return l.prototype.constructor=l});define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(c){var h=function(){c.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,h);this.fatal=!1};h.prototype=Object.create(c.prototype);h.prototype.constructor=h;return window.QOWTError=h});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(c){var h=function(){c.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,h);this.fatal=!1;this.silent=!0};h.prototype=Object.create(c.prototype);h.prototype.constructor=h;return window.QOWTSilentError=h});
define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(c){var h=function(){c.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,h);this.fatal=!0};h.prototype=Object.create(c.prototype);h.prototype.constructor=h;return window.QOWTException=h});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(c,h,l,f,a,e){function p(a){a.error?(console.error("%s caught js exception: %s",A,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),k(a.error)):console.error(a)}function r(a,c){console.log("%s caught deprecated error",
A);console.log(c);c.isDeprecatedError=!0;k(c)}function k(k){if(k instanceof Error)void 0===k.fatal&&(k.fatal=!0);else{console.log("%s converting deprecated/bad error",A);switch(!0){case c.isObject(k)&&k.isDeprecatedError:var l={title:k.errorId?k.errorId+"_short_msg":void 0,details:k.errorId?k.errorId+"_msg":void 0,linkData:k.linkData,message:k.additionalInfo};k=k.fatal?new e(l):k.silent?new a(l):new f(l);break;case c.isNumber(k):k=new e({code:k});break;case c.isString(k):k=new e(k);break;default:k=
new e(k.toString())}k.stack=void 0}C.push(k);w(k);if(!k.isSynced){console.log("%s pushing error to msg bus",A);l=_.extend({},k);l.name=k.name;l.message=k.message;l.stack=k.stack;try{h.pushMessage({id:O,error:JSON.stringify(l)})}catch(p){}}}function w(a){console.log("%s dispatching error to observers",A);P.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function q(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
A);a=JSON.parse(a.data.error);var c={},c=["QOWTError","QOWTSilentError","QOWTException"];-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),-1!==c.indexOf(a.name)&&(a.localised=!0),c=new window[a.name](a)):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;k(a)}}function v(a){return a&&a.data&&a.data.id===
O}var O="errorSync",P=[],A="sandbox"===window.name?"QOWT":"App",B,C=[];return{init:function(){B=l.subscribe("qowt:error",r);window.addEventListener("error",p);h.listen(q,v);Error.stackTraceLimit=Infinity},reset:function(){l.unsubscribe(B);window.removeEventListener("error",p);h.stopListening(q);P=[]},handleError:function(a){k(a)},addObserver:function(a){c.isFunction(a)?P.push(a):console.warn("Error observer must be a function")},observers:function(){return P},lastError:function(){return C[C.length-
1]}}});define("qowtRoot/errors/unique/fileDoesNotExistError",["qowtRoot/errors/qowtException"],function(c){var h=function(){this.title="file_does_not_exist_error_title";this.details="file_does_not_exist_error_details";this.gaState="FileDoesNotExistError";c.apply(this,arguments);this.name="FileDoesNotExistError";Error.captureStackTrace(this,h)};h.prototype=Object.create(c.prototype);return h.prototype.constructor=h});
define("qowtRoot/utils/tryUtils",["qowtRoot/utils/typeUtils"],function(c){var h=function(c){this.rethrowOnException=!1;this.optMsg=c};h.prototype={__proto__:Object.prototype,ignore:function(){return this.run.apply(this,arguments)},rethrow:function(){this.rethrowOnException=!0;return this.run.apply(this,arguments)},run:function(){var h=arguments[0],f=[].splice.call(arguments,1);try{return h.apply(null,f)}catch(a){this.optMsg&&(c.isString(this.optMsg)?console.warn(this.optMsg):console.dir(this.optMsg));
if(this.rethrowOnException){if(a instanceof Error)throw a;throw Error(a);}console.warn("Ignoring exception: ",a)}}};return{withWarning:function(c){return new h(c)},ignore:function(){if(!c.isFunction(arguments[0]))throw Error("ignore must be passed a function as first argument");var l=new h;return l.ignore.apply(l,arguments)},rethrow:function(){var c=new h;return c.rethrow.apply(c,arguments)}}});
define("qowtRoot/utils/platform",[],function(){var c=Object.create(Object.prototype,{name:{get:function(){return h}},locale:{get:function(){return l}},isOther:{get:function(){return"OTHER"===h}},isUnix:{get:function(){return"UNIX"===h}},isWindows:{get:function(){return"WINDOWS"===h}},isOsx:{get:function(){return"OSX"===h}},isLinux:{get:function(){return"LINUX"===h}},isCros:{get:function(){return"CROS"===h}}}),h,l;(function(){h="OTHER";var c=navigator.appVersion.toLowerCase();-1!==c.indexOf("x11")&&
(h="UNIX");-1!==c.indexOf("win")&&(h="WINDOWS");-1!==c.indexOf("mac")&&(h="OSX");-1!==c.indexOf("linux")&&(h="LINUX");-1!==c.indexOf("cros")&&(h="CROS");l=navigator.language.toUpperCase()})();return c});
define("controllers/appState",["qowtRoot/errors/errorCatcher","utils/analytics/googleAnalytics"],function(c,h){function l(a){f.updateState(a.gaState?a.gaState:a.fatal?"FatalCrash":"NonFatalError",{data_reason:a.message,data_fatal:a.fatal})}var f={init:function(){c.addObserver(l);f.updateState("Init")},setApp:function(a,c){h.setFileExt(c);h.setTracker(a)},updateState:function(c,f){a!==c&&(a=c,window.qowtState={state:a,context:f},h.sendState(a))}},a;return f});
define("utils/converter",[],function(){var c={app2Icon:function(c){return{word:"../img/doc.ico",sheet:"../img/xls.ico",point:"../img/ppt.ico"}[(c||"").toLowerCase()]},extension2Format:function(c){return{doc:"CBF",docx:"OOXML",docm:"OOXML",dot:"CBF",dotx:"OOXML",xls:"CBF",xlsx:"OOXML",xlsm:"OOXML",xlt:"CBF",xltx:"OOXML",csv:"CSV",ppt:"CBF",pptx:"OOXML",pptm:"OOXML",pot:"CBF",potx:"OOXML"}[(c||"").toLowerCase()]},extension2App:function(c){return{doc:"word",docx:"word",docm:"word",dot:"word",dotx:"word",
xls:"sheet",xlsx:"sheet",xlsm:"sheet",xlt:"sheet",xltx:"sheet",csv:"sheet",ppt:"point",pptx:"point",pptm:"point",pot:"point",potx:"point"}[(c||"").toLowerCase()]},extension2Mime:function(c){return{doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",docm:"application/vnd.ms-word.document.macroenabled.12",dot:"application/msword-template",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xls:"application/vnd.ms-excel",
xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlt:"application/vnd.ms-excel",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",csv:"text/csv",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",pot:"application/vnd.ms-powerpoint",potx:"application/vnd.openxmlformats-officedocument.presentationml.template"}[(c||
"").toLowerCase()]},app2FileName:function(c){return{word:"Document",point:"Presentation",sheet:"Spreadsheet"}[(c||"").toLowerCase()]},url2App:function(c){var f,a="";(c=(c||"").match(/.*\/([^\/?]*)/))&&(c=c[1].match(/.*\.([^\.]*)$/))&&(a=c[1]);switch(a.toLowerCase()){case "doc":case "docx":case "docm":f="word";break;case "xls":case "xlsx":case "xlsm":case "csv":f="sheet";break;case "ppt":case "pptx":case "pptm":f="point"}return f},mime2Extension:function(c){return h[(c||"").toLowerCase()]},mime2App:function(h){return c.extension2App(c.mime2Extension(h))},
mime2Icon:function(h){return c.app2Icon(c.mime2App(h))},mime2Format:function(h){return c.extension2Format(c.mime2Extension(h))},name2ext:function(c){var f="";(c=(c||"").match(/.*\.([^\.]*)$/))&&(f=c[1]);return f}},h={"application/msword":"doc","application/vnd.ms-word":"doc","application/vnd.msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.wordprocessing-openxml":"docx","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.document.12":"docm",
"application/vnd.openxmlformats":"docx","application/msword-template":"dot","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/mspowerpoint":"ppt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.presentation-openxml":"pptx","application/vnd.presentation-openxmlm":"pptx","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.openxmlformats-officedocument.presentationml.template":"potx",
"application/msexcel":"xls","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.spreadsheet-openxml":"xlsx","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","text/csv":"csv"};return c});
define("qowtRoot/errors/unique/httpErrorFileNotFound",["qowtRoot/errors/qowtException"],function(c){var h=function(){this.title="temporary_unable_to_open_error_short_msg";this.details="temporary_unable_to_open_error_msg";this.gaState="HTTPErrorFileNotFound";c.apply(this,arguments);this.name="HTTPErrorFileNotFound";this.message="HTTP ERROR: 404";Error.captureStackTrace(this,h)};h.prototype=Object.create(c.prototype);return h.prototype.constructor=h});
define("qowtRoot/errors/unique/httpErrorZero",["qowtRoot/errors/qowtException"],function(c){var h=function(){this.title="http_error_zero_short_msg";this.details="http_error_zero_msg";this.gaState="HTTPErrorZero";c.apply(this,arguments);this.name="HTTPErrorZero";this.message="HTTP ERROR: 0";Error.captureStackTrace(this,h)};h.prototype=Object.create(c.prototype);return h.prototype.constructor=h});
define("qowtRoot/errors/unique/timeoutError",["qowtRoot/errors/qowtException"],function(c){var h=function(){this.gaState="TimeoutError";c.apply(this,arguments);this.name="TimeoutError";Error.captureStackTrace(this,h)};h.prototype=Object.create(c.prototype);return h.prototype.constructor=h});
define("utils/retryHandler",[],function(){var c=function(){this.interval=1E3;this.maxInterval=6E4};c.prototype={__proto__:Object.prototype,maxedOut:function(){return this.interval>this.maxInterval},retry:function(c){setTimeout(c,this.interval);this.interval=this.nextInterval_()},reset:function(){this.interval=1E3},nextInterval_:function(){var c=2*this.interval+this.getRandomInt_(0,1E3);return Math.min(c,this.maxInterval)},getRandomInt_:function(c,l){return Math.floor(Math.random()*(l-c+1)+c)}};return c});
define("utils/xhr","qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/utils/typeUtils qowtRoot/third_party/when/when utils/retryHandler".split(" "),function(c,h,l,f,a,e,p){var r=function(a){this.method_=a.method||"GET";this.responseType_=a.responseType||"blob";this.url_=this.buildUrl_(a.baseUrl,a.params);this.authToken_=a.authToken;this.contentType_=a.contentType;this.deferred_=e.defer();this.kEstimatedDownloadChunks_=
20;this.timeoutLength_=6E5;this.remainingChunks_=this.kEstimatedDownloadChunks_;this.progress_=0;this.retryHandler_=new p;a.abortPromise&&(a.abortPromise=a.abortPromise.catch(function(){this.xhr_&&this.xhr_.abort&&this.xhr_.abort();this.deferred_.reject(Error("XHR canceled"))}))};r.prototype={__proto__:Object.prototype,send:function(a){this.xhr_=this.createXMLHttpRequest_();this.xhr_.send(a);this.startConnectionTimeout_();return this.deferred_.promise},createXMLHttpRequest_:function(){var a=new XMLHttpRequest;
"GET"===this.method_?a.onprogress=this.onProgress_.bind(this):a.upload.onprogress=this.onProgress_.bind(this);a.onload=this.onSuccess_.bind(this);a.onerror=this.onError_.bind(this);a.open(this.method_,this.url_,!0);a.responseType=this.responseType_;this.authToken_&&a.setRequestHeader("Authorization","Bearer "+this.authToken_);this.contentType_&&a.setRequestHeader("Content-Type",this.contentType_);return a},onSuccess_:function(a){this.clearConnectionTimeout_();if(4===a.target.readyState){var c=a.target.response||
a.target.responseText;if(200!==a.target.status&&0!==a.target.status||!c)if(0!==a.target.status&&200!==a.target.status||c)this.onError_(a);else this.deferred_.reject("HTTP ERROR: ABORTED");else{if("json"===a.target.responseType&&"string"===typeof c)try{c=JSON.parse(c)}catch(e){return this.deferred_.reject(Error("XHR response not valid JSON"))}this.deferred_.notify(1);this.deferred_.resolve(c)}}},onProgress_:function(a){this.resetConnectionTimeout_();a&&a.lengthComputable?this.progress_=(a.position||
a.loaded)/(a.totalSize||a.total):(a=this.remainingChunks_/this.kEstimatedDownloadChunks_,this.remainingChunks_-=a,this.progress_+=a/this.kEstimatedDownloadChunks_);this.deferred_.notify(this.progress_)},onError_:function(a){a.target.status&&(500<=a.target.status||429===a.target.status)?this.retry_(a):this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status))},retry_:function(a){this.retryHandler_.maxedOut()?this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status)):this.retryHandler_.retry(this.send.bind(this))},
getErrorFromXhrStatus_:function(a){return 0===a?new l:404===a?new h:new c("HTTP ERROR: "+a)},buildUrl_:function(a,c){var e=this.parseUrl_(a),f=this.buildQuery_(c);f&&(e+="?"+f);return e},buildQuery_:function(a){a=a||{};return Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},parseUrl_:function(c){if(a.isString(c)){var e=c;e.match(/^http[s]?:\/\//)||e.match(/^blob:/)||e.match(new RegExp("^"+window.location.origin))||(c="http://"+c)}else throw Error("URL for XHR should be a string");
return c},startConnectionTimeout_:function(){this.timeout_=window.setTimeout(function(){var a=new f("XHR timed out");this.deferred_.reject(a)}.bind(this),this.timeoutLength_)},clearConnectionTimeout_:function(){window.clearTimeout(this.timeout_);delete this.timeout_},resetConnectionTimeout_:function(){this.clearConnectionTimeout_();this.startConnectionTimeout_()}};return r});
define("utils/fileWriter",["qowtRoot/third_party/when/when","utils/analytics/googleAnalytics"],function(c,h){var l=function(c){this.entry=c;this.state=0};l.prototype={__proto__:Object.prototype,writeData:function(c){return this.createWriter_().then(this.truncateAndWrite_.bind(this,c)).then(function(){return this.entry}.bind(this))},createWriter_:function(){var f=c.defer();c(0===this.state).then(function(){this.entry.createWriter(f.resolve,f.reject)}.bind(this));return f.promise},writeOrResolve_:function(c,
a,e){if(2===a.readyState)switch(this.state){case 3:try{this.state=1,a.write(c)}catch(l){e.reject(Error(l))}break;case 1:this.state=0,e.resolve()}else h.sendException({msg:"Callback for write/ writeend called when FileWriter.readyState !== DONE",fatal:!1})},truncateAndWrite_:function(f,a){return c.promise(function(c,h){1===a.readyState&&h(Error("INVALID_STATE_ERR : Cannot write when the previous write is still in progress"));a.onwrite=this.writeOrResolve_.bind(this,f,a,{reject:h,resolve:c});a.onerror=
function(a){h(Error(a.currentTarget.error.message))};try{this.state=3,a.truncate(0)}catch(l){throw Error(l);}}.bind(this))}};return l});
define("utils/metrics",["qowtRoot/features/utils","qowtRoot/utils/typeUtils"],function(c,h){var l,f="doc docx docm xls xlsx xlsm ppt pptx pptm pps ppsx ppsm csv".split(" "),a="csvNonEmptyCellCount csvSheetCount csvFormattedCellCount docPageCount docSectionCount docParagraphCount docxPageCount docxSectionCount docxParagraphCount pptSlideCount pptMasterCount pptxSlideCount pptxMasterCount xlsNonEmptyCellCount xlsSheetCount xlsFormattedCellCount xlsxNonEmptyCellCount xlsxSheetCount xlsxFormattedCellCount".split(" ");return{recordFileType:function(a){if(a){var h=
l=a.toLowerCase();if(chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.recordValue){var r;"Array"===f.constructor.name?(a=f.indexOf(h),r=f.length):(a=h,r=f);0>a||a>r?console.warn("Ignoring metrics record for unknown value: "+h):(h={metricName:"Quickoffice.FileFormat",type:"histogram-linear",min:1,max:r,buckets:r+1},c.isDebug()&&void 0===window.__umaMock?console.log("UMA not supported in debug mode"):chrome.metricsPrivate.recordValue(h,a))}}},recordCount:function(e){e=e||{};var f=l+(e.dataPoint||
"");e=e.value||0;if(h.isString(name)&&h.isNumber(e)&&h.isList(a)){var r,k;h.isList(a)?(k=a.indexOf(f),r=a.length):(k=f,r=a);if(!(0<=k&&k<=r))console.warn("Ignoring unknown metrics record "+f+" with value: "+e);else if(!c.isDebug()&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate)switch(r="Quickoffice."+f,f){case "docPageCount":case "docxPageCount":chrome.metricsPrivate.recordValue&&chrome.metricsPrivate.recordValue({metricName:r,type:"histogram-log",min:1,max:1E3,buckets:50},e);break;case "docParagraphCount":case "docxParagraphCount":chrome.metricsPrivate.recordMediumCount&&
chrome.metricsPrivate.recordMediumCount(r,e);break;case "csvSheetCount":case "docSectionCount":case "docxSectionCount":case "xlsSheetCount":case "xlsxSheetCount":case "pptSlideCount":case "pptxSlideCount":case "pptMasterCount":case "pptxMasterCount":chrome.metricsPrivate.recordSmallCount&&chrome.metricsPrivate.recordSmallCount(r,e);break;case "csvNonEmptyCellCount":case "xlsNonEmptyCellCount":case "xlsxNonEmptyCellCount":case "csvFormattedCellCount":case "xlsFormattedCellCount":case "xlsxFormattedCellCount":chrome.metricsPrivate.recordCount&&
chrome.metricsPrivate.recordCount(r,e);break;default:console.warn("Record count ignored unknown metric "+r)}}else console.warn("Metrics cannot record count - invalid parameters")}}});
define("qowtRoot/errors/unique/scriptLoadingTimeout",["qowtRoot/errors/qowtException"],function(c){var h=function(){this.title="drive_open_timeout_error_short_msg";this.details="drive_open_timeout_error_msg";this.gaState="ScriptLoadingTimeout";c.apply(this,arguments);this.name="ScriptLoadingTimeout";Error.captureStackTrace(this,h)};h.prototype=Object.create(c.prototype);return h.prototype.constructor=h});
define("qowtRoot/utils/driveErrors",[],function(){return{OFFLINE:-1,AUTHENTICATION_TOKEN_NOT_ISSUED:400,INVALID_CREDENTIALS:401,FORBIDDEN:403,FILE_NOT_FOUND:404,CONVERT_FAILURE:413,INTERNAL_SERVER_ERROR:500,TIMEOUT:503}});
define("utils/gdrive/firstPartyAuth",["qowtRoot/third_party/when/when","qowtRoot/utils/driveErrors"],function(c,h){function l(){window[v]=void 0;window[r]=void 0;return c.resolve()}function f(){return a(p,w).then(function(){return a(p,k)}).then(function(){return a(p,q)}).then(function(){return Promise.reject({status:h.INVALID_CREDENTIALS})}).catch(function(a){return a?Promise.reject(a):Promise.resolve()})}function a(a,c){return new Promise(function(e,f){chrome.cookies.get({url:a,name:c},function(a){a&&
void 0!==a.value?(window[v]=a.value,f()):e()})})}function e(a,e,f,k){return c.promise(function(c,l){chrome.cookies.get({url:a,name:e},function(a){a&&void 0!==a.value?(window[f]=k?a.value:!!a.value,c()):l({status:h.INVALID_CREDENTIALS})})})}var p="https://*.google.com/",r="__OVERRIDE_SID",k="SAPISID",w="__Secure-1PAPISID",q="__Secure-3PAPISID",v="__SAPISID";return{setCookies:function(){return c.all([l(),f()])},setCookiesOlderWay:function(){return c.all([l(),e("http://*.google.com/","SID",r),e(p,k,
v,!0)])}}});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/deprecatedUtils",["qowtRoot/models/env","qowtRoot/utils/typeUtils","qowtRoot/errors/qowtSilentError","qowtRoot/errors/errorCatcher"],function(c,h,l,f){var a={NodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,1:"ELEMENT_NODE",2:"ATTRIBUTE_NODE",3:"TEXT_NODE",4:"CDATA_SECTION_NODE",5:"ENTITY_REFERENCE_NODE",
6:"ENTITY_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE",12:"NOTATION_NODE"},RegExp:{HEX:/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/gi,HEX3:/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/gi},regExpExec:function(a,c){var f;if(h.isRegex(a)&&h.isString(c)){var k=a.exec(c);k&&k.length&&(f=k);a.lastIndex=0}return f},parseBoolean:function(a){return"false"===a||"False"===a||!1===a||0===a?!1:!0},computePercentValueOf:function(a,c){return a*
c/100},stripNode:function(c){for(var f=a.cpArray(c.childNodes),h=c.parentNode,k=0;k<f.length;k++)Polymer.dom(h).insertBefore(f[k],c),Polymer.dom(h).flush();Polymer.dom(h).removeChild(c);Polymer.dom(h).flush()},cpArray:function(a){for(var c=[],f=0;f<a.length;f++)c[c.length]=a[f];return c},cloneAndAttach:function(c,f,h){h=a.cloneDiv(c,h);a.copyAllContainedCanvases(c,h);Polymer.dom(f).appendChild(h);Polymer.dom(f).flush();return h},cloneDiv:function(c,f){var h=c.cloneMe?c.cloneMe():c.cloneNode(!1);"qowt-point-para"===
h.is&&(h.className=h.className.replace(/[\s]qowt-point-para-[\d]+/,""));h.setEid&&h.setEid(c.getEid());for(var k=0;k<c.childNodes.length;k++){var l=c.childNodes[k];l.getAttribute&&"handlers"===l.getAttribute("qowt-divtype")||(l=a.cloneDiv(l),h.appendChild(l))}f&&(h.id=f);return h},copyAllContainedCanvases:function(c,f){for(var h=c.querySelectorAll("canvas"),k=f.querySelectorAll("canvas"),l=0;l<h.length;l++)if(void 0!==h[l]&&void 0!==k[l]){var q=h[l].getContext("2d"),v=k[l].getContext("2d");a.cloneCanvasImage(q,
v)}},cloneCanvasImage:function(a,c){if(0<a.canvas.width&&0<a.canvas.height){var h=a.getImageData(0,0,a.canvas.width,a.canvas.height);h?c.putImageData(h,0,0):(h=new l("Failed to execute putImageData on CanvasRenderingContext2D."),f.handleError(h))}},getElementStyleString:function(a){var c="",f;for(f in a)c+=f+":"+a[f]+";";return c},appendJSONAttributes:function(a,c){for(var f in c)a[f]=c[f]},bulletTextMeasureElement:void 0,setBulletTextMeasureElement:function(){a.bulletTextMeasureElement={};a.bulletTextMeasureElement._bulletTextMeasureElement=
document.createElement("P");a.bulletTextMeasureElement._bulletTextMeasureElement.className="bulletTextMeasureCss";a.bulletTextMeasureElement._bulletTextMeasureElement.style.position="absolute";a.bulletTextMeasureElement._bulletTextMeasureElement.style.visibility="hidden";a.bulletTextMeasureElement._bulletTextMeasureElement.height="auto";a.bulletTextMeasureElement._bulletTextMeasureElement.width="auto";a.bulletTextMeasureElement._bulletTextMeasureElement_Style=document.createElement("style");a.bulletTextMeasureElement._bulletTextMeasureElement_Style.type=
"text/css";document.getElementsByTagName("head")[0].appendChild(a.bulletTextMeasureElement._bulletTextMeasureElement_Style);c.rootNode.appendChild(a.bulletTextMeasureElement._bulletTextMeasureElement)},setNumberTextMeasureElement:function(){a.numberTextMeasureElement={};a.numberTextMeasureElement._numberTextMeasureElement=document.createElement("P");a.numberTextMeasureElement._numberTextMeasureElement.className="numberTextMeasureCss";a.numberTextMeasureElement._numberTextMeasureElement.style.position=
"absolute";a.numberTextMeasureElement._numberTextMeasureElement.style.visibility="hidden";a.numberTextMeasureElement._numberTextMeasureElement.height="auto";a.numberTextMeasureElement._numberTextMeasureElement.width="auto";a.numberTextMeasureElement._numberTextMeasureElement_Style=document.createElement("style");a.numberTextMeasureElement._numberTextMeasureElement_Style.type="text/css";document.getElementsByTagName("head")[0].appendChild(a.numberTextMeasureElement._numberTextMeasureElement_Style);
if(void 0===c.rootNodeContainer||null===c.rootNodeContainer)c.rootNodeContainer=document.getElementById("qowt-doc-root");c.rootNodeContainer.appendChild(a.numberTextMeasureElement._numberTextMeasureElement)},returnUndefinedIfEmptyJson:function(a){return _.isEmpty(a)?void 0:a}};return a});
define("qowtRoot/utils/domUtils",["qowtRoot/models/env","qowtRoot/utils/deprecatedUtils","qowtRoot/utils/typeUtils"],function(c,h,l){var f={totalHeight:function(a){return a.getBoundingClientRect().height},peerIndex:function(a){if(a){for(var c=0;a.previousElementSibling;)"TEMPLATE"!==a.previousElementSibling.nodeName&&c++,a=a.previousElementSibling;return c}},isEditable:function(a){a.nodeType===Node.TEXT_NODE&&(a=a.parentNode);return(a=window.getComputedStyle(a))?"read-write"===a["-webkit-user-modify"]:
!1},previousNode:function(a){for(var c=a?a.previousSibling:void 0;!c&&a&&a.parentNode;)a=a.parentNode,c=a.previousSibling;for(;c&&c.lastChild;)c=c.lastChild;return c},nextNode:function(a){for(var c=a?a.nextSibling:void 0;!c&&a&&a.parentNode;)a=a.parentNode,c=a.nextSibling;for(;c&&c.firstChild;)c=c.firstChild;return c},rightMostLeafNode:function(a){for(a=a&&"P"===a.nodeName?a&&a.lastElementChild:a&&Polymer.dom(a).lastChild;a&&Polymer.dom(a).lastChild;)a=Polymer.dom(a).lastChild,"span"===a.nodeName.toLowerCase()&&
a.lastChild&&(a=a.lastChild);return a},leftMostLeafNode:function(a){for(a=a&&"P"===a.nodeName?a&&a.firstElementChild:a&&Polymer.dom(a).firstChild;a&&Polymer.dom(a).firstChild;)a=Polymer.dom(a).firstChild,"span"===a.nodeName.toLowerCase()&&a.firstChild&&(a=a.firstChild);return a},getSiblingByIndex:function(a,c){for(;0<c;c--)if(a=Polymer.dom(a).nextSibling,!a)return null;return a},insertAtStart:function(a,e){"point"===c.app&&(0<e.children.length?e.insertBefore(a,e.children[0]):e.appendChild(a));"word"===
c.app&&("P"===e.nodeName?0<e.children.length?e.insertBefore(a,e.children[0]):e.appendChild(a):(0<Polymer.dom(e).children.length?Polymer.dom(e).insertBefore(a,Polymer.dom(e).children[0]):Polymer.dom(e).appendChild(a),Polymer.dom(e).flush()))},insertAtEnd:function(a,c){"P"===c.nodeName?c.appendChild(a):(Polymer.dom(c).appendChild(a),Polymer.dom(c).flush())},insertAfter:function(a,e){var f=Polymer.dom(e).parentNode;f&&("word"===c.app?"P"===f.nodeName?f.insertBefore(a,e.nextSibling):(Polymer.dom(f).insertBefore(a,
Polymer.dom(e).nextElementSibling),Polymer.dom(f).flush()):(a instanceof QowtPointRun&&(f=e.parentNode),f&&f.insertBefore(a,e.nextSibling)))},insertBefore:function(a,e){var f;if("word"===c.app){if(f=Polymer.dom(e).parentNode)"P"===f.nodeName?e.isQowtElement||1!==f.children.length?f.insertBefore(a,e):f.appendChild(a):(e.isQowtElement||1!==f.children.length?Polymer.dom(f).insertBefore(a,e):Polymer.dom(f).appendChild(a),Polymer.dom(f).flush())}else(f=e.parentNode)&&f.insertBefore(a,e)},insertAtSiblingOrParent:function(a,
c){if(!a)throw Error("insertAtSiblingOrParent missing context");if(!a.parentNodeId&&!a.siblingNodeId)throw Error("insertAtSiblingOrParent requires either parentNodeId or siblingNodeId");if(!a.parentNodeId)throw Error("insertAtSiblingOrParent missing parentNodeId");if(c&&!l.isFunction(c))throw Error("insertAtSiblingOrParent errorFuncton must be  a function");var h;(h=document.getElementById(a.siblingNodeId))?f.insertAfter(a.node,h):(h=document.getElementById(a.parentNodeId))?h.insertBefore(a.node,
Polymer.dom(h).children[0]):c&&l.isFunction(c)&&c(" failed to insert node - no parent or sibling node found!")},relativePosition:function(a){if(a.nodeType!==Node.TEXT_NODE)throw Error("error: relativePosition needs to be given text node");var c=0,f=0;for(a=Polymer.dom(a).previousSibling;a&&a.nodeType===Node.TEXT_NODE;)c+=a.textContent.length,a=a.previousSibling,f++;return{textNodeIndex:f,characterOffset:c}},absolutePos:function(a){var c=0,f=0;if(a.offsetParent){do c+=a.offsetTop,f+=a.offsetLeft,a=
a.offsetParent;while(null!==a)}return{top:c,left:f}},absoluteScroll:function(a){var c=0,f=0;if(a.offsetParent){do c+=a.scrollTop,f+=a.scrollLeft,a=a.offsetParent;while(null!==a)}return{top:c,left:f}},getById:function(a){if(1<arguments.length){for(var c=0,h=[],r=arguments.length;c<r;c++)h.push(f.getById(arguments[c]));return h}l.isString(a)&&(a=document.getElementById(a));return a},prependChildrenID:function(a,c,h){h=h||"-";if(a&&a.id&&(a.id=""+c+h+a.id,a.childNodes&&a.childNodes.length))for(var l=
0,k=a.childNodes.length;l<k;l++)f.prependChildrenID(a.childNodes[l],c,h)},insert:function(a,c,f){switch(f){case "replace":Polymer.dom(a).parentNode.replaceChild(c,a);Polymer.dom(a).flush();break;case "before":Polymer.dom(a).parentNode.insertBefore(c,a);Polymer.dom(a).flush();break;case "after":if(a===Polymer.dom(a).parentNode.childNodes[Polymer.dom(a).parentNode.childNodes.length-1])Polymer.dom(a).parentNode.appendChild(c);else{for(a=Polymer.dom(a).nextSibling;a&&a.nodeType!==h.NodeType.ELEMENT_NODE;)a=
Polymer.dom(a).nextSibling;Polymer.dom(a).parentNode.insertBefore(c,a)}Polymer.dom(a).flush();break;case "top":Polymer.dom(a).insertBefore(c,Polymer.dom(a).childNodes[0]);Polymer.dom(a).flush();break;default:Polymer.dom(a).appendChild(c),Polymer.dom(a).flush()}},stopEvent:function(a){a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())},contains:function(a,c){return a?!!(a.compareDocumentPosition(c)&document.DOCUMENT_POSITION_CONTAINED_BY):!1},isElementInViewport:function(a){a=
a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},removeNode:function(a){if(a&&l.isNode(a)){var c=Polymer.dom(a).parentNode;c&&l.isNode(c)&&(Polymer.dom(a).parentNode.removeChild(a),Polymer.dom(a).flush())}},getTransformValue:function(a,c){var f=a.style.webkitTransform;if(""!==f)for(var f=f.split(")"),h=0;h<f.length;h++){var k=f[h].split("(");if(k[0].trim()===
c)switch(c){case "scale":return h=k[1].split(","),f=h[0].trim(),h=h[1].trim(),{flipH:f,flipV:h};case "rotate":return k[1]}}return!1},cloneStyle:function(a,c){c&&a&&(a.style.cssText=c.style.cssText)},isField:function(a){a=a?a.getAttribute&&a.getAttribute("qowt-divtype"):"";return"qowt-field-datetime"===a||"qowt-field-numpages"===a||"qowt-field-pagenum"===a?!0:!1},getLastEditableNode:function(a){if(1===a.children.length&&(a.isEmpty()||a.children[0]instanceof QowtHyperlink))return a.children[0];a=a.childNodes;
for(var c=a.length-1;-1<c&&!(a[c]instanceof QowtWordRun&&!a[c].isEmpty()||a[c]instanceof HTMLBRElement||a[c]instanceof QowtHyperlink);)c--;return a[c]},cloneNode:function(a,e,f){var h;h=a.cloneMe?a.cloneMe(f):f?document.importNode(a,!1):a.cloneNode(!1);h.setEid&&h.setEid(a.getEid());if(e)for(var k=0;k<a.childNodes.length;k++){var l=this.cloneNode(a.childNodes[k],e,f),q;if(q="word"===c.app)q=h instanceof QowtDrawing&&(l instanceof QowtTextBox||l instanceof QowtWordImage)?!0:!1;q?Polymer.dom(h).appendChild(l):
h.appendChild(l)}"word"===c.app&&Polymer.dom(h).flush();return h}};return f});
define("utils/gdrive/apiaryLoader",["qowtRoot/third_party/when/when","qowtRoot/utils/domUtils","qowtRoot/utils/driveErrors"],function(c,h,l){function f(){h.removeNode(a);var c=document.createElement("script");c.id=a;c.src=e+"?onload="+p;document.getElementsByTagName("head")[0].appendChild(c)}var a="__apiary_script",e="https://apis.google.com/js/client.js",p="__apiaryLoaded";return{load:function(){return navigator.onLine?c.promise(function(a){window[p]=function(){window[p]=void 0;a()};f()}):c.reject({status:l.OFFLINE})}}});
define("utils/gdrive/driveUtils",[],function(){return{getErrorCode:function(c){return c&&c.result&&c.result.error&&c.result.error.code||c&&c.status},getErrorReason:function(c){return c&&c.result&&c.result.error&&c.result.error.errors&&c.result.error.errors[0]&&c.result.error.errors[0].reason},getErrorMessage:function(c){return c&&c.result&&c.result.error&&c.result.error.message||c&&c.statusText},isValidDriveId:function(c){return c&&/^[a-zA-Z0-9_-]+$/.test(c)}}});
define("utils/gdrive/drive","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtSilentError qowtRoot/errors/unique/scriptLoadingTimeout qowtRoot/utils/driveErrors utils/gdrive/firstPartyAuth utils/gdrive/apiaryLoader utils/gdrive/driveUtils qowtRoot/third_party/when/when".split(" "),function(c,h,l,f,a,e,p,r){function k(){return ka?r.resolve():r.all([e.load(),a.setCookies()]).timeout(3E4,new l("apiary script loading timeout")).then(w).then(function(){ka=!0})}function w(){gapi.client.setApiKey("AIzaSyD-qQA49y2Lv7b0KJCQghmHKe0iMHFnIts");
gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);D&&gapi.config.update("googleapis.config/fogId",D)}function q(a,c){var e;ca?e=r.resolve(ca):(e={path:"/drive/v2/files/"+a,method:"GET",params:{updateViewedDate:!0,supportsTeamDrives:!0}},c&&(e.headers={"X-Goog-Drive-Resource-Keys":a+"/"+c}),e=A(e,"Drive.getMetaData_").then(function(a){return ca=a&&a.result}).catch(N));return e}function v(a,c){var e={path:"/drive/v2/files/"+a+"?alt=media",method:"GET",params:{supportsTeamDrives:!0}};
c&&(e.headers={"X-Goog-Drive-Resource-Keys":a+"/"+c});return A(e,"Drive.download_").then(H).catch(N)}function O(a,c,e){a={path:"/drive/v2/files/"+a+"/copy",method:"POST",params:{convert:c,supportsTeamDrives:!0}};e.title&&(a.body={title:e.title});return A(a,"Drive.createFileFromDriveFile_")}function P(a,e,f){f&&f.mimeType||c.handleError(new h("Drive upload called with no mime type."));var k=r.defer(),l=new FileReader;l.readAsBinaryString(a);l.onload=function(){var a=f.mimeType,c=btoa(l.result),a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+
JSON.stringify(f)+"\r\n---------314159265358979323846\r\nContent-Type: "+a+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+c+"\r\n---------314159265358979323846--";e.headers=e.headers?e.headers:{};e.headers["Content-Type"]='multipart/mixed; boundary="-------314159265358979323846"';e.body=a;A(e,"Drive.upload_").then(k.resolve,k.reject)};return k.promise}function A(c,e){var f=r.defer();gapi.client.request(c).then(f.resolve,function(c,h){C(h)?r.all([a.setCookies()]).done(function(){gapi.client.request(c).then(f.resolve,
function(h){C(h)?r.all([a.setCookiesOlderWay()]).done(function(){gapi.client.request(c).then(f.resolve,t.bind(null,f,e))},function(a){f.reject(a)}):t(f,e,h)})},function(a){f.reject(a)}):B(h)?gapi.client.request(c).then(f.resolve,t.bind(null,f,e)):t(f,e,h)}.bind(null,c));return f.promise}function B(a){var c=p.getErrorCode(a);a=p.getErrorReason(a);return c===f.INTERNAL_SERVER_ERROR||c===f.TIMEOUT||c===f.FORBIDDEN&&("rateLimitExceeded"===a||"userRateLimitExceeded"===a)}function C(a){a=p.getErrorCode(a);
return a===f.INVALID_CREDENTIALS||a===f.AUTHENTICATION_TOKEN_NOT_ISSUED}function t(a,e,f){e+=" error:";var k=p.getErrorCode(f),l=p.getErrorMessage(f);console.error([e,k,l].join(" "));c.handleError(new h([e,k].join(" ")));a.reject(f)}function H(a){a=a.body;for(var c=a.length,e=new ArrayBuffer(c),e=new Uint8Array(e),f=0;f<c;f++)e[f]=a.charCodeAt(f);return new Blob([e])}function N(a){throw a;}var ka=!1,ca,D;return{getMetaData:function(a,c){return k().then(q.bind(null,a,c))},download:function(a,c){return k().then(v.bind(null,
a,c))},upload:function(a,c,e,f){e={path:"/upload/drive/v2/files/"+a,method:"PUT",params:{newRevision:e?"true":"false",uploadType:"multipart",alt:"json",supportsTeamDrives:!0}};f&&(e.headers={"X-Goog-Drive-Resource-Keys":a+"/"+f});return k().then(q.bind(null,a)).then(P.bind(null,c,e))},createFileFromDriveFile:function(a,c,e){return k().then(O.bind(null,a,c,e))},createFileFromNonDriveFile:function(a,c,e){c={path:"/upload/drive/v2/files/",method:"POST",params:{uploadType:"multipart",convert:c,supportsTeamDrives:!0}};
"application/msword-template"===e.mimeType&&(e.mimeType="application/msword");return k().then(P.bind(null,a,c,e))},clearCachedMetaData:function(){ca=void 0},setUserId:function(a){D=a}}});
define("ui/progressSpinner",["qowtRoot/features/utils"],function(c){function h(){w&&(w=!1,p.style.opacity="0")}function l(a,c){v[a].progress=1<c?1:0>c||void 0===c?0:c;var e=0,h=0,k=0,l;for(l in v)if(v.hasOwnProperty(l)&&void 0!==v[l].weight&&void 0!==v[l].progress){var p=v[l];"*"===p.weight?k=p.progress:(h+=p.weight,e+=p.progress*p.weight)}0<k&&(e+=k*(1-h));f(e)}function f(a){a=1<a?1:0>a||void 0===a?0:a;var c=parseInt(8*a,10);k&&k.getElementById("circular-progress").setAttribute("class",("editor"===
r?"dark":"light")+" p"+c);1===a&&setTimeout(h,100)}function a(){r=c.isEnabled("edit")?"editor":"viewer";p=document.createElement("div");p.style.display="none";p.classList.add(r);p.classList.add("progress-spinner-container");p.classList.add("fader");p.addEventListener("webkitTransitionEnd",function(){w||(f(0),p.style.display="none")},!1);e=document.createElement("embed");e.classList.add(r);e.classList.add("progress-spinner");e.src="../img/progressSpinner.svg";e.onload=function(){k=e.getSVGDocument()};
p.appendChild(e);var a=document.createElement("div");a.classList.add(r);a.classList.add("progress-spinner-label");a.textContent=chrome.i18n.getMessage("file_loading_spinner_label");p.appendChild(a);document.body.appendChild(p);O=!0}var e,p,r,k,w=!1,q=0,v={},O=!1;return{show:function(c){O||a();w||(w=!0,p.style.display="block",p.style.opacity="1");c&&f(c)},hide:function(){h()},setProgress:function(a){f(a)},addContributor:function(a){q++;var c="contrib"+q;v[c]={weight:a,progress:0};return l.bind(this,
c)},resetContributors:function(){v={};q=0}}});
define("qowtRoot/utils/pathUtils",["qowtRoot/utils/typeUtils"],function(c){return{create:function(h){return function(){var l={extension:function(){return a},dirName:function(){return p},baseName:function(){return e},fileName:function(){return f},smartBaseName:function(){var a=l.baseName();if(a)var c=/(-[0-9]+)$/g,e=a.match(c),a=e?a.replace(c,--e):a+"-1";return a}},f,a,e,p;(function(){if(h&&c.isString(h)){var l=h.lastIndexOf("/");p=-1!==l?h.substr(0,l+1):void 0;f=-1!==l?h.substr(l+1):h;l=f.lastIndexOf(".");
e=-1!==l?f.substr(0,l):f;var k=f.length;a=-1!==l?f.substr(l+1,k):void 0}})();return l}()}}});define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var c=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var l=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"===h?l:l&7|8).toString(16)})}}});
define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(c){return{setItem:function(h,l){try{window.localStorage.setItem(h,l)}catch(f){throw new c({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:f.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("controllers/fileManager","qowtRoot/third_party/when/when utils/converter utils/xhr utils/fileWriter utils/metrics utils/gdrive/drive utils/gdrive/driveUtils ui/progressSpinner controllers/appState qowtRoot/utils/i18n qowtRoot/utils/tryUtils qowtRoot/utils/pathUtils qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/errors/unique/scriptLoadingTimeout qowtRoot/utils/typeUtils qowtRoot/utils/driveErrors qowtRoot/utils/uuid qowtRoot/utils/localStorageManager utils/analytics/googleAnalytics third_party/lo-dash/lo-dash.min".split(" "),function(c,
h,l,f,a,e,p,r,k,w,q,v,O,P,A,B,C,t,H,N,ka,ca){var D,la={},da={},ha=0,R,S=function(){};S.prototype={__proto__:Object.prototype,sendMessageToWorker:function(a){var c=++ha;a.msgId=c;return new Promise(function(e,f){la[c]=e;da[c]=f;D.postMessage(a)})},handleMessageFromWorker:function(a){a=a.data;if(6===a.type)_handleWASMMessage(a.message);else if(5===a.type)copyToPrivateFile();else if(3===a.type)la[a.msgId](a.fileContent);else if(a.error)da[a.msgId](a.error);else la[a.msgId]();delete la[a.msgId];delete da[a.msgId]},
init:function(a,e){this.config_=a;this.uuid_=e;this.isReady=!1;D=new Worker(chrome.runtime.getURL("scripts/controllers/wasmModuleUtilityWorker.js"));D.onerror=function(a){console.log(a)};D.onmessage=this.handleMessageFromWorker;return c.resolve().then(this.tryToRestoreOrDeleteFromCache_.bind(this)).catch(this.openOriginalFile_.bind(this)).then(this.whenDone_.bind(this))},getUUID:function(){return this.getCache().uuid},copyToPrivateFile:function(){var a=new f(this.config_.privateFile);this.sendMessageToWorker({type:3,
fileName:this.privateFilePath()}).then(function(c){a.writeData(new Blob([c]))})},updateConfigAndCache:function(a){a&&(this.config_.preferredFilename=this.config_.userFile.name,this.config_.userFile=void 0);this.config_.isDownloaded=!0;this.config_.isRenamed=a;this.cacheInfo_()},getCache:function(){var a=window.sessionStorage.getItem("__fileManagerCache");return q.ignore(JSON.parse.bind(JSON,a))||{}},getEntryPoint:function(){return R},originalURL:function(){return _.get(this,"config_.originalURL")},
privateFilePath:function(){return this.returnFilePath_(_.get(this,"config_.privateFile",{}))},downloadFilePath:function(){return this.returnFilePath_(_.get(this,"config_.downloadFile",{}))},userFilePath:function(){return this.returnFilePath_(_.get(this,"config_.userFile",{}))},getWorker:function(){return D},mimeTypeFromFileName:function(a){return h.extension2Mime(h.name2ext(a))},mimeType:function(){var a=this.config_.mimeType;h.mime2App(a)||(a=this.userFilePath()||this.privateFilePath()||this.originalURL(),
a=v.create(a).extension()||this.config_.extension,a=h.extension2Mime(a));return a},displayName:function(){var a=_.get(this,"config_.preferredFilename",{});if(0<a.length)return a;var c;if(a=this.userFilePath()||this.originalURL()){a=v.create(a).fileName();try{c=window.decodeURIComponent(a)}catch(e){try{c=window.unescape(a)}catch(f){c=a}}}else c=this.config_.title;return c},driveDocId:function(){return _.get(this,"config_.driveDocId")},driveFileRole:function(){return _.get(this,"config_.driveFileRole")},
isNewDocument:function(){return _.get(this,"config_.newDocument")},isEmbedded:function(){return _.get(this,"config_.embedded")},createPrivateFile:function(a){this.config_.mimeType=h.extension2Mime(a);return this.createPrivateFile_(a).then(this.cacheInfo_.bind(this))},overwriteUserFile:function(a){if(this.config_.privateFile)if(this.config_.driveDocId||this.config_.userFile)if(this.config_.driveDocId)a=this.uploadDriveFile_(a);else{a=this.sendMessageToWorker({type:3,fileName:this.privateFilePath()}).then(function(a){return new File([a],
"temp")});var e=this;a=c.resolve(a).then(function(a){return e.copyFile_(a,e.config_.userFile)})}else a=c.reject(Error("Cannot overwrite user file: No user or drive file"));else a=c.reject(Error("Cannot overwrite user file: private is file missing"));return a},newUserFile:function(a,f){function h(a){return e.createFileFromNonDriveFile(a,!1,l).catch(function(){return this.saveAsLocal_()}.bind(this))}var k,l;this.config_.privateFile?!this.config_.driveDocId||f?k=this.saveAsLocal_(a):a?(l={title:this.nameForCopiedFile_()},
k=e.createFileFromDriveFile(this.config_.driveDocId,!1,l)):(l={title:this.nameForSaveAsFile_(),mimeType:this.mimeType(),parents:[_.get(this,"config_.parents[0]")]},k=this.sendMessageToWorker({type:3,fileName:this.privateFilePath()}).then(function(a){return new Blob([a])}),k=c.resolve(k).then(h.bind(this))):k=c.reject(Error("Cannot create new user file: Private file missing"));return k},downloadToLocalFile:function(){this.getFileFromEntry_(this.config_.downloadFile).then(function(a){a=new File([a],
a.name,{type:this.mimeTypeFromFileName(a.name)});a=window.URL.createObjectURL(a);var c=this.tryAndGetDownloadFileName();chrome.downloads.download({url:a,filename:c,conflictAction:"uniquify",saveAs:!1})}.bind(this))},tryAndGetDownloadFileName:function(){var a=_.get(this,"config_.downloadFileName","downloadedFile"),c="."+(this.config_.extension?this.config_.extension:h.mime2Extension(this.mimeType()));try{a=a.replace(/[<>:"/\\|?*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()}),
/(\.do[ct][xm]?|\.p[po]t[xm]?|\.xl[st][xm]?|\.csv)$/i.exec(a)||(a+=c)}catch(e){a="downloadedFile"+c}return a},convertToDocs:function(){var a={title:this.nameForConvertedFile_(),mimeType:this.mimeType()};return this.config_.driveDocId?e.createFileFromDriveFile(this.config_.driveDocId,!0,a):this.getFileFromEntry_(this.config_.privateFile).then(function(c){return e.createFileFromNonDriveFile(c,!0,a)})},cacheFileDetails:function(a){window.sessionStorage.setItem("__fileManagerCache",JSON.stringify(a))},
returnFilePath_:function(a){return a.fullPath||a.name},getFileType_:function(){var a;this.config_.driveDocId?a="driveDoc":this.config_.streamURL?a="stream":this.config_.userFile?a="userFile":this.config_.newDocument&&(a="newdocument");return a},getDriveDoc_:function(){return e.getMetaData(this.config_.driveDocId,this.config_.driveDocResourceKey).then(function(a){void 0===a.mimeType||void 0===a.title||void 0===a.id?a=void 0===h.mime2App(a.mimeType)?c.reject(Error("Drive mimeType not an MS Office mimeType")):
c.reject(Error("Drive document missing crucial information")):(this.config_.mimeType=a.mimeType,this.config_.extension=a.fileExtension,this.config_.title=a.title,this.config_.driveDocId=a.id,this.config_.parents=a.parents,this.config_.driveFileRole=_.get(a,"userPermission.role"),a=this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,"DownloadingDriveDoc")));return a}.bind(this)).yield(!0)},getStream_:function(){return this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,
"DownloadingStream")).yield(!0)},getUserFile_:function(){return this.createPrivateFile_().then(function(){this.updateAppStateAndCache_("LocalFile");return this.getFileFromEntry_(this.config_.userFile).then(function(a){return this.getArrayBuffer_(a)}.bind(this)).then(function(a){return this.sendMessageToWorker({type:2,fileName:this.privateFilePath(),fileContent:new Uint8Array(a)})}.bind(this)).then(function(){return this.copyFile_(this.config_.userFile,this.config_.privateFile)}.bind(this))}.bind(this))},
getArrayBuffer_:function(a){return a.arrayBuffer()},getNewDocument_:function(a){"word"===a?(this.config_.mimeType="application/vnd.openxmlformats-officedocument.wordprocessingml.document",this.config_.title="Untitled document.docx"):"point"===a?(this.config_.mimeType="application/vnd.openxmlformats-officedocument.presentationml.presentation",this.config_.title="Untitled presentation.pptx"):"sheet"===a&&(this.config_.mimeType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",this.config_.title=
"Untitled spreadsheet.xlsx");return this.createPrivateFile_().then(this.updateInfoAndLoadNewDocument_.bind(this,"LoadingNewDocument",a)).yield(!0)},updateInfoAndLoadNewDocument_:function(a,c){this.updateAppStateAndCache_(a);return this.loadNewDocument_(c)},getTemplateUrl_:function(a){if("word"===a)return"templates/blank.docx";if("point"===a)return"templates/blank.pptx";if("sheet"===a)return"templates/blank.xlsx"},loadNewDocument_:function(a){r.show();var c=r.addContributor(.9);a=this.getTemplateUrl_(a);
return(new l({baseUrl:chrome.runtime.getURL(a)})).send().then(function(a){(new f(this.config_.privateFile)).writeData(a);return a.arrayBuffer()}.bind(this)).then(function(a){return this.sendMessageToWorker({type:2,fileName:this.privateFilePath(),fileContent:new Uint8Array(a)})}.bind(this),void 0,c).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();c(1);r.hide()}.bind(this))},updateInfoAndDownload_:function(a){this.updateAppStateAndCache_(a);return this.download_()},updateAppStateAndCache_:function(a){this.initAppState_(a);
this.cacheInfo_()},restoreConfigFromCache_:function(a){this.config_.isDownloaded=a.isDownloaded;this.config_.isRenamed=a.isRenamed;this.config_.mimeType=a.mimeType||this.config_.mimeType;this.config_.extension=a.extension||this.config_.extension;this.config_.driveDocId=a.driveDocId||this.config_.driveDocId;this.config_.driveFileRole=a.driveFileRole||this.config_.driveFileRole;this.config_.newDocument=a.newDocument||this.config_.newDocument;this.config_.title=a.title||this.config_.title;this.config_.parents=
a.parents||this.config_.parents;this.config_.originalURL=a.originalURL||this.config_.originalURL},deleteFromCache_:function(a){return this.deletePrivateFile_(a).then(this.cacheFileDetails.bind(this,{}))},tryDeletingPrivateFile_:function(a){function e(){return c.reject(Error("IncompleteDownload"))}function f(){return c.reject(Error("CacheDeleteFailed"))}return a.privateFilePath?this.deleteFromCache_(a.privateFilePath).then(e,f):c.reject(Error("NoPrivateFile"))},tryToRestoreOrDeleteFromCache_:function(){var a;
(a=this.getCache())&&a.uuid===this.uuid_?a.isDownloaded?(R="restore",this.restoreConfigFromCache_(a),a=this.tryToRestoreFiles_(a)):a=this.tryDeletingPrivateFile_(a):a=c.reject(Error("NoCache"));return a},saveFileEntryAndUpdateCache_:function(a){this.config_.userFile=a;this.cacheInfo_()},tryToRestoreFiles_:function(a){function e(){this.config_.downloadFileName=a.downloadFileName;this.updateAppStateAndCache_("BrowserRefresh");return a.userFileId?this.restoreFileById_(a.userFileId).then(this.saveFileEntryAndUpdateCache_.bind(this)).yield(!0):
!0}var f;a.privateFilePath?(f=h.mime2App(this.mimeType()),f=this.sendMessageToWorker({type:1,app:f,url:chrome.runtime.getURL("wasm/"+f+".js")}).then(this.restorePrivateFile_.bind(this,a.privateFilePath)).then(this.restoreDownloadFile_.bind(this,a.downloadFilePath)).then(this.restoreMEMFSFile_.bind(this)).then(e.bind(this))):f=c.reject(Error("There is no cached private file path"));return f},restoreMEMFSFile_:function(){return this.getFileFromEntry_(this.config_.privateFile).then(function(a){return a.arrayBuffer()}).then(function(a){return this.sendMessageToWorker({type:2,
fileName:this.privateFilePath(),fileContent:new Uint8Array(a)})}.bind(this))},nameForCopiedFile_:function(){return"Copy of "+this.displayName()},nameForSaveAsFile_:function(){return"Copy of "+v.create(this.displayName()).baseName()+"."+h.mime2Extension(this.mimeType())},nameForConvertedFile_:function(){return v.create(this.displayName()).baseName()},saveAsLocal_:function(a){var e=v.create(this.displayName()),f=this.config_.userFile&&!this.config_.isRenamed?e.smartBaseName():e.baseName(),k=h.mime2App(this.mimeType());
a=a?[e.extension()]:Ab[k];f+="."+(-1===a.indexOf(e.extension())?a[0]:e.extension());return this.selectFile_(f,a).then(function(a){this.config_.mimeType=void 0;this.config_.extension=void 0;this.config_.driveDocId=void 0;this.config_.driveFileRole=void 0;this.config_.preferredFilename=void 0;this.config_.newDocument=void 0;this.saveFileEntryAndUpdateCache_(a);return this.copyFile_(this.config_.privateFile,this.config_.userFile)}.bind(this),function(){return c.reject({userCancelled:!0})})},initAppState_:function(c){var e=
this.mimeType();if(e&&0!==e.length){var f=h.mime2App(e),l=window.navigator.onLine?"online":"offline",p="non-local-user-"+l;if(/^file:\/\/\//.test(this.originalURL())||this.userFilePath())p="local-user-"+l;this.sendCachableGAEvent_({category:"file-source",action:p,label:f});e=h.mime2Extension(e);a.recordFileType(e);k.setApp(f,e);k.updateState(c)}else throw Error("Unknown mimeType; unable to know which app to load");},sendCachableGAEvent_:function(a){if(window.navigator.onLine)ca.sendEvent(a);else{var c=
this.getGAPendingStore_();c.push(a);ka.setItem("pending_ga",JSON.stringify(c))}},getGAPendingStore_:function(){var a;try{a=ka.getItem("pending_ga"),a=JSON.parse(a),Array.isArray(a)||(a=[])}catch(c){a=[],console.warn("Failed to initialize file store so resetting it to be empty: "+c)}return a},whenDone_:function(){this.isReady=!0;return c.resolve(!0)},handleDriveError_:function(a){switch(p.getErrorCode(a)){case H.FILE_NOT_FOUND:this.throwFileNotFoundException_();break;case H.INTERNAL_SERVER_ERROR:case H.OFFLINE:this.throwTemporaryUnableToOpenException_(a);
break;default:this.handleGenericFileError_(a)}},throwTemporaryUnableToOpenException_:function(a){throw new O({title:"temporary_unable_to_open_error_short_msg",details:"temporary_unable_to_open_error_msg",message:t.isString(a)&&a||a.message||p.getErrorCode(a)});},handleGenericFileError_:function(a){if("SecurityError"===a.name)this.throwSecurityException_();else if(a instanceof B)this.throwTimeoutException_(a);else{if(a instanceof A)throw a;if(a instanceof P)throw a;if(a instanceof C)throw a;this.throwFileOpenCrashException_(a)}},
throwEntryPointException_:function(){throw new O({title:"entry_point_error_short_msg",details:"entry_point_error_msg"});},throwSecurityException_:function(){throw new O({title:"file_opened_in_incognito_mode_error_title",details:"file_opened_in_incognito_mode_error_details"});},throwTimeoutException_:function(a){a.title=w.getMessage("download_file_timeout_error_short_msg");a.details=w.getMessage("download_file_timeout_error_msg");throw a;},throwFileNotFoundException_:function(){throw new O({title:"file_not_found_error_short_msg",
details:"file_not_found_error_msg"});},throwFileOpenCrashException_:function(a){var c=new O({title:"file_open_crash_error_short_msg",details:"file_open_crash_error_msg",message:t.isString(a)&&a||a.message||p.getErrorCode(a)});c.stack=a.stack;throw c;},cacheInfo_:function(){var a={originalURL:this.config_.originalURL,isDownloaded:this.config_.isDownloaded,streamURL:this.config_.streamURL,mimeType:this.config_.mimeType,extension:this.config_.extension,privateFilePath:this.privateFilePath(),downloadFilePath:this.downloadFilePath(),
downloadFileName:this.config_.downloadFileName,userFileId:this.config_.userFile&&window.RequestFileSystem&&chrome.fileSystem.retainEntry(this.config_.userFile),driveDocId:this.config_.driveDocId,newdocument:this.config_.newdocument,driveFileRole:this.config_.driveFileRole,title:this.config_.title,parents:this.config_.parents,isRenamed:this.config_.isRenamed,uuid:this.uuid_};this.cacheFileDetails(a)},restoreFileById_:function(a){return c.promise(function(c,e){window.RequestFileSystem?chrome.fileSystem.restoreEntry(a,
c):e(Error("NoAccessToFileSystem"))})},restorePrivateFile_:function(a){return this.getTempFs_().then(function(c){return a?this.openFileAndSaveEntry_(c,a,"privateFile"):this.createPrivateFile_()}.bind(this))},createDownloadableFile_:function(){return this.getTempFs_().then(function(a){return this.createDownloadableFileFromPrivateFile_(a)}.bind(this)).then(function(a){this.config_.downloadFile=a;this.config_.downloadFileName=this.displayName()}.bind(this))},restoreDownloadFile_:function(a){return this.getTempFs_().then(function(c){return a?
this.openFileAndSaveEntry_(c,a,"downloadFile"):this.createDownloadableFile_()}.bind(this))},download_:function(){r.show();var a=r.addContributor(.9);return(this.config_.driveDocId?e.download(this.config_.driveDocId,this.config_.driveDocResourceKey):void 0===this.config_.streamURL?c.reject(Error("FileManager needs URL to download")):(new l({baseUrl:this.config_.streamURL})).send()).then(function(a){return(new f(this.config_.privateFile)).writeData(a).then(function(){return a.arrayBuffer()})}.bind(this)).then(function(a){return this.sendMessageToWorker({type:2,
fileName:this.privateFilePath(),fileContent:new Uint8Array(a)})}.bind(this),void 0,a).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();a(1);r.hide()}.bind(this))},selectFile_:function(a,e){return c.promise(function(c,f){window.chrome.fileSystem.chooseEntry({type:"saveFile",suggestedName:a,accepts:[{extensions:e}]},function(a){window.chrome.runtime.lastError&&"User cancelled"===window.chrome.runtime.lastError.message?f(Error(window.chrome.runtime.lastError.message)):window.chrome.fileSystem.getDisplayPath(a,
function(e){a.localFilePath=e;c(a)})}.bind(this))}.bind(this))},getTempFs_:function(){return c.promise(function(a,c){window.webkitRequestFileSystem(window.TEMPORARY,1048576,a,c)})},getFileFromFs_:function(a,e,f){return c.promise(function(c,h){a.root.getFile(e,f,c,h)})},createFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!0,exclusive:!1})},openFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!1})},createDownloadableFileFromPrivateFile_:function(a){return c.promise(function(c,
e){var f=this.config_.privateFile,h=f.name.split("."),h=[h[0],h[1]].join("_downloadable.");f.copyTo(a.root,h,c,e)}.bind(this))},deletePrivateFile_:function(a){return this.getTempFs_().then(function(e){return c.promise(function(c,f){e.root.getFile(a,{create:!1},function(a){a.remove(c,f)})})})},createPrivateFile_:function(a){var c=a||h.mime2Extension(this.mimeType()),e=[N.generateUUID(),c].join(".");return this.getTempFs_().then(function(a,c,e){return this.createFile_(e,c)}.bind(this,a,e)).then(function(a,
e){this.config_.privateFile=e;if(a)return Promise.resolve();var f=h.extension2App(c);return this.sendMessageToWorker({type:1,app:f,url:chrome.runtime.getURL("wasm/"+f+".js")})}.bind(this,a)).then(function(a,c){a&&this.sendMessageToWorker({type:2,fileName:this.privateFilePath(),fileContent:new Uint8Array(0)});return this.config_.privateFile}.bind(this,a,e))},openFileAndSaveEntry_:function(a,c,e){return this.openFile_(a,c).then(function(a){return this.config_[e]=a}.bind(this))},copyFile_:function(a,
e){function h(a,e){var k=new f(a);return"File"===e.constructor.name?k.writeData(e):c.reject("Cannot copy file: Source is not a File")}return void 0===e?c.reject(Error("Cannot copy file: Missing destination file")):e.isFile?void 0===a?c.reject(Error("Cannot copy file: Missing source file")):a.file?this.getFileFromEntry_(a).then(h.bind(null,e)):h(e,a):c.reject("Cannot copy file: Destination is not a FileEntry/ a File")},uploadDriveFile_:function(a){var c=this.config_.driveDocId,f=this.config_.driveDocResourceKey;
return this.sendMessageToWorker({type:3,fileName:this.privateFilePath()}).then(function(h){h=new Blob([h]);return e.upload(c,h,a,f)})},getFileFromEntry_:function(a){return c.promise(function(c,e){a.file?a.file(c):e(Error("Entry missing file function"))})},getPrivateFileFromEntry:function(){return this.getFileFromEntry_(this.config_.privateFile)},openOriginalFile_:function(a){var c;switch(this.getFileType_()){case "driveDoc":p.isValidDriveId(this.config_.driveDocId_)?c=this.getDriveDoc_().catch(this.handleDriveError_.bind(this)):
this.throwFileNotFoundException_();break;case "stream":c=this.getStream_().catch(this.handleGenericFileError_.bind(this));break;case "userFile":c=this.getUserFile_().catch(this.handleGenericFileError_.bind(this));break;case "newdocument":c=this.getNewDocument_(this.config_.newDocument).catch(this.handleGenericFileError_.bind(this));break;default:this.throwEntryPointException_(a)}return c.then(this.createDownloadableFile_.bind(this)).then(this.cacheInfo_.bind(this))}};var Ab={word:["docx"],sheet:["xlsx"],
point:["pptx"]};return new S});
define("qowtRoot/utils/errorUtils",[],function(){return{stripStack:function(c){var h="";if(c=c.stack?c.stack.split("\n"):void 0)for(var h=h+(c[0]+";"),l=1;l<c.length;l++){var f=c[l].match(/\s*at\s*(\S*)\s*(\S*):(\d+):(\d+)\)/);if(f){f.shift();var a=f[1].lastIndexOf("/");f[1]=-1!==a?f[1].substr(a+1):f[1];h+=f.join(":")+";"}}return h},errorInfo:function(c){var h;c&&(h=c.e,c.e_info&&c.e_info.category&&(h+="; Category: "+c.e_info.category));return h},errorCode:function(c){return c&&c.split(";",1)[0]},
category:function(c){a:{c=c.split(";");for(var h=1;h<c.length;h++){var l=c[h].split(":");if("Category"===l[0].trim()){c=l[1].trim();break a}}c=""}return c}}});
define("errorObservers/gaExceptionLogger",["qowtRoot/pubsub/pubsub","qowtRoot/utils/errorUtils","utils/analytics/googleAnalytics"],function(c,h,l){var f="idle";c.subscribe("qowt:init",function(){f="idle"});return function(a){if("idle"===f){var c={msg:h.stripStack(a)||a.message||a.name||"unknown error",fatal:a.fatal};console.log("GA logging as:",c);l.sendException(c);f=a.fatal?"fatal exception logged":f}}});define("errorObservers/hideUI",["ui/progressSpinner"],function(c){return function(){c.hide()}});
define("errorObservers/showQOWT",[],function(){return function(c){c.silent||(document.getElementById("sandbox").style.display="block")}});
define("utils/analytics/performanceMetrics",["utils/analytics/googleAnalytics"],function(c){function h(a){var e=0,f=function(){e<a.length&&(c.sendEvent(a[e]),e++,f())};f()}function l(){var a=[],c=f.state.FF;f.actions.forEach(function(h){var l=f.logs.find(function(a){return a.action===h});l&&a.push({id:"recordEvent",category:"performance-metrics",action:l.action,label:c,value:l.value})});return a}var f={logs:[],state:{DCPSize:0,FF:""},lastLog:{CR:null,CC:null},actions:["CR","CC"]};return{log:function(a){f.logs.push(a);
f.lastLog.hasOwnProperty(a.action)&&(f.lastLog[a.action]=a);Object.keys(a.label).forEach(function(c){f.state[c]+=a.label[c]});if("CC"===a.action){var c=l();h(c)}}}});define("utils/sendUserFeedback",["qowtRoot/errors/errorCatcher","qowtRoot/utils/errorUtils"],function(c,h){var l=[];c.addObserver(function(c){var a=c.fatal?"FATAL: ":"NonFatal: ",a=a+(h.stripStack(c)||c.message||c.name||"unknown error");l.push(a)});return{openFeedbackUI:function(){chrome.feedbackPrivate&&chrome.feedbackPrivate.openFeedback(chrome.feedbackPrivate.FeedbackSource.QUICKOFFICE)}}});
define("utils/backgroundPageUtils",["qowtRoot/utils/promiseUtils","qowtRoot/third_party/when/when"],function(c){function h(){var a=new Promise(function(a,c){chrome&&chrome.runtime&&chrome.runtime.getBackgroundPage?chrome.runtime.getBackgroundPage(a):c(Error("chrome.runtime.getBackgroundPage not available"))});return Promise.race([a,c.delayThenReject(f,Error("chrome.runtime.getBackgroundPage timed out"))])}function l(e){var f=new Promise(function(a){var c=function(e){e.isReady?a(e):window.setTimeout(c.bind(null,
e),10)};c(e)});return Promise.race([f,c.delayThenReject(a,Error("Background page timed out getting ready"))])}var f=1E4,a=1E4;return{getPage:function(){return h().then(l)}}});
define("utils/urlUtils",["qowtRoot/utils/typeUtils"],function(c){return{parseURL:function(h){if(!c.isString(h))throw Error("Invalid URI");var l=h.split("?");h=l[0];var l=1<l.length?l[1]:"",f=this.parseQueryString(l);return{baseURL:h,queryString:l,queryObject:f}},parseQueryString:function(h){if(!c.isString(h))throw Error("Invalid QueryString");var l;if(h){l={};h=h.split(/[&;]/g);for(var f=0;f<h.length;f++)if(h[f]){var a=h[f].split("="),e=decodeURIComponent(a[0]).toLowerCase(),a=1<a.length?decodeURIComponent(a[1]):
void 0;l[e]=a}}return l},stripQueryString:function(){var c=this.parseURL(window.location.href);window.history.replaceState({},"",c.baseURL)}}});
define("qowtRoot/utils/chromeStorageManager",["qowtRoot/utils/localStorageManager"],function(c){return{setItem:function(c,l){return new Promise(function(f,a){var e={};e[c]=l;chrome.storage.local.set(e,function(){chrome.runtime.lastError?a(chrome.runtime.lastError):f()})})},getItem:function(h){return new Promise(function(l,f){chrome.storage.local.get(h,function(a){if(chrome.runtime.lastError)f(chrome.runtime.lastError);else if("undefined"===typeof a[h]){a=c.getItem(h);if("undefined"!==typeof a){var e=
{};e[h]=a;chrome.storage.local.set(e,function(){})}l(a)}else l(a[h])})})},isOfficeEditingModeSet:function(){return new Promise(function(c,l){this.getItem("always_use_office_editing_mode").then(function(f){c(f?!0:!1)}).catch(function(f){console.warn(f);c(!1)})}.bind(this))},setOfficeEditingModeSetting:function(c){this.setItem("always_use_office_editing_mode",c)}}});
!function(c,h){function l(l,q,t){var w=[];q=1==q?{entropy:!0}:q||{};l=p(e(q.entropy?[l,k(c)]:null==l?r():l,3),w);var D=new f(w),w=function(){for(var a=D.g(O),c=A,e=0;a<B;)a=(a+e)*v,c*=v,e=D.g(1);for(;a>=C;)a/=2,c/=2,e>>>=1;return(a+e)/c};return w.int32=function(){return 0|D.g(4)},w.quick=function(){return D.g(4)/4294967296},w.double=w,p(k(D.S),c),(q.pass||t||function(c,e,f,k){return k&&(k.S&&a(k,D),c.state=function(){return a(D,{})}),f?(h[P]=c,e):c})(w,l,"global"in q?q.global:this==h,q.state)}function f(a){var c,
e=a.length,f=this,h=0,k=f.i=f.j=0,l=f.S=[];for(e||(a=[e++]);h<v;)l[h]=h++;for(h=0;h<v;h++)l[h]=l[k=t&k+a[h%e]+(c=l[h])],l[k]=c;(f.g=function(a){for(var c,e=0,h=f.i,k=f.j,l=f.S;a--;)c=l[h=t&h+1],e=e*v+l[t&(l[h]=l[k=t&k+c])+(l[k]=c)];return f.i=h,f.j=k,e})(v)}function a(a,c){return c.i=a.i,c.j=a.j,c.S=a.S.slice(),c}function e(a,c){var f,h=[],k=typeof a;if(c&&"object"==k)for(f in a)try{h.push(e(a[f],c-1))}catch(l){}return h.length?h:"string"==k?a:a+"\x00"}function p(a,c){for(var e,f=a+"",h=0;h<f.length;)c[t&
h]=t&(e^=19*c[t&h])+f.charCodeAt(h++);return k(c)}function r(){try{var a;return w&&(a=w.randomBytes)?a=a(v):(a=new Uint8Array(v),(q.crypto||q.msCrypto).getRandomValues(a)),k(a)}catch(e){return a=q.navigator,[+new Date,q,a&&a.plugins,q.screen,k(c)]}}function k(a){return String.fromCharCode.apply(0,a)}var w,q=this,v=256,O=6,P="random",A=h.pow(v,O),B=h.pow(2,52),C=2*B,t=v-1;if(h["seed"+P]=l,p(h.random(),c),"object"==typeof module&&module.exports){module.exports=l;try{w=require("crypto")}catch(H){}}else"function"==
typeof define&&define.amd&&define("third_party/seedrandom/seedrandom.min",[],function(){return l})}([],Math);define("utils/timeUtils",[],function(){return{DAY_IN_MS:864E5,WEEK_IN_MS:6048E5,weekSinceEpoch:function(){var c=Date.now()/this.WEEK_IN_MS;return Math.ceil(c)}}});
define("common/elements/google-consumer-survey/google-consumer-survey",["qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid","third_party/seedrandom/seedrandom.min","utils/timeUtils"],function(c,h,l,f){var a=90*f.DAY_IN_MS;window.GoogleConsumerSurvey=Polymer({is:"google-consumer-survey",properties:{siteId:{reflect:!1,value:""},targetPercentage:{reflect:!1,value:void 0},bucketing:{reflect:!1,value:void 0}},created:function(){this.UUID=c.getItem("__GCS_uuid")||h.generateUUID();c.setItem("__GCS_uuid",
this.UUID);window._402=window._402||{};window._402.promptHandlerUrl="https://www.google.com/insights/consumersurveys/gk/prompt"},attached:function(){this.shouldLaunchSurvey_()&&this.launchSurvey_()},shouldLaunchSurvey_:function(){var c=!1;this.targetPercentage||this.bucketing?this.surveyResultsStale_(f.WEEK_IN_MS)&&(c=this.sampleUser_()):c=this.surveyResultsStale_(a);return c},sampleUser_:function(){var a=!1,c=parseInt(this.UUID.split("-")[1],16),h=this.bucketing?65535/this.bucketing:65535,k=f.weekSinceEpoch(),
w=k%(this.bucketing||1)*h;c>=w&&c<w+h&&(this.fire("user-considered-for-sampling"),l(c*k)()<(void 0===this.targetPercentage?1:this.targetPercentage/100)&&(this.fire("user-sampled-for-survey"),a=!0));return a},surveyResultsStale_:function(a){var f=!0,h=c.getItem("__GCS_site_"+this.siteId);h&&(f=Date.now()-h>a);return f},launchSurvey_:function(){this.siteId&&0!==this.siteId.length&&this.parentNode?(this.scriptTag=document.createElement("script"),this.scriptTag.src="https://www.google.com/insights/consumersurveys/async_survey?force_http=1&site="+
this.siteId,this.appendChild(this.scriptTag),this.userSurveyed=!0,c.setItem("__GCS_site_"+this.siteId,Date.now())):console.warn("<google-consumer-survey>: missing siteId!")}});return{}});
define("monkeyLoader",["qowtRoot/features/utils"],function(c){function h(c,a,e){a([c],function(a){l++;e(a)},function(a){0===l?(console.warn("Failed to load "+c+". The monkey server is likely not running."),e()):(console.error("Monkey _is_ running, but we failed to laod module "+c+"."),console.error(a),console.error(a.stack))})}var l=0;return{load:function(f,a,e){a=a||"";c.isDebug()?(console.log("Loading "+f),h.apply(this,arguments)):e()}}});
define("controllers/application","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/unique/fileDoesNotExistError qowtRoot/utils/typeUtils qowtRoot/utils/tryUtils qowtRoot/utils/promiseUtils qowtRoot/utils/platform qowtRoot/messageBus/messageBus qowtRoot/features/utils controllers/appState controllers/fileManager errorObservers/gaExceptionLogger errorObservers/hideUI errorObservers/showQOWT utils/analytics/performanceMetrics utils/analytics/googleAnalytics utils/converter utils/metrics utils/sendUserFeedback utils/backgroundPageUtils utils/gdrive/driveUtils utils/urlUtils qowtRoot/third_party/when/when utils/gdrive/drive qowtRoot/utils/uuid qowtRoot/pubsub/pubsub qowtRoot/utils/localStorageManager qowtRoot/utils/chromeStorageManager common/elements/google-consumer-survey/google-consumer-survey".split(" "),function(c,
h,l,f,a,e,p,r,k,w,q,v,O,P,A,B,C,t,H,N,ka,ca,D,la,da,ha,R,S){function Ab(){Ra.app=C.mime2App(q.mimeType());var a=C.mime2Extension(q.mimeType()),c=!("docm"!==a&&"pptm"!==a&&"xlsm"!==a);q.getPrivateFileFromEntry().then(function(e){r.pushMessage({id:"openFile",displayName:q.displayName(),originalURL:q.originalURL(),userFileType:ma(),entryPoint:q.getEntryPoint(),driveFileReadOnly:"reader"===q.driveFileRole(),format:C.mime2Format(q.mimeType()),isRenamed:q.getCache().isRenamed,environment:Ra,isMacroEnabledFile:c,
newDocument:q.isNewDocument(),embedded:q.isEmbedded(),isIncognito:Fa,extension:a,fileSize:e.size})})}function u(c){if(!f.isString(c)&&!f.isObject(c))throw Error("Invlid content from Core");if(f.isString(c))c=a.withWarning("JSON Syntax error in content from Core").rethrow(JSON.parse.bind(JSON,c)),"NaClCrash"===c.name&&(Pb=!0);else if(Pb){var e=c;console.error("reporting minidump to local server");var h=new FormData;h.append("prod","Quickoffice");h.append("ver",chrome.runtime.getManifest().version);
h.append("upload_file_minidump",new Blob([e]));e=new XMLHttpRequest;e.open("POST",chrome.runtime.getManifest().crash_dump_server,!0);e.send(h);ha.publish("app:naclCrash")}Pb||r.pushMessage({id:"dcp",content:c})}function La(a){if(a.keyCode&&(a.metaKey||a.ctrlKey))switch(a.keyCode){case 80:a.preventDefault();r.pushMessage({id:"print"});break;case 83:a.preventDefault()}}function Dc(){ua(I);Ma({category:"network-status",action:window.navigator.onLine?"online":"offline"});return D.promise(function(a){chrome.identity.getProfileUserInfo(function(c){c=
""!==c.email;var e=window.navigator.onLine;Ma({category:"account-status",action:c?"signed-in":"signed-out"});Ma({category:"account-network",action:c?e?"signedin-online":"signedin-offline":e?"signedout-online":"signedout-offline"});a()}.bind(this))}.bind(this)).timeout(3E3,"Timed-out waiting for identity info").catch(function(){})}function Ma(a){window.navigator.onLine?B.sendEvent(a):"file-open"===a.category?Na(M,a):Na(I,a)}function Na(a,c){var e=fb(a);e.push(c);R.setItem(a,JSON.stringify(e))}function ua(a){if(window.navigator.onLine){var c=
fb(a);if(0<c.length)for(var e=0;e<c.length;e++)c[e]&&"object"===typeof c[e]&&B.sendEvent({category:c[e].category,action:c[e].action,label:c[e].label});R.setItem(a,JSON.stringify([]))}}function fb(a){var c;try{c=R.getItem(a),c=JSON.parse(c),Array.isArray(c)||(c=[])}catch(e){c=[],console.warn("Failed to initialize file store so resetting it to be empty: "+e)}return c}function cc(){window.navigator.connection.onchange=function(a){window.navigator.onLine&&0<fb(M).length&&"opening"!==qowtState&&ua(M)}}
function Ca(){return new Promise(function(a,c){chrome&&chrome.tabs&&chrome.tabs.get?chrome.tabs.get(ea,function(e){e?(Fa=e.incognito,a()):c(Error("Missing tab for tabId "+ea))}):c(Error("Missing chrome.tabs API"))})}function Nb(){var a=D.defer();pb().then(function(c){ea=c.tabId;a.resolve()},function(){chrome&&chrome.tabs&&chrome.tabs.getCurrent?chrome.tabs.getCurrent(function(c){c&&c.id?(ea=c.id,a.resolve()):a.reject(Error("Missing tab id"))}):a.reject(Error("Missing chrome.tabs API"))});return Promise.race([a.promise,
e.delayThenReject(3E4,Error("Requesting current tab id timed out"))])}function ia(){r.listen(ec,dc);r.listen(ba,Ec);return Promise.resolve()}function pb(){null===Ta&&(Ta=new Promise(function(a,c){chrome.mimeHandlerPrivate.getStreamInfo(function(e){chrome.runtime.lastError?c(chrome.runtime.lastError):a(e)})}));return Ta}function gb(){return Promise.all([pb(),N.getPage()]).then(function(a){var c=q.getCache(),e=a[0];if(c&&c.originalURL===e.originalUrl)throw chrome.mimeHandlerPrivate.abortStream(),Error("Load from cache");
return a[1].registerMimeHandlerStream(a[0])}).catch(function(){var a=ca.parseURL(window.location.href);a.queryObject?(q.cacheFileDetails(a.queryObject),ca.stripQueryString()):a.queryObject=q.getCache();if(a.queryObject.state)return n(a.queryObject.state);if(a.queryObject.uuid)return a.queryObject.uuid;throw new l;})}function n(a){return N.getPage().then(function(c){var e;try{var f=JSON.parse(a);if(c.handleDriveDoc&&f.ids)e=c.handleDriveDoc(f.ids,f.resourceKeys),la.setUserId(f.userId);else throw new h("Missing handleDriveDoc api");
}catch(k){throw new h({title:"something_not_right",details:"file_not_found_error_msg"});}return e||D.reject(Error("Failed to retrieve the UUID for first Drive Doc"))})}function qb(a){return N.getPage().then(function(c){if(c.addReaperLock){W=a[1];if(!f.isString(W))throw Error("Failed to get a valid UUID");c.addReaperLock(ea);c=c.getFileDetails(W);if(!c)throw new h("Missing FileDetails object");c.lsUsed&&B.sendEvent({category:"local-storage",action:"true"});c=Object.create(c);window.copyToPrivateFile=
q.copyToPrivateFile.bind(q);return q.init(c,W)}throw Error("Background page's 'addReaperLock' function is undefined");}).then(ib)}function dc(a){var c=!1;a&&a.data&&"dcpRequest"===a.data.id&&(c=!0);return c}function Ec(a){return!dc(a)}function Fc(){S.getItem("onboardingComplete").then(function(a){var c=chrome.i18n.getMessage("@@ui_locale");a&&c.match(/en[-_]us/i)&&!k.isDebug()&&k.isEnabled("hats")&&window.setTimeout(function(){var a={word:{siteId:"wtkwz5qvgh3olklj43wihw3lhi",rate:3},sheet:{siteId:"renjicjirwkihjol6bv5k5q7hm",
rate:8},point:{siteId:"4jgyc2mhqmpdwpatxatmggghiq",rate:4}},c=C.mime2App(q.mimeType());if(a[c]){var e=Gc();e.siteId=a[c].siteId;e.targetPercentage=a[c].rate;e.bucketing=12;document.body.appendChild(e)}},3E3)}).catch(function(a){console.warn("Error occurred while fetching the item `onboardingComplete` from the Chrome storage"+a)})}function Gc(){var a=document.createElement("google-consumer-survey");a.addEventListener("user-considered-for-sampling",function(){B.sendEvent({category:"user-survey",action:"sampling",
label:"user-consired"})});a.addEventListener("user-sampled-for-survey",function(){B.sendEvent({category:"user-survey",action:"sampling",label:"user-sampled"})});return a}function ec(a){if(a&&a.data&&a.data.content)if(a=a.data.content,-1!=="writeToExisting writeToNew writeToExistingDriveFile convertToDocs makeACopy download".split(" ").indexOf(a.name))Hc(a);else{var c=aa;switch(a.name){case "oPT":case "oDC":case "owb":a.pa=q.privateFilePath();c(a);break;case "sDC":"OOXML"===C.mime2Format(q.mimeType())?
c(a):q.createPrivateFile("docx").done(Bb.bind(G,a,c));break;case "saveWkbk":"OOXML"===C.mime2Format(q.mimeType())?hb(a,c):q.createPrivateFile("xlsx").done(hb.bind(G,a,c));break;case "sPT":"OOXML"===C.mime2Format(q.mimeType())?hb(a,c):q.createPrivateFile("pptx").done(hb.bind(G,a,c));break;default:c(a)}}else throw Error("DCP Requests must have content");}function Bb(a,c){a.name="saveAs";a.dst=q.privateFilePath();c(a)}function hb(a,c){a.dst=q.privateFilePath();c(a)}function Hc(a){switch(a.name){case "writeToExisting":q.overwriteUserFile().then(Jc.bind(G,
a.name,q.userFilePath()),Pa.bind(G,a.name));break;case "writeToNew":q.newUserFile(!1,a.context&&a.context.toLocal).then(Jc.bind(G,a.name,q.userFilePath()),Oa.bind(G,a.name)).done(function(){},Pa.bind(G,a.name));break;case "makeACopy":Pa(a.name);q.newUserFile(!0).done(rb.bind(G,q.userFilePath()),kd);break;case "writeToExistingDriveFile":Pa(a.name);q.overwriteUserFile(a.newRevision).finally(Kc.bind(G,a.token),oa.bind(G,a.token));break;case "convertToDocs":Pa(a.name);q.convertToDocs().done(Lc,hc);break;
case "download":jb&&(chrome.downloads.onDeterminingFilename.addListener(function Oc(a,c){c({filename:q.tryAndGetDownloadFileName(),conflictAction:"uniquify"});chrome.downloads.onDeterminingFilename.removeListener(Oc);jb=!0}),jb=!1,q.downloadToLocalFile());Pa(a.name);break;default:console.log("#!#! Unexpected processAppRequest "+a.name)}}function fc(a){return D.promise(function(c){ic(gc(a),c)})}function Ic(a){return D.promise(function(c){var e=gc(a);chrome&&chrome.tabs&&e&&chrome.tabs.update(ea,{url:e},
c)})}function gc(a){var c,e=a.result?a.result.alternateLink:void 0,f=C.extension2Format(a.result?a.result.fileExtension:void 0);if(e&&!e.match(/.*\/file\/.*/)&&!f)c=e,c=(a=c.match(/(.*)\?(.*)/))?a[2]&&0<a[2].length?c+"&nativeconvert=1":c+"nativeconvert=1":c+"?nativeconvert=1";else if(!e||e.match(/.*\/file\/.*/)||f)c="chrome-extension://"+chrome.runtime.id+'/views/app.html?state={"ids":["'+a.result.id+'"],"action":"open"}';return c}function Jc(a,c,e){q.userFilePath()!==c&&Ob();"writeToNew"===a&&"drive"===
ma()?Ic(e).then(Pa.bind(G,a)):Pa(a);r.pushMessage({id:"userFileNotification",context:{type:"saveSuccess",format:C.mime2Format(q.mimeType()),userFileType:ma(),isRenamed:void 0,localFilePath:"local"===ma()?e.localFilePath:"",driveFileReadOnly:"reader"===q.driveFileRole()}})}function Oa(a){r.pushMessage({id:"dcp",content:{name:a,userCancelled:!0,format:C.mime2Format(q.mimeType()),userFileType:ma(),driveFileReadOnly:"reader"===q.driveFileRole()}});r.pushMessage({id:"userFileNotification",context:{type:"saveCancel"}})}
function Kc(a){r.pushMessage({id:"driveFileNotification",context:{type:"saveSuccess",saveToken:a}})}function oa(a,c){r.pushMessage({id:"driveFileNotification",context:{type:"saveFailure",saveToken:a,errorCode:ka.getErrorCode(c)}})}function Lc(a){var c=U;r.pushMessage({id:"driveFileNotification",context:{type:"convertSuccess"}});U=!1;if(!c)return fc(a)}function hc(a){var c=U;U=!1;c||r.pushMessage({id:"recordEvent",category:"menu",action:"convertToDocsFailed"});r.pushMessage({id:"driveFileNotification",
context:{type:"convertFailure",errorCode:ka.getErrorCode(a)}})}function rb(a,c){"drive"===ma()?fc(c):(document.title=q.displayName(),q.userFilePath()!==a&&Ob(),r.pushMessage({id:"localFileNotification",context:{type:"copySuccess",displayName:q.displayName(),format:C.mime2Format(q.mimeType()),userFileType:ma(),driveFileReadOnly:!1}}))}function kd(a){"drive"===ma()&&(r.pushMessage({id:"recordEvent",category:"menu",action:"makeCopyFailed"}),r.pushMessage({id:"driveFileNotification",context:{type:"copyFailure",
errorCode:ka.getErrorCode(a)}}))}function Pa(a,c){document.title=q.displayName();r.pushMessage({id:"dcp",content:{name:a,displayName:q.displayName(),format:C.mime2Format(q.mimeType()),userFileType:ma(),driveFileReadOnly:"reader"===q.driveFileRole(),e:c&&c.message||c}})}function aa(c){Nc=c.name;c=c instanceof ArrayBuffer?c:a.withWarning("Msg to Core must be JSON").rethrow(JSON.stringify.bind(JSON,c));q.getWorker().postMessage({type:4,buffer:c,command:Nc})}function ma(){var a;q.userFilePath()?a="local":
q.driveDocId()&&(a="drive");return a}function ba(a){if(a&&a.data)switch(a.data.id){case "closeApp":window.close();break;case "reportAnIssue":H.openFeedbackUI();break;case "showHelp":case "signIntoDrive":ic(a.data.link);break;case "recordCount":t.recordCount(a.data.context);break;case "stateChange":a=a.data.data;w.updateState(a.state,a.context);break;case "recordEvent":B.sendEvent(a.data);break;case "recordCachableEvent":Ma(a.data);break;case "createNewTab":ic(a.data.link);break;case "conversionCancelled":U=
!0;break;case "reloadTab":if(ea&&chrome&&chrome.tabs){chrome.tabs.reload(ea);break}window.location.reload();break;case "setBlockUnload":chrome.mimeHandlerPrivate&&chrome.mimeHandlerPrivate.setShowBeforeUnloadDialog&&chrome.mimeHandlerPrivate.setShowBeforeUnloadDialog(!!a.data.blockUnload);break;case "fileNotFound":q.updateConfigAndCache(!0);break;case "fileSaveSuccess":q.updateConfigAndCache();r.pushMessage({id:"updateFileInfo"});break;case "performanceMetrics":A.log(a.data)}}function ic(a,c){chrome&&
chrome.tabs&&a&&a.match(/^https?:\/\/|^file:\/\/|^mailto:/i)&&chrome.tabs.create({url:a},c)}function ib(){jc();Da();Ob();Cb();Ea();Mc();Ca().then(function(){G.openFile()}).catch(function(){Fa=!1;G.openFile()})}function Qa(a){var c={"2K3":"doc ppt xls dot pot xlt".split(" "),"2K7":"docx pptx xlsx dotx potx xltx docm pptm xlsm".split(" "),CSV:["csv"]},e;Object.keys(c).every(function(f){return c[f].includes(a)?(e=f,!1):!0});return e}function jc(){q.getPrivateFileFromEntry().then(function(a){var c=C.mime2Extension(q.mimeType());
A.log({category:"PERF_LOG",action:"SC",label:{FF:Qa(c)},value:window.performance.now()});B.sendEvent({id:"recordEvent",category:"raw-data",action:"ViewingFullContent",label:"fileSize_bytes",value:a.size});B.sendEvent({id:"recordEvent",category:"raw-data",action:"file-ready",label:c})})}function Da(){return N.getPage().then(function(a){if(a.cacheTabId)a.cacheTabId(W,ea);else throw Error("Background page's 'cacheTabId' function is undefined");})}function Ob(){return N.getPage().then(function(a){if(a.cachePrivateFilePath)a.cachePrivateFilePath(W,
q.privateFilePath());else throw Error("Background page's 'cachePrivateFilePath' function is undefined");})}function Cb(){return N.getPage().then(function(a){if(a.cacheDownloadFilePath)a.cacheDownloadFilePath(W,q.downloadFilePath());else throw Error("Background page's 'cacheDownloadFilePath' function is undefined");})}function Ea(){return N.getPage().then(function(a){if(a.cacheTimestamp)a.cacheTimestamp(W);else throw Error("Background page's 'cacheTimestamp' function is undefined");})}function Mc(){return N.getPage().then(function(a){if(a.removeReaperLock)a.removeReaperLock(ea);
else throw Error("Background page's 'removeReaperLock' function is undefined");})}var G={openFile:function(){if(!q.isReady)throw Error("Error: app not ready to open file yet");w.updateState("Opening");if(p.isCros){var a=window.navigator.onLine,c=a?"online":"offline",e=C.mime2Extension(q.mimeType()),f=fb(M);a&&0<f.length&&ua(M);Ma({category:"file-open",action:c,label:e})}document.title=q.displayName();if(a=C.mime2Icon(q.mimeType()))c=document.createElement("link"),c.type="image/x-icon",c.rel="shortcut icon",
c.href=a,document.getElementsByTagName("head")[0].appendChild(c);Sa&&r.pushMessage({id:Qb,overrides:Sa});Ab()}},ya,Ra,Pb,Sa,Qb="featureOverrides",I="pending_ga",M="pending_app_ga",ea,W,Fa=!1,U=!1,jb=!0,Nc="Invalid",Ta=null;(function(){chrome.runtime.onMessage.addListener(function(a,c,e){"reaperCheck"===a&&e({uuid:q.getUUID()})})})();(function(){try{Sa={};var a=window.sessionStorage.getItem(Qb),c=R.getItem(Qb);c||(c='{"edit":true,"pointEdit":true}');f.extend(Sa,JSON.parse(a));f.extend(Sa,JSON.parse(c));
0<Object.keys(Sa).length&&k.setOverrides(Sa)}catch(e){}})();require(["monkeyLoader!monkeyAppClient"],function(){ha.publish("qowt:doAction","START_PERFORMANCE_TEST");document.title="";ya=document.getElementById("sandbox");window.connectFromAppToQowt=new Date;r.connect(ya.contentWindow);window._handleWASMMessage=u;var a=da.generateUUID();B.setSessionGroup(a);cc();w.init();Ra={locale:chrome.i18n.getMessage("@@ui_locale"),defaultLocale:"en"};window.addEventListener("keydown",La);c.addObserver(v);c.addObserver(O);
c.addObserver(P);c.init();D.all([Dc(),gb(),Nb(),ia()]).then(qb).then(Fc).done()});return G});require(["third_party/domready/domReady!"],function(){require(["controllers/application"])});define("mainApp",function(){});
