{"version":3,"file":"popup/main.js","mappings":"UAAIA,ECCAC,EADAC,E,oCCAQC,ECAAC,E,sBDAZ,SAAYD,GACV,YACA,oBACA,oBACA,kBACA,YACA,gCACD,CAPD,CAAYA,IAAAA,EAAU,KCAtB,SAAYC,GACV,yBACA,iBACA,yCACA,2CACA,uCACA,qCACA,uCACA,mCACA,mCACA,qCACA,wCACA,oCACA,kCACA,8BACA,wCACA,sCACA,kBACA,sCACA,wCACA,4CACA,0CACA,kBACA,uBACD,CAxBD,CAAYA,IAAAA,EAAU,KA0B4B,IAAIC,IAAI,CACxDD,EAAWE,QACXF,EAAWG,IACXH,EAAWI,gBAGsC,IAAIH,IAAI,CACzDD,EAAWK,eACXL,EAAWM,aACXN,EAAWO,aACXP,EAAWQ,MCpCb,IAAYC,ECAAC,GDAZ,SAAYD,GACV,2CACA,oCACD,CAHD,CAAYA,IAAAA,EAAmB,KCA/B,SAAYC,GACV,qCACA,2DACA,2DACA,uDACA,mDACA,6EACA,wEACD,CARD,CAAYA,IAAAA,EAAc,KAyBnB,MAAMC,EAAwC,CACnD,CAACD,EAAeE,eAAgB,EAChC,CAACF,EAAeG,0BAA2B,EAC3C,CAACH,EAAeI,0BAA2B,EAC3C,CAACJ,EAAeK,wBAAyB,EACzC,CAACL,EAAeM,sBAAuB,EACvC,CAACN,EAAeO,mCAAoC,EACpD,CAACP,EAAeQ,iCAAkC,GC/BpD,IAAYC,ECAAC,ECDAC,ECAAC,ECAAC,ECAAC,ECMAC,ECJAC,GPDZ,SAAYP,GACV,mBACA,8CACD,CAHD,CAAYA,IAAAA,EAAe,KCA3B,SAAYC,GACV,uCACA,sDACA,4CACA,8CACA,gDACA,8CACA,oDACA,8DACA,8DACA,0EACA,sEAEA,0CACA,0CACA,0CACA,8DACA,8DACA,wCACA,gEACA,oDACA,oFACA,0FACA,oFACA,oEACA,0EACA,oEACA,4DACA,kDACA,4CACA,wFAEA,kDACA,kDACA,kDAEA,wCACA,wCACA,wCAEA,8DACA,kEACA,8DACA,8DACA,0EACA,sEACA,wFACA,4FACA,oFACA,wEACA,0EACA,8DACA,gEACA,sFACA,sFAEA,sDACA,8DACA,8EACA,kEACA,4DA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qoC,YAAc,GACnBroC,KAAKuoC,aAAe,GACpBvoC,KAAKkoC,cACLloC,KAAKmoC,cACLnoC,KAAKooC,YACLpoC,KAAKsoC,YACLtoC,KAAKwoC,eAAiB,GACtBxoC,KAAKyoC,YACLzoC,KAAK0oC,aAET,EC5BK,MAAME,GAAkB,CAC7B,SACA,UACA,YACA,QACA,UACA,UACA,SACA,OACA,WACA,WACA,WACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,SACA,SACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,WACA,UACA,OACA,UACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,OACA,UACA,YACA,WACA,WACA,UACA,YACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,SACA,QACA,YACA,WACA,SACA,UACA,SACA,SACA,WACA,QACA,SACA,YACA,YACA,YACA,YACA,YACA,OACA,UACA,SACA,SACA,QACA,YACA,SACA,QACA,UACA,QACA,WACA,UACA,YACA,QACA,YACA,YACA,SACA,WACA,YACA,UACA,QACA,OACA,OACA,OACA,MACA,OACA,YACA,QACA,YACA,QACA,UACA,UACA,YACA,QACA,QACA,YACA,WACA,SACA,QACA,QACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,QACA,QACA,YACA,QACA,WACA,UACA,WACA,WACA,OACA,WACA,SACA,SACA,WACA,QACA,YACA,QACA,WACA,YACA,YACA,WACA,YACA,YACA,SACA,YACA,YACA,SACA,UACA,UACA,WACA,OACA,QACA,QACA,QACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,SACA,WACA,SACA,YACA,SACA,UACA,WACA,YACA,UACA,YACA,UACA,SACA,UACA,UACA,UACA,SACA,SACA,WACA,OACA,YACA,UACA,QACA,SACA,SACA,SACA,UACA,UACA,YACA,YACA,UACA,SACA,UACA,YACA,YACA,WACA,QACA,YACA,QACA,QACA,WACA,YACA,WACA,WACA,UACA,WACA,UACA,YACA,UACA,YACA,WACA,WACA,WACA,SACA,UACA,YACA,WACA,SACA,WACA,WACA,YACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,UACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,WACA,QACA,SACA,UACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,QACA,YACA,YACA,UACA,QACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,YACA,YACA,WACA,OACA,QACA,WACA,WACA,QACA,QACA,YACA,UACA,WACA,QACA,SACA,UACA,SACA,UACA,UACA,UACA,SACA,UACA,OACA,QACA,QACA,SACA,UACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,QACA,MACA,SACA,YACA,SACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,YACA,SACA,WACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,YACA,SACA,WACA,QACA,OACA,WACA,OACA,SACA,YACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,UACA,WACA,QACA,WACA,YACA,SACA,YACA,SACA,SACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,UACA,WACA,QACA,WACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,UACA,SACA,QACA,OACA,OACA,SACA,WACA,SACA,SACA,WACA,YACA,YACA,WACA,SACA,SACA,YACA,WACA,WACA,UACA,YACA,WACA,WACA,YACA,UACA,UACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,YACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,YACA,SACA,QACA,UACA,QACA,UACA,SACA,WACA,QACA,SACA,UACA,SACA,SACA,YACA,UACA,QACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,QACA,WACA,SACA,SACA,SACA,WACA,QACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,SACA,YACA,UACA,SACA,WACA,SACA,UACA,SACA,UACA,QACA,WACA,UACA,WACA,SACA,UACA,SACA,OACA,YACA,UACA,YACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,OACA,YACA,SACA,QACA,QACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,UACA,UACA,SACA,SACA,UACA,UACA,UACA,QACA,OACA,QACA,UACA,YACA,YACA,QACA,YACA,YACA,QACA,WACA,YACA,SACA,UACA,SACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,QACA,UACA,UACA,WACA,SACA,OACA,WACA,QACA,WACA,UACA,WACA,OACA,OACA,WACA,WACA,UACA,OACA,SACA,UACA,QACA,SACA,YACA,QACA,QACA,UACA,SACA,QACA,QACA,WACA,UACA,WACA,WACA,OACA,SACA,UACA,SACA,SACA,UACA,UACA,YACA,OACA,SACA,SACA,QACA,OACA,MACA,UACA,OACA,UACA,SACA,UACA,WACA,QACA,WACA,WACA,WACA,QACA,UACA,SACA,SACA,QACA,OACA,YACA,YACA,OACA,YACA,SACA,QACA,SACA,UACA,WACA,UACA,QACA,QACA,QACA,SACA,UACA,WACA,YACA,OACA,YACA,WACA,SACA,QACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,YACA,YACA,SACA,SACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,YACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,QACA,QACA,QACA,QACA,UACA,UACA,SACA,YACA,OACA,QACA,QACA,UACA,UACA,YACA,UACA,UACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,WACA,QACA,QACA,UACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,QACA,QACA,WACA,QACA,YACA,SACA,WACA,SACA,YACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,QACA,SACA,UACA,SACA,SACA,UACA,UACA,QACA,OACA,QACA,YACA,SACA,OACA,UACA,YACA,YACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,QACA,QACA,SACA,SACA,SACA,UACA,YACA,WACA,QACA,OACA,SACA,OACA,SACA,UACA,OACA,WACA,OACA,SACA,UACA,SACA,YACA,QACA,UACA,QACA,SACA,QACA,SACA,SACA,QACA,QACA,WACA,UACA,OACA,UACA,OACA,WACA,WACA,UACA,YACA,WACA,UACA,YACA,OACA,UACA,UACA,UACA,YACA,QACA,SACA,WACA,SACA,WACA,UACA,WACA,SACA,QACA,SACA,SACA,UACA,SACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,SACA,SACA,QACA,YACA,SACA,UACA,SACA,UACA,UACA,WACA,OACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,UACA,YACA,UACA,YACA,UACA,UACA,QACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,YACA,YACA,YACA,WACA,SACA,YACA,QACA,SACA,UACA,UACA,WACA,UACA,YACA,WACA,YACA,QACA,YACA,YACA,UACA,UACA,UACA,SACA,YACA,QACA,SACA,WACA,SACA,UACA,YACA,YACA,QACA,UACA,UACA,UACA,OACA,OACA,SACA,SACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,WACA,SACA,UACA,WACA,WACA,UACA,YACA,WACA,UACA,SACA,SACA,SACA,UACA,YACA,SACA,QACA,UACA,YACA,SACA,SACA,YACA,QACA,UACA,YACA,UACA,WACA,WACA,UACA,SACA,SACA,QACA,SACA,YACA,WACA,WACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,WACA,QACA,QACA,UACA,YACA,UACA,YACA,WACA,SACA,SACA,UACA,QACA,QACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,WACA,UACA,WACA,UACA,UACA,QACA,UACA,UACA,WACA,QACA,UACA,SACA,WACA,WACA,WACA,UACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,SACA,OACA,YACA,UACA,QACA,YACA,SACA,QACA,QACA,UACA,QACA,WACA,SACA,UACA,QACA,QACA,YACA,YACA,YACA,WACA,YACA,YACA,QACA,QACA,QACA,OACA,WACA,SACA,WACA,WACA,QACA,WACA,WACA,SACA,YACA,UACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,WACA,SACA,SACA,QACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,UACA,SACA,SACA,OACA,QACA,QACA,OACA,QACA,WACA,SACA,SACA,QACA,YACA,QACA,WACA,UACA,UACA,WACA,UACA,WACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,OACA,OACA,QACA,QACA,QACA,UACA,QACA,SACA,YACA,WACA,QACA,SACA,UACA,SACA,UACA,WACA,QACA,SACA,WACA,OACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,UACA,UACA,WACA,QACA,SACA,UACA,WACA,YACA,QACA,WACA,SACA,SACA,YACA,SACA,UACA,QACA,YACA,UACA,UACA,WACA,YACA,YACA,OACA,WACA,SACA,UACA,SACA,QACA,UACA,MACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,OACA,OACA,OACA,OACA,WACA,WACA,UACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,SACA,WACA,OACA,OACA,OACA,UACA,QACA,QACA,SACA,QACA,WACA,UACA,UACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,YACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,QACA,YACA,UACA,WACA,WACA,SACA,WACA,YACA,YACA,UACA,YACA,YACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,YACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,UACA,YACA,OACA,SACA,SACA,UACA,SACA,UACA,SACA,OACA,QACA,OACA,WACA,YACA,UACA,SACA,SACA,SACA,YACA,YACA,WACA,WACA,YACA,QACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,OACA,UACA,SACA,QACA,QACA,QACA,YACA,YACA,WACA,YACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,SACA,WACA,OACA,WACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,YACA,SACA,QACA,YACA,QACA,UACA,UACA,QACA,QACA,QACA,UACA,WACA,WACA,WACA,WACA,SACA,SACA,UACA,YACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,WACA,WACA,SACA,QACA,QACA,SACA,QACA,QACA,WACA,UACA,WACA,YACA,UACA,WACA,UACA,WACA,OACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,UACA,UACA,UACA,WACA,UACA,YACA,SACA,WACA,UACA,QACA,QACA,QACA,QACA,OACA,QACA,SACA,UACA,UACA,QACA,QACA,UACA,UACA,YACA,UACA,YACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,UACA,UACA,WACA,QACA,OACA,SACA,UACA,UACA,YACA,OACA,UACA,UACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,YACA,WACA,UACA,YACA,UACA,QACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,SACA,SACA,SACA,YACA,UACA,QACA,QACA,QACA,UACA,SACA,UACA,SACA,SACA,YACA,QACA,QACA,QACA,OACA,SACA,UACA,YACA,UACA,YACA,WACA,YACA,UACA,MACA,QACA,SACA,UACA,UACA,WACA,SACA,YACA,YACA,MACA,MACA,WACA,SACA,QACA,WACA,SACA,QACA,QACA,WACA,QACA,UACA,YACA,SACA,WACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,WACA,YACA,UACA,WACA,WACA,UACA,OACA,OACA,YACA,OACA,YACA,OACA,WACA,SACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,SACA,YACA,WACA,SACA,UACA,YACA,QACA,OACA,YACA,SACA,WACA,QACA,UACA,WACA,SACA,QACA,SACA,SACA,QACA,QACA,YACA,QACA,WACA,SACA,WACA,YACA,WACA,UACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,WACA,OACA,WACA,UACA,SACA,YACA,YACA,YACA,QACA,WACA,SACA,WACA,YACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,SACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,SACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,QACA,WACA,UACA,UACA,SACA,SACA,OACA,WACA,YACA,WACA,SACA,YACA,QACA,WACA,QACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,QACA,SACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,SACA,QACA,SACA,QACA,UACA,SACA,UACA,UACA,OACA,YACA,YACA,WACA,YACA,SACA,UACA,YACA,WACA,SACA,SACA,SACA,WACA,YACA,YACA,UACA,UACA,QACA,WACA,SACA,SACA,WACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,WACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,QACA,UACA,WACA,UACA,UACA,YACA,WACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,OACA,WACA,SACA,YACA,QACA,OACA,SACA,UACA,YACA,WACA,YACA,WACA,WACA,YACA,YACA,MACA,WACA,YACA,WACA,OACA,SACA,OACA,WACA,QACA,SACA,SACA,UACA,SACA,QACA,UACA,SACA,YACA,QACA,QACA,SACA,SACA,UACA,UACA,UACA,SACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,SACA,WACA,WACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,WACA,OACA,YACA,UACA,OACA,UACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,QACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,WACA,SACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,QACA,SACA,SACA,OACA,WACA,WACA,QACA,QACA,QACA,QACA,OACA,SACA,YACA,SACA,QACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,QACA,QACA,SACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,UACA,QACA,OACA,YACA,SACA,SACA,OACA,SACA,WACA,SACA,OACA,OACA,QACA,OACA,OACA,WACA,YACA,YACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,YACA,QACA,UACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,SACA,QACA,OACA,UACA,QACA,QACA,QACA,UACA,WACA,YACA,WACA,WACA,SACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,QACA,QACA,QACA,YACA,UACA,WACA,UACA,UACA,UACA,QACA,QACA,WACA,SACA,OACA,MACA,SACA,YACA,UACA,WACA,UACA,WACA,WACA,QACA,OACA,OACA,SACA,SACA,MACA,OACA,SACA,WACA,OACA,UACA,WACA,WACA,MACA,OACA,SACA,YACA,YACA,UACA,UACA,WACA,SACA,SACA,OACA,OACA,UACA,OACA,QACA,QACA,QACA,UACA,UACA,WACA,UACA,YACA,UACA,WACA,UACA,WACA,WACA,OACA,QACA,UACA,UACA,UACA,SACA,UACA,QACA,UACA,UACA,WACA,WACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,SACA,UACA,QACA,UACA,SACA,WACA,SACA,YACA,YACA,SACA,WACA,UACA,QACA,SACA,SACA,OACA,OACA,QACA,QACA,QACA,YACA,OACA,SACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,YACA,OACA,WACA,SACA,OACA,UACA,SACA,WACA,YACA,WACA,MACA,YACA,UACA,YACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,UACA,SACA,QACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,SACA,MACA,WACA,WACA,YACA,QACA,UACA,SACA,MACA,UACA,WACA,MACA,YACA,QACA,YACA,WACA,YACA,QACA,UACA,QACA,QACA,UACA,SACA,UACA,YACA,YACA,QACA,WACA,UACA,SACA,SACA,WACA,SACA,YACA,QACA,UACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,UACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,UACA,UACA,YACA,QACA,MACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,SACA,SACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,YACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,UACA,SACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,SACA,SACA,SACA,UACA,UACA,SACA,SACA,YACA,WACA,YACA,WACA,SACA,UACA,SACA,SACA,YACA,SACA,SACA,WACA,UACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,WACA,QACA,OACA,SACA,OACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,WACA,UACA,QACA,SACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,WACA,SACA,SACA,UACA,YACA,SACA,SACA,UACA,QACA,QACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,SACA,WACA,WACA,YACA,YACA,WACA,UACA,UACA,WACA,UACA,QACA,YACA,SACA,YACA,WACA,UACA,QACA,WACA,YACA,YACA,UACA,UACA,OACA,YACA,YACA,YACA,WACA,WACA,QACA,WACA,UACA,OACA,QACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,SACA,UACA,SACA,QACA,WACA,OACA,SACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,YACA,YACA,YACA,QACA,SACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,YACA,SACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,SACA,WACA,SACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,OACA,SACA,UACA,SACA,OACA,QACA,UACA,OACA,WACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,UACA,OACA,UACA,YACA,YACA,UACA,UACA,WACA,SACA,UACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,MACA,QACA,UACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,WACA,WACA,WACA,WACA,QACA,QACA,UACA,SACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,SACA,SACA,WACA,UACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,WACA,YACA,UACA,UACA,QACA,WACA,QACA,UACA,SACA,WACA,SACA,SACA,SACA,UACA,OACA,SACA,QACA,WACA,SACA,WACA,WACA,UACA,UACA,YACA,QACA,WACA,QACA,UACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,MACA,OACA,UACA,UACA,WACA,WACA,YACA,YACA,QACA,UACA,QACA,QACA,YACA,UACA,WACA,WACA,OACA,UACA,YACA,YACA,YACA,WACA,WACA,SACA,QACA,UACA,WACA,SACA,WACA,UACA,YACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,OACA,UACA,SACA,QACA,QACA,SACA,SACA,QACA,QACA,OACA,QACA,QACA,QACA,WACA,OACA,SACA,UACA,QACA,WACA,UACA,UACA,QACA,SACA,UACA,WACA,OACA,MACA,MACA,OACA,QACA,OACA,WACA,SACA,WACA,SACA,WACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,MACA,QACA,WACA,WACA,UACA,YACA,WACA,YACA,WACA,QACA,QACA,UACA,UACA,YACA,SACA,UACA,QACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,UACA,WACA,SACA,YACA,WACA,YACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,WACA,SACA,YACA,WACA,QACA,UACA,UACA,WACA,SACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,QACA,SACA,UACA,QACA,UACA,YACA,SACA,OACA,QACA,YACA,UACA,WACA,WACA,YACA,SACA,QACA,QACA,SACA,WACA,YACA,WACA,QACA,YACA,SACA,MACA,QACA,MACA,YACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,SACA,UACA,YACA,SACA,YACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,MACA,SACA,UACA,SACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,MACA,WACA,YACA,SACA,UACA,WACA,QACA,OACA,OACA,SACA,OACA,QACA,OACA,SACA,MACA,SACA,UACA,WACA,WACA,QACA,UACA,YACA,SACA,QACA,YACA,WACA,YACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,YACA,WACA,YACA,UACA,YACA,UACA,UACA,UACA,QACA,QACA,YACA,SACA,UACA,YACA,QACA,OACA,WACA,YACA,WACA,SACA,WACA,SACA,SACA,SACA,QACA,UACA,SACA,WACA,QACA,QACA,SACA,QACA,UACA,UACA,UACA,QACA,YACA,SACA,YACA,UACA,SACA,WACA,YACA,QACA,UACA,QACA,WACA,UACA,WACA,UACA,SACA,UACA,UACA,UACA,UACA,SACA,UACA,SACA,UACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,QACA,QACA,QACA,UACA,WACA,UACA,OACA,SACA,YACA,UACA,SACA,OACA,OACA,WACA,OACA,UACA,QACA,WACA,WACA,YACA,OACA,UACA,QACA,UACA,OACA,OACA,OACA,QACA,WACA,YACA,QACA,SACA,OACA,SACA,OACA,SACA,WACA,OACA,UACA,SACA,SACA,SACA,OACA,OACA,OACA,WACA,YACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,UACA,WACA,QACA,WACA,WACA,UACA,UACA,UACA,WACA,UACA,SACA,UACA,QACA,WACA,QACA,QACA,UACA,YACA,QACA,QACA,YACA,UACA,UACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,QACA,OACA,UACA,WACA,WACA,YACA,SACA,QACA,UACA,WACA,OACA,YACA,OACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,OACA,UACA,OACA,WACA,SACA,QACA,QACA,SACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,UACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,OACA,WACA,QACA,OACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,MACA,UACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,UACA,UACA,MACA,UACA,QACA,OACA,UACA,OACA,SACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,YACA,SACA,QACA,YACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,WACA,QACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,YACA,QACA,SACA,YACA,WACA,UACA,WACA,YACA,OACA,UACA,SACA,QACA,QACA,SACA,WACA,SACA,WACA,SACA,OACA,WACA,WACA,YACA,YACA,YACA,SACA,SACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,UACA,WACA,OACA,OACA,QACA,UACA,YACA,UACA,QACA,UACA,YACA,QACA,SACA,SACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,QACA,WACA,QACA,SACA,SACA,YACA,QACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,YACA,WACA,WACA,UACA,WACA,SACA,SACA,WACA,OACA,MACA,OACA,OACA,OACA,QACA,SACA,WACA,SACA,QACA,YACA,WACA,UACA,SACA,YACA,WACA,YACA,WACA,WACA,SACA,SACA,YACA,YACA,SACA,WACA,SACA,OACA,SACA,UACA,WACA,WACA,SACA,SACA,SACA,UACA,SACA,YACA,UACA,QACA,OACA,UACA,OACA,SACA,YACA,MACA,SACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,MACA,UACA,QACA,OACA,OACA,MACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,QACA,OACA,QACA,WACA,SACA,SACA,YACA,WACA,WACA,QACA,YACA,WACA,UACA,WACA,UACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,SACA,YACA,UACA,WACA,YACA,YACA,WACA,SACA,UACA,YACA,YACA,WACA,UACA,YACA,YACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,SACA,SACA,MACA,OACA,SACA,OACA,QACA,MACA,OACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,WACA,YACA,YACA,UACA,QACA,UACA,YACA,UACA,OACA,YACA,SACA,QACA,MACA,MACA,SACA,SACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,MACA,UACA,UACA,SACA,UACA,UACA,WACA,QACA,OACA,QACA,UACA,UACA,OACA,UACA,YACA,OACA,OACA,YACA,UACA,QACA,SACA,SACA,MACA,QACA,SACA,QACA,SACA,WACA,OACA,UACA,UACA,MACA,SACA,YACA,SACA,UACA,OACA,UACA,WACA,WACA,YACA,QACA,OACA,MACA,SACA,WACA,YACA,SACA,UACA,WACA,YACA,WACA,QACA,YACA,WACA,YACA,OACA,SACA,WACA,UACA,QACA,YACA,QACA,UACA,UACA,OACA,SACA,QACA,OACA,WACA,WACA,OACA,SACA,UACA,SACA,UACA,WACA,SACA,QACA,OACA,UACA,YACA,UACA,SACA,WACA,WACA,QACA,WACA,UACA,SACA,QACA,QACA,SACA,WACA,OACA,MACA,OACA,SACA,OACA,WACA,WACA,SACA,OACA,OACA,WACA,WACA,YACA,WACA,OACA,SACA,SACA,WACA,SACA,WACA,UACA,UACA,UACA,OACA,UACA,UACA,YACA,WACA,SACA,UACA,UACA,OACA,SACA,QACA,OACA,UACA,WACA,OACA,QACA,WACA,QACA,QACA,QACA,SACA,UACA,QACA,OACA,UACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,UACA,WACA,SACA,UACA,SACA,OACA,OACA,QACA,SACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,QACA,UACA,SACA,QACA,SACA,UACA,SACA,OACA,QACA,OACA,OACA,QACA,OACA,QACA,OACA,SACA,WACA,UACA,SACA,WACA,SACA,UACA,UACA,SACA,WACA,SACA,WACA,SACA,WACA,OACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,OACA,UACA,SACA,YACA,UACA,QACA,OACA,SACA,OACA,OACA,UACA,SACA,UACA,YACA,WACA,SACA,UACA,QACA,WACA,SACA,WACA,YACA,YACA,SACA,UACA,YACA,UACA,UACA,WACA,MACA,OACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,SACA,QACA,QACA,OACA,OACA,UACA,YACA,QACA,QACA,UACA,WACA,OACA,QACA,WACA,WACA,SACA,SACA,WACA,UACA,OACA,OACA,MACA,UACA,UACA,SACA,OACA,OACA,WACA,YACA,SACA,SACA,SACA,UACA,QACA,SACA,QACA,YACA,UACA,SACA,SACA,YACA,YACA,QACA,UACA,YACA,WACA,YACA,YACA,SACA,WACA,UACA,SACA,YACA,WACA,YACA,UACA,UACA,SACA,QACA,WACA,WACA,YACA,YACA,OACA,QACA,OACA,YACA,OACA,SACA,WACA,SACA,YACA,UACA,YACA,WACA,QACA,YACA,SACA,QACA,YACA,WACA,WACA,SACA,WACA,WACA,QACA,OACA,UACA,YACA,WACA,UACA,SACA,UACA,WACA,QACA,YACA,WACA,YACA,YACA,YACA,UACA,YACA,WACA,WACA,SACA,WACA,UACA,YACA,WACA,WACA,QACA,YACA,SACA,YACA,OACA,OACA,SACA,UACA,YACA,UACA,WACA,UACA,WACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,YACA,UACA,UACA,UACA,YACA,WACA,YACA,SACA,UACA,UACA,YACA,QACA,UACA,SACA,UACA,QACA,WACA,SACA,SACA,SACA,OACA,MACA,WACA,YACA,UACA,UACA,WACA,QACA,QACA,YACA,YACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,YACA,SACA,UACA,SACA,QACA,YACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,UACA,WACA,SACA,UACA,UACA,UACA,YACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,OACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,WACA,WACA,WACA,QACA,WACA,WACA,UACA,QACA,SACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,QACA,SACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,YACA,WACA,QACA,WACA,OACA,YACA,WACA,WACA,UACA,MACA,YACA,SACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,YACA,YACA,YACA,WACA,MACA,SACA,WACA,UACA,YACA,WACA,WACA,WACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,OACA,WACA,YACA,SACA,WACA,YACA,SACA,YACA,QACA,QACA,YACA,WACA,UACA,WACA,UACA,WACA,QACA,YACA,YACA,QACA,QACA,UACA,OACA,QACA,SACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,QACA,OACA,SACA,UACA,WACA,WACA,YACA,YACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,WACA,UACA,YACA,SACA,QACA,YACA,QACA,YACA,WACA,SACA,UACA,YACA,WACA,QACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,YACA,QACA,UACA,SACA,WACA,OACA,YACA,YACA,SACA,OACA,SACA,SACA,SACA,UACA,YACA,UACA,OACA,QACA,MACA,OACA,OACA,SACA,QACA,YACA,OACA,SACA,SACA,UACA,QACA,SACA,UACA,YACA,WACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,WACA,SACA,WACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,UACA,OACA,SACA,OACA,UACA,QACA,OACA,MACA,YACA,SACA,WACA,WACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,QACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,QACA,UACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,SACA,WACA,WACA,YACA,QACA,SACA,QACA,MACA,MACA,QACA,MACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,YACA,OACA,UACA,YACA,YACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,SACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,SACA,QACA,SACA,UACA,SACA,UACA,UACA,OACA,MACA,OACA,WACA,OACA,MACA,QACA,WACA,QACA,OACA,UACA,WACA,OACA,WACA,UACA,WACA,UACA,QACA,SACA,WACA,OACA,WACA,QACA,UACA,YACA,UACA,OACA,SACA,OACA,OACA,OACA,OACA,UACA,OACA,OACA,WACA,UACA,YACA,YACA,YACA,WACA,QACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,MACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,QACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,YACA,UACA,UACA,SACA,UACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,OACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,MACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,SACA,YACA,OACA,WACA,YACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,QACA,WACA,OACA,YACA,QACA,UACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,YACA,SACA,SACA,QACA,UACA,UACA,SACA,WACA,SACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,QACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,YACA,SACA,WACA,YACA,OACA,WACA,UACA,QACA,YACA,UACA,SACA,YACA,YACA,SACA,WACA,QACA,YACA,WACA,SACA,SACA,UACA,UACA,WACA,SACA,QACA,QACA,SACA,UACA,WACA,UACA,SACA,SACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,UACA,SACA,OACA,SACA,WACA,UACA,SACA,UACA,UACA,YACA,WACA,UACA,YACA,QACA,SACA,UACA,WACA,YACA,MACA,WACA,UACA,QACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,QACA,OACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,YACA,SACA,YACA,QACA,SACA,WACA,QACA,YACA,SACA,YACA,YACA,QACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,UACA,UACA,WACA,QACA,UACA,QACA,SACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,UACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,YACA,WACA,QACA,WACA,QACA,SACA,YACA,SACA,WACA,YACA,UACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,UACA,WACA,SACA,OACA,YACA,UACA,QACA,MACA,OACA,OACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,SACA,QACA,SACA,QACA,SACA,SACA,QACA,SACA,WACA,QACA,OACA,YACA,UACA,YACA,UACA,SACA,OACA,OACA,UACA,OACA,SACA,SACA,QACA,WACA,WACA,UACA,WACA,YACA,OACA,SACA,WACA,WACA,SACA,YACA,WACA,UACA,SACA,WACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,UACA,WACA,SACA,SACA,UACA,YACA,UACA,UACA,QACA,SACA,WACA,QACA,UACA,OACA,WACA,YACA,UACA,QACA,SACA,MACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,YACA,UACA,SACA,WACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,SACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,UACA,SACA,YACA,YACA,YACA,SACA,UACA,YACA,UACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,UACA,SACA,UACA,UACA,YACA,UACA,UACA,WACA,SACA,YACA,WACA,QACA,SACA,YACA,UACA,UACA,SACA,QACA,WACA,QACA,QACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,YACA,WACA,WACA,YACA,QACA,UACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,QACA,QACA,YACA,SACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,UACA,YACA,WACA,SACA,YACA,YACA,WACA,WACA,QACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,QACA,YACA,QACA,UACA,MACA,UACA,SACA,YACA,SACA,SACA,MACA,OACA,YACA,OACA,UACA,QACA,YACA,OACA,SACA,SACA,QACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,SACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,QACA,UACA,WACA,SACA,SACA,UACA,SACA,SACA,WACA,YACA,OACA,QACA,YACA,WACA,UACA,WACA,WACA,YACA,SACA,YACA,UACA,WACA,UACA,SACA,QACA,UACA,OACA,SACA,WACA,UACA,YACA,SACA,QACA,WACA,QACA,WACA,QACA,UACA,YACA,YACA,UACA,UACA,QACA,UACA,UACA,SACA,YACA,YACA,WACA,UACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,QACA,QACA,QACA,UACA,YACA,QACA,OACA,SACA,YACA,WACA,YACA,QACA,QACA,OACA,SACA,SACA,OACA,SACA,QACA,SACA,WACA,YACA,WACA,YACA,WACA,QACA,SACA,SACA,OACA,OACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,UACA,SACA,OACA,SACA,QACA,SACA,WACA,OACA,SACA,QACA,YACA,SACA,SACA,SACA,UACA,SACA,UACA,UACA,UACA,QACA,OACA,SACA,SACA,OACA,UACA,SACA,QACA,SACA,SACA,UACA,YACA,WACA,QACA,YACA,WACA,WACA,UACA,WACA,OACA,YACA,WACA,UACA,YACA,YACA,YACA,WACA,SACA,WACA,WACA,WACA,UACA,YACA,SACA,QACA,UACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,SACA,SACA,YACA,SACA,SACA,SACA,SACA,YACA,YACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,UACA,WACA,WACA,WACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,YACA,UACA,UACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,UACA,SACA,WACA,YACA,SACA,SACA,UACA,UACA,SACA,SACA,SACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,UACA,WACA,WACA,QACA,QACA,UACA,UACA,YACA,WACA,WACA,WACA,UACA,QACA,UACA,YACA,UACA,SACA,SACA,SACA,WACA,SACA,YACA,OACA,SACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,QACA,UACA,YACA,SACA,UACA,SACA,YACA,UACA,UACA,UACA,WACA,SACA,WACA,YACA,YACA,WACA,YACA,YACA,UACA,UACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,WACA,UACA,SACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,UACA,SACA,UACA,QACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,YACA,OACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,UACA,WACA,SACA,SACA,WACA,YACA,YACA,SACA,WACA,YACA,SACA,YACA,YACA,UACA,UACA,UACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,SACA,UACA,UACA,WACA,QACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,SACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,UACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,UACA,UACA,WACA,SACA,OACA,SACA,UACA,OACA,UACA,QACA,QACA,UACA,SACA,OACA,OACA,QACA,UACA,OACA,UACA,WACA,WACA,UACA,SACA,WACA,UACA,OACA,SACA,OACA,UACA,UACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,UACA,QACA,UACA,OACA,QACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,QACA,QACA,QACA,OACA,OACA,SACA,SACA,OACA,SACA,UACA,UACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,UACA,QACA,SACA,QACA,SACA,SACA,UACA,SACA,UACA,OACA,SACA,SACA,MACA,SACA,OACA,SACA,WACA,UACA,QACA,YACA,UACA,SACA,UACA,QACA,OACA,SACA,UACA,QACA,OACA,OACA,OACA,MACA,UACA,WACA,YACA,SACA,YACA,SACA,YACA,UACA,WACA,QACA,UACA,SACA,YACA,YACA,SACA,WACA,UACA,OACA,OACA,UACA,QACA,OACA,QACA,OACA,QACA,SACA,WACA,SACA,SACA,QACA,SACA,QACA,OACA,WACA,SACA,UACA,YACA,YACA,OACA,SACA,WACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,UACA,SACA,WACA,UACA,UACA,YACA,UACA,YACA,YACA,WACA,QACA,WACA,YACA,OACA,QACA,UACA,YACA,QACA,UACA,YACA,UACA,OACA,YACA,QACA,UACA,WACA,QACA,YACA,YACA,UACA,WACA,WACA,YACA,QACA,QACA,SACA,UACA,QACA,UACA,SACA,QACA,YACA,MACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,WACA,OACA,UACA,UACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,QACA,UACA,YACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,QACA,QACA,WACA,QACA,QACA,UACA,QACA,SACA,YACA,YACA,SACA,YACA,SACA,UACA,QACA,WACA,SACA,YACA,UACA,WACA,WACA,SACA,WACA,WACA,WACA,YACA,YACA,QACA,UACA,UACA,SACA,WACA,SACA,WACA,YACA,SACA,SACA,UACA,YACA,WACA,WACA,UACA,UACA,WACA,QACA,QACA,WACA,YACA,SACA,UACA,WACA,YACA,YACA,SACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,QACA,SACA,WACA,WACA,WACA,SACA,WACA,UACA,UACA,UACA,SACA,WACA,YACA,YACA,WACA,OACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,UACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,WACA,QACA,YACA,SACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,UACA,WACA,QACA,UACA,UACA,SACA,WACA,UACA,UACA,SACA,WACA,QACA,YACA,YACA,UACA,UACA,WACA,SACA,QACA,SACA,UACA,YACA,UACA,SACA,QACA,QACA,WACA,UACA,YACA,UACA,QACA,QACA,UACA,UACA,QACA,UACA,WACA,QACA,SACA,QACA,UACA,QACA,YACA,UACA,UACA,UACA,YACA,QACA,SACA,OACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,SACA,SACA,UACA,WACA,YACA,SACA,UACA,SACA,UACA,QACA,UACA,YACA,UACA,QACA,OACA,QACA,YACA,QACA,QACA,WACA,UACA,WACA,WACA,QACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,SACA,QACA,QACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,QACA,UACA,YACA,YACA,WACA,QACA,SACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,SACA,SACA,UACA,WACA,YACA,SACA,QACA,SACA,WACA,UACA,UACA,YACA,OACA,QACA,OACA,MACA,UACA,WACA,UACA,SACA,SACA,SACA,OACA,UACA,WACA,WACA,SACA,SACA,UACA,OACA,YACA,QACA,OACA,OACA,SACA,YACA,SACA,YACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,UACA,MACA,QACA,SACA,SACA,SACA,UACA,WACA,YACA,UACA,UACA,QACA,UACA,WACA,YACA,UACA,UACA,OACA,SACA,SACA,WACA,SACA,UACA,YACA,WACA,WACA,UACA,SACA,SACA,SACA,OACA,QACA,QACA,QACA,SACA,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,SACA,YACA,UACA,WACA,WACA,QACA,UACA,WACA,WACA,UACA,QACA,YACA,UACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,OACA,UACA,QACA,WACA,YACA,UACA,WACA,QACA,UACA,OACA,OACA,QACA,QACA,QACA,SACA,QACA,YACA,SACA,SACA,UACA,QACA,SACA,YACA,UACA,WACA,YACA,WACA,WACA,QACA,WACA,YACA,SACA,OACA,OACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,OACA,YACA,UACA,SACA,OACA,OACA,QACA,QACA,MACA,QACA,UACA,YACA,UACA,WACA,UACA,QACA,WACA,QACA,YACA,QACA,QACA,QACA,UACA,QACA,OACA,SACA,YACA,YACA,UACA,QACA,UACA,SACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,QACA,UACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,SACA,QACA,UACA,UACA,QACA,QACA,WACA,YACA,YACA,UACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,QACA,OACA,QACA,UACA,SACA,WACA,QACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,YACA,SACA,QACA,YACA,UACA,WACA,YACA,UACA,WACA,QACA,OACA,SACA,YACA,SACA,SACA,QACA,SACA,QACA,QACA,UACA,SACA,UACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,YACA,UACA,YACA,WACA,YACA,UACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,UACA,QACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,UACA,UACA,WACA,SACA,UACA,SACA,QACA,SACA,SACA,SACA,QACA,QACA,QACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,QACA,WACA,WACA,SACA,SACA,SACA,YACA,UACA,YACA,YACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,QACA,SACA,WACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,QACA,WACA,UACA,YACA,UACA,WACA,SACA,WACA,UACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,QACA,YACA,WACA,WACA,YACA,QACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,OACA,SACA,UACA,OACA,SACA,UACA,YACA,YACA,WACA,YACA,UACA,OACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,QACA,YACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,SACA,WACA,SACA,UACA,YACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,UACA,QACA,QACA,SACA,QACA,QACA,YACA,YACA,WACA,UACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,QACA,QACA,QACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,SACA,UACA,SACA,WACA,SACA,SACA,SACA,SACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,WACA,YACA,SACA,YACA,UACA,WACA,QACA,SACA,QACA,UACA,UACA,UACA,WACA,SACA,QACA,UACA,UACA,SACA,QACA,UACA,WACA,SACA,UACA,YACA,QACA,QACA,UACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,YACA,UACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,YACA,YACA,YACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,UACA,WACA,SACA,WACA,WACA,UACA,SACA,SACA,YACA,UACA,YACA,OACA,UACA,SACA,SACA,OACA,WACA,YACA,UACA,SACA,YACA,WACA,QACA,UACA,QACA,WACA,WACA,WACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,WACA,YACA,SACA,YACA,YACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,SACA,WACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,SACA,UACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,YACA,WACA,SACA,WACA,UACA,YACA,WACA,QACA,UACA,UACA,WACA,YACA,YACA,OACA,YACA,UACA,YACA,OACA,WACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,QACA,QACA,SACA,SACA,UACA,UACA,QACA,SACA,QACA,QACA,QACA,WACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,QACA,SACA,UACA,UACA,QACA,WACA,SACA,SACA,YACA,UACA,YACA,UACA,SACA,WACA,QACA,OACA,UACA,WACA,UACA,UACA,WACA,UACA,YACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,QACA,SACA,WACA,QACA,SACA,OACA,SACA,UACA,UACA,UACA,WACA,UACA,WACA,WACA,UACA,UACA,OACA,YACA,SACA,SACA,UACA,QACA,SACA,SACA,WACA,OACA,SACA,QACA,YACA,UACA,QACA,WACA,SACA,WACA,SACA,QACA,SACA,QACA,OACA,OACA,UACA,YACA,OACA,QACA,QACA,WACA,WACA,UACA,UACA,YACA,QACA,SACA,WACA,UACA,UACA,YACA,WACA,WACA,QACA,UACA,QACA,QACA,SACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,WACA,SACA,YACA,SACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,WACA,WACA,OACA,YACA,UACA,QACA,QACA,QACA,SACA,WACA,UACA,OACA,QACA,UACA,UACA,YACA,YACA,WACA,UACA,OACA,SACA,OACA,OACA,QACA,SACA,UACA,YACA,UACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,OACA,UACA,OACA,SACA,SACA,SACA,UACA,YACA,SACA,SACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,UACA,SACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,WACA,WACA,OACA,YACA,WACA,YACA,UACA,QACA,SACA,OACA,UACA,UACA,YACA,SACA,SACA,QACA,WACA,SACA,QACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,WACA,WACA,UACA,YACA,SACA,WACA,WACA,UACA,QACA,SACA,YACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,YACA,SACA,WACA,QACA,SACA,QACA,QACA,UACA,QACA,SACA,YACA,UACA,WACA,WACA,YACA,QACA,MACA,QACA,WACA,UACA,UACA,UACA,MACA,UACA,QACA,SACA,WACA,QACA,SACA,UACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,SACA,OACA,QACA,OACA,MACA,QACA,QACA,QACA,WACA,SACA,YACA,SACA,QACA,QACA,UACA,YACA,OACA,WACA,QACA,QACA,QACA,YACA,UACA,UACA,WACA,SACA,SACA,UACA,SACA,QACA,OACA,QACA,WACA,YACA,QACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,UACA,YACA,WACA,SACA,SACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,UACA,WACA,WACA,YACA,UACA,YACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,YACA,UACA,YACA,WACA,QACA,YACA,UACA,YACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,SACA,YACA,UACA,YACA,WACA,UACA,WACA,UACA,SACA,WACA,SACA,YACA,UACA,WACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,YACA,YACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,QACA,YACA,YACA,YACA,YACA,YACA,QACA,WACA,YACA,SACA,WACA,OACA,YACA,WACA,WACA,UACA,SACA,YACA,YACA,UACA,UACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,UACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,SACA,YACA,WACA,UACA,WACA,UACA,YACA,YACA,SACA,SACA,YACA,YACA,YACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,WACA,WACA,SACA,SACA,WACA,UACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,SACA,WACA,YACA,SACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,UACA,UACA,YACA,WACA,UACA,WACA,WACA,SACA,QACA,QACA,UACA,WACA,WACA,YACA,SACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,UACA,WACA,UACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,YACA,UACA,QACA,YACA,SACA,WACA,YACA,SACA,UACA,YACA,YACA,YACA,SACA,YACA,WACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,WACA,YACA,SACA,UACA,UACA,WACA,SACA,SACA,SACA,WACA,YACA,SACA,OACA,QACA,UACA,WACA,UACA,SACA,SACA,UACA,SACA,UACA,WACA,UACA,UACA,WACA,WACA,UACA,SACA,UACA,SACA,WACA,SACA,SACA,UACA,QACA,SACA,WACA,UACA,SACA,SACA,YACA,UACA,SACA,QACA,UACA,OACA,YACA,OACA,QACA,QACA,UACA,UACA,UACA,SACA,SACA,QACA,UACA,SACA,SACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,QACA,SACA,SACA,YACA,QACA,UACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,OACA,QACA,SACA,YACA,SACA,WACA,SACA,WACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,QACA,QACA,YACA,WACA,UACA,UACA,SACA,QACA,UACA,SACA,YACA,WACA,UACA,OACA,SACA,OACA,UACA,OACA,WACA,YACA,SACA,QACA,OACA,WACA,UACA,QACA,WACA,SACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,UACA,WACA,QACA,OACA,YACA,UACA,WACA,UACA,UACA,SACA,WACA,UACA,QACA,QACA,WACA,WACA,UACA,WACA,YACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,QACA,UACA,OACA,WACA,SACA,UACA,UACA,QACA,SACA,UACA,QACA,QACA,SACA,YACA,MACA,QACA,SACA,QACA,QACA,QACA,SACA,QACA,OACA,SACA,OACA,UACA,SACA,SACA,QACA,OACA,UACA,SACA,UACA,SACA,WACA,YACA,YACA,WACA,YACA,UACA,SACA,SACA,YACA,UACA,UACA,WACA,YACA,UACA,OACA,UACA,QACA,QACA,WACA,SACA,OACA,WACA,SACA,OACA,QACA,QACA,WACA,QACA,YACA,SACA,QACA,WACA,UACA,QACA,WACA,UACA,WACA,SACA,MACA,OACA,SACA,QACA,SACA,QACA,QACA,YACA,UACA,OACA,OACA,YACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,SACA,YACA,UACA,SACA,YACA,OACA,OACA,QACA,UACA,OACA,OACA,UACA,SACA,WACA,SACA,OACA,QACA,WACA,SACA,OACA,SACA,OACA,OACA,WACA,QACA,UACA,SACA,SACA,WACA,SACA,MACA,OACA,YACA,YACA,YACA,YACA,YACA,UACA,OACA,OACA,SACA,OACA,QACA,OACA,OACA,UACA,UACA,YACA,QACA,YACA,YACA,QACA,QACA,QACA,MACA,UACA,QACA,SACA,WACA,UACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,UACA,UACA,YACA,UACA,WACA,UACA,YACA,UACA,OACA,QACA,QACA,MACA,UACA,UACA,OACA,OACA,OACA,WACA,WACA,SACA,WACA,QACA,UACA,OACA,MACA,YACA,UACA,QACA,MACA,SACA,QACA,QACA,OACA,SACA,SACA,OACA,QACA,MACA,UACA,QACA,MACA,WACA,OACA,YACA,QACA,YACA,UACA,UACA,QACA,OACA,MACA,SACA,SACA,OACA,SACA,YACA,YACA,UACA,QCjmPK,MAAMC,GAIXjpC,YAAYozB,EAAkB8V,GAC5B9oC,KAAKgzB,SAAWA,EAChBhzB,KAAK8oC,KAAOA,CACd,E,2SCKF,MAAMC,GAA2C,CAC/CtmC,OAAQ,GACRumC,WAAW,EACXC,QAAQ,EACRC,UAAW,EACXC,WAAW,EACXC,aAAc,EACdC,WAAW,EACXC,aAAc,EACdC,SAAS,EACTC,WAAY,EACZxlC,KAAM,WACNylC,SAAU,EACVC,cAAe,IACfjB,YAAY,EACZC,eAAe,GAKV,MAAMiB,GACX/pC,YACUua,EACAsf,EACA9d,GAFA,KAAAxB,cAAAA,EACA,KAAAsf,cAAAA,EACA,KAAA9d,aAAAA,CACP,CAEGiuB,iBAAiB9nC,G,0CAErB,MAAM+nC,EAAI/jC,OAAOC,OAAO,CAAC,EAAGgjC,GAAgBjnC,GAE5C,GAAe,eAAX+nC,EAAE7lC,KACJ,OAAOhE,KAAK8pC,mBAAmBhoC,GAIjC9B,KAAK+pC,uBAAuBF,GAAG,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AGhC,8CAKF,oCACF,iC,0BAVI,6DAEA,qCAIE,oE,2CAiDd,kBACE,sCACE,8CAIE,2DAAS,QAAAL,SAAQ,IAIjB,0CACE,4CACE,8CACA,8CAIF,mCACA,4CAAM,U,iBAAyB,QACjC,iCACF,+BACF,6BACF,0B,qCAfM,+CAK2C,mCAGrC,oCAGE,wC,2CAhZhB,mBACE,kBACA,mDAGA,mDAGA,kBACA,mDAYA,kBACA,sCACE,wCACE,0CACE,8CAAkB,U,iBAAmB,QACrC,8CAOF,+BACF,6BACA,wCACE,U,iBACF,QACF,2BACA,mBACA,8CAwBA,mBACA,8CAqBA,mBACA,8CAsBA,mBACA,sCACE,uCACE,U,iBACF,QACA,wCACE,uBACA,0CACE,8CAAwB,U,iBAA4B,QACpD,8CACF,+BACF,6BACF,2BACA,mBACA,sCACE,oCACE,6CAGE,iGAGA,iDACA,iDACA,U,iBACF,QACF,6BACF,2BACA,qCACE,qBACA,wCACE,0CACE,6DA+BA,mDAYF,+BACA,0CACE,U,iBACA,oCAYF,+BACF,6BAEA,uBACA,wCACE,0CACE,4DAgCA,sDAkBF,gCACA,4CACE,W,kBACA,qCAYF,gCACF,8BACA,sBACA,0CACE,4CACE,8CACE,kDAAgC,W,kBAAiC,QACjE,kDAQF,kCACF,gCACA,4CACE,W,kBACF,QACF,8BACA,sBACA,kDAaA,sBACA,0CACE,4CACE,8CACE,gDACE,2DACA,2DACA,oDASF,oCACA,uDAgBF,kCACF,gCACA,4CACE,W,kBACF,QACF,8BACA,sBACA,0CACE,4CACE,8CACE,kDAAmB,W,kBAAoB,QACvC,qDAOF,kCACF,gCACA,4CACE,W,kBACF,QACF,8BACA,sBACA,0CACE,4CACE,8CACE,kDAAuB,W,kBAAwB,QAC/C,kDACF,kCACF,gCACF,8BACA,sBACA,0CACE,4CACE,8CACE,kDAAyB,W,kBAA8B,QACvD,kDACF,kCACF,gCACF,8BACF,4BACA,oBACA,gDAuBF,yB,yBAnZmE,qCAGvC,0DASvB,yFAWqB,qCAMhB,yCAKJ,oEAIc,mCAyBA,kFAsBA,gDAyBd,6DAK0B,6CAYx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AkD,CAACypD,EAAkBxmB,IACpEjjC,EAAiB4C,KAAK,SAAU,CAAE6mD,QAASA,EAASxmB,OAAQA,IAChEmzH,KAAM,CAAC3kJ,KAET,CACE1L,QAASwyC,GACTvyC,SAAU,MAEZ,CACED,QAAS2yC,GACT1yC,UAAU,GAEZ,CACED,QAASqgC,GACTwtD,SAAU,GACVwiE,KAAM,CAAC35C,KAET,CACE12G,QAASspC,GACTukD,SAAU,GACVwiE,KAAM,CAACjwH,GAAkCvhB,KAE3C,CACE7e,QAASyL,GACToiF,SAAU,GACVwiE,KAAM,CACJ9lJ,GACAsU,GACAqT,GACAmO,GACA3yB,GACAhC,GACA+B,GACA9B,GACAmC,GACAlC,GACAknC,GACAjwC,GACA2zG,GACArzF,GACAa,GACAjX,GACAwzB,KAGJ,CACEvgC,QAASy2G,GACT5oB,SAAU,GACVwiE,KAAM,CAACvxI,KAET,CACE9e,QAASqkJ,GACTx2D,SAAU,GACVwiE,KAAM,CAACxxI,GAAuB43F,KAEhC,CACEz2G,QAASuhE,GACT6uF,WAAY,CACV3lJ,EACA6lE,EACAvxD,EACAhc,EACAumD,EACAr9C,EACAsP,EACAomI,EACAjhI,IAEA,IAAI,GACFjW,EACA6lE,EACAvxD,EACAhc,EACAumD,EACAr9C,EACAsP,EACAomI,EACAjhI,GAEJ2vI,KAAM,CACJ9lJ,GACAulE,GACAjxD,GACAhc,GACAomD,GACAr9C,GACA4qG,GACA6tC,GACA72I,KAGJ,CACExN,QAASwhE,GACTqsB,SAAU,GACVwiE,KAAM,CACJ9lJ,GACA1H,GACA0+D,GACA31D,KAGJ,CACE5L,QAASyhE,GACT76C,YAAa46C,IAEf,CACExhE,QAASw+E,GACTqP,SAAU8+D,GACV0D,KAAM,CAAC7uF,GAA0B3iD,KAEnC,CACE7e,QC7TC,QD8TD6tF,SEzTC,MACL39F,YACU6uB,EACAoL,EACApR,EACAw3I,GAHA,KAAAxxI,WAAAA,EACA,KAAAoL,wBAAAA,EACA,KAAApR,WAAAA,EACA,KAAAw3I,eAAAA,CACP,CAEGC,cAAch4G,G,0CAClB,IACE,MAAMi4G,QAA4BngK,KAAK65B,wBAAwB+uB,aAAaV,SACtEloD,KAAKyuB,WAAWliB,KAAK,SAAU,YAAa4zJ,GAAqB,GAAM,GAC7EngK,KAAKigK,eAAe3oG,Q,CACpB,MAAOzpD,GAEP,MADA7N,KAAKyoB,WAAWG,MAAM/a,GAChBA,C,CAEV,G,GFySIkyJ,KAAM,CACJxxI,GACA7R,GACAS,GACAs3F,KAGJ,CACE/kG,QAAS8kG,GACTjX,SGtUC,MACL39F,YAAoB+J,EAA4C8e,GAA5C,KAAA9e,iBAAAA,EAA4C,KAAA8e,WAAAA,CAAyB,CAEnF6uC,S,0CACJ,IACEt3D,KAAK2J,iBAAiB4C,KAAK,S,CAC3B,MAAOsB,GAEP,MADA7N,KAAKyoB,WAAWG,MAAM/a,GAChBA,C,CAEV,G,GH6TIkyJ,KAAM,CAAC3kJ,GAA6B+B,KAEtC,CACEzN,QAAS+kG,GACTn+E,YAAak+E,IAEf,CACE9kG,QI/UC,MAAP,cACE,KAAAqgI,cAAgB,IAAI77G,GAAA,CAGtB,GJ4UMqpE,SAAU,GACVwiE,KAAM,CAACxxI,GAAuBjT,KAEhC,CAAE5L,QAASyN,GAAY2iJ,WAAY,IAAM,IAAIx2C,IAAkB,IAC/D,CACE55G,QAAS0hE,GACTmsB,SAAU,GACVwiE,KAAM,CAAC9lJ,GAA0B1H,GAAwB+I,KAE3D,CACE5L,QAAS8N,GACT+/E,SAAU,GACVwiE,KAAM,CAACzkJ,KAET,CACE5L,QAASgxE,GACT6c,SAAU,GACVwiE,KAAM,CAACjwH,GAAkC3yB,GAAY7B,KAEvD,CAAE5L,QAASkyB,GAAyB27D,SAAU,GAAcwiE,KAAM,CAACzkJ,KACnE,CACE5L,QAASuK,GACTsjF,SAAU,GACVwiE,KAAM,CACJjwH,GACAo2E,GACA9oG,GACAD,GACA7B,GACAy0B,GACAoF,KAGJ,CACEzlC,QAASmjB,GACT0qE,SAAUzqE,GACVitI,KAAM,IAER,CACErwJ,QAASq4B,GACTw1D,SAAU5zD,GACVo2H,KAAM,CAAC9lJ,GAA0ByZ,GAA0BpY,KAE7D,CACE5L,QAASq5C,GACTw0C,SAAUtxC,GACV8zG,KAAM,CAAC9lJ,GAA0BqB,GAAyBiT,KAE5D,CACE7e,QAAS6e,GACTgvE,SAAU,GACVwiE,KAAM,CACJn+H,GACAxkB,GACAI,GACAuyB,GACAkS,KAGJ,CACEvyC,QAAS+jD,GACT8pC,SAAU,GACVwiE,KAAM,CACJ9lJ,GACA1H,GACAu9B,GACAx0B,KAGJ,CACE5L,QAASikD,GACT4pC,SAAU,GACVwiE,KAAM,CAACxxI,GAAuB43F,GAA8B1yD,KAE9D,CACE/jD,QAASolC,GACTyoD,SAAU,GACVwiE,KAAM,CACJxxI,GACAixD,GACAtO,GACAD,GACAh3D,GACAm3D,GACAh2D,GACAsY,GACA+/B,GACAt2C,GACA9B,GACAC,GACAkmF,GACAtT,GACA3e,GACA5b,GACA1R,KAGJ,CAAEvyC,QAAS03C,GAA+Bm2C,SAAU,IACpD,CACE7tF,QAAS8vE,GACT+d,SAAU,GACVwiE,KAAM,CAACzkJ,KAET,CACE5L,QAAS8jB,GACT+pE,SAAU,GACVwiE,KAAM,CACJ9lJ,GACA2nB,GACAlO,GACApY,GACAoB,KAGJ,CACEhN,QAAS,GACT6tF,SAAU,GACVwiE,KAAM,CACJ9uF,GACAC,GACAE,GACAn3D,GACAmD,GACAhC,GACAu9C,GACAr9C,GACAH,GACAqY,GACA0uB,GACAD,KAGJ,CACEvyC,QAAS6jB,GACT+C,YAAa,IAEf,CACE5mB,QAAS4L,GACTiiF,SAAU,GACVwiE,KAAM,CACJ35C,GACAtkE,GACAD,GACA1kC,GACA4kC,GACAC,KAGJ,CACEtyC,QAASktD,GACT2gC,SAAUjzB,GACVy1F,KAAM,CACJ7uF,GACAD,GACA1iD,GACAtU,GACA61B,GACAx0B,KAGJ,CACE5L,QAASipD,GACT4kC,SAAU,GACVwiE,KAAM,CAAC5iJ,GAAY5K,KAErB,CACE7C,QAAS4xF,GACT/D,SAAU,GACVwiE,KAAM,CACJjrH,GACA/E,GACAxhB,GACA/Q,GACAykC,GACA9kC,GACA7B,GACAH,GACAC,KAGJ,CACE1L,QAASogC,GACTytD,SAAUqtC,GACVm1B,KAAM,CAACn+G,KAET,CACElyC,QAASw2G,GACT45C,WAwMN,SACE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EAAOqkH,SClBzC,SACLrkH,EACAqkH,GAEA,OAAOF,GACLnkH,EACA,qBACAqkH,GACA,IAAW,mCACT,WAAI,SACIwD,GAAkB7nH,EAAOqkH,SACzB2C,GAAoBhnH,EAAOqkH,SAC3BS,GAAkB9kH,EAAOqkH,G,KAGvC,CDIcwI,CAA0B7sH,EAAOqkH,G,KAG/C,C,2SEnCe,MAAMyI,GAArB,cACE,KAAAC,OAAuB,GACvB,KAAAC,WAAuC,CAAC,EACxC,KAAAzoB,SAAgB,CAAC,EACjB,KAAA0oB,WAAkB,IAIpB,ECvBO,MAAMC,IACK,GAAAC,mBAA+B,CAE7C,WACA,YACA,QACA,gBACA,SACA,iBACA,SACA,UACA,cACA,WAEA,eACA,gBACA,gBACA,iBACA,aACA,eAGc,GAAAC,eAA2B,CACzC,OACA,MACA,MACA,WACA,UACA,UACA,YACA,iBAGc,GAAAC,wBAAoC,CAClD,kBACA,UACA,eACA,UAGc,GAAAC,sBAAkC,CAChD,QACA,WACA,SACA,OACA,SACA,QACA,QACA,UAIG,MAAMC,IACK,GAAAC,eAA2B,CACzC,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,uBAAmC,IAC9CF,GAA4BC,eAC/B,eAGc,GAAAE,qBAAiC,CAC/C,UACA,YACA,kBACA,aACA,OACA,OAGc,GAAAC,0BAAsC,CACpD,UACA,YACA,kBACA,aACA,UAGc,GAAAC,qBAAiC,CAC/C,YACA,SACA,cACA,WACA,SACA,KACA,QACA,UACA,cACA,eACA,QACA,eACA,YACA,UAGc,GAAAC,0BAAsC,CACpD,YACA,SACA,cACA,WACA,QACA,UACA,eACA,YACA,UAGc,GAAAC,qBAAiC,CAC/C,SACA,WACA,gBACA,kBACA,QACA,UACA,cACA,cACA,WACA,aACA,SACA,QACA,UACA,QACA,UACA,kBACA,0BACA,mBAGc,GAAAC,0BAAsC,CACpD,QACA,UACA,QACA,UACA,kBACA,2BAGc,GAAAC,sBAAkC,CAChD,YACA,eACA,WACA,aACA,QACA,UACA,SACA,cACA,YACA,wBACA,mBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,eACA,YACA,eACA,YACA,oBACA,iBACA,oBACA,iBACA,gBACA,kBACA,aACA,eACA,0BACA,wBACA,qBACA,UACA,cACA,cACA,eACA,UAGc,GAAAC,qBAAiC,CAC/C,WACA,cACA,UACA,YACA,QACA,UACA,SACA,cACA,YACA,uBACA,kBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,UACA,YACA,gBACA,cACA,cACA,YACA,cACA,YACA,mBACA,iBACA,mBACA,iBACA,cACA,gBACA,iBACA,mBACA,yBACA,uBACA,cACA,qBACA,uBACA,gBACA,gBACA,UAGc,GAAAC,cAA0B,CACxC,MACA,MACA,OACA,SACA,SACA,WACA,WACA,MACA,MACA,OACA,MACA,OACA,UACA,YACA,gBACA,gBACA,SACA,aACA,oBACA,MACA,OAGc,GAAAC,oBAAgC,CAC9C,UACA,YACA,aACA,WACA,WAKc,GAAAC,UAAY,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAC3C,GAAAC,cAAgB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAC/C,GAAAC,aAAe,CAAC,OAAQ,OAAQ,OAAQ,KAAM,OAAQ,QAGjE,MAAMC,IACK,GAAAC,mBAA+B,CAC7C,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,mBAA+B,CAAC,OAAQ,YAAa,aAErD,GAAAC,wBAAoC,CAAC,YAAa,aAElD,GAAAC,gBAA4B,CAC1C,mBACA,SACA,QAEA,UAGc,GAAAC,oBAAgC,CAE9C,SACA,aACA,aACA,UAEA,WAGc,GAAAC,qBAAiC,CAC/C,SACA,cACA,kBACA,iBACA,WACA,YAGc,GAAAC,mBAA+B,CAE7C,SACA,YACA,SACA,UACA,cACA,WACA,SAEA,WACA,gBAGc,GAAAC,gBAA4B,CAAC,SAAU,iBAEvC,GAAAC,kBAA8B,CAC5C,UACA,iBACA,OACA,SACA,eACA,eACA,YACA,YAEA,UACA,WAGc,GAAAC,uBAAmC,CACjD,eACA,eACA,YACA,aAGc,GAAAC,mBAA+B,CAC7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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///webpack/runtime/create fake namespace object","webpack:///../../libs/common/src/enums/client-type.enum.ts","webpack:///../../libs/common/src/enums/device-type.enum.ts","webpack:///../../libs/common/src/enums/encrypted-export-type.enum.ts","webpack:///../../libs/common/src/enums/encryption-type.enum.ts","webpack:///../../libs/common/src/enums/event-system-user.enum.ts","webpack:///../../libs/common/src/enums/event-type.enum.ts","webpack:///../../libs/common/src/enums/field-type.enum.ts","webpack:///../../libs/common/src/enums/file-upload-type.enum.ts","webpack:///../../libs/common/src/enums/hash-purpose.enum.ts","webpack:///../../libs/common/src/enums/html-storage-location.enum.ts","webpack:///../../libs/common/src/enums/http-status-code.enum.ts","webpack:///../../libs/common/src/enums/kdf-type.enum.ts","webpack:///../../libs/common/src/auth/models/domain/kdf-config.ts","webpack:///../../libs/common/src/enums/key-suffix-options.enum.ts","webpack:///../../libs/common/src/enums/linked-id-type.enum.ts","webpack:///../../libs/common/src/enums/log-level-type.enum.ts","webpack:///../../libs/common/src/enums/native-messaging-version.enum.ts","webpack:///../../libs/common/src/enums/notification-type.enum.ts","webpack:///../../libs/common/src/enums/product-type.enum.ts","webpack:///../../libs/common/src/enums/provider-type.enum.ts","webpack:///../../libs/common/src/enums/secure-note-type.enum.ts","webpack:///../../libs/common/src/enums/storage-location.enum.ts","webpack:///../../libs/common/src/enums/theme-type.enum.ts","webpack:///../../libs/common/src/enums/uri-match-type.enum.ts","webpack:///./src/platform/browser/browser-api.ts","webpack:///./src/browser/safariApp.ts","webpack:///./src/platform/services/browser-platform-utils.service.ts","webpack:///../../libs/angular/src/components/toastr.component.ts","webpack:///../../libs/angular/src/pipes/credit-card-number.pipe.ts","webpack:///../../libs/angular/src/pipes/search.pipe.ts","webpack:///../../libs/angular/src/pipes/user-name.pipe.ts","webpack:///../../libs/common/src/admin-console/enums/organization-api-key-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-connection-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-user-status-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-user-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/policy-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/provider-user-status-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/provider-user-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/scim-provider-type.enum.ts","webpack:///../../libs/common/src/platform/abstractions/translation.service.ts","webpack:///../../libs/common/src/platform/abstractions/i18n.service.ts","webpack:///../../libs/angular/src/pipes/user-type.pipe.ts","webpack:///../../libs/common/src/platform/misc/utils.ts","webpack:///../../libs/common/src/platform/abstractions/crypto.service.ts","webpack:///../../libs/angular/src/platform/pipes/fingerprint.pipe.ts","webpack:///../../libs/angular/src/platform/pipes/i18n.pipe.ts","webpack:///../../libs/angular/src/jslib.module.ts","webpack:///../../libs/common/src/auth/enums/authentication-status.ts","webpack:///../../libs/common/src/auth/models/domain/force-reset-password-reason.ts","webpack:///../../libs/common/src/auth/abstractions/auth.service.ts","webpack:///../../libs/common/src/platform/abstractions/messaging.service.ts","webpack:///../../libs/common/src/auth/abstractions/key-connector.service.ts","webpack:///../../libs/common/src/platform/abstractions/state.service.ts","webpack:///../../libs/angular/src/auth/guards/auth.guard.ts","webpack:///../../libs/common/src/auth/abstractions/device-trust-crypto.service.abstraction.ts","webpack:///../../libs/common/src/auth/abstractions/user-verification/user-verification.service.abstraction.ts","webpack:///../../libs/angular/src/auth/guards/redirect.guard.ts","webpack:///../../libs/angular/src/auth/guards/unauth.guard.ts","webpack:///../../libs/common/src/platform/abstractions/config/config.service.abstraction.ts","webpack:///../../libs/common/src/platform/abstractions/log.service.ts","webpack:///../../libs/common/src/platform/abstractions/platform-utils.service.ts","webpack:///../../libs/common/src/enums/feature-flag.enum.ts","webpack:///../../libs/common/src/platform/abstractions/environment.service.ts","webpack:///../../libs/angular/src/components/modal/modal.ref.ts","webpack:///../../libs/angular/src/components/modal/dynamic-modal.component.ts","webpack:///../../libs/angular/src/components/modal/modal-injector.ts","webpack:///../../libs/angular/src/services/modal.service.ts","webpack:///../../libs/angular/src/components/environment.component.ts","webpack:///../../libs/common/src/auth/models/domain/environment-urls.ts","webpack:///../../libs/common/src/platform/services/environment.service.ts","webpack:///../../libs/common/src/platform/misc/flags.ts","webpack:///./src/platform/flags.ts","webpack:///./src/platform/services/browser-environment.service.ts","webpack:///../../libs/angular/src/directives/box-row.directive.ts","webpack:///../../libs/common/src/platform/models/domain/enc-string.ts","webpack:///../../libs/common/src/platform/models/domain/domain-base.ts","webpack:///../../libs/common/src/admin-console/models/domain/master-password-policy-options.ts","webpack:///../../libs/angular/src/components/callout.component.html","webpack:///../../libs/angular/src/components/callout.component.ts","webpack:///../../libs/angular/src/directives/input-verbatim.directive.ts","webpack:///../../libs/angular/src/directives/stop-click.directive.ts","webpack:///./src/auth/popup/environment.component.html","webpack:///./src/auth/popup/environment.component.ts","webpack:///../../libs/common/src/auth/models/request/password-hint.request.ts","webpack:///../../libs/common/src/abstractions/api.service.ts","webpack:///../../libs/common/src/auth/abstractions/login.service.ts","webpack:///../../libs/angular/src/auth/components/hint.component.ts","webpack:///../../libs/common/src/platform/abstractions/validation.service.ts","webpack:///../../libs/angular/src/directives/api-action.directive.ts","webpack:///../../libs/angular/src/directives/autofocus.directive.ts","webpack:///./src/auth/popup/hint.component.ts","webpack:///./src/auth/popup/hint.component.html","webpack:///../../libs/angular/src/auth/components/environment-selector.component.html","webpack:///../../libs/angular/src/auth/components/environment-selector.component.ts","webpack:///./src/auth/popup/home.component.ts","webpack:///./src/auth/popup/home.component.html","webpack:///../../libs/common/src/enums/vault-timeout-action.enum.ts","webpack:///../../libs/common/src/auth/models/request/secret-verification.request.ts","webpack:///../../libs/common/src/tools/password-strength/password-strength.service.abstraction.ts","webpack:///../../libs/common/src/tools/password-strength/password-strength.service.ts","webpack:///../../libs/common/src/abstractions/vault-timeout/vault-timeout.service.ts","webpack:///../../libs/common/src/abstractions/vault-timeout/vault-timeout-settings.service.ts","webpack:///../../libs/common/src/admin-console/abstractions/policy/policy-api.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/abstractions/policy/policy.service.abstraction.ts","webpack:///../../libs/components/src/shared/button-like.abstraction.ts","webpack:///../../libs/components/src/utils/function-to-observable.ts","webpack:///../../libs/components/src/async-actions/bit-submit.directive.ts","webpack:///../../libs/components/src/async-actions/bit-action.directive.ts","webpack:///../../libs/components/src/async-actions/form-button.directive.ts","webpack:///../../libs/components/src/button/button.component.ts","webpack:///../../libs/components/src/button/button.component.html","webpack:///../../libs/components/src/dialog/animations.ts","webpack:///../../libs/components/src/dialog/directives/dialog-title-container.directive.ts","webpack:///../../libs/components/src/dialog/simple-dialog/simple-dialog.component.html","webpack:///../../libs/components/src/dialog/simple-dialog/simple-dialog.component.ts","webpack:///../../libs/components/src/dialog/simple-dialog/simple-configurable-dialog/simple-configurable-dialog.component.html","webpack:///../../libs/components/src/dialog/simple-dialog/simple-configurable-dialog/simple-configurable-dialog.component.ts","webpack:///../../libs/components/src/dialog/dialog.service.ts","webpack:///../../libs/angular/src/auth/components/lock.component.ts","webpack:///./src/models/biometricErrors.ts","webpack:///../../libs/angular/src/directives/a11y-title.directive.ts","webpack:///./src/popup/services/popup-utils.service.ts","webpack:///./src/popup/components/private-mode-warning.component.html","webpack:///./src/popup/components/private-mode-warning.component.ts","webpack:///./src/auth/popup/lock.component.html","webpack:///./src/auth/popup/lock.component.ts","webpack:///../../libs/common/src/models/request/keys.request.ts","webpack:///../../libs/common/src/abstractions/devices/devices.service.abstraction.ts","webpack:///../../libs/common/src/auth/abstractions/token.service.ts","webpack:///../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/organization-user/organization-user.service.ts","webpack:///../../libs/common/src/auth/abstractions/password-reset-enrollment.service.abstraction.ts","webpack:///../../libs/angular/src/auth/components/base-login-decryption-options.component.ts","webpack:///../../libs/common/src/auth/enums/auth-request-type.ts","webpack:///../../libs/common/src/auth/enums/authentication-type.ts","webpack:///./src/auth/popup/login-decryption-options/login-decryption-options.component.html","webpack:///./src/auth/popup/login-decryption-options/login-decryption-options.component.ts","webpack:///../../libs/common/src/auth/models/domain/admin-auth-req-storable.ts","webpack:///../../libs/common/src/auth/models/domain/log-in-credentials.ts","webpack:///../../libs/common/src/auth/models/request/passwordless-create-auth.request.ts","webpack:///../../libs/common/src/models/response/base.response.ts","webpack:///../../libs/common/src/models/response/error.response.ts","webpack:///../../libs/common/src/tools/generator/password/password-generation.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/models/domain/password-generator-policy-options.ts","webpack:///../../libs/common/src/platform/misc/wordlist.ts","webpack:///../../libs/common/src/tools/generator/password/generated-password-history.ts","webpack:///../../libs/common/src/tools/generator/password/password-generation.service.ts","webpack:///../../libs/common/src/misc/iframe_component.ts","webpack:///../../libs/common/src/auth/captcha-iframe.ts","webpack:///../../libs/angular/src/auth/components/captcha-protected.component.ts","webpack:///../../libs/common/src/platform/abstractions/crypto-function.service.ts","webpack:///../../libs/common/src/platform/abstractions/app-id.service.ts","webpack:///../../libs/common/src/abstractions/anonymousHub.service.ts","webpack:///../../libs/common/src/auth/abstractions/auth-request-crypto.service.abstraction.ts","webpack:///../../libs/angular/src/auth/components/login-with-device.component.ts","webpack:///../../libs/common/src/vault/abstractions/sync/sync.service.abstraction.ts","webpack:///./src/auth/popup/login-with-device.component.html","webpack:///./src/auth/popup/login-with-device.component.ts","webpack:///../../libs/common/src/auth/abstractions/devices-api.service.abstraction.ts","webpack:///../../libs/angular/src/platform/abstractions/form-validation-errors.service.ts","webpack:///../../libs/angular/src/auth/components/login.component.ts","webpack:///./src/auth/popup/login.component.html","webpack:///./src/auth/popup/login.component.ts","webpack:///../../libs/common/src/models/request/register.request.ts","webpack:///../../libs/angular/src/validators/inputsFieldMatch.validator.ts","webpack:///../../libs/common/src/abstractions/audit.service.ts","webpack:///../../libs/angular/src/components/register.component.ts","webpack:///../../libs/angular/src/shared/components/password-strength/password-strength.component.html","webpack:///../../libs/angular/src/shared/components/password-strength/password-strength.component.ts","webpack:///./src/auth/popup/register.component.html","webpack:///./src/auth/popup/register.component.ts","webpack:///../../libs/angular/src/auth/components/remove-password.component.ts","webpack:///./src/auth/popup/remove-password.component.html","webpack:///./src/auth/popup/remove-password.component.ts","webpack:///../../libs/common/src/abstractions/organization-user/requests/organization-user-reset-password-enrollment.request.ts","webpack:///../../libs/common/src/auth/models/request/set-password.request.ts","webpack:///../../libs/angular/src/auth/components/change-password.component.ts","webpack:///../../libs/angular/src/components/set-password.component.ts","webpack:///./src/auth/popup/set-password.component.html","webpack:///./src/auth/popup/set-password.component.ts","webpack:///../../libs/angular/src/auth/components/sso.component.ts","webpack:///../../libs/angular/src/services/injection-tokens.ts","webpack:///./src/auth/popup/sso.component.ts","webpack:///../../libs/common/src/auth/abstractions/two-factor.service.ts","webpack:///../../libs/angular/src/auth/components/two-factor-options.component.ts","webpack:///./src/auth/popup/two-factor-options.component.html","webpack:///./src/auth/popup/two-factor-options.component.ts","webpack:///../../libs/common/src/auth/enums/two-factor-provider-type.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/token-two-factor.request.ts","webpack:///../../libs/common/src/auth/models/request/two-factor-email.request.ts","webpack:///../../libs/common/src/auth/services/two-factor.service.ts","webpack:///../../libs/common/src/auth/webauthn-iframe.ts","webpack:///../../libs/angular/src/auth/components/two-factor.component.ts","webpack:///../../libs/common/src/platform/abstractions/broadcaster.service.ts","webpack:///./src/auth/popup/two-factor.component.html","webpack:///./src/auth/popup/two-factor.component.ts","webpack:///../../libs/common/src/auth/enums/verification-type.ts","webpack:///../../libs/common/src/auth/models/request/password.request.ts","webpack:///../../libs/common/src/abstractions/organization-user/requests/organization-user-reset-password.request.ts","webpack:///../../libs/common/src/auth/models/request/update-temp-password.request.ts","webpack:///../../libs/angular/src/auth/components/update-temp-password.component.ts","webpack:///./src/auth/popup/update-temp-password.component.html","webpack:///./src/auth/popup/update-temp-password.component.ts","webpack:///../../libs/common/src/tools/generator/username/username-generation.service.abstraction.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/anon-addy-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/duck-duck-go-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/fastmail-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/firefox-relay-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/forwarder-options.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/simple-login-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/forward-email-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/username-generation.service.ts","webpack:///../../libs/angular/src/tools/generator/components/generator.component.ts","webpack:///../../libs/angular/src/directives/copy-text.directive.ts","webpack:///./src/popup/components/pop-out.component.html","webpack:///./src/popup/components/pop-out.component.ts","webpack:///../../libs/angular/src/pipes/color-password.pipe.ts","webpack:///./src/tools/popup/generator/generator.component.html","webpack:///./src/tools/popup/generator/generator.component.ts","webpack:///../../libs/common/src/tools/send/enums/send-type.ts","webpack:///../../libs/angular/src/tools/generator/components/password-generator-history.component.ts","webpack:///./src/tools/popup/generator/password-generator-history.component.html","webpack:///./src/tools/popup/generator/password-generator-history.component.ts","webpack:///../../libs/common/src/tools/send/models/view/send-file.view.ts","webpack:///../../libs/common/src/tools/send/models/view/send-text.view.ts","webpack:///../../libs/common/src/platform/models/domain/symmetric-crypto-key.ts","webpack:///../../libs/common/src/tools/send/models/view/send.view.ts","webpack:///../../libs/common/src/tools/send/services/send.service.abstraction.ts","webpack:///../../libs/common/src/tools/send/services/send-api.service.abstraction.ts","webpack:///../../libs/angular/src/tools/send/add-edit.component.ts","webpack:///./src/platform/services/abstractions/browser-state.service.ts","webpack:///./src/tools/popup/send/send-add-edit.component.html","webpack:///./src/tools/popup/send/send-add-edit.component.ts","webpack:///../../libs/common/src/abstractions/search.service.ts","webpack:///../../libs/angular/src/tools/send/send.component.ts","webpack:///./src/models/browserComponentState.ts","webpack:///./src/models/browserSendComponentState.ts","webpack:///../../libs/angular/src/directives/stop-prop.directive.ts","webpack:///./src/tools/popup/send/components/send-list.component.html","webpack:///./src/tools/popup/send/components/send-list.component.ts","webpack:///./src/tools/popup/send/send-groupings.component.html","webpack:///./src/tools/popup/send/send-groupings.component.ts","webpack:///./src/tools/popup/send/send-type.component.html","webpack:///./src/tools/popup/send/send-type.component.ts","webpack:///../../libs/exporter/src/vault-export/services/vault-export.service.abstraction.ts","webpack:///../../libs/common/src/vault/models/data/card.data.ts","webpack:///../../libs/common/src/misc/linkedFieldOption.decorator.ts","webpack:///../../libs/common/src/vault/models/view/item.view.ts","webpack:///../../libs/common/src/vault/enums/cipher-reprompt-type.ts","webpack:///../../libs/common/src/vault/enums/cipher-type.ts","webpack:///../../libs/common/src/platform/services/cryptography/initializer-key.ts","webpack:///../../libs/common/src/vault/models/view/card.view.ts","webpack:///../../libs/common/src/vault/models/domain/card.ts","webpack:///../../libs/common/src/models/export/card.export.ts","webpack:///../../libs/common/src/vault/models/data/attachment.data.ts","webpack:///../../libs/common/src/vault/models/data/field.data.ts","webpack:///../../libs/common/src/vault/models/data/identity.data.ts","webpack:///../../libs/common/src/vault/models/data/login-uri.data.ts","webpack:///../../libs/common/src/vault/models/data/login.data.ts","webpack:///../../libs/common/src/vault/models/data/password-history.data.ts","webpack:///../../libs/common/src/vault/models/data/secure-note.data.ts","webpack:///../../libs/common/src/vault/models/data/cipher.data.ts","webpack:///../../libs/common/src/vault/models/view/attachment.view.ts","webpack:///../../libs/common/src/vault/models/view/field.view.ts","webpack:///../../libs/common/src/vault/models/view/identity.view.ts","webpack:///../../libs/common/src/vault/models/view/login-uri.view.ts","webpack:///../../libs/common/src/vault/models/view/login.view.ts","webpack:///../../libs/common/src/vault/models/view/password-history.view.ts","webpack:///../../libs/common/src/vault/models/view/secure-note.view.ts","webpack:///../../libs/common/src/vault/models/view/cipher.view.ts","webpack:///../../libs/common/src/vault/models/domain/attachment.ts","webpack:///../../libs/common/src/vault/models/domain/field.ts","webpack:///../../libs/common/src/vault/models/domain/identity.ts","webpack:///../../libs/common/src/vault/models/domain/login-uri.ts","webpack:///../../libs/common/src/vault/models/domain/login.ts","webpack:///../../libs/common/src/vault/models/domain/password.ts","webpack:///../../libs/common/src/vault/models/domain/secure-note.ts","webpack:///../../libs/common/src/vault/models/domain/cipher.ts","webpack:///../../libs/common/src/models/export/field.export.ts","webpack:///../../libs/common/src/models/export/identity.export.ts","webpack:///../../libs/common/src/models/export/login-uri.export.ts","webpack:///../../libs/common/src/models/export/login.export.ts","webpack:///../../libs/common/src/models/export/password-history.export.ts","webpack:///../../libs/common/src/models/export/secure-note.export.ts","webpack:///../../libs/common/src/models/export/cipher.export.ts","webpack:///../../libs/common/src/models/export/cipher-with-ids.export.ts","webpack:///../../libs/common/src/vault/models/view/collection.view.ts","webpack:///../../libs/common/src/vault/models/domain/collection.ts","webpack:///../../libs/common/src/models/export/collection.export.ts","webpack:///../../libs/common/src/models/export/collection-with-id.export.ts","webpack:///../../libs/common/src/vault/models/view/folder.view.ts","webpack:///../../libs/common/src/vault/models/domain/folder.ts","webpack:///../../libs/common/src/models/export/folder.export.ts","webpack:///../../libs/common/src/models/export/folder-with-id.export.ts","webpack:///../../libs/common/src/vault/models/data/collection.data.ts","webpack:///../../libs/exporter/src/export-helper.ts","webpack:///../../libs/exporter/src/vault-export/services/vault-export.service.ts","webpack:///../../libs/common/src/abstractions/event/event-collection.service.ts","webpack:///../../libs/common/src/platform/abstractions/file-download/file-download.service.ts","webpack:///../../libs/angular/src/tools/export/components/export.component.ts","webpack:///../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts","webpack:///../../libs/angular/src/tools/export/components/export-scope-callout.component.html","webpack:///../../libs/angular/src/tools/export/components/export-scope-callout.component.ts","webpack:///../../libs/angular/src/auth/components/user-verification.component.ts","webpack:///./src/popup/components/user-verification.component.html","webpack:///./src/popup/components/user-verification.component.ts","webpack:///./src/tools/popup/settings/export.component.html","webpack:///./src/tools/popup/settings/export.component.ts","webpack:///../../libs/common/src/vault/abstractions/cipher.service.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder.service.abstraction.ts","webpack:///../../libs/common/src/vault/abstractions/collection.service.ts","webpack:///../../libs/common/src/vault/abstractions/password-reprompt.service.ts","webpack:///../../libs/angular/src/vault/components/add-edit.component.ts","webpack:///../../libs/angular/src/vault/components/add-edit-custom-fields.component.ts","webpack:///../../libs/angular/src/directives/true-false-value.directive.ts","webpack:///./src/vault/popup/components/vault/add-edit-custom-fields.component.html","webpack:///./src/vault/popup/components/vault/add-edit-custom-fields.component.ts","webpack:///./src/vault/popup/components/vault/add-edit.component.html","webpack:///./src/vault/popup/components/vault/add-edit.component.ts","webpack:///../../libs/common/src/platform/models/domain/enc-array-buffer.ts","webpack:///../../libs/angular/src/vault/components/attachments.component.ts","webpack:///./src/vault/popup/components/vault/attachments.component.html","webpack:///./src/vault/popup/components/vault/attachments.component.ts","webpack:///../../libs/angular/src/admin-console/components/collections.component.ts","webpack:///./src/vault/popup/components/vault/collections.component.html","webpack:///./src/vault/popup/components/vault/collections.component.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/vault-filter.model.ts","webpack:///../../libs/common/src/models/domain/tree-node.ts","webpack:///../../libs/common/src/misc/serviceUtils.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/dynamic-tree-node.model.ts","webpack:///../../libs/angular/src/vault/vault-filter/services/vault-filter.service.ts","webpack:///./src/vault/services/vault-filter.service.ts","webpack:///./src/autofill/services/abstractions/autofill.service.ts","webpack:///../../libs/common/src/abstractions/settings.service.ts","webpack:///../../libs/angular/src/directives/fallback-src.directive.ts","webpack:///../../libs/angular/src/vault/components/icon.component.html","webpack:///../../libs/angular/src/vault/components/icon.component.ts","webpack:///../../libs/common/src/abstractions/totp.service.ts","webpack:///./src/vault/popup/components/action-buttons.component.html","webpack:///./src/vault/popup/components/action-buttons.component.ts","webpack:///./src/vault/popup/components/cipher-row.component.html","webpack:///./src/vault/popup/components/cipher-row.component.ts","webpack:///./src/vault/popup/components/vault/vault-select.component.html","webpack:///./src/vault/popup/components/vault/vault-select.component.ts","webpack:///./src/vault/popup/components/vault/current-tab.component.html","webpack:///./src/vault/popup/components/vault/current-tab.component.ts","webpack:///../../libs/angular/src/vault/components/password-history.component.ts","webpack:///./src/vault/popup/components/vault/password-history.component.html","webpack:///./src/vault/popup/components/vault/password-history.component.ts","webpack:///../../libs/common/src/types/checkable.ts","webpack:///../../libs/angular/src/components/share.component.ts","webpack:///./src/vault/popup/components/vault/share.component.html","webpack:///./src/vault/popup/components/vault/share.component.ts","webpack:///./src/models/browserGroupingsComponentState.ts","webpack:///./src/vault/popup/components/vault/vault-filter.component.html","webpack:///./src/vault/popup/components/vault/vault-filter.component.ts","webpack:///../../libs/angular/src/vault/components/vault-items.component.ts","webpack:///./src/vault/popup/components/vault/vault-items.component.html","webpack:///./src/vault/popup/components/vault/vault-items.component.ts","webpack:///../../libs/angular/src/vault/components/view.component.ts","webpack:///../../libs/angular/src/vault/components/view-custom-fields.component.ts","webpack:///../../libs/angular/src/pipes/color-password-count.pipe.ts","webpack:///./src/vault/popup/components/vault/view-custom-fields.component.html","webpack:///./src/vault/popup/components/vault/view-custom-fields.component.ts","webpack:///./src/vault/popup/components/vault/view.component.html","webpack:///./src/vault/popup/components/vault/view.component.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder-api.service.abstraction.ts","webpack:///../../libs/angular/src/vault/components/folder-add-edit.component.ts","webpack:///./src/vault/popup/settings/folder-add-edit.component.html","webpack:///./src/vault/popup/settings/folder-add-edit.component.ts","webpack:///./src/popup/services/debounceNavigationService.ts","webpack:///./src/popup/settings/autofill.component.html","webpack:///./src/popup/settings/autofill.component.ts","webpack:///./src/popup/settings/excluded-domains.component.html","webpack:///./src/popup/settings/excluded-domains.component.ts","webpack:///./src/popup/settings/folders.component.html","webpack:///./src/popup/settings/folders.component.ts","webpack:///./src/popup/settings/help-and-feedback.component.ts","webpack:///./src/popup/settings/help-and-feedback.component.html","webpack:///../../libs/angular/src/services/theming/theming.service.abstraction.ts","webpack:///./src/popup/settings/options.component.html","webpack:///./src/popup/settings/options.component.ts","webpack:///../../libs/angular/src/vault/components/premium.component.ts","webpack:///./src/popup/settings/premium.component.html","webpack:///./src/popup/settings/premium.component.ts","webpack:///../../libs/components/src/button/button.module.ts","webpack:///../../libs/components/src/shared/shared.module.ts","webpack:///../../libs/components/src/async-actions/async-actions.module.ts","webpack:///../../libs/components/src/icon-button/icon-button.module.ts","webpack:///../../libs/components/src/dialog/dialog.module.ts","webpack:///../../libs/components/src/dialog/directives/dialog-close.directive.ts","webpack:///../../libs/auth/src/components/fingerprint-dialog.component.ts","webpack:///../../libs/auth/src/components/fingerprint-dialog.component.html","webpack:///../../libs/angular/src/components/set-pin.component.ts","webpack:///./src/popup/components/set-pin.component.html","webpack:///./src/popup/components/set-pin.component.ts","webpack:///./src/popup/settings/about.component.html","webpack:///./src/popup/settings/about.component.ts","webpack:///./src/popup/settings/await-desktop-dialog.component.ts","webpack:///./src/popup/settings/await-desktop-dialog.component.html","webpack:///../../libs/angular/src/components/settings/vault-timeout-input.component.ts","webpack:///./src/popup/settings/vault-timeout-input.component.html","webpack:///./src/popup/settings/vault-timeout-input.component.ts","webpack:///./src/popup/settings/settings.component.html","webpack:///./src/popup/settings/settings.component.ts","webpack:///./src/popup/settings/sync.component.ts","webpack:///./src/popup/tabs.component.html","webpack:///./src/popup/settings/sync.component.html","webpack:///./src/popup/tabs.component.ts","webpack:///./src/popup/app-routing.module.ts","webpack:///../../libs/angular/src/auth/guards/lock.guard.ts","webpack:///../../libs/angular/src/auth/guards/tde-decryption-required.guard.ts","webpack:///../../libs/angular/src/guard/feature-flag.guard.ts","webpack:///./src/popup/app-routing.animations.ts","webpack:///./src/popup/components/desktop-sync-verification-dialog.component.ts","webpack:///./src/popup/components/desktop-sync-verification-dialog.component.html","webpack:///../../libs/common/src/auth/enums/sso.ts","webpack:///./src/popup/app.component.ts","webpack:///../../libs/common/src/abstractions/event/event-upload.service.ts","webpack:///../../libs/common/src/abstractions/notifications.service.ts","webpack:///../../libs/common/src/abstractions/organization-domain/org-domain.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/abstractions/provider.service.ts","webpack:///../../libs/common/src/auth/models/response/api-key.response.ts","webpack:///../../libs/common/src/auth/models/api/sso-config.api.ts","webpack:///../../libs/common/src/auth/models/response/organization-sso.response.ts","webpack:///../../libs/common/src/billing/models/response/billing.response.ts","webpack:///../../libs/common/src/billing/models/response/plan.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization.response.ts","webpack:///../../libs/common/src/billing/models/response/subscription.response.ts","webpack:///../../libs/common/src/billing/models/response/organization-subscription.response.ts","webpack:///../../libs/common/src/admin-console/models/api/permissions.api.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-organization.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-provider-organization.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-provider.response.ts","webpack:///../../libs/common/src/models/response/profile.response.ts","webpack:///../../libs/common/src/billing/models/response/payment.response.ts","webpack:///../../libs/common/src/billing/models/response/tax-info.response.ts","webpack:///../../libs/common/src/models/response/list.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-api-key-information.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-auto-enroll-status.response.ts","webpack:///../../libs/common/src/models/response/keys.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-keys.response.ts","webpack:///../../libs/common/src/admin-console/models/domain/organization.ts","webpack:///../../libs/common/src/admin-console/services/organization/organization.service.ts","webpack:///../../libs/common/src/admin-console/models/data/policy.data.ts","webpack:///../../libs/common/src/admin-console/models/response/policy.response.ts","webpack:///../../libs/common/src/admin-console/services/policy/policy-api.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/policy.ts","webpack:///../../libs/common/src/admin-console/models/domain/reset-password-policy-options.ts","webpack:///../../libs/common/src/admin-console/services/policy/policy.service.ts","webpack:///../../libs/common/src/models/domain/provider.ts","webpack:///../../libs/common/src/admin-console/services/provider.service.ts","webpack:///../../libs/common/src/auth/abstractions/account.service.ts","webpack:///../../libs/common/src/auth/abstractions/user-verification/user-verification-api.service.abstraction.ts","webpack:///../../libs/common/src/auth/services/auth-request-crypto.service.implementation.ts","webpack:///../../libs/common/src/models/request/prelogin.request.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/token.request.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/password-token.request.ts","webpack:///../../libs/common/src/auth/models/response/identity-captcha.response.ts","webpack:///../../libs/common/src/auth/models/domain/user-decryption-options/key-connector-user-decryption-option.ts","webpack:///../../libs/common/src/auth/models/domain/user-decryption-options/trusted-device-user-decryption-option.ts","webpack:///../../libs/common/src/platform/models/data/server-config.data.ts","webpack:///../../libs/common/src/platform/models/domain/account.ts","webpack:///../../libs/common/src/auth/models/domain/auth-result.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/device.request.ts","webpack:///../../libs/common/src/auth/models/response/master-password-policy.response.ts","webpack:///../../libs/common/src/auth/models/response/user-decryption-options/key-connector-user-decryption-option.response.ts","webpack:///../../libs/common/src/auth/models/response/user-decryption-options/trusted-device-user-decryption-option.response.ts","webpack:///../../libs/common/src/auth/models/response/user-decryption-options/user-decryption-options.response.ts","webpack:///../../libs/common/src/auth/models/response/identity-token.response.ts","webpack:///../../libs/common/src/auth/models/response/identity-two-factor.response.ts","webpack:///../../libs/common/src/auth/login-strategies/login.strategy.ts","webpack:///../../libs/common/src/auth/login-strategies/password-login.strategy.ts","webpack:///../../libs/common/src/auth/login-strategies/passwordless-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/sso-token.request.ts","webpack:///../../libs/common/src/auth/login-strategies/sso-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/user-api-token.request.ts","webpack:///../../libs/common/src/auth/login-strategies/user-api-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/passwordless-auth.request.ts","webpack:///../../libs/common/src/auth/services/auth.service.ts","webpack:///../../libs/common/src/auth/models/request/update-devices-trust.request.ts","webpack:///../../libs/common/src/auth/services/device-trust-crypto.service.implementation.ts","webpack:///../../libs/common/src/abstractions/devices/responses/device.response.ts","webpack:///../../libs/common/src/services/devices/requests/trusted-device-keys.request.ts","webpack:///../../libs/common/src/auth/models/response/protected-device.response.ts","webpack:///../../libs/common/src/auth/services/devices-api.service.implementation.ts","webpack:///../../libs/common/src/auth/models/request/key-connector-user-key.request.ts","webpack:///../../libs/common/src/auth/models/request/set-key-connector-key.request.ts","webpack:///../../libs/common/src/auth/services/key-connector.service.ts","webpack:///../../libs/common/src/auth/services/login.service.ts","webpack:///../../libs/common/src/auth/services/token.service.ts","webpack:///../../libs/common/src/auth/services/user-verification/user-verification-api.service.ts","webpack:///../../libs/common/src/auth/models/request/verify-otp.request.ts","webpack:///../../libs/common/src/auth/services/user-verification/user-verification.service.ts","webpack:///../../libs/common/src/platform/abstractions/config/config-api.service.abstraction.ts","webpack:///../../libs/common/src/platform/abstractions/encrypt.service.ts","webpack:///../../libs/common/src/platform/abstractions/file-upload/file-upload.service.ts","webpack:///../../libs/common/src/platform/abstractions/storage.service.ts","webpack:///../../libs/common/src/platform/factories/account-factory.ts","webpack:///../../libs/common/src/platform/factories/global-state-factory.ts","webpack:///../../libs/common/src/platform/factories/state-factory.ts","webpack:///../../libs/common/src/models/domain/window-state.ts","webpack:///../../libs/common/src/platform/models/domain/global-state.ts","webpack:///../../libs/common/src/platform/services/app-id.service.ts","webpack:///../../libs/common/src/platform/models/response/server-config.response.ts","webpack:///../../libs/common/src/platform/services/config/config-api.service.ts","webpack:///../../libs/common/src/platform/abstractions/config/server-config.ts","webpack:///../../libs/common/src/platform/services/config/config.service.ts","webpack:///../../libs/common/src/platform/services/console-log.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/encrypted-organization-key.ts","webpack:///../../libs/common/src/platform/misc/sequentialize.ts","webpack:///../../libs/common/src/platform/services/crypto.service.ts","webpack:///../../libs/common/src/platform/models/domain/encrypted-object.ts","webpack:///../../libs/common/src/platform/services/cryptography/encrypt.service.implementation.ts","webpack:///../../libs/common/src/platform/services/cryptography/get-class-initializer.ts","webpack:///../../libs/common/src/platform/services/cryptography/multithread-encrypt.service.implementation.ts","webpack:///../../libs/common/src/platform/services/file-upload/azure-file-upload.service.ts","webpack:///../../libs/common/src/platform/services/file-upload/bitwarden-file-upload.service.ts","webpack:///../../libs/common/src/platform/services/file-upload/file-upload.service.ts","webpack:///../../libs/common/src/admin-console/models/data/provider.data.ts","webpack:///../../libs/common/src/models/data/event.data.ts","webpack:///../../libs/common/src/state-migrations/migration-builder.ts","webpack:///../../libs/common/src/state-migrations/migration-helper.ts","webpack:///../../libs/common/src/state-migrations/migrator.ts","webpack:///../../libs/common/src/state-migrations/migrations/3-fix-premium.ts","webpack:///../../libs/common/src/state-migrations/migrations/4-remove-ever-been-unlocked.ts","webpack:///../../libs/common/src/state-migrations/migrations/5-add-key-type-to-org-keys.ts","webpack:///../../libs/common/src/state-migrations/migrations/6-remove-legacy-etm-key.ts","webpack:///../../libs/common/src/state-migrations/migrations/7-move-biometric-auto-prompt-to-account.ts","webpack:///../../libs/common/src/state-migrations/migrations/8-move-state-version.ts","webpack:///../../libs/common/src/state-migrations/migrations/min-version.ts","webpack:///../../libs/common/src/state-migrations/migrate.ts","webpack:///../../libs/common/src/tools/send/models/data/send-file.data.ts","webpack:///../../libs/common/src/tools/send/models/data/send-text.data.ts","webpack:///../../libs/common/src/tools/send/models/data/send.data.ts","webpack:///../../libs/common/src/vault/models/data/folder.data.ts","webpack:///../../libs/common/src/platform/models/domain/state.ts","webpack:///../../libs/common/src/platform/services/state.service.ts","webpack:///../../libs/common/src/platform/models/domain/decrypt-parameters.ts","webpack:///../../libs/common/src/platform/services/web-crypto-function.service.ts","webpack:///../../libs/common/src/models/request/update-avatar.request.ts","webpack:///../../libs/common/src/services/account/avatar-update.service.ts","webpack:///../../libs/common/src/models/response/notification.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-connection.response.ts","webpack:///../../libs/common/src/models/api/card.api.ts","webpack:///../../libs/common/src/models/api/field.api.ts","webpack:///../../libs/common/src/models/api/identity.api.ts","webpack:///../../libs/common/src/models/api/login-uri.api.ts","webpack:///../../libs/common/src/models/api/login.api.ts","webpack:///../../libs/common/src/models/api/secure-note.api.ts","webpack:///../../libs/common/src/vault/models/response/attachment.response.ts","webpack:///../../libs/common/src/vault/models/response/password-history.response.ts","webpack:///../../libs/common/src/vault/models/response/cipher.response.ts","webpack:///../../libs/common/src/admin-console/models/response/selection-read-only.response.ts","webpack:///../../libs/common/src/vault/models/response/collection.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-export.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-sponsorship-sync-status.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-organization.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user-bulk.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider.response.ts","webpack:///../../libs/common/src/auth/models/response/auth-request.response.ts","webpack:///../../libs/common/src/auth/models/response/device-verification.response.ts","webpack:///../../libs/common/src/auth/models/response/emergency-access.response.ts","webpack:///../../libs/common/src/auth/models/response/key-connector-user-key.response.ts","webpack:///../../libs/common/src/auth/models/response/prelogin.response.ts","webpack:///../../libs/common/src/auth/models/response/register.response.ts","webpack:///../../libs/common/src/auth/models/response/sso-pre-validate.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-authenticator.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-duo.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-email.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-provider.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-recover.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-web-authn.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-yubi-key.response.ts","webpack:///../../libs/common/src/billing/models/response/billing-history.response.ts","webpack:///../../libs/common/src/billing/models/response/billing-payment.response.ts","webpack:///../../libs/common/src/billing/models/response/tax-rate.response.ts","webpack:///../../libs/common/src/models/response/breach-account.response.ts","webpack:///../../libs/common/src/models/response/global-domain.response.ts","webpack:///../../libs/common/src/models/response/domains.response.ts","webpack:///../../libs/common/src/models/response/event.response.ts","webpack:///../../libs/common/src/models/response/user-key.response.ts","webpack:///../../libs/common/src/vault/models/response/attachment-upload-data.response.ts","webpack:///../../libs/common/src/tools/send/models/api/send-file.api.ts","webpack:///../../libs/common/src/tools/send/models/api/send-text.api.ts","webpack:///../../libs/common/src/tools/send/models/response/send.response.ts","webpack:///../../libs/common/src/vault/models/response/folder.response.ts","webpack:///../../libs/common/src/vault/models/response/sync.response.ts","webpack:///../../libs/common/src/services/api.service.ts","webpack:///../../libs/common/src/services/audit.service.ts","webpack:///../../libs/common/src/platform/misc/throttle.ts","webpack:///../../libs/common/src/abstractions/devices/views/device.view.ts","webpack:///../../libs/common/src/services/devices/devices.service.implementation.ts","webpack:///../../libs/common/src/services/event/event-collection.service.ts","webpack:///../../libs/common/src/models/request/event.request.ts","webpack:///../../libs/common/src/services/event/event-upload.service.ts","webpack:///../../libs/common/src/services/notifications.service.ts","webpack:///../../libs/common/src/abstractions/organization-domain/responses/organization-domain-sso-details.response.ts","webpack:///../../libs/common/src/abstractions/organization-domain/responses/organization-domain.response.ts","webpack:///../../libs/common/src/services/organization-domain/requests/organization-domain-sso-details.request.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk.response.ts","webpack:///../../libs/common/src/services/organization-user/requests/organization-user-bulk.request.ts","webpack:///../../libs/common/src/services/search.service.ts","webpack:///../../libs/common/src/services/settings.service.ts","webpack:///../../libs/common/src/services/totp.service.ts","webpack:///../../libs/common/src/services/vault-timeout/vault-timeout-settings.service.ts","webpack:///../../libs/common/src/services/vault-timeout/vault-timeout.service.ts","webpack:///../../libs/common/src/tools/send/models/request/send.request.ts","webpack:///../../libs/common/src/tools/send/models/response/send-access.response.ts","webpack:///../../libs/common/src/tools/send/models/response/send-file-download-data.response.ts","webpack:///../../libs/common/src/tools/send/models/response/send-file-upload-data.response.ts","webpack:///../../libs/common/src/tools/send/services/send-api.service.ts","webpack:///../../libs/common/src/tools/send/models/domain/send-file.ts","webpack:///../../libs/common/src/tools/send/models/domain/send-text.ts","webpack:///../../libs/common/src/tools/send/models/domain/send.ts","webpack:///../../libs/common/src/tools/send/services/send.service.ts","webpack:///../../libs/common/src/vault/abstractions/file-upload/cipher-file-upload.service.ts","webpack:///../../libs/common/src/vault/models/domain/sorted-ciphers-cache.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-delete.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-move.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-restore.request.ts","webpack:///../../libs/common/src/vault/models/request/attachment.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-with-id.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-share.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-collections.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-create.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-partial.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-share.request.ts","webpack:///../../libs/common/src/vault/services/cipher.service.ts","webpack:///../../libs/common/src/vault/services/collection.service.ts","webpack:///../../libs/common/src/vault/services/file-upload/cipher-file-upload.service.ts","webpack:///../../libs/common/src/vault/models/request/folder.request.ts","webpack:///../../libs/common/src/vault/services/folder/folder-api.service.ts","webpack:///../../libs/common/src/vault/services/folder/folder.service.ts","webpack:///../../libs/common/src/vault/services/sync/sync-notifier.service.ts","webpack:///../../libs/common/src/admin-console/models/data/organization.data.ts","webpack:///../../libs/common/src/vault/services/sync/sync.service.ts","webpack:///../../libs/common/src/platform/services/broadcaster.service.ts","webpack:///../../libs/angular/src/platform/services/broadcaster.service.ts","webpack:///../../libs/angular/src/vault/components/password-reprompt.component.ts","webpack:///../../libs/angular/src/vault/services/password-reprompt.service.ts","webpack:///../../libs/angular/src/services/theming/themeBuilder.ts","webpack:///../../libs/angular/src/services/theming/theming.service.ts","webpack:///../../libs/angular/src/services/jslib-services.module.ts","webpack:///../../libs/common/src/auth/abstractions/account-api.service.ts","webpack:///../../libs/common/src/auth/services/account-api.service.ts","webpack:///../../libs/common/src/auth/services/account.service.ts","webpack:///../../libs/common/src/abstractions/account/avatar-update.service.ts","webpack:///../../libs/common/src/services/organization-user/organization-user.service.implementation.ts","webpack:///../../libs/common/src/auth/services/password-reset-enrollment.service.implementation.ts","webpack:///../../libs/angular/src/platform/services/form-validation-errors.service.ts","webpack:///../../libs/common/src/admin-console/services/organization/organization-api.service.ts","webpack:///../../libs/common/src/vault/abstractions/sync/sync-notifier.service.abstraction.ts","webpack:///../../libs/common/src/services/anonymousHub.service.ts","webpack:///../../libs/common/src/platform/services/validation.service.ts","webpack:///../../libs/common/src/services/organization-domain/org-domain.service.ts","webpack:///../../libs/common/src/abstractions/organization-domain/org-domain-api.service.abstraction.ts","webpack:///../../libs/common/src/services/organization-domain/org-domain-api.service.ts","webpack:///../../libs/common/src/platform/services/container.service.ts","webpack:///./src/platform/decorators/session-sync-observable/sync-item-metadata.ts","webpack:///./src/platform/decorators/session-sync-observable/session-syncer.ts","webpack:///./src/platform/decorators/session-sync-observable/browser-session.decorator.ts","webpack:///./src/platform/decorators/session-sync-observable/session-sync.decorator.ts","webpack:///./src/admin-console/services/browser-organization.service.ts","webpack:///./src/admin-console/services/browser-policy.service.ts","webpack:///./src/auth/popup/services/unauth-guard.service.ts","webpack:///../../libs/common/src/platform/services/memory-storage.service.ts","webpack:///../../libs/common/src/platform/services/system.service.ts","webpack:///./src/background/models/notificationQueueMessageType.ts","webpack:///./src/autofill/background/context-menus.background.ts","webpack:///./src/background/models/notificationQueueMessage.ts","webpack:///./src/background/models/addLoginQueueMessage.ts","webpack:///./src/autofill/background/notification.background.ts","webpack:///./src/autofill/background/tabs.background.ts","webpack:///./src/platform/background/service-factories/factory-options.ts","webpack:///./src/models/account.ts","webpack:///./src/platform/services/browser-state.service.ts","webpack:///./src/platform/background/service-factories/log-service.factory.ts","webpack:///./src/platform/services/abstractions/abstract-chrome-storage-api.service.ts","webpack:///./src/platform/services/browser-local-storage.service.ts","webpack:///./src/platform/services/browser-memory-storage.service.ts","webpack:///./src/platform/services/local-backed-session-storage.service.ts","webpack:///./src/platform/background/service-factories/crypto-function-service.factory.ts","webpack:///./src/platform/decorators/dev-flag.decorator.ts","webpack:///./src/platform/background/service-factories/encrypt-service.factory.ts","webpack:///./src/platform/services/key-generation.service.ts","webpack:///./src/platform/background/service-factories/storage-service.factory.ts","webpack:///./src/platform/background/service-factories/key-generation-service.factory.ts","webpack:///./src/platform/background/service-factories/state-service.factory.ts","webpack:///./src/admin-console/background/service-factories/organization-service.factory.ts","webpack:///./src/admin-console/background/service-factories/policy-service.factory.ts","webpack:///./src/auth/background/service-factories/token-service.factory.ts","webpack:///./src/platform/background/service-factories/app-id-service.factory.ts","webpack:///./src/platform/background/service-factories/environment-service.factory.ts","webpack:///./src/platform/services/browser-messaging.service.ts","webpack:///./src/platform/background/service-factories/messaging-service.factory.ts","webpack:///./src/platform/background/service-factories/platform-utils-service.factory.ts","webpack:///./src/platform/background/service-factories/api-service.factory.ts","webpack:///./src/platform/services/browser-crypto.service.ts","webpack:///./src/platform/background/service-factories/crypto-service.factory.ts","webpack:///../../libs/common/src/platform/services/translation.service.ts","webpack:///../../libs/common/src/platform/services/i18n.service.ts","webpack:///./src/platform/services/i18n.service.ts","webpack:///./src/platform/background/service-factories/i18n-service.factory.ts","webpack:///./src/auth/background/service-factories/device-trust-crypto-service.factory.ts","webpack:///./src/background/service-factories/devices-api-service.factory.ts","webpack:///./src/auth/background/service-factories/auth-service.factory.ts","webpack:///./src/auth/background/service-factories/key-connector-service.factory.ts","webpack:///./src/auth/background/service-factories/two-factor-service.factory.ts","webpack:///./src/tools/background/service_factories/password-strength-service.factory.ts","webpack:///./src/auth/background/service-factories/auth-request-crypto-service.factory.ts","webpack:///./src/background/service-factories/cipher-file-upload-service.factory.ts","webpack:///./src/platform/background/service-factories/file-upload-service.factory.ts","webpack:///./src/services/browser-settings.service.ts","webpack:///./src/background/service-factories/settings-service.factory.ts","webpack:///./src/platform/background/service-factories/config-service.factory.ts","webpack:///./src/platform/background/service-factories/config-api.service.factory.ts","webpack:///./src/vault/background/service_factories/cipher-service.factory.ts","webpack:///./src/background/service-factories/search-service.factory.ts","webpack:///./src/autofill/browser/main-context-menu-handler.ts","webpack:///./src/autofill/browser/cipher-context-menu-handler.ts","webpack:///./src/auth/background/service-factories/totp-service.factory.ts","webpack:///./src/auth/background/service-factories/user-verification-service.factory.ts","webpack:///./src/auth/background/service-factories/user-verification-api-service.factory.ts","webpack:///./src/background/service-factories/event-collection-service.factory.ts","webpack:///./src/background/service-factories/event-upload-service.factory.ts","webpack:///./src/autofill/models/autofill-script.ts","webpack:///./src/autofill/services/autofill-constants.ts","webpack:///./src/autofill/services/autofill.service.ts","webpack:///./src/autofill/clipboard/clear-clipboard.ts","webpack:///./src/autofill/clipboard/copy-to-clipboard-command.ts","webpack:///./src/platform/alarms/alarm-state.ts","webpack:///./src/autofill/clipboard/generate-password-to-clipboard-command.ts","webpack:///./src/autofill/commands/autofill-tab-command.ts","webpack:///./src/autofill/browser/context-menu-clicked-handler.ts","webpack:///./src/tools/background/service_factories/password-generation-service.factory.ts","webpack:///./src/autofill/background/service_factories/autofill-service.factory.ts","webpack:///./src/platform/listeners/update-badge.ts","webpack:///./src/platform/popup/browser-popout-window.service.ts","webpack:///./src/platform/services/browser-config.service.ts","webpack:///./src/platform/services/browser-i18n.service.ts","webpack:///./src/platform/services/browser-messaging-private-mode-background.service.ts","webpack:///./src/services/browser-send.service.ts","webpack:///./src/services/vault-timeout/vault-timeout.service.ts","webpack:///./src/vault/services/browser-folder.service.ts","webpack:///./src/background/commands.background.ts","webpack:///./src/background/idle.background.ts","webpack:///./src/background/nativeMessaging.background.ts","webpack:///./src/background/runtime.background.ts","webpack:///./src/background/webRequest.background.ts","webpack:///./src/background/main.background.ts","webpack:///../../libs/common/src/platform/abstractions/file-download/file-download.builder.ts","webpack:///./src/platform/services/browser-file-download.service.ts","webpack:///./src/platform/services/browser-messaging-private-mode-popup.service.ts","webpack:///./src/vault/popup/components/password-reprompt.component.ts","webpack:///./src/vault/popup/components/password-reprompt.component.html","webpack:///./src/vault/popup/services/password-reprompt.service.ts","webpack:///./src/popup/services/init.service.ts","webpack:///./src/popup/services/popup-search.service.ts","webpack:///./src/popup/services/services.module.ts","webpack:///./src/platform/popup/locales.ts","webpack:///./src/popup/app.module.ts","webpack:///./src/popup/main.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","export enum ClientType {\n  Web = \"web\",\n  Browser = \"browser\",\n  Desktop = \"desktop\",\n  Mobile = \"mobile\",\n  Cli = \"cli\",\n  DirectoryConnector = \"connector\",\n}\n","export enum DeviceType {\n  Android = 0,\n  iOS = 1,\n  ChromeExtension = 2,\n  FirefoxExtension = 3,\n  OperaExtension = 4,\n  EdgeExtension = 5,\n  WindowsDesktop = 6,\n  MacOsDesktop = 7,\n  LinuxDesktop = 8,\n  ChromeBrowser = 9,\n  FirefoxBrowser = 10,\n  OperaBrowser = 11,\n  EdgeBrowser = 12,\n  IEBrowser = 13,\n  UnknownBrowser = 14,\n  AndroidAmazon = 15,\n  UWP = 16,\n  SafariBrowser = 17,\n  VivaldiBrowser = 18,\n  VivaldiExtension = 19,\n  SafariExtension = 20,\n  SDK = 21,\n  Server = 22,\n}\n\nexport const MobileDeviceTypes: Set<DeviceType> = new Set([\n  DeviceType.Android,\n  DeviceType.iOS,\n  DeviceType.AndroidAmazon,\n]);\n\nexport const DesktopDeviceTypes: Set<DeviceType> = new Set([\n  DeviceType.WindowsDesktop,\n  DeviceType.MacOsDesktop,\n  DeviceType.LinuxDesktop,\n  DeviceType.UWP,\n]);\n","export enum EncryptedExportType {\n  AccountEncrypted = 0,\n  FileEncrypted = 1,\n}\n","export enum EncryptionType {\n  AesCbc256_B64 = 0,\n  AesCbc128_HmacSha256_B64 = 1,\n  AesCbc256_HmacSha256_B64 = 2,\n  Rsa2048_OaepSha256_B64 = 3,\n  Rsa2048_OaepSha1_B64 = 4,\n  Rsa2048_OaepSha256_HmacSha256_B64 = 5,\n  Rsa2048_OaepSha1_HmacSha256_B64 = 6,\n}\n\n/** The expected number of parts to a serialized EncString of the given encryption type.\n * For example, an EncString of type AesCbc256_B64 will have 2 parts, and an EncString of type\n * AesCbc128_HmacSha256_B64 will have 3 parts.\n *\n * Example of annotated serialized EncStrings:\n * 0.iv|data\n * 1.iv|data|mac\n * 2.iv|data|mac\n * 3.data\n * 4.data\n *\n * @see EncString\n * @see EncryptionType\n * @see EncString.parseEncryptedString\n */\nexport const EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE = {\n  [EncryptionType.AesCbc256_B64]: 2,\n  [EncryptionType.AesCbc128_HmacSha256_B64]: 3,\n  [EncryptionType.AesCbc256_HmacSha256_B64]: 3,\n  [EncryptionType.Rsa2048_OaepSha256_B64]: 1,\n  [EncryptionType.Rsa2048_OaepSha1_B64]: 1,\n  [EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64]: 2,\n  [EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64]: 2,\n};\n","// Note: the enum key is used to describe the EventSystemUser in the UI. Be careful about changing it.\nexport enum EventSystemUser {\n  SCIM = 1,\n  DomainVerification = 2,\n}\n","// Increment by 100 for each new set of events\nexport enum EventType {\n  User_LoggedIn = 1000,\n  User_ChangedPassword = 1001,\n  User_Updated2fa = 1002,\n  User_Disabled2fa = 1003,\n  User_Recovered2fa = 1004,\n  User_FailedLogIn = 1005,\n  User_FailedLogIn2fa = 1006,\n  User_ClientExportedVault = 1007,\n  User_UpdatedTempPassword = 1008,\n  User_MigratedKeyToKeyConnector = 1009,\n  User_RequestedDeviceApproval = 1010,\n\n  Cipher_Created = 1100,\n  Cipher_Updated = 1101,\n  Cipher_Deleted = 1102,\n  Cipher_AttachmentCreated = 1103,\n  Cipher_AttachmentDeleted = 1104,\n  Cipher_Shared = 1105,\n  Cipher_UpdatedCollections = 1106,\n  Cipher_ClientViewed = 1107,\n  Cipher_ClientToggledPasswordVisible = 1108,\n  Cipher_ClientToggledHiddenFieldVisible = 1109,\n  Cipher_ClientToggledCardCodeVisible = 1110,\n  Cipher_ClientCopiedPassword = 1111,\n  Cipher_ClientCopiedHiddenField = 1112,\n  Cipher_ClientCopiedCardCode = 1113,\n  Cipher_ClientAutofilled = 1114,\n  Cipher_SoftDeleted = 1115,\n  Cipher_Restored = 1116,\n  Cipher_ClientToggledCardNumberVisible = 1117,\n\n  Collection_Created = 1300,\n  Collection_Updated = 1301,\n  Collection_Deleted = 1302,\n\n  Group_Created = 1400,\n  Group_Updated = 1401,\n  Group_Deleted = 1402,\n\n  OrganizationUser_Invited = 1500,\n  OrganizationUser_Confirmed = 1501,\n  OrganizationUser_Updated = 1502,\n  OrganizationUser_Removed = 1503,\n  OrganizationUser_UpdatedGroups = 1504,\n  OrganizationUser_UnlinkedSso = 1505,\n  OrganizationUser_ResetPassword_Enroll = 1506,\n  OrganizationUser_ResetPassword_Withdraw = 1507,\n  OrganizationUser_AdminResetPassword = 1508,\n  OrganizationUser_ResetSsoLink = 1509,\n  OrganizationUser_FirstSsoLogin = 1510,\n  OrganizationUser_Revoked = 1511,\n  OrganizationUser_Restored = 1512,\n  OrganizationUser_ApprovedAuthRequest = 1513,\n  OrganizationUser_RejectedAuthRequest = 1514,\n\n  Organization_Updated = 1600,\n  Organization_PurgedVault = 1601,\n  Organization_ClientExportedVault = 1602,\n  Organization_VaultAccessed = 1603,\n  Organization_EnabledSso = 1604,\n  Organization_DisabledSso = 1605,\n  Organization_EnabledKeyConnector = 1606,\n  Organization_DisabledKeyConnector = 1607,\n  Organization_SponsorshipsSynced = 1608,\n\n  Policy_Updated = 1700,\n\n  ProviderUser_Invited = 1800,\n  ProviderUser_Confirmed = 1801,\n  ProviderUser_Updated = 1802,\n  ProviderUser_Removed = 1803,\n\n  ProviderOrganization_Created = 1900,\n  ProviderOrganization_Added = 1901,\n  ProviderOrganization_Removed = 1902,\n  ProviderOrganization_VaultAccessed = 1903,\n\n  OrganizationDomain_Added = 2000,\n  OrganizationDomain_Removed = 2001,\n  OrganizationDomain_Verified = 2002,\n  OrganizationDomain_NotVerified = 2003,\n\n  Secret_Retrieved = 2100,\n}\n","export enum FieldType {\n  Text = 0,\n  Hidden = 1,\n  Boolean = 2,\n  Linked = 3,\n}\n","export enum FileUploadType {\n  Direct = 0,\n  Azure = 1,\n}\n","export enum HashPurpose {\n  ServerAuthorization = 1,\n  LocalAuthorization = 2,\n}\n","export enum HtmlStorageLocation {\n  Local = \"local\",\n  Memory = \"memory\",\n  Session = \"session\",\n}\n","/**\n * Hypertext Transfer Protocol (HTTP) response status codes.\n *\n * @see {@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}\n * src: https://gist.github.com/RWOverdijk/6cef816cfdf5722228e01cc05fd4b094\n */\nexport enum HttpStatusCode {\n  /**\n   * The server has received the request headers and the client should proceed to send the request body\n   * (in the case of a request for which a body needs to be sent; for example, a POST request).\n   * Sending a large request body to a server after a request has been rejected for inappropriate headers would be inefficient.\n   * To have a server check the request's headers, a client must send Expect: 100-continue as a header in its initial request\n   * and receive a 100 Continue status code in response before sending the body. The response 417 Expectation Failed indicates the request should not be continued.\n   */\n  Continue = 100,\n\n  /**\n   * The requester has asked the server to switch protocols and the server has agreed to do so.\n   */\n  SwitchingProtocols = 101,\n\n  /**\n   * A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request.\n   * This code indicates that the server has received and is processing the request, but no response is available yet.\n   * This prevents the client from timing out and assuming the request was lost.\n   */\n  Processing = 102,\n\n  // **********************************************************************************************************\n  // 200s - SUCCESS\n  // **********************************************************************************************************\n\n  /**\n   * Standard response for successful HTTP requests.\n   * The actual response will depend on the request method used.\n   * In a GET request, the response will contain an entity corresponding to the requested resource.\n   * In a POST request, the response will contain an entity describing or containing the result of the action.\n   */\n  Ok = 200,\n\n  /**\n   * The request has been fulfilled, resulting in the creation of a new resource.\n   */\n  Created = 201,\n\n  /**\n   * The request has been accepted for processing, but the processing has not been completed.\n   * The request might or might not be eventually acted upon, and may be disallowed when processing occurs.\n   */\n  Accepted = 202,\n\n  /**\n   * SINCE HTTP/1.1\n   * The server is a transforming proxy that received a 200 OK from its origin,\n   * but is returning a modified version of the origin's response.\n   */\n  NonAuthoritativeInformation = 203,\n\n  /**\n   * The server successfully processed the request and is not returning any content.\n   */\n  NoContent = 204,\n\n  /**\n   * The server successfully processed the request, but is not returning any content.\n   * Unlike a 204 response, this response requires that the requester reset the document view.\n   */\n  ResetContent = 205,\n\n  /**\n   * The server is delivering only part of the resource (byte serving) due to a range header sent by the client.\n   * The range header is used by HTTP clients to enable resuming of interrupted downloads,\n   * or split a download into multiple simultaneous streams.\n   */\n  PartialContent = 206,\n\n  /**\n   * The message body that follows is an XML message and can contain a number of separate response codes,\n   * depending on how many sub-requests were made.\n   */\n  MultiStatus = 207,\n\n  /**\n   * The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response,\n   * and are not being included again.\n   */\n  AlreadyReported = 208,\n\n  /**\n   * The server has fulfilled a request for the resource,\n   * and the response is a representation of the result of one or more instance-manipulations applied to the current instance.\n   */\n  ImUsed = 226,\n\n  // **********************************************************************************************************\n  // 300s - Redirections\n  // **********************************************************************************************************\n\n  /**\n   * Indicates multiple options for the resource from which the client may choose (via agent-driven content negotiation).\n   * For example, this code could be used to present multiple video format options,\n   * to list files with different filename extensions, or to suggest word-sense disambiguation.\n   */\n  MultipleChoices = 300,\n\n  /**\n   * This and all future requests should be directed to the given URI.\n   */\n  MovedPermanently = 301,\n\n  /**\n   * This is an example of industry practice contradicting the standard.\n   * The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect\n   * (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302\n   * with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307\n   * to distinguish between the two behaviours. However, some Web applications and frameworks\n   * use the 302 status code as if it were the 303.\n   */\n  Found = 302,\n\n  /**\n   * SINCE HTTP/1.1\n   * The response to the request can be found under another URI using a GET method.\n   * When received in response to a POST (or PUT/DELETE), the client should presume that\n   * the server has received the data and should issue a redirect with a separate GET message.\n   */\n  SeeOther = 303,\n\n  /**\n   * Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.\n   * In such case, there is no need to retransmit the resource since the client still has a previously-downloaded copy.\n   */\n  NotModified = 304,\n\n  /**\n   * SINCE HTTP/1.1\n   * The requested resource is available only through a proxy, the address for which is provided in the response.\n   * Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons.\n   */\n  UseProxy = 305,\n\n  /**\n   * No longer used. Originally meant \"Subsequent requests should use the specified proxy.\"\n   */\n  SwitchProxy = 306,\n\n  /**\n   * SINCE HTTP/1.1\n   * In this case, the request should be repeated with another URI; however, future requests should still use the original URI.\n   * In contrast to how 302 was historically implemented, the request method is not allowed to be changed when reissuing the original request.\n   * For example, a POST request should be repeated using another POST request.\n   */\n  TemporaryRedirect = 307,\n\n  /**\n   * The request and all future requests should be repeated using another URI.\n   * 307 and 308 parallel the behaviors of 302 and 301, but do not allow the HTTP method to change.\n   * So, for example, submitting a form to a permanently redirected resource may continue smoothly.\n   */\n  PermanentRedirect = 308,\n\n  // **********************************************************************************************************\n  // 400s - Client / User messed up\n  // **********************************************************************************************************\n\n  /**\n   * The server cannot or will not process the request due to an apparent client error\n   * (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing).\n   */\n  BadRequest = 400,\n\n  /**\n   * Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet\n   * been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the\n   * requested resource. See Basic access authentication and Digest access authentication. 401 semantically means\n   * \"unauthenticated\",i.e. the user does not have the necessary credentials.\n   */\n  Unauthorized = 401,\n\n  /**\n   * Reserved for future use. The original intention was that this code might be used as part of some form of digital\n   * cash or micro payment scheme, but that has not happened, and this code is not usually used.\n   * Google Developers API uses this status if a particular developer has exceeded the daily limit on requests.\n   */\n  PaymentRequired = 402,\n\n  /**\n   * The request was valid, but the server is refusing action.\n   * The user might not have the necessary permissions for a resource.\n   */\n  Forbidden = 403,\n\n  /**\n   * The requested resource could not be found but may be available in the future.\n   * Subsequent requests by the client are permissible.\n   */\n  NotFound = 404,\n\n  /**\n   * A request method is not supported for the requested resource;\n   * for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.\n   */\n  MethodNotAllowed = 405,\n\n  /**\n   * The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.\n   */\n  NotAcceptable = 406,\n\n  /**\n   * The client must first authenticate itself with the proxy.\n   */\n  ProxyAuthenticationRequired = 407,\n\n  /**\n   * The server timed out waiting for the request.\n   * According to HTTP specifications:\n   * \"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.\"\n   */\n  RequestTimeout = 408,\n\n  /**\n   * Indicates that the request could not be processed because of conflict in the request,\n   * such as an edit conflict between multiple simultaneous updates.\n   */\n  Conflict = 409,\n\n  /**\n   * Indicates that the resource requested is no longer available and will not be available again.\n   * This should be used when a resource has been intentionally removed and the resource should be purged.\n   * Upon receiving a 410 status code, the client should not request the resource in the future.\n   * Clients such as search engines should remove the resource from their indices.\n   * Most use cases do not require clients and search engines to purge the resource, and a \"404 Not Found\" may be used instead.\n   */\n  Gone = 410,\n\n  /**\n   * The request did not specify the length of its content, which is required by the requested resource.\n   */\n  LengthRequired = 411,\n\n  /**\n   * The server does not meet one of the preconditions that the requester put on the request.\n   */\n  PreconditionFailed = 412,\n\n  /**\n   * The request is larger than the server is willing or able to process. Previously called \"Request Entity Too Large\".\n   */\n  PayloadTooLarge = 413,\n\n  /**\n   * The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request,\n   * in which case it should be converted to a POST request.\n   * Called \"Request-URI Too Long\" previously.\n   */\n  UriTooLong = 414,\n\n  /**\n   * The request entity has a media type which the server or resource does not support.\n   * For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format.\n   */\n  UnsupportedMediaType = 415,\n\n  /**\n   * The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.\n   * For example, if the client asked for a part of the file that lies beyond the end of the file.\n   * Called \"Requested Range Not Satisfiable\" previously.\n   */\n  RangeNotSatisfiable = 416,\n\n  /**\n   * The server cannot meet the requirements of the Expect request-header field.\n   */\n  ExpectationFailed = 417,\n\n  /**\n   * This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol,\n   * and is not expected to be implemented by actual HTTP servers. The RFC specifies this code should be returned by\n   * teapots requested to brew coffee. This HTTP status is used as an Easter egg in some websites, including Google.com.\n   */\n  IAmATeapot = 418,\n\n  /**\n   * The request was directed at a server that is not able to produce a response (for example because a connection reuse).\n   */\n  MisdirectedRequest = 421,\n\n  /**\n   * The request was well-formed but was unable to be followed due to semantic errors.\n   */\n  UnprocessableEntity = 422,\n\n  /**\n   * The resource that is being accessed is locked.\n   */\n  Locked = 423,\n\n  /**\n   * The request failed due to failure of a previous request (e.g., a PROPPATCH).\n   */\n  FailedDependency = 424,\n\n  /**\n   * The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.\n   */\n  UpgradeRequired = 426,\n\n  /**\n   * The origin server requires the request to be conditional.\n   * Intended to prevent \"the 'lost update' problem, where a client\n   * GETs a resource's state, modifies it, and PUTs it back to the server,\n   * when meanwhile a third party has modified the state on the server, leading to a conflict.\"\n   */\n  PreconditionRequired = 428,\n\n  /**\n   * The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.\n   */\n  TooManyRequests = 429,\n\n  /**\n   * The server is unwilling to process the request because either an individual header field,\n   * or all the header fields collectively, are too large.\n   */\n  RequestHeaderFieldsTooLarge = 431,\n\n  /**\n   * A server operator has received a legal demand to deny access to a resource or to a set of resources\n   * that includes the requested resource. The code 451 was chosen as a reference to the novel Fahrenheit 451.\n   */\n  UnavailableForLegalReasons = 451,\n\n  // **********************************************************************************************************\n  // 500s - Server messed up\n  // **********************************************************************************************************\n\n  /**\n   * A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.\n   */\n  InternalServerError = 500,\n\n  /**\n   * The server either does not recognize the request method, or it lacks the ability to fulfill the request.\n   * Usually this implies future availability (e.g., a new feature of a web-service API).\n   */\n  NotImplemented = 501,\n\n  /**\n   * The server was acting as a gateway or proxy and received an invalid response from the upstream server.\n   */\n  BadGateway = 502,\n\n  /**\n   * The server is currently unavailable (because it is overloaded or down for maintenance).\n   * Generally, this is a temporary state.\n   */\n  ServiceUnavailable = 503,\n\n  /**\n   * The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.\n   */\n  GatewayTimeout = 504,\n\n  /**\n   * The server does not support the HTTP protocol version used in the request\n   */\n  HttpVersionNotSupported = 505,\n\n  /**\n   * Transparent content negotiation for the request results in a circular reference.\n   */\n  VariantAlsoNegotiates = 506,\n\n  /**\n   * The server is unable to store the representation needed to complete the request.\n   */\n  InsufficientStorage = 507,\n\n  /**\n   * The server detected an infinite loop while processing the request.\n   */\n  LoopDetected = 508,\n\n  /**\n   * Further extensions to the request are required for the server to fulfill it.\n   */\n  NotExtended = 510,\n\n  /**\n   * The client needs to authenticate to gain network access.\n   * Intended for use by intercepting proxies used to control access to the network (e.g., \"captive portals\" used\n   * to require agreement to Terms of Service before granting full Internet access via a Wi-Fi hotspot).\n   */\n  NetworkAuthenticationRequired = 511,\n}\n","import { KdfConfig } from \"../auth/models/domain/kdf-config\";\n\nexport enum KdfType {\n  PBKDF2_SHA256 = 0,\n  Argon2id = 1,\n}\n\nexport const DEFAULT_ARGON2_MEMORY = 64;\nexport const DEFAULT_ARGON2_PARALLELISM = 4;\nexport const DEFAULT_ARGON2_ITERATIONS = 3;\n\nexport const DEFAULT_KDF_TYPE = KdfType.PBKDF2_SHA256;\nexport const DEFAULT_PBKDF2_ITERATIONS = 600000;\nexport const DEFAULT_KDF_CONFIG = new KdfConfig(DEFAULT_PBKDF2_ITERATIONS);\nexport const SEND_KDF_ITERATIONS = 100000;\n","export class KdfConfig {\n  iterations: number;\n  memory?: number;\n  parallelism?: number;\n\n  constructor(iterations: number, memory?: number, parallelism?: number) {\n    this.iterations = iterations;\n    this.memory = memory;\n    this.parallelism = parallelism;\n  }\n}\n","export enum KeySuffixOptions {\n  Auto = \"auto\",\n  Biometric = \"biometric\",\n  Pin = \"pin\",\n}\n","export type LinkedIdType = LoginLinkedId | CardLinkedId | IdentityLinkedId;\n\n// LoginView\nexport enum LoginLinkedId {\n  Username = 100,\n  Password = 101,\n}\n\n// CardView\nexport enum CardLinkedId {\n  CardholderName = 300,\n  ExpMonth = 301,\n  ExpYear = 302,\n  Code = 303,\n  Brand = 304,\n  Number = 305,\n}\n\n// IdentityView\nexport enum IdentityLinkedId {\n  Title = 400,\n  MiddleName = 401,\n  Address1 = 402,\n  Address2 = 403,\n  Address3 = 404,\n  City = 405,\n  State = 406,\n  PostalCode = 407,\n  Country = 408,\n  Company = 409,\n  Email = 410,\n  Phone = 411,\n  Ssn = 412,\n  Username = 413,\n  PassportNumber = 414,\n  LicenseNumber = 415,\n  FirstName = 416,\n  LastName = 417,\n  FullName = 418,\n}\n","export enum LogLevelType {\n  Debug,\n  Info,\n  Warning,\n  Error,\n}\n","export enum NativeMessagingVersion {\n  One = 1, // Original implementation\n  Latest = One,\n}\n","export enum NotificationType {\n  SyncCipherUpdate = 0,\n  SyncCipherCreate = 1,\n  SyncLoginDelete = 2,\n  SyncFolderDelete = 3,\n  SyncCiphers = 4,\n\n  SyncVault = 5,\n  SyncOrgKeys = 6,\n  SyncFolderCreate = 7,\n  SyncFolderUpdate = 8,\n  SyncCipherDelete = 9,\n  SyncSettings = 10,\n\n  LogOut = 11,\n\n  SyncSendCreate = 12,\n  SyncSendUpdate = 13,\n  SyncSendDelete = 14,\n\n  AuthRequest = 15,\n  AuthRequestResponse = 16,\n}\n","export enum ProductType {\n  Free = 0,\n  Families = 1,\n  Teams = 2,\n  Enterprise = 3,\n}\n","export enum ProviderType {\n  Msp = 0,\n  Reseller = 1,\n}\n","export enum SecureNoteType {\n  Generic = 0,\n}\n","export enum StorageLocation {\n  Both = \"both\",\n  Disk = \"disk\",\n  Memory = \"memory\",\n}\n","export enum ThemeType {\n  System = \"system\",\n  Light = \"light\",\n  Dark = \"dark\",\n  Nord = \"nord\",\n  SolarizedDark = \"solarizedDark\",\n}\n","export enum UriMatchType {\n  Domain = 0,\n  Host = 1,\n  StartsWith = 2,\n  Exact = 3,\n  RegularExpression = 4,\n  Never = 5,\n}\n","import { DeviceType } from \"@bitwarden/common/enums\";\n\nimport { TabMessage } from \"../../types/tab-messages\";\nimport BrowserPlatformUtilsService from \"../services/browser-platform-utils.service\";\n\nexport class BrowserApi {\n  static isWebExtensionsApi: boolean = typeof browser !== \"undefined\";\n  static isSafariApi: boolean =\n    navigator.userAgent.indexOf(\" Safari/\") !== -1 &&\n    navigator.userAgent.indexOf(\" Chrome/\") === -1 &&\n    navigator.userAgent.indexOf(\" Chromium/\") === -1;\n  static isChromeApi: boolean = !BrowserApi.isSafariApi && typeof chrome !== \"undefined\";\n  static isFirefoxOnAndroid: boolean =\n    navigator.userAgent.indexOf(\"Firefox/\") !== -1 && navigator.userAgent.indexOf(\"Android\") !== -1;\n\n  static get manifestVersion() {\n    return chrome.runtime.getManifest().manifest_version;\n  }\n\n  static getWindow(windowId?: number): Promise<chrome.windows.Window> | void {\n    if (!windowId) {\n      return;\n    }\n\n    return new Promise((resolve) =>\n      chrome.windows.get(windowId, { populate: true }, (window) => resolve(window))\n    );\n  }\n\n  static async createWindow(options: chrome.windows.CreateData): Promise<chrome.windows.Window> {\n    return new Promise((resolve) =>\n      chrome.windows.create(options, (window) => {\n        resolve(window);\n      })\n    );\n  }\n\n  static async getTabFromCurrentWindowId(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      windowId: chrome.windows.WINDOW_ID_CURRENT,\n    });\n  }\n\n  static async getTab(tabId: number): Promise<chrome.tabs.Tab> | null {\n    if (!tabId) {\n      return null;\n    }\n\n    if (BrowserApi.manifestVersion === 3) {\n      return await chrome.tabs.get(tabId);\n    }\n\n    return new Promise((resolve) =>\n      chrome.tabs.get(tabId, (tab) => {\n        resolve(tab);\n      })\n    );\n  }\n\n  static async getTabFromCurrentWindow(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      currentWindow: true,\n    });\n  }\n\n  static async getActiveTabs(): Promise<chrome.tabs.Tab[]> {\n    return await BrowserApi.tabsQuery({\n      active: true,\n    });\n  }\n\n  static async tabsQuery(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab[]> {\n    return new Promise((resolve) => {\n      chrome.tabs.query(options, (tabs) => {\n        resolve(tabs);\n      });\n    });\n  }\n\n  static async tabsQueryFirst(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab> | null {\n    const tabs = await BrowserApi.tabsQuery(options);\n    if (tabs.length > 0) {\n      return tabs[0];\n    }\n\n    return null;\n  }\n\n  static tabSendMessageData(\n    tab: chrome.tabs.Tab,\n    command: string,\n    data: any = null\n  ): Promise<void> {\n    const obj: any = {\n      command: command,\n    };\n\n    if (data != null) {\n      obj.data = data;\n    }\n\n    return BrowserApi.tabSendMessage(tab, obj);\n  }\n\n  static async tabSendMessage<T>(\n    tab: chrome.tabs.Tab,\n    obj: T,\n    options: chrome.tabs.MessageSendOptions = null\n  ): Promise<void> {\n    if (!tab || !tab.id) {\n      return;\n    }\n\n    return new Promise<void>((resolve) => {\n      chrome.tabs.sendMessage(tab.id, obj, options, () => {\n        if (chrome.runtime.lastError) {\n          // Some error happened\n        }\n        resolve();\n      });\n    });\n  }\n\n  static sendTabsMessage<T>(\n    tabId: number,\n    message: TabMessage,\n    options?: chrome.tabs.MessageSendOptions,\n    responseCallback?: (response: T) => void\n  ) {\n    chrome.tabs.sendMessage<TabMessage, T>(tabId, message, options, responseCallback);\n  }\n\n  static async removeTab(tabId: number) {\n    await chrome.tabs.remove(tabId);\n  }\n\n  static async getPrivateModeWindows(): Promise<browser.windows.Window[]> {\n    return (await browser.windows.getAll()).filter((win) => win.incognito);\n  }\n\n  static async onWindowCreated(callback: (win: chrome.windows.Window) => any) {\n    return chrome.windows.onCreated.addListener(callback);\n  }\n\n  static getBackgroundPage(): any {\n    return chrome.extension.getBackgroundPage();\n  }\n\n  static isBackgroundPage(window: Window & typeof globalThis): boolean {\n    return window === chrome.extension.getBackgroundPage();\n  }\n\n  static getApplicationVersion(): string {\n    return chrome.runtime.getManifest().version;\n  }\n\n  static async isPopupOpen(): Promise<boolean> {\n    return Promise.resolve(chrome.extension.getViews({ type: \"popup\" }).length > 0);\n  }\n\n  static createNewTab(url: string, active = true): Promise<chrome.tabs.Tab> {\n    return new Promise((resolve) =>\n      chrome.tabs.create({ url: url, active: active }, (tab) => resolve(tab))\n    );\n  }\n\n  static async focusWindow(windowId: number) {\n    await chrome.windows.update(windowId, { focused: true });\n  }\n\n  static async openBitwardenExtensionTab(relativeUrl: string, active = true) {\n    let url = relativeUrl;\n    if (!relativeUrl.includes(\"uilocation=tab\")) {\n      const fullUrl = chrome.extension.getURL(relativeUrl);\n      const parsedUrl = new URL(fullUrl);\n      parsedUrl.searchParams.set(\"uilocation\", \"tab\");\n      url = parsedUrl.toString();\n    }\n\n    const createdTab = await this.createNewTab(url, active);\n    this.focusWindow(createdTab.windowId);\n  }\n\n  static async closeBitwardenExtensionTab() {\n    const tabs = await BrowserApi.tabsQuery({\n      active: true,\n      title: \"Bitwarden\",\n      windowType: \"normal\",\n      currentWindow: true,\n    });\n\n    if (tabs.length === 0) {\n      return;\n    }\n\n    const tabToClose = tabs[tabs.length - 1];\n    BrowserApi.removeTab(tabToClose.id);\n  }\n\n  private static registeredMessageListeners: any[] = [];\n\n  static messageListener(\n    name: string,\n    callback: (message: any, sender: chrome.runtime.MessageSender, response: any) => void\n  ) {\n    chrome.runtime.onMessage.addListener(callback);\n\n    // Keep track of all the events registered in a Safari popup so we can remove\n    // them when the popup gets unloaded, otherwise we cause a memory leak\n    if (BrowserApi.isSafariApi && !BrowserApi.isBackgroundPage(window)) {\n      BrowserApi.registeredMessageListeners.push(callback);\n\n      // The MDN recommend using 'visibilitychange' but that event is fired any time the popup window is obscured as well\n      // 'pagehide' works just like 'unload' but is compatible with the back/forward cache, so we prefer using that one\n      window.onpagehide = () => {\n        for (const callback of BrowserApi.registeredMessageListeners) {\n          chrome.runtime.onMessage.removeListener(callback);\n        }\n      };\n    }\n  }\n\n  static sendMessage(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    return chrome.runtime.sendMessage(message);\n  }\n\n  static async focusTab(tabId: number) {\n    chrome.tabs.update(tabId, { active: true, highlighted: true });\n  }\n\n  static closePopup(win: Window) {\n    if (BrowserApi.isWebExtensionsApi && BrowserApi.isFirefoxOnAndroid) {\n      // Reactivating the active tab dismisses the popup tab. The promise final\n      // condition is only called if the popup wasn't already dismissed (future proofing).\n      // ref: https://bugzilla.mozilla.org/show_bug.cgi?id=1433604\n      browser.tabs.update({ active: true }).finally(win.close);\n    } else {\n      win.close();\n    }\n  }\n\n  static gaFilter() {\n    return process.env.ENV !== \"production\";\n  }\n\n  static getUILanguage(win: Window) {\n    return chrome.i18n.getUILanguage();\n  }\n\n  static reloadExtension(win: Window) {\n    if (win != null) {\n      return (win.location as any).reload(true);\n    } else {\n      return chrome.runtime.reload();\n    }\n  }\n\n  static reloadOpenWindows(exemptCurrentHref = false) {\n    const currentHref = window.location.href;\n    const views = chrome.extension.getViews() as Window[];\n    views\n      .filter((w) => w.location.href != null && !w.location.href.includes(\"background.html\"))\n      .filter((w) => !exemptCurrentHref || w.location.href !== currentHref)\n      .forEach((w) => {\n        w.location.reload();\n      });\n  }\n\n  static connectNative(application: string): browser.runtime.Port | chrome.runtime.Port {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.connectNative(application);\n    } else if (BrowserApi.isChromeApi) {\n      return chrome.runtime.connectNative(application);\n    }\n  }\n\n  static requestPermission(permission: any) {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.permissions.request(permission);\n    }\n    return new Promise((resolve, reject) => {\n      chrome.permissions.request(permission, resolve);\n    });\n  }\n\n  static getPlatformInfo(): Promise<browser.runtime.PlatformInfo | chrome.runtime.PlatformInfo> {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.getPlatformInfo();\n    }\n    return new Promise((resolve) => {\n      chrome.runtime.getPlatformInfo(resolve);\n    });\n  }\n\n  static getBrowserAction() {\n    return BrowserApi.manifestVersion === 3 ? chrome.action : chrome.browserAction;\n  }\n\n  static getSidebarAction(\n    win: Window & typeof globalThis\n  ): OperaSidebarAction | FirefoxSidebarAction | null {\n    const deviceType = BrowserPlatformUtilsService.getDevice(win);\n    if (deviceType !== DeviceType.FirefoxExtension && deviceType !== DeviceType.OperaExtension) {\n      return null;\n    }\n    return win.opr?.sidebarAction || browser.sidebarAction;\n  }\n\n  /**\n   * Extension API helper method used to execute a script in a tab.\n   * @see https://developer.chrome.com/docs/extensions/reference/tabs/#method-executeScript\n   * @param {number} tabId\n   * @param {chrome.tabs.InjectDetails} details\n   * @returns {Promise<unknown>}\n   */\n  static executeScriptInTab(tabId: number, details: chrome.tabs.InjectDetails) {\n    if (BrowserApi.manifestVersion === 3) {\n      return chrome.scripting.executeScript({\n        target: {\n          tabId: tabId,\n          allFrames: details.allFrames,\n          frameIds: details.frameId ? [details.frameId] : null,\n        },\n        files: details.file ? [details.file] : null,\n        injectImmediately: details.runAt === \"document_start\",\n      });\n    }\n\n    return new Promise((resolve) => {\n      chrome.tabs.executeScript(tabId, details, (result) => {\n        resolve(result);\n      });\n    });\n  }\n}\n","import { BrowserApi } from \"../platform/browser/browser-api\";\n\nexport class SafariApp {\n  static sendMessageToApp(command: string, data: any = null, resolveNow = false): Promise<any> {\n    if (!BrowserApi.isSafariApi) {\n      return Promise.resolve(null);\n    }\n    return new Promise((resolve) => {\n      const now = new Date();\n      const messageId =\n        now.getTime().toString() + \"_\" + Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n      (browser as any).runtime.sendNativeMessage(\n        \"com.bitwarden.desktop\",\n        {\n          id: messageId,\n          command: command,\n          data: data,\n          responseData: null,\n        },\n        (response: any) => {\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { ClientType, DeviceType } from \"@bitwarden/common/enums\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport default class BrowserPlatformUtilsService implements PlatformUtilsService {\n  private static deviceCache: DeviceType = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private clipboardWriteCallback: (clipboardValue: string, clearMs: number) => void,\n    private biometricCallback: () => Promise<boolean>,\n    private win: Window & typeof globalThis\n  ) {}\n\n  static getDevice(win: Window & typeof globalThis): DeviceType {\n    if (this.deviceCache) {\n      return this.deviceCache;\n    }\n\n    if (BrowserPlatformUtilsService.isFirefox()) {\n      this.deviceCache = DeviceType.FirefoxExtension;\n    } else if (BrowserPlatformUtilsService.isOpera(win)) {\n      this.deviceCache = DeviceType.OperaExtension;\n    } else if (BrowserPlatformUtilsService.isEdge()) {\n      this.deviceCache = DeviceType.EdgeExtension;\n    } else if (BrowserPlatformUtilsService.isVivaldi()) {\n      this.deviceCache = DeviceType.VivaldiExtension;\n    } else if (BrowserPlatformUtilsService.isChrome(win)) {\n      this.deviceCache = DeviceType.ChromeExtension;\n    } else if (BrowserPlatformUtilsService.isSafari(win)) {\n      this.deviceCache = DeviceType.SafariExtension;\n    }\n\n    return this.deviceCache;\n  }\n\n  getDevice(): DeviceType {\n    return BrowserPlatformUtilsService.getDevice(this.win);\n  }\n\n  getDeviceString(): string {\n    const device = DeviceType[this.getDevice()].toLowerCase();\n    return device.replace(\"extension\", \"\");\n  }\n\n  getClientType(): ClientType {\n    return ClientType.Browser;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  static isFirefox(): boolean {\n    return (\n      navigator.userAgent.indexOf(\" Firefox/\") !== -1 ||\n      navigator.userAgent.indexOf(\" Gecko/\") !== -1\n    );\n  }\n\n  isFirefox(): boolean {\n    return this.getDevice() === DeviceType.FirefoxExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isChrome(win: Window & typeof globalThis): boolean {\n    return win.chrome && navigator.userAgent.indexOf(\" Chrome/\") !== -1;\n  }\n\n  isChrome(): boolean {\n    return this.getDevice() === DeviceType.ChromeExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isEdge(): boolean {\n    return navigator.userAgent.indexOf(\" Edg/\") !== -1;\n  }\n\n  isEdge(): boolean {\n    return this.getDevice() === DeviceType.EdgeExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isOpera(win: Window & typeof globalThis): boolean {\n    return (\n      (!!win.opr && !!win.opr.addons) || !!win.opera || navigator.userAgent.indexOf(\" OPR/\") >= 0\n    );\n  }\n\n  isOpera(): boolean {\n    return this.getDevice() === DeviceType.OperaExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  private static isVivaldi(): boolean {\n    return navigator.userAgent.indexOf(\" Vivaldi/\") !== -1;\n  }\n\n  isVivaldi(): boolean {\n    return this.getDevice() === DeviceType.VivaldiExtension;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use getDevice() instead\n   */\n  static isSafari(win: Window & typeof globalThis): boolean {\n    // Opera masquerades as Safari, so make sure we're not there first\n    return (\n      !BrowserPlatformUtilsService.isOpera(win) && navigator.userAgent.indexOf(\" Safari/\") !== -1\n    );\n  }\n\n  private static safariVersion(): string {\n    return navigator.userAgent.match(\"Version/([0-9.]*)\")?.[1];\n  }\n\n  /**\n   * Safari previous to version 16.1 had a bug which caused artifacts on hover in large extension popups.\n   * https://bugs.webkit.org/show_bug.cgi?id=218704\n   */\n  static shouldApplySafariHeightFix(win: Window & typeof globalThis): boolean {\n    if (BrowserPlatformUtilsService.getDevice(win) !== DeviceType.SafariExtension) {\n      return false;\n    }\n\n    const version = BrowserPlatformUtilsService.safariVersion();\n    const parts = version?.split(\".\")?.map((v) => Number(v));\n    return parts?.[0] < 16 || (parts?.[0] === 16 && parts?.[1] === 0);\n  }\n\n  isSafari(): boolean {\n    return this.getDevice() === DeviceType.SafariExtension;\n  }\n\n  isIE(): boolean {\n    return false;\n  }\n\n  isMacAppStore(): boolean {\n    return false;\n  }\n\n  async isViewOpen(): Promise<boolean> {\n    if (await BrowserApi.isPopupOpen()) {\n      return true;\n    }\n\n    if (this.isSafari()) {\n      return false;\n    }\n\n    // Opera has \"sidebar_panel\" as a ViewType but doesn't currently work\n    if (this.isFirefox() && chrome.extension.getViews({ type: \"sidebar\" }).length > 0) {\n      return true;\n    }\n\n    // Opera sidebar has type of \"tab\" (will stick around for a while after closing sidebar)\n    const tabOpen = chrome.extension.getViews({ type: \"tab\" }).length > 0;\n    return tabOpen;\n  }\n\n  lockTimeout(): number {\n    return null;\n  }\n\n  launchUri(uri: string, options?: any): void {\n    BrowserApi.createNewTab(uri, options && options.extensionPage === true);\n  }\n\n  getApplicationVersion(): Promise<string> {\n    return Promise.resolve(BrowserApi.getApplicationVersion());\n  }\n\n  async getApplicationVersionNumber(): Promise<string> {\n    return (await this.getApplicationVersion()).split(RegExp(\"[+|-]\"))[0].trim();\n  }\n\n  supportsWebAuthn(win: Window): boolean {\n    return typeof PublicKeyCredential !== \"undefined\";\n  }\n\n  supportsDuo(): boolean {\n    return true;\n  }\n\n  showToast(\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: any\n  ): void {\n    this.messagingService.send(\"showToast\", {\n      text: text,\n      title: title,\n      type: type,\n      options: options,\n    });\n  }\n\n  isDev(): boolean {\n    return process.env.ENV === \"development\";\n  }\n\n  isSelfHost(): boolean {\n    return false;\n  }\n\n  copyToClipboard(text: string, options?: any): void {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n    const clearing = options ? !!options.clearing : false;\n    const clearMs: number = options && options.clearMs ? options.clearMs : null;\n\n    if (this.isSafari()) {\n      SafariApp.sendMessageToApp(\"copyToClipboard\", text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.writeText\n    ) {\n      (win as any).navigator.clipboard.writeText(text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"copy\")) {\n      if (this.isChrome() && text === \"\") {\n        text = \"\\u0000\";\n      }\n\n      const textarea = doc.createElement(\"textarea\");\n      textarea.textContent = text == null || text === \"\" ? \" \" : text;\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.select();\n\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"copy\") && !clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Copy to clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n  }\n\n  async readFromClipboard(options?: any): Promise<string> {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n\n    if (this.isSafari()) {\n      return await SafariApp.sendMessageToApp(\"readFromClipboard\");\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.readText\n    ) {\n      return await (win as any).navigator.clipboard.readText();\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"paste\")) {\n      const textarea = doc.createElement(\"textarea\");\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.focus();\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"paste\")) {\n          return textarea.value;\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Read from clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n    return null;\n  }\n\n  async supportsBiometric() {\n    const platformInfo = await BrowserApi.getPlatformInfo();\n    if (platformInfo.os === \"android\") {\n      return false;\n    }\n\n    return true;\n  }\n\n  authenticateBiometric() {\n    return this.biometricCallback();\n  }\n\n  supportsSecureStorage(): boolean {\n    return false;\n  }\n\n  async getAutofillKeyboardShortcut(): Promise<string> {\n    let autofillCommand: string;\n    // You can not change the command in Safari or obtain it programmatically\n    if (this.isSafari()) {\n      autofillCommand = \"Cmd+Shift+L\";\n    } else if (this.isFirefox()) {\n      autofillCommand = (await browser.commands.getAll()).find(\n        (c) => c.name === \"autofill_login\"\n      ).shortcut;\n      // Firefox is returning Ctrl instead of Cmd for the modifier key on macOS if\n      // the command is the default one set on installation.\n      if (\n        (await browser.runtime.getPlatformInfo()).os === \"mac\" &&\n        autofillCommand === \"Ctrl+Shift+L\"\n      ) {\n        autofillCommand = \"Cmd+Shift+L\";\n      }\n    } else {\n      await new Promise((resolve) =>\n        chrome.commands.getAll((c) =>\n          resolve((autofillCommand = c.find((c) => c.name === \"autofill_login\").shortcut))\n        )\n      );\n    }\n    return autofillCommand;\n  }\n}\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { CommonModule } from \"@angular/common\";\nimport { Component, ModuleWithProviders, NgModule } from \"@angular/core\";\nimport {\n  DefaultNoComponentGlobalConfig,\n  GlobalConfig,\n  Toast as BaseToast,\n  ToastPackage,\n  ToastrService,\n  TOAST_CONFIG,\n} from \"ngx-toastr\";\n\n@Component({\n  selector: \"[toast-component2]\",\n  template: `\n    <button\n      *ngIf=\"options.closeButton\"\n      (click)=\"remove()\"\n      type=\"button\"\n      class=\"toast-close-button\"\n      aria-label=\"Close\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    <div class=\"icon\">\n      <i></i>\n    </div>\n    <div>\n      <div *ngIf=\"title\" [class]=\"options.titleClass\" [attr.aria-label]=\"title\">\n        {{ title }} <ng-container *ngIf=\"duplicatesCount\">[{{ duplicatesCount + 1 }}]</ng-container>\n      </div>\n      <div\n        *ngIf=\"message && options.enableHtml\"\n        role=\"alertdialog\"\n        aria-live=\"polite\"\n        [class]=\"options.messageClass\"\n        [innerHTML]=\"message\"\n      ></div>\n      <div\n        *ngIf=\"message && !options.enableHtml\"\n        role=\"alertdialog\"\n        aria-live=\"polite\"\n        [class]=\"options.messageClass\"\n        [attr.aria-label]=\"message\"\n      >\n        {{ message }}\n      </div>\n    </div>\n    <div *ngIf=\"options.progressBar\">\n      <div class=\"toast-progress\" [style.width]=\"width + '%'\"></div>\n    </div>\n  `,\n  animations: [\n    trigger(\"flyInOut\", [\n      state(\"inactive\", style({ opacity: 0 })),\n      state(\"active\", style({ opacity: 1 })),\n      state(\"removed\", style({ opacity: 0 })),\n      transition(\"inactive => active\", animate(\"{{ easeTime }}ms {{ easing }}\")),\n      transition(\"active => removed\", animate(\"{{ easeTime }}ms {{ easing }}\")),\n    ]),\n  ],\n  preserveWhitespaces: false,\n})\nexport class BitwardenToast extends BaseToast {\n  constructor(protected toastrService: ToastrService, public toastPackage: ToastPackage) {\n    super(toastrService, toastPackage);\n  }\n}\n\nexport const BitwardenToastGlobalConfig: GlobalConfig = {\n  ...DefaultNoComponentGlobalConfig,\n  toastComponent: BitwardenToast,\n};\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [BitwardenToast],\n  exports: [BitwardenToast],\n})\nexport class BitwardenToastModule {\n  static forRoot(config: Partial<GlobalConfig> = {}): ModuleWithProviders<BitwardenToastModule> {\n    return {\n      ngModule: BitwardenToastModule,\n      providers: [\n        {\n          provide: TOAST_CONFIG,\n          useValue: {\n            default: BitwardenToastGlobalConfig,\n            config: config,\n          },\n        },\n      ],\n    };\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ninterface CardRuleEntry {\n  cardLength: number;\n  blocks: number[];\n}\n\n// See https://baymard.com/checkout-usability/credit-card-patterns for\n// all possible credit card spacing patterns. For now, we just handle\n// the below.\nconst numberFormats: Record<string, CardRuleEntry[]> = {\n  Visa: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  Mastercard: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  Maestro: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 13, blocks: [4, 4, 5] },\n    { cardLength: 15, blocks: [4, 6, 5] },\n    { cardLength: 19, blocks: [4, 4, 4, 4, 3] },\n  ],\n  Discover: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  \"Diners Club\": [{ cardLength: 14, blocks: [4, 6, 4] }],\n  JCB: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  UnionPay: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 19, blocks: [6, 13] },\n  ],\n  Amex: [{ cardLength: 15, blocks: [4, 6, 5] }],\n  Other: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n};\n\n@Pipe({ name: \"creditCardNumber\" })\nexport class CreditCardNumberPipe implements PipeTransform {\n  transform(creditCardNumber: string, brand: string): string {\n    let rules = numberFormats[brand];\n\n    if (rules == null) {\n      rules = numberFormats[\"Other\"];\n    }\n\n    const cardLength = creditCardNumber.length;\n\n    let matchingRule = rules.find((r) => r.cardLength == cardLength);\n    if (matchingRule == null) {\n      matchingRule = rules[0];\n    }\n\n    const blocks = matchingRule.blocks;\n\n    const chunks: string[] = [];\n    let total = 0;\n\n    blocks.forEach((c) => {\n      chunks.push(creditCardNumber.slice(total, total + c));\n      total += c;\n    });\n\n    // Append the remaining part\n    if (cardLength > total) {\n      chunks.push(creditCardNumber.slice(total));\n    }\n\n    return chunks.join(\" \");\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ntype PropertyValueFunction<T> = (item: T) => { toString: () => string };\n\n@Pipe({\n  name: \"search\",\n})\nexport class SearchPipe implements PipeTransform {\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: keyof T,\n    prop2?: keyof T,\n    prop3?: keyof T\n  ): T[];\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: PropertyValueFunction<T>,\n    prop2?: PropertyValueFunction<T>,\n    prop3?: PropertyValueFunction<T>\n  ): T[];\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: keyof T | PropertyValueFunction<T>,\n    prop2?: keyof T | PropertyValueFunction<T>,\n    prop3?: keyof T | PropertyValueFunction<T>\n  ): T[] {\n    if (items == null || items.length === 0) {\n      return [];\n    }\n\n    if (searchText == null || searchText.length < 2) {\n      return items;\n    }\n\n    searchText = searchText.trim().toLowerCase();\n    return items.filter((i) => {\n      if (prop1 != null) {\n        const propValue = typeof prop1 === \"function\" ? prop1(i) : i[prop1];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      if (prop2 != null) {\n        const propValue = typeof prop2 === \"function\" ? prop2(i) : i[prop2];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      if (prop3 != null) {\n        const propValue = typeof prop3 === \"function\" ? prop3(i) : i[prop3];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      return false;\n    });\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ninterface User {\n  name?: string;\n  email?: string;\n}\n\n@Pipe({\n  name: \"userName\",\n})\nexport class UserNamePipe implements PipeTransform {\n  transform(user?: User): string {\n    if (user == null) {\n      return null;\n    }\n\n    if (user.name == null && user.email == null) {\n      return null;\n    }\n\n    return user.name == null || user.name.trim() === \"\" ? user.email : user.name;\n  }\n}\n","export enum OrganizationApiKeyType {\n  Default = 0,\n  BillingSync = 1,\n  Scim = 2,\n}\n","export enum OrganizationConnectionType {\n  CloudBillingSync = 1,\n  Scim = 2,\n}\n","export enum OrganizationUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1,\n}\n","export enum OrganizationUserType {\n  Owner = 0,\n  Admin = 1,\n  User = 2,\n  Manager = 3,\n  Custom = 4,\n}\n","export enum PolicyType {\n  TwoFactorAuthentication = 0, // Requires users to have 2fa enabled\n  MasterPassword = 1, // Sets minimum requirements for master password complexity\n  PasswordGenerator = 2, // Sets minimum requirements/default type for generated passwords/passphrases\n  SingleOrg = 3, // Allows users to only be apart of one organization\n  RequireSso = 4, // Requires users to authenticate with SSO\n  PersonalOwnership = 5, // Disables personal vault ownership for adding/cloning items\n  DisableSend = 6, // Disables the ability to create and edit Bitwarden Sends\n  SendOptions = 7, // Sets restrictions or defaults for Bitwarden Sends\n  ResetPassword = 8, // Allows orgs to use reset password : also can enable auto-enrollment during invite flow\n  MaximumVaultTimeout = 9, // Sets the maximum allowed vault timeout\n  DisablePersonalVaultExport = 10, // Disable personal vault export\n  ActivateAutofill = 11, // Activates autofill with page load on the browser extension\n}\n","export enum ProviderUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1, // Not used, compile-time support only\n}\n","export enum ProviderUserType {\n  ProviderAdmin = 0,\n  ServiceUser = 1,\n}\n","export enum ScimProviderType {\n  Default = 0,\n  AzureAd = 1,\n  Okta = 2,\n  OneLogin = 3,\n  JumpCloud = 4,\n  GoogleWorkspace = 5,\n  Rippling = 6,\n}\n","export abstract class TranslationService {\n  supportedTranslationLocales: string[];\n  translationLocale: string;\n  collator: Intl.Collator;\n  localeNames: Map<string, string>;\n  t: (id: string, p1?: string | number, p2?: string | number, p3?: string | number) => string;\n  translate: (id: string, p1?: string, p2?: string, p3?: string) => string;\n}\n","import { Observable } from \"rxjs\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport abstract class I18nService extends TranslationService {\n  locale$: Observable<string>;\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { OrganizationUserType } from \"@bitwarden/common/admin-console/enums\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\n@Pipe({\n  name: \"userType\",\n})\nexport class UserTypePipe implements PipeTransform {\n  constructor(private i18nService: I18nService) {}\n\n  transform(value?: OrganizationUserType): string {\n    if (value == null) {\n      return this.i18nService.t(\"unknown\");\n    }\n    switch (value) {\n      case OrganizationUserType.Owner:\n        return this.i18nService.t(\"owner\");\n      case OrganizationUserType.Admin:\n        return this.i18nService.t(\"admin\");\n      case OrganizationUserType.User:\n        return this.i18nService.t(\"user\");\n      case OrganizationUserType.Manager:\n        return this.i18nService.t(\"manager\");\n      case OrganizationUserType.Custom:\n        return this.i18nService.t(\"custom\");\n    }\n  }\n}\n","/* eslint-disable no-useless-escape */\nimport * as path from \"path\";\n\nimport { Observable, of, switchMap } from \"rxjs\";\nimport { getHostname, parse } from \"tldts\";\nimport { Merge } from \"type-fest\";\n\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\n\nconst nodeURL = typeof window === \"undefined\" ? require(\"url\") : null;\n\ndeclare global {\n  /* eslint-disable-next-line no-var */\n  var bitwardenContainerService: BitwardenContainerService;\n}\n\ninterface BitwardenContainerService {\n  getCryptoService: () => CryptoService;\n  getEncryptService: () => EncryptService;\n}\n\nexport class Utils {\n  static inited = false;\n  static isNode = false;\n  static isBrowser = true;\n  static isMobileBrowser = false;\n  static isAppleMobileBrowser = false;\n  static global: typeof global = null;\n  // Transpiled version of /\\p{Emoji_Presentation}/gu using https://mothereff.in/regexpu. Used for compatability in older browsers.\n  static regexpEmojiPresentation =\n    /(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])/g;\n  static readonly validHosts: string[] = [\"localhost\"];\n  static readonly originalMinimumPasswordLength = 8;\n  static readonly minimumPasswordLength = 12;\n  static readonly DomainMatchBlacklist = new Map<string, Set<string>>([\n    [\"google.com\", new Set([\"script.google.com\"])],\n  ]);\n\n  static init() {\n    if (Utils.inited) {\n      return;\n    }\n\n    Utils.inited = true;\n    Utils.isNode =\n      typeof process !== \"undefined\" &&\n      (process as any).release != null &&\n      (process as any).release.name === \"node\";\n    Utils.isBrowser = typeof window !== \"undefined\";\n\n    Utils.isMobileBrowser = Utils.isBrowser && this.isMobile(window);\n    Utils.isAppleMobileBrowser = Utils.isBrowser && this.isAppleMobile(window);\n\n    if (Utils.isNode) {\n      Utils.global = global;\n    } else if (Utils.isBrowser) {\n      Utils.global = window;\n    } else {\n      // If it's not browser or node then it must be a service worker\n      Utils.global = self;\n    }\n  }\n\n  static fromB64ToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"base64\"));\n    } else {\n      const binaryString = Utils.global.atob(str);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUrlB64ToArray(str: string): Uint8Array {\n    return Utils.fromB64ToArray(Utils.fromUrlB64ToB64(str));\n  }\n\n  static fromHexToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"hex\"));\n    } else {\n      const bytes = new Uint8Array(str.length / 2);\n      for (let i = 0; i < str.length; i += 2) {\n        bytes[i / 2] = parseInt(str.substr(i, 2), 16);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUtf8ToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"utf8\"));\n    } else {\n      const strUtf8 = unescape(encodeURIComponent(str));\n      const arr = new Uint8Array(strUtf8.length);\n      for (let i = 0; i < strUtf8.length; i++) {\n        arr[i] = strUtf8.charCodeAt(i);\n      }\n      return arr;\n    }\n  }\n\n  static fromByteStringToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n    const arr = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; i++) {\n      arr[i] = str.charCodeAt(i);\n    }\n    return arr;\n  }\n\n  static fromBufferToB64(buffer: ArrayBuffer): string {\n    if (buffer == null) {\n      return null;\n    }\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"base64\");\n    } else {\n      let binary = \"\";\n      const bytes = new Uint8Array(buffer);\n      for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      return Utils.global.btoa(binary);\n    }\n  }\n\n  static fromBufferToUrlB64(buffer: ArrayBuffer): string {\n    return Utils.fromB64toUrlB64(Utils.fromBufferToB64(buffer));\n  }\n\n  static fromB64toUrlB64(b64Str: string) {\n    return b64Str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n  }\n\n  static fromBufferToUtf8(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"utf8\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      const encodedString = String.fromCharCode.apply(null, bytes);\n      return decodeURIComponent(escape(encodedString));\n    }\n  }\n\n  static fromBufferToByteString(buffer: ArrayBuffer): string {\n    return String.fromCharCode.apply(null, new Uint8Array(buffer));\n  }\n\n  // ref: https://stackoverflow.com/a/40031979/1090359\n  static fromBufferToHex(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"hex\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      return Array.prototype.map\n        .call(bytes, (x: number) => (\"00\" + x.toString(16)).slice(-2))\n        .join(\"\");\n    }\n  }\n\n  static fromUrlB64ToB64(urlB64Str: string): string {\n    let output = urlB64Str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n      case 0:\n        break;\n      case 2:\n        output += \"==\";\n        break;\n      case 3:\n        output += \"=\";\n        break;\n      default:\n        throw new Error(\"Illegal base64url string!\");\n    }\n\n    return output;\n  }\n\n  static fromUrlB64ToUtf8(urlB64Str: string): string {\n    return Utils.fromB64ToUtf8(Utils.fromUrlB64ToB64(urlB64Str));\n  }\n\n  static fromUtf8ToB64(utfStr: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(utfStr, \"utf8\").toString(\"base64\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.btoa(utfStr)));\n    }\n  }\n\n  static fromUtf8ToUrlB64(utfStr: string): string {\n    return Utils.fromBufferToUrlB64(Utils.fromUtf8ToArray(utfStr));\n  }\n\n  static fromB64ToUtf8(b64Str: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(b64Str, \"base64\").toString(\"utf8\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.atob(b64Str)));\n    }\n  }\n\n  // ref: http://stackoverflow.com/a/2117523/1090359\n  static newGuid(): string {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  static isGuid(id: string) {\n    return RegExp(\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,\n      \"i\"\n    ).test(id);\n  }\n\n  static getHostname(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"file:\")) {\n      return null;\n    }\n\n    // Does uriString contain invalid characters\n    // TODO Needs to possibly be extended, although '!' is a reserved character\n    if (uriString.indexOf(\"!\") > 0) {\n      return null;\n    }\n\n    try {\n      const hostname = getHostname(uriString, { validHosts: this.validHosts });\n      if (hostname != null) {\n        return hostname;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getHost(uriString: string): string {\n    const url = Utils.getUrl(uriString);\n    try {\n      return url != null && url.host !== \"\" ? url.host : null;\n    } catch {\n      return null;\n    }\n  }\n\n  static getDomain(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    try {\n      const parseResult = parse(uriString, { validHosts: this.validHosts });\n      if (parseResult != null && parseResult.hostname != null) {\n        if (parseResult.hostname === \"localhost\" || parseResult.isIp) {\n          return parseResult.hostname;\n        }\n\n        if (parseResult.domain != null) {\n          return parseResult.domain;\n        }\n        return null;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getQueryParams(uriString: string): Map<string, string> {\n    const url = Utils.getUrl(uriString);\n    if (url == null || url.search == null || url.search === \"\") {\n      return null;\n    }\n    const map = new Map<string, string>();\n    const pairs = (url.search[0] === \"?\" ? url.search.substr(1) : url.search).split(\"&\");\n    pairs.forEach((pair) => {\n      const parts = pair.split(\"=\");\n      if (parts.length < 1) {\n        return;\n      }\n      map.set(\n        decodeURIComponent(parts[0]).toLowerCase(),\n        parts[1] == null ? \"\" : decodeURIComponent(parts[1])\n      );\n    });\n    return map;\n  }\n\n  static getSortFunction<T>(\n    i18nService: I18nService,\n    prop: { [K in keyof T]: T[K] extends string ? K : never }[keyof T]\n  ): (a: T, b: T) => number {\n    return (a, b) => {\n      if (a[prop] == null && b[prop] != null) {\n        return -1;\n      }\n      if (a[prop] != null && b[prop] == null) {\n        return 1;\n      }\n      if (a[prop] == null && b[prop] == null) {\n        return 0;\n      }\n\n      // The `as unknown as string` here is unfortunate because typescript doesn't property understand that the return of T[prop] will be a string\n      return i18nService.collator\n        ? i18nService.collator.compare(a[prop] as unknown as string, b[prop] as unknown as string)\n        : (a[prop] as unknown as string).localeCompare(b[prop] as unknown as string);\n    };\n  }\n\n  static isNullOrWhitespace(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str.trim() === \"\";\n  }\n\n  static isNullOrEmpty(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str == \"\";\n  }\n\n  static isPromise(obj: any): obj is Promise<unknown> {\n    return (\n      obj != undefined && typeof obj[\"then\"] === \"function\" && typeof obj[\"catch\"] === \"function\"\n    );\n  }\n\n  static nameOf<T>(name: string & keyof T) {\n    return name;\n  }\n\n  static assign<T>(target: T, source: Partial<T>): T {\n    return Object.assign(target, source);\n  }\n\n  static iterateEnum<O extends object, K extends keyof O = keyof O>(obj: O) {\n    return (Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[]).map((k) => obj[k]);\n  }\n\n  static getUrl(uriString: string): URL {\n    if (this.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    return Utils.getUrlObject(uriString);\n  }\n\n  static camelToPascalCase(s: string) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n\n  /**\n   * There are a few ways to calculate text color for contrast, this one seems to fit accessibility guidelines best.\n   * https://stackoverflow.com/a/3943023/6869691\n   *\n   * @param {string} bgColor\n   * @param {number} [threshold] see stackoverflow link above\n   * @param {boolean} [svgTextFill]\n   * Indicates if this method is performed on an SVG <text> 'fill' attribute (e.g. <text fill=\"black\"></text>).\n   * This check is necessary because the '!important' tag cannot be used in a 'fill' attribute.\n   */\n  static pickTextColorBasedOnBgColor(bgColor: string, threshold = 186, svgTextFill = false) {\n    const bgColorHexNums = bgColor.charAt(0) === \"#\" ? bgColor.substring(1, 7) : bgColor;\n    const r = parseInt(bgColorHexNums.substring(0, 2), 16); // hexToR\n    const g = parseInt(bgColorHexNums.substring(2, 4), 16); // hexToG\n    const b = parseInt(bgColorHexNums.substring(4, 6), 16); // hexToB\n    const blackColor = svgTextFill ? \"black\" : \"black !important\";\n    const whiteColor = svgTextFill ? \"white\" : \"white !important\";\n    return r * 0.299 + g * 0.587 + b * 0.114 > threshold ? blackColor : whiteColor;\n  }\n\n  static stringToColor(str: string): string {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    let color = \"#\";\n    for (let i = 0; i < 3; i++) {\n      const value = (hash >> (i * 8)) & 0xff;\n      color += (\"00\" + value.toString(16)).substr(-2);\n    }\n    return color;\n  }\n\n  /**\n   * @throws Will throw an error if the ContainerService has not been attached to the window object\n   */\n  static getContainerService(): BitwardenContainerService {\n    if (this.global.bitwardenContainerService == null) {\n      throw new Error(\"global bitwardenContainerService not initialized.\");\n    }\n    return this.global.bitwardenContainerService;\n  }\n\n  static validateHexColor(color: string) {\n    return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n  }\n\n  /**\n   * Converts map to a Record<string, V> with the same data. Inverse of recordToMap\n   * Useful in toJSON methods, since Maps are not serializable\n   * @param map\n   * @returns\n   */\n  static mapToRecord<K extends string | number, V>(map: Map<K, V>): Record<string, V> {\n    if (map == null) {\n      return null;\n    }\n    if (!(map instanceof Map)) {\n      return map;\n    }\n    return Object.fromEntries(map);\n  }\n\n  /**\n   * Converts record to a Map<string, V> with the same data. Inverse of mapToRecord\n   * Useful in fromJSON methods, since Maps are not serializable\n   *\n   * Warning: If the record has string keys that are numbers, they will be converted to numbers in the map\n   * @param record\n   * @returns\n   */\n  static recordToMap<K extends string | number, V>(record: Record<K, V>): Map<K, V> {\n    if (record == null) {\n      return null;\n    } else if (record instanceof Map) {\n      return record;\n    }\n\n    const entries = Object.entries(record);\n    if (entries.length === 0) {\n      return new Map();\n    }\n\n    if (isNaN(Number(entries[0][0]))) {\n      return new Map(entries) as Map<K, V>;\n    } else {\n      return new Map(entries.map((e) => [Number(e[0]), e[1]])) as Map<K, V>;\n    }\n  }\n\n  /** Applies Object.assign, but converts the type nicely using Type-Fest Merge<Destination, Source> */\n  static merge<Destination, Source>(\n    destination: Destination,\n    source: Source\n  ): Merge<Destination, Source> {\n    return Object.assign(destination, source) as unknown as Merge<Destination, Source>;\n  }\n\n  /**\n   * encodeURIComponent escapes all characters except the following:\n   * alphabetic, decimal digits, - _ . ! ~ * ' ( )\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#encoding_for_rfc3986\n   */\n  static encodeRFC3986URIComponent(str: string): string {\n    return encodeURIComponent(str).replace(\n      /[!'()*]/g,\n      (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`\n    );\n  }\n\n  /**\n   * Normalizes a path for defense against attacks like traversals\n   * @param denormalizedPath\n   * @returns\n   */\n  static normalizePath(denormalizedPath: string): string {\n    return path.normalize(decodeURIComponent(denormalizedPath)).replace(/^(\\.\\.(\\/|\\\\|$))+/, \"\");\n  }\n\n  private static isMobile(win: Window) {\n    let mobile = false;\n    ((a) => {\n      if (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n          a\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n          a.substr(0, 4)\n        )\n      ) {\n        mobile = true;\n      }\n    })(win.navigator.userAgent || win.navigator.vendor || (win as any).opera);\n    return mobile || win.navigator.userAgent.match(/iPad/i) != null;\n  }\n\n  static delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Generate an observable from a function that returns a promise.\n   * Similar to the rxjs function {@link from} with one big exception:\n   * {@link from} will not re-execute the function when observers resubscribe.\n   * {@link Util.asyncToObservable} will execute `generator` for every\n   * subscribe, making it ideal if the value ever needs to be refreshed.\n   * */\n  static asyncToObservable<T>(generator: () => Promise<T>): Observable<T> {\n    return of(undefined).pipe(switchMap(() => generator()));\n  }\n\n  /**\n   * Return the number of days remaining before a target date arrives.\n   * Returns 0 if the day has already passed.\n   */\n  static daysRemaining(targetDate: Date): number {\n    const diffTime = targetDate.getTime() - Date.now();\n    const msPerDay = 86400000;\n    return Math.max(0, Math.floor(diffTime / msPerDay));\n  }\n\n  private static isAppleMobile(win: Window) {\n    return (\n      win.navigator.userAgent.match(/iPhone/i) != null ||\n      win.navigator.userAgent.match(/iPad/i) != null\n    );\n  }\n\n  private static getUrlObject(uriString: string): URL {\n    // All the methods below require a protocol to properly parse a URL string\n    // Assume http if no other protocol is present\n    const hasProtocol = uriString.indexOf(\"://\") > -1;\n    if (!hasProtocol && uriString.indexOf(\".\") > -1) {\n      uriString = \"http://\" + uriString;\n    } else if (!hasProtocol) {\n      return null;\n    }\n\n    try {\n      if (nodeURL != null) {\n        return new nodeURL.URL(uriString);\n      }\n\n      return new URL(uriString);\n    } catch (e) {\n      // Ignore error\n    }\n\n    return null;\n  }\n}\n\nUtils.init();\n","import { ProfileOrganizationResponse } from \"../../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../../admin-console/models/response/profile-provider.response\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport { KeySuffixOptions, KdfType, HashPurpose } from \"../../enums\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport {\n  CipherKey,\n  MasterKey,\n  OrgKey,\n  PinKey,\n  ProviderKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class CryptoService {\n  /**\n   * Sets the provided user key and stores\n   * any other necessary versions (such as auto, biometrics,\n   * or pin)\n   * @param key The user key to set\n   * @param userId The desired user\n   */\n  setUserKey: (key: UserKey, userId?: string) => Promise<void>;\n  /**\n   * Gets the user key from memory and sets it again,\n   * kicking off a refresh of any additional keys\n   * (such as auto, biometrics, or pin)\n   */\n  /**\n   * Check if the current sessions has ever had a user key, i.e. has ever been unlocked/decrypted.\n   * This is key for differentiating between TDE locked and standard locked states.\n   * @param userId The desired user\n   * @returns True if the current session has ever had a user key\n   */\n  getEverHadUserKey: (userId?: string) => Promise<boolean>;\n  refreshAdditionalKeys: () => Promise<void>;\n  /**\n   * Retrieves the user key\n   * @param userId The desired user\n   * @returns The user key\n   */\n  getUserKey: (userId?: string) => Promise<UserKey>;\n  /**\n   * Use for encryption/decryption of data in order to support legacy\n   * encryption models. It will return the user key if available,\n   * if not it will return the master key.\n   * @param userId The desired user\n   */\n  getUserKeyWithLegacySupport: (userId?: string) => Promise<UserKey>;\n  /**\n   * Retrieves the user key from storage\n   * @param keySuffix The desired version of the user's key to retrieve\n   * @param userId The desired user\n   * @returns The user key\n   */\n  getUserKeyFromStorage: (keySuffix: KeySuffixOptions, userId?: string) => Promise<UserKey>;\n\n  /**\n   * @returns True if the user key is available\n   */\n  hasUserKey: () => Promise<boolean>;\n  /**\n   * @param userId The desired user\n   * @returns True if the user key is set in memory\n   */\n  hasUserKeyInMemory: (userId?: string) => Promise<boolean>;\n  /**\n   * @param keySuffix The desired version of the user's key to check\n   * @param userId The desired user\n   * @returns True if the provided version of the user key is stored\n   */\n  hasUserKeyStored: (keySuffix: KeySuffixOptions, userId?: string) => Promise<boolean>;\n  /**\n   * Generates a new user key\n   * @param masterKey The user's master key\n   * @returns A new user key and the master key protected version of it\n   */\n  makeUserKey: (key: MasterKey) => Promise<[UserKey, EncString]>;\n  /**\n   * Clears the user key\n   * @param clearStoredKeys Clears all stored versions of the user keys as well,\n   * such as the biometrics key\n   * @param userId The desired user\n   */\n  clearUserKey: (clearSecretStorage?: boolean, userId?: string) => Promise<void>;\n  /**\n   * Clears the user's stored version of the user key\n   * @param keySuffix The desired version of the key to clear\n   * @param userId The desired user\n   */\n  clearStoredUserKey: (keySuffix: KeySuffixOptions, userId?: string) => Promise<void>;\n  /**\n   * Stores the master key encrypted user key\n   * @param userKeyMasterKey The master key encrypted user key to set\n   * @param userId The desired user\n   */\n  setMasterKeyEncryptedUserKey: (UserKeyMasterKey: string, userId?: string) => Promise<void>;\n  /**\n   * Sets the user's master key\n   * @param key The user's master key to set\n   * @param userId The desired user\n   */\n  setMasterKey: (key: MasterKey, userId?: string) => Promise<void>;\n  /**\n   * @param userId The desired user\n   * @returns The user's master key\n   */\n  getMasterKey: (userId?: string) => Promise<MasterKey>;\n\n  /**\n   * @param password The user's master password that will be used to derive a master key if one isn't found\n   * @param userId The desired user\n   */\n  getOrDeriveMasterKey: (password: string, userId?: string) => Promise<MasterKey>;\n  /**\n   * Generates a master key from the provided password\n   * @param password The user's master password\n   * @param email The user's email\n   * @param kdf The user's selected key derivation function to use\n   * @param KdfConfig The user's key derivation function configuration\n   * @returns A master key derived from the provided password\n   */\n  makeMasterKey: (\n    password: string,\n    email: string,\n    kdf: KdfType,\n    KdfConfig: KdfConfig\n  ) => Promise<MasterKey>;\n  /**\n   * Clears the user's master key\n   * @param userId The desired user\n   */\n  clearMasterKey: (userId?: string) => Promise<void>;\n  /**\n   * Encrypts the existing (or provided) user key with the\n   * provided master key\n   * @param masterKey The user's master key\n   * @param userKey The user key\n   * @returns The user key and the master key protected version of it\n   */\n  encryptUserKeyWithMasterKey: (\n    masterKey: MasterKey,\n    userKey?: UserKey\n  ) => Promise<[UserKey, EncString]>;\n  /**\n   * Decrypts the user key with the provided master key\n   * @param masterKey The user's master key\n   * @param userKey The user's encrypted symmetric key\n   * @param userId The desired user\n   * @returns The user key\n   */\n  decryptUserKeyWithMasterKey: (\n    masterKey: MasterKey,\n    userKey?: EncString,\n    userId?: string\n  ) => Promise<UserKey>;\n  /**\n   * Creates a master password hash from the user's master password. Can\n   * be used for local authentication or for server authentication depending\n   * on the hashPurpose provided.\n   * @param password The user's master password\n   * @param key The user's master key\n   * @param hashPurpose The iterations to use for the hash\n   * @returns The user's master password hash\n   */\n  hashMasterKey: (password: string, key: MasterKey, hashPurpose?: HashPurpose) => Promise<string>;\n  /**\n   * Sets the user's master password hash\n   * @param keyHash The user's master password hash to set\n   */\n  setMasterKeyHash: (keyHash: string) => Promise<void>;\n  /**\n   * @returns The user's master password hash\n   */\n  getMasterKeyHash: () => Promise<string>;\n  /**\n   * Clears the user's stored master password hash\n   * @param userId The desired user\n   */\n  clearMasterKeyHash: (userId?: string) => Promise<void>;\n  /**\n   * Compares the provided master password to the stored password hash and server password hash.\n   * Updates the stored hash if outdated.\n   * @param masterPassword The user's master password\n   * @param key The user's master key\n   * @returns True if the provided master password matches either the stored\n   * key hash or the server key hash\n   */\n  compareAndUpdateKeyHash: (masterPassword: string, masterKey: MasterKey) => Promise<boolean>;\n  /**\n   * Stores the encrypted organization keys and clears any decrypted\n   * organization keys currently in memory\n   * @param orgs The organizations to set keys for\n   * @param providerOrgs The provider organizations to set keys for\n   */\n  setOrgKeys: (\n    orgs: ProfileOrganizationResponse[],\n    providerOrgs: ProfileProviderOrganizationResponse[]\n  ) => Promise<void>;\n  /**\n   * Returns the organization's symmetric key\n   * @param orgId The desired organization\n   * @returns The organization's symmetric key\n   */\n  getOrgKey: (orgId: string) => Promise<OrgKey>;\n  /**\n   * @returns A map of the organization Ids to their symmetric keys\n   */\n  getOrgKeys: () => Promise<Map<string, SymmetricCryptoKey>>;\n  /**\n   * Uses the org key to derive a new symmetric key for encrypting data\n   * @param orgKey The organization's symmetric key\n   */\n  makeDataEncKey: <T extends UserKey | OrgKey>(key: T) => Promise<[SymmetricCryptoKey, EncString]>;\n  /**\n   * Clears the user's stored organization keys\n   * @param memoryOnly Clear only the in-memory keys\n   * @param userId The desired user\n   */\n  clearOrgKeys: (memoryOnly?: boolean, userId?: string) => Promise<void>;\n  /**\n   * Stores the encrypted provider keys and clears any decrypted\n   * provider keys currently in memory\n   * @param providers The providers to set keys for\n   */\n  setProviderKeys: (orgs: ProfileProviderResponse[]) => Promise<void>;\n  /**\n   * @param providerId The desired provider\n   * @returns The provider's symmetric key\n   */\n  getProviderKey: (providerId: string) => Promise<ProviderKey>;\n  /**\n   * @returns A map of the provider Ids to their symmetric keys\n   */\n  getProviderKeys: () => Promise<Map<string, ProviderKey>>;\n  /**\n   * @param memoryOnly Clear only the in-memory keys\n   * @param userId The desired user\n   */\n  clearProviderKeys: (memoryOnly?: boolean, userId?: string) => Promise<void>;\n  /**\n   * Returns the public key from memory. If not available, extracts it\n   * from the private key and stores it in memory\n   * @returns The user's public key\n   */\n  getPublicKey: () => Promise<Uint8Array>;\n  /**\n   * Creates a new organization key and encrypts it with the user's public key.\n   * This method can also return Provider keys for creating new Provider users.\n   * @returns The new encrypted org key and the decrypted key itself\n   */\n  makeOrgKey: <T extends OrgKey | ProviderKey>() => Promise<[EncString, T]>;\n  /**\n   * Sets the the user's encrypted private key in storage and\n   * clears the decrypted private key from memory\n   * Note: does not clear the private key if null is provided\n   * @param encPrivateKey An encrypted private key\n   */\n  setPrivateKey: (encPrivateKey: string) => Promise<void>;\n  /**\n   * Returns the private key from memory. If not available, decrypts it\n   * from storage and stores it in memory\n   * @returns The user's private key\n   */\n  getPrivateKey: () => Promise<Uint8Array>;\n  /**\n   * Generates a fingerprint phrase for the user based on their public key\n   * @param fingerprintMaterial Fingerprint material\n   * @param publicKey The user's public key\n   * @returns The user's fingerprint phrase\n   */\n  getFingerprint: (fingerprintMaterial: string, publicKey?: Uint8Array) => Promise<string[]>;\n  /**\n   * Generates a new keypair\n   * @param key A key to encrypt the private key with. If not provided,\n   * defaults to the user key\n   * @returns A new keypair: [publicKey in Base64, encrypted privateKey]\n   */\n  makeKeyPair: (key?: SymmetricCryptoKey) => Promise<[string, EncString]>;\n  /**\n   * Clears the user's key pair\n   * @param memoryOnly Clear only the in-memory keys\n   * @param userId The desired user\n   */\n  clearKeyPair: (memoryOnly?: boolean, userId?: string) => Promise<void[]>;\n  /**\n   * @param pin The user's pin\n   * @param salt The user's salt\n   * @param kdf The user's kdf\n   * @param kdfConfig The user's kdf config\n   * @returns A key derived from the user's pin\n   */\n  makePinKey: (pin: string, salt: string, kdf: KdfType, kdfConfig: KdfConfig) => Promise<PinKey>;\n  /**\n   * Clears the user's pin keys from storage\n   * Note: This will remove the stored pin and as a result,\n   * disable pin protection for the user\n   * @param userId The desired user\n   */\n  clearPinKeys: (userId?: string) => Promise<void>;\n  /**\n   * Decrypts the user key with their pin\n   * @param pin The user's PIN\n   * @param salt The user's salt\n   * @param kdf The user's KDF\n   * @param kdfConfig The user's KDF config\n   * @param pinProtectedUserKey The user's PIN protected symmetric key, if not provided\n   * it will be retrieved from storage\n   * @returns The decrypted user key\n   */\n  decryptUserKeyWithPin: (\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    protectedKeyCs?: EncString\n  ) => Promise<UserKey>;\n  /**\n   * Creates a new Pin key that encrypts the user key instead of the\n   * master key. Clears the old Pin key from state.\n   * @param masterPasswordOnRestart True if Master Password on Restart is enabled\n   * @param pin User's PIN\n   * @param email User's email\n   * @param kdf User's KdfType\n   * @param kdfConfig User's KdfConfig\n   * @param oldPinKey The old Pin key from state (retrieved from different\n   * places depending on if Master Password on Restart was enabled)\n   * @returns The user key\n   */\n  decryptAndMigrateOldPinKey: (\n    masterPasswordOnRestart: boolean,\n    pin: string,\n    email: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    oldPinKey: EncString\n  ) => Promise<UserKey>;\n  /**\n   * Replaces old master auto keys with new user auto keys\n   */\n  migrateAutoKeyIfNeeded: (userId?: string) => Promise<void>;\n  /**\n   * @param keyMaterial The key material to derive the send key from\n   * @returns A new send key\n   */\n  makeSendKey: (keyMaterial: Uint8Array) => Promise<SymmetricCryptoKey>;\n  /**\n   * Clears all of the user's keys from storage\n   * @param userId The user's Id\n   */\n  clearKeys: (userId?: string) => Promise<any>;\n  /**\n   * RSA encrypts a value.\n   * @param data The data to encrypt\n   * @param publicKey The public key to use for encryption, if not provided, the user's public key will be used\n   * @returns The encrypted data\n   */\n  rsaEncrypt: (data: Uint8Array, publicKey?: Uint8Array) => Promise<EncString>;\n  /**\n   * Decrypts a value using RSA.\n   * @param encValue The encrypted value to decrypt\n   * @param privateKeyValue The private key to use for decryption\n   * @returns The decrypted value\n   */\n  rsaDecrypt: (encValue: string, privateKeyValue?: Uint8Array) => Promise<Uint8Array>;\n  randomNumber: (min: number, max: number) => Promise<number>;\n  /**\n   * Generates a new cipher key\n   * @returns A new cipher key\n   */\n  makeCipherKey: () => Promise<CipherKey>;\n\n  /**\n   * Initialize all necessary crypto keys needed for a new account.\n   * Warning! This completely replaces any existing keys!\n   * @returns The user's newly created  public key, private key, and encrypted private key\n   */\n  initAccount: () => Promise<{\n    userKey: UserKey;\n    publicKey: string;\n    privateKey: EncString;\n  }>;\n\n  /**\n   * @deprecated Left for migration purposes. Use decryptUserKeyWithPin instead.\n   */\n  decryptMasterKeyWithPin: (\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    protectedKeyCs?: EncString\n  ) => Promise<MasterKey>;\n  /**\n   * Previously, the master key was used for any additional key like the biometrics or pin key.\n   * We have switched to using the user key for these purposes. This method is for clearing the state\n   * of the older keys on logout or post migration.\n   * @param keySuffix The desired type of key to clear\n   * @param userId The desired user\n   */\n  clearDeprecatedKeys: (keySuffix: KeySuffixOptions, userId?: string) => Promise<void>;\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encrypt\n   */\n  encrypt: (plainValue: string | Uint8Array, key?: SymmetricCryptoKey) => Promise<EncString>;\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encryptToBytes\n   */\n  encryptToBytes: (plainValue: Uint8Array, key?: SymmetricCryptoKey) => Promise<EncArrayBuffer>;\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  decryptToBytes: (encString: EncString, key?: SymmetricCryptoKey) => Promise<Uint8Array>;\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToUtf8\n   */\n  decryptToUtf8: (encString: EncString, key?: SymmetricCryptoKey) => Promise<string>;\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  decryptFromBytes: (encBuffer: EncArrayBuffer, key: SymmetricCryptoKey) => Promise<Uint8Array>;\n}\n","import { Pipe } from \"@angular/core\";\n\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\n@Pipe({\n  name: \"fingerprint\",\n})\nexport class FingerprintPipe {\n  constructor(private cryptoService: CryptoService) {}\n\n  async transform(publicKey: string | Uint8Array, fingerprintMaterial: string): Promise<string> {\n    try {\n      if (typeof publicKey === \"string\") {\n        publicKey = Utils.fromB64ToArray(publicKey);\n      }\n\n      const fingerprint = await this.cryptoService.getFingerprint(fingerprintMaterial, publicKey);\n\n      if (fingerprint != null) {\n        return fingerprint.join(\"-\");\n      }\n\n      return \"\";\n    } catch {\n      return \"\";\n    }\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\n@Pipe({\n  name: \"i18n\",\n})\nexport class I18nPipe implements PipeTransform {\n  constructor(private i18nService: I18nService) {}\n\n  transform(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    return this.i18nService.t(id, p1, p2, p3);\n  }\n}\n","import { CommonModule, DatePipe } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { CalloutComponent } from \"./components/callout.component\";\nimport { BitwardenToastModule } from \"./components/toastr.component\";\nimport { A11yInvalidDirective } from \"./directives/a11y-invalid.directive\";\nimport { A11yTitleDirective } from \"./directives/a11y-title.directive\";\nimport { ApiActionDirective } from \"./directives/api-action.directive\";\nimport { AutofocusDirective } from \"./directives/autofocus.directive\";\nimport { BoxRowDirective } from \"./directives/box-row.directive\";\nimport { CopyClickDirective } from \"./directives/copy-click.directive\";\nimport { CopyTextDirective } from \"./directives/copy-text.directive\";\nimport { FallbackSrcDirective } from \"./directives/fallback-src.directive\";\nimport { IfFeatureDirective } from \"./directives/if-feature.directive\";\nimport { InputStripSpacesDirective } from \"./directives/input-strip-spaces.directive\";\nimport { InputVerbatimDirective } from \"./directives/input-verbatim.directive\";\nimport { LaunchClickDirective } from \"./directives/launch-click.directive\";\nimport { NotPremiumDirective } from \"./directives/not-premium.directive\";\nimport { StopClickDirective } from \"./directives/stop-click.directive\";\nimport { StopPropDirective } from \"./directives/stop-prop.directive\";\nimport { TrueFalseValueDirective } from \"./directives/true-false-value.directive\";\nimport { CreditCardNumberPipe } from \"./pipes/credit-card-number.pipe\";\nimport { SearchCiphersPipe } from \"./pipes/search-ciphers.pipe\";\nimport { SearchPipe } from \"./pipes/search.pipe\";\nimport { UserNamePipe } from \"./pipes/user-name.pipe\";\nimport { UserTypePipe } from \"./pipes/user-type.pipe\";\nimport { EllipsisPipe } from \"./platform/pipes/ellipsis.pipe\";\nimport { FingerprintPipe } from \"./platform/pipes/fingerprint.pipe\";\nimport { I18nPipe } from \"./platform/pipes/i18n.pipe\";\nimport { PasswordStrengthComponent } from \"./shared/components/password-strength/password-strength.component\";\nimport { ExportScopeCalloutComponent } from \"./tools/export/components/export-scope-callout.component\";\nimport { IconComponent } from \"./vault/components/icon.component\";\n\n@NgModule({\n  imports: [\n    BitwardenToastModule.forRoot({\n      maxOpened: 5,\n      autoDismiss: true,\n      closeButton: true,\n    }),\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [\n    A11yInvalidDirective,\n    A11yTitleDirective,\n    ApiActionDirective,\n    AutofocusDirective,\n    BoxRowDirective,\n    CalloutComponent,\n    CopyTextDirective,\n    CreditCardNumberPipe,\n    EllipsisPipe,\n    ExportScopeCalloutComponent,\n    FallbackSrcDirective,\n    I18nPipe,\n    IconComponent,\n    InputStripSpacesDirective,\n    InputVerbatimDirective,\n    NotPremiumDirective,\n    SearchCiphersPipe,\n    SearchPipe,\n    StopClickDirective,\n    StopPropDirective,\n    TrueFalseValueDirective,\n    CopyClickDirective,\n    LaunchClickDirective,\n    UserNamePipe,\n    PasswordStrengthComponent,\n    UserTypePipe,\n    IfFeatureDirective,\n    FingerprintPipe,\n  ],\n  exports: [\n    A11yInvalidDirective,\n    A11yTitleDirective,\n    ApiActionDirective,\n    AutofocusDirective,\n    BitwardenToastModule,\n    BoxRowDirective,\n    CalloutComponent,\n    CopyTextDirective,\n    CreditCardNumberPipe,\n    EllipsisPipe,\n    ExportScopeCalloutComponent,\n    FallbackSrcDirective,\n    I18nPipe,\n    IconComponent,\n    InputStripSpacesDirective,\n    InputVerbatimDirective,\n    NotPremiumDirective,\n    SearchCiphersPipe,\n    SearchPipe,\n    StopClickDirective,\n    StopPropDirective,\n    TrueFalseValueDirective,\n    CopyClickDirective,\n    LaunchClickDirective,\n    UserNamePipe,\n    PasswordStrengthComponent,\n    UserTypePipe,\n    IfFeatureDirective,\n    FingerprintPipe,\n  ],\n  providers: [\n    CreditCardNumberPipe,\n    DatePipe,\n    I18nPipe,\n    SearchPipe,\n    UserNamePipe,\n    UserTypePipe,\n    FingerprintPipe,\n  ],\n})\nexport class JslibModule {}\n","export enum AuthenticationStatus {\n  LoggedOut = 0,\n  Locked = 1,\n  Unlocked = 2,\n}\n","export enum ForceResetPasswordReason {\n  /**\n   * A password reset should not be forced.\n   */\n  None,\n\n  /**\n   * Occurs when an organization admin forces a user to reset their password.\n   */\n  AdminForcePasswordReset,\n\n  /**\n   * Occurs when a user logs in / unlocks their vault with a master password that does not meet an organization's\n   * master password policy that is enforced on login/unlock.\n   */\n  WeakMasterPassword,\n}\n","import { Observable } from \"rxjs\";\n\nimport { AuthRequestPushNotification } from \"../../models/response/notification.response\";\nimport { MasterKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { AuthenticationStatus } from \"../enums/authentication-status\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport {\n  UserApiLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  PasswordlessLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nexport abstract class AuthService {\n  masterPasswordHash: string;\n  email: string;\n  accessCode: string;\n  authRequestId: string;\n  ssoEmail2FaSessionToken: string;\n\n  logIn: (\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ) => Promise<AuthResult>;\n  logInTwoFactor: (\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ) => Promise<AuthResult>;\n  logOut: (callback: () => void) => void;\n  makePreloginKey: (masterPassword: string, email: string) => Promise<MasterKey>;\n  authingWithUserApiKey: () => boolean;\n  authingWithSso: () => boolean;\n  authingWithPassword: () => boolean;\n  authingWithPasswordless: () => boolean;\n  getAuthStatus: (userId?: string) => Promise<AuthenticationStatus>;\n  authResponsePushNotification: (notification: AuthRequestPushNotification) => Promise<any>;\n  passwordlessLogin: (\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ) => Promise<AuthRequestResponse>;\n  getPushNotificationObs$: () => Observable<any>;\n}\n","export abstract class MessagingService {\n  send: (subscriber: string, arg?: any) => void;\n}\n","import { Organization } from \"../../admin-console/models/domain/organization\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport abstract class KeyConnectorService {\n  setMasterKeyFromUrl: (url?: string) => Promise<void>;\n  getManagingOrganization: () => Promise<Organization>;\n  getUsesKeyConnector: () => Promise<boolean>;\n  migrateUser: () => Promise<void>;\n  userNeedsMigration: () => Promise<boolean>;\n  convertNewSsoUserToKeyConnector: (\n    tokenResponse: IdentityTokenResponse,\n    orgId: string\n  ) => Promise<void>;\n  setUsesKeyConnector: (enabled: boolean) => Promise<void>;\n  setConvertAccountRequired: (status: boolean) => Promise<void>;\n  getConvertAccountRequired: () => Promise<boolean>;\n  removeConvertAccountRequired: () => Promise<void>;\n  clear: () => Promise<void>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../admin-console/models/domain/policy\";\nimport { AdminAuthRequestStorable } from \"../../auth/models/domain/admin-auth-req-storable\";\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../auth/models/domain/force-reset-password-reason\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport { BiometricKey } from \"../../auth/types/biometric-key\";\nimport { KdfType, ThemeType, UriMatchType } from \"../../enums\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { WindowState } from \"../../models/domain/window-state\";\nimport { GeneratorOptions } from \"../../tools/generator/generator-options\";\nimport { GeneratedPasswordHistory, PasswordGeneratorOptions } from \"../../tools/generator/password\";\nimport { UsernameGeneratorOptions } from \"../../tools/generator/username\";\nimport { SendData } from \"../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../tools/send/models/view/send.view\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { LocalData } from \"../../vault/models/data/local.data\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\nimport { AddEditCipherInfo } from \"../../vault/types/add-edit-cipher-info\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport {\n  Account,\n  AccountDecryptionOptions,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport {\n  DeviceKey,\n  MasterKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class StateService<T extends Account = Account> {\n  accounts$: Observable<{ [userId: string]: T }>;\n  activeAccount$: Observable<string>;\n  activeAccountUnlocked$: Observable<boolean>;\n\n  addAccount: (account: T) => Promise<void>;\n  setActiveUser: (userId: string) => Promise<void>;\n  clean: (options?: StorageOptions) => Promise<void>;\n  init: () => Promise<void>;\n\n  getAccessToken: (options?: StorageOptions) => Promise<string>;\n  setAccessToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getAddEditCipherInfo: (options?: StorageOptions) => Promise<AddEditCipherInfo>;\n  setAddEditCipherInfo: (value: AddEditCipherInfo, options?: StorageOptions) => Promise<void>;\n  getAlwaysShowDock: (options?: StorageOptions) => Promise<boolean>;\n  setAlwaysShowDock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientId: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientId: (value: string, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientSecret: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientSecret: (value: string, options?: StorageOptions) => Promise<void>;\n  getAutoConfirmFingerPrints: (options?: StorageOptions) => Promise<boolean>;\n  setAutoConfirmFingerprints: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getAutoFillOnPageLoadDefault: (options?: StorageOptions) => Promise<boolean>;\n  setAutoFillOnPageLoadDefault: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricAwaitingAcceptance: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricAwaitingAcceptance: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricFingerprintValidated: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricFingerprintValidated: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricText: (options?: StorageOptions) => Promise<string>;\n  setBiometricText: (value: string, options?: StorageOptions) => Promise<void>;\n  getBiometricUnlock: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricUnlock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getCanAccessPremium: (options?: StorageOptions) => Promise<boolean>;\n  getHasPremiumPersonally: (options?: StorageOptions) => Promise<boolean>;\n  setHasPremiumPersonally: (value: boolean, options?: StorageOptions) => Promise<void>;\n  setHasPremiumFromOrganization: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getHasPremiumFromOrganization: (options?: StorageOptions) => Promise<boolean>;\n  getClearClipboard: (options?: StorageOptions) => Promise<number>;\n  setClearClipboard: (value: number, options?: StorageOptions) => Promise<void>;\n  getCollapsedGroupings: (options?: StorageOptions) => Promise<string[]>;\n  setCollapsedGroupings: (value: string[], options?: StorageOptions) => Promise<void>;\n  getConvertAccountToKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setConvertAccountToKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;\n  /**\n   * gets the user key\n   */\n  getUserKey: (options?: StorageOptions) => Promise<UserKey>;\n  /**\n   * Sets the user key\n   */\n  setUserKey: (value: UserKey, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's master key\n   */\n  getMasterKey: (options?: StorageOptions) => Promise<MasterKey>;\n  /**\n   * Sets the user's master key\n   */\n  setMasterKey: (value: MasterKey, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user key encrypted by the master key\n   */\n  getMasterKeyEncryptedUserKey: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Sets the user key encrypted by the master key\n   */\n  setMasterKeyEncryptedUserKey: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's auto key\n   */\n  getUserKeyAutoUnlock: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Sets the user's auto key\n   */\n  setUserKeyAutoUnlock: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's biometric key\n   */\n  getUserKeyBiometric: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Checks if the user has a biometric key available\n   */\n  hasUserKeyBiometric: (options?: StorageOptions) => Promise<boolean>;\n  /**\n   * Sets the user's biometric key\n   */\n  setUserKeyBiometric: (value: BiometricKey, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is disabled\n   */\n  getPinKeyEncryptedUserKey: (options?: StorageOptions) => Promise<EncString>;\n  /**\n   * Sets the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is disabled\n   */\n  setPinKeyEncryptedUserKey: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the ephemeral version of the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is enabled\n   */\n  getPinKeyEncryptedUserKeyEphemeral: (options?: StorageOptions) => Promise<EncString>;\n  /**\n   * Sets the ephemeral version of the user key encrypted by the Pin key.\n   * Used when Lock with MP on Restart is enabled\n   */\n  setPinKeyEncryptedUserKeyEphemeral: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getUserKeyMasterKey instead\n   */\n  getEncryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use setUserKeyMasterKey instead\n   */\n  setEncryptedCryptoSymmetricKey: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated For legacy purposes only, use getMasterKey instead\n   */\n  getCryptoMasterKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;\n  /**\n   * @deprecated For migration purposes only, use getUserKeyAuto instead\n   */\n  getCryptoMasterKeyAuto: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use setUserKeyAuto instead\n   */\n  setCryptoMasterKeyAuto: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getUserKeyBiometric instead\n   */\n  getCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use hasUserKeyBiometric instead\n   */\n  hasCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<boolean>;\n  /**\n   * @deprecated For migration purposes only, use setUserKeyBiometric instead\n   */\n  setCryptoMasterKeyBiometric: (value: BiometricKey, options?: StorageOptions) => Promise<void>;\n  getDecryptedCiphers: (options?: StorageOptions) => Promise<CipherView[]>;\n  setDecryptedCiphers: (value: CipherView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedCollections: (options?: StorageOptions) => Promise<CollectionView[]>;\n  setDecryptedCollections: (value: CollectionView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedOrganizationKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setDecryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getDecryptedUserKeyPin instead\n   */\n  getDecryptedPinProtected: (options?: StorageOptions) => Promise<EncString>;\n  /**\n   * @deprecated For migration purposes only, use setDecryptedUserKeyPin instead\n   */\n  setDecryptedPinProtected: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  getDecryptedPolicies: (options?: StorageOptions) => Promise<Policy[]>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  setDecryptedPolicies: (value: Policy[], options?: StorageOptions) => Promise<void>;\n  getDecryptedPrivateKey: (options?: StorageOptions) => Promise<Uint8Array>;\n  setDecryptedPrivateKey: (value: Uint8Array, options?: StorageOptions) => Promise<void>;\n  getDecryptedProviderKeys: (options?: StorageOptions) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedProviderKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  getDecryptedSends: (options?: StorageOptions) => Promise<SendView[]>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  setDecryptedSends: (value: SendView[], options?: StorageOptions) => Promise<void>;\n  getDefaultUriMatch: (options?: StorageOptions) => Promise<UriMatchType>;\n  setDefaultUriMatch: (value: UriMatchType, options?: StorageOptions) => Promise<void>;\n  getDisableAddLoginNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAddLoginNotification: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoBiometricsPrompt: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoBiometricsPrompt: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoTotpCopy: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoTotpCopy: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableBadgeCounter: (options?: StorageOptions) => Promise<boolean>;\n  setDisableBadgeCounter: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableChangedPasswordNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableChangedPasswordNotification: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDisableContextMenuItem: (options?: StorageOptions) => Promise<boolean>;\n  setDisableContextMenuItem: (value: boolean, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this, use SettingsService\n   */\n  getDisableFavicon: (options?: StorageOptions) => Promise<boolean>;\n  /**\n   * @deprecated Do not call this, use SettingsService\n   */\n  setDisableFavicon: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableGa: (options?: StorageOptions) => Promise<boolean>;\n  setDisableGa: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDismissedAutofillCallout: (options?: StorageOptions) => Promise<boolean>;\n  setDismissedAutofillCallout: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowCardsCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowCardsCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowIdentitiesCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowIdentitiesCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDuckDuckGoSharedKey: (options?: StorageOptions) => Promise<string>;\n  setDuckDuckGoSharedKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getDeviceKey: (options?: StorageOptions) => Promise<DeviceKey | null>;\n  setDeviceKey: (value: DeviceKey | null, options?: StorageOptions) => Promise<void>;\n  getAdminAuthRequest: (options?: StorageOptions) => Promise<AdminAuthRequestStorable | null>;\n  setAdminAuthRequest: (\n    adminAuthRequest: AdminAuthRequestStorable,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getShouldTrustDevice: (options?: StorageOptions) => Promise<boolean | null>;\n  setShouldTrustDevice: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getAccountDecryptionOptions: (\n    options?: StorageOptions\n  ) => Promise<AccountDecryptionOptions | null>;\n  setAccountDecryptionOptions: (\n    value: AccountDecryptionOptions,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEmail: (options?: StorageOptions) => Promise<string>;\n  setEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getEmailVerified: (options?: StorageOptions) => Promise<boolean>;\n  setEmailVerified: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAlwaysOnTop: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAlwaysOnTop: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAutoFillOnPageLoad: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAutoFillOnPageLoad: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegration: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegrationFingerprint: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegrationFingerprint: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableCloseToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableCloseToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableDuckDuckGoBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableDuckDuckGoBrowserIntegration: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableFullWidth: (options?: StorageOptions) => Promise<boolean>;\n  setEnableFullWidth: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableMinimizeToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableMinimizeToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableStartToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableStartToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEncryptedCiphers: (options?: StorageOptions) => Promise<{ [id: string]: CipherData }>;\n  setEncryptedCiphers: (\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedCollections: (options?: StorageOptions) => Promise<{ [id: string]: CollectionData }>;\n  setEncryptedCollections: (\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  getEncryptedFolders: (options?: StorageOptions) => Promise<{ [id: string]: FolderData }>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  setEncryptedFolders: (\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<{ [orgId: string]: EncryptedOrganizationKeyData }>;\n  setEncryptedOrganizationKeys: (\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setEncryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated For migration purposes only, use getEncryptedUserKeyPin instead\n   */\n  getEncryptedPinProtected: (options?: StorageOptions) => Promise<string>;\n  /**\n   * @deprecated For migration purposes only, use setEncryptedUserKeyPin instead\n   */\n  setEncryptedPinProtected: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  getEncryptedPolicies: (options?: StorageOptions) => Promise<{ [id: string]: PolicyData }>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  setEncryptedPolicies: (\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPrivateKey: (options?: StorageOptions) => Promise<string>;\n  setEncryptedPrivateKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getEncryptedProviderKeys: (options?: StorageOptions) => Promise<any>;\n  setEncryptedProviderKeys: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  getEncryptedSends: (options?: StorageOptions) => Promise<{ [id: string]: SendData }>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  setEncryptedSends: (value: { [id: string]: SendData }, options?: StorageOptions) => Promise<void>;\n  getEntityId: (options?: StorageOptions) => Promise<string>;\n  setEntityId: (value: string, options?: StorageOptions) => Promise<void>;\n  getEntityType: (options?: StorageOptions) => Promise<any>;\n  setEntityType: (value: string, options?: StorageOptions) => Promise<void>;\n  getEnvironmentUrls: (options?: StorageOptions) => Promise<EnvironmentUrls>;\n  setEnvironmentUrls: (value: EnvironmentUrls, options?: StorageOptions) => Promise<void>;\n  getRegion: (options?: StorageOptions) => Promise<string>;\n  setRegion: (value: string, options?: StorageOptions) => Promise<void>;\n  getEquivalentDomains: (options?: StorageOptions) => Promise<string[][]>;\n  setEquivalentDomains: (value: string, options?: StorageOptions) => Promise<void>;\n  getEventCollection: (options?: StorageOptions) => Promise<EventData[]>;\n  setEventCollection: (value: EventData[], options?: StorageOptions) => Promise<void>;\n  getEverHadUserKey: (options?: StorageOptions) => Promise<boolean>;\n  setEverHadUserKey: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEverBeenUnlocked: (options?: StorageOptions) => Promise<boolean>;\n  setEverBeenUnlocked: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getForcePasswordResetReason: (options?: StorageOptions) => Promise<ForceResetPasswordReason>;\n  setForcePasswordResetReason: (\n    value: ForceResetPasswordReason,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getInstalledVersion: (options?: StorageOptions) => Promise<string>;\n  setInstalledVersion: (value: string, options?: StorageOptions) => Promise<void>;\n  getIsAuthenticated: (options?: StorageOptions) => Promise<boolean>;\n  getKdfConfig: (options?: StorageOptions) => Promise<KdfConfig>;\n  setKdfConfig: (kdfConfig: KdfConfig, options?: StorageOptions) => Promise<void>;\n  getKdfType: (options?: StorageOptions) => Promise<KdfType>;\n  setKdfType: (value: KdfType, options?: StorageOptions) => Promise<void>;\n  getKeyHash: (options?: StorageOptions) => Promise<string>;\n  setKeyHash: (value: string, options?: StorageOptions) => Promise<void>;\n  getLastActive: (options?: StorageOptions) => Promise<number>;\n  setLastActive: (value: number, options?: StorageOptions) => Promise<void>;\n  getLastSync: (options?: StorageOptions) => Promise<string>;\n  setLastSync: (value: string, options?: StorageOptions) => Promise<void>;\n  getLocalData: (options?: StorageOptions) => Promise<{ [cipherId: string]: LocalData }>;\n  setLocalData: (\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getLocale: (options?: StorageOptions) => Promise<string>;\n  setLocale: (value: string, options?: StorageOptions) => Promise<void>;\n  getMainWindowSize: (options?: StorageOptions) => Promise<number>;\n  setMainWindowSize: (value: number, options?: StorageOptions) => Promise<void>;\n  getMinimizeOnCopyToClipboard: (options?: StorageOptions) => Promise<boolean>;\n  setMinimizeOnCopyToClipboard: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getNeverDomains: (options?: StorageOptions) => Promise<{ [id: string]: any }>;\n  setNeverDomains: (value: { [id: string]: any }, options?: StorageOptions) => Promise<void>;\n  getNoAutoPromptBiometricsText: (options?: StorageOptions) => Promise<string>;\n  setNoAutoPromptBiometricsText: (value: string, options?: StorageOptions) => Promise<void>;\n  getOpenAtLogin: (options?: StorageOptions) => Promise<boolean>;\n  setOpenAtLogin: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getOrganizationInvitation: (options?: StorageOptions) => Promise<any>;\n  setOrganizationInvitation: (value: any, options?: StorageOptions) => Promise<void>;\n  getEmergencyAccessInvitation: (options?: StorageOptions) => Promise<any>;\n  setEmergencyAccessInvitation: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  getOrganizations: (options?: StorageOptions) => Promise<{ [id: string]: OrganizationData }>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  setOrganizations: (\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getPasswordGenerationOptions: (options?: StorageOptions) => Promise<PasswordGeneratorOptions>;\n  setPasswordGenerationOptions: (\n    value: PasswordGeneratorOptions,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getUsernameGenerationOptions: (options?: StorageOptions) => Promise<UsernameGeneratorOptions>;\n  setUsernameGenerationOptions: (\n    value: UsernameGeneratorOptions,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getGeneratorOptions: (options?: StorageOptions) => Promise<GeneratorOptions>;\n  setGeneratorOptions: (value: GeneratorOptions, options?: StorageOptions) => Promise<void>;\n  /**\n   * Gets the user's Pin, encrypted by the user key\n   */\n  getProtectedPin: (options?: StorageOptions) => Promise<string>;\n  /**\n   * Sets the user's Pin, encrypted by the user key\n   */\n  setProtectedPin: (value: string, options?: StorageOptions) => Promise<void>;\n  getProviders: (options?: StorageOptions) => Promise<{ [id: string]: ProviderData }>;\n  setProviders: (value: { [id: string]: ProviderData }, options?: StorageOptions) => Promise<void>;\n  getPublicKey: (options?: StorageOptions) => Promise<Uint8Array>;\n  setPublicKey: (value: Uint8Array, options?: StorageOptions) => Promise<void>;\n  getRefreshToken: (options?: StorageOptions) => Promise<string>;\n  setRefreshToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getRememberedEmail: (options?: StorageOptions) => Promise<string>;\n  setRememberedEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getSecurityStamp: (options?: StorageOptions) => Promise<string>;\n  setSecurityStamp: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  getSettings: (options?: StorageOptions) => Promise<AccountSettingsSettings>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  setSettings: (value: AccountSettingsSettings, options?: StorageOptions) => Promise<void>;\n  getSsoCodeVerifier: (options?: StorageOptions) => Promise<string>;\n  setSsoCodeVerifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoOrgIdentifier: (options?: StorageOptions) => Promise<string>;\n  setSsoOrganizationIdentifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoState: (options?: StorageOptions) => Promise<string>;\n  setSsoState: (value: string, options?: StorageOptions) => Promise<void>;\n  getUserSsoOrganizationIdentifier: (options?: StorageOptions) => Promise<string>;\n  setUserSsoOrganizationIdentifier: (\n    value: string | null,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getTheme: (options?: StorageOptions) => Promise<ThemeType>;\n  setTheme: (value: ThemeType, options?: StorageOptions) => Promise<void>;\n  getTwoFactorToken: (options?: StorageOptions) => Promise<string>;\n  setTwoFactorToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getUserId: (options?: StorageOptions) => Promise<string>;\n  getUsesKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setUsesKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getVaultTimeout: (options?: StorageOptions) => Promise<number>;\n  setVaultTimeout: (value: number, options?: StorageOptions) => Promise<void>;\n  getVaultTimeoutAction: (options?: StorageOptions) => Promise<string>;\n  setVaultTimeoutAction: (value: string, options?: StorageOptions) => Promise<void>;\n  getApproveLoginRequests: (options?: StorageOptions) => Promise<boolean>;\n  setApproveLoginRequests: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getWindow: () => Promise<WindowState>;\n  setWindow: (value: WindowState) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  getServerConfig: (options?: StorageOptions) => Promise<ServerConfigData>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  setServerConfig: (value: ServerConfigData, options?: StorageOptions) => Promise<void>;\n\n  getAvatarColor: (options?: StorageOptions) => Promise<string | null | undefined>;\n  setAvatarColor: (value: string, options?: StorageOptions) => Promise<void>;\n  getActivateAutoFillOnPageLoadFromPolicy: (\n    options?: StorageOptions\n  ) => Promise<boolean | undefined>;\n  setActivateAutoFillOnPageLoadFromPolicy: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getSMOnboardingTasks: (\n    options?: StorageOptions\n  ) => Promise<Record<string, Record<string, boolean>>>;\n  setSMOnboardingTasks: (\n    value: Record<string, Record<string, boolean>>,\n    options?: StorageOptions\n  ) => Promise<void>;\n}\n","import { Injectable } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private messagingService: MessagingService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService\n  ) {}\n\n  async canActivate(route: ActivatedRouteSnapshot, routerState: RouterStateSnapshot) {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      this.messagingService.send(\"authBlocked\", { url: routerState.url });\n      return false;\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (routerState != null) {\n        this.messagingService.send(\"lockedUrl\", { url: routerState.url });\n      }\n      return this.router.createUrlTree([\"lock\"], { queryParams: { promptBiometric: true } });\n    }\n\n    if (\n      !routerState.url.includes(\"remove-password\") &&\n      (await this.keyConnectorService.getConvertAccountRequired())\n    ) {\n      return this.router.createUrlTree([\"/remove-password\"]);\n    }\n\n    if (\n      !routerState.url.includes(\"update-temp-password\") &&\n      (await this.stateService.getForcePasswordResetReason()) != ForceResetPasswordReason.None\n    ) {\n      return this.router.createUrlTree([\"/update-temp-password\"]);\n    }\n\n    return true;\n  }\n}\n","import { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport { DeviceKey, UserKey } from \"../../platform/models/domain/symmetric-crypto-key\";\n\nexport abstract class DeviceTrustCryptoServiceAbstraction {\n  /**\n   * @description Retrieves the users choice to trust the device which can only happen after decryption\n   * Note: this value should only be used once and then reset\n   */\n  getShouldTrustDevice: () => Promise<boolean | null>;\n  setShouldTrustDevice: (value: boolean) => Promise<void>;\n\n  trustDeviceIfRequired: () => Promise<void>;\n\n  trustDevice: () => Promise<DeviceResponse>;\n  getDeviceKey: () => Promise<DeviceKey>;\n  decryptUserKeyWithDeviceKey: (\n    encryptedDevicePrivateKey: EncString,\n    encryptedUserKey: EncString,\n    deviceKey?: DeviceKey\n  ) => Promise<UserKey | null>;\n  rotateDevicesTrust: (newUserKey: UserKey, masterPasswordHash: string) => Promise<void>;\n\n  supportsDeviceTrust: () => Promise<boolean>;\n}\n","import { Verification } from \"../../../types/verification\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\n\nexport abstract class UserVerificationService {\n  buildRequest: <T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) => Promise<T>;\n  verifyUser: (verification: Verification) => Promise<boolean>;\n  requestOTP: () => Promise<void>;\n  /**\n   * Check if user has master password or only uses passwordless technologies to log in\n   * @param userId The user id to check. If not provided, the current user is used\n   * @returns True if the user has a master password\n   */\n  hasMasterPassword: (userId?: string) => Promise<boolean>;\n  /**\n   * Check if the user has a master password and has used it during their current session\n   * @param userId The user id to check. If not provided, the current user id used\n   * @returns True if the user has a master password and has used it in the current session\n   */\n  hasMasterPasswordAndMasterKeyHash: (userId?: string) => Promise<boolean>;\n}\n","import { inject } from \"@angular/core\";\nimport { CanActivateFn, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\n\nexport interface RedirectRoutes {\n  loggedIn: string;\n  loggedOut: string;\n  locked: string;\n  notDecrypted: string;\n}\n\nconst defaultRoutes: RedirectRoutes = {\n  loggedIn: \"/vault\",\n  loggedOut: \"/login\",\n  locked: \"/lock\",\n  notDecrypted: \"/login-initiated\",\n};\n\n/**\n * Guard that consolidates all redirection logic, should be applied to root route.\n */\nexport function redirectGuard(overrides: Partial<RedirectRoutes> = {}): CanActivateFn {\n  const routes = { ...defaultRoutes, ...overrides };\n  return async (route) => {\n    const authService = inject(AuthService);\n    const cryptoService = inject(CryptoService);\n    const deviceTrustCryptoService = inject(DeviceTrustCryptoServiceAbstraction);\n    const router = inject(Router);\n\n    const authStatus = await authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return router.createUrlTree([routes.loggedOut], { queryParams: route.queryParams });\n    }\n\n    if (authStatus === AuthenticationStatus.Unlocked) {\n      return router.createUrlTree([routes.loggedIn], { queryParams: route.queryParams });\n    }\n\n    // If locked, TDE is enabled, and the user hasn't decrypted yet, then redirect to the\n    // login decryption options component.\n    const tdeEnabled = await deviceTrustCryptoService.supportsDeviceTrust();\n    const everHadUserKey = await cryptoService.getEverHadUserKey();\n    if (authStatus === AuthenticationStatus.Locked && tdeEnabled && !everHadUserKey) {\n      return router.createUrlTree([routes.notDecrypted], { queryParams: route.queryParams });\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      return router.createUrlTree([routes.locked], { queryParams: route.queryParams });\n    }\n\n    return router.createUrlTree([\"/\"]);\n  };\n}\n","import { Injectable } from \"@angular/core\";\nimport { CanActivate, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\n\n@Injectable()\nexport class UnauthGuard implements CanActivate {\n  protected homepage = \"vault\";\n  constructor(private authService: AuthService, private router: Router) {}\n\n  async canActivate() {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return true;\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      return this.router.createUrlTree([\"lock\"]);\n    }\n\n    return this.router.createUrlTree([this.homepage]);\n  }\n}\n","import { Observable } from \"rxjs\";\nimport { SemVer } from \"semver\";\n\nimport { FeatureFlag } from \"../../../enums/feature-flag.enum\";\nimport { Region } from \"../environment.service\";\n\nimport { ServerConfig } from \"./server-config\";\n\nexport abstract class ConfigServiceAbstraction {\n  serverConfig$: Observable<ServerConfig | null>;\n  cloudRegion$: Observable<Region>;\n  getFeatureFlag$: <T extends boolean | number | string>(\n    key: FeatureFlag,\n    defaultValue?: T\n  ) => Observable<T>;\n  getFeatureFlag: <T extends boolean | number | string>(\n    key: FeatureFlag,\n    defaultValue?: T\n  ) => Promise<T>;\n  checkServerMeetsVersionRequirement$: (\n    minimumRequiredServerVersion: SemVer\n  ) => Observable<boolean>;\n\n  /**\n   * Force ConfigService to fetch an updated config from the server and emit it from serverConfig$\n   * @deprecated The service implementation should subscribe to an observable and use that to trigger a new fetch from\n   * server instead\n   */\n  triggerServerConfigFetch: () => void;\n}\n","import { LogLevelType } from \"../../enums\";\n\nexport abstract class LogService {\n  debug: (message: string) => void;\n  info: (message: string) => void;\n  warning: (message: string) => void;\n  error: (message: string) => void;\n  write: (level: LogLevelType, message: string) => void;\n}\n","import { ClientType, DeviceType } from \"../../enums\";\n\ninterface ToastOptions {\n  timeout?: number;\n}\n\nexport abstract class PlatformUtilsService {\n  getDevice: () => DeviceType;\n  getDeviceString: () => string;\n  getClientType: () => ClientType;\n  isFirefox: () => boolean;\n  isChrome: () => boolean;\n  isEdge: () => boolean;\n  isOpera: () => boolean;\n  isVivaldi: () => boolean;\n  isSafari: () => boolean;\n  isMacAppStore: () => boolean;\n  isViewOpen: () => Promise<boolean>;\n  launchUri: (uri: string, options?: any) => void;\n  getApplicationVersion: () => Promise<string>;\n  getApplicationVersionNumber: () => Promise<string>;\n  supportsWebAuthn: (win: Window) => boolean;\n  supportsDuo: () => boolean;\n  showToast: (\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: ToastOptions\n  ) => void;\n  isDev: () => boolean;\n  isSelfHost: () => boolean;\n  copyToClipboard: (text: string, options?: any) => void | boolean;\n  readFromClipboard: (options?: any) => Promise<string>;\n  supportsBiometric: () => Promise<boolean>;\n  authenticateBiometric: () => Promise<boolean>;\n  supportsSecureStorage: () => boolean;\n  getAutofillKeyboardShortcut: () => Promise<string>;\n}\n","export enum FeatureFlag {\n  DisplayEuEnvironmentFlag = \"display-eu-environment\",\n  DisplayLowKdfIterationWarningFlag = \"display-kdf-iteration-warning\",\n  TrustedDeviceEncryption = \"trusted-device-encryption\",\n  AutofillV2 = \"autofill-v2\",\n  SecretsManagerBilling = \"sm-ga-billing\",\n}\n\n// Replace this with a type safe lookup of the feature flag values in PM-2282\nexport type FeatureFlagValue = number | string | boolean;\n","import { Observable } from \"rxjs\";\n\nexport type Urls = {\n  base?: string;\n  webVault?: string;\n  api?: string;\n  identity?: string;\n  icons?: string;\n  notifications?: string;\n  events?: string;\n  keyConnector?: string;\n  scim?: string;\n};\n\nexport type PayPalConfig = {\n  businessId?: string;\n  buttonAction?: string;\n};\n\nexport enum Region {\n  US = \"US\",\n  EU = \"EU\",\n  SelfHosted = \"Self-hosted\",\n}\n\nexport enum RegionDomain {\n  US = \"bitwarden.com\",\n  EU = \"bitwarden.eu\",\n  USQA = \"bitwarden.pw\",\n}\n\nexport abstract class EnvironmentService {\n  urls: Observable<void>;\n  usUrls: Urls;\n  euUrls: Urls;\n  selectedRegion?: Region;\n  initialized = true;\n\n  hasBaseUrl: () => boolean;\n  getNotificationsUrl: () => string;\n  getWebVaultUrl: () => string;\n  /**\n   * Retrieves the URL of the cloud web vault app.\n   *\n   * @returns {string} The URL of the cloud web vault app.\n   * @remarks Use this method only in views exclusive to self-host instances.\n   */\n  getCloudWebVaultUrl: () => string;\n  /**\n   * Sets the URL of the cloud web vault app based on the region parameter.\n   *\n   * @param {Region} region - The region of the cloud web vault app.\n   */\n  setCloudWebVaultUrl: (region: Region) => void;\n  getSendUrl: () => string;\n  getIconsUrl: () => string;\n  getApiUrl: () => string;\n  getIdentityUrl: () => string;\n  getEventsUrl: () => string;\n  getKeyConnectorUrl: () => string;\n  getScimUrl: () => string;\n  setUrlsFromStorage: () => Promise<void>;\n  setUrls: (urls: Urls) => Promise<Urls>;\n  setRegion: (region: Region) => Promise<void>;\n  getUrls: () => Urls;\n  isCloud: () => boolean;\n  isEmpty: () => boolean;\n}\n","import { Observable, Subject } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nexport class ModalRef {\n  onCreated: Observable<HTMLElement>; // Modal added to the DOM.\n  onClose: Observable<any>; // Initiated close.\n  onClosed: Observable<any>; // Modal was closed (Remove element from DOM)\n  onShow: Observable<void>; // Start showing modal\n  onShown: Observable<void>; // Modal is fully visible\n\n  private readonly _onCreated = new Subject<HTMLElement>();\n  private readonly _onClose = new Subject<any>();\n  private readonly _onClosed = new Subject<any>();\n  private readonly _onShow = new Subject<void>();\n  private readonly _onShown = new Subject<void>();\n  private lastResult: any;\n\n  constructor() {\n    this.onCreated = this._onCreated.asObservable();\n    this.onClose = this._onClose.asObservable();\n    this.onClosed = this._onClosed.asObservable();\n    this.onShow = this._onShow.asObservable();\n    this.onShown = this._onShow.asObservable();\n  }\n\n  show() {\n    this._onShow.next();\n  }\n\n  shown() {\n    this._onShown.next();\n  }\n\n  close(result?: any) {\n    this.lastResult = result;\n    this._onClose.next(result);\n  }\n\n  closed() {\n    this._onClosed.next(this.lastResult);\n  }\n\n  created(el: HTMLElement) {\n    this._onCreated.next(el);\n  }\n\n  onClosedPromise(): Promise<any> {\n    return this.onClosed.pipe(first()).toPromise();\n  }\n}\n","import { ConfigurableFocusTrap, ConfigurableFocusTrapFactory } from \"@angular/cdk/a11y\";\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ComponentRef,\n  ElementRef,\n  OnDestroy,\n  Type,\n  ViewChild,\n  ViewContainerRef,\n} from \"@angular/core\";\n\nimport { ModalService } from \"../../services/modal.service\";\n\nimport { ModalRef } from \"./modal.ref\";\n\n@Component({\n  selector: \"app-modal\",\n  template: \"<ng-template #modalContent></ng-template>\",\n})\nexport class DynamicModalComponent implements AfterViewInit, OnDestroy {\n  componentRef: ComponentRef<any>;\n\n  @ViewChild(\"modalContent\", { read: ViewContainerRef, static: true })\n  modalContentRef: ViewContainerRef;\n\n  childComponentType: Type<any>;\n  setComponentParameters: (component: any) => void;\n\n  private focusTrap: ConfigurableFocusTrap;\n\n  constructor(\n    private modalService: ModalService,\n    private cd: ChangeDetectorRef,\n    private el: ElementRef<HTMLElement>,\n    private focusTrapFactory: ConfigurableFocusTrapFactory,\n    public modalRef: ModalRef\n  ) {}\n\n  ngAfterViewInit() {\n    this.loadChildComponent(this.childComponentType);\n    if (this.setComponentParameters != null) {\n      this.setComponentParameters(this.componentRef.instance);\n    }\n    this.cd.detectChanges();\n\n    this.modalRef.created(this.el.nativeElement);\n    this.focusTrap = this.focusTrapFactory.create(\n      this.el.nativeElement.querySelector(\".modal-dialog\")\n    );\n    if (this.el.nativeElement.querySelector(\"[appAutoFocus]\") == null) {\n      this.focusTrap.focusFirstTabbableElementWhenReady();\n    }\n  }\n\n  loadChildComponent(componentType: Type<any>) {\n    const componentFactory = this.modalService.resolveComponentFactory(componentType);\n\n    this.modalContentRef.clear();\n    this.componentRef = this.modalContentRef.createComponent(componentFactory);\n  }\n\n  ngOnDestroy() {\n    if (this.componentRef) {\n      this.componentRef.destroy();\n    }\n    this.focusTrap.destroy();\n  }\n\n  close() {\n    this.modalRef.close();\n  }\n\n  getFocus() {\n    const autoFocusEl = this.el.nativeElement.querySelector(\"[appAutoFocus]\") as HTMLElement;\n    autoFocusEl?.focus();\n  }\n}\n","import { InjectFlags, InjectOptions, Injector, ProviderToken } from \"@angular/core\";\n\nexport class ModalInjector implements Injector {\n  constructor(private _parentInjector: Injector, private _additionalTokens: WeakMap<any, any>) {}\n\n  get<T>(\n    token: ProviderToken<T>,\n    notFoundValue: undefined,\n    options: InjectOptions & { optional?: false }\n  ): T;\n  get<T>(token: ProviderToken<T>, notFoundValue: null, options: InjectOptions): T;\n  get<T>(token: ProviderToken<T>, notFoundValue?: T, options?: InjectOptions | InjectFlags): T;\n  get<T>(token: ProviderToken<T>, notFoundValue?: T, flags?: InjectFlags): T;\n  get(token: any, notFoundValue?: any): any;\n  get(token: any, notFoundValue?: any, flags?: any): any {\n    return this._additionalTokens.get(token) ?? this._parentInjector.get<any>(token, notFoundValue);\n  }\n}\n","import {\n  ApplicationRef,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  Type,\n  ViewContainerRef,\n} from \"@angular/core\";\nimport { first } from \"rxjs/operators\";\n\nimport { DynamicModalComponent } from \"../components/modal/dynamic-modal.component\";\nimport { ModalInjector } from \"../components/modal/modal-injector\";\nimport { ModalRef } from \"../components/modal/modal.ref\";\n\nexport class ModalConfig<D = any> {\n  data?: D;\n  allowMultipleModals?: boolean;\n  replaceTopModal?: boolean;\n}\n\n/**\n * @deprecated Use the Component Library's `DialogService` instead.\n */\n@Injectable()\nexport class ModalService {\n  protected modalList: ComponentRef<DynamicModalComponent>[] = [];\n\n  // Lazy loaded modules are not available in componentFactoryResolver,\n  // therefore modules needs to manually initialize their resolvers.\n  private factoryResolvers: Map<Type<any>, ComponentFactoryResolver> = new Map();\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private applicationRef: ApplicationRef,\n    private injector: Injector\n  ) {\n    document.addEventListener(\"keyup\", (event) => {\n      if (event.key === \"Escape\" && this.modalCount > 0) {\n        this.topModal.instance.close();\n      }\n    });\n  }\n\n  get modalCount() {\n    return this.modalList.length;\n  }\n\n  private get topModal() {\n    return this.modalList[this.modalCount - 1];\n  }\n\n  /**\n   * @deprecated Use `dialogService.open` instead.\n   * If replacing an existing call to this method, also remove any `@ViewChild` and `<ng-template>` associated with the\n   * existing usage.\n   */\n  async openViewRef<T>(\n    componentType: Type<T>,\n    viewContainerRef: ViewContainerRef,\n    setComponentParameters: (component: T) => void = null\n  ): Promise<[ModalRef, T]> {\n    const [modalRef, modalComponentRef] = this.openInternal(componentType, null, false);\n    modalComponentRef.instance.setComponentParameters = setComponentParameters;\n\n    viewContainerRef.insert(modalComponentRef.hostView);\n\n    await modalRef.onCreated.pipe(first()).toPromise();\n\n    return [modalRef, modalComponentRef.instance.componentRef.instance];\n  }\n\n  open(componentType: Type<any>, config: ModalConfig = {}) {\n    const { replaceTopModal = false, allowMultipleModals = false } = config;\n\n    if (this.modalCount > 0 && replaceTopModal) {\n      this.topModal.instance.close();\n    }\n\n    if (this.modalCount > 0 && !allowMultipleModals) {\n      return;\n    }\n\n    const [modalRef] = this.openInternal(componentType, config, true);\n\n    return modalRef;\n  }\n\n  registerComponentFactoryResolver<T>(\n    componentType: Type<T>,\n    componentFactoryResolver: ComponentFactoryResolver\n  ): void {\n    this.factoryResolvers.set(componentType, componentFactoryResolver);\n  }\n\n  resolveComponentFactory<T>(componentType: Type<T>): ComponentFactory<T> {\n    if (this.factoryResolvers.has(componentType)) {\n      return this.factoryResolvers.get(componentType).resolveComponentFactory(componentType);\n    }\n\n    return this.componentFactoryResolver.resolveComponentFactory(componentType);\n  }\n\n  closeAll(): void {\n    this.modalList.forEach((modal) => modal.instance.close());\n  }\n\n  protected openInternal(\n    componentType: Type<any>,\n    config?: ModalConfig,\n    attachToDom?: boolean\n  ): [ModalRef, ComponentRef<DynamicModalComponent>] {\n    const [modalRef, componentRef] = this.createModalComponent(config);\n    componentRef.instance.childComponentType = componentType;\n\n    if (attachToDom) {\n      this.applicationRef.attachView(componentRef.hostView);\n      const domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n      document.body.appendChild(domElem);\n    }\n\n    modalRef.onClosed.pipe(first()).subscribe(() => {\n      if (attachToDom) {\n        this.applicationRef.detachView(componentRef.hostView);\n      }\n      componentRef.destroy();\n\n      this.modalList.pop();\n      if (this.modalCount > 0) {\n        this.topModal.instance.getFocus();\n      }\n    });\n\n    this.setupHandlers(modalRef);\n\n    this.modalList.push(componentRef);\n\n    return [modalRef, componentRef];\n  }\n\n  protected setupHandlers(modalRef: ModalRef) {\n    let backdrop: HTMLElement = null;\n\n    // Add backdrop, setup [data-dismiss] handler.\n    modalRef.onCreated.pipe(first()).subscribe((el) => {\n      document.body.classList.add(\"modal-open\");\n\n      const modalEl: HTMLElement = el.querySelector(\".modal\");\n      const dialogEl = modalEl.querySelector(\".modal-dialog\") as HTMLElement;\n\n      backdrop = document.createElement(\"div\");\n      backdrop.className = \"modal-backdrop fade\";\n      backdrop.style.zIndex = `${this.modalCount}040`;\n      modalEl.prepend(backdrop);\n\n      dialogEl.addEventListener(\"click\", (e: Event) => {\n        e.stopPropagation();\n      });\n      dialogEl.style.zIndex = `${this.modalCount}050`;\n\n      const modals = Array.from(\n        el.querySelectorAll('.modal-backdrop, .modal *[data-dismiss=\"modal\"]')\n      );\n      for (const closeElement of modals) {\n        closeElement.addEventListener(\"click\", () => {\n          modalRef.close();\n        });\n      }\n    });\n\n    // onClose is used in Web to hook into bootstrap. On other projects we pipe it directly to closed.\n    modalRef.onClose.pipe(first()).subscribe(() => {\n      modalRef.closed();\n\n      if (this.modalCount === 0) {\n        document.body.classList.remove(\"modal-open\");\n      }\n    });\n  }\n\n  protected createModalComponent(\n    config: ModalConfig\n  ): [ModalRef, ComponentRef<DynamicModalComponent>] {\n    const modalRef = new ModalRef();\n\n    const map = new WeakMap();\n    map.set(ModalConfig, config);\n    map.set(ModalRef, modalRef);\n\n    const componentFactory =\n      this.componentFactoryResolver.resolveComponentFactory(DynamicModalComponent);\n    const componentRef = componentFactory.create(new ModalInjector(this.injector, map));\n\n    return [modalRef, componentRef];\n  }\n}\n","import { Directive, EventEmitter, Output } from \"@angular/core\";\n\nimport {\n  EnvironmentService,\n  Region,\n} from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { ModalService } from \"../services/modal.service\";\n\n@Directive()\nexport class EnvironmentComponent {\n  @Output() onSaved = new EventEmitter();\n\n  iconsUrl: string;\n  identityUrl: string;\n  apiUrl: string;\n  webVaultUrl: string;\n  notificationsUrl: string;\n  baseUrl: string;\n  showCustom = false;\n\n  constructor(\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected i18nService: I18nService,\n    private modalService: ModalService\n  ) {\n    const urls = this.environmentService.getUrls();\n    if (this.environmentService.selectedRegion != Region.SelfHosted) {\n      return;\n    }\n\n    this.baseUrl = urls.base || \"\";\n    this.webVaultUrl = urls.webVault || \"\";\n    this.apiUrl = urls.api || \"\";\n    this.identityUrl = urls.identity || \"\";\n    this.iconsUrl = urls.icons || \"\";\n    this.notificationsUrl = urls.notifications || \"\";\n  }\n\n  async submit() {\n    const resUrls = await this.environmentService.setUrls({\n      base: this.baseUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      webVault: this.webVaultUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n    });\n\n    // re-set urls since service can change them, ex: prefixing https://\n    this.baseUrl = resUrls.base;\n    this.apiUrl = resUrls.api;\n    this.identityUrl = resUrls.identity;\n    this.webVaultUrl = resUrls.webVault;\n    this.iconsUrl = resUrls.icons;\n    this.notificationsUrl = resUrls.notifications;\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"environmentSaved\"));\n    this.saved();\n  }\n\n  toggleCustom() {\n    this.showCustom = !this.showCustom;\n  }\n\n  protected saved() {\n    this.onSaved.emit();\n    this.modalService.closeAll();\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class EnvironmentUrls {\n  base: string = null;\n  api: string = null;\n  identity: string = null;\n  icons: string = null;\n  notifications: string = null;\n  events: string = null;\n  webVault: string = null;\n  keyConnector: string = null;\n\n  static fromJSON(obj: Jsonify<EnvironmentUrls>): EnvironmentUrls {\n    return Object.assign(new EnvironmentUrls(), obj);\n  }\n}\n","import { concatMap, Observable, ReplaySubject } from \"rxjs\";\n\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport {\n  EnvironmentService as EnvironmentServiceAbstraction,\n  Region,\n  Urls,\n} from \"../abstractions/environment.service\";\nimport { StateService } from \"../abstractions/state.service\";\n\nexport class EnvironmentService implements EnvironmentServiceAbstraction {\n  private readonly urlsSubject = new ReplaySubject<void>(1);\n  urls: Observable<void> = this.urlsSubject.asObservable();\n  selectedRegion?: Region;\n  initialized = false;\n\n  protected baseUrl: string;\n  protected webVaultUrl: string;\n  protected apiUrl: string;\n  protected identityUrl: string;\n  protected iconsUrl: string;\n  protected notificationsUrl: string;\n  protected eventsUrl: string;\n  private keyConnectorUrl: string;\n  private scimUrl: string = null;\n  private cloudWebVaultUrl: string;\n\n  readonly usUrls: Urls = {\n    base: null,\n    api: \"https://api.bitwarden.com\",\n    identity: \"https://identity.bitwarden.com\",\n    icons: \"https://icons.bitwarden.net\",\n    webVault: \"https://vault.bitwarden.com\",\n    notifications: \"https://notifications.bitwarden.com\",\n    events: \"https://events.bitwarden.com\",\n    scim: \"https://scim.bitwarden.com\",\n  };\n\n  readonly euUrls: Urls = {\n    base: null,\n    api: \"https://api.bitwarden.eu\",\n    identity: \"https://identity.bitwarden.eu\",\n    icons: \"https://icons.bitwarden.eu\",\n    webVault: \"https://vault.bitwarden.eu\",\n    notifications: \"https://notifications.bitwarden.eu\",\n    events: \"https://events.bitwarden.eu\",\n    scim: \"https://scim.bitwarden.eu\",\n  };\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          if (!this.initialized) {\n            return;\n          }\n          await this.setUrlsFromStorage();\n        })\n      )\n      .subscribe();\n  }\n\n  hasBaseUrl() {\n    return this.baseUrl != null;\n  }\n\n  getNotificationsUrl() {\n    if (this.notificationsUrl != null) {\n      return this.notificationsUrl;\n    }\n\n    if (this.baseUrl != null) {\n      return this.baseUrl + \"/notifications\";\n    }\n\n    return \"https://notifications.bitwarden.com\";\n  }\n\n  getWebVaultUrl() {\n    if (this.webVaultUrl != null) {\n      return this.webVaultUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl;\n    }\n    return \"https://vault.bitwarden.com\";\n  }\n\n  getCloudWebVaultUrl() {\n    if (this.cloudWebVaultUrl != null) {\n      return this.cloudWebVaultUrl;\n    }\n\n    return this.usUrls.webVault;\n  }\n\n  setCloudWebVaultUrl(region: Region) {\n    switch (region) {\n      case Region.EU:\n        this.cloudWebVaultUrl = this.euUrls.webVault;\n        break;\n      case Region.US:\n      default:\n        this.cloudWebVaultUrl = this.usUrls.webVault;\n        break;\n    }\n  }\n\n  getSendUrl() {\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://send.bitwarden.com/#\"\n      : this.getWebVaultUrl() + \"/#/send/\";\n  }\n\n  getIconsUrl() {\n    if (this.iconsUrl != null) {\n      return this.iconsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/icons\";\n    }\n\n    return \"https://icons.bitwarden.net\";\n  }\n\n  getApiUrl() {\n    if (this.apiUrl != null) {\n      return this.apiUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/api\";\n    }\n\n    return \"https://api.bitwarden.com\";\n  }\n\n  getIdentityUrl() {\n    if (this.identityUrl != null) {\n      return this.identityUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/identity\";\n    }\n\n    return \"https://identity.bitwarden.com\";\n  }\n\n  getEventsUrl() {\n    if (this.eventsUrl != null) {\n      return this.eventsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/events\";\n    }\n\n    return \"https://events.bitwarden.com\";\n  }\n\n  getKeyConnectorUrl() {\n    return this.keyConnectorUrl;\n  }\n\n  getScimUrl() {\n    if (this.scimUrl != null) {\n      return this.scimUrl + \"/v2\";\n    }\n\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://scim.bitwarden.com/v2\"\n      : this.getWebVaultUrl() + \"/scim/v2\";\n  }\n\n  async setUrlsFromStorage(): Promise<void> {\n    const region = await this.stateService.getRegion();\n    const savedUrls = await this.stateService.getEnvironmentUrls();\n    const envUrls = new EnvironmentUrls();\n\n    // In release `2023.5.0`, we set the `base` property of the environment URLs to the US web vault URL when a user clicked the \"US\" region.\n    // This check will detect these cases and convert them to the proper region instead.\n    // We are detecting this by checking for the presence of the web vault URL in the `base` and the absence of the `notifications` property.\n    // This is because the `notifications` will not be `null` in the web vault, and we don't want to migrate the URLs in that case.\n    if (savedUrls.base === \"https://vault.bitwarden.com\" && savedUrls.notifications == null) {\n      await this.setRegion(Region.US);\n      return;\n    }\n\n    switch (region) {\n      case Region.EU:\n        await this.setRegion(Region.EU);\n        return;\n      case Region.US:\n        await this.setRegion(Region.US);\n        return;\n      case Region.SelfHosted:\n      case null:\n      default:\n        this.baseUrl = envUrls.base = savedUrls.base;\n        this.webVaultUrl = savedUrls.webVault;\n        this.apiUrl = envUrls.api = savedUrls.api;\n        this.identityUrl = envUrls.identity = savedUrls.identity;\n        this.iconsUrl = savedUrls.icons;\n        this.notificationsUrl = savedUrls.notifications;\n        this.eventsUrl = envUrls.events = savedUrls.events;\n        this.keyConnectorUrl = savedUrls.keyConnector;\n        await this.setRegion(Region.SelfHosted);\n        // scimUrl is not saved to storage\n        this.urlsSubject.next();\n        break;\n    }\n  }\n\n  async setUrls(urls: Urls): Promise<Urls> {\n    urls.base = this.formatUrl(urls.base);\n    urls.webVault = this.formatUrl(urls.webVault);\n    urls.api = this.formatUrl(urls.api);\n    urls.identity = this.formatUrl(urls.identity);\n    urls.icons = this.formatUrl(urls.icons);\n    urls.notifications = this.formatUrl(urls.notifications);\n    urls.events = this.formatUrl(urls.events);\n    urls.keyConnector = this.formatUrl(urls.keyConnector);\n\n    // scimUrl cannot be cleared\n    urls.scim = this.formatUrl(urls.scim) ?? this.scimUrl;\n\n    await this.stateService.setEnvironmentUrls({\n      base: urls.base,\n      api: urls.api,\n      identity: urls.identity,\n      webVault: urls.webVault,\n      icons: urls.icons,\n      notifications: urls.notifications,\n      events: urls.events,\n      keyConnector: urls.keyConnector,\n      // scimUrl is not saved to storage\n    });\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.identityUrl = urls.identity;\n    this.iconsUrl = urls.icons;\n    this.notificationsUrl = urls.notifications;\n    this.eventsUrl = urls.events;\n    this.keyConnectorUrl = urls.keyConnector;\n    this.scimUrl = urls.scim;\n\n    await this.setRegion(Region.SelfHosted);\n\n    this.urlsSubject.next();\n\n    return urls;\n  }\n\n  getUrls() {\n    return {\n      base: this.baseUrl,\n      webVault: this.webVaultUrl,\n      cloudWebVault: this.cloudWebVaultUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n      events: this.eventsUrl,\n      keyConnector: this.keyConnectorUrl,\n      scim: this.scimUrl,\n    };\n  }\n\n  isEmpty(): boolean {\n    return (\n      this.baseUrl == null &&\n      this.webVaultUrl == null &&\n      this.apiUrl == null &&\n      this.identityUrl == null &&\n      this.iconsUrl == null &&\n      this.notificationsUrl == null &&\n      this.eventsUrl == null\n    );\n  }\n\n  async setRegion(region: Region) {\n    this.selectedRegion = region;\n    await this.stateService.setRegion(region);\n\n    if (region === Region.SelfHosted) {\n      // If user saves a self-hosted region with empty fields, default to US\n      if (this.isEmpty()) {\n        await this.setRegion(Region.US);\n      }\n    } else {\n      // If we are setting the region to EU or US, clear the self-hosted URLs\n      await this.stateService.setEnvironmentUrls(new EnvironmentUrls());\n      if (region === Region.EU) {\n        this.setUrlsInternal(this.euUrls);\n      } else if (region === Region.US) {\n        this.setUrlsInternal(this.usUrls);\n      }\n    }\n  }\n\n  private setUrlsInternal(urls: Urls) {\n    this.baseUrl = this.formatUrl(urls.base);\n    this.webVaultUrl = this.formatUrl(urls.webVault);\n    this.apiUrl = this.formatUrl(urls.api);\n    this.identityUrl = this.formatUrl(urls.identity);\n    this.iconsUrl = this.formatUrl(urls.icons);\n    this.notificationsUrl = this.formatUrl(urls.notifications);\n    this.eventsUrl = this.formatUrl(urls.events);\n    this.keyConnectorUrl = this.formatUrl(urls.keyConnector);\n\n    // scimUrl cannot be cleared\n    this.scimUrl = this.formatUrl(urls.scim) ?? this.scimUrl;\n    this.urlsSubject.next();\n  }\n\n  private formatUrl(url: string): string {\n    if (url == null || url === \"\") {\n      return null;\n    }\n\n    url = url.replace(/\\/+$/g, \"\");\n    if (!url.startsWith(\"http://\") && !url.startsWith(\"https://\")) {\n      url = \"https://\" + url;\n    }\n\n    return url.trim();\n  }\n\n  isCloud(): boolean {\n    return [\n      \"https://api.bitwarden.com\",\n      \"https://vault.bitwarden.com/api\",\n      \"https://api.bitwarden.eu\",\n      \"https://vault.bitwarden.eu/api\",\n    ].includes(this.getApiUrl());\n  }\n}\n","// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedFlags = {\n  multithreadDecryption: boolean;\n  showPasswordless?: boolean;\n  enableCipherKeyEncryption?: boolean;\n};\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedDevFlags = {};\n\nfunction getFlags<T>(envFlags: string | T): T {\n  if (typeof envFlags === \"string\") {\n    return JSON.parse(envFlags) as T;\n  } else {\n    return envFlags as T;\n  }\n}\n\n/**\n * Gets the value of a feature flag from environment.\n * All flags default to \"on\" (true).\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the feature flag to check\n * @returns The value of the flag\n */\nexport function flagEnabled<Flags extends SharedFlags>(flag: keyof Flags): boolean {\n  const flags = getFlags<Flags>(process.env.FLAGS);\n  return flags[flag] == null || !!flags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n */\nexport function devFlagEnabled<DevFlags extends SharedDevFlags>(flag: keyof DevFlags): boolean {\n  if (process.env.ENV !== \"development\") {\n    return false;\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag] == null || !!devFlags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n * @throws Error if the flag is not enabled\n */\nexport function devFlagValue<DevFlags extends SharedDevFlags>(\n  flag: keyof DevFlags\n): DevFlags[keyof DevFlags] {\n  if (!devFlagEnabled(flag)) {\n    throw new Error(`This method should not be called, it is protected by a disabled dev flag.`);\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag];\n}\n","import {\n  flagEnabled as baseFlagEnabled,\n  devFlagEnabled as baseDevFlagEnabled,\n  devFlagValue as baseDevFlagValue,\n  SharedFlags,\n  SharedDevFlags,\n} from \"@bitwarden/common/platform/misc/flags\";\n\nimport { GroupPolicyEnvironment } from \"../admin-console/types/group-policy-environment\";\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type Flags = {} & SharedFlags;\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type DevFlags = {\n  storeSessionDecrypted?: boolean;\n  managedEnvironment?: GroupPolicyEnvironment;\n} & SharedDevFlags;\n\nexport function flagEnabled(flag: keyof Flags): boolean {\n  return baseFlagEnabled<Flags>(flag);\n}\n\nexport function devFlagEnabled(flag: keyof DevFlags) {\n  return baseDevFlagEnabled<DevFlags>(flag);\n}\n\nexport function devFlagValue(flag: keyof DevFlags) {\n  return baseDevFlagValue(flag);\n}\n","import { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/services/environment.service\";\n\nimport { GroupPolicyEnvironment } from \"../../admin-console/types/group-policy-environment\";\nimport { devFlagEnabled, devFlagValue } from \"../flags\";\n\nexport class BrowserEnvironmentService extends EnvironmentService {\n  constructor(stateService: StateService, private logService: LogService) {\n    super(stateService);\n  }\n\n  async hasManagedEnvironment(): Promise<boolean> {\n    try {\n      return (await this.getManagedEnvironment()) != null;\n    } catch (e) {\n      this.logService.error(e);\n      return false;\n    }\n  }\n\n  async settingsHaveChanged() {\n    if (!(await this.hasManagedEnvironment())) {\n      return false;\n    }\n\n    const env = await this.getManagedEnvironment();\n\n    return (\n      env.base != this.baseUrl ||\n      env.webVault != this.webVaultUrl ||\n      env.api != this.webVaultUrl ||\n      env.identity != this.identityUrl ||\n      env.icons != this.iconsUrl ||\n      env.notifications != this.notificationsUrl ||\n      env.events != this.eventsUrl\n    );\n  }\n\n  getManagedEnvironment(): Promise<GroupPolicyEnvironment> {\n    return devFlagEnabled(\"managedEnvironment\")\n      ? new Promise((resolve) => resolve(devFlagValue(\"managedEnvironment\")))\n      : new Promise((resolve, reject) => {\n          if (chrome.storage.managed == null) {\n            return resolve(null);\n          }\n\n          chrome.storage.managed.get(\"environment\", (result) => {\n            if (chrome.runtime.lastError) {\n              return reject(chrome.runtime.lastError);\n            }\n\n            resolve(result.environment);\n          });\n        });\n  }\n\n  async setUrlsToManagedEnvironment() {\n    const env = await this.getManagedEnvironment();\n    await this.setUrls({\n      base: env.base,\n      webVault: env.webVault,\n      api: env.api,\n      identity: env.identity,\n      icons: env.icons,\n      notifications: env.notifications,\n      events: env.events,\n    });\n  }\n}\n","import { Directive, ElementRef, HostListener, OnInit } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appBoxRow]\",\n})\nexport class BoxRowDirective implements OnInit {\n  el: HTMLElement = null;\n  formEls: Element[];\n\n  constructor(elRef: ElementRef) {\n    this.el = elRef.nativeElement;\n  }\n\n  ngOnInit(): void {\n    this.formEls = Array.from(\n      this.el.querySelectorAll('input:not([type=\"hidden\"]), select, textarea')\n    );\n    this.formEls.forEach((formEl) => {\n      formEl.addEventListener(\n        \"focus\",\n        () => {\n          this.el.classList.add(\"active\");\n        },\n        false\n      );\n\n      formEl.addEventListener(\n        \"blur\",\n        () => {\n          this.el.classList.remove(\"active\");\n        },\n        false\n      );\n    });\n  }\n\n  @HostListener(\"click\", [\"$event\"]) onClick(event: Event) {\n    const target = event.target as HTMLElement;\n    if (\n      target !== this.el &&\n      !target.classList.contains(\"progress\") &&\n      !target.classList.contains(\"progress-bar\")\n    ) {\n      return;\n    }\n\n    if (this.formEls.length > 0) {\n      const formEl = this.formEls[0] as HTMLElement;\n      if (formEl.tagName.toLowerCase() === \"input\") {\n        const inputEl = formEl as HTMLInputElement;\n        if (inputEl.type != null && inputEl.type.toLowerCase() === \"checkbox\") {\n          inputEl.click();\n          return;\n        }\n      }\n      formEl.focus();\n    }\n  }\n}\n","import { Jsonify, Opaque } from \"type-fest\";\n\nimport { EncryptionType, EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Encrypted } from \"../../interfaces/encrypted\";\n\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncString implements Encrypted {\n  encryptedString?: EncryptedString;\n  encryptionType?: EncryptionType;\n  decryptedValue?: string;\n  data?: string;\n  iv?: string;\n  mac?: string;\n\n  constructor(\n    encryptedStringOrType: string | EncryptionType,\n    data?: string,\n    iv?: string,\n    mac?: string\n  ) {\n    if (data != null) {\n      this.initFromData(encryptedStringOrType as EncryptionType, data, iv, mac);\n    } else {\n      this.initFromEncryptedString(encryptedStringOrType as string);\n    }\n  }\n\n  get ivBytes(): Uint8Array {\n    return this.iv == null ? null : Utils.fromB64ToArray(this.iv);\n  }\n\n  get macBytes(): Uint8Array {\n    return this.mac == null ? null : Utils.fromB64ToArray(this.mac);\n  }\n\n  get dataBytes(): Uint8Array {\n    return this.data == null ? null : Utils.fromB64ToArray(this.data);\n  }\n\n  toJSON() {\n    return this.encryptedString;\n  }\n\n  static fromJSON(obj: Jsonify<EncString>): EncString {\n    if (obj == null) {\n      return null;\n    }\n\n    return new EncString(obj);\n  }\n\n  private initFromData(encType: EncryptionType, data: string, iv: string, mac: string) {\n    if (iv != null) {\n      this.encryptedString = (encType + \".\" + iv + \"|\" + data) as EncryptedString;\n    } else {\n      this.encryptedString = (encType + \".\" + data) as EncryptedString;\n    }\n\n    // mac\n    if (mac != null) {\n      this.encryptedString = (this.encryptedString + \"|\" + mac) as EncryptedString;\n    }\n\n    this.encryptionType = encType;\n    this.data = data;\n    this.iv = iv;\n    this.mac = mac;\n  }\n\n  private initFromEncryptedString(encryptedString: string) {\n    this.encryptedString = encryptedString as EncryptedString;\n    if (!this.encryptedString) {\n      return;\n    }\n\n    const { encType, encPieces } = EncString.parseEncryptedString(this.encryptedString);\n    this.encryptionType = encType;\n\n    if (encPieces.length !== EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE[encType]) {\n      return;\n    }\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64:\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        this.mac = encPieces[2];\n        break;\n      case EncryptionType.AesCbc256_B64:\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        break;\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n        this.data = encPieces[0];\n        break;\n      default:\n        return;\n    }\n  }\n\n  private static parseEncryptedString(encryptedString: string): {\n    encType: EncryptionType;\n    encPieces: string[];\n  } {\n    const headerPieces = encryptedString.split(\".\");\n    let encType: EncryptionType;\n    let encPieces: string[] = null;\n\n    if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        return;\n      }\n    } else {\n      encPieces = encryptedString.split(\"|\");\n      encType =\n        encPieces.length === 3\n          ? EncryptionType.AesCbc128_HmacSha256_B64\n          : EncryptionType.AesCbc256_B64;\n    }\n\n    return {\n      encType,\n      encPieces,\n    };\n  }\n\n  static isSerializedEncString(s: string): boolean {\n    const { encType, encPieces } = this.parseEncryptedString(s);\n\n    return EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE[encType] === encPieces.length;\n  }\n\n  async decrypt(orgId: string, key: SymmetricCryptoKey = null): Promise<string> {\n    if (this.decryptedValue != null) {\n      return this.decryptedValue;\n    }\n\n    try {\n      if (key == null) {\n        key = await this.getKeyForDecryption(orgId);\n      }\n      if (key == null) {\n        throw new Error(\"No key to decrypt EncString with orgId \" + orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      this.decryptedValue = await encryptService.decryptToUtf8(this, key);\n    } catch (e) {\n      this.decryptedValue = \"[error: cannot decrypt]\";\n    }\n    return this.decryptedValue;\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getUserKeyWithLegacySupport();\n  }\n}\n\nexport type EncryptedString = Opaque<string, \"EncString\">;\n","import { View } from \"../../../models/view/view\";\n\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\n// https://contributing.bitwarden.com/architecture/clients/data-model#domain\nexport default class Domain {\n  protected buildDomainModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = dataObj[map[prop] || prop];\n      if (notEncList.indexOf(prop) > -1) {\n        (domain as any)[prop] = objProp ? objProp : null;\n      } else {\n        (domain as any)[prop] = objProp ? new EncString(objProp) : null;\n      }\n    }\n  }\n  protected buildDataModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncStringList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = (domain as any)[map[prop] || prop];\n      if (notEncStringList.indexOf(prop) > -1) {\n        (dataObj as any)[prop] = objProp != null ? objProp : null;\n      } else {\n        (dataObj as any)[prop] = objProp != null ? (objProp as EncString).encryptedString : null;\n      }\n    }\n  }\n\n  protected async decryptObj<T extends View>(\n    viewModel: T,\n    map: any,\n    orgId: string,\n    key: SymmetricCryptoKey = null\n  ): Promise<T> {\n    const promises = [];\n    const self: any = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp) {\n        const p = Promise.resolve()\n          .then(() => {\n            const mapProp = map[theProp] || theProp;\n            if (self[mapProp]) {\n              return self[mapProp].decrypt(orgId, key);\n            }\n            return null;\n          })\n          .then((val: any) => {\n            (viewModel as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop);\n    }\n\n    await Promise.all(promises);\n    return viewModel;\n  }\n}\n","import { MasterPasswordPolicyResponse } from \"../../../auth/models/response/master-password-policy.response\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\n\nexport class MasterPasswordPolicyOptions extends Domain {\n  minComplexity = 0;\n  minLength = 0;\n  requireUpper = false;\n  requireLower = false;\n  requireNumbers = false;\n  requireSpecial = false;\n\n  /**\n   * Flag to indicate if the policy should be enforced on login.\n   * If true, and the user's password does not meet the policy requirements,\n   * the user will be forced to update their password.\n   */\n  enforceOnLogin = false;\n\n  static fromResponse(policy: MasterPasswordPolicyResponse): MasterPasswordPolicyOptions {\n    if (policy == null) {\n      return null;\n    }\n    const options = new MasterPasswordPolicyOptions();\n    options.minComplexity = policy.minComplexity;\n    options.minLength = policy.minLength;\n    options.requireUpper = policy.requireUpper;\n    options.requireLower = policy.requireLower;\n    options.requireNumbers = policy.requireNumbers;\n    options.requireSpecial = policy.requireSpecial;\n    options.enforceOnLogin = policy.enforceOnLogin;\n    return options;\n  }\n}\n","<div\n  #callout\n  class=\"callout callout-{{ calloutStyle }}\"\n  [ngClass]=\"{ clickable: clickable }\"\n  [attr.role]=\"useAlertRole ? 'alert' : null\"\n>\n  <h3 class=\"callout-heading\" *ngIf=\"title\">\n    <i class=\"bwi {{ icon }}\" *ngIf=\"icon\" aria-hidden=\"true\"></i>\n    {{ title }}\n  </h3>\n  <div class=\"enforced-policy-options\" *ngIf=\"enforcedPolicyOptions\">\n    {{ enforcedPolicyMessage }}\n    <ul>\n      <li *ngIf=\"enforcedPolicyOptions?.minComplexity > 0\">\n        {{ \"policyInEffectMinComplexity\" | i18n : getPasswordScoreAlertDisplay() }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.minLength > 0\">\n        {{ \"policyInEffectMinLength\" | i18n : enforcedPolicyOptions?.minLength.toString() }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireUpper\">\n        {{ \"policyInEffectUppercase\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireLower\">\n        {{ \"policyInEffectLowercase\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireNumbers\">\n        {{ \"policyInEffectNumbers\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireSpecial\">\n        {{ \"policyInEffectSpecial\" | i18n : \"!@#$%^&*\" }}\n      </li>\n    </ul>\n  </div>\n  <ng-content></ng-content>\n</div>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\n@Component({\n  selector: \"app-callout\",\n  templateUrl: \"callout.component.html\",\n})\nexport class CalloutComponent implements OnInit {\n  @Input() type = \"info\";\n  @Input() icon: string;\n  @Input() title: string;\n  @Input() clickable: boolean;\n  @Input() enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  @Input() enforcedPolicyMessage: string;\n  @Input() useAlertRole = false;\n\n  calloutStyle: string;\n\n  constructor(private i18nService: I18nService) {}\n\n  ngOnInit() {\n    this.calloutStyle = this.type;\n\n    if (this.enforcedPolicyMessage === undefined) {\n      this.enforcedPolicyMessage = this.i18nService.t(\"masterPasswordPolicyInEffect\");\n    }\n\n    if (this.type === \"warning\" || this.type === \"danger\") {\n      if (this.type === \"danger\") {\n        this.calloutStyle = \"danger\";\n      }\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"warning\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-exclamation-triangle\";\n      }\n    } else if (this.type === \"error\") {\n      this.calloutStyle = \"danger\";\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"error\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-error\";\n      }\n    } else if (this.type === \"tip\") {\n      this.calloutStyle = \"success\";\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"tip\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-lightbulb\";\n      }\n    }\n  }\n\n  getPasswordScoreAlertDisplay() {\n    if (this.enforcedPolicyOptions == null) {\n      return \"\";\n    }\n\n    let str: string;\n    switch (this.enforcedPolicyOptions.minComplexity) {\n      case 4:\n        str = this.i18nService.t(\"strong\");\n        break;\n      case 3:\n        str = this.i18nService.t(\"good\");\n        break;\n      default:\n        str = this.i18nService.t(\"weak\");\n        break;\n    }\n    return str + \" (\" + this.enforcedPolicyOptions.minComplexity + \")\";\n  }\n}\n","import { Directive, ElementRef, Input, Renderer2 } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appInputVerbatim]\",\n})\nexport class InputVerbatimDirective {\n  @Input() set appInputVerbatim(condition: boolean | string) {\n    this.disableComplete = condition === \"\" || condition === true;\n  }\n\n  private disableComplete: boolean;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (this.disableComplete && !this.el.nativeElement.hasAttribute(\"autocomplete\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocomplete\", \"off\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"autocapitalize\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocapitalize\", \"none\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"autocorrect\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocorrect\", \"none\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"spellcheck\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"spellcheck\", \"false\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"inputmode\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"inputmode\", \"verbatim\");\n    }\n  }\n}\n","import { Directive, HostListener } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appStopClick]\",\n})\nexport class StopClickDirective {\n  @HostListener(\"click\", [\"$event\"]) onClick($event: MouseEvent) {\n    $event.preventDefault();\n  }\n}\n","<form #form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"close\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"appName\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout\n      type=\"info\"\n      title=\"{{ 'settingsEdited' | i18n }}\"\n      *ngIf=\"showEditedManagedSettings\"\n    >\n      <a href=\"#\" appStopClick (click)=\"resetEnvironment()\">\n        {{ \"environmentEditedClick\" | i18n }}\n      </a>\n      {{ \"environmentEditedReset\" | i18n }}\n    </app-callout>\n\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"selfHostedEnvironment\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"baseUrl\">{{ \"baseUrl\" | i18n }}</label>\n          <input\n            id=\"baseUrl\"\n            type=\"text\"\n            name=\"BaseUrl\"\n            aria-describedby=\"baseUrlHelp\"\n            [(ngModel)]=\"baseUrl\"\n            placeholder=\"ex. https://bitwarden.company.com\"\n            appInputVerbatim\n          />\n        </div>\n      </div>\n      <div id=\"baseUrlHelp\" class=\"box-footer\">\n        {{ \"selfHostedEnvironmentFooter\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"customEnvironment\" | i18n }}\n      </h2>\n      <div\n        role=\"group\"\n        attr.aria-label=\"{{ 'customEnvironment' | i18n }}\"\n        aria-describedby=\"customEnvironmentHelp\"\n        class=\"box-content\"\n        [hidden]=\"!showCustom\"\n      >\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"webVaultUrl\">{{ \"webVaultUrl\" | i18n }}</label>\n          <input\n            id=\"webVaultUrl\"\n            type=\"text\"\n            name=\"WebVaultUrl\"\n            [(ngModel)]=\"webVaultUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"apiUrl\">{{ \"apiUrl\" | i18n }}</label>\n          <input\n            id=\"apiUrl\"\n            type=\"text\"\n            name=\"ApiUrl\"\n            [(ngModel)]=\"apiUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"identityUrl\">{{ \"identityUrl\" | i18n }}</label>\n          <input\n            id=\"identityUrl\"\n            type=\"text\"\n            name=\"IdentityUrl\"\n            [(ngModel)]=\"identityUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"notificationsUrl\">{{ \"notificationsUrl\" | i18n }}</label>\n          <input\n            id=\"notificationsUrl\"\n            type=\"text\"\n            name=\"NotificationsUrl\"\n            inputmode=\"url\"\n            [(ngModel)]=\"notificationsUrl\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"iconsUrl\">{{ \"iconsUrl\" | i18n }}</label>\n          <input\n            id=\"iconsUrl\"\n            type=\"text\"\n            name=\"IconsUrl\"\n            [(ngModel)]=\"iconsUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n      </div>\n      <div id=\"customEnvironmentHelp\" class=\"box-footer\" [hidden]=\"!showCustom\">\n        {{ \"customEnvironmentFooter\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { EnvironmentComponent as BaseEnvironmentComponent } from \"@bitwarden/angular/components/environment.component\";\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { BrowserEnvironmentService } from \"../../platform/services/browser-environment.service\";\n\n@Component({\n  selector: \"app-environment\",\n  templateUrl: \"environment.component.html\",\n})\nexport class EnvironmentComponent extends BaseEnvironmentComponent implements OnInit {\n  showEditedManagedSettings = false;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    public environmentService: BrowserEnvironmentService,\n    i18nService: I18nService,\n    private router: Router,\n    modalService: ModalService\n  ) {\n    super(platformUtilsService, environmentService, i18nService, modalService);\n    this.showCustom = true;\n  }\n\n  async ngOnInit() {\n    this.showEditedManagedSettings = await this.environmentService.settingsHaveChanged();\n  }\n\n  async resetEnvironment() {\n    const urls = await this.environmentService.getManagedEnvironment();\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.iconsUrl = urls.icons;\n    this.identityUrl = urls.identity;\n    this.notificationsUrl = urls.notifications;\n    this.iconsUrl = urls.icons;\n  }\n\n  saved() {\n    super.saved();\n    this.router.navigate([\"\"]);\n  }\n}\n","export class PasswordHintRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","import { OrganizationConnectionType } from \"../admin-console/enums\";\nimport { OrganizationSponsorshipCreateRequest } from \"../admin-console/models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../admin-console/models/request/organization/organization-sponsorship-redeem.request\";\nimport { OrganizationConnectionRequest } from \"../admin-console/models/request/organization-connection.request\";\nimport { ProviderAddOrganizationRequest } from \"../admin-console/models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../admin-console/models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../admin-console/models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../admin-console/models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../admin-console/models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../admin-console/models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../admin-console/models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../admin-console/models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../admin-console/models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../admin-console/models/request/provider/provider-user-update.request\";\nimport { SelectionReadOnlyRequest } from \"../admin-console/models/request/selection-read-only.request\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../admin-console/models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../admin-console/models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../admin-console/models/response/organization-sponsorship-sync-status.response\";\nimport { PolicyResponse } from \"../admin-console/models/response/policy.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../admin-console/models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../admin-console/models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../admin-console/models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../admin-console/models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../admin-console/models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../admin-console/models/response/selection-read-only.response\";\nimport { DeviceVerificationRequest } from \"../auth/models/request/device-verification.request\";\nimport { EmailTokenRequest } from \"../auth/models/request/email-token.request\";\nimport { EmailRequest } from \"../auth/models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../auth/models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../auth/models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../auth/models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../auth/models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../auth/models/request/emergency-access-update.request\";\nimport { PasswordTokenRequest } from \"../auth/models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../auth/models/request/identity-token/sso-token.request\";\nimport { UserApiTokenRequest } from \"../auth/models/request/identity-token/user-api-token.request\";\nimport { KeyConnectorUserKeyRequest } from \"../auth/models/request/key-connector-user-key.request\";\nimport { PasswordHintRequest } from \"../auth/models/request/password-hint.request\";\nimport { PasswordRequest } from \"../auth/models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../auth/models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../auth/models/request/passwordless-create-auth.request\";\nimport { SecretVerificationRequest } from \"../auth/models/request/secret-verification.request\";\nimport { SetKeyConnectorKeyRequest } from \"../auth/models/request/set-key-connector-key.request\";\nimport { SetPasswordRequest } from \"../auth/models/request/set-password.request\";\nimport { TwoFactorEmailRequest } from \"../auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../auth/models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../auth/models/request/two-factor-recovery.request\";\nimport { UpdateProfileRequest } from \"../auth/models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../auth/models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../auth/models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../auth/models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../auth/models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../auth/models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../auth/models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../auth/models/request/update-two-factor-yubio-otp.request\";\nimport { ApiKeyResponse } from \"../auth/models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../auth/models/response/auth-request.response\";\nimport { DeviceVerificationResponse } from \"../auth/models/response/device-verification.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../auth/models/response/emergency-access.response\";\nimport { IdentityCaptchaResponse } from \"../auth/models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../auth/models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../auth/models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../auth/models/response/key-connector-user-key.response\";\nimport { MasterPasswordPolicyResponse } from \"../auth/models/response/master-password-policy.response\";\nimport { PreloginResponse } from \"../auth/models/response/prelogin.response\";\nimport { RegisterResponse } from \"../auth/models/response/register.response\";\nimport { SsoPreValidateResponse } from \"../auth/models/response/sso-pre-validate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../auth/models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../auth/models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../auth/models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../auth/models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../auth/models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../auth/models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../auth/models/response/two-factor-yubi-key.response\";\nimport { BitPayInvoiceRequest } from \"../billing/models/request/bit-pay-invoice.request\";\nimport { PaymentRequest } from \"../billing/models/request/payment.request\";\nimport { TaxInfoUpdateRequest } from \"../billing/models/request/tax-info-update.request\";\nimport { BillingHistoryResponse } from \"../billing/models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../billing/models/response/billing-payment.response\";\nimport { PaymentResponse } from \"../billing/models/response/payment.response\";\nimport { PlanResponse } from \"../billing/models/response/plan.response\";\nimport { SubscriptionResponse } from \"../billing/models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../billing/models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../billing/models/response/tax-rate.response\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../vault/models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { CollectionRequest } from \"../vault/models/request/collection.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../vault/models/response/collection.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport abstract class ApiService {\n  send: (\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ) => Promise<any>;\n\n  postIdentityToken: (\n    request: PasswordTokenRequest | SsoTokenRequest | UserApiTokenRequest\n  ) => Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse>;\n  refreshIdentityToken: () => Promise<any>;\n\n  getProfile: () => Promise<ProfileResponse>;\n  getUserSubscription: () => Promise<SubscriptionResponse>;\n  getTaxInfo: () => Promise<TaxInfoResponse>;\n  putProfile: (request: UpdateProfileRequest) => Promise<ProfileResponse>;\n  putAvatar: (request: UpdateAvatarRequest) => Promise<ProfileResponse>;\n  putTaxInfo: (request: TaxInfoUpdateRequest) => Promise<any>;\n  postPrelogin: (request: PreloginRequest) => Promise<PreloginResponse>;\n  postEmailToken: (request: EmailTokenRequest) => Promise<any>;\n  postEmail: (request: EmailRequest) => Promise<any>;\n  postPassword: (request: PasswordRequest) => Promise<any>;\n  setPassword: (request: SetPasswordRequest) => Promise<any>;\n  postSetKeyConnectorKey: (request: SetKeyConnectorKeyRequest) => Promise<any>;\n  postSecurityStamp: (request: SecretVerificationRequest) => Promise<any>;\n  getAccountRevisionDate: () => Promise<number>;\n  postPasswordHint: (request: PasswordHintRequest) => Promise<any>;\n  postRegister: (request: RegisterRequest) => Promise<RegisterResponse>;\n  postPremium: (data: FormData) => Promise<PaymentResponse>;\n  postIapCheck: (request: IapCheckRequest) => Promise<any>;\n  postReinstatePremium: () => Promise<any>;\n  postCancelPremium: () => Promise<any>;\n  postAccountStorage: (request: StorageRequest) => Promise<PaymentResponse>;\n  postAccountPayment: (request: PaymentRequest) => Promise<void>;\n  postAccountLicense: (data: FormData) => Promise<any>;\n  postAccountKey: (request: UpdateKeyRequest) => Promise<any>;\n  postAccountKeys: (request: KeysRequest) => Promise<any>;\n  postAccountVerifyEmail: () => Promise<any>;\n  postAccountVerifyEmailToken: (request: VerifyEmailRequest) => Promise<any>;\n  postAccountVerifyPassword: (\n    request: SecretVerificationRequest\n  ) => Promise<MasterPasswordPolicyResponse>;\n  postAccountRecoverDelete: (request: DeleteRecoverRequest) => Promise<any>;\n  postAccountRecoverDeleteToken: (request: VerifyDeleteRecoverRequest) => Promise<any>;\n  postAccountKdf: (request: KdfRequest) => Promise<any>;\n  postUserApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;\n  postUserRotateApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;\n  putUpdateTempPassword: (request: UpdateTempPasswordRequest) => Promise<any>;\n  postConvertToKeyConnector: () => Promise<void>;\n  //passwordless\n  postAuthRequest: (request: PasswordlessCreateAuthRequest) => Promise<AuthRequestResponse>;\n  postAdminAuthRequest: (request: PasswordlessCreateAuthRequest) => Promise<AuthRequestResponse>;\n  getAuthResponse: (id: string, accessCode: string) => Promise<AuthRequestResponse>;\n  getAuthRequest: (id: string) => Promise<AuthRequestResponse>;\n  putAuthRequest: (id: string, request: PasswordlessAuthRequest) => Promise<AuthRequestResponse>;\n  getAuthRequests: () => Promise<ListResponse<AuthRequestResponse>>;\n  getLastAuthRequest: () => Promise<AuthRequestResponse>;\n\n  getUserBillingHistory: () => Promise<BillingHistoryResponse>;\n  getUserBillingPayment: () => Promise<BillingPaymentResponse>;\n\n  getCipher: (id: string) => Promise<CipherResponse>;\n  getFullCipherDetails: (id: string) => Promise<CipherResponse>;\n  getCipherAdmin: (id: string) => Promise<CipherResponse>;\n  getAttachmentData: (\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ) => Promise<AttachmentResponse>;\n  getCiphersOrganization: (organizationId: string) => Promise<ListResponse<CipherResponse>>;\n  postCipher: (request: CipherRequest) => Promise<CipherResponse>;\n  postCipherCreate: (request: CipherCreateRequest) => Promise<CipherResponse>;\n  postCipherAdmin: (request: CipherCreateRequest) => Promise<CipherResponse>;\n  putCipher: (id: string, request: CipherRequest) => Promise<CipherResponse>;\n  putPartialCipher: (id: string, request: CipherPartialRequest) => Promise<CipherResponse>;\n  putCipherAdmin: (id: string, request: CipherRequest) => Promise<CipherResponse>;\n  deleteCipher: (id: string) => Promise<any>;\n  deleteCipherAdmin: (id: string) => Promise<any>;\n  deleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;\n  deleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putMoveCiphers: (request: CipherBulkMoveRequest) => Promise<any>;\n  putShareCipher: (id: string, request: CipherShareRequest) => Promise<CipherResponse>;\n  putShareCiphers: (request: CipherBulkShareRequest) => Promise<any>;\n  putCipherCollections: (id: string, request: CipherCollectionsRequest) => Promise<any>;\n  putCipherCollectionsAdmin: (id: string, request: CipherCollectionsRequest) => Promise<any>;\n  postPurgeCiphers: (request: SecretVerificationRequest, organizationId?: string) => Promise<any>;\n  putDeleteCipher: (id: string) => Promise<any>;\n  putDeleteCipherAdmin: (id: string) => Promise<any>;\n  putDeleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putDeleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putRestoreCipher: (id: string) => Promise<CipherResponse>;\n  putRestoreCipherAdmin: (id: string) => Promise<CipherResponse>;\n  putRestoreManyCiphers: (\n    request: CipherBulkRestoreRequest\n  ) => Promise<ListResponse<CipherResponse>>;\n  putRestoreManyCiphersAdmin: (\n    request: CipherBulkRestoreRequest\n  ) => Promise<ListResponse<CipherResponse>>;\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postCipherAttachmentLegacy: (id: string, data: FormData) => Promise<CipherResponse>;\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postCipherAttachmentAdminLegacy: (id: string, data: FormData) => Promise<CipherResponse>;\n  postCipherAttachment: (\n    id: string,\n    request: AttachmentRequest\n  ) => Promise<AttachmentUploadDataResponse>;\n  deleteCipherAttachment: (id: string, attachmentId: string) => Promise<any>;\n  deleteCipherAttachmentAdmin: (id: string, attachmentId: string) => Promise<any>;\n  postShareCipherAttachment: (\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ) => Promise<any>;\n  renewAttachmentUploadUrl: (\n    id: string,\n    attachmentId: string\n  ) => Promise<AttachmentUploadDataResponse>;\n  postAttachmentFile: (id: string, attachmentId: string, data: FormData) => Promise<any>;\n\n  getUserCollections: () => Promise<ListResponse<CollectionResponse>>;\n  getCollections: (organizationId: string) => Promise<ListResponse<CollectionResponse>>;\n  getCollectionUsers: (organizationId: string, id: string) => Promise<SelectionReadOnlyResponse[]>;\n  getCollectionAccessDetails: (\n    organizationId: string,\n    id: string\n  ) => Promise<CollectionAccessDetailsResponse>;\n  getManyCollectionsWithAccessDetails: (\n    orgId: string\n  ) => Promise<ListResponse<CollectionAccessDetailsResponse>>;\n  postCollection: (\n    organizationId: string,\n    request: CollectionRequest\n  ) => Promise<CollectionResponse>;\n  putCollectionUsers: (\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ) => Promise<any>;\n  putCollection: (\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ) => Promise<CollectionResponse>;\n  deleteCollection: (organizationId: string, id: string) => Promise<any>;\n  deleteManyCollections: (request: CollectionBulkDeleteRequest) => Promise<any>;\n  deleteCollectionUser: (\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ) => Promise<any>;\n\n  getGroupUsers: (organizationId: string, id: string) => Promise<string[]>;\n  putGroupUsers: (organizationId: string, id: string, request: string[]) => Promise<any>;\n  deleteGroupUser: (organizationId: string, id: string, organizationUserId: string) => Promise<any>;\n\n  getSync: () => Promise<SyncResponse>;\n  postPublicImportDirectory: (request: OrganizationImportRequest) => Promise<any>;\n\n  getSettingsDomains: () => Promise<DomainsResponse>;\n  putSettingsDomains: (request: UpdateDomainsRequest) => Promise<DomainsResponse>;\n\n  getTwoFactorProviders: () => Promise<ListResponse<TwoFactorProviderResponse>>;\n  getTwoFactorOrganizationProviders: (\n    organizationId: string\n  ) => Promise<ListResponse<TwoFactorProviderResponse>>;\n  getTwoFactorAuthenticator: (\n    request: SecretVerificationRequest\n  ) => Promise<TwoFactorAuthenticatorResponse>;\n  getTwoFactorEmail: (request: SecretVerificationRequest) => Promise<TwoFactorEmailResponse>;\n  getTwoFactorDuo: (request: SecretVerificationRequest) => Promise<TwoFactorDuoResponse>;\n  getTwoFactorOrganizationDuo: (\n    organizationId: string,\n    request: SecretVerificationRequest\n  ) => Promise<TwoFactorDuoResponse>;\n  getTwoFactorYubiKey: (request: SecretVerificationRequest) => Promise<TwoFactorYubiKeyResponse>;\n  getTwoFactorWebAuthn: (request: SecretVerificationRequest) => Promise<TwoFactorWebAuthnResponse>;\n  getTwoFactorWebAuthnChallenge: (request: SecretVerificationRequest) => Promise<ChallengeResponse>;\n  getTwoFactorRecover: (request: SecretVerificationRequest) => Promise<TwoFactorRecoverResponse>;\n  putTwoFactorAuthenticator: (\n    request: UpdateTwoFactorAuthenticatorRequest\n  ) => Promise<TwoFactorAuthenticatorResponse>;\n  putTwoFactorEmail: (request: UpdateTwoFactorEmailRequest) => Promise<TwoFactorEmailResponse>;\n  putTwoFactorDuo: (request: UpdateTwoFactorDuoRequest) => Promise<TwoFactorDuoResponse>;\n  putTwoFactorOrganizationDuo: (\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ) => Promise<TwoFactorDuoResponse>;\n  putTwoFactorYubiKey: (\n    request: UpdateTwoFactorYubioOtpRequest\n  ) => Promise<TwoFactorYubiKeyResponse>;\n  putTwoFactorWebAuthn: (\n    request: UpdateTwoFactorWebAuthnRequest\n  ) => Promise<TwoFactorWebAuthnResponse>;\n  deleteTwoFactorWebAuthn: (\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ) => Promise<TwoFactorWebAuthnResponse>;\n  putTwoFactorDisable: (request: TwoFactorProviderRequest) => Promise<TwoFactorProviderResponse>;\n  putTwoFactorOrganizationDisable: (\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ) => Promise<TwoFactorProviderResponse>;\n  postTwoFactorRecover: (request: TwoFactorRecoveryRequest) => Promise<any>;\n  postTwoFactorEmailSetup: (request: TwoFactorEmailRequest) => Promise<any>;\n  postTwoFactorEmail: (request: TwoFactorEmailRequest) => Promise<any>;\n  getDeviceVerificationSettings: () => Promise<DeviceVerificationResponse>;\n  putDeviceVerificationSettings: (\n    request: DeviceVerificationRequest\n  ) => Promise<DeviceVerificationResponse>;\n\n  getEmergencyAccessTrusted: () => Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>>;\n  getEmergencyAccessGranted: () => Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>>;\n  getEmergencyAccess: (id: string) => Promise<EmergencyAccessGranteeDetailsResponse>;\n  getEmergencyGrantorPolicies: (id: string) => Promise<ListResponse<PolicyResponse>>;\n  putEmergencyAccess: (id: string, request: EmergencyAccessUpdateRequest) => Promise<any>;\n  deleteEmergencyAccess: (id: string) => Promise<any>;\n  postEmergencyAccessInvite: (request: EmergencyAccessInviteRequest) => Promise<any>;\n  postEmergencyAccessReinvite: (id: string) => Promise<any>;\n  postEmergencyAccessAccept: (id: string, request: EmergencyAccessAcceptRequest) => Promise<any>;\n  postEmergencyAccessConfirm: (id: string, request: EmergencyAccessConfirmRequest) => Promise<any>;\n  postEmergencyAccessInitiate: (id: string) => Promise<any>;\n  postEmergencyAccessApprove: (id: string) => Promise<any>;\n  postEmergencyAccessReject: (id: string) => Promise<any>;\n  postEmergencyAccessTakeover: (id: string) => Promise<EmergencyAccessTakeoverResponse>;\n  postEmergencyAccessPassword: (\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ) => Promise<any>;\n  postEmergencyAccessView: (id: string) => Promise<EmergencyAccessViewResponse>;\n  getCloudCommunicationsEnabled: () => Promise<boolean>;\n  abstract getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  abstract createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  abstract updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId: string\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  deleteOrganizationConnection: (id: string) => Promise<void>;\n  getPlans: () => Promise<ListResponse<PlanResponse>>;\n  getTaxRates: () => Promise<ListResponse<TaxRateResponse>>;\n\n  postProviderSetup: (id: string, request: ProviderSetupRequest) => Promise<ProviderResponse>;\n  getProvider: (id: string) => Promise<ProviderResponse>;\n  putProvider: (id: string, request: ProviderUpdateRequest) => Promise<ProviderResponse>;\n\n  getProviderUsers: (providerId: string) => Promise<ListResponse<ProviderUserUserDetailsResponse>>;\n  getProviderUser: (providerId: string, id: string) => Promise<ProviderUserResponse>;\n  postProviderUserInvite: (providerId: string, request: ProviderUserInviteRequest) => Promise<any>;\n  postProviderUserReinvite: (providerId: string, id: string) => Promise<any>;\n  postManyProviderUserReinvite: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  postProviderUserAccept: (\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ) => Promise<any>;\n  postProviderUserConfirm: (\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ) => Promise<any>;\n  postProviderUsersPublicKey: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkPublicKeyResponse>>;\n  postProviderUserBulkConfirm: (\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  putProviderUser: (\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ) => Promise<any>;\n  deleteProviderUser: (organizationId: string, id: string) => Promise<any>;\n  deleteManyProviderUsers: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  getProviderClients: (\n    providerId: string\n  ) => Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>>;\n  postProviderAddOrganization: (\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ) => Promise<any>;\n  postProviderCreateOrganization: (\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ) => Promise<ProviderOrganizationResponse>;\n  deleteProviderOrganization: (providerId: string, organizationId: string) => Promise<any>;\n\n  getEvents: (start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;\n  getEventsCipher: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsOrganization: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsOrganizationUser: (\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsProvider: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsProviderUser: (\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  postEventsCollect: (request: EventRequest[]) => Promise<any>;\n\n  deleteSsoUser: (organizationId: string) => Promise<void>;\n  getSsoUserIdentifier: () => Promise<string>;\n\n  getUserPublicKey: (id: string) => Promise<UserKeyResponse>;\n\n  getHibpBreach: (username: string) => Promise<BreachAccountResponse[]>;\n\n  postBitPayInvoice: (request: BitPayInvoiceRequest) => Promise<string>;\n  postSetupPayment: () => Promise<string>;\n\n  getActiveBearerToken: () => Promise<string>;\n  fetch: (request: Request) => Promise<Response>;\n  nativeFetch: (request: Request) => Promise<Response>;\n\n  preValidateSso: (identifier: string) => Promise<SsoPreValidateResponse>;\n\n  postCreateSponsorship: (\n    sponsorshipOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ) => Promise<void>;\n  getSponsorshipSyncStatus: (\n    sponsoredOrgId: string\n  ) => Promise<OrganizationSponsorshipSyncStatusResponse>;\n  deleteRevokeSponsorship: (sponsoringOrganizationId: string) => Promise<void>;\n  deleteRemoveSponsorship: (sponsoringOrgId: string) => Promise<void>;\n  postPreValidateSponsorshipToken: (sponsorshipToken: string) => Promise<boolean>;\n  postRedeemSponsorship: (\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ) => Promise<void>;\n  postResendSponsorshipOffer: (sponsoringOrgId: string) => Promise<void>;\n\n  getMasterKeyFromKeyConnector: (keyConnectorUrl: string) => Promise<KeyConnectorUserKeyResponse>;\n  postUserKeyToKeyConnector: (\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ) => Promise<void>;\n  getKeyConnectorAlive: (keyConnectorUrl: string) => Promise<void>;\n  getOrganizationExport: (organizationId: string) => Promise<OrganizationExportResponse>;\n}\n","export abstract class LoginService {\n  getEmail: () => string;\n  getRememberEmail: () => boolean;\n  setEmail: (value: string) => void;\n  setRememberEmail: (value: boolean) => void;\n  clearValues: () => void;\n  saveEmailSettings: () => Promise<void>;\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { PasswordHintRequest } from \"@bitwarden/common/auth/models/request/password-hint.request\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n@Directive()\nexport class HintComponent implements OnInit {\n  email = \"\";\n  formPromise: Promise<any>;\n\n  protected successRoute = \"login\";\n  protected onSuccessfulSubmit: () => void;\n\n  constructor(\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected apiService: ApiService,\n    protected platformUtilsService: PlatformUtilsService,\n    private logService: LogService,\n    private loginService: LoginService\n  ) {}\n\n  ngOnInit(): void {\n    this.email = this.loginService.getEmail() ?? \"\";\n  }\n\n  async submit() {\n    if (this.email == null || this.email === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"emailRequired\")\n      );\n      return;\n    }\n    if (this.email.indexOf(\"@\") === -1) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidEmail\")\n      );\n      return;\n    }\n\n    try {\n      this.formPromise = this.apiService.postPasswordHint(new PasswordHintRequest(this.email));\n      await this.formPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"masterPassSent\"));\n      if (this.onSuccessfulSubmit != null) {\n        this.onSuccessfulSubmit();\n      } else if (this.router != null) {\n        this.router.navigate([this.successRoute]);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n}\n","export abstract class ValidationService {\n  showError: (data: any) => string[];\n}\n","import { Directive, ElementRef, Input, OnChanges } from \"@angular/core\";\n\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\n\n/**\n * Provides error handling, in particular for any error returned by the server in an api call.\n * Attach it to a <form> element and provide the name of the class property that will hold the api call promise.\n * e.g. <form [appApiAction]=\"this.formPromise\">\n * Any errors/rejections that occur will be intercepted and displayed as error toasts.\n */\n@Directive({\n  selector: \"[appApiAction]\",\n})\nexport class ApiActionDirective implements OnChanges {\n  @Input() appApiAction: Promise<any>;\n\n  constructor(\n    private el: ElementRef,\n    private validationService: ValidationService,\n    private logService: LogService\n  ) {}\n\n  ngOnChanges(changes: any) {\n    if (this.appApiAction == null || this.appApiAction.then == null) {\n      return;\n    }\n\n    this.el.nativeElement.loading = true;\n\n    this.appApiAction.then(\n      (response: any) => {\n        this.el.nativeElement.loading = false;\n      },\n      (e: any) => {\n        this.el.nativeElement.loading = false;\n\n        if ((e as ErrorResponse).captchaRequired) {\n          this.logService.error(\"Captcha required error response: \" + e.getSingleMessage());\n          return;\n        }\n        this.logService?.error(`Received API exception: ${e}`);\n        this.validationService.showError(e);\n      }\n    );\n  }\n}\n","import { Directive, ElementRef, Input, NgZone } from \"@angular/core\";\nimport { take } from \"rxjs/operators\";\n\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\n@Directive({\n  selector: \"[appAutofocus]\",\n})\nexport class AutofocusDirective {\n  @Input() set appAutofocus(condition: boolean | string) {\n    this.autofocus = condition === \"\" || condition === true;\n  }\n\n  private autofocus: boolean;\n\n  constructor(private el: ElementRef, private ngZone: NgZone) {}\n\n  ngOnInit() {\n    if (!Utils.isMobileBrowser && this.autofocus) {\n      if (this.ngZone.isStable) {\n        this.el.nativeElement.focus();\n      } else {\n        this.ngZone.onStable.pipe(take(1)).subscribe(() => this.el.nativeElement.focus());\n      }\n    }\n  }\n}\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { HintComponent as BaseHintComponent } from \"@bitwarden/angular/auth/components/hint.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n@Component({\n  selector: \"app-hint\",\n  templateUrl: \"hint.component.html\",\n})\nexport class HintComponent extends BaseHintComponent {\n  constructor(\n    router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    apiService: ApiService,\n    logService: LogService,\n    private route: ActivatedRoute,\n    loginService: LoginService\n  ) {\n    super(router, i18nService, apiService, platformUtilsService, logService, loginService);\n\n    super.onSuccessfulSubmit = async () => {\n      this.router.navigate([this.successRoute]);\n    };\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/login\">\n        {{ \"cancel\" | i18n }}\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"passwordHint\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n          <input\n            id=\"email\"\n            type=\"text\"\n            name=\"Email\"\n            aria-describedby=\"emailHelp\"\n            [(ngModel)]=\"email\"\n            required\n            appAutofocus\n            inputmode=\"email\"\n            appInputVerbatim=\"false\"\n          />\n        </div>\n      </div>\n      <div id=\"emailHelp\" class=\"box-footer\">\n        {{ \"enterEmailToGetHint\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","<label class=\"environment-selector-btn\">\n  {{ \"loggingInOn\" | i18n }}:\n  <a\n    (click)=\"toggle(null)\"\n    cdkOverlayOrigin\n    #trigger=\"cdkOverlayOrigin\"\n    aria-haspopup=\"menu\"\n    aria-controls=\"cdk-overlay-container\"\n    [ngSwitch]=\"selectedEnvironment\"\n  >\n    <label *ngSwitchCase=\"ServerEnvironmentType.US\" class=\"text-primary\">{{\n      \"usDomain\" | i18n\n    }}</label>\n    <label *ngSwitchCase=\"ServerEnvironmentType.EU\" class=\"text-primary\">{{\n      \"euDomain\" | i18n\n    }}</label>\n    <label *ngSwitchCase=\"ServerEnvironmentType.SelfHosted\" class=\"text-primary\">{{\n      \"selfHostedServer\" | i18n\n    }}</label>\n    <i class=\"bwi bwi-fw bwi-sm bwi-angle-down\" aria-hidden=\"true\"></i>\n  </a>\n</label>\n\n<ng-template\n  cdkConnectedOverlay\n  [cdkConnectedOverlayOrigin]=\"trigger\"\n  (backdropClick)=\"close()\"\n  (detach)=\"close()\"\n  [cdkConnectedOverlayOpen]=\"isOpen\"\n  [cdkConnectedOverlayPositions]=\"overlayPosition\"\n>\n  <div class=\"box-content\">\n    <div class=\"environment-selector-dialog\" [@transformPanel]=\"'open'\" role=\"dialog\">\n      <button\n        type=\"button\"\n        class=\"environment-selector-dialog-item\"\n        (click)=\"toggle(ServerEnvironmentType.US)\"\n      >\n        <i\n          class=\"bwi bwi-fw bwi-sm bwi-check\"\n          style=\"padding-bottom: 1px\"\n          aria-hidden=\"true\"\n          [style.visibility]=\"\n            selectedEnvironment === ServerEnvironmentType.US ? 'visible' : 'hidden'\n          \"\n        ></i>\n        <span>{{ \"usDomain\" | i18n }}</span>\n      </button>\n      <br />\n      <button\n        type=\"button\"\n        class=\"environment-selector-dialog-item\"\n        (click)=\"toggle(ServerEnvironmentType.EU)\"\n        *ngIf=\"euServerFlagEnabled\"\n      >\n        <i\n          class=\"bwi bwi-fw bwi-sm bwi-check\"\n          style=\"padding-bottom: 1px\"\n          aria-hidden=\"true\"\n          [style.visibility]=\"\n            selectedEnvironment === ServerEnvironmentType.EU ? 'visible' : 'hidden'\n          \"\n        ></i>\n        <span>{{ \"euDomain\" | i18n }}</span>\n      </button>\n      <br *ngIf=\"euServerFlagEnabled\" />\n      <button\n        type=\"button\"\n        class=\"environment-selector-dialog-item\"\n        (click)=\"toggle(ServerEnvironmentType.SelfHosted)\"\n      >\n        <i\n          class=\"bwi bwi-fw bwi-sm bwi-check\"\n          style=\"padding-bottom: 1px\"\n          aria-hidden=\"true\"\n          [style.visibility]=\"\n            selectedEnvironment === ServerEnvironmentType.SelfHosted ? 'visible' : 'hidden'\n          \"\n        ></i>\n        <span>{{ \"selfHostedServer\" | i18n }}</span>\n      </button>\n    </div>\n  </div>\n</ng-template>\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { ConnectedPosition } from \"@angular/cdk/overlay\";\nimport { Component, EventEmitter, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport {\n  EnvironmentService as EnvironmentServiceAbstraction,\n  Region,\n} from \"@bitwarden/common/platform/abstractions/environment.service\";\n\n@Component({\n  selector: \"environment-selector\",\n  templateUrl: \"environment-selector.component.html\",\n  animations: [\n    trigger(\"transformPanel\", [\n      state(\n        \"void\",\n        style({\n          opacity: 0,\n        })\n      ),\n      transition(\n        \"void => open\",\n        animate(\n          \"100ms linear\",\n          style({\n            opacity: 1,\n          })\n        )\n      ),\n      transition(\"* => void\", animate(\"100ms linear\", style({ opacity: 0 }))),\n    ]),\n  ],\n})\nexport class EnvironmentSelectorComponent implements OnInit, OnDestroy {\n  @Output() onOpenSelfHostedSettings = new EventEmitter();\n  euServerFlagEnabled: boolean;\n  isOpen = false;\n  showingModal = false;\n  selectedEnvironment: Region;\n  ServerEnvironmentType = Region;\n  overlayPosition: ConnectedPosition[] = [\n    {\n      originX: \"start\",\n      originY: \"bottom\",\n      overlayX: \"start\",\n      overlayY: \"top\",\n    },\n  ];\n  protected componentDestroyed$: Subject<void> = new Subject();\n\n  constructor(\n    protected environmentService: EnvironmentServiceAbstraction,\n    protected configService: ConfigServiceAbstraction,\n    protected router: Router\n  ) {}\n\n  async ngOnInit() {\n    this.configService.serverConfig$.pipe(takeUntil(this.componentDestroyed$)).subscribe(() => {\n      this.updateEnvironmentInfo();\n    });\n    this.updateEnvironmentInfo();\n  }\n\n  ngOnDestroy(): void {\n    this.componentDestroyed$.next();\n    this.componentDestroyed$.complete();\n  }\n\n  async toggle(option: Region) {\n    this.isOpen = !this.isOpen;\n    if (option === null) {\n      return;\n    }\n\n    this.updateEnvironmentInfo();\n\n    if (option === Region.SelfHosted) {\n      this.onOpenSelfHostedSettings.emit();\n      return;\n    }\n\n    await this.environmentService.setRegion(option);\n    this.updateEnvironmentInfo();\n  }\n\n  async updateEnvironmentInfo() {\n    this.selectedEnvironment = this.environmentService.selectedRegion;\n    this.euServerFlagEnabled = await this.configService.getFeatureFlag<boolean>(\n      FeatureFlag.DisplayEuEnvironmentFlag\n    );\n  }\n\n  close() {\n    this.isOpen = false;\n    this.updateEnvironmentInfo();\n  }\n}\n","import { Component, OnDestroy, OnInit, ViewChild } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { EnvironmentSelectorComponent } from \"@bitwarden/angular/auth/components/environment-selector.component\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\n@Component({\n  selector: \"app-home\",\n  templateUrl: \"home.component.html\",\n})\nexport class HomeComponent implements OnInit, OnDestroy {\n  @ViewChild(EnvironmentSelectorComponent, { static: true })\n  environmentSelector!: EnvironmentSelectorComponent;\n  private destroyed$: Subject<void> = new Subject();\n\n  loginInitiated = false;\n  formGroup = this.formBuilder.group({\n    email: [\"\", [Validators.required, Validators.email]],\n    rememberEmail: [false],\n  });\n\n  constructor(\n    protected platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private i18nService: I18nService,\n    private environmentService: EnvironmentService,\n    private loginService: LoginService\n  ) {}\n\n  async ngOnInit(): Promise<void> {\n    let savedEmail = this.loginService.getEmail();\n    const rememberEmail = this.loginService.getRememberEmail();\n\n    if (savedEmail != null) {\n      this.formGroup.patchValue({\n        email: savedEmail,\n        rememberEmail: rememberEmail,\n      });\n    } else {\n      savedEmail = await this.stateService.getRememberedEmail();\n      if (savedEmail != null) {\n        this.formGroup.patchValue({\n          email: savedEmail,\n          rememberEmail: true,\n        });\n      }\n    }\n\n    this.environmentSelector.onOpenSelfHostedSettings\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe(() => {\n        this.setFormValues();\n        this.router.navigate([\"environment\"]);\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  submit() {\n    this.formGroup.markAllAsTouched();\n    if (this.formGroup.invalid) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccured\"),\n        this.i18nService.t(\"invalidEmail\")\n      );\n      return;\n    }\n\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n    this.router.navigate([\"login\"], { queryParams: { email: this.formGroup.value.email } });\n  }\n\n  get selfHostedDomain() {\n    return this.environmentService.hasBaseUrl() ? this.environmentService.getWebVaultUrl() : null;\n  }\n\n  setFormValues() {\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n  }\n}\n","<div class=\"center-content\">\n  <div class=\"content login-page\">\n    <div class=\"logo-image\"></div>\n    <p class=\"lead text-center\">{{ \"loginOrCreateNewAccount\" | i18n }}</p>\n    <form #form [formGroup]=\"formGroup\" (ngSubmit)=\"submit()\">\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n            <input id=\"email\" type=\"email\" formControlName=\"email\" appInputVerbatim=\"false\" />\n          </div>\n          <environment-selector class=\"environment-selector-padding\"></environment-selector>\n          <div class=\"remember-email-check\">\n            <input\n              id=\"rememberEmail\"\n              type=\"checkbox\"\n              name=\"rememberEmail\"\n              formControlName=\"rememberEmail\"\n            />\n            <label for=\"rememberEmail\">{{ \"rememberEmail\" | i18n }}</label>\n          </div>\n        </div>\n      </div>\n      <div class=\"box\">\n        <button type=\"submit\" class=\"btn primary block\">\n          <b>{{ \"continue\" | i18n }}</b>\n        </button>\n      </div>\n    </form>\n    <p class=\"createAccountLink\">\n      {{ \"newAroundHere\" | i18n }}\n      <a routerLink=\"/register\" (click)=\"setFormValues()\">{{ \"createAccount\" | i18n }}</a>\n    </p>\n  </div>\n</div>\n","export enum VaultTimeoutAction {\n  Lock = \"lock\",\n  LogOut = \"logOut\",\n}\n","export class SecretVerificationRequest {\n  masterPasswordHash: string;\n  otp: string;\n  authRequestAccessCode: string;\n}\n","import { ZXCVBNResult } from \"zxcvbn\";\n\nexport abstract class PasswordStrengthServiceAbstraction {\n  getPasswordStrength: (password: string, email?: string, userInputs?: string[]) => ZXCVBNResult;\n}\n","import * as zxcvbn from \"zxcvbn\";\n\nimport { PasswordStrengthServiceAbstraction } from \"./password-strength.service.abstraction\";\n\nexport class PasswordStrengthService implements PasswordStrengthServiceAbstraction {\n  /**\n   * Calculates a password strength score using zxcvbn.\n   * @param password The password to calculate the strength of.\n   * @param emailInput An unparsed email address to use as user input.\n   * @param userInputs An array of additional user inputs to use when calculating the strength.\n   */\n  getPasswordStrength(\n    password: string,\n    emailInput: string = null,\n    userInputs: string[] = null\n  ): zxcvbn.ZXCVBNResult {\n    if (password == null || password.length === 0) {\n      return null;\n    }\n    const globalUserInputs = [\n      \"bitwarden\",\n      \"bit\",\n      \"warden\",\n      ...(userInputs ?? []),\n      ...this.emailToUserInputs(emailInput),\n    ];\n    // Use a hash set to get rid of any duplicate user inputs\n    const finalUserInputs = Array.from(new Set(globalUserInputs));\n    const result = zxcvbn(password, finalUserInputs);\n    return result;\n  }\n\n  /**\n   * Convert an email address into a list of user inputs for zxcvbn by\n   * taking the local part of the email address and splitting it into words.\n   * @param email\n   * @private\n   */\n  private emailToUserInputs(email: string): string[] {\n    if (email == null || email.length === 0) {\n      return [];\n    }\n    const atPosition = email.indexOf(\"@\");\n    if (atPosition < 0) {\n      return [];\n    }\n    return email\n      .substring(0, atPosition)\n      .trim()\n      .toLowerCase()\n      .split(/[^A-Za-z0-9]/);\n  }\n}\n","export abstract class VaultTimeoutService {\n  checkVaultTimeout: () => Promise<void>;\n  lock: (userId?: string) => Promise<void>;\n  logOut: (userId?: string) => Promise<void>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { PinLockType } from \"../../services/vault-timeout/vault-timeout-settings.service\";\n\nexport abstract class VaultTimeoutSettingsService {\n  /**\n   * Set the vault timeout options for the user\n   * @param vaultTimeout The vault timeout in minutes\n   * @param vaultTimeoutAction The vault timeout action\n   * @param userId The user id to set. If not provided, the current user is used\n   */\n  setVaultTimeoutOptions: (\n    vaultTimeout: number,\n    vaultTimeoutAction: VaultTimeoutAction\n  ) => Promise<void>;\n\n  /**\n   * Get the available vault timeout actions for the current user\n   *\n   * **NOTE:** This observable is not yet connected to the state service, so it will not update when the state changes\n   * @param userId The user id to check. If not provided, the current user is used\n   */\n  availableVaultTimeoutActions$: (userId?: string) => Observable<VaultTimeoutAction[]>;\n\n  /**\n   * Get the current vault timeout action for the user. This is not the same as the current state, it is\n   * calculated based on the current state, the user's policy, and the user's available unlock methods.\n   */\n  getVaultTimeout: (userId?: string) => Promise<number>;\n\n  /**\n   * Observe the vault timeout action for the user. This is calculated based on users preferred lock action saved in the state,\n   * the user's policy, and the user's available unlock methods.\n   *\n   * **NOTE:** This observable is not yet connected to the state service, so it will not update when the state changes\n   * @param userId The user id to check. If not provided, the current user is used\n   */\n  vaultTimeoutAction$: (userId?: string) => Observable<VaultTimeoutAction>;\n\n  /**\n   * Has the user enabled unlock with Pin.\n   * @param userId The user id to check. If not provided, the current user is used\n   * @returns PinLockType\n   */\n  isPinLockSet: (userId?: string) => Promise<PinLockType>;\n\n  /**\n   * Has the user enabled unlock with Biometric.\n   * @param userId The user id to check. If not provided, the current user is used\n   * @returns boolean true if biometric lock is set\n   */\n  isBiometricLockSet: (userId?: string) => Promise<boolean>;\n\n  clear: (userId?: string) => Promise<void>;\n}\n","import { ListResponse } from \"../../../models/response/list.response\";\nimport { PolicyType } from \"../../enums\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiServiceAbstraction {\n  getPolicy: (organizationId: string, type: PolicyType) => Promise<PolicyResponse>;\n  getPolicies: (organizationId: string) => Promise<ListResponse<PolicyResponse>>;\n\n  getPoliciesByToken: (\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ) => Promise<ListResponse<PolicyResponse>>;\n  getPoliciesByInvitedUser: (\n    organizationId: string,\n    userId: string\n  ) => Promise<ListResponse<PolicyResponse>>;\n  getMasterPasswordPoliciesForInvitedUsers: (orgId: string) => Promise<MasterPasswordPolicyOptions>;\n  putPolicy: (organizationId: string, type: PolicyType, request: PolicyRequest) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport abstract class PolicyService {\n  policies$: Observable<Policy[]>;\n  get$: (policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) => Observable<Policy>;\n  masterPasswordPolicyOptions$: (policies?: Policy[]) => Observable<MasterPasswordPolicyOptions>;\n  policyAppliesToActiveUser$: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean\n  ) => Observable<boolean>;\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  getAll: (type?: PolicyType, userId?: string) => Promise<Policy[]>;\n  evaluateMasterPassword: (\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions?: MasterPasswordPolicyOptions\n  ) => boolean;\n  getResetPasswordPolicyOptions: (\n    policies: Policy[],\n    orgId: string\n  ) => [ResetPasswordPolicyOptions, boolean];\n  mapPoliciesFromToken: (policiesResponse: ListResponse<PolicyResponse>) => Policy[];\n  policyAppliesToUser: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) => Promise<boolean>;\n}\n\nexport abstract class InternalPolicyService extends PolicyService {\n  upsert: (policy: PolicyData) => Promise<any>;\n  replace: (policies: { [id: string]: PolicyData }) => Promise<void>;\n  clear: (userId?: string) => Promise<any>;\n}\n","export type ButtonType = \"primary\" | \"secondary\" | \"danger\" | \"unstyled\";\n\nexport abstract class ButtonLikeAbstraction {\n  loading: boolean;\n  disabled: boolean;\n  setButtonType: (value: ButtonType) => void;\n}\n","import { from, Observable, of, throwError } from \"rxjs\";\n\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nexport type FunctionReturningAwaitable =\n  | (() => unknown)\n  | (() => Promise<unknown>)\n  | (() => Observable<unknown>);\n\nexport function functionToObservable(func: FunctionReturningAwaitable): Observable<unknown> {\n  let awaitable: unknown;\n  try {\n    awaitable = func();\n  } catch (error) {\n    return throwError(() => error);\n  }\n\n  if (Utils.isPromise(awaitable)) {\n    return from(awaitable);\n  }\n\n  if (awaitable instanceof Observable) {\n    return awaitable;\n  }\n\n  return of(awaitable);\n}\n","import { Directive, Input, OnDestroy, OnInit, Optional } from \"@angular/core\";\nimport { FormGroupDirective } from \"@angular/forms\";\nimport { BehaviorSubject, catchError, filter, of, Subject, switchMap, takeUntil } from \"rxjs\";\n\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\n\nimport { FunctionReturningAwaitable, functionToObservable } from \"../utils/function-to-observable\";\n\n/**\n * Allow a form to perform async actions on submit, disabling the form while the action is processing.\n */\n@Directive({\n  selector: \"[formGroup][bitSubmit]\",\n})\nexport class BitSubmitDirective implements OnInit, OnDestroy {\n  private destroy$ = new Subject<void>();\n  private _loading$ = new BehaviorSubject<boolean>(false);\n  private _disabled$ = new BehaviorSubject<boolean>(false);\n\n  @Input(\"bitSubmit\") handler: FunctionReturningAwaitable;\n\n  @Input() allowDisabledFormSubmit?: boolean = false;\n\n  readonly loading$ = this._loading$.asObservable();\n  readonly disabled$ = this._disabled$.asObservable();\n\n  constructor(\n    private formGroupDirective: FormGroupDirective,\n    @Optional() validationService?: ValidationService,\n    @Optional() logService?: LogService\n  ) {\n    formGroupDirective.ngSubmit\n      .pipe(\n        filter(() => !this.disabled),\n        switchMap(() => {\n          // Calling functionToObservable executes the sync part of the handler\n          // allowing the function to check form validity before it gets disabled.\n          const awaitable = functionToObservable(this.handler);\n\n          // Disable form\n          this.loading = true;\n\n          return awaitable.pipe(\n            catchError((err: unknown) => {\n              logService?.error(`Async submit exception: ${err}`);\n              validationService?.showError(err);\n              return of(undefined);\n            })\n          );\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe({\n        next: () => (this.loading = false),\n        complete: () => (this.loading = false),\n      });\n  }\n\n  ngOnInit(): void {\n    this.formGroupDirective.statusChanges.pipe(takeUntil(this.destroy$)).subscribe((c) => {\n      if (this.allowDisabledFormSubmit) {\n        this._disabled$.next(false);\n      } else {\n        this._disabled$.next(c === \"DISABLED\");\n      }\n    });\n  }\n\n  get disabled() {\n    return this._disabled$.value;\n  }\n\n  set disabled(value: boolean) {\n    this._disabled$.next(value);\n  }\n\n  get loading() {\n    return this._loading$.value;\n  }\n\n  set loading(value: boolean) {\n    this.disabled = value;\n    this._loading$.next(value);\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { Directive, HostListener, Input, OnDestroy, Optional } from \"@angular/core\";\nimport { BehaviorSubject, finalize, Subject, takeUntil, tap } from \"rxjs\";\n\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\n\nimport { ButtonLikeAbstraction } from \"../shared/button-like.abstraction\";\nimport { FunctionReturningAwaitable, functionToObservable } from \"../utils/function-to-observable\";\n\n/**\n * Allow a single button to perform async actions on click and reflect the progress in the UI by automatically\n * activating the loading effect while the action is processed.\n */\n@Directive({\n  selector: \"[bitAction]\",\n})\nexport class BitActionDirective implements OnDestroy {\n  private destroy$ = new Subject<void>();\n  private _loading$ = new BehaviorSubject<boolean>(false);\n\n  disabled = false;\n\n  @Input(\"bitAction\") handler: FunctionReturningAwaitable;\n\n  readonly loading$ = this._loading$.asObservable();\n\n  constructor(\n    private buttonComponent: ButtonLikeAbstraction,\n    @Optional() private validationService?: ValidationService,\n    @Optional() private logService?: LogService\n  ) {}\n\n  get loading() {\n    return this._loading$.value;\n  }\n\n  set loading(value: boolean) {\n    this._loading$.next(value);\n    this.buttonComponent.loading = value;\n  }\n\n  @HostListener(\"click\")\n  protected async onClick() {\n    if (!this.handler || this.loading || this.disabled || this.buttonComponent.disabled) {\n      return;\n    }\n\n    this.loading = true;\n    functionToObservable(this.handler)\n      .pipe(\n        tap({\n          error: (err: unknown) => {\n            this.logService?.error(`Async action exception: ${err}`);\n            this.validationService?.showError(err);\n          },\n        }),\n        finalize(() => (this.loading = false)),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { Directive, Input, OnDestroy, Optional } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { ButtonLikeAbstraction } from \"../shared/button-like.abstraction\";\n\nimport { BitActionDirective } from \"./bit-action.directive\";\nimport { BitSubmitDirective } from \"./bit-submit.directive\";\n\n/**\n * This directive has two purposes:\n *\n * When attached to a submit button:\n * - Activates the button loading effect while the form is processing an async submit action.\n * - Disables the button while a `bitAction` directive on another button is being processed.\n *\n * When attached to a button with `bitAction` directive inside of a form:\n * - Disables the button while the `bitSubmit` directive is processing an async submit action.\n * - Disables the button while a `bitAction` directive on another button is being processed.\n * - Disables form submission while the `bitAction` directive is processing an async action.\n *\n * Note: you must use a directive that implements the ButtonLikeAbstraction (bitButton or bitIconButton for example)\n * along with this one in order to avoid provider errors.\n */\n@Directive({\n  selector: \"button[bitFormButton]\",\n})\nexport class BitFormButtonDirective implements OnDestroy {\n  private destroy$ = new Subject<void>();\n\n  @Input() type: string;\n  @Input() disabled?: boolean;\n\n  constructor(\n    buttonComponent: ButtonLikeAbstraction,\n    @Optional() submitDirective?: BitSubmitDirective,\n    @Optional() actionDirective?: BitActionDirective\n  ) {\n    if (submitDirective && buttonComponent) {\n      submitDirective.loading$.pipe(takeUntil(this.destroy$)).subscribe((loading) => {\n        if (this.type === \"submit\") {\n          buttonComponent.loading = loading;\n        } else {\n          buttonComponent.disabled = loading;\n        }\n      });\n\n      submitDirective.disabled$.pipe(takeUntil(this.destroy$)).subscribe((disabled) => {\n        if (this.disabled !== false) {\n          buttonComponent.disabled = disabled;\n        }\n      });\n    }\n\n    if (submitDirective && actionDirective) {\n      actionDirective.loading$.pipe(takeUntil(this.destroy$)).subscribe((disabled) => {\n        submitDirective.disabled = disabled;\n      });\n\n      submitDirective.disabled$.pipe(takeUntil(this.destroy$)).subscribe((disabled) => {\n        actionDirective.disabled = disabled;\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { coerceBooleanProperty } from \"@angular/cdk/coercion\";\nimport { Input, HostBinding, Component } from \"@angular/core\";\n\nimport { ButtonLikeAbstraction, ButtonType } from \"../shared/button-like.abstraction\";\n\nconst focusRing = [\n  \"focus-visible:tw-ring\",\n  \"focus-visible:tw-ring-offset-2\",\n  \"focus-visible:tw-ring-primary-700\",\n  \"focus-visible:tw-z-10\",\n];\n\nconst buttonStyles: Record<ButtonType, string[]> = {\n  primary: [\n    \"tw-border-primary-500\",\n    \"tw-bg-primary-500\",\n    \"!tw-text-contrast\",\n    \"hover:tw-bg-primary-700\",\n    \"hover:tw-border-primary-700\",\n    \"disabled:tw-bg-primary-500/60\",\n    \"disabled:tw-border-primary-500/60\",\n    \"disabled:!tw-text-contrast/60\",\n    \"disabled:tw-bg-clip-padding\",\n    \"disabled:tw-cursor-not-allowed\",\n    ...focusRing,\n  ],\n  secondary: [\n    \"tw-bg-transparent\",\n    \"tw-border-text-muted\",\n    \"!tw-text-muted\",\n    \"hover:tw-bg-text-muted\",\n    \"hover:tw-border-text-muted\",\n    \"hover:!tw-text-contrast\",\n    \"disabled:tw-bg-transparent\",\n    \"disabled:tw-border-text-muted/60\",\n    \"disabled:!tw-text-muted/60\",\n    \"disabled:tw-cursor-not-allowed\",\n    ...focusRing,\n  ],\n  danger: [\n    \"tw-bg-transparent\",\n    \"tw-border-danger-500\",\n    \"!tw-text-danger\",\n    \"hover:tw-bg-danger-500\",\n    \"hover:tw-border-danger-500\",\n    \"hover:!tw-text-contrast\",\n    \"disabled:tw-bg-transparent\",\n    \"disabled:tw-border-danger-500/60\",\n    \"disabled:!tw-text-danger/60\",\n    \"disabled:tw-cursor-not-allowed\",\n    ...focusRing,\n  ],\n  unstyled: [],\n};\n\n@Component({\n  selector: \"button[bitButton], a[bitButton]\",\n  templateUrl: \"button.component.html\",\n  providers: [{ provide: ButtonLikeAbstraction, useExisting: ButtonComponent }],\n})\nexport class ButtonComponent implements ButtonLikeAbstraction {\n  @HostBinding(\"class\") get classList() {\n    return [\n      \"tw-font-semibold\",\n      \"tw-py-1.5\",\n      \"tw-px-3\",\n      \"tw-rounded\",\n      \"tw-transition\",\n      \"tw-border\",\n      \"tw-border-solid\",\n      \"tw-text-center\",\n      \"hover:tw-no-underline\",\n      \"focus:tw-outline-none\",\n    ]\n      .concat(this.block ? [\"tw-w-full\", \"tw-block\"] : [\"tw-inline-block\"])\n      .concat(buttonStyles[this.buttonType ?? \"secondary\"]);\n  }\n\n  @HostBinding(\"attr.disabled\")\n  get disabledAttr() {\n    const disabled = this.disabled != null && this.disabled !== false;\n    return disabled || this.loading ? true : null;\n  }\n\n  @Input() buttonType: ButtonType;\n\n  private _block = false;\n\n  @Input()\n  get block(): boolean {\n    return this._block;\n  }\n\n  set block(value: boolean | \"\") {\n    this._block = coerceBooleanProperty(value);\n  }\n\n  @Input() loading = false;\n\n  @Input() disabled = false;\n\n  setButtonType(value: \"primary\" | \"secondary\" | \"danger\" | \"unstyled\") {\n    this.buttonType = value;\n  }\n}\n","<span class=\"tw-relative\">\n  <span [ngClass]=\"{ 'tw-invisible': loading }\">\n    <ng-content></ng-content>\n  </span>\n  <span\n    class=\"tw-absolute tw-inset-0 tw-flex tw-items-center tw-justify-center\"\n    [ngClass]=\"{ 'tw-invisible': !loading }\"\n  >\n    <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" aria-hidden=\"true\"></i>\n  </span>\n</span>\n","import { style, animate, trigger, transition, group } from \"@angular/animations\";\n\nexport const fadeIn = trigger(\"fadeIn\", [\n  transition(\":enter\", [\n    style({ opacity: 0, transform: \"translateY(-50px)\" }),\n    group([\n      animate(\"0.15s linear\", style({ opacity: 1 })),\n      animate(\"0.3s ease-out\", style({ transform: \"none\" })),\n    ]),\n  ]),\n]);\n","import { CdkDialogContainer, DialogRef } from \"@angular/cdk/dialog\";\nimport { Directive, HostBinding, Input, OnInit, Optional } from \"@angular/core\";\n\n// Increments for each instance of this component\nlet nextId = 0;\n\n@Directive({\n  selector: \"[bitDialogTitleContainer]\",\n})\nexport class DialogTitleContainerDirective implements OnInit {\n  @HostBinding(\"id\") id = `bit-dialog-title-${nextId++}`;\n\n  @Input() simple = false;\n\n  constructor(@Optional() private dialogRef: DialogRef<any>) {}\n\n  ngOnInit(): void {\n    // Based on angular/components, licensed under MIT\n    // https://github.com/angular/components/blob/14.2.0/src/material/dialog/dialog-content-directives.ts#L121-L128\n    if (this.dialogRef) {\n      Promise.resolve().then(() => {\n        const container = this.dialogRef.containerInstance as CdkDialogContainer;\n\n        if (container && !container._ariaLabelledBy) {\n          container._ariaLabelledBy = this.id;\n        }\n      });\n    }\n  }\n}\n","<div\n  class=\"tw-my-4 tw-flex tw-max-h-screen tw-w-96 tw-max-w-90vw tw-flex-col tw-overflow-hidden tw-rounded tw-border tw-border-solid tw-border-secondary-300 tw-bg-text-contrast tw-text-main\"\n  @fadeIn\n>\n  <div class=\"tw-flex tw-flex-col tw-items-center tw-gap-2 tw-px-4 tw-pt-4 tw-text-center\">\n    <ng-container *ngIf=\"hasIcon; else elseBlock\">\n      <ng-content select=\"[bitDialogIcon]\"></ng-content>\n    </ng-container>\n    <ng-template #elseBlock>\n      <i class=\"bwi bwi-exclamation-triangle tw-text-3xl tw-text-warning\" aria-hidden=\"true\"></i>\n    </ng-template>\n    <h1 bitDialogTitleContainer class=\"tw-mb-0 tw-text-base tw-font-semibold\">\n      <ng-content select=\"[bitDialogTitle]\"></ng-content>\n    </h1>\n  </div>\n  <div class=\"tw-overflow-y-auto tw-px-4 tw-pb-4 tw-pt-2 tw-text-center tw-text-base\">\n    <ng-content select=\"[bitDialogContent]\"></ng-content>\n  </div>\n  <div\n    class=\"tw-flex tw-flex-row tw-gap-2 tw-border-0 tw-border-t tw-border-solid tw-border-secondary-300 tw-p-4\"\n  >\n    <ng-content select=\"[bitDialogFooter]\"></ng-content>\n  </div>\n</div>\n","import { Component, ContentChild, Directive } from \"@angular/core\";\n\nimport { fadeIn } from \"../animations\";\n\n@Directive({ selector: \"[bitDialogIcon]\" })\nexport class IconDirective {}\n\n@Component({\n  selector: \"bit-simple-dialog\",\n  templateUrl: \"./simple-dialog.component.html\",\n  animations: [fadeIn],\n})\nexport class SimpleDialogComponent {\n  @ContentChild(IconDirective) icon!: IconDirective;\n\n  get hasIcon() {\n    return this.icon != null;\n  }\n}\n","<form [formGroup]=\"formGroup\" [bitSubmit]=\"accept\">\n  <bit-simple-dialog>\n    <i bitDialogIcon class=\"bwi tw-text-3xl\" [class]=\"iconClasses\" aria-hidden=\"true\"></i>\n\n    <span bitDialogTitle>{{ title }}</span>\n\n    <div bitDialogContent>{{ content }}</div>\n\n    <ng-container bitDialogFooter>\n      <button type=\"submit\" bitButton bitFormButton buttonType=\"primary\">\n        {{ acceptButtonText }}\n      </button>\n\n      <button\n        *ngIf=\"showCancelButton\"\n        type=\"button\"\n        bitButton\n        bitFormButton\n        buttonType=\"secondary\"\n        (click)=\"dialogRef.close(false)\"\n      >\n        {{ cancelButtonText }}\n      </button>\n    </ng-container>\n  </bit-simple-dialog>\n</form>\n","import { DialogRef, DIALOG_DATA } from \"@angular/cdk/dialog\";\nimport { Component, Inject } from \"@angular/core\";\nimport { FormGroup } from \"@angular/forms\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\nimport { SimpleDialogOptions, SimpleDialogType, Translation } from \"../..\";\n\nconst DEFAULT_ICON: Record<SimpleDialogType, string> = {\n  primary: \"bwi-business\",\n  success: \"bwi-star\",\n  info: \"bwi-info-circle\",\n  warning: \"bwi-exclamation-triangle\",\n  danger: \"bwi-error\",\n};\n\nconst DEFAULT_COLOR: Record<SimpleDialogType, string> = {\n  primary: \"tw-text-primary-500\",\n  success: \"tw-text-success\",\n  info: \"tw-text-info\",\n  warning: \"tw-text-warning\",\n  danger: \"tw-text-danger\",\n};\n\n@Component({\n  templateUrl: \"./simple-configurable-dialog.component.html\",\n})\nexport class SimpleConfigurableDialogComponent {\n  get iconClasses() {\n    return [\n      this.simpleDialogOpts.icon ?? DEFAULT_ICON[this.simpleDialogOpts.type],\n      DEFAULT_COLOR[this.simpleDialogOpts.type],\n    ];\n  }\n\n  protected title: string;\n  protected content: string;\n  protected acceptButtonText: string;\n  protected cancelButtonText: string;\n  protected formGroup = new FormGroup({});\n\n  protected showCancelButton = this.simpleDialogOpts.cancelButtonText !== null;\n\n  constructor(\n    public dialogRef: DialogRef,\n    private i18nService: I18nService,\n    @Inject(DIALOG_DATA) public simpleDialogOpts?: SimpleDialogOptions\n  ) {\n    this.localizeText();\n  }\n\n  protected accept = async () => {\n    if (this.simpleDialogOpts.acceptAction) {\n      await this.simpleDialogOpts.acceptAction();\n    }\n\n    this.dialogRef.close(true);\n  };\n\n  private localizeText() {\n    this.title = this.translate(this.simpleDialogOpts.title);\n    this.content = this.translate(this.simpleDialogOpts.content);\n    this.acceptButtonText = this.translate(this.simpleDialogOpts.acceptButtonText, \"yes\");\n\n    if (this.showCancelButton) {\n      // If accept text is overridden, use cancel, otherwise no\n      this.cancelButtonText = this.translate(\n        this.simpleDialogOpts.cancelButtonText,\n        this.simpleDialogOpts.acceptButtonText !== undefined ? \"cancel\" : \"no\"\n      );\n    }\n  }\n\n  private translate(translation: string | Translation, defaultKey?: string): string {\n    // Translation interface use implies we must localize.\n    if (typeof translation === \"object\") {\n      return this.i18nService.t(translation.key, ...(translation.placeholders ?? []));\n    }\n\n    // Use string that is already translated or use default key post translate\n    return translation ?? this.i18nService.t(defaultKey);\n  }\n}\n","import {\n  DEFAULT_DIALOG_CONFIG,\n  Dialog,\n  DialogConfig,\n  DialogRef,\n  DIALOG_SCROLL_STRATEGY,\n} from \"@angular/cdk/dialog\";\nimport { ComponentType, Overlay, OverlayContainer } from \"@angular/cdk/overlay\";\nimport {\n  Inject,\n  Injectable,\n  Injector,\n  OnDestroy,\n  Optional,\n  SkipSelf,\n  TemplateRef,\n} from \"@angular/core\";\nimport { NavigationEnd, Router } from \"@angular/router\";\nimport { filter, firstValueFrom, Subject, switchMap, takeUntil } from \"rxjs\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\nimport { SimpleConfigurableDialogComponent } from \"./simple-dialog/simple-configurable-dialog/simple-configurable-dialog.component\";\nimport { SimpleDialogOptions, Translation } from \"./simple-dialog/types\";\n\n@Injectable()\nexport class DialogService extends Dialog implements OnDestroy {\n  private _destroy$ = new Subject<void>();\n\n  private backDropClasses = [\"tw-fixed\", \"tw-bg-black\", \"tw-bg-opacity-30\", \"tw-inset-0\"];\n\n  constructor(\n    /** Parent class constructor */\n    _overlay: Overlay,\n    _injector: Injector,\n    @Optional() @Inject(DEFAULT_DIALOG_CONFIG) _defaultOptions: DialogConfig,\n    @Optional() @SkipSelf() _parentDialog: Dialog,\n    _overlayContainer: OverlayContainer,\n    @Inject(DIALOG_SCROLL_STRATEGY) scrollStrategy: any,\n\n    /** Not in parent class */\n    @Optional() router: Router,\n    @Optional() authService: AuthService,\n\n    protected i18nService: I18nService\n  ) {\n    super(_overlay, _injector, _defaultOptions, _parentDialog, _overlayContainer, scrollStrategy);\n\n    /** Close all open dialogs if the vault locks */\n    if (router && authService) {\n      router.events\n        .pipe(\n          filter((event) => event instanceof NavigationEnd),\n          switchMap(() => authService.getAuthStatus()),\n          filter((v) => v !== AuthenticationStatus.Unlocked),\n          takeUntil(this._destroy$)\n        )\n        .subscribe(() => this.closeAll());\n    }\n  }\n\n  override ngOnDestroy(): void {\n    this._destroy$.next();\n    this._destroy$.complete();\n    super.ngOnDestroy();\n  }\n\n  override open<R = unknown, D = unknown, C = unknown>(\n    componentOrTemplateRef: ComponentType<C> | TemplateRef<C>,\n    config?: DialogConfig<D, DialogRef<R, C>>\n  ): DialogRef<R, C> {\n    config = {\n      backdropClass: this.backDropClasses,\n      ...config,\n    };\n\n    return super.open(componentOrTemplateRef, config);\n  }\n\n  /**\n   * Opens a simple dialog, returns true if the user accepted the dialog.\n   *\n   * @param {SimpleDialogOptions} simpleDialogOptions - An object containing options for the dialog.\n   * @returns `boolean` - True if the user accepted the dialog, false otherwise.\n   */\n  async openSimpleDialog(simpleDialogOptions: SimpleDialogOptions): Promise<boolean> {\n    const dialogRef = this.open<boolean>(SimpleConfigurableDialogComponent, {\n      data: simpleDialogOptions,\n      disableClose: simpleDialogOptions.disableClose,\n    });\n\n    return firstValueFrom(dialogRef.closed);\n  }\n\n  /**\n   * Opens a simple dialog.\n   *\n   * @deprecated Use `openSimpleDialog` instead. If you find a use case for the `dialogRef`\n   * please let #wg-component-library know and we can un-deprecate this method.\n   *\n   * @param {SimpleDialogOptions} simpleDialogOptions - An object containing options for the dialog.\n   * @returns `DialogRef` - The reference to the opened dialog.\n   * Contains a closed observable which can be subscribed to for determining which button\n   * a user pressed\n   */\n  openSimpleDialogRef(simpleDialogOptions: SimpleDialogOptions): DialogRef {\n    return this.open(SimpleConfigurableDialogComponent, {\n      data: simpleDialogOptions,\n      disableClose: simpleDialogOptions.disableClose,\n    });\n  }\n\n  protected translate(translation: string | Translation, defaultKey?: string): string {\n    if (translation == null && defaultKey == null) {\n      return null;\n    }\n\n    if (translation == null) {\n      return this.i18nService.t(defaultKey);\n    }\n\n    // Translation interface use implies we must localize.\n    if (typeof translation === \"object\") {\n      return this.i18nService.t(translation.key, ...(translation.placeholders ?? []));\n    }\n\n    return translation;\n  }\n}\n","import { Directive, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { firstValueFrom, Subject } from \"rxjs\";\nimport { concatMap, take, takeUntil } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { SecretVerificationRequest } from \"@bitwarden/common/auth/models/request/secret-verification.request\";\nimport { MasterPasswordPolicyResponse } from \"@bitwarden/common/auth/models/response/master-password-policy.response\";\nimport { HashPurpose, KeySuffixOptions } from \"@bitwarden/common/enums\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport { UserKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { PinLockType } from \"@bitwarden/common/services/vault-timeout/vault-timeout-settings.service\";\nimport { PasswordStrengthServiceAbstraction } from \"@bitwarden/common/tools/password-strength\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class LockComponent implements OnInit, OnDestroy {\n  masterPassword = \"\";\n  pin = \"\";\n  showPassword = false;\n  email: string;\n  pinEnabled = false;\n  masterPasswordEnabled = false;\n  webVaultHostname = \"\";\n  formPromise: Promise<MasterPasswordPolicyResponse>;\n  supportsBiometric: boolean;\n  biometricLock: boolean;\n  biometricText: string;\n\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  protected onSuccessfulSubmit: () => Promise<void>;\n\n  private invalidPinAttempts = 0;\n  private pinStatus: PinLockType;\n\n  private enforcedMasterPasswordOptions: MasterPasswordPolicyOptions = undefined;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected cryptoService: CryptoService,\n    protected vaultTimeoutService: VaultTimeoutService,\n    protected vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected apiService: ApiService,\n    protected logService: LogService,\n    protected ngZone: NgZone,\n    protected policyApiService: PolicyApiServiceAbstraction,\n    protected policyService: InternalPolicyService,\n    protected passwordStrengthService: PasswordStrengthServiceAbstraction,\n    protected dialogService: DialogService,\n    protected deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    protected userVerificationService: UserVerificationService\n  ) {}\n\n  async ngOnInit() {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          await this.load();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async submit() {\n    if (this.pinEnabled) {\n      return await this.handlePinRequiredUnlock();\n    }\n\n    await this.handleMasterPasswordRequiredUnlock();\n  }\n\n  async logOut() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"logOut\" },\n      content: { key: \"logOutConfirmation\" },\n      acceptButtonText: { key: \"logOut\" },\n      type: \"warning\",\n    });\n\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  async unlockBiometric(): Promise<boolean> {\n    if (!this.biometricLock) {\n      return;\n    }\n\n    const userKey = await this.cryptoService.getUserKeyFromStorage(KeySuffixOptions.Biometric);\n\n    if (userKey) {\n      await this.setUserKeyAndContinue(userKey, false);\n    }\n\n    return !!userKey;\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    const input = document.getElementById(this.pinEnabled ? \"pin\" : \"masterPassword\");\n    if (this.ngZone.isStable) {\n      input.focus();\n    } else {\n      this.ngZone.onStable.pipe(take(1)).subscribe(() => input.focus());\n    }\n  }\n\n  private async handlePinRequiredUnlock() {\n    if (this.pin == null || this.pin === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"pinRequired\")\n      );\n      return;\n    }\n\n    return await this.doUnlockWithPin();\n  }\n\n  private async doUnlockWithPin() {\n    let failed = true;\n    try {\n      const kdf = await this.stateService.getKdfType();\n      const kdfConfig = await this.stateService.getKdfConfig();\n      let userKeyPin: EncString;\n      let oldPinKey: EncString;\n      switch (this.pinStatus) {\n        case \"PERSISTANT\": {\n          userKeyPin = await this.stateService.getPinKeyEncryptedUserKey();\n          const oldEncryptedPinKey = await this.stateService.getEncryptedPinProtected();\n          oldPinKey = oldEncryptedPinKey ? new EncString(oldEncryptedPinKey) : undefined;\n          break;\n        }\n        case \"TRANSIENT\": {\n          userKeyPin = await this.stateService.getPinKeyEncryptedUserKeyEphemeral();\n          oldPinKey = await this.stateService.getDecryptedPinProtected();\n          break;\n        }\n        case \"DISABLED\": {\n          throw new Error(\"Pin is disabled\");\n        }\n        default: {\n          const _exhaustiveCheck: never = this.pinStatus;\n          return _exhaustiveCheck;\n        }\n      }\n\n      let userKey: UserKey;\n      if (oldPinKey) {\n        userKey = await this.cryptoService.decryptAndMigrateOldPinKey(\n          this.pinStatus === \"TRANSIENT\",\n          this.pin,\n          this.email,\n          kdf,\n          kdfConfig,\n          oldPinKey\n        );\n      } else {\n        userKey = await this.cryptoService.decryptUserKeyWithPin(\n          this.pin,\n          this.email,\n          kdf,\n          kdfConfig,\n          userKeyPin\n        );\n      }\n\n      const protectedPin = await this.stateService.getProtectedPin();\n      const decryptedPin = await this.cryptoService.decryptToUtf8(\n        new EncString(protectedPin),\n        userKey\n      );\n      failed = decryptedPin !== this.pin;\n\n      if (!failed) {\n        await this.setUserKeyAndContinue(userKey);\n      }\n    } catch {\n      failed = true;\n    }\n\n    if (failed) {\n      this.invalidPinAttempts++;\n      if (this.invalidPinAttempts >= 5) {\n        this.messagingService.send(\"logout\");\n        return;\n      }\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidPin\")\n      );\n    }\n  }\n\n  private async handleMasterPasswordRequiredUnlock() {\n    if (this.masterPassword == null || this.masterPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return;\n    }\n    await this.doUnlockWithMasterPassword();\n  }\n\n  private async doUnlockWithMasterPassword() {\n    const kdf = await this.stateService.getKdfType();\n    const kdfConfig = await this.stateService.getKdfConfig();\n\n    const masterKey = await this.cryptoService.makeMasterKey(\n      this.masterPassword,\n      this.email,\n      kdf,\n      kdfConfig\n    );\n    const storedPasswordHash = await this.cryptoService.getMasterKeyHash();\n\n    let passwordValid = false;\n\n    if (storedPasswordHash != null) {\n      // Offline unlock possible\n      passwordValid = await this.cryptoService.compareAndUpdateKeyHash(\n        this.masterPassword,\n        masterKey\n      );\n    } else {\n      // Online only\n      const request = new SecretVerificationRequest();\n      const serverKeyHash = await this.cryptoService.hashMasterKey(\n        this.masterPassword,\n        masterKey,\n        HashPurpose.ServerAuthorization\n      );\n      request.masterPasswordHash = serverKeyHash;\n      try {\n        this.formPromise = this.apiService.postAccountVerifyPassword(request);\n        const response = await this.formPromise;\n        this.enforcedMasterPasswordOptions = MasterPasswordPolicyOptions.fromResponse(response);\n        passwordValid = true;\n        const localKeyHash = await this.cryptoService.hashMasterKey(\n          this.masterPassword,\n          masterKey,\n          HashPurpose.LocalAuthorization\n        );\n        await this.cryptoService.setMasterKeyHash(localKeyHash);\n      } catch (e) {\n        this.logService.error(e);\n      } finally {\n        this.formPromise = null;\n      }\n    }\n\n    if (!passwordValid) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidMasterPassword\")\n      );\n      return;\n    }\n\n    const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n    await this.cryptoService.setMasterKey(masterKey);\n    await this.setUserKeyAndContinue(userKey, true);\n  }\n\n  private async setUserKeyAndContinue(key: UserKey, evaluatePasswordAfterUnlock = false) {\n    await this.cryptoService.setUserKey(key);\n\n    // Now that we have a decrypted user key in memory, we can check if we\n    // need to establish trust on the current device\n    await this.deviceTrustCryptoService.trustDeviceIfRequired();\n\n    await this.doContinue(evaluatePasswordAfterUnlock);\n  }\n\n  private async doContinue(evaluatePasswordAfterUnlock: boolean) {\n    await this.stateService.setEverBeenUnlocked(true);\n    this.messagingService.send(\"unlocked\");\n\n    if (evaluatePasswordAfterUnlock) {\n      try {\n        // If we do not have any saved policies, attempt to load them from the service\n        if (this.enforcedMasterPasswordOptions == undefined) {\n          this.enforcedMasterPasswordOptions = await firstValueFrom(\n            this.policyService.masterPasswordPolicyOptions$()\n          );\n        }\n\n        if (this.requirePasswordChange()) {\n          await this.stateService.setForcePasswordResetReason(\n            ForceResetPasswordReason.WeakMasterPassword\n          );\n          this.router.navigate([this.forcePasswordResetRoute]);\n          return;\n        }\n      } catch (e) {\n        // Do not prevent unlock if there is an error evaluating policies\n        this.logService.error(e);\n      }\n    }\n\n    if (this.onSuccessfulSubmit != null) {\n      await this.onSuccessfulSubmit();\n    } else if (this.router != null) {\n      this.router.navigate([this.successRoute]);\n    }\n  }\n\n  private async load() {\n    // TODO: Investigate PM-3515\n\n    // The loading of the lock component works as follows:\n    //   1. First, is locking a valid timeout action?  If not, we will log the user out.\n    //   2. If locking IS a valid timeout action, we proceed to show the user the lock screen.\n    //      The user will be able to unlock as follows:\n    //        - If they have a PIN set, they will be presented with the PIN input\n    //        - If they have a master password and no PIN, they will be presented with the master password input\n    //        - If they have biometrics enabled, they will be presented with the biometric prompt\n\n    const availableVaultTimeoutActions = await firstValueFrom(\n      this.vaultTimeoutSettingsService.availableVaultTimeoutActions$()\n    );\n    const supportsLock = availableVaultTimeoutActions.includes(VaultTimeoutAction.Lock);\n    if (!supportsLock) {\n      return await this.vaultTimeoutService.logOut();\n    }\n\n    this.pinStatus = await this.vaultTimeoutSettingsService.isPinLockSet();\n\n    let ephemeralPinSet = await this.stateService.getPinKeyEncryptedUserKeyEphemeral();\n    ephemeralPinSet ||= await this.stateService.getDecryptedPinProtected();\n    this.pinEnabled =\n      (this.pinStatus === \"TRANSIENT\" && !!ephemeralPinSet) || this.pinStatus === \"PERSISTANT\";\n    this.masterPasswordEnabled = await this.userVerificationService.hasMasterPassword();\n\n    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();\n    this.biometricLock =\n      (await this.vaultTimeoutSettingsService.isBiometricLockSet()) &&\n      ((await this.cryptoService.hasUserKeyStored(KeySuffixOptions.Biometric)) ||\n        !this.platformUtilsService.supportsSecureStorage());\n    this.biometricText = await this.stateService.getBiometricText();\n    this.email = await this.stateService.getEmail();\n\n    const webVaultUrl = this.environmentService.getWebVaultUrl();\n    const vaultUrl =\n      webVaultUrl === \"https://vault.bitwarden.com\" ? \"https://bitwarden.com\" : webVaultUrl;\n    this.webVaultHostname = Utils.getHostname(vaultUrl);\n  }\n\n  /**\n   * Checks if the master password meets the enforced policy requirements\n   * If not, returns false\n   */\n  private requirePasswordChange(): boolean {\n    if (\n      this.enforcedMasterPasswordOptions == undefined ||\n      !this.enforcedMasterPasswordOptions.enforceOnLogin\n    ) {\n      return false;\n    }\n\n    const passwordStrength = this.passwordStrengthService.getPasswordStrength(\n      this.masterPassword,\n      this.email\n    )?.score;\n\n    return !this.policyService.evaluateMasterPassword(\n      passwordStrength,\n      this.masterPassword,\n      this.enforcedMasterPasswordOptions\n    );\n  }\n}\n","type BiometricError = {\n  title: string;\n  description: string;\n};\n\nexport type BiometricErrorTypes = \"startDesktop\" | \"desktopIntegrationDisabled\";\n\nexport const BiometricErrors: Record<BiometricErrorTypes, BiometricError> = {\n  startDesktop: {\n    title: \"startDesktopTitle\",\n    description: \"startDesktopDesc\",\n  },\n  desktopIntegrationDisabled: {\n    title: \"desktopIntegrationDisabledTitle\",\n    description: \"desktopIntegrationDisabledDesc\",\n  },\n};\n","import { Directive, ElementRef, Input, Renderer2 } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appA11yTitle]\",\n})\nexport class A11yTitleDirective {\n  @Input() set appA11yTitle(title: string) {\n    this.title = title;\n  }\n\n  private title: string;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (!this.el.nativeElement.hasAttribute(\"title\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"title\", this.title);\n    }\n    if (!this.el.nativeElement.hasAttribute(\"aria-label\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"aria-label\", this.title);\n    }\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { fromEvent, Subscription } from \"rxjs\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\n\n@Injectable()\nexport class PopupUtilsService {\n  private unloadSubscription: Subscription;\n\n  constructor(private privateMode: boolean = false) {}\n\n  inSidebar(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=sidebar\") > -1;\n  }\n\n  inTab(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=tab\") > -1;\n  }\n\n  inPopout(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=popout\") > -1;\n  }\n\n  inPopup(win: Window): boolean {\n    return (\n      win.location.search === \"\" ||\n      win.location.search.indexOf(\"uilocation=\") === -1 ||\n      win.location.search.indexOf(\"uilocation=popup\") > -1\n    );\n  }\n\n  inPrivateMode(): boolean {\n    return this.privateMode;\n  }\n\n  getContentScrollY(win: Window, scrollingContainer = \"main\"): number {\n    const content = win.document.getElementsByTagName(scrollingContainer)[0];\n    return content.scrollTop;\n  }\n\n  setContentScrollY(win: Window, scrollY: number, scrollingContainer = \"main\"): void {\n    if (scrollY != null) {\n      const content = win.document.getElementsByTagName(scrollingContainer)[0];\n      content.scrollTop = scrollY;\n    }\n  }\n\n  popOut(win: Window, href: string = null): void {\n    if (href === null) {\n      href = win.location.href;\n    }\n\n    if (typeof chrome !== \"undefined\" && chrome.windows && chrome.windows.create) {\n      if (href.indexOf(\"?uilocation=\") > -1) {\n        href = href\n          .replace(\"uilocation=popup\", \"uilocation=popout\")\n          .replace(\"uilocation=tab\", \"uilocation=popout\")\n          .replace(\"uilocation=sidebar\", \"uilocation=popout\");\n      } else {\n        const hrefParts = href.split(\"#\");\n        href =\n          hrefParts[0] + \"?uilocation=popout\" + (hrefParts.length > 0 ? \"#\" + hrefParts[1] : \"\");\n      }\n\n      const bodyRect = document.querySelector(\"body\").getBoundingClientRect();\n      chrome.windows.create({\n        url: href,\n        type: \"popup\",\n        width: Math.round(bodyRect.width ? bodyRect.width + 60 : 375),\n        height: Math.round(bodyRect.height || 600),\n      });\n\n      if (this.inPopup(win)) {\n        BrowserApi.closePopup(win);\n      }\n    } else if (typeof chrome !== \"undefined\" && chrome.tabs && chrome.tabs.create) {\n      href = href\n        .replace(\"uilocation=popup\", \"uilocation=tab\")\n        .replace(\"uilocation=popout\", \"uilocation=tab\")\n        .replace(\"uilocation=sidebar\", \"uilocation=tab\");\n      chrome.tabs.create({\n        url: href,\n      });\n    }\n  }\n\n  /**\n   * Enables a pop-up warning before the user exits the window/tab, or navigates away.\n   * This warns the user that they may lose unsaved data if they leave the page.\n   * (Note: navigating within the Angular app will not trigger it because it's an SPA.)\n   * Make sure you call `disableTabCloseWarning` when it is no longer relevant.\n   */\n  enableCloseTabWarning() {\n    this.disableCloseTabWarning();\n\n    this.unloadSubscription = fromEvent(window, \"beforeunload\").subscribe(\n      (e: BeforeUnloadEvent) => {\n        // Recommended method but not widely supported\n        e.preventDefault();\n\n        // Modern browsers do not display this message, it just needs to be a non-nullish value\n        // Exact wording is determined by the browser\n        const confirmationMessage = \"\";\n\n        // Older methods with better support\n        e.returnValue = confirmationMessage;\n        return confirmationMessage;\n      }\n    );\n  }\n\n  /**\n   * Disables the warning enabled by enableCloseTabWarning.\n   */\n  disableCloseTabWarning() {\n    this.unloadSubscription?.unsubscribe();\n  }\n}\n","<app-callout class=\"app-private-mode-warning\" type=\"warning\" *ngIf=\"showWarning\">\n  {{ \"privateModeWarning\" | i18n }}\n  <a href=\"https://bitwarden.com/help/article/private-mode/\" target=\"_blank\" rel=\"noopener\">{{\n    \"learnMore\" | i18n\n  }}</a>\n</app-callout>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-private-mode-warning\",\n  templateUrl: \"private-mode-warning.component.html\",\n})\nexport class PrivateModeWarningComponent implements OnInit {\n  showWarning = false;\n\n  constructor(private popupUtilsService: PopupUtilsService) {}\n\n  ngOnInit() {\n    this.showWarning = this.popupUtilsService.inPrivateMode();\n  }\n}\n","<form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\"></div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"verifyIdentity\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" *ngIf=\"pinEnabled || masterPasswordEnabled\">\n        {{ \"unlock\" | i18n }}\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div\n          class=\"box-content-row box-content-row-flex\"\n          appBoxRow\n          *ngIf=\"pinEnabled || masterPasswordEnabled\"\n        >\n          <div class=\"row-main\" *ngIf=\"pinEnabled\">\n            <label for=\"pin\">{{ \"pin\" | i18n }}</label>\n            <input\n              id=\"pin\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"PIN\"\n              class=\"monospaced\"\n              [(ngModel)]=\"pin\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"row-main\" *ngIf=\"masterPasswordEnabled && !pinEnabled\">\n            <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n            <input\n              id=\"masterPassword\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"MasterPassword\"\n              aria-describedby=\"masterPasswordHelp\"\n              class=\"monospaced\"\n              [(ngModel)]=\"masterPassword\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div id=\"masterPasswordHelp\" class=\"box-footer\">\n        <p>{{ \"yourVaultIsLocked\" | i18n }}</p>\n        {{ \"loggedInAsOn\" | i18n : email : webVaultHostname }}\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"biometricLock\">\n      <div class=\"box-footer no-pad\">\n        <button\n          type=\"button\"\n          class=\"btn primary block\"\n          (click)=\"unlockBiometric()\"\n          appStopClick\n          [disabled]=\"pendingBiometric\"\n        >\n          {{ \"unlockWithBiometrics\" | i18n }}\n        </button>\n      </div>\n    </div>\n    <p class=\"text-center\">\n      <button type=\"button\" appStopClick (click)=\"logOut()\">{{ \"logOut\" | i18n }}</button>\n    </p>\n    <app-private-mode-warning></app-private-mode-warning>\n    <app-callout *ngIf=\"biometricError\" type=\"error\">{{ biometricError }}</app-callout>\n    <p class=\"text-center text-muted\" *ngIf=\"pendingBiometric\">\n      <i class=\"bwi bwi-spinner bwi-spin\" aria-hidden=\"true\"></i> {{ \"awaitDesktop\" | i18n }}\n    </p>\n  </main>\n</form>\n","import { Component, NgZone } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { LockComponent as BaseLockComponent } from \"@bitwarden/angular/auth/components/lock.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { PasswordStrengthServiceAbstraction } from \"@bitwarden/common/tools/password-strength\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BiometricErrors, BiometricErrorTypes } from \"../../models/biometricErrors\";\n\n@Component({\n  selector: \"app-lock\",\n  templateUrl: \"lock.component.html\",\n})\nexport class LockComponent extends BaseLockComponent {\n  private isInitialLockScreen: boolean;\n\n  biometricError: string;\n  pendingBiometric = false;\n\n  constructor(\n    router: Router,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    cryptoService: CryptoService,\n    vaultTimeoutService: VaultTimeoutService,\n    vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    environmentService: EnvironmentService,\n    stateService: StateService,\n    apiService: ApiService,\n    logService: LogService,\n    ngZone: NgZone,\n    policyApiService: PolicyApiServiceAbstraction,\n    policyService: InternalPolicyService,\n    passwordStrengthService: PasswordStrengthServiceAbstraction,\n    private authService: AuthService,\n    dialogService: DialogService,\n    deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    userVerificationService: UserVerificationService\n  ) {\n    super(\n      router,\n      i18nService,\n      platformUtilsService,\n      messagingService,\n      cryptoService,\n      vaultTimeoutService,\n      vaultTimeoutSettingsService,\n      environmentService,\n      stateService,\n      apiService,\n      logService,\n      ngZone,\n      policyApiService,\n      policyService,\n      passwordStrengthService,\n      dialogService,\n      deviceTrustCryptoService,\n      userVerificationService\n    );\n    this.successRoute = \"/tabs/current\";\n    this.isInitialLockScreen = (window as any).previousPopupUrl == null;\n  }\n\n  async ngOnInit() {\n    await super.ngOnInit();\n    const disableAutoBiometricsPrompt =\n      (await this.stateService.getDisableAutoBiometricsPrompt()) ?? true;\n\n    window.setTimeout(async () => {\n      document.getElementById(this.pinEnabled ? \"pin\" : \"masterPassword\")?.focus();\n      if (\n        this.biometricLock &&\n        !disableAutoBiometricsPrompt &&\n        this.isInitialLockScreen &&\n        (await this.authService.getAuthStatus()) === AuthenticationStatus.Locked\n      ) {\n        await this.unlockBiometric();\n      }\n    }, 100);\n  }\n\n  override async unlockBiometric(): Promise<boolean> {\n    if (!this.biometricLock) {\n      return;\n    }\n\n    this.pendingBiometric = true;\n    this.biometricError = null;\n\n    let success;\n    try {\n      success = await super.unlockBiometric();\n    } catch (e) {\n      const error = BiometricErrors[e as BiometricErrorTypes];\n\n      if (error == null) {\n        this.logService.error(\"Unknown error: \" + e);\n      }\n\n      this.biometricError = this.i18nService.t(error.description);\n    }\n    this.pendingBiometric = false;\n\n    return success;\n  }\n}\n","export class KeysRequest {\n  publicKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(publicKey: string, encryptedPrivateKey: string) {\n    this.publicKey = publicKey;\n    this.encryptedPrivateKey = encryptedPrivateKey;\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { DeviceView } from \"./views/device.view\";\n\nexport abstract class DevicesServiceAbstraction {\n  getDevices$: () => Observable<Array<DeviceView>>;\n  getDeviceByIdentifier$: (deviceIdentifier: string) => Observable<DeviceView>;\n  isDeviceKnownForUser$: (email: string, deviceIdentifier: string) => Observable<boolean>;\n  updateTrustedDeviceKeys$: (\n    deviceIdentifier: string,\n    devicePublicKeyEncryptedUserKey: string,\n    userKeyEncryptedDevicePublicKey: string,\n    deviceKeyEncryptedDevicePrivateKey: string\n  ) => Observable<DeviceView>;\n}\n","import { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport abstract class TokenService {\n  setTokens: (\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ) => Promise<any>;\n  setToken: (token: string) => Promise<any>;\n  getToken: () => Promise<string>;\n  setRefreshToken: (refreshToken: string) => Promise<any>;\n  getRefreshToken: () => Promise<string>;\n  setClientId: (clientId: string) => Promise<any>;\n  getClientId: () => Promise<string>;\n  setClientSecret: (clientSecret: string) => Promise<any>;\n  getClientSecret: () => Promise<string>;\n  setTwoFactorToken: (tokenResponse: IdentityTokenResponse) => Promise<any>;\n  getTwoFactorToken: () => Promise<string>;\n  clearTwoFactorToken: () => Promise<any>;\n  clearToken: (userId?: string) => Promise<any>;\n  decodeToken: (token?: string) => any;\n  getTokenExpirationDate: () => Promise<Date>;\n  tokenSecondsRemaining: (offsetSeconds?: number) => Promise<number>;\n  tokenNeedsRefresh: (minutes?: number) => Promise<boolean>;\n  getUserId: () => Promise<string>;\n  getEmail: () => Promise<string>;\n  getEmailVerified: () => Promise<boolean>;\n  getName: () => Promise<string>;\n  getIssuer: () => Promise<string>;\n  getIsExternal: () => Promise<boolean>;\n}\n","import { OrganizationApiKeyRequest } from \"../../../admin-console/models/request/organization-api-key.request\";\nimport { OrganizationSsoRequest } from \"../../../auth/models/request/organization-sso.request\";\nimport { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\nimport { ApiKeyResponse } from \"../../../auth/models/response/api-key.response\";\nimport { OrganizationSsoResponse } from \"../../../auth/models/response/organization-sso.response\";\nimport { OrganizationSmSubscriptionUpdateRequest } from \"../../../billing/models/request/organization-sm-subscription-update.request\";\nimport { OrganizationSubscriptionUpdateRequest } from \"../../../billing/models/request/organization-subscription-update.request\";\nimport { OrganizationTaxInfoUpdateRequest } from \"../../../billing/models/request/organization-tax-info-update.request\";\nimport { PaymentRequest } from \"../../../billing/models/request/payment.request\";\nimport { SecretsManagerSubscribeRequest } from \"../../../billing/models/request/sm-subscribe.request\";\nimport { BillingResponse } from \"../../../billing/models/response/billing.response\";\nimport { OrganizationSubscriptionResponse } from \"../../../billing/models/response/organization-subscription.response\";\nimport { PaymentResponse } from \"../../../billing/models/response/payment.response\";\nimport { TaxInfoResponse } from \"../../../billing/models/response/tax-info.response\";\nimport { ImportDirectoryRequest } from \"../../../models/request/import-directory.request\";\nimport { SeatRequest } from \"../../../models/request/seat.request\";\nimport { StorageRequest } from \"../../../models/request/storage.request\";\nimport { VerifyBankRequest } from \"../../../models/request/verify-bank.request\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { OrganizationApiKeyType } from \"../../enums\";\nimport { OrganizationCreateRequest } from \"../../models/request/organization-create.request\";\nimport { OrganizationKeysRequest } from \"../../models/request/organization-keys.request\";\nimport { OrganizationUpdateRequest } from \"../../models/request/organization-update.request\";\nimport { OrganizationUpgradeRequest } from \"../../models/request/organization-upgrade.request\";\nimport { OrganizationApiKeyInformationResponse } from \"../../models/response/organization-api-key-information.response\";\nimport { OrganizationAutoEnrollStatusResponse } from \"../../models/response/organization-auto-enroll-status.response\";\nimport { OrganizationKeysResponse } from \"../../models/response/organization-keys.response\";\nimport { OrganizationResponse } from \"../../models/response/organization.response\";\nimport { ProfileOrganizationResponse } from \"../../models/response/profile-organization.response\";\n\nexport class OrganizationApiServiceAbstraction {\n  get: (id: string) => Promise<OrganizationResponse>;\n  getBilling: (id: string) => Promise<BillingResponse>;\n  getSubscription: (id: string) => Promise<OrganizationSubscriptionResponse>;\n  getLicense: (id: string, installationId: string) => Promise<unknown>;\n  getAutoEnrollStatus: (identifier: string) => Promise<OrganizationAutoEnrollStatusResponse>;\n  create: (request: OrganizationCreateRequest) => Promise<OrganizationResponse>;\n  createLicense: (data: FormData) => Promise<OrganizationResponse>;\n  save: (id: string, request: OrganizationUpdateRequest) => Promise<OrganizationResponse>;\n  updatePayment: (id: string, request: PaymentRequest) => Promise<void>;\n  upgrade: (id: string, request: OrganizationUpgradeRequest) => Promise<PaymentResponse>;\n  updatePasswordManagerSeats: (\n    id: string,\n    request: OrganizationSubscriptionUpdateRequest\n  ) => Promise<void>;\n  updateSecretsManagerSubscription: (\n    id: string,\n    request: OrganizationSmSubscriptionUpdateRequest\n  ) => Promise<void>;\n  updateSeats: (id: string, request: SeatRequest) => Promise<PaymentResponse>;\n  updateStorage: (id: string, request: StorageRequest) => Promise<PaymentResponse>;\n  verifyBank: (id: string, request: VerifyBankRequest) => Promise<void>;\n  cancel: (id: string) => Promise<void>;\n  reinstate: (id: string) => Promise<void>;\n  leave: (id: string) => Promise<void>;\n  delete: (id: string, request: SecretVerificationRequest) => Promise<void>;\n  updateLicense: (id: string, data: FormData) => Promise<void>;\n  importDirectory: (organizationId: string, request: ImportDirectoryRequest) => Promise<void>;\n  getOrCreateApiKey: (id: string, request: OrganizationApiKeyRequest) => Promise<ApiKeyResponse>;\n  getApiKeyInformation: (\n    id: string,\n    organizationApiKeyType?: OrganizationApiKeyType\n  ) => Promise<ListResponse<OrganizationApiKeyInformationResponse>>;\n  rotateApiKey: (id: string, request: OrganizationApiKeyRequest) => Promise<ApiKeyResponse>;\n  getTaxInfo: (id: string) => Promise<TaxInfoResponse>;\n  updateTaxInfo: (id: string, request: OrganizationTaxInfoUpdateRequest) => Promise<void>;\n  getKeys: (id: string) => Promise<OrganizationKeysResponse>;\n  updateKeys: (id: string, request: OrganizationKeysRequest) => Promise<OrganizationKeysResponse>;\n  getSso: (id: string) => Promise<OrganizationSsoResponse>;\n  updateSso: (id: string, request: OrganizationSsoRequest) => Promise<OrganizationSsoResponse>;\n  selfHostedSyncLicense: (id: string) => Promise<void>;\n  subscribeToSecretsManager: (\n    id: string,\n    request: SecretsManagerSubscribeRequest\n  ) => Promise<ProfileOrganizationResponse>;\n}\n","import { ListResponse } from \"../../models/response/list.response\";\n\nimport {\n  OrganizationUserAcceptInitRequest,\n  OrganizationUserAcceptRequest,\n  OrganizationUserBulkConfirmRequest,\n  OrganizationUserConfirmRequest,\n  OrganizationUserInviteRequest,\n  OrganizationUserResetPasswordEnrollmentRequest,\n  OrganizationUserResetPasswordRequest,\n  OrganizationUserUpdateGroupsRequest,\n  OrganizationUserUpdateRequest,\n} from \"./requests\";\nimport {\n  OrganizationUserBulkPublicKeyResponse,\n  OrganizationUserBulkResponse,\n  OrganizationUserDetailsResponse,\n  OrganizationUserResetPasswordDetailsResponse,\n  OrganizationUserUserDetailsResponse,\n} from \"./responses\";\n\n/**\n * Service for interacting with Organization Users via the API\n */\nexport abstract class OrganizationUserService {\n  /**\n   * Retrieve a single organization user by Id\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   * @param options - Options for the request\n   */\n  abstract getOrganizationUser(\n    organizationId: string,\n    id: string,\n    options?: {\n      includeGroups?: boolean;\n    }\n  ): Promise<OrganizationUserDetailsResponse>;\n\n  /**\n   * Retrieve a list of groups Ids the specified organization user belongs to\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]>;\n\n  /**\n   * Retrieve a list of all users that belong to the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param options - Options for the request\n   */\n  abstract getAllUsers(\n    organizationId: string,\n    options?: {\n      includeCollections?: boolean;\n      includeGroups?: boolean;\n    }\n  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>>;\n\n  /**\n   * Retrieve reset password details for the specified organization user\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract getOrganizationUserResetPasswordDetails(\n    organizationId: string,\n    id: string\n  ): Promise<OrganizationUserResetPasswordDetailsResponse>;\n\n  /**\n   * Create new organization user invite(s) for the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param request - New user invitation request details\n   */\n  abstract postOrganizationUserInvite(\n    organizationId: string,\n    request: OrganizationUserInviteRequest\n  ): Promise<void>;\n\n  /**\n   * Re-invite the specified organization user\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract postOrganizationUserReinvite(organizationId: string, id: string): Promise<any>;\n\n  /**\n   * Re-invite many organization users for the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param ids - A list of organization user identifiers\n   * @return List of user ids, including both those that were successfully re-invited and those that had an error\n   */\n  abstract postManyOrganizationUserReinvite(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Accept an invitation to initialize and join an organization created via the Admin Portal **only**.\n   * This is only used once for the initial Owner, because it also creates the organization's encryption keys.\n   * This should not be used for organizations created via the Web client.\n   * @param organizationId - Identifier for the organization to accept\n   * @param id - Organization user identifier\n   * @param request - Request details for accepting the invitation\n   */\n  abstract postOrganizationUserAcceptInit(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptInitRequest\n  ): Promise<void>;\n\n  /**\n   * Accept an organization user invitation\n   * @param organizationId - Identifier for the organization to accept\n   * @param id - Organization user identifier\n   * @param request - Request details for accepting the invitation\n   */\n  abstract postOrganizationUserAccept(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptRequest\n  ): Promise<void>;\n\n  /**\n   * Confirm an organization user that has accepted their invitation\n   * @param organizationId - Identifier for the organization to confirm\n   * @param id - Organization user identifier\n   * @param request - Request details for confirming the user\n   */\n  abstract postOrganizationUserConfirm(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserConfirmRequest\n  ): Promise<void>;\n\n  /**\n   * Retrieve a list of the specified users' public keys\n   * @param organizationId - Identifier for the organization to accept\n   * @param ids - A list of organization user identifiers to retrieve public keys for\n   */\n  abstract postOrganizationUsersPublicKey(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>>;\n\n  /**\n   * Confirm many organization users that have accepted their invitations\n   * @param organizationId - Identifier for the organization to confirm users\n   * @param request - Bulk request details for confirming the user\n   */\n  abstract postOrganizationUserBulkConfirm(\n    organizationId: string,\n    request: OrganizationUserBulkConfirmRequest\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Update an organization users\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param request - Request details for updating the user\n   */\n  abstract putOrganizationUser(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateRequest\n  ): Promise<void>;\n\n  /**\n   * Update an organization user's groups\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param groupIds - List of group ids to associate the user with\n   */\n  abstract putOrganizationUserGroups(\n    organizationId: string,\n    id: string,\n    groupIds: OrganizationUserUpdateGroupsRequest\n  ): Promise<void>;\n\n  /**\n   * Update an organization user's reset password enrollment\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param userId - Organization user identifier\n   * @param request - Reset password enrollment details\n   */\n  abstract putOrganizationUserResetPasswordEnrollment(\n    organizationId: string,\n    userId: string,\n    request: OrganizationUserResetPasswordEnrollmentRequest\n  ): Promise<void>;\n\n  /**\n   * Reset an organization user's password\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param request - Reset password details\n   */\n  abstract putOrganizationUserResetPassword(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserResetPasswordRequest\n  ): Promise<void>;\n\n  /**\n   * Enable Secrets Manager for many users\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param ids - List of organization user identifiers to enable\n   * @return List of user ids, including both those that were successfully enabled and those that had an error\n   */\n  abstract putOrganizationUserBulkEnableSecretsManager(\n    organizationId: string,\n    ids: string[]\n  ): Promise<void>;\n\n  /**\n   * Delete an organization user\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract deleteOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Delete many organization users\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to delete\n   * @return List of user ids, including both those that were successfully deleted and those that had an error\n   */\n  abstract deleteManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Revoke an organization user's access to the organization\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract revokeOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Revoke many organization users' access to the organization\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to revoke\n   * @return List of user ids, including both those that were successfully revoked and those that had an error\n   */\n  abstract revokeManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Restore an organization user's access to the organization\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract restoreOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Restore many organization users' access to the organization\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to restore\n   * @return List of user ids, including both those that were successfully restored and those that had an error\n   */\n  abstract restoreManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n}\n","import { UserKey } from \"../../platform/models/domain/symmetric-crypto-key\";\n\nexport abstract class PasswordResetEnrollmentServiceAbstraction {\n  /*\n   * Checks the user's enrollment status and enrolls them if required\n   */\n  abstract enrollIfRequired(organizationSsoIdentifier: string): Promise<void>;\n\n  /**\n   * Enroll current user in password reset\n   * @param organizationId - Organization in which to enroll the user\n   * @returns Promise that resolves when the user is enrolled\n   * @throws Error if the action fails\n   */\n  abstract enroll(organizationId: string): Promise<void>;\n\n  /**\n   * Enroll user in password reset\n   * @param organizationId - Organization in which to enroll the user\n   * @param userId - User to enroll\n   * @param userKey - User's symmetric key\n   * @returns Promise that resolves when the user is enrolled\n   * @throws Error if the action fails\n   */\n  abstract enroll(organizationId: string, userId: string, userKey: UserKey): Promise<void>;\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormControl } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport {\n  firstValueFrom,\n  switchMap,\n  Subject,\n  catchError,\n  from,\n  of,\n  finalize,\n  takeUntil,\n  defer,\n  throwError,\n} from \"rxjs\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { DevicesServiceAbstraction } from \"@bitwarden/common/abstractions/devices/devices.service.abstraction\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { PasswordResetEnrollmentServiceAbstraction } from \"@bitwarden/common/auth/abstractions/password-reset-enrollment.service.abstraction\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\nimport { AccountDecryptionOptions } from \"@bitwarden/common/platform/models/domain/account\";\n\nenum State {\n  NewUser,\n  ExistingUserUntrustedDevice,\n}\n\ntype NewUserData = {\n  readonly state: State.NewUser;\n  readonly organizationId: string;\n  readonly userEmail: string;\n};\n\ntype ExistingUserUntrustedDeviceData = {\n  readonly state: State.ExistingUserUntrustedDevice;\n  readonly showApproveFromOtherDeviceBtn: boolean;\n  readonly showReqAdminApprovalBtn: boolean;\n  readonly showApproveWithMasterPasswordBtn: boolean;\n  readonly userEmail: string;\n};\n\ntype Data = NewUserData | ExistingUserUntrustedDeviceData;\n\n@Directive()\nexport class BaseLoginDecryptionOptionsComponent implements OnInit, OnDestroy {\n  private destroy$ = new Subject<void>();\n\n  protected State = State;\n\n  protected data?: Data;\n  protected loading = true;\n\n  // Remember device means for the user to trust the device\n  rememberDeviceForm = this.formBuilder.group({\n    rememberDevice: [true],\n  });\n\n  get rememberDevice(): FormControl<boolean> {\n    return this.rememberDeviceForm?.controls.rememberDevice;\n  }\n\n  constructor(\n    protected formBuilder: FormBuilder,\n    protected devicesService: DevicesServiceAbstraction,\n    protected stateService: StateService,\n    protected router: Router,\n    protected activatedRoute: ActivatedRoute,\n    protected messagingService: MessagingService,\n    protected tokenService: TokenService,\n    protected loginService: LoginService,\n    protected organizationApiService: OrganizationApiServiceAbstraction,\n    protected cryptoService: CryptoService,\n    protected organizationUserService: OrganizationUserService,\n    protected apiService: ApiService,\n    protected i18nService: I18nService,\n    protected validationService: ValidationService,\n    protected deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected passwordResetEnrollmentService: PasswordResetEnrollmentServiceAbstraction\n  ) {}\n\n  async ngOnInit() {\n    this.loading = true;\n\n    this.setupRememberDeviceValueChanges();\n\n    // Persist user choice from state if it exists\n    await this.setRememberDeviceDefaultValue();\n\n    try {\n      const accountDecryptionOptions: AccountDecryptionOptions =\n        await this.stateService.getAccountDecryptionOptions();\n\n      // see sso-login.strategy - to determine if a user is new or not it just checks if there is a key on the token response..\n      // can we check if they have a user key or master key in crypto service? Would that be sufficient?\n      if (\n        !accountDecryptionOptions?.trustedDeviceOption?.hasAdminApproval &&\n        !accountDecryptionOptions?.hasMasterPassword\n      ) {\n        // We are dealing with a new account if:\n        //  - User does not have admin approval (i.e. has not enrolled into admin reset)\n        //  - AND does not have a master password\n\n        this.loadNewUserData();\n      } else {\n        this.loadUntrustedDeviceData(accountDecryptionOptions);\n      }\n\n      // Note: this is probably not a comprehensive write up of all scenarios:\n\n      // If the TDE feature flag is enabled and TDE is configured for the org that the user is a member of,\n      // then new and existing users can be redirected here after completing the SSO flow (and 2FA if enabled).\n\n      // First we must determine user type (new or existing):\n\n      // New User\n      // - present user with option to remember the device or not (trust the device)\n      // - present a continue button to proceed to the vault\n      //  - loadNewUserData() --> will need to load enrollment status and user email address.\n\n      // Existing User\n      // - Determine if user is an admin with access to account recovery in admin console\n      //  - Determine if user has a MP or not, if not, they must be redirected to set one (see PM-1035)\n      // - Determine if device is trusted or not via device crypto service (method not yet written)\n      //  - If not trusted, present user with login decryption options (approve from other device, approve with master password, request admin approval)\n      //    - loadUntrustedDeviceData()\n    } catch (err) {\n      this.validationService.showError(err);\n    }\n  }\n\n  private async setRememberDeviceDefaultValue() {\n    const rememberDeviceFromState = await this.deviceTrustCryptoService.getShouldTrustDevice();\n\n    const rememberDevice = rememberDeviceFromState ?? true;\n\n    this.rememberDevice.setValue(rememberDevice);\n  }\n\n  private setupRememberDeviceValueChanges() {\n    this.rememberDevice.valueChanges\n      .pipe(\n        switchMap((value) =>\n          defer(() => this.deviceTrustCryptoService.setShouldTrustDevice(value))\n        ),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  async loadNewUserData() {\n    const autoEnrollStatus$ = defer(() =>\n      this.stateService.getUserSsoOrganizationIdentifier()\n    ).pipe(\n      switchMap((organizationIdentifier) => {\n        if (organizationIdentifier == undefined) {\n          return throwError(() => new Error(this.i18nService.t(\"ssoIdentifierRequired\")));\n        }\n\n        return from(this.organizationApiService.getAutoEnrollStatus(organizationIdentifier));\n      }),\n      catchError((err: unknown) => {\n        this.validationService.showError(err);\n        return of(undefined);\n      })\n    );\n\n    const email$ = from(this.stateService.getEmail()).pipe(\n      catchError((err: unknown) => {\n        this.validationService.showError(err);\n        return of(undefined);\n      }),\n      takeUntil(this.destroy$)\n    );\n\n    const autoEnrollStatus = await firstValueFrom(autoEnrollStatus$);\n    const email = await firstValueFrom(email$);\n\n    this.data = { state: State.NewUser, organizationId: autoEnrollStatus.id, userEmail: email };\n    this.loading = false;\n  }\n\n  loadUntrustedDeviceData(accountDecryptionOptions: AccountDecryptionOptions) {\n    this.loading = true;\n\n    const email$ = from(this.stateService.getEmail()).pipe(\n      catchError((err: unknown) => {\n        this.validationService.showError(err);\n        return of(undefined);\n      }),\n      takeUntil(this.destroy$)\n    );\n\n    email$\n      .pipe(\n        takeUntil(this.destroy$),\n        finalize(() => {\n          this.loading = false;\n        })\n      )\n      .subscribe((email) => {\n        const showApproveFromOtherDeviceBtn =\n          accountDecryptionOptions?.trustedDeviceOption?.hasLoginApprovingDevice || false;\n\n        const showReqAdminApprovalBtn =\n          !!accountDecryptionOptions?.trustedDeviceOption?.hasAdminApproval || false;\n\n        const showApproveWithMasterPasswordBtn =\n          accountDecryptionOptions?.hasMasterPassword || false;\n\n        const userEmail = email;\n\n        this.data = {\n          state: State.ExistingUserUntrustedDevice,\n          showApproveFromOtherDeviceBtn,\n          showReqAdminApprovalBtn,\n          showApproveWithMasterPasswordBtn,\n          userEmail,\n        };\n      });\n  }\n\n  async approveFromOtherDevice() {\n    if (this.data.state !== State.ExistingUserUntrustedDevice) {\n      return;\n    }\n\n    this.loginService.setEmail(this.data.userEmail);\n    this.router.navigate([\"/login-with-device\"]);\n  }\n\n  async requestAdminApproval() {\n    this.loginService.setEmail(this.data.userEmail);\n    this.router.navigate([\"/admin-approval-requested\"]);\n  }\n\n  async approveWithMasterPassword() {\n    this.router.navigate([\"/lock\"], { queryParams: { from: \"login-initiated\" } });\n  }\n\n  async createUser() {\n    if (this.data.state !== State.NewUser) {\n      return;\n    }\n\n    // this.loading to support clients without async-actions-support\n    this.loading = true;\n    try {\n      const { publicKey, privateKey } = await this.cryptoService.initAccount();\n      const keysRequest = new KeysRequest(publicKey, privateKey.encryptedString);\n      await this.apiService.postAccountKeys(keysRequest);\n\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"accountSuccessfullyCreated\")\n      );\n\n      await this.passwordResetEnrollmentService.enroll(this.data.organizationId);\n\n      if (this.rememberDeviceForm.value.rememberDevice) {\n        await this.deviceTrustCryptoService.trustDevice();\n      }\n    } catch (error) {\n      this.validationService.showError(error);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  logOut() {\n    this.loading = true; // to avoid an awkward delay in browser extension\n    this.messagingService.send(\"logout\");\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","export enum AuthRequestType {\n  AuthenticateAndUnlock = 0,\n  Unlock = 1,\n  AdminApproval = 2,\n}\n","export enum AuthenticationType {\n  Password = 0,\n  Sso = 1,\n  UserApi = 2,\n  Passwordless = 3,\n}\n","<div id=\"login-initiated\">\n  <header>\n    <h1 class=\"margin-auto\">\n      <span class=\"title\">{{ \"loginInitiated\" | i18n }}</span>\n    </h1>\n  </header>\n\n  <div class=\"content login-page\">\n    <div class=\"full-loading-spinner\" *ngIf=\"loading\">\n      <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n    </div>\n\n    <ng-container *ngIf=\"!loading\">\n      <ng-container *ngIf=\"data.state == State.ExistingUserUntrustedDevice\">\n        <div class=\"standard-x-margin\">\n          <p class=\"lead\">{{ \"loginInitiated\" | i18n }}</p>\n          <h6 class=\"mb-20px\">{{ \"deviceApprovalRequired\" | i18n }}</h6>\n        </div>\n\n        <form\n          id=\"rememberDeviceForm\"\n          class=\"mb-20px standard-x-margin\"\n          [formGroup]=\"rememberDeviceForm\"\n        >\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"rememberDevice\"\n              name=\"rememberDevice\"\n              formControlName=\"rememberDevice\"\n            />\n            <label for=\"rememberDevice\">\n              {{ \"rememberThisDevice\" | i18n }}\n            </label>\n            <p id=\"rememberThisDeviceHintText\">{{ \"uncheckIfPublicDevice\" | i18n }}</p>\n          </div>\n        </form>\n\n        <div class=\"box mb-20px\">\n          <button\n            *ngIf=\"data.showApproveFromOtherDeviceBtn\"\n            (click)=\"approveFromOtherDevice()\"\n            type=\"button\"\n            class=\"btn primary block\"\n          >\n            <b>{{ \"approveFromYourOtherDevice\" | i18n }}</b>\n          </button>\n          <button\n            *ngIf=\"data.showReqAdminApprovalBtn\"\n            (click)=\"requestAdminApproval()\"\n            type=\"button\"\n            class=\"btn block btn-top-margin\"\n          >\n            {{ \"requestAdminApproval\" | i18n }}\n          </button>\n          <button\n            *ngIf=\"data.showApproveWithMasterPasswordBtn\"\n            type=\"button\"\n            class=\"btn block btn-top-margin\"\n            (click)=\"approveWithMasterPassword()\"\n          >\n            {{ \"approveWithMasterPassword\" | i18n }}\n          </button>\n        </div>\n      </ng-container>\n\n      <ng-container *ngIf=\"data.state == State.NewUser\">\n        <div class=\"standard-x-margin\">\n          <p class=\"lead\">{{ \"loginInitiated\" | i18n }}</p>\n        </div>\n\n        <form\n          id=\"rememberDeviceForm\"\n          class=\"mb-20px standard-x-margin\"\n          [formGroup]=\"rememberDeviceForm\"\n        >\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"rememberDevice\"\n              name=\"rememberDevice\"\n              formControlName=\"rememberDevice\"\n            />\n            <label for=\"rememberDevice\">\n              {{ \"rememberThisDevice\" | i18n }}\n            </label>\n            <p id=\"rememberThisDeviceHintText\">{{ \"uncheckIfPublicDevice\" | i18n }}</p>\n          </div>\n        </form>\n\n        <div class=\"box mb-20px\">\n          <button (click)=\"createUser()\" type=\"button\" class=\"btn primary block\">\n            <b>{{ \"continue\" | i18n }}</b>\n          </button>\n        </div>\n      </ng-container>\n\n      <hr class=\"muted-hr mx-5px mb-20px\" />\n\n      <div class=\"small mx-5px\">\n        <p class=\"no-margin\">{{ \"loggingInAs\" | i18n }} {{ data.userEmail }}</p>\n        <a tabindex=\"0\" role=\"button\" style=\"cursor: pointer\" (click)=\"logOut()\">{{\n          \"notYou\" | i18n\n        }}</a>\n      </div>\n    </ng-container>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { BaseLoginDecryptionOptionsComponent } from \"@bitwarden/angular/auth/components/base-login-decryption-options.component\";\n\n@Component({\n  selector: \"browser-login-decryption-options\",\n  templateUrl: \"login-decryption-options.component.html\",\n})\nexport class LoginDecryptionOptionsComponent extends BaseLoginDecryptionOptionsComponent {\n  override async createUser(): Promise<void> {\n    try {\n      await super.createUser();\n      await this.router.navigate([\"/tabs/vault\"]);\n    } catch (error) {\n      this.validationService.showError(error);\n    }\n  }\n}\n","import { Utils } from \"../../../platform/misc/utils\";\n\n// TODO: Tech Debt: potentially create a type Storage shape vs using a class here in the future\n// type StorageShape {\n//   id: string;\n//   privateKey: string;\n// }\n// so we can get rid of the any type passed into fromJSON and coming out of ToJSON\nexport class AdminAuthRequestStorable {\n  id: string;\n  privateKey: Uint8Array;\n\n  constructor(init?: Partial<AdminAuthRequestStorable>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      privateKey: Utils.fromBufferToByteString(this.privateKey),\n    };\n  }\n\n  static fromJSON(obj: any): AdminAuthRequestStorable {\n    if (obj == null) {\n      return null;\n    }\n\n    let privateKeyBuffer = null;\n    if (obj.privateKey) {\n      privateKeyBuffer = Utils.fromByteStringToArray(obj.privateKey);\n    }\n\n    return new AdminAuthRequestStorable({\n      id: obj.id,\n      privateKey: privateKeyBuffer,\n    });\n  }\n}\n","import { MasterKey, UserKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { AuthenticationType } from \"../../enums/authentication-type\";\nimport { TokenTwoFactorRequest } from \"../request/identity-token/token-two-factor.request\";\n\nexport class PasswordLogInCredentials {\n  readonly type = AuthenticationType.Password;\n\n  constructor(\n    public email: string,\n    public masterPassword: string,\n    public captchaToken?: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n\nexport class SsoLogInCredentials {\n  readonly type = AuthenticationType.Sso;\n\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUrl: string,\n    public orgId: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n\nexport class UserApiLogInCredentials {\n  readonly type = AuthenticationType.UserApi;\n\n  constructor(public clientId: string, public clientSecret: string) {}\n}\n\nexport class PasswordlessLogInCredentials {\n  readonly type = AuthenticationType.Passwordless;\n\n  constructor(\n    public email: string,\n    public accessCode: string,\n    public authRequestId: string,\n    public decryptedUserKey: UserKey,\n    public decryptedMasterKey: MasterKey,\n    public decryptedMasterKeyHash: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n","import { AuthRequestType } from \"../../enums/auth-request-type\";\n\nexport class PasswordlessCreateAuthRequest {\n  constructor(\n    readonly email: string,\n    readonly deviceIdentifier: string,\n    readonly publicKey: string,\n    readonly type: AuthRequestType,\n    readonly accessCode: string\n  ) {}\n}\n","export abstract class BaseResponse {\n  private response: any;\n\n  constructor(response: any) {\n    this.response = response;\n  }\n\n  protected getResponseProperty(\n    propertyName: string,\n    response: any = null,\n    exactName = false\n  ): any {\n    if (propertyName == null || propertyName === \"\") {\n      throw new Error(\"propertyName must not be null/empty.\");\n    }\n    if (response == null && this.response != null) {\n      response = this.response;\n    }\n    if (response == null) {\n      return null;\n    }\n    if (!exactName && response[propertyName] === undefined) {\n      let otherCasePropertyName: string = null;\n      if (propertyName.charAt(0) === propertyName.charAt(0).toUpperCase()) {\n        otherCasePropertyName = propertyName.charAt(0).toLowerCase();\n      } else {\n        otherCasePropertyName = propertyName.charAt(0).toUpperCase();\n      }\n      if (propertyName.length > 1) {\n        otherCasePropertyName += propertyName.slice(1);\n      }\n\n      propertyName = otherCasePropertyName;\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toLowerCase();\n      }\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toUpperCase();\n      }\n    }\n    return response[propertyName];\n  }\n}\n","import { Utils } from \"../../platform/misc/utils\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ErrorResponse extends BaseResponse {\n  message: string;\n  validationErrors: { [key: string]: string[] };\n  statusCode: number;\n  captchaRequired: boolean;\n  captchaSiteKey: string;\n\n  constructor(response: any, status: number, identityResponse?: boolean) {\n    super(response);\n    let errorModel = null;\n    if (response != null) {\n      const responseErrorModel = this.getResponseProperty(\"ErrorModel\");\n      if (responseErrorModel && identityResponse) {\n        errorModel = responseErrorModel;\n      } else {\n        errorModel = response;\n      }\n    }\n\n    if (status === 429) {\n      this.message = \"Rate limit exceeded. Try again later.\";\n    } else if (errorModel) {\n      this.message = this.getResponseProperty(\"Message\", errorModel);\n      this.validationErrors = this.getResponseProperty(\"ValidationErrors\", errorModel);\n      this.captchaSiteKey = this.validationErrors?.HCaptcha_SiteKey?.[0];\n      this.captchaRequired = !Utils.isNullOrWhitespace(this.captchaSiteKey);\n    }\n    this.statusCode = status;\n  }\n\n  getSingleMessage(): string {\n    if (this.validationErrors == null) {\n      return this.message;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      if (this.validationErrors[key].length) {\n        return this.validationErrors[key][0];\n      }\n    }\n    return this.message;\n  }\n\n  getAllMessages(): string[] {\n    const messages: string[] = [];\n    if (this.validationErrors == null) {\n      return messages;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      this.validationErrors[key].forEach((item: string) => {\n        let prefix = \"\";\n        if (key.indexOf(\"[\") > -1 && key.indexOf(\"]\") > -1) {\n          const lastSep = key.lastIndexOf(\".\");\n          prefix = key.substr(0, lastSep > -1 ? lastSep : key.length) + \": \";\n        }\n        messages.push(prefix + item);\n      });\n    }\n    return messages;\n  }\n}\n","import { PasswordGeneratorPolicyOptions } from \"../../../admin-console/models/domain/password-generator-policy-options\";\n\nimport { GeneratedPasswordHistory } from \"./generated-password-history\";\nimport { PasswordGeneratorOptions } from \"./password-generator-options\";\n\nexport abstract class PasswordGenerationServiceAbstraction {\n  generatePassword: (options: PasswordGeneratorOptions) => Promise<string>;\n  generatePassphrase: (options: PasswordGeneratorOptions) => Promise<string>;\n  getOptions: () => Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]>;\n  enforcePasswordGeneratorPoliciesOnOptions: (\n    options: PasswordGeneratorOptions\n  ) => Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]>;\n  getPasswordGeneratorPolicyOptions: () => Promise<PasswordGeneratorPolicyOptions>;\n  saveOptions: (options: PasswordGeneratorOptions) => Promise<void>;\n  getHistory: () => Promise<GeneratedPasswordHistory[]>;\n  addHistory: (password: string) => Promise<void>;\n  clear: (userId?: string) => Promise<void>;\n  normalizeOptions: (\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) => void;\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\n\nexport class PasswordGeneratorPolicyOptions extends Domain {\n  defaultType = \"\";\n  minLength = 0;\n  useUppercase = false;\n  useLowercase = false;\n  useNumbers = false;\n  numberCount = 0;\n  useSpecial = false;\n  specialCount = 0;\n  minNumberWords = 0;\n  capitalize = false;\n  includeNumber = false;\n\n  inEffect() {\n    return (\n      this.defaultType !== \"\" ||\n      this.minLength > 0 ||\n      this.numberCount > 0 ||\n      this.specialCount > 0 ||\n      this.useUppercase ||\n      this.useLowercase ||\n      this.useNumbers ||\n      this.useSpecial ||\n      this.minNumberWords > 0 ||\n      this.capitalize ||\n      this.includeNumber\n    );\n  }\n}\n","// EFF's Long Wordlist from https://www.eff.org/dice\nexport const EFFLongWordList = [\n  \"abacus\",\n  \"abdomen\",\n  \"abdominal\",\n  \"abide\",\n  \"abiding\",\n  \"ability\",\n  \"ablaze\",\n  \"able\",\n  \"abnormal\",\n  \"abrasion\",\n  \"abrasive\",\n  \"abreast\",\n  \"abridge\",\n  \"abroad\",\n  \"abruptly\",\n  \"absence\",\n  \"absentee\",\n  \"absently\",\n  \"absinthe\",\n  \"absolute\",\n  \"absolve\",\n  \"abstain\",\n  \"abstract\",\n  \"absurd\",\n  \"accent\",\n  \"acclaim\",\n  \"acclimate\",\n  \"accompany\",\n  \"account\",\n  \"accuracy\",\n  \"accurate\",\n  \"accustom\",\n  \"acetone\",\n  \"achiness\",\n  \"aching\",\n  \"acid\",\n  \"acorn\",\n  \"acquaint\",\n  \"acquire\",\n  \"acre\",\n  \"acrobat\",\n  \"acronym\",\n  \"acting\",\n  \"action\",\n  \"activate\",\n  \"activator\",\n  \"active\",\n  \"activism\",\n  \"activist\",\n  \"activity\",\n  \"actress\",\n  \"acts\",\n  \"acutely\",\n  \"acuteness\",\n  \"aeration\",\n  \"aerobics\",\n  \"aerosol\",\n  \"aerospace\",\n  \"afar\",\n  \"affair\",\n  \"affected\",\n  \"affecting\",\n  \"affection\",\n  \"affidavit\",\n  \"affiliate\",\n  \"affirm\",\n  \"affix\",\n  \"afflicted\",\n  \"affluent\",\n  \"afford\",\n  \"affront\",\n  \"aflame\",\n  \"afloat\",\n  \"aflutter\",\n  \"afoot\",\n  \"afraid\",\n  \"afterglow\",\n  \"afterlife\",\n  \"aftermath\",\n  \"aftermost\",\n  \"afternoon\",\n  \"aged\",\n  \"ageless\",\n  \"agency\",\n  \"agenda\",\n  \"agent\",\n  \"aggregate\",\n  \"aghast\",\n  \"agile\",\n  \"agility\",\n  \"aging\",\n  \"agnostic\",\n  \"agonize\",\n  \"agonizing\",\n  \"agony\",\n  \"agreeable\",\n  \"agreeably\",\n  \"agreed\",\n  \"agreeing\",\n  \"agreement\",\n  \"aground\",\n  \"ahead\",\n  \"ahoy\",\n  \"aide\",\n  \"aids\",\n  \"aim\",\n  \"ajar\",\n  \"alabaster\",\n  \"alarm\",\n  \"albatross\",\n  \"album\",\n  \"alfalfa\",\n  \"algebra\",\n  \"algorithm\",\n  \"alias\",\n  \"alibi\",\n  \"alienable\",\n  \"alienate\",\n  \"aliens\",\n  \"alike\",\n  \"alive\",\n  \"alkaline\",\n  \"alkalize\",\n  \"almanac\",\n  \"almighty\",\n  \"almost\",\n  \"aloe\",\n  \"aloft\",\n  \"aloha\",\n  \"alone\",\n  \"alongside\",\n  \"aloof\",\n  \"alphabet\",\n  \"alright\",\n  \"although\",\n  \"altitude\",\n  \"alto\",\n  \"aluminum\",\n  \"alumni\",\n  \"always\",\n  \"amaretto\",\n  \"amaze\",\n  \"amazingly\",\n  \"amber\",\n  \"ambiance\",\n  \"ambiguity\",\n  \"ambiguous\",\n  \"ambition\",\n  \"ambitious\",\n  \"ambulance\",\n  \"ambush\",\n  \"amendable\",\n  \"amendment\",\n  \"amends\",\n  \"amenity\",\n  \"amiable\",\n  \"amicably\",\n  \"amid\",\n  \"amigo\",\n  \"amino\",\n  \"amiss\",\n  \"ammonia\",\n  \"ammonium\",\n  \"amnesty\",\n  \"amniotic\",\n  \"among\",\n  \"amount\",\n  \"amperage\",\n  \"ample\",\n  \"amplifier\",\n  \"amplify\",\n  \"amply\",\n  \"amuck\",\n  \"amulet\",\n  \"amusable\",\n  \"amused\",\n  \"amusement\",\n  \"amuser\",\n  \"amusing\",\n  \"anaconda\",\n  \"anaerobic\",\n  \"anagram\",\n  \"anatomist\",\n  \"anatomy\",\n  \"anchor\",\n  \"anchovy\",\n  \"ancient\",\n  \"android\",\n  \"anemia\",\n  \"anemic\",\n  \"aneurism\",\n  \"anew\",\n  \"angelfish\",\n  \"angelic\",\n  \"anger\",\n  \"angled\",\n  \"angler\",\n  \"angles\",\n  \"angling\",\n  \"angrily\",\n  \"angriness\",\n  \"anguished\",\n  \"angular\",\n  \"animal\",\n  \"animate\",\n  \"animating\",\n  \"animation\",\n  \"animator\",\n  \"anime\",\n  \"animosity\",\n  \"ankle\",\n  \"annex\",\n  \"annotate\",\n  \"announcer\",\n  \"annoying\",\n  \"annually\",\n  \"annuity\",\n  \"anointer\",\n  \"another\",\n  \"answering\",\n  \"antacid\",\n  \"antarctic\",\n  \"anteater\",\n  \"antelope\",\n  \"antennae\",\n  \"anthem\",\n  \"anthill\",\n  \"anthology\",\n  \"antibody\",\n  \"antics\",\n  \"antidote\",\n  \"antihero\",\n  \"antiquely\",\n  \"antiques\",\n  \"antiquity\",\n  \"antirust\",\n  \"antitoxic\",\n  \"antitrust\",\n  \"antiviral\",\n  \"antivirus\",\n  \"antler\",\n  \"antonym\",\n  \"antsy\",\n  \"anvil\",\n  \"anybody\",\n  \"anyhow\",\n  \"anymore\",\n  \"anyone\",\n  \"anyplace\",\n  \"anything\",\n  \"anytime\",\n  \"anyway\",\n  \"anywhere\",\n  \"aorta\",\n  \"apache\",\n  \"apostle\",\n  \"appealing\",\n  \"appear\",\n  \"appease\",\n  \"appeasing\",\n  \"appendage\",\n  \"appendix\",\n  \"appetite\",\n  \"appetizer\",\n  \"applaud\",\n  \"applause\",\n  \"apple\",\n  \"appliance\",\n  \"applicant\",\n  \"applied\",\n  \"apply\",\n  \"appointee\",\n  \"appraisal\",\n  \"appraiser\",\n  \"apprehend\",\n  \"approach\",\n  \"approval\",\n  \"approve\",\n  \"apricot\",\n  \"april\",\n  \"apron\",\n  \"aptitude\",\n  \"aptly\",\n  \"aqua\",\n  \"aqueduct\",\n  \"arbitrary\",\n  \"arbitrate\",\n  \"ardently\",\n  \"area\",\n  \"arena\",\n  \"arguable\",\n  \"arguably\",\n  \"argue\",\n  \"arise\",\n  \"armadillo\",\n  \"armband\",\n  \"armchair\",\n  \"armed\",\n  \"armful\",\n  \"armhole\",\n  \"arming\",\n  \"armless\",\n  \"armoire\",\n  \"armored\",\n  \"armory\",\n  \"armrest\",\n  \"army\",\n  \"aroma\",\n  \"arose\",\n  \"around\",\n  \"arousal\",\n  \"arrange\",\n  \"array\",\n  \"arrest\",\n  \"arrival\",\n  \"arrive\",\n  \"arrogance\",\n  \"arrogant\",\n  \"arson\",\n  \"art\",\n  \"ascend\",\n  \"ascension\",\n  \"ascent\",\n  \"ascertain\",\n  \"ashamed\",\n  \"ashen\",\n  \"ashes\",\n  \"ashy\",\n  \"aside\",\n  \"askew\",\n  \"asleep\",\n  \"asparagus\",\n  \"aspect\",\n  \"aspirate\",\n  \"aspire\",\n  \"aspirin\",\n  \"astonish\",\n  \"astound\",\n  \"astride\",\n  \"astrology\",\n  \"astronaut\",\n  \"astronomy\",\n  \"astute\",\n  \"atlantic\",\n  \"atlas\",\n  \"atom\",\n  \"atonable\",\n  \"atop\",\n  \"atrium\",\n  \"atrocious\",\n  \"atrophy\",\n  \"attach\",\n  \"attain\",\n  \"attempt\",\n  \"attendant\",\n  \"attendee\",\n  \"attention\",\n  \"attentive\",\n  \"attest\",\n  \"attic\",\n  \"attire\",\n  \"attitude\",\n  \"attractor\",\n  \"attribute\",\n  \"atypical\",\n  \"auction\",\n  \"audacious\",\n  \"audacity\",\n  \"audible\",\n  \"audibly\",\n  \"audience\",\n  \"audio\",\n  \"audition\",\n  \"augmented\",\n  \"august\",\n  \"authentic\",\n  \"author\",\n  \"autism\",\n  \"autistic\",\n  \"autograph\",\n  \"automaker\",\n  \"automated\",\n  \"automatic\",\n  \"autopilot\",\n  \"available\",\n  \"avalanche\",\n  \"avatar\",\n  \"avenge\",\n  \"avenging\",\n  \"avenue\",\n  \"average\",\n  \"aversion\",\n  \"avert\",\n  \"aviation\",\n  \"aviator\",\n  \"avid\",\n  \"avoid\",\n  \"await\",\n  \"awaken\",\n  \"award\",\n  \"aware\",\n  \"awhile\",\n  \"awkward\",\n  \"awning\",\n  \"awoke\",\n  \"awry\",\n  \"axis\",\n  \"babble\",\n  \"babbling\",\n  \"babied\",\n  \"baboon\",\n  \"backache\",\n  \"backboard\",\n  \"backboned\",\n  \"backdrop\",\n  \"backed\",\n  \"backer\",\n  \"backfield\",\n  \"backfire\",\n  \"backhand\",\n  \"backing\",\n  \"backlands\",\n  \"backlash\",\n  \"backless\",\n  \"backlight\",\n  \"backlit\",\n  \"backlog\",\n  \"backpack\",\n  \"backpedal\",\n  \"backrest\",\n  \"backroom\",\n  \"backshift\",\n  \"backside\",\n  \"backslid\",\n  \"backspace\",\n  \"backspin\",\n  \"backstab\",\n  \"backstage\",\n  \"backtalk\",\n  \"backtrack\",\n  \"backup\",\n  \"backward\",\n  \"backwash\",\n  \"backwater\",\n  \"backyard\",\n  \"bacon\",\n  \"bacteria\",\n  \"bacterium\",\n  \"badass\",\n  \"badge\",\n  \"badland\",\n  \"badly\",\n  \"badness\",\n  \"baffle\",\n  \"baffling\",\n  \"bagel\",\n  \"bagful\",\n  \"baggage\",\n  \"bagged\",\n  \"baggie\",\n  \"bagginess\",\n  \"bagging\",\n  \"baggy\",\n  \"bagpipe\",\n  \"baguette\",\n  \"baked\",\n  \"bakery\",\n  \"bakeshop\",\n  \"baking\",\n  \"balance\",\n  \"balancing\",\n  \"balcony\",\n  \"balmy\",\n  \"balsamic\",\n  \"bamboo\",\n  \"banana\",\n  \"banish\",\n  \"banister\",\n  \"banjo\",\n  \"bankable\",\n  \"bankbook\",\n  \"banked\",\n  \"banker\",\n  \"banking\",\n  \"banknote\",\n  \"bankroll\",\n  \"banner\",\n  \"bannister\",\n  \"banshee\",\n  \"banter\",\n  \"barbecue\",\n  \"barbed\",\n  \"barbell\",\n  \"barber\",\n  \"barcode\",\n  \"barge\",\n  \"bargraph\",\n  \"barista\",\n  \"baritone\",\n  \"barley\",\n  \"barmaid\",\n  \"barman\",\n  \"barn\",\n  \"barometer\",\n  \"barrack\",\n  \"barracuda\",\n  \"barrel\",\n  \"barrette\",\n  \"barricade\",\n  \"barrier\",\n  \"barstool\",\n  \"bartender\",\n  \"barterer\",\n  \"bash\",\n  \"basically\",\n  \"basics\",\n  \"basil\",\n  \"basin\",\n  \"basis\",\n  \"basket\",\n  \"batboy\",\n  \"batch\",\n  \"bath\",\n  \"baton\",\n  \"bats\",\n  \"battalion\",\n  \"battered\",\n  \"battering\",\n  \"battery\",\n  \"batting\",\n  \"battle\",\n  \"bauble\",\n  \"bazooka\",\n  \"blabber\",\n  \"bladder\",\n  \"blade\",\n  \"blah\",\n  \"blame\",\n  \"blaming\",\n  \"blanching\",\n  \"blandness\",\n  \"blank\",\n  \"blaspheme\",\n  \"blasphemy\",\n  \"blast\",\n  \"blatancy\",\n  \"blatantly\",\n  \"blazer\",\n  \"blazing\",\n  \"bleach\",\n  \"bleak\",\n  \"bleep\",\n  \"blemish\",\n  \"blend\",\n  \"bless\",\n  \"blighted\",\n  \"blimp\",\n  \"bling\",\n  \"blinked\",\n  \"blinker\",\n  \"blinking\",\n  \"blinks\",\n  \"blip\",\n  \"blissful\",\n  \"blitz\",\n  \"blizzard\",\n  \"bloated\",\n  \"bloating\",\n  \"blob\",\n  \"blog\",\n  \"bloomers\",\n  \"blooming\",\n  \"blooper\",\n  \"blot\",\n  \"blouse\",\n  \"blubber\",\n  \"bluff\",\n  \"bluish\",\n  \"blunderer\",\n  \"blunt\",\n  \"blurb\",\n  \"blurred\",\n  \"blurry\",\n  \"blurt\",\n  \"blush\",\n  \"blustery\",\n  \"boaster\",\n  \"boastful\",\n  \"boasting\",\n  \"boat\",\n  \"bobbed\",\n  \"bobbing\",\n  \"bobble\",\n  \"bobcat\",\n  \"bobsled\",\n  \"bobtail\",\n  \"bodacious\",\n  \"body\",\n  \"bogged\",\n  \"boggle\",\n  \"bogus\",\n  \"boil\",\n  \"bok\",\n  \"bolster\",\n  \"bolt\",\n  \"bonanza\",\n  \"bonded\",\n  \"bonding\",\n  \"bondless\",\n  \"boned\",\n  \"bonehead\",\n  \"boneless\",\n  \"bonelike\",\n  \"boney\",\n  \"bonfire\",\n  \"bonnet\",\n  \"bonsai\",\n  \"bonus\",\n  \"bony\",\n  \"boogeyman\",\n  \"boogieman\",\n  \"book\",\n  \"boondocks\",\n  \"booted\",\n  \"booth\",\n  \"bootie\",\n  \"booting\",\n  \"bootlace\",\n  \"bootleg\",\n  \"boots\",\n  \"boozy\",\n  \"borax\",\n  \"boring\",\n  \"borough\",\n  \"borrower\",\n  \"borrowing\",\n  \"boss\",\n  \"botanical\",\n  \"botanist\",\n  \"botany\",\n  \"botch\",\n  \"both\",\n  \"bottle\",\n  \"bottling\",\n  \"bottom\",\n  \"bounce\",\n  \"bouncing\",\n  \"bouncy\",\n  \"bounding\",\n  \"boundless\",\n  \"bountiful\",\n  \"bovine\",\n  \"boxcar\",\n  \"boxer\",\n  \"boxing\",\n  \"boxlike\",\n  \"boxy\",\n  \"breach\",\n  \"breath\",\n  \"breeches\",\n  \"breeching\",\n  \"breeder\",\n  \"breeding\",\n  \"breeze\",\n  \"breezy\",\n  \"brethren\",\n  \"brewery\",\n  \"brewing\",\n  \"briar\",\n  \"bribe\",\n  \"brick\",\n  \"bride\",\n  \"bridged\",\n  \"brigade\",\n  \"bright\",\n  \"brilliant\",\n  \"brim\",\n  \"bring\",\n  \"brink\",\n  \"brisket\",\n  \"briskly\",\n  \"briskness\",\n  \"bristle\",\n  \"brittle\",\n  \"broadband\",\n  \"broadcast\",\n  \"broaden\",\n  \"broadly\",\n  \"broadness\",\n  \"broadside\",\n  \"broadways\",\n  \"broiler\",\n  \"broiling\",\n  \"broken\",\n  \"broker\",\n  \"bronchial\",\n  \"bronco\",\n  \"bronze\",\n  \"bronzing\",\n  \"brook\",\n  \"broom\",\n  \"brought\",\n  \"browbeat\",\n  \"brownnose\",\n  \"browse\",\n  \"browsing\",\n  \"bruising\",\n  \"brunch\",\n  \"brunette\",\n  \"brunt\",\n  \"brush\",\n  \"brussels\",\n  \"brute\",\n  \"brutishly\",\n  \"bubble\",\n  \"bubbling\",\n  \"bubbly\",\n  \"buccaneer\",\n  \"bucked\",\n  \"bucket\",\n  \"buckle\",\n  \"buckshot\",\n  \"buckskin\",\n  \"bucktooth\",\n  \"buckwheat\",\n  \"buddhism\",\n  \"buddhist\",\n  \"budding\",\n  \"buddy\",\n  \"budget\",\n  \"buffalo\",\n  \"buffed\",\n  \"buffer\",\n  \"buffing\",\n  \"buffoon\",\n  \"buggy\",\n  \"bulb\",\n  \"bulge\",\n  \"bulginess\",\n  \"bulgur\",\n  \"bulk\",\n  \"bulldog\",\n  \"bulldozer\",\n  \"bullfight\",\n  \"bullfrog\",\n  \"bullhorn\",\n  \"bullion\",\n  \"bullish\",\n  \"bullpen\",\n  \"bullring\",\n  \"bullseye\",\n  \"bullwhip\",\n  \"bully\",\n  \"bunch\",\n  \"bundle\",\n  \"bungee\",\n  \"bunion\",\n  \"bunkbed\",\n  \"bunkhouse\",\n  \"bunkmate\",\n  \"bunny\",\n  \"bunt\",\n  \"busboy\",\n  \"bush\",\n  \"busily\",\n  \"busload\",\n  \"bust\",\n  \"busybody\",\n  \"buzz\",\n  \"cabana\",\n  \"cabbage\",\n  \"cabbie\",\n  \"cabdriver\",\n  \"cable\",\n  \"caboose\",\n  \"cache\",\n  \"cackle\",\n  \"cacti\",\n  \"cactus\",\n  \"caddie\",\n  \"caddy\",\n  \"cadet\",\n  \"cadillac\",\n  \"cadmium\",\n  \"cage\",\n  \"cahoots\",\n  \"cake\",\n  \"calamari\",\n  \"calamity\",\n  \"calcium\",\n  \"calculate\",\n  \"calculus\",\n  \"caliber\",\n  \"calibrate\",\n  \"calm\",\n  \"caloric\",\n  \"calorie\",\n  \"calzone\",\n  \"camcorder\",\n  \"cameo\",\n  \"camera\",\n  \"camisole\",\n  \"camper\",\n  \"campfire\",\n  \"camping\",\n  \"campsite\",\n  \"campus\",\n  \"canal\",\n  \"canary\",\n  \"cancel\",\n  \"candied\",\n  \"candle\",\n  \"candy\",\n  \"cane\",\n  \"canine\",\n  \"canister\",\n  \"cannabis\",\n  \"canned\",\n  \"canning\",\n  \"cannon\",\n  \"cannot\",\n  \"canola\",\n  \"canon\",\n  \"canopener\",\n  \"canopy\",\n  \"canteen\",\n  \"canyon\",\n  \"capable\",\n  \"capably\",\n  \"capacity\",\n  \"cape\",\n  \"capillary\",\n  \"capital\",\n  \"capitol\",\n  \"capped\",\n  \"capricorn\",\n  \"capsize\",\n  \"capsule\",\n  \"caption\",\n  \"captivate\",\n  \"captive\",\n  \"captivity\",\n  \"capture\",\n  \"caramel\",\n  \"carat\",\n  \"caravan\",\n  \"carbon\",\n  \"cardboard\",\n  \"carded\",\n  \"cardiac\",\n  \"cardigan\",\n  \"cardinal\",\n  \"cardstock\",\n  \"carefully\",\n  \"caregiver\",\n  \"careless\",\n  \"caress\",\n  \"caretaker\",\n  \"cargo\",\n  \"caring\",\n  \"carless\",\n  \"carload\",\n  \"carmaker\",\n  \"carnage\",\n  \"carnation\",\n  \"carnival\",\n  \"carnivore\",\n  \"carol\",\n  \"carpenter\",\n  \"carpentry\",\n  \"carpool\",\n  \"carport\",\n  \"carried\",\n  \"carrot\",\n  \"carrousel\",\n  \"carry\",\n  \"cartel\",\n  \"cartload\",\n  \"carton\",\n  \"cartoon\",\n  \"cartridge\",\n  \"cartwheel\",\n  \"carve\",\n  \"carving\",\n  \"carwash\",\n  \"cascade\",\n  \"case\",\n  \"cash\",\n  \"casing\",\n  \"casino\",\n  \"casket\",\n  \"cassette\",\n  \"casually\",\n  \"casualty\",\n  \"catacomb\",\n  \"catalog\",\n  \"catalyst\",\n  \"catalyze\",\n  \"catapult\",\n  \"cataract\",\n  \"catatonic\",\n  \"catcall\",\n  \"catchable\",\n  \"catcher\",\n  \"catching\",\n  \"catchy\",\n  \"caterer\",\n  \"catering\",\n  \"catfight\",\n  \"catfish\",\n  \"cathedral\",\n  \"cathouse\",\n  \"catlike\",\n  \"catnap\",\n  \"catnip\",\n  \"catsup\",\n  \"cattail\",\n  \"cattishly\",\n  \"cattle\",\n  \"catty\",\n  \"catwalk\",\n  \"caucasian\",\n  \"caucus\",\n  \"causal\",\n  \"causation\",\n  \"cause\",\n  \"causing\",\n  \"cauterize\",\n  \"caution\",\n  \"cautious\",\n  \"cavalier\",\n  \"cavalry\",\n  \"caviar\",\n  \"cavity\",\n  \"cedar\",\n  \"celery\",\n  \"celestial\",\n  \"celibacy\",\n  \"celibate\",\n  \"celtic\",\n  \"cement\",\n  \"census\",\n  \"ceramics\",\n  \"ceremony\",\n  \"certainly\",\n  \"certainty\",\n  \"certified\",\n  \"certify\",\n  \"cesarean\",\n  \"cesspool\",\n  \"chafe\",\n  \"chaffing\",\n  \"chain\",\n  \"chair\",\n  \"chalice\",\n  \"challenge\",\n  \"chamber\",\n  \"chamomile\",\n  \"champion\",\n  \"chance\",\n  \"change\",\n  \"channel\",\n  \"chant\",\n  \"chaos\",\n  \"chaperone\",\n  \"chaplain\",\n  \"chapped\",\n  \"chaps\",\n  \"chapter\",\n  \"character\",\n  \"charbroil\",\n  \"charcoal\",\n  \"charger\",\n  \"charging\",\n  \"chariot\",\n  \"charity\",\n  \"charm\",\n  \"charred\",\n  \"charter\",\n  \"charting\",\n  \"chase\",\n  \"chasing\",\n  \"chaste\",\n  \"chastise\",\n  \"chastity\",\n  \"chatroom\",\n  \"chatter\",\n  \"chatting\",\n  \"chatty\",\n  \"cheating\",\n  \"cheddar\",\n  \"cheek\",\n  \"cheer\",\n  \"cheese\",\n  \"cheesy\",\n  \"chef\",\n  \"chemicals\",\n  \"chemist\",\n  \"chemo\",\n  \"cherisher\",\n  \"cherub\",\n  \"chess\",\n  \"chest\",\n  \"chevron\",\n  \"chevy\",\n  \"chewable\",\n  \"chewer\",\n  \"chewing\",\n  \"chewy\",\n  \"chief\",\n  \"chihuahua\",\n  \"childcare\",\n  \"childhood\",\n  \"childish\",\n  \"childless\",\n  \"childlike\",\n  \"chili\",\n  \"chill\",\n  \"chimp\",\n  \"chip\",\n  \"chirping\",\n  \"chirpy\",\n  \"chitchat\",\n  \"chivalry\",\n  \"chive\",\n  \"chloride\",\n  \"chlorine\",\n  \"choice\",\n  \"chokehold\",\n  \"choking\",\n  \"chomp\",\n  \"chooser\",\n  \"choosing\",\n  \"choosy\",\n  \"chop\",\n  \"chosen\",\n  \"chowder\",\n  \"chowtime\",\n  \"chrome\",\n  \"chubby\",\n  \"chuck\",\n  \"chug\",\n  \"chummy\",\n  \"chump\",\n  \"chunk\",\n  \"churn\",\n  \"chute\",\n  \"cider\",\n  \"cilantro\",\n  \"cinch\",\n  \"cinema\",\n  \"cinnamon\",\n  \"circle\",\n  \"circling\",\n  \"circular\",\n  \"circulate\",\n  \"circus\",\n  \"citable\",\n  \"citadel\",\n  \"citation\",\n  \"citizen\",\n  \"citric\",\n  \"citrus\",\n  \"city\",\n  \"civic\",\n  \"civil\",\n  \"clad\",\n  \"claim\",\n  \"clambake\",\n  \"clammy\",\n  \"clamor\",\n  \"clamp\",\n  \"clamshell\",\n  \"clang\",\n  \"clanking\",\n  \"clapped\",\n  \"clapper\",\n  \"clapping\",\n  \"clarify\",\n  \"clarinet\",\n  \"clarity\",\n  \"clash\",\n  \"clasp\",\n  \"class\",\n  \"clatter\",\n  \"clause\",\n  \"clavicle\",\n  \"claw\",\n  \"clay\",\n  \"clean\",\n  \"clear\",\n  \"cleat\",\n  \"cleaver\",\n  \"cleft\",\n  \"clench\",\n  \"clergyman\",\n  \"clerical\",\n  \"clerk\",\n  \"clever\",\n  \"clicker\",\n  \"client\",\n  \"climate\",\n  \"climatic\",\n  \"cling\",\n  \"clinic\",\n  \"clinking\",\n  \"clip\",\n  \"clique\",\n  \"cloak\",\n  \"clobber\",\n  \"clock\",\n  \"clone\",\n  \"cloning\",\n  \"closable\",\n  \"closure\",\n  \"clothes\",\n  \"clothing\",\n  \"cloud\",\n  \"clover\",\n  \"clubbed\",\n  \"clubbing\",\n  \"clubhouse\",\n  \"clump\",\n  \"clumsily\",\n  \"clumsy\",\n  \"clunky\",\n  \"clustered\",\n  \"clutch\",\n  \"clutter\",\n  \"coach\",\n  \"coagulant\",\n  \"coastal\",\n  \"coaster\",\n  \"coasting\",\n  \"coastland\",\n  \"coastline\",\n  \"coat\",\n  \"coauthor\",\n  \"cobalt\",\n  \"cobbler\",\n  \"cobweb\",\n  \"cocoa\",\n  \"coconut\",\n  \"cod\",\n  \"coeditor\",\n  \"coerce\",\n  \"coexist\",\n  \"coffee\",\n  \"cofounder\",\n  \"cognition\",\n  \"cognitive\",\n  \"cogwheel\",\n  \"coherence\",\n  \"coherent\",\n  \"cohesive\",\n  \"coil\",\n  \"coke\",\n  \"cola\",\n  \"cold\",\n  \"coleslaw\",\n  \"coliseum\",\n  \"collage\",\n  \"collapse\",\n  \"collar\",\n  \"collected\",\n  \"collector\",\n  \"collide\",\n  \"collie\",\n  \"collision\",\n  \"colonial\",\n  \"colonist\",\n  \"colonize\",\n  \"colony\",\n  \"colossal\",\n  \"colt\",\n  \"coma\",\n  \"come\",\n  \"comfort\",\n  \"comfy\",\n  \"comic\",\n  \"coming\",\n  \"comma\",\n  \"commence\",\n  \"commend\",\n  \"comment\",\n  \"commerce\",\n  \"commode\",\n  \"commodity\",\n  \"commodore\",\n  \"common\",\n  \"commotion\",\n  \"commute\",\n  \"commuting\",\n  \"compacted\",\n  \"compacter\",\n  \"compactly\",\n  \"compactor\",\n  \"companion\",\n  \"company\",\n  \"compare\",\n  \"compel\",\n  \"compile\",\n  \"comply\",\n  \"component\",\n  \"composed\",\n  \"composer\",\n  \"composite\",\n  \"compost\",\n  \"composure\",\n  \"compound\",\n  \"compress\",\n  \"comprised\",\n  \"computer\",\n  \"computing\",\n  \"comrade\",\n  \"concave\",\n  \"conceal\",\n  \"conceded\",\n  \"concept\",\n  \"concerned\",\n  \"concert\",\n  \"conch\",\n  \"concierge\",\n  \"concise\",\n  \"conclude\",\n  \"concrete\",\n  \"concur\",\n  \"condense\",\n  \"condiment\",\n  \"condition\",\n  \"condone\",\n  \"conducive\",\n  \"conductor\",\n  \"conduit\",\n  \"cone\",\n  \"confess\",\n  \"confetti\",\n  \"confidant\",\n  \"confident\",\n  \"confider\",\n  \"confiding\",\n  \"configure\",\n  \"confined\",\n  \"confining\",\n  \"confirm\",\n  \"conflict\",\n  \"conform\",\n  \"confound\",\n  \"confront\",\n  \"confused\",\n  \"confusing\",\n  \"confusion\",\n  \"congenial\",\n  \"congested\",\n  \"congrats\",\n  \"congress\",\n  \"conical\",\n  \"conjoined\",\n  \"conjure\",\n  \"conjuror\",\n  \"connected\",\n  \"connector\",\n  \"consensus\",\n  \"consent\",\n  \"console\",\n  \"consoling\",\n  \"consonant\",\n  \"constable\",\n  \"constant\",\n  \"constrain\",\n  \"constrict\",\n  \"construct\",\n  \"consult\",\n  \"consumer\",\n  \"consuming\",\n  \"contact\",\n  \"container\",\n  \"contempt\",\n  \"contend\",\n  \"contented\",\n  \"contently\",\n  \"contents\",\n  \"contest\",\n  \"context\",\n  \"contort\",\n  \"contour\",\n  \"contrite\",\n  \"control\",\n  \"contusion\",\n  \"convene\",\n  \"convent\",\n  \"copartner\",\n  \"cope\",\n  \"copied\",\n  \"copier\",\n  \"copilot\",\n  \"coping\",\n  \"copious\",\n  \"copper\",\n  \"copy\",\n  \"coral\",\n  \"cork\",\n  \"cornball\",\n  \"cornbread\",\n  \"corncob\",\n  \"cornea\",\n  \"corned\",\n  \"corner\",\n  \"cornfield\",\n  \"cornflake\",\n  \"cornhusk\",\n  \"cornmeal\",\n  \"cornstalk\",\n  \"corny\",\n  \"coronary\",\n  \"coroner\",\n  \"corporal\",\n  \"corporate\",\n  \"corral\",\n  \"correct\",\n  \"corridor\",\n  \"corrode\",\n  \"corroding\",\n  \"corrosive\",\n  \"corsage\",\n  \"corset\",\n  \"cortex\",\n  \"cosigner\",\n  \"cosmetics\",\n  \"cosmic\",\n  \"cosmos\",\n  \"cosponsor\",\n  \"cost\",\n  \"cottage\",\n  \"cotton\",\n  \"couch\",\n  \"cough\",\n  \"could\",\n  \"countable\",\n  \"countdown\",\n  \"counting\",\n  \"countless\",\n  \"country\",\n  \"county\",\n  \"courier\",\n  \"covenant\",\n  \"cover\",\n  \"coveted\",\n  \"coveting\",\n  \"coyness\",\n  \"cozily\",\n  \"coziness\",\n  \"cozy\",\n  \"crabbing\",\n  \"crabgrass\",\n  \"crablike\",\n  \"crabmeat\",\n  \"cradle\",\n  \"cradling\",\n  \"crafter\",\n  \"craftily\",\n  \"craftsman\",\n  \"craftwork\",\n  \"crafty\",\n  \"cramp\",\n  \"cranberry\",\n  \"crane\",\n  \"cranial\",\n  \"cranium\",\n  \"crank\",\n  \"crate\",\n  \"crave\",\n  \"craving\",\n  \"crawfish\",\n  \"crawlers\",\n  \"crawling\",\n  \"crayfish\",\n  \"crayon\",\n  \"crazed\",\n  \"crazily\",\n  \"craziness\",\n  \"crazy\",\n  \"creamed\",\n  \"creamer\",\n  \"creamlike\",\n  \"crease\",\n  \"creasing\",\n  \"creatable\",\n  \"create\",\n  \"creation\",\n  \"creative\",\n  \"creature\",\n  \"credible\",\n  \"credibly\",\n  \"credit\",\n  \"creed\",\n  \"creme\",\n  \"creole\",\n  \"crepe\",\n  \"crept\",\n  \"crescent\",\n  \"crested\",\n  \"cresting\",\n  \"crestless\",\n  \"crevice\",\n  \"crewless\",\n  \"crewman\",\n  \"crewmate\",\n  \"crib\",\n  \"cricket\",\n  \"cried\",\n  \"crier\",\n  \"crimp\",\n  \"crimson\",\n  \"cringe\",\n  \"cringing\",\n  \"crinkle\",\n  \"crinkly\",\n  \"crisped\",\n  \"crisping\",\n  \"crisply\",\n  \"crispness\",\n  \"crispy\",\n  \"criteria\",\n  \"critter\",\n  \"croak\",\n  \"crock\",\n  \"crook\",\n  \"croon\",\n  \"crop\",\n  \"cross\",\n  \"crouch\",\n  \"crouton\",\n  \"crowbar\",\n  \"crowd\",\n  \"crown\",\n  \"crucial\",\n  \"crudely\",\n  \"crudeness\",\n  \"cruelly\",\n  \"cruelness\",\n  \"cruelty\",\n  \"crumb\",\n  \"crummiest\",\n  \"crummy\",\n  \"crumpet\",\n  \"crumpled\",\n  \"cruncher\",\n  \"crunching\",\n  \"crunchy\",\n  \"crusader\",\n  \"crushable\",\n  \"crushed\",\n  \"crusher\",\n  \"crushing\",\n  \"crust\",\n  \"crux\",\n  \"crying\",\n  \"cryptic\",\n  \"crystal\",\n  \"cubbyhole\",\n  \"cube\",\n  \"cubical\",\n  \"cubicle\",\n  \"cucumber\",\n  \"cuddle\",\n  \"cuddly\",\n  \"cufflink\",\n  \"culinary\",\n  \"culminate\",\n  \"culpable\",\n  \"culprit\",\n  \"cultivate\",\n  \"cultural\",\n  \"culture\",\n  \"cupbearer\",\n  \"cupcake\",\n  \"cupid\",\n  \"cupped\",\n  \"cupping\",\n  \"curable\",\n  \"curator\",\n  \"curdle\",\n  \"cure\",\n  \"curfew\",\n  \"curing\",\n  \"curled\",\n  \"curler\",\n  \"curliness\",\n  \"curling\",\n  \"curly\",\n  \"curry\",\n  \"curse\",\n  \"cursive\",\n  \"cursor\",\n  \"curtain\",\n  \"curtly\",\n  \"curtsy\",\n  \"curvature\",\n  \"curve\",\n  \"curvy\",\n  \"cushy\",\n  \"cusp\",\n  \"cussed\",\n  \"custard\",\n  \"custodian\",\n  \"custody\",\n  \"customary\",\n  \"customer\",\n  \"customize\",\n  \"customs\",\n  \"cut\",\n  \"cycle\",\n  \"cyclic\",\n  \"cycling\",\n  \"cyclist\",\n  \"cylinder\",\n  \"cymbal\",\n  \"cytoplasm\",\n  \"cytoplast\",\n  \"dab\",\n  \"dad\",\n  \"daffodil\",\n  \"dagger\",\n  \"daily\",\n  \"daintily\",\n  \"dainty\",\n  \"dairy\",\n  \"daisy\",\n  \"dallying\",\n  \"dance\",\n  \"dancing\",\n  \"dandelion\",\n  \"dander\",\n  \"dandruff\",\n  \"dandy\",\n  \"danger\",\n  \"dangle\",\n  \"dangling\",\n  \"daredevil\",\n  \"dares\",\n  \"daringly\",\n  \"darkened\",\n  \"darkening\",\n  \"darkish\",\n  \"darkness\",\n  \"darkroom\",\n  \"darling\",\n  \"darn\",\n  \"dart\",\n  \"darwinism\",\n  \"dash\",\n  \"dastardly\",\n  \"data\",\n  \"datebook\",\n  \"dating\",\n  \"daughter\",\n  \"daunting\",\n  \"dawdler\",\n  \"dawn\",\n  \"daybed\",\n  \"daybreak\",\n  \"daycare\",\n  \"daydream\",\n  \"daylight\",\n  \"daylong\",\n  \"dayroom\",\n  \"daytime\",\n  \"dazzler\",\n  \"dazzling\",\n  \"deacon\",\n  \"deafening\",\n  \"deafness\",\n  \"dealer\",\n  \"dealing\",\n  \"dealmaker\",\n  \"dealt\",\n  \"dean\",\n  \"debatable\",\n  \"debate\",\n  \"debating\",\n  \"debit\",\n  \"debrief\",\n  \"debtless\",\n  \"debtor\",\n  \"debug\",\n  \"debunk\",\n  \"decade\",\n  \"decaf\",\n  \"decal\",\n  \"decathlon\",\n  \"decay\",\n  \"deceased\",\n  \"deceit\",\n  \"deceiver\",\n  \"deceiving\",\n  \"december\",\n  \"decency\",\n  \"decent\",\n  \"deception\",\n  \"deceptive\",\n  \"decibel\",\n  \"decidable\",\n  \"decimal\",\n  \"decimeter\",\n  \"decipher\",\n  \"deck\",\n  \"declared\",\n  \"decline\",\n  \"decode\",\n  \"decompose\",\n  \"decorated\",\n  \"decorator\",\n  \"decoy\",\n  \"decrease\",\n  \"decree\",\n  \"dedicate\",\n  \"dedicator\",\n  \"deduce\",\n  \"deduct\",\n  \"deed\",\n  \"deem\",\n  \"deepen\",\n  \"deeply\",\n  \"deepness\",\n  \"deface\",\n  \"defacing\",\n  \"defame\",\n  \"default\",\n  \"defeat\",\n  \"defection\",\n  \"defective\",\n  \"defendant\",\n  \"defender\",\n  \"defense\",\n  \"defensive\",\n  \"deferral\",\n  \"deferred\",\n  \"defiance\",\n  \"defiant\",\n  \"defile\",\n  \"defiling\",\n  \"define\",\n  \"definite\",\n  \"deflate\",\n  \"deflation\",\n  \"deflator\",\n  \"deflected\",\n  \"deflector\",\n  \"defog\",\n  \"deforest\",\n  \"defraud\",\n  \"defrost\",\n  \"deftly\",\n  \"defuse\",\n  \"defy\",\n  \"degraded\",\n  \"degrading\",\n  \"degrease\",\n  \"degree\",\n  \"dehydrate\",\n  \"deity\",\n  \"dejected\",\n  \"delay\",\n  \"delegate\",\n  \"delegator\",\n  \"delete\",\n  \"deletion\",\n  \"delicacy\",\n  \"delicate\",\n  \"delicious\",\n  \"delighted\",\n  \"delirious\",\n  \"delirium\",\n  \"deliverer\",\n  \"delivery\",\n  \"delouse\",\n  \"delta\",\n  \"deluge\",\n  \"delusion\",\n  \"deluxe\",\n  \"demanding\",\n  \"demeaning\",\n  \"demeanor\",\n  \"demise\",\n  \"democracy\",\n  \"democrat\",\n  \"demote\",\n  \"demotion\",\n  \"demystify\",\n  \"denatured\",\n  \"deniable\",\n  \"denial\",\n  \"denim\",\n  \"denote\",\n  \"dense\",\n  \"density\",\n  \"dental\",\n  \"dentist\",\n  \"denture\",\n  \"deny\",\n  \"deodorant\",\n  \"deodorize\",\n  \"departed\",\n  \"departure\",\n  \"depict\",\n  \"deplete\",\n  \"depletion\",\n  \"deplored\",\n  \"deploy\",\n  \"deport\",\n  \"depose\",\n  \"depraved\",\n  \"depravity\",\n  \"deprecate\",\n  \"depress\",\n  \"deprive\",\n  \"depth\",\n  \"deputize\",\n  \"deputy\",\n  \"derail\",\n  \"deranged\",\n  \"derby\",\n  \"derived\",\n  \"desecrate\",\n  \"deserve\",\n  \"deserving\",\n  \"designate\",\n  \"designed\",\n  \"designer\",\n  \"designing\",\n  \"deskbound\",\n  \"desktop\",\n  \"deskwork\",\n  \"desolate\",\n  \"despair\",\n  \"despise\",\n  \"despite\",\n  \"destiny\",\n  \"destitute\",\n  \"destruct\",\n  \"detached\",\n  \"detail\",\n  \"detection\",\n  \"detective\",\n  \"detector\",\n  \"detention\",\n  \"detergent\",\n  \"detest\",\n  \"detonate\",\n  \"detonator\",\n  \"detoxify\",\n  \"detract\",\n  \"deuce\",\n  \"devalue\",\n  \"deviancy\",\n  \"deviant\",\n  \"deviate\",\n  \"deviation\",\n  \"deviator\",\n  \"device\",\n  \"devious\",\n  \"devotedly\",\n  \"devotee\",\n  \"devotion\",\n  \"devourer\",\n  \"devouring\",\n  \"devoutly\",\n  \"dexterity\",\n  \"dexterous\",\n  \"diabetes\",\n  \"diabetic\",\n  \"diabolic\",\n  \"diagnoses\",\n  \"diagnosis\",\n  \"diagram\",\n  \"dial\",\n  \"diameter\",\n  \"diaper\",\n  \"diaphragm\",\n  \"diary\",\n  \"dice\",\n  \"dicing\",\n  \"dictate\",\n  \"dictation\",\n  \"dictator\",\n  \"difficult\",\n  \"diffused\",\n  \"diffuser\",\n  \"diffusion\",\n  \"diffusive\",\n  \"dig\",\n  \"dilation\",\n  \"diligence\",\n  \"diligent\",\n  \"dill\",\n  \"dilute\",\n  \"dime\",\n  \"diminish\",\n  \"dimly\",\n  \"dimmed\",\n  \"dimmer\",\n  \"dimness\",\n  \"dimple\",\n  \"diner\",\n  \"dingbat\",\n  \"dinghy\",\n  \"dinginess\",\n  \"dingo\",\n  \"dingy\",\n  \"dining\",\n  \"dinner\",\n  \"diocese\",\n  \"dioxide\",\n  \"diploma\",\n  \"dipped\",\n  \"dipper\",\n  \"dipping\",\n  \"directed\",\n  \"direction\",\n  \"directive\",\n  \"directly\",\n  \"directory\",\n  \"direness\",\n  \"dirtiness\",\n  \"disabled\",\n  \"disagree\",\n  \"disallow\",\n  \"disarm\",\n  \"disarray\",\n  \"disaster\",\n  \"disband\",\n  \"disbelief\",\n  \"disburse\",\n  \"discard\",\n  \"discern\",\n  \"discharge\",\n  \"disclose\",\n  \"discolor\",\n  \"discount\",\n  \"discourse\",\n  \"discover\",\n  \"discuss\",\n  \"disdain\",\n  \"disengage\",\n  \"disfigure\",\n  \"disgrace\",\n  \"dish\",\n  \"disinfect\",\n  \"disjoin\",\n  \"disk\",\n  \"dislike\",\n  \"disliking\",\n  \"dislocate\",\n  \"dislodge\",\n  \"disloyal\",\n  \"dismantle\",\n  \"dismay\",\n  \"dismiss\",\n  \"dismount\",\n  \"disobey\",\n  \"disorder\",\n  \"disown\",\n  \"disparate\",\n  \"disparity\",\n  \"dispatch\",\n  \"dispense\",\n  \"dispersal\",\n  \"dispersed\",\n  \"disperser\",\n  \"displace\",\n  \"display\",\n  \"displease\",\n  \"disposal\",\n  \"dispose\",\n  \"disprove\",\n  \"dispute\",\n  \"disregard\",\n  \"disrupt\",\n  \"dissuade\",\n  \"distance\",\n  \"distant\",\n  \"distaste\",\n  \"distill\",\n  \"distinct\",\n  \"distort\",\n  \"distract\",\n  \"distress\",\n  \"district\",\n  \"distrust\",\n  \"ditch\",\n  \"ditto\",\n  \"ditzy\",\n  \"dividable\",\n  \"divided\",\n  \"dividend\",\n  \"dividers\",\n  \"dividing\",\n  \"divinely\",\n  \"diving\",\n  \"divinity\",\n  \"divisible\",\n  \"divisibly\",\n  \"division\",\n  \"divisive\",\n  \"divorcee\",\n  \"dizziness\",\n  \"dizzy\",\n  \"doable\",\n  \"docile\",\n  \"dock\",\n  \"doctrine\",\n  \"document\",\n  \"dodge\",\n  \"dodgy\",\n  \"doily\",\n  \"doing\",\n  \"dole\",\n  \"dollar\",\n  \"dollhouse\",\n  \"dollop\",\n  \"dolly\",\n  \"dolphin\",\n  \"domain\",\n  \"domelike\",\n  \"domestic\",\n  \"dominion\",\n  \"dominoes\",\n  \"donated\",\n  \"donation\",\n  \"donator\",\n  \"donor\",\n  \"donut\",\n  \"doodle\",\n  \"doorbell\",\n  \"doorframe\",\n  \"doorknob\",\n  \"doorman\",\n  \"doormat\",\n  \"doornail\",\n  \"doorpost\",\n  \"doorstep\",\n  \"doorstop\",\n  \"doorway\",\n  \"doozy\",\n  \"dork\",\n  \"dormitory\",\n  \"dorsal\",\n  \"dosage\",\n  \"dose\",\n  \"dotted\",\n  \"doubling\",\n  \"douche\",\n  \"dove\",\n  \"down\",\n  \"dowry\",\n  \"doze\",\n  \"drab\",\n  \"dragging\",\n  \"dragonfly\",\n  \"dragonish\",\n  \"dragster\",\n  \"drainable\",\n  \"drainage\",\n  \"drained\",\n  \"drainer\",\n  \"drainpipe\",\n  \"dramatic\",\n  \"dramatize\",\n  \"drank\",\n  \"drapery\",\n  \"drastic\",\n  \"draw\",\n  \"dreaded\",\n  \"dreadful\",\n  \"dreadlock\",\n  \"dreamboat\",\n  \"dreamily\",\n  \"dreamland\",\n  \"dreamless\",\n  \"dreamlike\",\n  \"dreamt\",\n  \"dreamy\",\n  \"drearily\",\n  \"dreary\",\n  \"drench\",\n  \"dress\",\n  \"drew\",\n  \"dribble\",\n  \"dried\",\n  \"drier\",\n  \"drift\",\n  \"driller\",\n  \"drilling\",\n  \"drinkable\",\n  \"drinking\",\n  \"dripping\",\n  \"drippy\",\n  \"drivable\",\n  \"driven\",\n  \"driver\",\n  \"driveway\",\n  \"driving\",\n  \"drizzle\",\n  \"drizzly\",\n  \"drone\",\n  \"drool\",\n  \"droop\",\n  \"drop-down\",\n  \"dropbox\",\n  \"dropkick\",\n  \"droplet\",\n  \"dropout\",\n  \"dropper\",\n  \"drove\",\n  \"drown\",\n  \"drowsily\",\n  \"drudge\",\n  \"drum\",\n  \"dry\",\n  \"dubbed\",\n  \"dubiously\",\n  \"duchess\",\n  \"duckbill\",\n  \"ducking\",\n  \"duckling\",\n  \"ducktail\",\n  \"ducky\",\n  \"duct\",\n  \"dude\",\n  \"duffel\",\n  \"dugout\",\n  \"duh\",\n  \"duke\",\n  \"duller\",\n  \"dullness\",\n  \"duly\",\n  \"dumping\",\n  \"dumpling\",\n  \"dumpster\",\n  \"duo\",\n  \"dupe\",\n  \"duplex\",\n  \"duplicate\",\n  \"duplicity\",\n  \"durable\",\n  \"durably\",\n  \"duration\",\n  \"duress\",\n  \"during\",\n  \"dusk\",\n  \"dust\",\n  \"dutiful\",\n  \"duty\",\n  \"duvet\",\n  \"dwarf\",\n  \"dweeb\",\n  \"dwelled\",\n  \"dweller\",\n  \"dwelling\",\n  \"dwindle\",\n  \"dwindling\",\n  \"dynamic\",\n  \"dynamite\",\n  \"dynasty\",\n  \"dyslexia\",\n  \"dyslexic\",\n  \"each\",\n  \"eagle\",\n  \"earache\",\n  \"eardrum\",\n  \"earflap\",\n  \"earful\",\n  \"earlobe\",\n  \"early\",\n  \"earmark\",\n  \"earmuff\",\n  \"earphone\",\n  \"earpiece\",\n  \"earplugs\",\n  \"earring\",\n  \"earshot\",\n  \"earthen\",\n  \"earthlike\",\n  \"earthling\",\n  \"earthly\",\n  \"earthworm\",\n  \"earthy\",\n  \"earwig\",\n  \"easeful\",\n  \"easel\",\n  \"easiest\",\n  \"easily\",\n  \"easiness\",\n  \"easing\",\n  \"eastbound\",\n  \"eastcoast\",\n  \"easter\",\n  \"eastward\",\n  \"eatable\",\n  \"eaten\",\n  \"eatery\",\n  \"eating\",\n  \"eats\",\n  \"ebay\",\n  \"ebony\",\n  \"ebook\",\n  \"ecard\",\n  \"eccentric\",\n  \"echo\",\n  \"eclair\",\n  \"eclipse\",\n  \"ecologist\",\n  \"ecology\",\n  \"economic\",\n  \"economist\",\n  \"economy\",\n  \"ecosphere\",\n  \"ecosystem\",\n  \"edge\",\n  \"edginess\",\n  \"edging\",\n  \"edgy\",\n  \"edition\",\n  \"editor\",\n  \"educated\",\n  \"education\",\n  \"educator\",\n  \"eel\",\n  \"effective\",\n  \"effects\",\n  \"efficient\",\n  \"effort\",\n  \"eggbeater\",\n  \"egging\",\n  \"eggnog\",\n  \"eggplant\",\n  \"eggshell\",\n  \"egomaniac\",\n  \"egotism\",\n  \"egotistic\",\n  \"either\",\n  \"eject\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elbow\",\n  \"eldercare\",\n  \"elderly\",\n  \"eldest\",\n  \"electable\",\n  \"election\",\n  \"elective\",\n  \"elephant\",\n  \"elevate\",\n  \"elevating\",\n  \"elevation\",\n  \"elevator\",\n  \"eleven\",\n  \"elf\",\n  \"eligible\",\n  \"eligibly\",\n  \"eliminate\",\n  \"elite\",\n  \"elitism\",\n  \"elixir\",\n  \"elk\",\n  \"ellipse\",\n  \"elliptic\",\n  \"elm\",\n  \"elongated\",\n  \"elope\",\n  \"eloquence\",\n  \"eloquent\",\n  \"elsewhere\",\n  \"elude\",\n  \"elusive\",\n  \"elves\",\n  \"email\",\n  \"embargo\",\n  \"embark\",\n  \"embassy\",\n  \"embattled\",\n  \"embellish\",\n  \"ember\",\n  \"embezzle\",\n  \"emblaze\",\n  \"emblem\",\n  \"embody\",\n  \"embolism\",\n  \"emboss\",\n  \"embroider\",\n  \"emcee\",\n  \"emerald\",\n  \"emergency\",\n  \"emission\",\n  \"emit\",\n  \"emote\",\n  \"emoticon\",\n  \"emotion\",\n  \"empathic\",\n  \"empathy\",\n  \"emperor\",\n  \"emphases\",\n  \"emphasis\",\n  \"emphasize\",\n  \"emphatic\",\n  \"empirical\",\n  \"employed\",\n  \"employee\",\n  \"employer\",\n  \"emporium\",\n  \"empower\",\n  \"emptier\",\n  \"emptiness\",\n  \"empty\",\n  \"emu\",\n  \"enable\",\n  \"enactment\",\n  \"enamel\",\n  \"enchanted\",\n  \"enchilada\",\n  \"encircle\",\n  \"enclose\",\n  \"enclosure\",\n  \"encode\",\n  \"encore\",\n  \"encounter\",\n  \"encourage\",\n  \"encroach\",\n  \"encrust\",\n  \"encrypt\",\n  \"endanger\",\n  \"endeared\",\n  \"endearing\",\n  \"ended\",\n  \"ending\",\n  \"endless\",\n  \"endnote\",\n  \"endocrine\",\n  \"endorphin\",\n  \"endorse\",\n  \"endowment\",\n  \"endpoint\",\n  \"endurable\",\n  \"endurance\",\n  \"enduring\",\n  \"energetic\",\n  \"energize\",\n  \"energy\",\n  \"enforced\",\n  \"enforcer\",\n  \"engaged\",\n  \"engaging\",\n  \"engine\",\n  \"engorge\",\n  \"engraved\",\n  \"engraver\",\n  \"engraving\",\n  \"engross\",\n  \"engulf\",\n  \"enhance\",\n  \"enigmatic\",\n  \"enjoyable\",\n  \"enjoyably\",\n  \"enjoyer\",\n  \"enjoying\",\n  \"enjoyment\",\n  \"enlarged\",\n  \"enlarging\",\n  \"enlighten\",\n  \"enlisted\",\n  \"enquirer\",\n  \"enrage\",\n  \"enrich\",\n  \"enroll\",\n  \"enslave\",\n  \"ensnare\",\n  \"ensure\",\n  \"entail\",\n  \"entangled\",\n  \"entering\",\n  \"entertain\",\n  \"enticing\",\n  \"entire\",\n  \"entitle\",\n  \"entity\",\n  \"entomb\",\n  \"entourage\",\n  \"entrap\",\n  \"entree\",\n  \"entrench\",\n  \"entrust\",\n  \"entryway\",\n  \"entwine\",\n  \"enunciate\",\n  \"envelope\",\n  \"enviable\",\n  \"enviably\",\n  \"envious\",\n  \"envision\",\n  \"envoy\",\n  \"envy\",\n  \"enzyme\",\n  \"epic\",\n  \"epidemic\",\n  \"epidermal\",\n  \"epidermis\",\n  \"epidural\",\n  \"epilepsy\",\n  \"epileptic\",\n  \"epilogue\",\n  \"epiphany\",\n  \"episode\",\n  \"equal\",\n  \"equate\",\n  \"equation\",\n  \"equator\",\n  \"equinox\",\n  \"equipment\",\n  \"equity\",\n  \"equivocal\",\n  \"eradicate\",\n  \"erasable\",\n  \"erased\",\n  \"eraser\",\n  \"erasure\",\n  \"ergonomic\",\n  \"errand\",\n  \"errant\",\n  \"erratic\",\n  \"error\",\n  \"erupt\",\n  \"escalate\",\n  \"escalator\",\n  \"escapable\",\n  \"escapade\",\n  \"escapist\",\n  \"escargot\",\n  \"eskimo\",\n  \"esophagus\",\n  \"espionage\",\n  \"espresso\",\n  \"esquire\",\n  \"essay\",\n  \"essence\",\n  \"essential\",\n  \"establish\",\n  \"estate\",\n  \"esteemed\",\n  \"estimate\",\n  \"estimator\",\n  \"estranged\",\n  \"estrogen\",\n  \"etching\",\n  \"eternal\",\n  \"eternity\",\n  \"ethanol\",\n  \"ether\",\n  \"ethically\",\n  \"ethics\",\n  \"euphemism\",\n  \"evacuate\",\n  \"evacuee\",\n  \"evade\",\n  \"evaluate\",\n  \"evaluator\",\n  \"evaporate\",\n  \"evasion\",\n  \"evasive\",\n  \"even\",\n  \"everglade\",\n  \"evergreen\",\n  \"everybody\",\n  \"everyday\",\n  \"everyone\",\n  \"evict\",\n  \"evidence\",\n  \"evident\",\n  \"evil\",\n  \"evoke\",\n  \"evolution\",\n  \"evolve\",\n  \"exact\",\n  \"exalted\",\n  \"example\",\n  \"excavate\",\n  \"excavator\",\n  \"exceeding\",\n  \"exception\",\n  \"excess\",\n  \"exchange\",\n  \"excitable\",\n  \"exciting\",\n  \"exclaim\",\n  \"exclude\",\n  \"excluding\",\n  \"exclusion\",\n  \"exclusive\",\n  \"excretion\",\n  \"excretory\",\n  \"excursion\",\n  \"excusable\",\n  \"excusably\",\n  \"excuse\",\n  \"exemplary\",\n  \"exemplify\",\n  \"exemption\",\n  \"exerciser\",\n  \"exert\",\n  \"exes\",\n  \"exfoliate\",\n  \"exhale\",\n  \"exhaust\",\n  \"exhume\",\n  \"exile\",\n  \"existing\",\n  \"exit\",\n  \"exodus\",\n  \"exonerate\",\n  \"exorcism\",\n  \"exorcist\",\n  \"expand\",\n  \"expanse\",\n  \"expansion\",\n  \"expansive\",\n  \"expectant\",\n  \"expedited\",\n  \"expediter\",\n  \"expel\",\n  \"expend\",\n  \"expenses\",\n  \"expensive\",\n  \"expert\",\n  \"expire\",\n  \"expiring\",\n  \"explain\",\n  \"expletive\",\n  \"explicit\",\n  \"explode\",\n  \"exploit\",\n  \"explore\",\n  \"exploring\",\n  \"exponent\",\n  \"exporter\",\n  \"exposable\",\n  \"expose\",\n  \"exposure\",\n  \"express\",\n  \"expulsion\",\n  \"exquisite\",\n  \"extended\",\n  \"extending\",\n  \"extent\",\n  \"extenuate\",\n  \"exterior\",\n  \"external\",\n  \"extinct\",\n  \"extortion\",\n  \"extradite\",\n  \"extras\",\n  \"extrovert\",\n  \"extrude\",\n  \"extruding\",\n  \"exuberant\",\n  \"fable\",\n  \"fabric\",\n  \"fabulous\",\n  \"facebook\",\n  \"facecloth\",\n  \"facedown\",\n  \"faceless\",\n  \"facelift\",\n  \"faceplate\",\n  \"faceted\",\n  \"facial\",\n  \"facility\",\n  \"facing\",\n  \"facsimile\",\n  \"faction\",\n  \"factoid\",\n  \"factor\",\n  \"factsheet\",\n  \"factual\",\n  \"faculty\",\n  \"fade\",\n  \"fading\",\n  \"failing\",\n  \"falcon\",\n  \"fall\",\n  \"false\",\n  \"falsify\",\n  \"fame\",\n  \"familiar\",\n  \"family\",\n  \"famine\",\n  \"famished\",\n  \"fanatic\",\n  \"fancied\",\n  \"fanciness\",\n  \"fancy\",\n  \"fanfare\",\n  \"fang\",\n  \"fanning\",\n  \"fantasize\",\n  \"fantastic\",\n  \"fantasy\",\n  \"fascism\",\n  \"fastball\",\n  \"faster\",\n  \"fasting\",\n  \"fastness\",\n  \"faucet\",\n  \"favorable\",\n  \"favorably\",\n  \"favored\",\n  \"favoring\",\n  \"favorite\",\n  \"fax\",\n  \"feast\",\n  \"federal\",\n  \"fedora\",\n  \"feeble\",\n  \"feed\",\n  \"feel\",\n  \"feisty\",\n  \"feline\",\n  \"felt-tip\",\n  \"feminine\",\n  \"feminism\",\n  \"feminist\",\n  \"feminize\",\n  \"femur\",\n  \"fence\",\n  \"fencing\",\n  \"fender\",\n  \"ferment\",\n  \"fernlike\",\n  \"ferocious\",\n  \"ferocity\",\n  \"ferret\",\n  \"ferris\",\n  \"ferry\",\n  \"fervor\",\n  \"fester\",\n  \"festival\",\n  \"festive\",\n  \"festivity\",\n  \"fetal\",\n  \"fetch\",\n  \"fever\",\n  \"fiber\",\n  \"fiction\",\n  \"fiddle\",\n  \"fiddling\",\n  \"fidelity\",\n  \"fidgeting\",\n  \"fidgety\",\n  \"fifteen\",\n  \"fifth\",\n  \"fiftieth\",\n  \"fifty\",\n  \"figment\",\n  \"figure\",\n  \"figurine\",\n  \"filing\",\n  \"filled\",\n  \"filler\",\n  \"filling\",\n  \"film\",\n  \"filter\",\n  \"filth\",\n  \"filtrate\",\n  \"finale\",\n  \"finalist\",\n  \"finalize\",\n  \"finally\",\n  \"finance\",\n  \"financial\",\n  \"finch\",\n  \"fineness\",\n  \"finer\",\n  \"finicky\",\n  \"finished\",\n  \"finisher\",\n  \"finishing\",\n  \"finite\",\n  \"finless\",\n  \"finlike\",\n  \"fiscally\",\n  \"fit\",\n  \"five\",\n  \"flaccid\",\n  \"flagman\",\n  \"flagpole\",\n  \"flagship\",\n  \"flagstick\",\n  \"flagstone\",\n  \"flail\",\n  \"flakily\",\n  \"flaky\",\n  \"flame\",\n  \"flammable\",\n  \"flanked\",\n  \"flanking\",\n  \"flannels\",\n  \"flap\",\n  \"flaring\",\n  \"flashback\",\n  \"flashbulb\",\n  \"flashcard\",\n  \"flashily\",\n  \"flashing\",\n  \"flashy\",\n  \"flask\",\n  \"flatbed\",\n  \"flatfoot\",\n  \"flatly\",\n  \"flatness\",\n  \"flatten\",\n  \"flattered\",\n  \"flatterer\",\n  \"flattery\",\n  \"flattop\",\n  \"flatware\",\n  \"flatworm\",\n  \"flavored\",\n  \"flavorful\",\n  \"flavoring\",\n  \"flaxseed\",\n  \"fled\",\n  \"fleshed\",\n  \"fleshy\",\n  \"flick\",\n  \"flier\",\n  \"flight\",\n  \"flinch\",\n  \"fling\",\n  \"flint\",\n  \"flip\",\n  \"flirt\",\n  \"float\",\n  \"flock\",\n  \"flogging\",\n  \"flop\",\n  \"floral\",\n  \"florist\",\n  \"floss\",\n  \"flounder\",\n  \"flyable\",\n  \"flyaway\",\n  \"flyer\",\n  \"flying\",\n  \"flyover\",\n  \"flypaper\",\n  \"foam\",\n  \"foe\",\n  \"fog\",\n  \"foil\",\n  \"folic\",\n  \"folk\",\n  \"follicle\",\n  \"follow\",\n  \"fondling\",\n  \"fondly\",\n  \"fondness\",\n  \"fondue\",\n  \"font\",\n  \"food\",\n  \"fool\",\n  \"footage\",\n  \"football\",\n  \"footbath\",\n  \"footboard\",\n  \"footer\",\n  \"footgear\",\n  \"foothill\",\n  \"foothold\",\n  \"footing\",\n  \"footless\",\n  \"footman\",\n  \"footnote\",\n  \"footpad\",\n  \"footpath\",\n  \"footprint\",\n  \"footrest\",\n  \"footsie\",\n  \"footsore\",\n  \"footwear\",\n  \"footwork\",\n  \"fossil\",\n  \"foster\",\n  \"founder\",\n  \"founding\",\n  \"fountain\",\n  \"fox\",\n  \"foyer\",\n  \"fraction\",\n  \"fracture\",\n  \"fragile\",\n  \"fragility\",\n  \"fragment\",\n  \"fragrance\",\n  \"fragrant\",\n  \"frail\",\n  \"frame\",\n  \"framing\",\n  \"frantic\",\n  \"fraternal\",\n  \"frayed\",\n  \"fraying\",\n  \"frays\",\n  \"freckled\",\n  \"freckles\",\n  \"freebase\",\n  \"freebee\",\n  \"freebie\",\n  \"freedom\",\n  \"freefall\",\n  \"freehand\",\n  \"freeing\",\n  \"freeload\",\n  \"freely\",\n  \"freemason\",\n  \"freeness\",\n  \"freestyle\",\n  \"freeware\",\n  \"freeway\",\n  \"freewill\",\n  \"freezable\",\n  \"freezing\",\n  \"freight\",\n  \"french\",\n  \"frenzied\",\n  \"frenzy\",\n  \"frequency\",\n  \"frequent\",\n  \"fresh\",\n  \"fretful\",\n  \"fretted\",\n  \"friction\",\n  \"friday\",\n  \"fridge\",\n  \"fried\",\n  \"friend\",\n  \"frighten\",\n  \"frightful\",\n  \"frigidity\",\n  \"frigidly\",\n  \"frill\",\n  \"fringe\",\n  \"frisbee\",\n  \"frisk\",\n  \"fritter\",\n  \"frivolous\",\n  \"frolic\",\n  \"from\",\n  \"front\",\n  \"frostbite\",\n  \"frosted\",\n  \"frostily\",\n  \"frosting\",\n  \"frostlike\",\n  \"frosty\",\n  \"froth\",\n  \"frown\",\n  \"frozen\",\n  \"fructose\",\n  \"frugality\",\n  \"frugally\",\n  \"fruit\",\n  \"frustrate\",\n  \"frying\",\n  \"gab\",\n  \"gaffe\",\n  \"gag\",\n  \"gainfully\",\n  \"gaining\",\n  \"gains\",\n  \"gala\",\n  \"gallantly\",\n  \"galleria\",\n  \"gallery\",\n  \"galley\",\n  \"gallon\",\n  \"gallows\",\n  \"gallstone\",\n  \"galore\",\n  \"galvanize\",\n  \"gambling\",\n  \"game\",\n  \"gaming\",\n  \"gamma\",\n  \"gander\",\n  \"gangly\",\n  \"gangrene\",\n  \"gangway\",\n  \"gap\",\n  \"garage\",\n  \"garbage\",\n  \"garden\",\n  \"gargle\",\n  \"garland\",\n  \"garlic\",\n  \"garment\",\n  \"garnet\",\n  \"garnish\",\n  \"garter\",\n  \"gas\",\n  \"gatherer\",\n  \"gathering\",\n  \"gating\",\n  \"gauging\",\n  \"gauntlet\",\n  \"gauze\",\n  \"gave\",\n  \"gawk\",\n  \"gazing\",\n  \"gear\",\n  \"gecko\",\n  \"geek\",\n  \"geiger\",\n  \"gem\",\n  \"gender\",\n  \"generic\",\n  \"generous\",\n  \"genetics\",\n  \"genre\",\n  \"gentile\",\n  \"gentleman\",\n  \"gently\",\n  \"gents\",\n  \"geography\",\n  \"geologic\",\n  \"geologist\",\n  \"geology\",\n  \"geometric\",\n  \"geometry\",\n  \"geranium\",\n  \"gerbil\",\n  \"geriatric\",\n  \"germicide\",\n  \"germinate\",\n  \"germless\",\n  \"germproof\",\n  \"gestate\",\n  \"gestation\",\n  \"gesture\",\n  \"getaway\",\n  \"getting\",\n  \"getup\",\n  \"giant\",\n  \"gibberish\",\n  \"giblet\",\n  \"giddily\",\n  \"giddiness\",\n  \"giddy\",\n  \"gift\",\n  \"gigabyte\",\n  \"gigahertz\",\n  \"gigantic\",\n  \"giggle\",\n  \"giggling\",\n  \"giggly\",\n  \"gigolo\",\n  \"gilled\",\n  \"gills\",\n  \"gimmick\",\n  \"girdle\",\n  \"giveaway\",\n  \"given\",\n  \"giver\",\n  \"giving\",\n  \"gizmo\",\n  \"gizzard\",\n  \"glacial\",\n  \"glacier\",\n  \"glade\",\n  \"gladiator\",\n  \"gladly\",\n  \"glamorous\",\n  \"glamour\",\n  \"glance\",\n  \"glancing\",\n  \"glandular\",\n  \"glare\",\n  \"glaring\",\n  \"glass\",\n  \"glaucoma\",\n  \"glazing\",\n  \"gleaming\",\n  \"gleeful\",\n  \"glider\",\n  \"gliding\",\n  \"glimmer\",\n  \"glimpse\",\n  \"glisten\",\n  \"glitch\",\n  \"glitter\",\n  \"glitzy\",\n  \"gloater\",\n  \"gloating\",\n  \"gloomily\",\n  \"gloomy\",\n  \"glorified\",\n  \"glorifier\",\n  \"glorify\",\n  \"glorious\",\n  \"glory\",\n  \"gloss\",\n  \"glove\",\n  \"glowing\",\n  \"glowworm\",\n  \"glucose\",\n  \"glue\",\n  \"gluten\",\n  \"glutinous\",\n  \"glutton\",\n  \"gnarly\",\n  \"gnat\",\n  \"goal\",\n  \"goatskin\",\n  \"goes\",\n  \"goggles\",\n  \"going\",\n  \"goldfish\",\n  \"goldmine\",\n  \"goldsmith\",\n  \"golf\",\n  \"goliath\",\n  \"gonad\",\n  \"gondola\",\n  \"gone\",\n  \"gong\",\n  \"good\",\n  \"gooey\",\n  \"goofball\",\n  \"goofiness\",\n  \"goofy\",\n  \"google\",\n  \"goon\",\n  \"gopher\",\n  \"gore\",\n  \"gorged\",\n  \"gorgeous\",\n  \"gory\",\n  \"gosling\",\n  \"gossip\",\n  \"gothic\",\n  \"gotten\",\n  \"gout\",\n  \"gown\",\n  \"grab\",\n  \"graceful\",\n  \"graceless\",\n  \"gracious\",\n  \"gradation\",\n  \"graded\",\n  \"grader\",\n  \"gradient\",\n  \"grading\",\n  \"gradually\",\n  \"graduate\",\n  \"graffiti\",\n  \"grafted\",\n  \"grafting\",\n  \"grain\",\n  \"granddad\",\n  \"grandkid\",\n  \"grandly\",\n  \"grandma\",\n  \"grandpa\",\n  \"grandson\",\n  \"granite\",\n  \"granny\",\n  \"granola\",\n  \"grant\",\n  \"granular\",\n  \"grape\",\n  \"graph\",\n  \"grapple\",\n  \"grappling\",\n  \"grasp\",\n  \"grass\",\n  \"gratified\",\n  \"gratify\",\n  \"grating\",\n  \"gratitude\",\n  \"gratuity\",\n  \"gravel\",\n  \"graveness\",\n  \"graves\",\n  \"graveyard\",\n  \"gravitate\",\n  \"gravity\",\n  \"gravy\",\n  \"gray\",\n  \"grazing\",\n  \"greasily\",\n  \"greedily\",\n  \"greedless\",\n  \"greedy\",\n  \"green\",\n  \"greeter\",\n  \"greeting\",\n  \"grew\",\n  \"greyhound\",\n  \"grid\",\n  \"grief\",\n  \"grievance\",\n  \"grieving\",\n  \"grievous\",\n  \"grill\",\n  \"grimace\",\n  \"grimacing\",\n  \"grime\",\n  \"griminess\",\n  \"grimy\",\n  \"grinch\",\n  \"grinning\",\n  \"grip\",\n  \"gristle\",\n  \"grit\",\n  \"groggily\",\n  \"groggy\",\n  \"groin\",\n  \"groom\",\n  \"groove\",\n  \"grooving\",\n  \"groovy\",\n  \"grope\",\n  \"ground\",\n  \"grouped\",\n  \"grout\",\n  \"grove\",\n  \"grower\",\n  \"growing\",\n  \"growl\",\n  \"grub\",\n  \"grudge\",\n  \"grudging\",\n  \"grueling\",\n  \"gruffly\",\n  \"grumble\",\n  \"grumbling\",\n  \"grumbly\",\n  \"grumpily\",\n  \"grunge\",\n  \"grunt\",\n  \"guacamole\",\n  \"guidable\",\n  \"guidance\",\n  \"guide\",\n  \"guiding\",\n  \"guileless\",\n  \"guise\",\n  \"gulf\",\n  \"gullible\",\n  \"gully\",\n  \"gulp\",\n  \"gumball\",\n  \"gumdrop\",\n  \"gumminess\",\n  \"gumming\",\n  \"gummy\",\n  \"gurgle\",\n  \"gurgling\",\n  \"guru\",\n  \"gush\",\n  \"gusto\",\n  \"gusty\",\n  \"gutless\",\n  \"guts\",\n  \"gutter\",\n  \"guy\",\n  \"guzzler\",\n  \"gyration\",\n  \"habitable\",\n  \"habitant\",\n  \"habitat\",\n  \"habitual\",\n  \"hacked\",\n  \"hacker\",\n  \"hacking\",\n  \"hacksaw\",\n  \"had\",\n  \"haggler\",\n  \"haiku\",\n  \"half\",\n  \"halogen\",\n  \"halt\",\n  \"halved\",\n  \"halves\",\n  \"hamburger\",\n  \"hamlet\",\n  \"hammock\",\n  \"hamper\",\n  \"hamster\",\n  \"hamstring\",\n  \"handbag\",\n  \"handball\",\n  \"handbook\",\n  \"handbrake\",\n  \"handcart\",\n  \"handclap\",\n  \"handclasp\",\n  \"handcraft\",\n  \"handcuff\",\n  \"handed\",\n  \"handful\",\n  \"handgrip\",\n  \"handgun\",\n  \"handheld\",\n  \"handiness\",\n  \"handiwork\",\n  \"handlebar\",\n  \"handled\",\n  \"handler\",\n  \"handling\",\n  \"handmade\",\n  \"handoff\",\n  \"handpick\",\n  \"handprint\",\n  \"handrail\",\n  \"handsaw\",\n  \"handset\",\n  \"handsfree\",\n  \"handshake\",\n  \"handstand\",\n  \"handwash\",\n  \"handwork\",\n  \"handwoven\",\n  \"handwrite\",\n  \"handyman\",\n  \"hangnail\",\n  \"hangout\",\n  \"hangover\",\n  \"hangup\",\n  \"hankering\",\n  \"hankie\",\n  \"hanky\",\n  \"haphazard\",\n  \"happening\",\n  \"happier\",\n  \"happiest\",\n  \"happily\",\n  \"happiness\",\n  \"happy\",\n  \"harbor\",\n  \"hardcopy\",\n  \"hardcore\",\n  \"hardcover\",\n  \"harddisk\",\n  \"hardened\",\n  \"hardener\",\n  \"hardening\",\n  \"hardhat\",\n  \"hardhead\",\n  \"hardiness\",\n  \"hardly\",\n  \"hardness\",\n  \"hardship\",\n  \"hardware\",\n  \"hardwired\",\n  \"hardwood\",\n  \"hardy\",\n  \"harmful\",\n  \"harmless\",\n  \"harmonica\",\n  \"harmonics\",\n  \"harmonize\",\n  \"harmony\",\n  \"harness\",\n  \"harpist\",\n  \"harsh\",\n  \"harvest\",\n  \"hash\",\n  \"hassle\",\n  \"haste\",\n  \"hastily\",\n  \"hastiness\",\n  \"hasty\",\n  \"hatbox\",\n  \"hatchback\",\n  \"hatchery\",\n  \"hatchet\",\n  \"hatching\",\n  \"hatchling\",\n  \"hate\",\n  \"hatless\",\n  \"hatred\",\n  \"haunt\",\n  \"haven\",\n  \"hazard\",\n  \"hazelnut\",\n  \"hazily\",\n  \"haziness\",\n  \"hazing\",\n  \"hazy\",\n  \"headache\",\n  \"headband\",\n  \"headboard\",\n  \"headcount\",\n  \"headdress\",\n  \"headed\",\n  \"header\",\n  \"headfirst\",\n  \"headgear\",\n  \"heading\",\n  \"headlamp\",\n  \"headless\",\n  \"headlock\",\n  \"headphone\",\n  \"headpiece\",\n  \"headrest\",\n  \"headroom\",\n  \"headscarf\",\n  \"headset\",\n  \"headsman\",\n  \"headstand\",\n  \"headstone\",\n  \"headway\",\n  \"headwear\",\n  \"heap\",\n  \"heat\",\n  \"heave\",\n  \"heavily\",\n  \"heaviness\",\n  \"heaving\",\n  \"hedge\",\n  \"hedging\",\n  \"heftiness\",\n  \"hefty\",\n  \"helium\",\n  \"helmet\",\n  \"helper\",\n  \"helpful\",\n  \"helping\",\n  \"helpless\",\n  \"helpline\",\n  \"hemlock\",\n  \"hemstitch\",\n  \"hence\",\n  \"henchman\",\n  \"henna\",\n  \"herald\",\n  \"herbal\",\n  \"herbicide\",\n  \"herbs\",\n  \"heritage\",\n  \"hermit\",\n  \"heroics\",\n  \"heroism\",\n  \"herring\",\n  \"herself\",\n  \"hertz\",\n  \"hesitancy\",\n  \"hesitant\",\n  \"hesitate\",\n  \"hexagon\",\n  \"hexagram\",\n  \"hubcap\",\n  \"huddle\",\n  \"huddling\",\n  \"huff\",\n  \"hug\",\n  \"hula\",\n  \"hulk\",\n  \"hull\",\n  \"human\",\n  \"humble\",\n  \"humbling\",\n  \"humbly\",\n  \"humid\",\n  \"humiliate\",\n  \"humility\",\n  \"humming\",\n  \"hummus\",\n  \"humongous\",\n  \"humorist\",\n  \"humorless\",\n  \"humorous\",\n  \"humpback\",\n  \"humped\",\n  \"humvee\",\n  \"hunchback\",\n  \"hundredth\",\n  \"hunger\",\n  \"hungrily\",\n  \"hungry\",\n  \"hunk\",\n  \"hunter\",\n  \"hunting\",\n  \"huntress\",\n  \"huntsman\",\n  \"hurdle\",\n  \"hurled\",\n  \"hurler\",\n  \"hurling\",\n  \"hurray\",\n  \"hurricane\",\n  \"hurried\",\n  \"hurry\",\n  \"hurt\",\n  \"husband\",\n  \"hush\",\n  \"husked\",\n  \"huskiness\",\n  \"hut\",\n  \"hybrid\",\n  \"hydrant\",\n  \"hydrated\",\n  \"hydration\",\n  \"hydrogen\",\n  \"hydroxide\",\n  \"hyperlink\",\n  \"hypertext\",\n  \"hyphen\",\n  \"hypnoses\",\n  \"hypnosis\",\n  \"hypnotic\",\n  \"hypnotism\",\n  \"hypnotist\",\n  \"hypnotize\",\n  \"hypocrisy\",\n  \"hypocrite\",\n  \"ibuprofen\",\n  \"ice\",\n  \"iciness\",\n  \"icing\",\n  \"icky\",\n  \"icon\",\n  \"icy\",\n  \"idealism\",\n  \"idealist\",\n  \"idealize\",\n  \"ideally\",\n  \"idealness\",\n  \"identical\",\n  \"identify\",\n  \"identity\",\n  \"ideology\",\n  \"idiocy\",\n  \"idiom\",\n  \"idly\",\n  \"igloo\",\n  \"ignition\",\n  \"ignore\",\n  \"iguana\",\n  \"illicitly\",\n  \"illusion\",\n  \"illusive\",\n  \"image\",\n  \"imaginary\",\n  \"imagines\",\n  \"imaging\",\n  \"imbecile\",\n  \"imitate\",\n  \"imitation\",\n  \"immature\",\n  \"immerse\",\n  \"immersion\",\n  \"imminent\",\n  \"immobile\",\n  \"immodest\",\n  \"immorally\",\n  \"immortal\",\n  \"immovable\",\n  \"immovably\",\n  \"immunity\",\n  \"immunize\",\n  \"impaired\",\n  \"impale\",\n  \"impart\",\n  \"impatient\",\n  \"impeach\",\n  \"impeding\",\n  \"impending\",\n  \"imperfect\",\n  \"imperial\",\n  \"impish\",\n  \"implant\",\n  \"implement\",\n  \"implicate\",\n  \"implicit\",\n  \"implode\",\n  \"implosion\",\n  \"implosive\",\n  \"imply\",\n  \"impolite\",\n  \"important\",\n  \"importer\",\n  \"impose\",\n  \"imposing\",\n  \"impotence\",\n  \"impotency\",\n  \"impotent\",\n  \"impound\",\n  \"imprecise\",\n  \"imprint\",\n  \"imprison\",\n  \"impromptu\",\n  \"improper\",\n  \"improve\",\n  \"improving\",\n  \"improvise\",\n  \"imprudent\",\n  \"impulse\",\n  \"impulsive\",\n  \"impure\",\n  \"impurity\",\n  \"iodine\",\n  \"iodize\",\n  \"ion\",\n  \"ipad\",\n  \"iphone\",\n  \"ipod\",\n  \"irate\",\n  \"irk\",\n  \"iron\",\n  \"irregular\",\n  \"irrigate\",\n  \"irritable\",\n  \"irritably\",\n  \"irritant\",\n  \"irritate\",\n  \"islamic\",\n  \"islamist\",\n  \"isolated\",\n  \"isolating\",\n  \"isolation\",\n  \"isotope\",\n  \"issue\",\n  \"issuing\",\n  \"italicize\",\n  \"italics\",\n  \"item\",\n  \"itinerary\",\n  \"itunes\",\n  \"ivory\",\n  \"ivy\",\n  \"jab\",\n  \"jackal\",\n  \"jacket\",\n  \"jackknife\",\n  \"jackpot\",\n  \"jailbird\",\n  \"jailbreak\",\n  \"jailer\",\n  \"jailhouse\",\n  \"jalapeno\",\n  \"jam\",\n  \"janitor\",\n  \"january\",\n  \"jargon\",\n  \"jarring\",\n  \"jasmine\",\n  \"jaundice\",\n  \"jaunt\",\n  \"java\",\n  \"jawed\",\n  \"jawless\",\n  \"jawline\",\n  \"jaws\",\n  \"jaybird\",\n  \"jaywalker\",\n  \"jazz\",\n  \"jeep\",\n  \"jeeringly\",\n  \"jellied\",\n  \"jelly\",\n  \"jersey\",\n  \"jester\",\n  \"jet\",\n  \"jiffy\",\n  \"jigsaw\",\n  \"jimmy\",\n  \"jingle\",\n  \"jingling\",\n  \"jinx\",\n  \"jitters\",\n  \"jittery\",\n  \"job\",\n  \"jockey\",\n  \"jockstrap\",\n  \"jogger\",\n  \"jogging\",\n  \"john\",\n  \"joining\",\n  \"jokester\",\n  \"jokingly\",\n  \"jolliness\",\n  \"jolly\",\n  \"jolt\",\n  \"jot\",\n  \"jovial\",\n  \"joyfully\",\n  \"joylessly\",\n  \"joyous\",\n  \"joyride\",\n  \"joystick\",\n  \"jubilance\",\n  \"jubilant\",\n  \"judge\",\n  \"judgingly\",\n  \"judicial\",\n  \"judiciary\",\n  \"judo\",\n  \"juggle\",\n  \"juggling\",\n  \"jugular\",\n  \"juice\",\n  \"juiciness\",\n  \"juicy\",\n  \"jujitsu\",\n  \"jukebox\",\n  \"july\",\n  \"jumble\",\n  \"jumbo\",\n  \"jump\",\n  \"junction\",\n  \"juncture\",\n  \"june\",\n  \"junior\",\n  \"juniper\",\n  \"junkie\",\n  \"junkman\",\n  \"junkyard\",\n  \"jurist\",\n  \"juror\",\n  \"jury\",\n  \"justice\",\n  \"justifier\",\n  \"justify\",\n  \"justly\",\n  \"justness\",\n  \"juvenile\",\n  \"kabob\",\n  \"kangaroo\",\n  \"karaoke\",\n  \"karate\",\n  \"karma\",\n  \"kebab\",\n  \"keenly\",\n  \"keenness\",\n  \"keep\",\n  \"keg\",\n  \"kelp\",\n  \"kennel\",\n  \"kept\",\n  \"kerchief\",\n  \"kerosene\",\n  \"kettle\",\n  \"kick\",\n  \"kiln\",\n  \"kilobyte\",\n  \"kilogram\",\n  \"kilometer\",\n  \"kilowatt\",\n  \"kilt\",\n  \"kimono\",\n  \"kindle\",\n  \"kindling\",\n  \"kindly\",\n  \"kindness\",\n  \"kindred\",\n  \"kinetic\",\n  \"kinfolk\",\n  \"king\",\n  \"kinship\",\n  \"kinsman\",\n  \"kinswoman\",\n  \"kissable\",\n  \"kisser\",\n  \"kissing\",\n  \"kitchen\",\n  \"kite\",\n  \"kitten\",\n  \"kitty\",\n  \"kiwi\",\n  \"kleenex\",\n  \"knapsack\",\n  \"knee\",\n  \"knelt\",\n  \"knickers\",\n  \"knoll\",\n  \"koala\",\n  \"kooky\",\n  \"kosher\",\n  \"krypton\",\n  \"kudos\",\n  \"kung\",\n  \"labored\",\n  \"laborer\",\n  \"laboring\",\n  \"laborious\",\n  \"labrador\",\n  \"ladder\",\n  \"ladies\",\n  \"ladle\",\n  \"ladybug\",\n  \"ladylike\",\n  \"lagged\",\n  \"lagging\",\n  \"lagoon\",\n  \"lair\",\n  \"lake\",\n  \"lance\",\n  \"landed\",\n  \"landfall\",\n  \"landfill\",\n  \"landing\",\n  \"landlady\",\n  \"landless\",\n  \"landline\",\n  \"landlord\",\n  \"landmark\",\n  \"landmass\",\n  \"landmine\",\n  \"landowner\",\n  \"landscape\",\n  \"landside\",\n  \"landslide\",\n  \"language\",\n  \"lankiness\",\n  \"lanky\",\n  \"lantern\",\n  \"lapdog\",\n  \"lapel\",\n  \"lapped\",\n  \"lapping\",\n  \"laptop\",\n  \"lard\",\n  \"large\",\n  \"lark\",\n  \"lash\",\n  \"lasso\",\n  \"last\",\n  \"latch\",\n  \"late\",\n  \"lather\",\n  \"latitude\",\n  \"latrine\",\n  \"latter\",\n  \"latticed\",\n  \"launch\",\n  \"launder\",\n  \"laundry\",\n  \"laurel\",\n  \"lavender\",\n  \"lavish\",\n  \"laxative\",\n  \"lazily\",\n  \"laziness\",\n  \"lazy\",\n  \"lecturer\",\n  \"left\",\n  \"legacy\",\n  \"legal\",\n  \"legend\",\n  \"legged\",\n  \"leggings\",\n  \"legible\",\n  \"legibly\",\n  \"legislate\",\n  \"lego\",\n  \"legroom\",\n  \"legume\",\n  \"legwarmer\",\n  \"legwork\",\n  \"lemon\",\n  \"lend\",\n  \"length\",\n  \"lens\",\n  \"lent\",\n  \"leotard\",\n  \"lesser\",\n  \"letdown\",\n  \"lethargic\",\n  \"lethargy\",\n  \"letter\",\n  \"lettuce\",\n  \"level\",\n  \"leverage\",\n  \"levers\",\n  \"levitate\",\n  \"levitator\",\n  \"liability\",\n  \"liable\",\n  \"liberty\",\n  \"librarian\",\n  \"library\",\n  \"licking\",\n  \"licorice\",\n  \"lid\",\n  \"life\",\n  \"lifter\",\n  \"lifting\",\n  \"liftoff\",\n  \"ligament\",\n  \"likely\",\n  \"likeness\",\n  \"likewise\",\n  \"liking\",\n  \"lilac\",\n  \"lilly\",\n  \"lily\",\n  \"limb\",\n  \"limeade\",\n  \"limelight\",\n  \"limes\",\n  \"limit\",\n  \"limping\",\n  \"limpness\",\n  \"line\",\n  \"lingo\",\n  \"linguini\",\n  \"linguist\",\n  \"lining\",\n  \"linked\",\n  \"linoleum\",\n  \"linseed\",\n  \"lint\",\n  \"lion\",\n  \"lip\",\n  \"liquefy\",\n  \"liqueur\",\n  \"liquid\",\n  \"lisp\",\n  \"list\",\n  \"litigate\",\n  \"litigator\",\n  \"litmus\",\n  \"litter\",\n  \"little\",\n  \"livable\",\n  \"lived\",\n  \"lively\",\n  \"liver\",\n  \"livestock\",\n  \"lividly\",\n  \"living\",\n  \"lizard\",\n  \"lubricant\",\n  \"lubricate\",\n  \"lucid\",\n  \"luckily\",\n  \"luckiness\",\n  \"luckless\",\n  \"lucrative\",\n  \"ludicrous\",\n  \"lugged\",\n  \"lukewarm\",\n  \"lullaby\",\n  \"lumber\",\n  \"luminance\",\n  \"luminous\",\n  \"lumpiness\",\n  \"lumping\",\n  \"lumpish\",\n  \"lunacy\",\n  \"lunar\",\n  \"lunchbox\",\n  \"luncheon\",\n  \"lunchroom\",\n  \"lunchtime\",\n  \"lung\",\n  \"lurch\",\n  \"lure\",\n  \"luridness\",\n  \"lurk\",\n  \"lushly\",\n  \"lushness\",\n  \"luster\",\n  \"lustfully\",\n  \"lustily\",\n  \"lustiness\",\n  \"lustrous\",\n  \"lusty\",\n  \"luxurious\",\n  \"luxury\",\n  \"lying\",\n  \"lyrically\",\n  \"lyricism\",\n  \"lyricist\",\n  \"lyrics\",\n  \"macarena\",\n  \"macaroni\",\n  \"macaw\",\n  \"mace\",\n  \"machine\",\n  \"machinist\",\n  \"magazine\",\n  \"magenta\",\n  \"maggot\",\n  \"magical\",\n  \"magician\",\n  \"magma\",\n  \"magnesium\",\n  \"magnetic\",\n  \"magnetism\",\n  \"magnetize\",\n  \"magnifier\",\n  \"magnify\",\n  \"magnitude\",\n  \"magnolia\",\n  \"mahogany\",\n  \"maimed\",\n  \"majestic\",\n  \"majesty\",\n  \"majorette\",\n  \"majority\",\n  \"makeover\",\n  \"maker\",\n  \"makeshift\",\n  \"making\",\n  \"malformed\",\n  \"malt\",\n  \"mama\",\n  \"mammal\",\n  \"mammary\",\n  \"mammogram\",\n  \"manager\",\n  \"managing\",\n  \"manatee\",\n  \"mandarin\",\n  \"mandate\",\n  \"mandatory\",\n  \"mandolin\",\n  \"manger\",\n  \"mangle\",\n  \"mango\",\n  \"mangy\",\n  \"manhandle\",\n  \"manhole\",\n  \"manhood\",\n  \"manhunt\",\n  \"manicotti\",\n  \"manicure\",\n  \"manifesto\",\n  \"manila\",\n  \"mankind\",\n  \"manlike\",\n  \"manliness\",\n  \"manly\",\n  \"manmade\",\n  \"manned\",\n  \"mannish\",\n  \"manor\",\n  \"manpower\",\n  \"mantis\",\n  \"mantra\",\n  \"manual\",\n  \"many\",\n  \"map\",\n  \"marathon\",\n  \"marauding\",\n  \"marbled\",\n  \"marbles\",\n  \"marbling\",\n  \"march\",\n  \"mardi\",\n  \"margarine\",\n  \"margarita\",\n  \"margin\",\n  \"marigold\",\n  \"marina\",\n  \"marine\",\n  \"marital\",\n  \"maritime\",\n  \"marlin\",\n  \"marmalade\",\n  \"maroon\",\n  \"married\",\n  \"marrow\",\n  \"marry\",\n  \"marshland\",\n  \"marshy\",\n  \"marsupial\",\n  \"marvelous\",\n  \"marxism\",\n  \"mascot\",\n  \"masculine\",\n  \"mashed\",\n  \"mashing\",\n  \"massager\",\n  \"masses\",\n  \"massive\",\n  \"mastiff\",\n  \"matador\",\n  \"matchbook\",\n  \"matchbox\",\n  \"matcher\",\n  \"matching\",\n  \"matchless\",\n  \"material\",\n  \"maternal\",\n  \"maternity\",\n  \"math\",\n  \"mating\",\n  \"matriarch\",\n  \"matrimony\",\n  \"matrix\",\n  \"matron\",\n  \"matted\",\n  \"matter\",\n  \"maturely\",\n  \"maturing\",\n  \"maturity\",\n  \"mauve\",\n  \"maverick\",\n  \"maximize\",\n  \"maximum\",\n  \"maybe\",\n  \"mayday\",\n  \"mayflower\",\n  \"moaner\",\n  \"moaning\",\n  \"mobile\",\n  \"mobility\",\n  \"mobilize\",\n  \"mobster\",\n  \"mocha\",\n  \"mocker\",\n  \"mockup\",\n  \"modified\",\n  \"modify\",\n  \"modular\",\n  \"modulator\",\n  \"module\",\n  \"moisten\",\n  \"moistness\",\n  \"moisture\",\n  \"molar\",\n  \"molasses\",\n  \"mold\",\n  \"molecular\",\n  \"molecule\",\n  \"molehill\",\n  \"mollusk\",\n  \"mom\",\n  \"monastery\",\n  \"monday\",\n  \"monetary\",\n  \"monetize\",\n  \"moneybags\",\n  \"moneyless\",\n  \"moneywise\",\n  \"mongoose\",\n  \"mongrel\",\n  \"monitor\",\n  \"monkhood\",\n  \"monogamy\",\n  \"monogram\",\n  \"monologue\",\n  \"monopoly\",\n  \"monorail\",\n  \"monotone\",\n  \"monotype\",\n  \"monoxide\",\n  \"monsieur\",\n  \"monsoon\",\n  \"monstrous\",\n  \"monthly\",\n  \"monument\",\n  \"moocher\",\n  \"moodiness\",\n  \"moody\",\n  \"mooing\",\n  \"moonbeam\",\n  \"mooned\",\n  \"moonlight\",\n  \"moonlike\",\n  \"moonlit\",\n  \"moonrise\",\n  \"moonscape\",\n  \"moonshine\",\n  \"moonstone\",\n  \"moonwalk\",\n  \"mop\",\n  \"morale\",\n  \"morality\",\n  \"morally\",\n  \"morbidity\",\n  \"morbidly\",\n  \"morphine\",\n  \"morphing\",\n  \"morse\",\n  \"mortality\",\n  \"mortally\",\n  \"mortician\",\n  \"mortified\",\n  \"mortify\",\n  \"mortuary\",\n  \"mosaic\",\n  \"mossy\",\n  \"most\",\n  \"mothball\",\n  \"mothproof\",\n  \"motion\",\n  \"motivate\",\n  \"motivator\",\n  \"motive\",\n  \"motocross\",\n  \"motor\",\n  \"motto\",\n  \"mountable\",\n  \"mountain\",\n  \"mounted\",\n  \"mounting\",\n  \"mourner\",\n  \"mournful\",\n  \"mouse\",\n  \"mousiness\",\n  \"moustache\",\n  \"mousy\",\n  \"mouth\",\n  \"movable\",\n  \"move\",\n  \"movie\",\n  \"moving\",\n  \"mower\",\n  \"mowing\",\n  \"much\",\n  \"muck\",\n  \"mud\",\n  \"mug\",\n  \"mulberry\",\n  \"mulch\",\n  \"mule\",\n  \"mulled\",\n  \"mullets\",\n  \"multiple\",\n  \"multiply\",\n  \"multitask\",\n  \"multitude\",\n  \"mumble\",\n  \"mumbling\",\n  \"mumbo\",\n  \"mummified\",\n  \"mummify\",\n  \"mummy\",\n  \"mumps\",\n  \"munchkin\",\n  \"mundane\",\n  \"municipal\",\n  \"muppet\",\n  \"mural\",\n  \"murkiness\",\n  \"murky\",\n  \"murmuring\",\n  \"muscular\",\n  \"museum\",\n  \"mushily\",\n  \"mushiness\",\n  \"mushroom\",\n  \"mushy\",\n  \"music\",\n  \"musket\",\n  \"muskiness\",\n  \"musky\",\n  \"mustang\",\n  \"mustard\",\n  \"muster\",\n  \"mustiness\",\n  \"musty\",\n  \"mutable\",\n  \"mutate\",\n  \"mutation\",\n  \"mute\",\n  \"mutilated\",\n  \"mutilator\",\n  \"mutiny\",\n  \"mutt\",\n  \"mutual\",\n  \"muzzle\",\n  \"myself\",\n  \"myspace\",\n  \"mystified\",\n  \"mystify\",\n  \"myth\",\n  \"nacho\",\n  \"nag\",\n  \"nail\",\n  \"name\",\n  \"naming\",\n  \"nanny\",\n  \"nanometer\",\n  \"nape\",\n  \"napkin\",\n  \"napped\",\n  \"napping\",\n  \"nappy\",\n  \"narrow\",\n  \"nastily\",\n  \"nastiness\",\n  \"national\",\n  \"native\",\n  \"nativity\",\n  \"natural\",\n  \"nature\",\n  \"naturist\",\n  \"nautical\",\n  \"navigate\",\n  \"navigator\",\n  \"navy\",\n  \"nearby\",\n  \"nearest\",\n  \"nearly\",\n  \"nearness\",\n  \"neatly\",\n  \"neatness\",\n  \"nebula\",\n  \"nebulizer\",\n  \"nectar\",\n  \"negate\",\n  \"negation\",\n  \"negative\",\n  \"neglector\",\n  \"negligee\",\n  \"negligent\",\n  \"negotiate\",\n  \"nemeses\",\n  \"nemesis\",\n  \"neon\",\n  \"nephew\",\n  \"nerd\",\n  \"nervous\",\n  \"nervy\",\n  \"nest\",\n  \"net\",\n  \"neurology\",\n  \"neuron\",\n  \"neurosis\",\n  \"neurotic\",\n  \"neuter\",\n  \"neutron\",\n  \"never\",\n  \"next\",\n  \"nibble\",\n  \"nickname\",\n  \"nicotine\",\n  \"niece\",\n  \"nifty\",\n  \"nimble\",\n  \"nimbly\",\n  \"nineteen\",\n  \"ninetieth\",\n  \"ninja\",\n  \"nintendo\",\n  \"ninth\",\n  \"nuclear\",\n  \"nuclei\",\n  \"nucleus\",\n  \"nugget\",\n  \"nullify\",\n  \"number\",\n  \"numbing\",\n  \"numbly\",\n  \"numbness\",\n  \"numeral\",\n  \"numerate\",\n  \"numerator\",\n  \"numeric\",\n  \"numerous\",\n  \"nuptials\",\n  \"nursery\",\n  \"nursing\",\n  \"nurture\",\n  \"nutcase\",\n  \"nutlike\",\n  \"nutmeg\",\n  \"nutrient\",\n  \"nutshell\",\n  \"nuttiness\",\n  \"nutty\",\n  \"nuzzle\",\n  \"nylon\",\n  \"oaf\",\n  \"oak\",\n  \"oasis\",\n  \"oat\",\n  \"obedience\",\n  \"obedient\",\n  \"obituary\",\n  \"object\",\n  \"obligate\",\n  \"obliged\",\n  \"oblivion\",\n  \"oblivious\",\n  \"oblong\",\n  \"obnoxious\",\n  \"oboe\",\n  \"obscure\",\n  \"obscurity\",\n  \"observant\",\n  \"observer\",\n  \"observing\",\n  \"obsessed\",\n  \"obsession\",\n  \"obsessive\",\n  \"obsolete\",\n  \"obstacle\",\n  \"obstinate\",\n  \"obstruct\",\n  \"obtain\",\n  \"obtrusive\",\n  \"obtuse\",\n  \"obvious\",\n  \"occultist\",\n  \"occupancy\",\n  \"occupant\",\n  \"occupier\",\n  \"occupy\",\n  \"ocean\",\n  \"ocelot\",\n  \"octagon\",\n  \"octane\",\n  \"october\",\n  \"octopus\",\n  \"ogle\",\n  \"oil\",\n  \"oink\",\n  \"ointment\",\n  \"okay\",\n  \"old\",\n  \"olive\",\n  \"olympics\",\n  \"omega\",\n  \"omen\",\n  \"ominous\",\n  \"omission\",\n  \"omit\",\n  \"omnivore\",\n  \"onboard\",\n  \"oncoming\",\n  \"ongoing\",\n  \"onion\",\n  \"online\",\n  \"onlooker\",\n  \"only\",\n  \"onscreen\",\n  \"onset\",\n  \"onshore\",\n  \"onslaught\",\n  \"onstage\",\n  \"onto\",\n  \"onward\",\n  \"onyx\",\n  \"oops\",\n  \"ooze\",\n  \"oozy\",\n  \"opacity\",\n  \"opal\",\n  \"open\",\n  \"operable\",\n  \"operate\",\n  \"operating\",\n  \"operation\",\n  \"operative\",\n  \"operator\",\n  \"opium\",\n  \"opossum\",\n  \"opponent\",\n  \"oppose\",\n  \"opposing\",\n  \"opposite\",\n  \"oppressed\",\n  \"oppressor\",\n  \"opt\",\n  \"opulently\",\n  \"osmosis\",\n  \"other\",\n  \"otter\",\n  \"ouch\",\n  \"ought\",\n  \"ounce\",\n  \"outage\",\n  \"outback\",\n  \"outbid\",\n  \"outboard\",\n  \"outbound\",\n  \"outbreak\",\n  \"outburst\",\n  \"outcast\",\n  \"outclass\",\n  \"outcome\",\n  \"outdated\",\n  \"outdoors\",\n  \"outer\",\n  \"outfield\",\n  \"outfit\",\n  \"outflank\",\n  \"outgoing\",\n  \"outgrow\",\n  \"outhouse\",\n  \"outing\",\n  \"outlast\",\n  \"outlet\",\n  \"outline\",\n  \"outlook\",\n  \"outlying\",\n  \"outmatch\",\n  \"outmost\",\n  \"outnumber\",\n  \"outplayed\",\n  \"outpost\",\n  \"outpour\",\n  \"output\",\n  \"outrage\",\n  \"outrank\",\n  \"outreach\",\n  \"outright\",\n  \"outscore\",\n  \"outsell\",\n  \"outshine\",\n  \"outshoot\",\n  \"outsider\",\n  \"outskirts\",\n  \"outsmart\",\n  \"outsource\",\n  \"outspoken\",\n  \"outtakes\",\n  \"outthink\",\n  \"outward\",\n  \"outweigh\",\n  \"outwit\",\n  \"oval\",\n  \"ovary\",\n  \"oven\",\n  \"overact\",\n  \"overall\",\n  \"overarch\",\n  \"overbid\",\n  \"overbill\",\n  \"overbite\",\n  \"overblown\",\n  \"overboard\",\n  \"overbook\",\n  \"overbuilt\",\n  \"overcast\",\n  \"overcoat\",\n  \"overcome\",\n  \"overcook\",\n  \"overcrowd\",\n  \"overdraft\",\n  \"overdrawn\",\n  \"overdress\",\n  \"overdrive\",\n  \"overdue\",\n  \"overeager\",\n  \"overeater\",\n  \"overexert\",\n  \"overfed\",\n  \"overfeed\",\n  \"overfill\",\n  \"overflow\",\n  \"overfull\",\n  \"overgrown\",\n  \"overhand\",\n  \"overhang\",\n  \"overhaul\",\n  \"overhead\",\n  \"overhear\",\n  \"overheat\",\n  \"overhung\",\n  \"overjoyed\",\n  \"overkill\",\n  \"overlabor\",\n  \"overlaid\",\n  \"overlap\",\n  \"overlay\",\n  \"overload\",\n  \"overlook\",\n  \"overlord\",\n  \"overlying\",\n  \"overnight\",\n  \"overpass\",\n  \"overpay\",\n  \"overplant\",\n  \"overplay\",\n  \"overpower\",\n  \"overprice\",\n  \"overrate\",\n  \"overreach\",\n  \"overreact\",\n  \"override\",\n  \"overripe\",\n  \"overrule\",\n  \"overrun\",\n  \"overshoot\",\n  \"overshot\",\n  \"oversight\",\n  \"oversized\",\n  \"oversleep\",\n  \"oversold\",\n  \"overspend\",\n  \"overstate\",\n  \"overstay\",\n  \"overstep\",\n  \"overstock\",\n  \"overstuff\",\n  \"oversweet\",\n  \"overtake\",\n  \"overthrow\",\n  \"overtime\",\n  \"overtly\",\n  \"overtone\",\n  \"overture\",\n  \"overturn\",\n  \"overuse\",\n  \"overvalue\",\n  \"overview\",\n  \"overwrite\",\n  \"owl\",\n  \"oxford\",\n  \"oxidant\",\n  \"oxidation\",\n  \"oxidize\",\n  \"oxidizing\",\n  \"oxygen\",\n  \"oxymoron\",\n  \"oyster\",\n  \"ozone\",\n  \"paced\",\n  \"pacemaker\",\n  \"pacific\",\n  \"pacifier\",\n  \"pacifism\",\n  \"pacifist\",\n  \"pacify\",\n  \"padded\",\n  \"padding\",\n  \"paddle\",\n  \"paddling\",\n  \"padlock\",\n  \"pagan\",\n  \"pager\",\n  \"paging\",\n  \"pajamas\",\n  \"palace\",\n  \"palatable\",\n  \"palm\",\n  \"palpable\",\n  \"palpitate\",\n  \"paltry\",\n  \"pampered\",\n  \"pamperer\",\n  \"pampers\",\n  \"pamphlet\",\n  \"panama\",\n  \"pancake\",\n  \"pancreas\",\n  \"panda\",\n  \"pandemic\",\n  \"pang\",\n  \"panhandle\",\n  \"panic\",\n  \"panning\",\n  \"panorama\",\n  \"panoramic\",\n  \"panther\",\n  \"pantomime\",\n  \"pantry\",\n  \"pants\",\n  \"pantyhose\",\n  \"paparazzi\",\n  \"papaya\",\n  \"paper\",\n  \"paprika\",\n  \"papyrus\",\n  \"parabola\",\n  \"parachute\",\n  \"parade\",\n  \"paradox\",\n  \"paragraph\",\n  \"parakeet\",\n  \"paralegal\",\n  \"paralyses\",\n  \"paralysis\",\n  \"paralyze\",\n  \"paramedic\",\n  \"parameter\",\n  \"paramount\",\n  \"parasail\",\n  \"parasite\",\n  \"parasitic\",\n  \"parcel\",\n  \"parched\",\n  \"parchment\",\n  \"pardon\",\n  \"parish\",\n  \"parka\",\n  \"parking\",\n  \"parkway\",\n  \"parlor\",\n  \"parmesan\",\n  \"parole\",\n  \"parrot\",\n  \"parsley\",\n  \"parsnip\",\n  \"partake\",\n  \"parted\",\n  \"parting\",\n  \"partition\",\n  \"partly\",\n  \"partner\",\n  \"partridge\",\n  \"party\",\n  \"passable\",\n  \"passably\",\n  \"passage\",\n  \"passcode\",\n  \"passenger\",\n  \"passerby\",\n  \"passing\",\n  \"passion\",\n  \"passive\",\n  \"passivism\",\n  \"passover\",\n  \"passport\",\n  \"password\",\n  \"pasta\",\n  \"pasted\",\n  \"pastel\",\n  \"pastime\",\n  \"pastor\",\n  \"pastrami\",\n  \"pasture\",\n  \"pasty\",\n  \"patchwork\",\n  \"patchy\",\n  \"paternal\",\n  \"paternity\",\n  \"path\",\n  \"patience\",\n  \"patient\",\n  \"patio\",\n  \"patriarch\",\n  \"patriot\",\n  \"patrol\",\n  \"patronage\",\n  \"patronize\",\n  \"pauper\",\n  \"pavement\",\n  \"paver\",\n  \"pavestone\",\n  \"pavilion\",\n  \"paving\",\n  \"pawing\",\n  \"payable\",\n  \"payback\",\n  \"paycheck\",\n  \"payday\",\n  \"payee\",\n  \"payer\",\n  \"paying\",\n  \"payment\",\n  \"payphone\",\n  \"payroll\",\n  \"pebble\",\n  \"pebbly\",\n  \"pecan\",\n  \"pectin\",\n  \"peculiar\",\n  \"peddling\",\n  \"pediatric\",\n  \"pedicure\",\n  \"pedigree\",\n  \"pedometer\",\n  \"pegboard\",\n  \"pelican\",\n  \"pellet\",\n  \"pelt\",\n  \"pelvis\",\n  \"penalize\",\n  \"penalty\",\n  \"pencil\",\n  \"pendant\",\n  \"pending\",\n  \"penholder\",\n  \"penknife\",\n  \"pennant\",\n  \"penniless\",\n  \"penny\",\n  \"penpal\",\n  \"pension\",\n  \"pentagon\",\n  \"pentagram\",\n  \"pep\",\n  \"perceive\",\n  \"percent\",\n  \"perch\",\n  \"percolate\",\n  \"perennial\",\n  \"perfected\",\n  \"perfectly\",\n  \"perfume\",\n  \"periscope\",\n  \"perish\",\n  \"perjurer\",\n  \"perjury\",\n  \"perkiness\",\n  \"perky\",\n  \"perm\",\n  \"peroxide\",\n  \"perpetual\",\n  \"perplexed\",\n  \"persecute\",\n  \"persevere\",\n  \"persuaded\",\n  \"persuader\",\n  \"pesky\",\n  \"peso\",\n  \"pessimism\",\n  \"pessimist\",\n  \"pester\",\n  \"pesticide\",\n  \"petal\",\n  \"petite\",\n  \"petition\",\n  \"petri\",\n  \"petroleum\",\n  \"petted\",\n  \"petticoat\",\n  \"pettiness\",\n  \"petty\",\n  \"petunia\",\n  \"phantom\",\n  \"phobia\",\n  \"phoenix\",\n  \"phonebook\",\n  \"phoney\",\n  \"phonics\",\n  \"phoniness\",\n  \"phony\",\n  \"phosphate\",\n  \"photo\",\n  \"phrase\",\n  \"phrasing\",\n  \"placard\",\n  \"placate\",\n  \"placidly\",\n  \"plank\",\n  \"planner\",\n  \"plant\",\n  \"plasma\",\n  \"plaster\",\n  \"plastic\",\n  \"plated\",\n  \"platform\",\n  \"plating\",\n  \"platinum\",\n  \"platonic\",\n  \"platter\",\n  \"platypus\",\n  \"plausible\",\n  \"plausibly\",\n  \"playable\",\n  \"playback\",\n  \"player\",\n  \"playful\",\n  \"playgroup\",\n  \"playhouse\",\n  \"playing\",\n  \"playlist\",\n  \"playmaker\",\n  \"playmate\",\n  \"playoff\",\n  \"playpen\",\n  \"playroom\",\n  \"playset\",\n  \"plaything\",\n  \"playtime\",\n  \"plaza\",\n  \"pleading\",\n  \"pleat\",\n  \"pledge\",\n  \"plentiful\",\n  \"plenty\",\n  \"plethora\",\n  \"plexiglas\",\n  \"pliable\",\n  \"plod\",\n  \"plop\",\n  \"plot\",\n  \"plow\",\n  \"ploy\",\n  \"pluck\",\n  \"plug\",\n  \"plunder\",\n  \"plunging\",\n  \"plural\",\n  \"plus\",\n  \"plutonium\",\n  \"plywood\",\n  \"poach\",\n  \"pod\",\n  \"poem\",\n  \"poet\",\n  \"pogo\",\n  \"pointed\",\n  \"pointer\",\n  \"pointing\",\n  \"pointless\",\n  \"pointy\",\n  \"poise\",\n  \"poison\",\n  \"poker\",\n  \"poking\",\n  \"polar\",\n  \"police\",\n  \"policy\",\n  \"polio\",\n  \"polish\",\n  \"politely\",\n  \"polka\",\n  \"polo\",\n  \"polyester\",\n  \"polygon\",\n  \"polygraph\",\n  \"polymer\",\n  \"poncho\",\n  \"pond\",\n  \"pony\",\n  \"popcorn\",\n  \"pope\",\n  \"poplar\",\n  \"popper\",\n  \"poppy\",\n  \"popsicle\",\n  \"populace\",\n  \"popular\",\n  \"populate\",\n  \"porcupine\",\n  \"pork\",\n  \"porous\",\n  \"porridge\",\n  \"portable\",\n  \"portal\",\n  \"portfolio\",\n  \"porthole\",\n  \"portion\",\n  \"portly\",\n  \"portside\",\n  \"poser\",\n  \"posh\",\n  \"posing\",\n  \"possible\",\n  \"possibly\",\n  \"possum\",\n  \"postage\",\n  \"postal\",\n  \"postbox\",\n  \"postcard\",\n  \"posted\",\n  \"poster\",\n  \"posting\",\n  \"postnasal\",\n  \"posture\",\n  \"postwar\",\n  \"pouch\",\n  \"pounce\",\n  \"pouncing\",\n  \"pound\",\n  \"pouring\",\n  \"pout\",\n  \"powdered\",\n  \"powdering\",\n  \"powdery\",\n  \"power\",\n  \"powwow\",\n  \"pox\",\n  \"praising\",\n  \"prance\",\n  \"prancing\",\n  \"pranker\",\n  \"prankish\",\n  \"prankster\",\n  \"prayer\",\n  \"praying\",\n  \"preacher\",\n  \"preaching\",\n  \"preachy\",\n  \"preamble\",\n  \"precinct\",\n  \"precise\",\n  \"precision\",\n  \"precook\",\n  \"precut\",\n  \"predator\",\n  \"predefine\",\n  \"predict\",\n  \"preface\",\n  \"prefix\",\n  \"preflight\",\n  \"preformed\",\n  \"pregame\",\n  \"pregnancy\",\n  \"pregnant\",\n  \"preheated\",\n  \"prelaunch\",\n  \"prelaw\",\n  \"prelude\",\n  \"premiere\",\n  \"premises\",\n  \"premium\",\n  \"prenatal\",\n  \"preoccupy\",\n  \"preorder\",\n  \"prepaid\",\n  \"prepay\",\n  \"preplan\",\n  \"preppy\",\n  \"preschool\",\n  \"prescribe\",\n  \"preseason\",\n  \"preset\",\n  \"preshow\",\n  \"president\",\n  \"presoak\",\n  \"press\",\n  \"presume\",\n  \"presuming\",\n  \"preteen\",\n  \"pretended\",\n  \"pretender\",\n  \"pretense\",\n  \"pretext\",\n  \"pretty\",\n  \"pretzel\",\n  \"prevail\",\n  \"prevalent\",\n  \"prevent\",\n  \"preview\",\n  \"previous\",\n  \"prewar\",\n  \"prewashed\",\n  \"prideful\",\n  \"pried\",\n  \"primal\",\n  \"primarily\",\n  \"primary\",\n  \"primate\",\n  \"primer\",\n  \"primp\",\n  \"princess\",\n  \"print\",\n  \"prior\",\n  \"prism\",\n  \"prison\",\n  \"prissy\",\n  \"pristine\",\n  \"privacy\",\n  \"private\",\n  \"privatize\",\n  \"prize\",\n  \"proactive\",\n  \"probable\",\n  \"probably\",\n  \"probation\",\n  \"probe\",\n  \"probing\",\n  \"probiotic\",\n  \"problem\",\n  \"procedure\",\n  \"process\",\n  \"proclaim\",\n  \"procreate\",\n  \"procurer\",\n  \"prodigal\",\n  \"prodigy\",\n  \"produce\",\n  \"product\",\n  \"profane\",\n  \"profanity\",\n  \"professed\",\n  \"professor\",\n  \"profile\",\n  \"profound\",\n  \"profusely\",\n  \"progeny\",\n  \"prognosis\",\n  \"program\",\n  \"progress\",\n  \"projector\",\n  \"prologue\",\n  \"prolonged\",\n  \"promenade\",\n  \"prominent\",\n  \"promoter\",\n  \"promotion\",\n  \"prompter\",\n  \"promptly\",\n  \"prone\",\n  \"prong\",\n  \"pronounce\",\n  \"pronto\",\n  \"proofing\",\n  \"proofread\",\n  \"proofs\",\n  \"propeller\",\n  \"properly\",\n  \"property\",\n  \"proponent\",\n  \"proposal\",\n  \"propose\",\n  \"props\",\n  \"prorate\",\n  \"protector\",\n  \"protegee\",\n  \"proton\",\n  \"prototype\",\n  \"protozoan\",\n  \"protract\",\n  \"protrude\",\n  \"proud\",\n  \"provable\",\n  \"proved\",\n  \"proven\",\n  \"provided\",\n  \"provider\",\n  \"providing\",\n  \"province\",\n  \"proving\",\n  \"provoke\",\n  \"provoking\",\n  \"provolone\",\n  \"prowess\",\n  \"prowler\",\n  \"prowling\",\n  \"proximity\",\n  \"proxy\",\n  \"prozac\",\n  \"prude\",\n  \"prudishly\",\n  \"prune\",\n  \"pruning\",\n  \"pry\",\n  \"psychic\",\n  \"public\",\n  \"publisher\",\n  \"pucker\",\n  \"pueblo\",\n  \"pug\",\n  \"pull\",\n  \"pulmonary\",\n  \"pulp\",\n  \"pulsate\",\n  \"pulse\",\n  \"pulverize\",\n  \"puma\",\n  \"pumice\",\n  \"pummel\",\n  \"punch\",\n  \"punctual\",\n  \"punctuate\",\n  \"punctured\",\n  \"pungent\",\n  \"punisher\",\n  \"punk\",\n  \"pupil\",\n  \"puppet\",\n  \"puppy\",\n  \"purchase\",\n  \"pureblood\",\n  \"purebred\",\n  \"purely\",\n  \"pureness\",\n  \"purgatory\",\n  \"purge\",\n  \"purging\",\n  \"purifier\",\n  \"purify\",\n  \"purist\",\n  \"puritan\",\n  \"purity\",\n  \"purple\",\n  \"purplish\",\n  \"purposely\",\n  \"purr\",\n  \"purse\",\n  \"pursuable\",\n  \"pursuant\",\n  \"pursuit\",\n  \"purveyor\",\n  \"pushcart\",\n  \"pushchair\",\n  \"pusher\",\n  \"pushiness\",\n  \"pushing\",\n  \"pushover\",\n  \"pushpin\",\n  \"pushup\",\n  \"pushy\",\n  \"putdown\",\n  \"putt\",\n  \"puzzle\",\n  \"puzzling\",\n  \"pyramid\",\n  \"pyromania\",\n  \"python\",\n  \"quack\",\n  \"quadrant\",\n  \"quail\",\n  \"quaintly\",\n  \"quake\",\n  \"quaking\",\n  \"qualified\",\n  \"qualifier\",\n  \"qualify\",\n  \"quality\",\n  \"qualm\",\n  \"quantum\",\n  \"quarrel\",\n  \"quarry\",\n  \"quartered\",\n  \"quarterly\",\n  \"quarters\",\n  \"quartet\",\n  \"quench\",\n  \"query\",\n  \"quicken\",\n  \"quickly\",\n  \"quickness\",\n  \"quicksand\",\n  \"quickstep\",\n  \"quiet\",\n  \"quill\",\n  \"quilt\",\n  \"quintet\",\n  \"quintuple\",\n  \"quirk\",\n  \"quit\",\n  \"quiver\",\n  \"quizzical\",\n  \"quotable\",\n  \"quotation\",\n  \"quote\",\n  \"rabid\",\n  \"race\",\n  \"racing\",\n  \"racism\",\n  \"rack\",\n  \"racoon\",\n  \"radar\",\n  \"radial\",\n  \"radiance\",\n  \"radiantly\",\n  \"radiated\",\n  \"radiation\",\n  \"radiator\",\n  \"radio\",\n  \"radish\",\n  \"raffle\",\n  \"raft\",\n  \"rage\",\n  \"ragged\",\n  \"raging\",\n  \"ragweed\",\n  \"raider\",\n  \"railcar\",\n  \"railing\",\n  \"railroad\",\n  \"railway\",\n  \"raisin\",\n  \"rake\",\n  \"raking\",\n  \"rally\",\n  \"ramble\",\n  \"rambling\",\n  \"ramp\",\n  \"ramrod\",\n  \"ranch\",\n  \"rancidity\",\n  \"random\",\n  \"ranged\",\n  \"ranger\",\n  \"ranging\",\n  \"ranked\",\n  \"ranking\",\n  \"ransack\",\n  \"ranting\",\n  \"rants\",\n  \"rare\",\n  \"rarity\",\n  \"rascal\",\n  \"rash\",\n  \"rasping\",\n  \"ravage\",\n  \"raven\",\n  \"ravine\",\n  \"raving\",\n  \"ravioli\",\n  \"ravishing\",\n  \"reabsorb\",\n  \"reach\",\n  \"reacquire\",\n  \"reaction\",\n  \"reactive\",\n  \"reactor\",\n  \"reaffirm\",\n  \"ream\",\n  \"reanalyze\",\n  \"reappear\",\n  \"reapply\",\n  \"reappoint\",\n  \"reapprove\",\n  \"rearrange\",\n  \"rearview\",\n  \"reason\",\n  \"reassign\",\n  \"reassure\",\n  \"reattach\",\n  \"reawake\",\n  \"rebalance\",\n  \"rebate\",\n  \"rebel\",\n  \"rebirth\",\n  \"reboot\",\n  \"reborn\",\n  \"rebound\",\n  \"rebuff\",\n  \"rebuild\",\n  \"rebuilt\",\n  \"reburial\",\n  \"rebuttal\",\n  \"recall\",\n  \"recant\",\n  \"recapture\",\n  \"recast\",\n  \"recede\",\n  \"recent\",\n  \"recess\",\n  \"recharger\",\n  \"recipient\",\n  \"recital\",\n  \"recite\",\n  \"reckless\",\n  \"reclaim\",\n  \"recliner\",\n  \"reclining\",\n  \"recluse\",\n  \"reclusive\",\n  \"recognize\",\n  \"recoil\",\n  \"recollect\",\n  \"recolor\",\n  \"reconcile\",\n  \"reconfirm\",\n  \"reconvene\",\n  \"recopy\",\n  \"record\",\n  \"recount\",\n  \"recoup\",\n  \"recovery\",\n  \"recreate\",\n  \"rectal\",\n  \"rectangle\",\n  \"rectified\",\n  \"rectify\",\n  \"recycled\",\n  \"recycler\",\n  \"recycling\",\n  \"reemerge\",\n  \"reenact\",\n  \"reenter\",\n  \"reentry\",\n  \"reexamine\",\n  \"referable\",\n  \"referee\",\n  \"reference\",\n  \"refill\",\n  \"refinance\",\n  \"refined\",\n  \"refinery\",\n  \"refining\",\n  \"refinish\",\n  \"reflected\",\n  \"reflector\",\n  \"reflex\",\n  \"reflux\",\n  \"refocus\",\n  \"refold\",\n  \"reforest\",\n  \"reformat\",\n  \"reformed\",\n  \"reformer\",\n  \"reformist\",\n  \"refract\",\n  \"refrain\",\n  \"refreeze\",\n  \"refresh\",\n  \"refried\",\n  \"refueling\",\n  \"refund\",\n  \"refurbish\",\n  \"refurnish\",\n  \"refusal\",\n  \"refuse\",\n  \"refusing\",\n  \"refutable\",\n  \"refute\",\n  \"regain\",\n  \"regalia\",\n  \"regally\",\n  \"reggae\",\n  \"regime\",\n  \"region\",\n  \"register\",\n  \"registrar\",\n  \"registry\",\n  \"regress\",\n  \"regretful\",\n  \"regroup\",\n  \"regular\",\n  \"regulate\",\n  \"regulator\",\n  \"rehab\",\n  \"reheat\",\n  \"rehire\",\n  \"rehydrate\",\n  \"reimburse\",\n  \"reissue\",\n  \"reiterate\",\n  \"rejoice\",\n  \"rejoicing\",\n  \"rejoin\",\n  \"rekindle\",\n  \"relapse\",\n  \"relapsing\",\n  \"relatable\",\n  \"related\",\n  \"relation\",\n  \"relative\",\n  \"relax\",\n  \"relay\",\n  \"relearn\",\n  \"release\",\n  \"relenting\",\n  \"reliable\",\n  \"reliably\",\n  \"reliance\",\n  \"reliant\",\n  \"relic\",\n  \"relieve\",\n  \"relieving\",\n  \"relight\",\n  \"relish\",\n  \"relive\",\n  \"reload\",\n  \"relocate\",\n  \"relock\",\n  \"reluctant\",\n  \"rely\",\n  \"remake\",\n  \"remark\",\n  \"remarry\",\n  \"rematch\",\n  \"remedial\",\n  \"remedy\",\n  \"remember\",\n  \"reminder\",\n  \"remindful\",\n  \"remission\",\n  \"remix\",\n  \"remnant\",\n  \"remodeler\",\n  \"remold\",\n  \"remorse\",\n  \"remote\",\n  \"removable\",\n  \"removal\",\n  \"removed\",\n  \"remover\",\n  \"removing\",\n  \"rename\",\n  \"renderer\",\n  \"rendering\",\n  \"rendition\",\n  \"renegade\",\n  \"renewable\",\n  \"renewably\",\n  \"renewal\",\n  \"renewed\",\n  \"renounce\",\n  \"renovate\",\n  \"renovator\",\n  \"rentable\",\n  \"rental\",\n  \"rented\",\n  \"renter\",\n  \"reoccupy\",\n  \"reoccur\",\n  \"reopen\",\n  \"reorder\",\n  \"repackage\",\n  \"repacking\",\n  \"repaint\",\n  \"repair\",\n  \"repave\",\n  \"repaying\",\n  \"repayment\",\n  \"repeal\",\n  \"repeated\",\n  \"repeater\",\n  \"repent\",\n  \"rephrase\",\n  \"replace\",\n  \"replay\",\n  \"replica\",\n  \"reply\",\n  \"reporter\",\n  \"repose\",\n  \"repossess\",\n  \"repost\",\n  \"repressed\",\n  \"reprimand\",\n  \"reprint\",\n  \"reprise\",\n  \"reproach\",\n  \"reprocess\",\n  \"reproduce\",\n  \"reprogram\",\n  \"reps\",\n  \"reptile\",\n  \"reptilian\",\n  \"repugnant\",\n  \"repulsion\",\n  \"repulsive\",\n  \"repurpose\",\n  \"reputable\",\n  \"reputably\",\n  \"request\",\n  \"require\",\n  \"requisite\",\n  \"reroute\",\n  \"rerun\",\n  \"resale\",\n  \"resample\",\n  \"rescuer\",\n  \"reseal\",\n  \"research\",\n  \"reselect\",\n  \"reseller\",\n  \"resemble\",\n  \"resend\",\n  \"resent\",\n  \"reset\",\n  \"reshape\",\n  \"reshoot\",\n  \"reshuffle\",\n  \"residence\",\n  \"residency\",\n  \"resident\",\n  \"residual\",\n  \"residue\",\n  \"resigned\",\n  \"resilient\",\n  \"resistant\",\n  \"resisting\",\n  \"resize\",\n  \"resolute\",\n  \"resolved\",\n  \"resonant\",\n  \"resonate\",\n  \"resort\",\n  \"resource\",\n  \"respect\",\n  \"resubmit\",\n  \"result\",\n  \"resume\",\n  \"resupply\",\n  \"resurface\",\n  \"resurrect\",\n  \"retail\",\n  \"retainer\",\n  \"retaining\",\n  \"retake\",\n  \"retaliate\",\n  \"retention\",\n  \"rethink\",\n  \"retinal\",\n  \"retired\",\n  \"retiree\",\n  \"retiring\",\n  \"retold\",\n  \"retool\",\n  \"retorted\",\n  \"retouch\",\n  \"retrace\",\n  \"retract\",\n  \"retrain\",\n  \"retread\",\n  \"retreat\",\n  \"retrial\",\n  \"retrieval\",\n  \"retriever\",\n  \"retry\",\n  \"return\",\n  \"retying\",\n  \"retype\",\n  \"reunion\",\n  \"reunite\",\n  \"reusable\",\n  \"reuse\",\n  \"reveal\",\n  \"reveler\",\n  \"revenge\",\n  \"revenue\",\n  \"reverb\",\n  \"revered\",\n  \"reverence\",\n  \"reverend\",\n  \"reversal\",\n  \"reverse\",\n  \"reversing\",\n  \"reversion\",\n  \"revert\",\n  \"revisable\",\n  \"revise\",\n  \"revision\",\n  \"revisit\",\n  \"revivable\",\n  \"revival\",\n  \"reviver\",\n  \"reviving\",\n  \"revocable\",\n  \"revoke\",\n  \"revolt\",\n  \"revolver\",\n  \"revolving\",\n  \"reward\",\n  \"rewash\",\n  \"rewind\",\n  \"rewire\",\n  \"reword\",\n  \"rework\",\n  \"rewrap\",\n  \"rewrite\",\n  \"rhyme\",\n  \"ribbon\",\n  \"ribcage\",\n  \"rice\",\n  \"riches\",\n  \"richly\",\n  \"richness\",\n  \"rickety\",\n  \"ricotta\",\n  \"riddance\",\n  \"ridden\",\n  \"ride\",\n  \"riding\",\n  \"rifling\",\n  \"rift\",\n  \"rigging\",\n  \"rigid\",\n  \"rigor\",\n  \"rimless\",\n  \"rimmed\",\n  \"rind\",\n  \"rink\",\n  \"rinse\",\n  \"rinsing\",\n  \"riot\",\n  \"ripcord\",\n  \"ripeness\",\n  \"ripening\",\n  \"ripping\",\n  \"ripple\",\n  \"rippling\",\n  \"riptide\",\n  \"rise\",\n  \"rising\",\n  \"risk\",\n  \"risotto\",\n  \"ritalin\",\n  \"ritzy\",\n  \"rival\",\n  \"riverbank\",\n  \"riverbed\",\n  \"riverboat\",\n  \"riverside\",\n  \"riveter\",\n  \"riveting\",\n  \"roamer\",\n  \"roaming\",\n  \"roast\",\n  \"robbing\",\n  \"robe\",\n  \"robin\",\n  \"robotics\",\n  \"robust\",\n  \"rockband\",\n  \"rocker\",\n  \"rocket\",\n  \"rockfish\",\n  \"rockiness\",\n  \"rocking\",\n  \"rocklike\",\n  \"rockslide\",\n  \"rockstar\",\n  \"rocky\",\n  \"rogue\",\n  \"roman\",\n  \"romp\",\n  \"rope\",\n  \"roping\",\n  \"roster\",\n  \"rosy\",\n  \"rotten\",\n  \"rotting\",\n  \"rotunda\",\n  \"roulette\",\n  \"rounding\",\n  \"roundish\",\n  \"roundness\",\n  \"roundup\",\n  \"roundworm\",\n  \"routine\",\n  \"routing\",\n  \"rover\",\n  \"roving\",\n  \"royal\",\n  \"rubbed\",\n  \"rubber\",\n  \"rubbing\",\n  \"rubble\",\n  \"rubdown\",\n  \"ruby\",\n  \"ruckus\",\n  \"rudder\",\n  \"rug\",\n  \"ruined\",\n  \"rule\",\n  \"rumble\",\n  \"rumbling\",\n  \"rummage\",\n  \"rumor\",\n  \"runaround\",\n  \"rundown\",\n  \"runner\",\n  \"running\",\n  \"runny\",\n  \"runt\",\n  \"runway\",\n  \"rupture\",\n  \"rural\",\n  \"ruse\",\n  \"rush\",\n  \"rust\",\n  \"rut\",\n  \"sabbath\",\n  \"sabotage\",\n  \"sacrament\",\n  \"sacred\",\n  \"sacrifice\",\n  \"sadden\",\n  \"saddlebag\",\n  \"saddled\",\n  \"saddling\",\n  \"sadly\",\n  \"sadness\",\n  \"safari\",\n  \"safeguard\",\n  \"safehouse\",\n  \"safely\",\n  \"safeness\",\n  \"saffron\",\n  \"saga\",\n  \"sage\",\n  \"sagging\",\n  \"saggy\",\n  \"said\",\n  \"saint\",\n  \"sake\",\n  \"salad\",\n  \"salami\",\n  \"salaried\",\n  \"salary\",\n  \"saline\",\n  \"salon\",\n  \"saloon\",\n  \"salsa\",\n  \"salt\",\n  \"salutary\",\n  \"salute\",\n  \"salvage\",\n  \"salvaging\",\n  \"salvation\",\n  \"same\",\n  \"sample\",\n  \"sampling\",\n  \"sanction\",\n  \"sanctity\",\n  \"sanctuary\",\n  \"sandal\",\n  \"sandbag\",\n  \"sandbank\",\n  \"sandbar\",\n  \"sandblast\",\n  \"sandbox\",\n  \"sanded\",\n  \"sandfish\",\n  \"sanding\",\n  \"sandlot\",\n  \"sandpaper\",\n  \"sandpit\",\n  \"sandstone\",\n  \"sandstorm\",\n  \"sandworm\",\n  \"sandy\",\n  \"sanitary\",\n  \"sanitizer\",\n  \"sank\",\n  \"santa\",\n  \"sapling\",\n  \"sappiness\",\n  \"sappy\",\n  \"sarcasm\",\n  \"sarcastic\",\n  \"sardine\",\n  \"sash\",\n  \"sasquatch\",\n  \"sassy\",\n  \"satchel\",\n  \"satiable\",\n  \"satin\",\n  \"satirical\",\n  \"satisfied\",\n  \"satisfy\",\n  \"saturate\",\n  \"saturday\",\n  \"sauciness\",\n  \"saucy\",\n  \"sauna\",\n  \"savage\",\n  \"savanna\",\n  \"saved\",\n  \"savings\",\n  \"savior\",\n  \"savor\",\n  \"saxophone\",\n  \"say\",\n  \"scabbed\",\n  \"scabby\",\n  \"scalded\",\n  \"scalding\",\n  \"scale\",\n  \"scaling\",\n  \"scallion\",\n  \"scallop\",\n  \"scalping\",\n  \"scam\",\n  \"scandal\",\n  \"scanner\",\n  \"scanning\",\n  \"scant\",\n  \"scapegoat\",\n  \"scarce\",\n  \"scarcity\",\n  \"scarecrow\",\n  \"scared\",\n  \"scarf\",\n  \"scarily\",\n  \"scariness\",\n  \"scarring\",\n  \"scary\",\n  \"scavenger\",\n  \"scenic\",\n  \"schedule\",\n  \"schematic\",\n  \"scheme\",\n  \"scheming\",\n  \"schilling\",\n  \"schnapps\",\n  \"scholar\",\n  \"science\",\n  \"scientist\",\n  \"scion\",\n  \"scoff\",\n  \"scolding\",\n  \"scone\",\n  \"scoop\",\n  \"scooter\",\n  \"scope\",\n  \"scorch\",\n  \"scorebook\",\n  \"scorecard\",\n  \"scored\",\n  \"scoreless\",\n  \"scorer\",\n  \"scoring\",\n  \"scorn\",\n  \"scorpion\",\n  \"scotch\",\n  \"scoundrel\",\n  \"scoured\",\n  \"scouring\",\n  \"scouting\",\n  \"scouts\",\n  \"scowling\",\n  \"scrabble\",\n  \"scraggly\",\n  \"scrambled\",\n  \"scrambler\",\n  \"scrap\",\n  \"scratch\",\n  \"scrawny\",\n  \"screen\",\n  \"scribble\",\n  \"scribe\",\n  \"scribing\",\n  \"scrimmage\",\n  \"script\",\n  \"scroll\",\n  \"scrooge\",\n  \"scrounger\",\n  \"scrubbed\",\n  \"scrubber\",\n  \"scruffy\",\n  \"scrunch\",\n  \"scrutiny\",\n  \"scuba\",\n  \"scuff\",\n  \"sculptor\",\n  \"sculpture\",\n  \"scurvy\",\n  \"scuttle\",\n  \"secluded\",\n  \"secluding\",\n  \"seclusion\",\n  \"second\",\n  \"secrecy\",\n  \"secret\",\n  \"sectional\",\n  \"sector\",\n  \"secular\",\n  \"securely\",\n  \"security\",\n  \"sedan\",\n  \"sedate\",\n  \"sedation\",\n  \"sedative\",\n  \"sediment\",\n  \"seduce\",\n  \"seducing\",\n  \"segment\",\n  \"seismic\",\n  \"seizing\",\n  \"seldom\",\n  \"selected\",\n  \"selection\",\n  \"selective\",\n  \"selector\",\n  \"self\",\n  \"seltzer\",\n  \"semantic\",\n  \"semester\",\n  \"semicolon\",\n  \"semifinal\",\n  \"seminar\",\n  \"semisoft\",\n  \"semisweet\",\n  \"senate\",\n  \"senator\",\n  \"send\",\n  \"senior\",\n  \"senorita\",\n  \"sensation\",\n  \"sensitive\",\n  \"sensitize\",\n  \"sensually\",\n  \"sensuous\",\n  \"sepia\",\n  \"september\",\n  \"septic\",\n  \"septum\",\n  \"sequel\",\n  \"sequence\",\n  \"sequester\",\n  \"series\",\n  \"sermon\",\n  \"serotonin\",\n  \"serpent\",\n  \"serrated\",\n  \"serve\",\n  \"service\",\n  \"serving\",\n  \"sesame\",\n  \"sessions\",\n  \"setback\",\n  \"setting\",\n  \"settle\",\n  \"settling\",\n  \"setup\",\n  \"sevenfold\",\n  \"seventeen\",\n  \"seventh\",\n  \"seventy\",\n  \"severity\",\n  \"shabby\",\n  \"shack\",\n  \"shaded\",\n  \"shadily\",\n  \"shadiness\",\n  \"shading\",\n  \"shadow\",\n  \"shady\",\n  \"shaft\",\n  \"shakable\",\n  \"shakily\",\n  \"shakiness\",\n  \"shaking\",\n  \"shaky\",\n  \"shale\",\n  \"shallot\",\n  \"shallow\",\n  \"shame\",\n  \"shampoo\",\n  \"shamrock\",\n  \"shank\",\n  \"shanty\",\n  \"shape\",\n  \"shaping\",\n  \"share\",\n  \"sharpener\",\n  \"sharper\",\n  \"sharpie\",\n  \"sharply\",\n  \"sharpness\",\n  \"shawl\",\n  \"sheath\",\n  \"shed\",\n  \"sheep\",\n  \"sheet\",\n  \"shelf\",\n  \"shell\",\n  \"shelter\",\n  \"shelve\",\n  \"shelving\",\n  \"sherry\",\n  \"shield\",\n  \"shifter\",\n  \"shifting\",\n  \"shiftless\",\n  \"shifty\",\n  \"shimmer\",\n  \"shimmy\",\n  \"shindig\",\n  \"shine\",\n  \"shingle\",\n  \"shininess\",\n  \"shining\",\n  \"shiny\",\n  \"ship\",\n  \"shirt\",\n  \"shivering\",\n  \"shock\",\n  \"shone\",\n  \"shoplift\",\n  \"shopper\",\n  \"shopping\",\n  \"shoptalk\",\n  \"shore\",\n  \"shortage\",\n  \"shortcake\",\n  \"shortcut\",\n  \"shorten\",\n  \"shorter\",\n  \"shorthand\",\n  \"shortlist\",\n  \"shortly\",\n  \"shortness\",\n  \"shorts\",\n  \"shortwave\",\n  \"shorty\",\n  \"shout\",\n  \"shove\",\n  \"showbiz\",\n  \"showcase\",\n  \"showdown\",\n  \"shower\",\n  \"showgirl\",\n  \"showing\",\n  \"showman\",\n  \"shown\",\n  \"showoff\",\n  \"showpiece\",\n  \"showplace\",\n  \"showroom\",\n  \"showy\",\n  \"shrank\",\n  \"shrapnel\",\n  \"shredder\",\n  \"shredding\",\n  \"shrewdly\",\n  \"shriek\",\n  \"shrill\",\n  \"shrimp\",\n  \"shrine\",\n  \"shrink\",\n  \"shrivel\",\n  \"shrouded\",\n  \"shrubbery\",\n  \"shrubs\",\n  \"shrug\",\n  \"shrunk\",\n  \"shucking\",\n  \"shudder\",\n  \"shuffle\",\n  \"shuffling\",\n  \"shun\",\n  \"shush\",\n  \"shut\",\n  \"shy\",\n  \"siamese\",\n  \"siberian\",\n  \"sibling\",\n  \"siding\",\n  \"sierra\",\n  \"siesta\",\n  \"sift\",\n  \"sighing\",\n  \"silenced\",\n  \"silencer\",\n  \"silent\",\n  \"silica\",\n  \"silicon\",\n  \"silk\",\n  \"silliness\",\n  \"silly\",\n  \"silo\",\n  \"silt\",\n  \"silver\",\n  \"similarly\",\n  \"simile\",\n  \"simmering\",\n  \"simple\",\n  \"simplify\",\n  \"simply\",\n  \"sincere\",\n  \"sincerity\",\n  \"singer\",\n  \"singing\",\n  \"single\",\n  \"singular\",\n  \"sinister\",\n  \"sinless\",\n  \"sinner\",\n  \"sinuous\",\n  \"sip\",\n  \"siren\",\n  \"sister\",\n  \"sitcom\",\n  \"sitter\",\n  \"sitting\",\n  \"situated\",\n  \"situation\",\n  \"sixfold\",\n  \"sixteen\",\n  \"sixth\",\n  \"sixties\",\n  \"sixtieth\",\n  \"sixtyfold\",\n  \"sizable\",\n  \"sizably\",\n  \"size\",\n  \"sizing\",\n  \"sizzle\",\n  \"sizzling\",\n  \"skater\",\n  \"skating\",\n  \"skedaddle\",\n  \"skeletal\",\n  \"skeleton\",\n  \"skeptic\",\n  \"sketch\",\n  \"skewed\",\n  \"skewer\",\n  \"skid\",\n  \"skied\",\n  \"skier\",\n  \"skies\",\n  \"skiing\",\n  \"skilled\",\n  \"skillet\",\n  \"skillful\",\n  \"skimmed\",\n  \"skimmer\",\n  \"skimming\",\n  \"skimpily\",\n  \"skincare\",\n  \"skinhead\",\n  \"skinless\",\n  \"skinning\",\n  \"skinny\",\n  \"skintight\",\n  \"skipper\",\n  \"skipping\",\n  \"skirmish\",\n  \"skirt\",\n  \"skittle\",\n  \"skydiver\",\n  \"skylight\",\n  \"skyline\",\n  \"skype\",\n  \"skyrocket\",\n  \"skyward\",\n  \"slab\",\n  \"slacked\",\n  \"slacker\",\n  \"slacking\",\n  \"slackness\",\n  \"slacks\",\n  \"slain\",\n  \"slam\",\n  \"slander\",\n  \"slang\",\n  \"slapping\",\n  \"slapstick\",\n  \"slashed\",\n  \"slashing\",\n  \"slate\",\n  \"slather\",\n  \"slaw\",\n  \"sled\",\n  \"sleek\",\n  \"sleep\",\n  \"sleet\",\n  \"sleeve\",\n  \"slept\",\n  \"sliceable\",\n  \"sliced\",\n  \"slicer\",\n  \"slicing\",\n  \"slick\",\n  \"slider\",\n  \"slideshow\",\n  \"sliding\",\n  \"slighted\",\n  \"slighting\",\n  \"slightly\",\n  \"slimness\",\n  \"slimy\",\n  \"slinging\",\n  \"slingshot\",\n  \"slinky\",\n  \"slip\",\n  \"slit\",\n  \"sliver\",\n  \"slobbery\",\n  \"slogan\",\n  \"sloped\",\n  \"sloping\",\n  \"sloppily\",\n  \"sloppy\",\n  \"slot\",\n  \"slouching\",\n  \"slouchy\",\n  \"sludge\",\n  \"slug\",\n  \"slum\",\n  \"slurp\",\n  \"slush\",\n  \"sly\",\n  \"small\",\n  \"smartly\",\n  \"smartness\",\n  \"smasher\",\n  \"smashing\",\n  \"smashup\",\n  \"smell\",\n  \"smelting\",\n  \"smile\",\n  \"smilingly\",\n  \"smirk\",\n  \"smite\",\n  \"smith\",\n  \"smitten\",\n  \"smock\",\n  \"smog\",\n  \"smoked\",\n  \"smokeless\",\n  \"smokiness\",\n  \"smoking\",\n  \"smoky\",\n  \"smolder\",\n  \"smooth\",\n  \"smother\",\n  \"smudge\",\n  \"smudgy\",\n  \"smuggler\",\n  \"smuggling\",\n  \"smugly\",\n  \"smugness\",\n  \"snack\",\n  \"snagged\",\n  \"snaking\",\n  \"snap\",\n  \"snare\",\n  \"snarl\",\n  \"snazzy\",\n  \"sneak\",\n  \"sneer\",\n  \"sneeze\",\n  \"sneezing\",\n  \"snide\",\n  \"sniff\",\n  \"snippet\",\n  \"snipping\",\n  \"snitch\",\n  \"snooper\",\n  \"snooze\",\n  \"snore\",\n  \"snoring\",\n  \"snorkel\",\n  \"snort\",\n  \"snout\",\n  \"snowbird\",\n  \"snowboard\",\n  \"snowbound\",\n  \"snowcap\",\n  \"snowdrift\",\n  \"snowdrop\",\n  \"snowfall\",\n  \"snowfield\",\n  \"snowflake\",\n  \"snowiness\",\n  \"snowless\",\n  \"snowman\",\n  \"snowplow\",\n  \"snowshoe\",\n  \"snowstorm\",\n  \"snowsuit\",\n  \"snowy\",\n  \"snub\",\n  \"snuff\",\n  \"snuggle\",\n  \"snugly\",\n  \"snugness\",\n  \"speak\",\n  \"spearfish\",\n  \"spearhead\",\n  \"spearman\",\n  \"spearmint\",\n  \"species\",\n  \"specimen\",\n  \"specked\",\n  \"speckled\",\n  \"specks\",\n  \"spectacle\",\n  \"spectator\",\n  \"spectrum\",\n  \"speculate\",\n  \"speech\",\n  \"speed\",\n  \"spellbind\",\n  \"speller\",\n  \"spelling\",\n  \"spendable\",\n  \"spender\",\n  \"spending\",\n  \"spent\",\n  \"spew\",\n  \"sphere\",\n  \"spherical\",\n  \"sphinx\",\n  \"spider\",\n  \"spied\",\n  \"spiffy\",\n  \"spill\",\n  \"spilt\",\n  \"spinach\",\n  \"spinal\",\n  \"spindle\",\n  \"spinner\",\n  \"spinning\",\n  \"spinout\",\n  \"spinster\",\n  \"spiny\",\n  \"spiral\",\n  \"spirited\",\n  \"spiritism\",\n  \"spirits\",\n  \"spiritual\",\n  \"splashed\",\n  \"splashing\",\n  \"splashy\",\n  \"splatter\",\n  \"spleen\",\n  \"splendid\",\n  \"splendor\",\n  \"splice\",\n  \"splicing\",\n  \"splinter\",\n  \"splotchy\",\n  \"splurge\",\n  \"spoilage\",\n  \"spoiled\",\n  \"spoiler\",\n  \"spoiling\",\n  \"spoils\",\n  \"spoken\",\n  \"spokesman\",\n  \"sponge\",\n  \"spongy\",\n  \"sponsor\",\n  \"spoof\",\n  \"spookily\",\n  \"spooky\",\n  \"spool\",\n  \"spoon\",\n  \"spore\",\n  \"sporting\",\n  \"sports\",\n  \"sporty\",\n  \"spotless\",\n  \"spotlight\",\n  \"spotted\",\n  \"spotter\",\n  \"spotting\",\n  \"spotty\",\n  \"spousal\",\n  \"spouse\",\n  \"spout\",\n  \"sprain\",\n  \"sprang\",\n  \"sprawl\",\n  \"spray\",\n  \"spree\",\n  \"sprig\",\n  \"spring\",\n  \"sprinkled\",\n  \"sprinkler\",\n  \"sprint\",\n  \"sprite\",\n  \"sprout\",\n  \"spruce\",\n  \"sprung\",\n  \"spry\",\n  \"spud\",\n  \"spur\",\n  \"sputter\",\n  \"spyglass\",\n  \"squabble\",\n  \"squad\",\n  \"squall\",\n  \"squander\",\n  \"squash\",\n  \"squatted\",\n  \"squatter\",\n  \"squatting\",\n  \"squeak\",\n  \"squealer\",\n  \"squealing\",\n  \"squeamish\",\n  \"squeegee\",\n  \"squeeze\",\n  \"squeezing\",\n  \"squid\",\n  \"squiggle\",\n  \"squiggly\",\n  \"squint\",\n  \"squire\",\n  \"squirt\",\n  \"squishier\",\n  \"squishy\",\n  \"stability\",\n  \"stabilize\",\n  \"stable\",\n  \"stack\",\n  \"stadium\",\n  \"staff\",\n  \"stage\",\n  \"staging\",\n  \"stagnant\",\n  \"stagnate\",\n  \"stainable\",\n  \"stained\",\n  \"staining\",\n  \"stainless\",\n  \"stalemate\",\n  \"staleness\",\n  \"stalling\",\n  \"stallion\",\n  \"stamina\",\n  \"stammer\",\n  \"stamp\",\n  \"stand\",\n  \"stank\",\n  \"staple\",\n  \"stapling\",\n  \"starboard\",\n  \"starch\",\n  \"stardom\",\n  \"stardust\",\n  \"starfish\",\n  \"stargazer\",\n  \"staring\",\n  \"stark\",\n  \"starless\",\n  \"starlet\",\n  \"starlight\",\n  \"starlit\",\n  \"starring\",\n  \"starry\",\n  \"starship\",\n  \"starter\",\n  \"starting\",\n  \"startle\",\n  \"startling\",\n  \"startup\",\n  \"starved\",\n  \"starving\",\n  \"stash\",\n  \"state\",\n  \"static\",\n  \"statistic\",\n  \"statue\",\n  \"stature\",\n  \"status\",\n  \"statute\",\n  \"statutory\",\n  \"staunch\",\n  \"stays\",\n  \"steadfast\",\n  \"steadier\",\n  \"steadily\",\n  \"steadying\",\n  \"steam\",\n  \"steed\",\n  \"steep\",\n  \"steerable\",\n  \"steering\",\n  \"steersman\",\n  \"stegosaur\",\n  \"stellar\",\n  \"stem\",\n  \"stench\",\n  \"stencil\",\n  \"step\",\n  \"stereo\",\n  \"sterile\",\n  \"sterility\",\n  \"sterilize\",\n  \"sterling\",\n  \"sternness\",\n  \"sternum\",\n  \"stew\",\n  \"stick\",\n  \"stiffen\",\n  \"stiffly\",\n  \"stiffness\",\n  \"stifle\",\n  \"stifling\",\n  \"stillness\",\n  \"stilt\",\n  \"stimulant\",\n  \"stimulate\",\n  \"stimuli\",\n  \"stimulus\",\n  \"stinger\",\n  \"stingily\",\n  \"stinging\",\n  \"stingray\",\n  \"stingy\",\n  \"stinking\",\n  \"stinky\",\n  \"stipend\",\n  \"stipulate\",\n  \"stir\",\n  \"stitch\",\n  \"stock\",\n  \"stoic\",\n  \"stoke\",\n  \"stole\",\n  \"stomp\",\n  \"stonewall\",\n  \"stoneware\",\n  \"stonework\",\n  \"stoning\",\n  \"stony\",\n  \"stood\",\n  \"stooge\",\n  \"stool\",\n  \"stoop\",\n  \"stoplight\",\n  \"stoppable\",\n  \"stoppage\",\n  \"stopped\",\n  \"stopper\",\n  \"stopping\",\n  \"stopwatch\",\n  \"storable\",\n  \"storage\",\n  \"storeroom\",\n  \"storewide\",\n  \"storm\",\n  \"stout\",\n  \"stove\",\n  \"stowaway\",\n  \"stowing\",\n  \"straddle\",\n  \"straggler\",\n  \"strained\",\n  \"strainer\",\n  \"straining\",\n  \"strangely\",\n  \"stranger\",\n  \"strangle\",\n  \"strategic\",\n  \"strategy\",\n  \"stratus\",\n  \"straw\",\n  \"stray\",\n  \"streak\",\n  \"stream\",\n  \"street\",\n  \"strength\",\n  \"strenuous\",\n  \"strep\",\n  \"stress\",\n  \"stretch\",\n  \"strewn\",\n  \"stricken\",\n  \"strict\",\n  \"stride\",\n  \"strife\",\n  \"strike\",\n  \"striking\",\n  \"strive\",\n  \"striving\",\n  \"strobe\",\n  \"strode\",\n  \"stroller\",\n  \"strongbox\",\n  \"strongly\",\n  \"strongman\",\n  \"struck\",\n  \"structure\",\n  \"strudel\",\n  \"struggle\",\n  \"strum\",\n  \"strung\",\n  \"strut\",\n  \"stubbed\",\n  \"stubble\",\n  \"stubbly\",\n  \"stubborn\",\n  \"stucco\",\n  \"stuck\",\n  \"student\",\n  \"studied\",\n  \"studio\",\n  \"study\",\n  \"stuffed\",\n  \"stuffing\",\n  \"stuffy\",\n  \"stumble\",\n  \"stumbling\",\n  \"stump\",\n  \"stung\",\n  \"stunned\",\n  \"stunner\",\n  \"stunning\",\n  \"stunt\",\n  \"stupor\",\n  \"sturdily\",\n  \"sturdy\",\n  \"styling\",\n  \"stylishly\",\n  \"stylist\",\n  \"stylized\",\n  \"stylus\",\n  \"suave\",\n  \"subarctic\",\n  \"subatomic\",\n  \"subdivide\",\n  \"subdued\",\n  \"subduing\",\n  \"subfloor\",\n  \"subgroup\",\n  \"subheader\",\n  \"subject\",\n  \"sublease\",\n  \"sublet\",\n  \"sublevel\",\n  \"sublime\",\n  \"submarine\",\n  \"submerge\",\n  \"submersed\",\n  \"submitter\",\n  \"subpanel\",\n  \"subpar\",\n  \"subplot\",\n  \"subprime\",\n  \"subscribe\",\n  \"subscript\",\n  \"subsector\",\n  \"subside\",\n  \"subsiding\",\n  \"subsidize\",\n  \"subsidy\",\n  \"subsoil\",\n  \"subsonic\",\n  \"substance\",\n  \"subsystem\",\n  \"subtext\",\n  \"subtitle\",\n  \"subtly\",\n  \"subtotal\",\n  \"subtract\",\n  \"subtype\",\n  \"suburb\",\n  \"subway\",\n  \"subwoofer\",\n  \"subzero\",\n  \"succulent\",\n  \"such\",\n  \"suction\",\n  \"sudden\",\n  \"sudoku\",\n  \"suds\",\n  \"sufferer\",\n  \"suffering\",\n  \"suffice\",\n  \"suffix\",\n  \"suffocate\",\n  \"suffrage\",\n  \"sugar\",\n  \"suggest\",\n  \"suing\",\n  \"suitable\",\n  \"suitably\",\n  \"suitcase\",\n  \"suitor\",\n  \"sulfate\",\n  \"sulfide\",\n  \"sulfite\",\n  \"sulfur\",\n  \"sulk\",\n  \"sullen\",\n  \"sulphate\",\n  \"sulphuric\",\n  \"sultry\",\n  \"superbowl\",\n  \"superglue\",\n  \"superhero\",\n  \"superior\",\n  \"superjet\",\n  \"superman\",\n  \"supermom\",\n  \"supernova\",\n  \"supervise\",\n  \"supper\",\n  \"supplier\",\n  \"supply\",\n  \"support\",\n  \"supremacy\",\n  \"supreme\",\n  \"surcharge\",\n  \"surely\",\n  \"sureness\",\n  \"surface\",\n  \"surfacing\",\n  \"surfboard\",\n  \"surfer\",\n  \"surgery\",\n  \"surgical\",\n  \"surging\",\n  \"surname\",\n  \"surpass\",\n  \"surplus\",\n  \"surprise\",\n  \"surreal\",\n  \"surrender\",\n  \"surrogate\",\n  \"surround\",\n  \"survey\",\n  \"survival\",\n  \"survive\",\n  \"surviving\",\n  \"survivor\",\n  \"sushi\",\n  \"suspect\",\n  \"suspend\",\n  \"suspense\",\n  \"sustained\",\n  \"sustainer\",\n  \"swab\",\n  \"swaddling\",\n  \"swagger\",\n  \"swampland\",\n  \"swan\",\n  \"swapping\",\n  \"swarm\",\n  \"sway\",\n  \"swear\",\n  \"sweat\",\n  \"sweep\",\n  \"swell\",\n  \"swept\",\n  \"swerve\",\n  \"swifter\",\n  \"swiftly\",\n  \"swiftness\",\n  \"swimmable\",\n  \"swimmer\",\n  \"swimming\",\n  \"swimsuit\",\n  \"swimwear\",\n  \"swinger\",\n  \"swinging\",\n  \"swipe\",\n  \"swirl\",\n  \"switch\",\n  \"swivel\",\n  \"swizzle\",\n  \"swooned\",\n  \"swoop\",\n  \"swoosh\",\n  \"swore\",\n  \"sworn\",\n  \"swung\",\n  \"sycamore\",\n  \"sympathy\",\n  \"symphonic\",\n  \"symphony\",\n  \"symptom\",\n  \"synapse\",\n  \"syndrome\",\n  \"synergy\",\n  \"synopses\",\n  \"synopsis\",\n  \"synthesis\",\n  \"synthetic\",\n  \"syrup\",\n  \"system\",\n  \"t-shirt\",\n  \"tabasco\",\n  \"tabby\",\n  \"tableful\",\n  \"tables\",\n  \"tablet\",\n  \"tableware\",\n  \"tabloid\",\n  \"tackiness\",\n  \"tacking\",\n  \"tackle\",\n  \"tackling\",\n  \"tacky\",\n  \"taco\",\n  \"tactful\",\n  \"tactical\",\n  \"tactics\",\n  \"tactile\",\n  \"tactless\",\n  \"tadpole\",\n  \"taekwondo\",\n  \"tag\",\n  \"tainted\",\n  \"take\",\n  \"taking\",\n  \"talcum\",\n  \"talisman\",\n  \"tall\",\n  \"talon\",\n  \"tamale\",\n  \"tameness\",\n  \"tamer\",\n  \"tamper\",\n  \"tank\",\n  \"tanned\",\n  \"tannery\",\n  \"tanning\",\n  \"tantrum\",\n  \"tapeless\",\n  \"tapered\",\n  \"tapering\",\n  \"tapestry\",\n  \"tapioca\",\n  \"tapping\",\n  \"taps\",\n  \"tarantula\",\n  \"target\",\n  \"tarmac\",\n  \"tarnish\",\n  \"tarot\",\n  \"tartar\",\n  \"tartly\",\n  \"tartness\",\n  \"task\",\n  \"tassel\",\n  \"taste\",\n  \"tastiness\",\n  \"tasting\",\n  \"tasty\",\n  \"tattered\",\n  \"tattle\",\n  \"tattling\",\n  \"tattoo\",\n  \"taunt\",\n  \"tavern\",\n  \"thank\",\n  \"that\",\n  \"thaw\",\n  \"theater\",\n  \"theatrics\",\n  \"thee\",\n  \"theft\",\n  \"theme\",\n  \"theology\",\n  \"theorize\",\n  \"thermal\",\n  \"thermos\",\n  \"thesaurus\",\n  \"these\",\n  \"thesis\",\n  \"thespian\",\n  \"thicken\",\n  \"thicket\",\n  \"thickness\",\n  \"thieving\",\n  \"thievish\",\n  \"thigh\",\n  \"thimble\",\n  \"thing\",\n  \"think\",\n  \"thinly\",\n  \"thinner\",\n  \"thinness\",\n  \"thinning\",\n  \"thirstily\",\n  \"thirsting\",\n  \"thirsty\",\n  \"thirteen\",\n  \"thirty\",\n  \"thong\",\n  \"thorn\",\n  \"those\",\n  \"thousand\",\n  \"thrash\",\n  \"thread\",\n  \"threaten\",\n  \"threefold\",\n  \"thrift\",\n  \"thrill\",\n  \"thrive\",\n  \"thriving\",\n  \"throat\",\n  \"throbbing\",\n  \"throng\",\n  \"throttle\",\n  \"throwaway\",\n  \"throwback\",\n  \"thrower\",\n  \"throwing\",\n  \"thud\",\n  \"thumb\",\n  \"thumping\",\n  \"thursday\",\n  \"thus\",\n  \"thwarting\",\n  \"thyself\",\n  \"tiara\",\n  \"tibia\",\n  \"tidal\",\n  \"tidbit\",\n  \"tidiness\",\n  \"tidings\",\n  \"tidy\",\n  \"tiger\",\n  \"tighten\",\n  \"tightly\",\n  \"tightness\",\n  \"tightrope\",\n  \"tightwad\",\n  \"tigress\",\n  \"tile\",\n  \"tiling\",\n  \"till\",\n  \"tilt\",\n  \"timid\",\n  \"timing\",\n  \"timothy\",\n  \"tinderbox\",\n  \"tinfoil\",\n  \"tingle\",\n  \"tingling\",\n  \"tingly\",\n  \"tinker\",\n  \"tinkling\",\n  \"tinsel\",\n  \"tinsmith\",\n  \"tint\",\n  \"tinwork\",\n  \"tiny\",\n  \"tipoff\",\n  \"tipped\",\n  \"tipper\",\n  \"tipping\",\n  \"tiptoeing\",\n  \"tiptop\",\n  \"tiring\",\n  \"tissue\",\n  \"trace\",\n  \"tracing\",\n  \"track\",\n  \"traction\",\n  \"tractor\",\n  \"trade\",\n  \"trading\",\n  \"tradition\",\n  \"traffic\",\n  \"tragedy\",\n  \"trailing\",\n  \"trailside\",\n  \"train\",\n  \"traitor\",\n  \"trance\",\n  \"tranquil\",\n  \"transfer\",\n  \"transform\",\n  \"translate\",\n  \"transpire\",\n  \"transport\",\n  \"transpose\",\n  \"trapdoor\",\n  \"trapeze\",\n  \"trapezoid\",\n  \"trapped\",\n  \"trapper\",\n  \"trapping\",\n  \"traps\",\n  \"trash\",\n  \"travel\",\n  \"traverse\",\n  \"travesty\",\n  \"tray\",\n  \"treachery\",\n  \"treading\",\n  \"treadmill\",\n  \"treason\",\n  \"treat\",\n  \"treble\",\n  \"tree\",\n  \"trekker\",\n  \"tremble\",\n  \"trembling\",\n  \"tremor\",\n  \"trench\",\n  \"trend\",\n  \"trespass\",\n  \"triage\",\n  \"trial\",\n  \"triangle\",\n  \"tribesman\",\n  \"tribunal\",\n  \"tribune\",\n  \"tributary\",\n  \"tribute\",\n  \"triceps\",\n  \"trickery\",\n  \"trickily\",\n  \"tricking\",\n  \"trickle\",\n  \"trickster\",\n  \"tricky\",\n  \"tricolor\",\n  \"tricycle\",\n  \"trident\",\n  \"tried\",\n  \"trifle\",\n  \"trifocals\",\n  \"trillion\",\n  \"trilogy\",\n  \"trimester\",\n  \"trimmer\",\n  \"trimming\",\n  \"trimness\",\n  \"trinity\",\n  \"trio\",\n  \"tripod\",\n  \"tripping\",\n  \"triumph\",\n  \"trivial\",\n  \"trodden\",\n  \"trolling\",\n  \"trombone\",\n  \"trophy\",\n  \"tropical\",\n  \"tropics\",\n  \"trouble\",\n  \"troubling\",\n  \"trough\",\n  \"trousers\",\n  \"trout\",\n  \"trowel\",\n  \"truce\",\n  \"truck\",\n  \"truffle\",\n  \"trump\",\n  \"trunks\",\n  \"trustable\",\n  \"trustee\",\n  \"trustful\",\n  \"trusting\",\n  \"trustless\",\n  \"truth\",\n  \"try\",\n  \"tubby\",\n  \"tubeless\",\n  \"tubular\",\n  \"tucking\",\n  \"tuesday\",\n  \"tug\",\n  \"tuition\",\n  \"tulip\",\n  \"tumble\",\n  \"tumbling\",\n  \"tummy\",\n  \"turban\",\n  \"turbine\",\n  \"turbofan\",\n  \"turbojet\",\n  \"turbulent\",\n  \"turf\",\n  \"turkey\",\n  \"turmoil\",\n  \"turret\",\n  \"turtle\",\n  \"tusk\",\n  \"tutor\",\n  \"tutu\",\n  \"tux\",\n  \"tweak\",\n  \"tweed\",\n  \"tweet\",\n  \"tweezers\",\n  \"twelve\",\n  \"twentieth\",\n  \"twenty\",\n  \"twerp\",\n  \"twice\",\n  \"twiddle\",\n  \"twiddling\",\n  \"twig\",\n  \"twilight\",\n  \"twine\",\n  \"twins\",\n  \"twirl\",\n  \"twistable\",\n  \"twisted\",\n  \"twister\",\n  \"twisting\",\n  \"twisty\",\n  \"twitch\",\n  \"twitter\",\n  \"tycoon\",\n  \"tying\",\n  \"tyke\",\n  \"udder\",\n  \"ultimate\",\n  \"ultimatum\",\n  \"ultra\",\n  \"umbilical\",\n  \"umbrella\",\n  \"umpire\",\n  \"unabashed\",\n  \"unable\",\n  \"unadorned\",\n  \"unadvised\",\n  \"unafraid\",\n  \"unaired\",\n  \"unaligned\",\n  \"unaltered\",\n  \"unarmored\",\n  \"unashamed\",\n  \"unaudited\",\n  \"unawake\",\n  \"unaware\",\n  \"unbaked\",\n  \"unbalance\",\n  \"unbeaten\",\n  \"unbend\",\n  \"unbent\",\n  \"unbiased\",\n  \"unbitten\",\n  \"unblended\",\n  \"unblessed\",\n  \"unblock\",\n  \"unbolted\",\n  \"unbounded\",\n  \"unboxed\",\n  \"unbraided\",\n  \"unbridle\",\n  \"unbroken\",\n  \"unbuckled\",\n  \"unbundle\",\n  \"unburned\",\n  \"unbutton\",\n  \"uncanny\",\n  \"uncapped\",\n  \"uncaring\",\n  \"uncertain\",\n  \"unchain\",\n  \"unchanged\",\n  \"uncharted\",\n  \"uncheck\",\n  \"uncivil\",\n  \"unclad\",\n  \"unclaimed\",\n  \"unclamped\",\n  \"unclasp\",\n  \"uncle\",\n  \"unclip\",\n  \"uncloak\",\n  \"unclog\",\n  \"unclothed\",\n  \"uncoated\",\n  \"uncoiled\",\n  \"uncolored\",\n  \"uncombed\",\n  \"uncommon\",\n  \"uncooked\",\n  \"uncork\",\n  \"uncorrupt\",\n  \"uncounted\",\n  \"uncouple\",\n  \"uncouth\",\n  \"uncover\",\n  \"uncross\",\n  \"uncrown\",\n  \"uncrushed\",\n  \"uncured\",\n  \"uncurious\",\n  \"uncurled\",\n  \"uncut\",\n  \"undamaged\",\n  \"undated\",\n  \"undaunted\",\n  \"undead\",\n  \"undecided\",\n  \"undefined\",\n  \"underage\",\n  \"underarm\",\n  \"undercoat\",\n  \"undercook\",\n  \"undercut\",\n  \"underdog\",\n  \"underdone\",\n  \"underfed\",\n  \"underfeed\",\n  \"underfoot\",\n  \"undergo\",\n  \"undergrad\",\n  \"underhand\",\n  \"underline\",\n  \"underling\",\n  \"undermine\",\n  \"undermost\",\n  \"underpaid\",\n  \"underpass\",\n  \"underpay\",\n  \"underrate\",\n  \"undertake\",\n  \"undertone\",\n  \"undertook\",\n  \"undertow\",\n  \"underuse\",\n  \"underwear\",\n  \"underwent\",\n  \"underwire\",\n  \"undesired\",\n  \"undiluted\",\n  \"undivided\",\n  \"undocked\",\n  \"undoing\",\n  \"undone\",\n  \"undrafted\",\n  \"undress\",\n  \"undrilled\",\n  \"undusted\",\n  \"undying\",\n  \"unearned\",\n  \"unearth\",\n  \"unease\",\n  \"uneasily\",\n  \"uneasy\",\n  \"uneatable\",\n  \"uneaten\",\n  \"unedited\",\n  \"unelected\",\n  \"unending\",\n  \"unengaged\",\n  \"unenvied\",\n  \"unequal\",\n  \"unethical\",\n  \"uneven\",\n  \"unexpired\",\n  \"unexposed\",\n  \"unfailing\",\n  \"unfair\",\n  \"unfasten\",\n  \"unfazed\",\n  \"unfeeling\",\n  \"unfiled\",\n  \"unfilled\",\n  \"unfitted\",\n  \"unfitting\",\n  \"unfixable\",\n  \"unfixed\",\n  \"unflawed\",\n  \"unfocused\",\n  \"unfold\",\n  \"unfounded\",\n  \"unframed\",\n  \"unfreeze\",\n  \"unfrosted\",\n  \"unfrozen\",\n  \"unfunded\",\n  \"unglazed\",\n  \"ungloved\",\n  \"unglue\",\n  \"ungodly\",\n  \"ungraded\",\n  \"ungreased\",\n  \"unguarded\",\n  \"unguided\",\n  \"unhappily\",\n  \"unhappy\",\n  \"unharmed\",\n  \"unhealthy\",\n  \"unheard\",\n  \"unhearing\",\n  \"unheated\",\n  \"unhelpful\",\n  \"unhidden\",\n  \"unhinge\",\n  \"unhitched\",\n  \"unholy\",\n  \"unhook\",\n  \"unicorn\",\n  \"unicycle\",\n  \"unified\",\n  \"unifier\",\n  \"uniformed\",\n  \"uniformly\",\n  \"unify\",\n  \"unimpeded\",\n  \"uninjured\",\n  \"uninstall\",\n  \"uninsured\",\n  \"uninvited\",\n  \"union\",\n  \"uniquely\",\n  \"unisexual\",\n  \"unison\",\n  \"unissued\",\n  \"unit\",\n  \"universal\",\n  \"universe\",\n  \"unjustly\",\n  \"unkempt\",\n  \"unkind\",\n  \"unknotted\",\n  \"unknowing\",\n  \"unknown\",\n  \"unlaced\",\n  \"unlatch\",\n  \"unlawful\",\n  \"unleaded\",\n  \"unlearned\",\n  \"unleash\",\n  \"unless\",\n  \"unleveled\",\n  \"unlighted\",\n  \"unlikable\",\n  \"unlimited\",\n  \"unlined\",\n  \"unlinked\",\n  \"unlisted\",\n  \"unlit\",\n  \"unlivable\",\n  \"unloaded\",\n  \"unloader\",\n  \"unlocked\",\n  \"unlocking\",\n  \"unlovable\",\n  \"unloved\",\n  \"unlovely\",\n  \"unloving\",\n  \"unluckily\",\n  \"unlucky\",\n  \"unmade\",\n  \"unmanaged\",\n  \"unmanned\",\n  \"unmapped\",\n  \"unmarked\",\n  \"unmasked\",\n  \"unmasking\",\n  \"unmatched\",\n  \"unmindful\",\n  \"unmixable\",\n  \"unmixed\",\n  \"unmolded\",\n  \"unmoral\",\n  \"unmovable\",\n  \"unmoved\",\n  \"unmoving\",\n  \"unnamable\",\n  \"unnamed\",\n  \"unnatural\",\n  \"unneeded\",\n  \"unnerve\",\n  \"unnerving\",\n  \"unnoticed\",\n  \"unopened\",\n  \"unopposed\",\n  \"unpack\",\n  \"unpadded\",\n  \"unpaid\",\n  \"unpainted\",\n  \"unpaired\",\n  \"unpaved\",\n  \"unpeeled\",\n  \"unpicked\",\n  \"unpiloted\",\n  \"unpinned\",\n  \"unplanned\",\n  \"unplanted\",\n  \"unpleased\",\n  \"unpledged\",\n  \"unplowed\",\n  \"unplug\",\n  \"unpopular\",\n  \"unproven\",\n  \"unquote\",\n  \"unranked\",\n  \"unrated\",\n  \"unraveled\",\n  \"unreached\",\n  \"unread\",\n  \"unreal\",\n  \"unreeling\",\n  \"unrefined\",\n  \"unrelated\",\n  \"unrented\",\n  \"unrest\",\n  \"unretired\",\n  \"unrevised\",\n  \"unrigged\",\n  \"unripe\",\n  \"unrivaled\",\n  \"unroasted\",\n  \"unrobed\",\n  \"unroll\",\n  \"unruffled\",\n  \"unruly\",\n  \"unrushed\",\n  \"unsaddle\",\n  \"unsafe\",\n  \"unsaid\",\n  \"unsalted\",\n  \"unsaved\",\n  \"unsavory\",\n  \"unscathed\",\n  \"unscented\",\n  \"unscrew\",\n  \"unsealed\",\n  \"unseated\",\n  \"unsecured\",\n  \"unseeing\",\n  \"unseemly\",\n  \"unseen\",\n  \"unselect\",\n  \"unselfish\",\n  \"unsent\",\n  \"unsettled\",\n  \"unshackle\",\n  \"unshaken\",\n  \"unshaved\",\n  \"unshaven\",\n  \"unsheathe\",\n  \"unshipped\",\n  \"unsightly\",\n  \"unsigned\",\n  \"unskilled\",\n  \"unsliced\",\n  \"unsmooth\",\n  \"unsnap\",\n  \"unsocial\",\n  \"unsoiled\",\n  \"unsold\",\n  \"unsolved\",\n  \"unsorted\",\n  \"unspoiled\",\n  \"unspoken\",\n  \"unstable\",\n  \"unstaffed\",\n  \"unstamped\",\n  \"unsteady\",\n  \"unsterile\",\n  \"unstirred\",\n  \"unstitch\",\n  \"unstopped\",\n  \"unstuck\",\n  \"unstuffed\",\n  \"unstylish\",\n  \"unsubtle\",\n  \"unsubtly\",\n  \"unsuited\",\n  \"unsure\",\n  \"unsworn\",\n  \"untagged\",\n  \"untainted\",\n  \"untaken\",\n  \"untamed\",\n  \"untangled\",\n  \"untapped\",\n  \"untaxed\",\n  \"unthawed\",\n  \"unthread\",\n  \"untidy\",\n  \"untie\",\n  \"until\",\n  \"untimed\",\n  \"untimely\",\n  \"untitled\",\n  \"untoasted\",\n  \"untold\",\n  \"untouched\",\n  \"untracked\",\n  \"untrained\",\n  \"untreated\",\n  \"untried\",\n  \"untrimmed\",\n  \"untrue\",\n  \"untruth\",\n  \"unturned\",\n  \"untwist\",\n  \"untying\",\n  \"unusable\",\n  \"unused\",\n  \"unusual\",\n  \"unvalued\",\n  \"unvaried\",\n  \"unvarying\",\n  \"unveiled\",\n  \"unveiling\",\n  \"unvented\",\n  \"unviable\",\n  \"unvisited\",\n  \"unvocal\",\n  \"unwanted\",\n  \"unwarlike\",\n  \"unwary\",\n  \"unwashed\",\n  \"unwatched\",\n  \"unweave\",\n  \"unwed\",\n  \"unwelcome\",\n  \"unwell\",\n  \"unwieldy\",\n  \"unwilling\",\n  \"unwind\",\n  \"unwired\",\n  \"unwitting\",\n  \"unwomanly\",\n  \"unworldly\",\n  \"unworn\",\n  \"unworried\",\n  \"unworthy\",\n  \"unwound\",\n  \"unwoven\",\n  \"unwrapped\",\n  \"unwritten\",\n  \"unzip\",\n  \"upbeat\",\n  \"upchuck\",\n  \"upcoming\",\n  \"upcountry\",\n  \"update\",\n  \"upfront\",\n  \"upgrade\",\n  \"upheaval\",\n  \"upheld\",\n  \"uphill\",\n  \"uphold\",\n  \"uplifted\",\n  \"uplifting\",\n  \"upload\",\n  \"upon\",\n  \"upper\",\n  \"upright\",\n  \"uprising\",\n  \"upriver\",\n  \"uproar\",\n  \"uproot\",\n  \"upscale\",\n  \"upside\",\n  \"upstage\",\n  \"upstairs\",\n  \"upstart\",\n  \"upstate\",\n  \"upstream\",\n  \"upstroke\",\n  \"upswing\",\n  \"uptake\",\n  \"uptight\",\n  \"uptown\",\n  \"upturned\",\n  \"upward\",\n  \"upwind\",\n  \"uranium\",\n  \"urban\",\n  \"urchin\",\n  \"urethane\",\n  \"urgency\",\n  \"urgent\",\n  \"urging\",\n  \"urologist\",\n  \"urology\",\n  \"usable\",\n  \"usage\",\n  \"useable\",\n  \"used\",\n  \"uselessly\",\n  \"user\",\n  \"usher\",\n  \"usual\",\n  \"utensil\",\n  \"utility\",\n  \"utilize\",\n  \"utmost\",\n  \"utopia\",\n  \"utter\",\n  \"vacancy\",\n  \"vacant\",\n  \"vacate\",\n  \"vacation\",\n  \"vagabond\",\n  \"vagrancy\",\n  \"vagrantly\",\n  \"vaguely\",\n  \"vagueness\",\n  \"valiant\",\n  \"valid\",\n  \"valium\",\n  \"valley\",\n  \"valuables\",\n  \"value\",\n  \"vanilla\",\n  \"vanish\",\n  \"vanity\",\n  \"vanquish\",\n  \"vantage\",\n  \"vaporizer\",\n  \"variable\",\n  \"variably\",\n  \"varied\",\n  \"variety\",\n  \"various\",\n  \"varmint\",\n  \"varnish\",\n  \"varsity\",\n  \"varying\",\n  \"vascular\",\n  \"vaseline\",\n  \"vastly\",\n  \"vastness\",\n  \"veal\",\n  \"vegan\",\n  \"veggie\",\n  \"vehicular\",\n  \"velcro\",\n  \"velocity\",\n  \"velvet\",\n  \"vendetta\",\n  \"vending\",\n  \"vendor\",\n  \"veneering\",\n  \"vengeful\",\n  \"venomous\",\n  \"ventricle\",\n  \"venture\",\n  \"venue\",\n  \"venus\",\n  \"verbalize\",\n  \"verbally\",\n  \"verbose\",\n  \"verdict\",\n  \"verify\",\n  \"verse\",\n  \"version\",\n  \"versus\",\n  \"vertebrae\",\n  \"vertical\",\n  \"vertigo\",\n  \"very\",\n  \"vessel\",\n  \"vest\",\n  \"veteran\",\n  \"veto\",\n  \"vexingly\",\n  \"viability\",\n  \"viable\",\n  \"vibes\",\n  \"vice\",\n  \"vicinity\",\n  \"victory\",\n  \"video\",\n  \"viewable\",\n  \"viewer\",\n  \"viewing\",\n  \"viewless\",\n  \"viewpoint\",\n  \"vigorous\",\n  \"village\",\n  \"villain\",\n  \"vindicate\",\n  \"vineyard\",\n  \"vintage\",\n  \"violate\",\n  \"violation\",\n  \"violator\",\n  \"violet\",\n  \"violin\",\n  \"viper\",\n  \"viral\",\n  \"virtual\",\n  \"virtuous\",\n  \"virus\",\n  \"visa\",\n  \"viscosity\",\n  \"viscous\",\n  \"viselike\",\n  \"visible\",\n  \"visibly\",\n  \"vision\",\n  \"visiting\",\n  \"visitor\",\n  \"visor\",\n  \"vista\",\n  \"vitality\",\n  \"vitalize\",\n  \"vitally\",\n  \"vitamins\",\n  \"vivacious\",\n  \"vividly\",\n  \"vividness\",\n  \"vixen\",\n  \"vocalist\",\n  \"vocalize\",\n  \"vocally\",\n  \"vocation\",\n  \"voice\",\n  \"voicing\",\n  \"void\",\n  \"volatile\",\n  \"volley\",\n  \"voltage\",\n  \"volumes\",\n  \"voter\",\n  \"voting\",\n  \"voucher\",\n  \"vowed\",\n  \"vowel\",\n  \"voyage\",\n  \"wackiness\",\n  \"wad\",\n  \"wafer\",\n  \"waffle\",\n  \"waged\",\n  \"wager\",\n  \"wages\",\n  \"waggle\",\n  \"wagon\",\n  \"wake\",\n  \"waking\",\n  \"walk\",\n  \"walmart\",\n  \"walnut\",\n  \"walrus\",\n  \"waltz\",\n  \"wand\",\n  \"wannabe\",\n  \"wanted\",\n  \"wanting\",\n  \"wasabi\",\n  \"washable\",\n  \"washbasin\",\n  \"washboard\",\n  \"washbowl\",\n  \"washcloth\",\n  \"washday\",\n  \"washed\",\n  \"washer\",\n  \"washhouse\",\n  \"washing\",\n  \"washout\",\n  \"washroom\",\n  \"washstand\",\n  \"washtub\",\n  \"wasp\",\n  \"wasting\",\n  \"watch\",\n  \"water\",\n  \"waviness\",\n  \"waving\",\n  \"wavy\",\n  \"whacking\",\n  \"whacky\",\n  \"wham\",\n  \"wharf\",\n  \"wheat\",\n  \"whenever\",\n  \"whiff\",\n  \"whimsical\",\n  \"whinny\",\n  \"whiny\",\n  \"whisking\",\n  \"whoever\",\n  \"whole\",\n  \"whomever\",\n  \"whoopee\",\n  \"whooping\",\n  \"whoops\",\n  \"why\",\n  \"wick\",\n  \"widely\",\n  \"widen\",\n  \"widget\",\n  \"widow\",\n  \"width\",\n  \"wieldable\",\n  \"wielder\",\n  \"wife\",\n  \"wifi\",\n  \"wikipedia\",\n  \"wildcard\",\n  \"wildcat\",\n  \"wilder\",\n  \"wildfire\",\n  \"wildfowl\",\n  \"wildland\",\n  \"wildlife\",\n  \"wildly\",\n  \"wildness\",\n  \"willed\",\n  \"willfully\",\n  \"willing\",\n  \"willow\",\n  \"willpower\",\n  \"wilt\",\n  \"wimp\",\n  \"wince\",\n  \"wincing\",\n  \"wind\",\n  \"wing\",\n  \"winking\",\n  \"winner\",\n  \"winnings\",\n  \"winter\",\n  \"wipe\",\n  \"wired\",\n  \"wireless\",\n  \"wiring\",\n  \"wiry\",\n  \"wisdom\",\n  \"wise\",\n  \"wish\",\n  \"wisplike\",\n  \"wispy\",\n  \"wistful\",\n  \"wizard\",\n  \"wobble\",\n  \"wobbling\",\n  \"wobbly\",\n  \"wok\",\n  \"wolf\",\n  \"wolverine\",\n  \"womanhood\",\n  \"womankind\",\n  \"womanless\",\n  \"womanlike\",\n  \"womanly\",\n  \"womb\",\n  \"woof\",\n  \"wooing\",\n  \"wool\",\n  \"woozy\",\n  \"word\",\n  \"work\",\n  \"worried\",\n  \"worrier\",\n  \"worrisome\",\n  \"worry\",\n  \"worsening\",\n  \"worshiper\",\n  \"worst\",\n  \"wound\",\n  \"woven\",\n  \"wow\",\n  \"wrangle\",\n  \"wrath\",\n  \"wreath\",\n  \"wreckage\",\n  \"wrecker\",\n  \"wrecking\",\n  \"wrench\",\n  \"wriggle\",\n  \"wriggly\",\n  \"wrinkle\",\n  \"wrinkly\",\n  \"wrist\",\n  \"writing\",\n  \"written\",\n  \"wrongdoer\",\n  \"wronged\",\n  \"wrongful\",\n  \"wrongly\",\n  \"wrongness\",\n  \"wrought\",\n  \"xbox\",\n  \"xerox\",\n  \"yahoo\",\n  \"yam\",\n  \"yanking\",\n  \"yapping\",\n  \"yard\",\n  \"yarn\",\n  \"yeah\",\n  \"yearbook\",\n  \"yearling\",\n  \"yearly\",\n  \"yearning\",\n  \"yeast\",\n  \"yelling\",\n  \"yelp\",\n  \"yen\",\n  \"yesterday\",\n  \"yiddish\",\n  \"yield\",\n  \"yin\",\n  \"yippee\",\n  \"yo-yo\",\n  \"yodel\",\n  \"yoga\",\n  \"yogurt\",\n  \"yonder\",\n  \"yoyo\",\n  \"yummy\",\n  \"zap\",\n  \"zealous\",\n  \"zebra\",\n  \"zen\",\n  \"zeppelin\",\n  \"zero\",\n  \"zestfully\",\n  \"zesty\",\n  \"zigzagged\",\n  \"zipfile\",\n  \"zipping\",\n  \"zippy\",\n  \"zips\",\n  \"zit\",\n  \"zodiac\",\n  \"zombie\",\n  \"zone\",\n  \"zoning\",\n  \"zookeeper\",\n  \"zoologist\",\n  \"zoology\",\n  \"zoom\",\n];\n","export class GeneratedPasswordHistory {\n  password: string;\n  date: number;\n\n  constructor(password: string, date: number) {\n    this.password = password;\n    this.date = date;\n  }\n}\n","import { PolicyService } from \"../../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../../admin-console/enums\";\nimport { PasswordGeneratorPolicyOptions } from \"../../../admin-console/models/domain/password-generator-policy-options\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { EFFLongWordList } from \"../../../platform/misc/wordlist\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\n\nimport { GeneratedPasswordHistory } from \"./generated-password-history\";\nimport { PasswordGenerationServiceAbstraction } from \"./password-generation.service.abstraction\";\nimport { PasswordGeneratorOptions } from \"./password-generator-options\";\n\nconst DefaultOptions: PasswordGeneratorOptions = {\n  length: 14,\n  ambiguous: false,\n  number: true,\n  minNumber: 1,\n  uppercase: true,\n  minUppercase: 0,\n  lowercase: true,\n  minLowercase: 0,\n  special: false,\n  minSpecial: 1,\n  type: \"password\",\n  numWords: 3,\n  wordSeparator: \"-\",\n  capitalize: false,\n  includeNumber: false,\n};\n\nconst MaxPasswordsInHistory = 100;\n\nexport class PasswordGenerationService implements PasswordGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private policyService: PolicyService,\n    private stateService: StateService\n  ) {}\n\n  async generatePassword(options: PasswordGeneratorOptions): Promise<string> {\n    // overload defaults with given options\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.type === \"passphrase\") {\n      return this.generatePassphrase(options);\n    }\n\n    // sanitize\n    this.sanitizePasswordLength(o, true);\n\n    const minLength: number = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;\n    if (o.length < minLength) {\n      o.length = minLength;\n    }\n\n    const positions: string[] = [];\n    if (o.lowercase && o.minLowercase > 0) {\n      for (let i = 0; i < o.minLowercase; i++) {\n        positions.push(\"l\");\n      }\n    }\n    if (o.uppercase && o.minUppercase > 0) {\n      for (let i = 0; i < o.minUppercase; i++) {\n        positions.push(\"u\");\n      }\n    }\n    if (o.number && o.minNumber > 0) {\n      for (let i = 0; i < o.minNumber; i++) {\n        positions.push(\"n\");\n      }\n    }\n    if (o.special && o.minSpecial > 0) {\n      for (let i = 0; i < o.minSpecial; i++) {\n        positions.push(\"s\");\n      }\n    }\n    while (positions.length < o.length) {\n      positions.push(\"a\");\n    }\n\n    // shuffle\n    await this.shuffleArray(positions);\n\n    // build out the char sets\n    let allCharSet = \"\";\n\n    let lowercaseCharSet = \"abcdefghijkmnopqrstuvwxyz\";\n    if (o.ambiguous) {\n      lowercaseCharSet += \"l\";\n    }\n    if (o.lowercase) {\n      allCharSet += lowercaseCharSet;\n    }\n\n    let uppercaseCharSet = \"ABCDEFGHJKLMNPQRSTUVWXYZ\";\n    if (o.ambiguous) {\n      uppercaseCharSet += \"IO\";\n    }\n    if (o.uppercase) {\n      allCharSet += uppercaseCharSet;\n    }\n\n    let numberCharSet = \"23456789\";\n    if (o.ambiguous) {\n      numberCharSet += \"01\";\n    }\n    if (o.number) {\n      allCharSet += numberCharSet;\n    }\n\n    const specialCharSet = \"!@#$%^&*\";\n    if (o.special) {\n      allCharSet += specialCharSet;\n    }\n\n    let password = \"\";\n    for (let i = 0; i < o.length; i++) {\n      let positionChars: string;\n      switch (positions[i]) {\n        case \"l\":\n          positionChars = lowercaseCharSet;\n          break;\n        case \"u\":\n          positionChars = uppercaseCharSet;\n          break;\n        case \"n\":\n          positionChars = numberCharSet;\n          break;\n        case \"s\":\n          positionChars = specialCharSet;\n          break;\n        case \"a\":\n          positionChars = allCharSet;\n          break;\n        default:\n          break;\n      }\n\n      const randomCharIndex = await this.cryptoService.randomNumber(0, positionChars.length - 1);\n      password += positionChars.charAt(randomCharIndex);\n    }\n\n    return password;\n  }\n\n  async generatePassphrase(options: PasswordGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.numWords == null || o.numWords <= 2) {\n      o.numWords = DefaultOptions.numWords;\n    }\n    if (o.wordSeparator == null || o.wordSeparator.length === 0 || o.wordSeparator.length > 1) {\n      o.wordSeparator = \" \";\n    }\n    if (o.capitalize == null) {\n      o.capitalize = false;\n    }\n    if (o.includeNumber == null) {\n      o.includeNumber = false;\n    }\n\n    const listLength = EFFLongWordList.length - 1;\n    const wordList = new Array(o.numWords);\n    for (let i = 0; i < o.numWords; i++) {\n      const wordIndex = await this.cryptoService.randomNumber(0, listLength);\n      if (o.capitalize) {\n        wordList[i] = this.capitalize(EFFLongWordList[wordIndex]);\n      } else {\n        wordList[i] = EFFLongWordList[wordIndex];\n      }\n    }\n\n    if (o.includeNumber) {\n      await this.appendRandomNumberToRandomWord(wordList);\n    }\n    return wordList.join(o.wordSeparator);\n  }\n\n  async getOptions(): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let options = await this.stateService.getPasswordGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setPasswordGenerationOptions(options);\n    const enforcedOptions = await this.enforcePasswordGeneratorPoliciesOnOptions(options);\n    options = enforcedOptions[0];\n    return [options, enforcedOptions[1]];\n  }\n\n  async enforcePasswordGeneratorPoliciesOnOptions(\n    options: PasswordGeneratorOptions\n  ): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let enforcedPolicyOptions = await this.getPasswordGeneratorPolicyOptions();\n    if (enforcedPolicyOptions != null) {\n      if (options.length < enforcedPolicyOptions.minLength) {\n        options.length = enforcedPolicyOptions.minLength;\n      }\n\n      if (enforcedPolicyOptions.useUppercase) {\n        options.uppercase = true;\n      }\n\n      if (enforcedPolicyOptions.useLowercase) {\n        options.lowercase = true;\n      }\n\n      if (enforcedPolicyOptions.useNumbers) {\n        options.number = true;\n      }\n\n      if (options.minNumber < enforcedPolicyOptions.numberCount) {\n        options.minNumber = enforcedPolicyOptions.numberCount;\n      }\n\n      if (enforcedPolicyOptions.useSpecial) {\n        options.special = true;\n      }\n\n      if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n        options.minSpecial = enforcedPolicyOptions.specialCount;\n      }\n\n      // Must normalize these fields because the receiving call expects all options to pass the current rules\n      if (options.minSpecial + options.minNumber > options.length) {\n        options.minSpecial = options.length - options.minNumber;\n      }\n\n      if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n        options.numWords = enforcedPolicyOptions.minNumberWords;\n      }\n\n      if (enforcedPolicyOptions.capitalize) {\n        options.capitalize = true;\n      }\n\n      if (enforcedPolicyOptions.includeNumber) {\n        options.includeNumber = true;\n      }\n\n      // Force default type if password/passphrase selected via policy\n      if (\n        enforcedPolicyOptions.defaultType === \"password\" ||\n        enforcedPolicyOptions.defaultType === \"passphrase\"\n      ) {\n        options.type = enforcedPolicyOptions.defaultType;\n      }\n    } else {\n      // UI layer expects an instantiated object to prevent more explicit null checks\n      enforcedPolicyOptions = new PasswordGeneratorPolicyOptions();\n    }\n    return [options, enforcedPolicyOptions];\n  }\n\n  async getPasswordGeneratorPolicyOptions(): Promise<PasswordGeneratorPolicyOptions> {\n    const policies = await this.policyService?.getAll(PolicyType.PasswordGenerator);\n    let enforcedOptions: PasswordGeneratorPolicyOptions = null;\n\n    if (policies == null || policies.length === 0) {\n      return enforcedOptions;\n    }\n\n    policies.forEach((currentPolicy) => {\n      if (!currentPolicy.enabled || currentPolicy.data == null) {\n        return;\n      }\n\n      if (enforcedOptions == null) {\n        enforcedOptions = new PasswordGeneratorPolicyOptions();\n      }\n\n      // Password wins in multi-org collisions\n      if (currentPolicy.data.defaultType != null && enforcedOptions.defaultType !== \"password\") {\n        enforcedOptions.defaultType = currentPolicy.data.defaultType;\n      }\n\n      if (\n        currentPolicy.data.minLength != null &&\n        currentPolicy.data.minLength > enforcedOptions.minLength\n      ) {\n        enforcedOptions.minLength = currentPolicy.data.minLength;\n      }\n\n      if (currentPolicy.data.useUpper) {\n        enforcedOptions.useUppercase = true;\n      }\n\n      if (currentPolicy.data.useLower) {\n        enforcedOptions.useLowercase = true;\n      }\n\n      if (currentPolicy.data.useNumbers) {\n        enforcedOptions.useNumbers = true;\n      }\n\n      if (\n        currentPolicy.data.minNumbers != null &&\n        currentPolicy.data.minNumbers > enforcedOptions.numberCount\n      ) {\n        enforcedOptions.numberCount = currentPolicy.data.minNumbers;\n      }\n\n      if (currentPolicy.data.useSpecial) {\n        enforcedOptions.useSpecial = true;\n      }\n\n      if (\n        currentPolicy.data.minSpecial != null &&\n        currentPolicy.data.minSpecial > enforcedOptions.specialCount\n      ) {\n        enforcedOptions.specialCount = currentPolicy.data.minSpecial;\n      }\n\n      if (\n        currentPolicy.data.minNumberWords != null &&\n        currentPolicy.data.minNumberWords > enforcedOptions.minNumberWords\n      ) {\n        enforcedOptions.minNumberWords = currentPolicy.data.minNumberWords;\n      }\n\n      if (currentPolicy.data.capitalize) {\n        enforcedOptions.capitalize = true;\n      }\n\n      if (currentPolicy.data.includeNumber) {\n        enforcedOptions.includeNumber = true;\n      }\n    });\n\n    return enforcedOptions;\n  }\n\n  async saveOptions(options: PasswordGeneratorOptions) {\n    await this.stateService.setPasswordGenerationOptions(options);\n  }\n\n  async getHistory(): Promise<GeneratedPasswordHistory[]> {\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      return new Array<GeneratedPasswordHistory>();\n    }\n\n    if ((await this.stateService.getDecryptedPasswordGenerationHistory()) == null) {\n      const encrypted = await this.stateService.getEncryptedPasswordGenerationHistory();\n      const decrypted = await this.decryptHistory(encrypted);\n      await this.stateService.setDecryptedPasswordGenerationHistory(decrypted);\n    }\n\n    const passwordGenerationHistory =\n      await this.stateService.getDecryptedPasswordGenerationHistory();\n    return passwordGenerationHistory != null\n      ? passwordGenerationHistory\n      : new Array<GeneratedPasswordHistory>();\n  }\n\n  async addHistory(password: string): Promise<void> {\n    // Cannot add new history if no key is available\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      return;\n    }\n\n    const currentHistory = await this.getHistory();\n\n    // Prevent duplicates\n    if (this.matchesPrevious(password, currentHistory)) {\n      return;\n    }\n\n    currentHistory.unshift(new GeneratedPasswordHistory(password, Date.now()));\n\n    // Remove old items.\n    if (currentHistory.length > MaxPasswordsInHistory) {\n      currentHistory.pop();\n    }\n\n    const newHistory = await this.encryptHistory(currentHistory);\n    await this.stateService.setDecryptedPasswordGenerationHistory(currentHistory);\n    return await this.stateService.setEncryptedPasswordGenerationHistory(newHistory);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEncryptedPasswordGenerationHistory(null, { userId: userId });\n    await this.stateService.setDecryptedPasswordGenerationHistory(null, { userId: userId });\n  }\n\n  normalizeOptions(\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) {\n    options.minLowercase = 0;\n    options.minUppercase = 0;\n\n    if (!options.length || options.length < 5) {\n      options.length = 5;\n    } else if (options.length > 128) {\n      options.length = 128;\n    }\n\n    if (options.length < enforcedPolicyOptions.minLength) {\n      options.length = enforcedPolicyOptions.minLength;\n    }\n\n    if (!options.minNumber) {\n      options.minNumber = 0;\n    } else if (options.minNumber > options.length) {\n      options.minNumber = options.length;\n    } else if (options.minNumber > 9) {\n      options.minNumber = 9;\n    }\n\n    if (options.minNumber < enforcedPolicyOptions.numberCount) {\n      options.minNumber = enforcedPolicyOptions.numberCount;\n    }\n\n    if (!options.minSpecial) {\n      options.minSpecial = 0;\n    } else if (options.minSpecial > options.length) {\n      options.minSpecial = options.length;\n    } else if (options.minSpecial > 9) {\n      options.minSpecial = 9;\n    }\n\n    if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n      options.minSpecial = enforcedPolicyOptions.specialCount;\n    }\n\n    if (options.minSpecial + options.minNumber > options.length) {\n      options.minSpecial = options.length - options.minNumber;\n    }\n\n    if (options.numWords == null || options.length < 3) {\n      options.numWords = 3;\n    } else if (options.numWords > 20) {\n      options.numWords = 20;\n    }\n\n    if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n      options.numWords = enforcedPolicyOptions.minNumberWords;\n    }\n\n    if (options.wordSeparator != null && options.wordSeparator.length > 1) {\n      options.wordSeparator = options.wordSeparator[0];\n    }\n\n    this.sanitizePasswordLength(options, false);\n  }\n\n  private capitalize(str: string) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private async appendRandomNumberToRandomWord(wordList: string[]) {\n    if (wordList == null || wordList.length <= 0) {\n      return;\n    }\n    const index = await this.cryptoService.randomNumber(0, wordList.length - 1);\n    const num = await this.cryptoService.randomNumber(0, 9);\n    wordList[index] = wordList[index] + num;\n  }\n\n  private async encryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const encrypted = await this.cryptoService.encrypt(item.password);\n      return new GeneratedPasswordHistory(encrypted.encryptedString, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private async decryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const decrypted = await this.cryptoService.decryptToUtf8(new EncString(item.password));\n      return new GeneratedPasswordHistory(decrypted, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private matchesPrevious(password: string, history: GeneratedPasswordHistory[]): boolean {\n    if (history == null || history.length === 0) {\n      return false;\n    }\n\n    return history[history.length - 1].password === password;\n  }\n\n  // ref: https://stackoverflow.com/a/12646864/1090359\n  private async shuffleArray(array: string[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = await this.cryptoService.randomNumber(0, i);\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n  }\n\n  private sanitizePasswordLength(options: any, forGeneration: boolean) {\n    let minUppercaseCalc = 0;\n    let minLowercaseCalc = 0;\n    let minNumberCalc: number = options.minNumber;\n    let minSpecialCalc: number = options.minSpecial;\n\n    if (options.uppercase && options.minUppercase <= 0) {\n      minUppercaseCalc = 1;\n    } else if (!options.uppercase) {\n      minUppercaseCalc = 0;\n    }\n\n    if (options.lowercase && options.minLowercase <= 0) {\n      minLowercaseCalc = 1;\n    } else if (!options.lowercase) {\n      minLowercaseCalc = 0;\n    }\n\n    if (options.number && options.minNumber <= 0) {\n      minNumberCalc = 1;\n    } else if (!options.number) {\n      minNumberCalc = 0;\n    }\n\n    if (options.special && options.minSpecial <= 0) {\n      minSpecialCalc = 1;\n    } else if (!options.special) {\n      minSpecialCalc = 0;\n    }\n\n    // This should never happen but is a final safety net\n    if (!options.length || options.length < 1) {\n      options.length = 10;\n    }\n\n    const minLength: number = minUppercaseCalc + minLowercaseCalc + minNumberCalc + minSpecialCalc;\n    // Normalize and Generation both require this modification\n    if (options.length < minLength) {\n      options.length = minLength;\n    }\n\n    // Apply other changes if the options object passed in is for generation\n    if (forGeneration) {\n      options.minUppercase = minUppercaseCalc;\n      options.minLowercase = minLowercaseCalc;\n      options.minNumber = minNumberCalc;\n      options.minSpecial = minSpecialCalc;\n    }\n  }\n}\n","export abstract class IFrameComponent {\n  iframe: HTMLIFrameElement;\n  private connectorLink: HTMLAnchorElement;\n  private parseFunction = this.parseMessage.bind(this);\n\n  constructor(\n    private win: Window,\n    protected webVaultUrl: string,\n    private path: string,\n    private iframeId: string,\n    public successCallback?: (message: string) => any,\n    public errorCallback?: (message: string) => any,\n    public infoCallback?: (message: string) => any\n  ) {\n    this.connectorLink = win.document.createElement(\"a\");\n  }\n\n  stop() {\n    this.sendMessage(\"stop\");\n  }\n\n  start() {\n    this.sendMessage(\"start\");\n  }\n\n  sendMessage(message: any) {\n    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {\n      return;\n    }\n\n    this.iframe.contentWindow.postMessage(message, this.iframe.src);\n  }\n\n  base64Encode(str: string): string {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode((\"0x\" + p1) as any);\n      })\n    );\n  }\n\n  cleanup() {\n    this.win.removeEventListener(\"message\", this.parseFunction, false);\n  }\n\n  protected createParams(data: any, version: number) {\n    return new URLSearchParams({\n      data: this.base64Encode(JSON.stringify(data)),\n      parent: encodeURIComponent(this.win.document.location.href),\n      v: version.toString(),\n    });\n  }\n\n  protected initComponent(params: URLSearchParams): void {\n    this.connectorLink.href = `${this.webVaultUrl}/${this.path}?${params}`;\n    this.iframe = this.win.document.getElementById(this.iframeId) as HTMLIFrameElement;\n    this.iframe.src = this.connectorLink.href;\n\n    this.win.addEventListener(\"message\", this.parseFunction, false);\n  }\n\n  private parseMessage(event: MessageEvent) {\n    if (!this.validMessage(event)) {\n      return;\n    }\n\n    const parts: string[] = event.data.split(\"|\");\n    if (parts[0] === \"success\" && this.successCallback) {\n      this.successCallback(parts[1]);\n    } else if (parts[0] === \"error\" && this.errorCallback) {\n      this.errorCallback(parts[1]);\n    } else if (parts[0] === \"info\" && this.infoCallback) {\n      this.infoCallback(parts[1]);\n    }\n  }\n\n  private validMessage(event: MessageEvent) {\n    if (\n      event.origin == null ||\n      event.origin === \"\" ||\n      event.origin !== (this.connectorLink as any).origin ||\n      event.data == null ||\n      typeof event.data !== \"string\"\n    ) {\n      return false;\n    }\n\n    return (\n      event.data.indexOf(\"success|\") === 0 ||\n      event.data.indexOf(\"error|\") === 0 ||\n      event.data.indexOf(\"info|\") === 0\n    );\n  }\n}\n","import { IFrameComponent } from \"../misc/iframe_component\";\nimport { I18nService } from \"../platform/abstractions/i18n.service\";\n\nexport class CaptchaIFrame extends IFrameComponent {\n  constructor(\n    win: Window,\n    webVaultUrl: string,\n    private i18nService: I18nService,\n    successCallback: (message: string) => any,\n    errorCallback: (message: string) => any,\n    infoCallback: (message: string) => any\n  ) {\n    super(\n      win,\n      webVaultUrl,\n      \"captcha-connector.html\",\n      \"hcaptcha_iframe\",\n      successCallback,\n      errorCallback,\n      (message: string) => {\n        const parsedMessage = JSON.parse(message);\n        if (typeof parsedMessage !== \"string\") {\n          this.iframe.height = parsedMessage.height.toString();\n          this.iframe.width = parsedMessage.width.toString();\n        } else {\n          infoCallback(parsedMessage);\n        }\n      }\n    );\n  }\n\n  init(siteKey: string): void {\n    super.initComponent(\n      this.createParams({ siteKey: siteKey, locale: this.i18nService.translationLocale }, 1)\n    );\n  }\n}\n","import { Directive, Input } from \"@angular/core\";\n\nimport { CaptchaIFrame } from \"@bitwarden/common/auth/captcha-iframe\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\n@Directive()\nexport abstract class CaptchaProtectedComponent {\n  @Input() captchaSiteKey: string = null;\n  captchaToken: string = null;\n  captcha: CaptchaIFrame;\n\n  constructor(\n    protected environmentService: EnvironmentService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async setupCaptcha() {\n    const webVaultUrl = this.environmentService.getWebVaultUrl();\n\n    this.captcha = new CaptchaIFrame(\n      window,\n      webVaultUrl,\n      this.i18nService,\n      (token: string) => {\n        this.captchaToken = token;\n      },\n      (error: string) => {\n        this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), error);\n      },\n      (info: string) => {\n        this.platformUtilsService.showToast(\"info\", this.i18nService.t(\"info\"), info);\n      }\n    );\n  }\n\n  showCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  protected handleCaptchaRequired(response: { captchaSiteKey: string }): boolean {\n    if (Utils.isNullOrWhitespace(response.captchaSiteKey)) {\n      return false;\n    }\n\n    this.captchaSiteKey = response.captchaSiteKey;\n    this.captcha.init(response.captchaSiteKey);\n    return true;\n  }\n}\n","import { CsprngArray } from \"../../types/csprng\";\nimport { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class CryptoFunctionService {\n  pbkdf2: (\n    password: string | Uint8Array,\n    salt: string | Uint8Array,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ) => Promise<Uint8Array>;\n  argon2: (\n    password: string | Uint8Array,\n    salt: string | Uint8Array,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ) => Promise<Uint8Array>;\n  hkdf: (\n    ikm: Uint8Array,\n    salt: string | Uint8Array,\n    info: string | Uint8Array,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ) => Promise<Uint8Array>;\n  hkdfExpand: (\n    prk: Uint8Array,\n    info: string | Uint8Array,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ) => Promise<Uint8Array>;\n  hash: (\n    value: string | Uint8Array,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ) => Promise<Uint8Array>;\n  hmac: (\n    value: Uint8Array,\n    key: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ) => Promise<Uint8Array>;\n  compare: (a: Uint8Array, b: Uint8Array) => Promise<boolean>;\n  hmacFast: (\n    value: Uint8Array | string,\n    key: Uint8Array | string,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ) => Promise<Uint8Array | string>;\n  compareFast: (a: Uint8Array | string, b: Uint8Array | string) => Promise<boolean>;\n  aesEncrypt: (data: Uint8Array, iv: Uint8Array, key: Uint8Array) => Promise<Uint8Array>;\n  aesDecryptFastParameters: (\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ) => DecryptParameters<Uint8Array | string>;\n  aesDecryptFast: (parameters: DecryptParameters<Uint8Array | string>) => Promise<string>;\n  aesDecrypt: (data: Uint8Array, iv: Uint8Array, key: Uint8Array) => Promise<Uint8Array>;\n  rsaEncrypt: (\n    data: Uint8Array,\n    publicKey: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\"\n  ) => Promise<Uint8Array>;\n  rsaDecrypt: (\n    data: Uint8Array,\n    privateKey: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\"\n  ) => Promise<Uint8Array>;\n  rsaExtractPublicKey: (privateKey: Uint8Array) => Promise<Uint8Array>;\n  rsaGenerateKeyPair: (length: 1024 | 2048 | 4096) => Promise<[Uint8Array, Uint8Array]>;\n  /**\n   * Generates a key of the given length suitable for use in AES encryption\n   */\n  aesGenerateKey: (bitLength: 128 | 192 | 256 | 512) => Promise<CsprngArray>;\n  /**\n   * Generates a random array of bytes of the given length. Uses a cryptographically secure random number generator.\n   *\n   * Do not use this for generating encryption keys. Use aesGenerateKey or rsaGenerateKeyPair instead.\n   */\n  randomBytes: (length: number) => Promise<CsprngArray>;\n}\n","export abstract class AppIdService {\n  getAppId: () => Promise<string>;\n  getAnonymousAppId: () => Promise<string>;\n}\n","export abstract class AnonymousHubService {\n  createHubConnection: (token: string) => void;\n  stopHubConnection: () => void;\n}\n","import { UserKey, MasterKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nexport abstract class AuthRequestCryptoServiceAbstraction {\n  setUserKeyAfterDecryptingSharedUserKey: (\n    authReqResponse: AuthRequestResponse,\n    authReqPrivateKey: ArrayBuffer\n  ) => Promise<void>;\n  setKeysAfterDecryptingSharedMasterKeyAndHash: (\n    authReqResponse: AuthRequestResponse,\n    authReqPrivateKey: ArrayBuffer\n  ) => Promise<void>;\n\n  decryptPubKeyEncryptedUserKey: (\n    pubKeyEncryptedUserKey: string,\n    privateKey: ArrayBuffer\n  ) => Promise<UserKey>;\n\n  decryptPubKeyEncryptedMasterKeyAndHash: (\n    pubKeyEncryptedMasterKey: string,\n    pubKeyEncryptedMasterKeyHash: string,\n    privateKey: ArrayBuffer\n  ) => Promise<{ masterKey: MasterKey; masterKeyHash: string }>;\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { IsActiveMatchOptions, Router } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { AnonymousHubService } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { AuthRequestType } from \"@bitwarden/common/auth/enums/auth-request-type\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { AdminAuthRequestStorable } from \"@bitwarden/common/auth/models/domain/admin-auth-req-storable\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { PasswordlessLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { PasswordlessCreateAuthRequest } from \"@bitwarden/common/auth/models/request/passwordless-create-auth.request\";\nimport { AuthRequestResponse } from \"@bitwarden/common/auth/models/response/auth-request.response\";\nimport { HttpStatusCode } from \"@bitwarden/common/enums/http-status-code.enum\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { CaptchaProtectedComponent } from \"./captcha-protected.component\";\n\n// TODO: consider renaming this component something like LoginViaAuthReqComponent\n\nenum State {\n  StandardAuthRequest,\n  AdminAuthRequest,\n}\n\n@Directive()\nexport class LoginWithDeviceComponent\n  extends CaptchaProtectedComponent\n  implements OnInit, OnDestroy\n{\n  private destroy$ = new Subject<void>();\n  userAuthNStatus: AuthenticationStatus;\n  email: string;\n  showResendNotification = false;\n  passwordlessRequest: PasswordlessCreateAuthRequest;\n  fingerprintPhrase: string;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n\n  protected adminApprovalRoute = \"admin-approval-requested\";\n\n  protected StateEnum = State;\n  protected state = State.StandardAuthRequest;\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  private resendTimeout = 12000;\n\n  private authRequestKeyPair: { publicKey: Uint8Array; privateKey: Uint8Array };\n\n  // TODO: in future, go to child components and remove child constructors and let deps fall through to the super class\n  constructor(\n    protected router: Router,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private appIdService: AppIdService,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private apiService: ApiService,\n    private authService: AuthService,\n    private logService: LogService,\n    environmentService: EnvironmentService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private anonymousHubService: AnonymousHubService,\n    private validationService: ValidationService,\n    private stateService: StateService,\n    private loginService: LoginService,\n    private deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    private authReqCryptoService: AuthRequestCryptoServiceAbstraction\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n\n    // TODO: I don't know why this is necessary.\n    // Why would the existence of the email depend on the navigation?\n    const navigation = this.router.getCurrentNavigation();\n    if (navigation) {\n      this.email = this.loginService.getEmail();\n    }\n\n    //gets signalR push notification\n    this.authService\n      .getPushNotificationObs$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((id) => {\n        // Only fires on approval currently\n        this.verifyAndHandleApprovedAuthReq(id);\n      });\n  }\n\n  async ngOnInit() {\n    this.userAuthNStatus = await this.authService.getAuthStatus();\n\n    const matchOptions: IsActiveMatchOptions = {\n      paths: \"exact\",\n      queryParams: \"ignored\",\n      fragment: \"ignored\",\n      matrixParams: \"ignored\",\n    };\n\n    if (this.router.isActive(this.adminApprovalRoute, matchOptions)) {\n      this.state = State.AdminAuthRequest;\n    }\n\n    if (this.state === State.AdminAuthRequest) {\n      // Pull email from state for admin auth reqs b/c it is available\n      // This also prevents it from being lost on refresh as the\n      // login service email does not persist.\n      this.email = await this.stateService.getEmail();\n\n      if (!this.email) {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"userEmailMissing\"));\n        this.router.navigate([\"/login-initiated\"]);\n        return;\n      }\n\n      // We only allow a single admin approval request to be active at a time\n      // so must check state to see if we have an existing one or not\n      const adminAuthReqStorable = await this.stateService.getAdminAuthRequest();\n\n      if (adminAuthReqStorable) {\n        await this.handleExistingAdminAuthRequest(adminAuthReqStorable);\n      } else {\n        // No existing admin auth request; so we need to create one\n        await this.startPasswordlessLogin();\n      }\n    } else {\n      // Standard auth request\n      // TODO: evaluate if we can remove the setting of this.email in the constructor\n      this.email = this.loginService.getEmail();\n\n      if (!this.email) {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"userEmailMissing\"));\n        this.router.navigate([\"/login\"]);\n        return;\n      }\n\n      await this.startPasswordlessLogin();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n    this.anonymousHubService.stopHubConnection();\n  }\n\n  private async handleExistingAdminAuthRequest(adminAuthReqStorable: AdminAuthRequestStorable) {\n    // Note: on login, the SSOLoginStrategy will also call to see an existing admin auth req\n    // has been approved and handle it if so.\n\n    // Regardless, we always retrieve the auth request from the server verify and handle status changes here as well\n    let adminAuthReqResponse: AuthRequestResponse;\n    try {\n      adminAuthReqResponse = await this.apiService.getAuthRequest(adminAuthReqStorable.id);\n    } catch (error) {\n      if (error instanceof ErrorResponse && error.statusCode === HttpStatusCode.NotFound) {\n        return await this.handleExistingAdminAuthReqDeletedOrDenied();\n      }\n    }\n\n    // Request doesn't exist anymore\n    if (!adminAuthReqResponse) {\n      return await this.handleExistingAdminAuthReqDeletedOrDenied();\n    }\n\n    // Re-derive the user's fingerprint phrase\n    // It is important to not use the server's public key here as it could have been compromised via MITM\n    const derivedPublicKeyArrayBuffer = await this.cryptoFunctionService.rsaExtractPublicKey(\n      adminAuthReqStorable.privateKey\n    );\n    this.fingerprintPhrase = (\n      await this.cryptoService.getFingerprint(this.email, derivedPublicKeyArrayBuffer)\n    ).join(\"-\");\n\n    // Request denied\n    if (adminAuthReqResponse.isAnswered && !adminAuthReqResponse.requestApproved) {\n      return await this.handleExistingAdminAuthReqDeletedOrDenied();\n    }\n\n    // Request approved\n    if (adminAuthReqResponse.requestApproved) {\n      return await this.handleApprovedAdminAuthRequest(\n        adminAuthReqResponse,\n        adminAuthReqStorable.privateKey\n      );\n    }\n\n    // Request still pending response from admin\n    // So, create hub connection so that any approvals will be received via push notification\n    this.anonymousHubService.createHubConnection(adminAuthReqStorable.id);\n  }\n\n  private async handleExistingAdminAuthReqDeletedOrDenied() {\n    // clear the admin auth request from state\n    await this.stateService.setAdminAuthRequest(null);\n\n    // start new auth request\n    this.startPasswordlessLogin();\n  }\n\n  private async buildAuthRequest(authRequestType: AuthRequestType) {\n    const authRequestKeyPairArray = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n\n    this.authRequestKeyPair = {\n      publicKey: authRequestKeyPairArray[0],\n      privateKey: authRequestKeyPairArray[1],\n    };\n\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const publicKey = Utils.fromBufferToB64(this.authRequestKeyPair.publicKey);\n    const accessCode = await this.passwordGenerationService.generatePassword({ length: 25 });\n\n    this.fingerprintPhrase = (\n      await this.cryptoService.getFingerprint(this.email, this.authRequestKeyPair.publicKey)\n    ).join(\"-\");\n\n    this.passwordlessRequest = new PasswordlessCreateAuthRequest(\n      this.email,\n      deviceIdentifier,\n      publicKey,\n      authRequestType,\n      accessCode\n    );\n  }\n\n  async startPasswordlessLogin() {\n    this.showResendNotification = false;\n\n    try {\n      let reqResponse: AuthRequestResponse;\n\n      if (this.state === State.AdminAuthRequest) {\n        await this.buildAuthRequest(AuthRequestType.AdminApproval);\n        reqResponse = await this.apiService.postAdminAuthRequest(this.passwordlessRequest);\n\n        const adminAuthReqStorable = new AdminAuthRequestStorable({\n          id: reqResponse.id,\n          privateKey: this.authRequestKeyPair.privateKey,\n        });\n\n        await this.stateService.setAdminAuthRequest(adminAuthReqStorable);\n      } else {\n        await this.buildAuthRequest(AuthRequestType.AuthenticateAndUnlock);\n        reqResponse = await this.apiService.postAuthRequest(this.passwordlessRequest);\n      }\n\n      if (reqResponse.id) {\n        this.anonymousHubService.createHubConnection(reqResponse.id);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    setTimeout(() => {\n      this.showResendNotification = true;\n    }, this.resendTimeout);\n  }\n\n  private async verifyAndHandleApprovedAuthReq(requestId: string) {\n    try {\n      // Retrieve the auth request from server and verify it's approved\n      let authReqResponse: AuthRequestResponse;\n\n      switch (this.state) {\n        case State.StandardAuthRequest:\n          // Unauthed - access code required for user verification\n          authReqResponse = await this.apiService.getAuthResponse(\n            requestId,\n            this.passwordlessRequest.accessCode\n          );\n          break;\n\n        case State.AdminAuthRequest:\n          // Authed - no access code required\n          authReqResponse = await this.apiService.getAuthRequest(requestId);\n          break;\n\n        default:\n          break;\n      }\n\n      if (!authReqResponse.requestApproved) {\n        return;\n      }\n\n      // Approved so proceed:\n\n      // 4 Scenarios to handle for approved auth requests:\n      // Existing flow 1:\n      //  - Anon Login with Device > User is not AuthN > receives approval from device with pubKey(masterKey)\n      //    > decrypt masterKey > must authenticate > gets masterKey(userKey) > decrypt userKey and proceed to vault\n\n      // 3 new flows from TDE:\n      // Flow 2:\n      //  - Post SSO > User is AuthN > SSO login strategy success sets masterKey(userKey) > receives approval from device with pubKey(masterKey)\n      //    > decrypt masterKey > decrypt userKey > establish trust if required > proceed to vault\n      // Flow 3:\n      //  - Post SSO > User is AuthN > Receives approval from device with pubKey(userKey) > decrypt userKey > establish trust if required > proceed to vault\n      // Flow 4:\n      //  - Anon Login with Device > User is not AuthN > receives approval from device with pubKey(userKey)\n      //    > decrypt userKey > must authenticate > set userKey > proceed to vault\n\n      // if user has authenticated via SSO\n      if (this.userAuthNStatus === AuthenticationStatus.Locked) {\n        return await this.handleApprovedAdminAuthRequest(\n          authReqResponse,\n          this.authRequestKeyPair.privateKey\n        );\n      }\n\n      // Flow 1 and 4:\n      const loginAuthResult = await this.loginViaPasswordlessStrategy(requestId, authReqResponse);\n      await this.handlePostLoginNavigation(loginAuthResult);\n    } catch (error) {\n      if (error instanceof ErrorResponse) {\n        let errorRoute = \"/login\";\n        if (this.state === State.AdminAuthRequest) {\n          errorRoute = \"/login-initiated\";\n        }\n\n        this.router.navigate([errorRoute]);\n        this.validationService.showError(error);\n        return;\n      }\n\n      this.logService.error(error);\n    }\n  }\n\n  async handleApprovedAdminAuthRequest(\n    adminAuthReqResponse: AuthRequestResponse,\n    privateKey: ArrayBuffer\n  ) {\n    // See verifyAndHandleApprovedAuthReq(...) for flow details\n    // it's flow 2 or 3 based on presence of masterPasswordHash\n    if (adminAuthReqResponse.masterPasswordHash) {\n      // Flow 2: masterPasswordHash is not null\n      // key is authRequestPublicKey(masterKey) + we have authRequestPublicKey(masterPasswordHash)\n      await this.authReqCryptoService.setKeysAfterDecryptingSharedMasterKeyAndHash(\n        adminAuthReqResponse,\n        privateKey\n      );\n    } else {\n      // Flow 3: masterPasswordHash is null\n      // we can assume key is authRequestPublicKey(userKey) and we can just decrypt with userKey and proceed to vault\n      await this.authReqCryptoService.setUserKeyAfterDecryptingSharedUserKey(\n        adminAuthReqResponse,\n        privateKey\n      );\n    }\n\n    // clear the admin auth request from state so it cannot be used again (it's a one time use)\n    // TODO: this should eventually be enforced via deleting this on the server once it is used\n    await this.stateService.setAdminAuthRequest(null);\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"loginApproved\"));\n\n    // Now that we have a decrypted user key in memory, we can check if we\n    // need to establish trust on the current device\n    await this.deviceTrustCryptoService.trustDeviceIfRequired();\n\n    // TODO: don't forget to use auto enrollment service everywhere we trust device\n\n    await this.handleSuccessfulLoginNavigation();\n  }\n\n  // Authentication helper\n  private async buildPasswordlessLoginCredentials(\n    requestId: string,\n    response: AuthRequestResponse\n  ): Promise<PasswordlessLogInCredentials> {\n    // if masterPasswordHash has a value, we will always receive key as authRequestPublicKey(masterKey) + authRequestPublicKey(masterPasswordHash)\n    // if masterPasswordHash is null, we will always receive key as authRequestPublicKey(userKey)\n    if (response.masterPasswordHash) {\n      const { masterKey, masterKeyHash } =\n        await this.authReqCryptoService.decryptPubKeyEncryptedMasterKeyAndHash(\n          response.key,\n          response.masterPasswordHash,\n          this.authRequestKeyPair.privateKey\n        );\n\n      return new PasswordlessLogInCredentials(\n        this.email,\n        this.passwordlessRequest.accessCode,\n        requestId,\n        null, // no userKey\n        masterKey,\n        masterKeyHash\n      );\n    } else {\n      const userKey = await this.authReqCryptoService.decryptPubKeyEncryptedUserKey(\n        response.key,\n        this.authRequestKeyPair.privateKey\n      );\n      return new PasswordlessLogInCredentials(\n        this.email,\n        this.passwordlessRequest.accessCode,\n        requestId,\n        userKey,\n        null, // no masterKey\n        null // no masterKeyHash\n      );\n    }\n  }\n\n  private async loginViaPasswordlessStrategy(\n    requestId: string,\n    authReqResponse: AuthRequestResponse\n  ): Promise<AuthResult> {\n    // Note: credentials change based on if the authReqResponse.key is a encryptedMasterKey or UserKey\n    const credentials = await this.buildPasswordlessLoginCredentials(requestId, authReqResponse);\n\n    // Note: keys are set by PasswordlessLogInStrategy success handling\n    return await this.authService.logIn(credentials);\n  }\n\n  // Routing logic\n  private async handlePostLoginNavigation(loginResponse: AuthResult) {\n    if (loginResponse.requiresTwoFactor) {\n      if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n        this.onSuccessfulLoginTwoFactorNavigate();\n      } else {\n        this.router.navigate([this.twoFactorRoute]);\n      }\n    } else if (loginResponse.forcePasswordReset != ForceResetPasswordReason.None) {\n      if (this.onSuccessfulLoginForceResetNavigate != null) {\n        this.onSuccessfulLoginForceResetNavigate();\n      } else {\n        this.router.navigate([this.forcePasswordResetRoute]);\n      }\n    } else {\n      await this.handleSuccessfulLoginNavigation();\n    }\n  }\n\n  async setRememberEmailValues() {\n    const rememberEmail = this.loginService.getRememberEmail();\n    const rememberedEmail = this.loginService.getEmail();\n    await this.stateService.setRememberedEmail(rememberEmail ? rememberedEmail : null);\n    this.loginService.clearValues();\n  }\n\n  private async handleSuccessfulLoginNavigation() {\n    if (this.state === State.StandardAuthRequest) {\n      // Only need to set remembered email on standard login with auth req flow\n      await this.setRememberEmailValues();\n    }\n\n    if (this.onSuccessfulLogin != null) {\n      this.onSuccessfulLogin();\n    }\n    if (this.onSuccessfulLoginNavigate != null) {\n      this.onSuccessfulLoginNavigate();\n    } else {\n      this.router.navigate([this.successRoute]);\n    }\n  }\n}\n","import {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\n\nexport abstract class SyncService {\n  syncInProgress: boolean;\n\n  getLastSync: () => Promise<Date>;\n  setLastSync: (date: Date, userId?: string) => Promise<any>;\n  fullSync: (forceSync: boolean, allowThrowOnError?: boolean) => Promise<boolean>;\n  syncUpsertFolder: (notification: SyncFolderNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteFolder: (notification: SyncFolderNotification) => Promise<boolean>;\n  syncUpsertCipher: (notification: SyncCipherNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteCipher: (notification: SyncFolderNotification) => Promise<boolean>;\n  syncUpsertSend: (notification: SyncSendNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteSend: (notification: SyncSendNotification) => Promise<boolean>;\n}\n","<div class=\"login-with-device\">\n  <header>\n    <h1 class=\"login-center\">\n      <span class=\"title\">{{ \"logIn\" | i18n }}</span>\n    </h1>\n  </header>\n  <div class=\"content login-page\">\n    <ng-container *ngIf=\"state == StateEnum.StandardAuthRequest\">\n      <div>\n        <p class=\"lead\">{{ \"loginInitiated\" | i18n }}</p>\n\n        <div>\n          <p>{{ \"notificationSentDevice\" | i18n }}</p>\n\n          <p>\n            {{ \"fingerprintMatchInfo\" | i18n }}\n          </p>\n        </div>\n\n        <div>\n          <b class=\"fingerprint-phrase-header\">{{ \"fingerprintPhraseHeader\" | i18n }}</b>\n          <p class=\"fingerprint-text\">\n            <code>{{ fingerprintPhrase }}</code>\n          </p>\n        </div>\n\n        <div class=\"resend-notification\" *ngIf=\"showResendNotification\">\n          <a (click)=\"startPasswordlessLogin()\">{{ \"resendNotification\" | i18n }}</a>\n        </div>\n\n        <div class=\"footer\">\n          {{ \"loginWithDeviceEnabledInfo\" | i18n }}\n          <a href=\"#\" (click)=\"back()\">{{ \"viewAllLoginOptions\" | i18n }}</a>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"state == StateEnum.AdminAuthRequest\">\n      <div>\n        <p class=\"lead\">{{ \"adminApprovalRequested\" | i18n }}</p>\n\n        <div>\n          <p>{{ \"adminApprovalRequestSentToAdmins\" | i18n }}</p>\n          <p>{{ \"youWillBeNotifiedOnceApproved\" | i18n }}</p>\n        </div>\n\n        <div>\n          <b class=\"fingerprint-phrase-header\">{{ \"fingerprintPhraseHeader\" | i18n }}</b>\n          <p class=\"fingerprint-text\">\n            <code>{{ fingerprintPhrase }}</code>\n          </p>\n        </div>\n\n        <div class=\"footer\">\n          {{ \"troubleLoggingIn\" | i18n }}\n          <a routerLink=\"/login-initiated\">{{ \"viewAllLoginOptions\" | i18n }}</a>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n","import { Location } from \"@angular/common\";\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { LoginWithDeviceComponent as BaseLoginWithDeviceComponent } from \"@bitwarden/angular/auth/components/login-with-device.component\";\nimport { AnonymousHubService } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-login-with-device\",\n  templateUrl: \"login-with-device.component.html\",\n})\nexport class LoginWithDeviceComponent\n  extends BaseLoginWithDeviceComponent\n  implements OnInit, OnDestroy\n{\n  constructor(\n    router: Router,\n    cryptoService: CryptoService,\n    cryptoFunctionService: CryptoFunctionService,\n    appIdService: AppIdService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    apiService: ApiService,\n    authService: AuthService,\n    logService: LogService,\n    environmentService: EnvironmentService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    anonymousHubService: AnonymousHubService,\n    validationService: ValidationService,\n    stateService: StateService,\n    loginService: LoginService,\n    syncService: SyncService,\n    deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    authReqCryptoService: AuthRequestCryptoServiceAbstraction,\n    private location: Location\n  ) {\n    super(\n      router,\n      cryptoService,\n      cryptoFunctionService,\n      appIdService,\n      passwordGenerationService,\n      apiService,\n      authService,\n      logService,\n      environmentService,\n      i18nService,\n      platformUtilsService,\n      anonymousHubService,\n      validationService,\n      stateService,\n      loginService,\n      deviceTrustCryptoService,\n      authReqCryptoService\n    );\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n    };\n  }\n\n  protected back() {\n    this.location.back();\n  }\n}\n","import { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport { UpdateDevicesTrustRequest } from \"../models/request/update-devices-trust.request\";\nimport { ProtectedDeviceResponse } from \"../models/response/protected-device.response\";\n\nexport abstract class DevicesApiServiceAbstraction {\n  getKnownDevice: (email: string, deviceIdentifier: string) => Promise<boolean>;\n\n  getDeviceByIdentifier: (deviceIdentifier: string) => Promise<DeviceResponse>;\n\n  getDevices: () => Promise<ListResponse<DeviceResponse>>;\n\n  updateTrustedDeviceKeys: (\n    deviceIdentifier: string,\n    devicePublicKeyEncryptedUserKey: string,\n    userKeyEncryptedDevicePublicKey: string,\n    deviceKeyEncryptedDevicePrivateKey: string\n  ) => Promise<DeviceResponse>;\n\n  updateTrust: (updateDevicesTrustRequestModel: UpdateDevicesTrustRequest) => Promise<void>;\n\n  getDeviceKeys: (\n    deviceIdentifier: string,\n    secretVerificationRequest: SecretVerificationRequest\n  ) => Promise<ProtectedDeviceResponse>;\n}\n","import { AbstractControl } from \"@angular/forms\";\nexport interface AllValidationErrors {\n  controlName: string;\n  errorName: string;\n}\n\nexport interface FormGroupControls {\n  [key: string]: AbstractControl;\n}\n\nexport abstract class FormValidationErrorsService {\n  getFormValidationErrors: (controls: FormGroupControls) => AllValidationErrors[];\n}\n","import { Directive, ElementRef, NgZone, OnInit, ViewChild } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { take } from \"rxjs/operators\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { PasswordLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport {\n  AllValidationErrors,\n  FormValidationErrorsService,\n} from \"../../platform/abstractions/form-validation-errors.service\";\n\nimport { CaptchaProtectedComponent } from \"./captcha-protected.component\";\n\n@Directive()\nexport class LoginComponent extends CaptchaProtectedComponent implements OnInit {\n  @ViewChild(\"masterPasswordInput\", { static: true }) masterPasswordInput: ElementRef;\n\n  showPassword = false;\n  formPromise: Promise<AuthResult>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n  showLoginWithDevice: boolean;\n  validatedEmail = false;\n  paramEmailSet = false;\n\n  formGroup = this.formBuilder.group({\n    email: [\"\", [Validators.required, Validators.email]],\n    masterPassword: [\n      \"\",\n      [Validators.required, Validators.minLength(Utils.originalMinimumPasswordLength)],\n    ],\n    rememberEmail: [false],\n  });\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n\n  get loggedEmail() {\n    return this.formGroup.value.email;\n  }\n\n  constructor(\n    protected devicesApiService: DevicesApiServiceAbstraction,\n    protected appIdService: AppIdService,\n    protected authService: AuthService,\n    protected router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    protected stateService: StateService,\n    environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected ngZone: NgZone,\n    protected formBuilder: FormBuilder,\n    protected formValidationErrorService: FormValidationErrorsService,\n    protected route: ActivatedRoute,\n    protected loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n  }\n\n  get selfHostedDomain() {\n    return this.environmentService.hasBaseUrl() ? this.environmentService.getWebVaultUrl() : null;\n  }\n\n  async ngOnInit() {\n    this.route?.queryParams.subscribe((params) => {\n      if (params != null) {\n        const queryParamsEmail = params[\"email\"];\n        if (queryParamsEmail != null && queryParamsEmail.indexOf(\"@\") > -1) {\n          this.formGroup.get(\"email\").setValue(queryParamsEmail);\n          this.loginService.setEmail(queryParamsEmail);\n          this.paramEmailSet = true;\n        }\n      }\n    });\n    let email = this.loginService.getEmail();\n\n    if (email == null || email === \"\") {\n      email = await this.stateService.getRememberedEmail();\n    }\n\n    if (!this.paramEmailSet) {\n      this.formGroup.get(\"email\")?.setValue(email ?? \"\");\n    }\n    let rememberEmail = this.loginService.getRememberEmail();\n    if (rememberEmail == null) {\n      rememberEmail = (await this.stateService.getRememberedEmail()) != null;\n    }\n    this.formGroup.get(\"rememberEmail\")?.setValue(rememberEmail);\n  }\n\n  async submit(showToast = true) {\n    const data = this.formGroup.value;\n\n    await this.setupCaptcha();\n\n    this.formGroup.markAllAsTouched();\n\n    //web\n    if (this.formGroup.invalid && !showToast) {\n      return;\n    }\n\n    //desktop, browser; This should be removed once all clients use reactive forms\n    if (this.formGroup.invalid && showToast) {\n      const errorText = this.getErrorToastMessage();\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errorText);\n      return;\n    }\n\n    try {\n      const credentials = new PasswordLogInCredentials(\n        data.email,\n        data.masterPassword,\n        this.captchaToken,\n        null\n      );\n      this.formPromise = this.authService.logIn(credentials);\n      const response = await this.formPromise;\n      this.setFormValues();\n      await this.loginService.saveEmailSettings();\n      if (this.handleCaptchaRequired(response)) {\n        return;\n      } else if (response.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute]);\n        }\n      } else if (response.forcePasswordReset != ForceResetPasswordReason.None) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    if (this.ngZone.isStable) {\n      document.getElementById(\"masterPassword\").focus();\n    } else {\n      this.ngZone.onStable\n        .pipe(take(1))\n        .subscribe(() => document.getElementById(\"masterPassword\").focus());\n    }\n  }\n\n  async startPasswordlessLogin() {\n    this.formGroup.get(\"masterPassword\")?.clearValidators();\n    this.formGroup.get(\"masterPassword\")?.updateValueAndValidity();\n\n    if (!this.formGroup.valid) {\n      return;\n    }\n\n    this.setFormValues();\n    this.router.navigate([\"/login-with-device\"]);\n  }\n\n  async launchSsoBrowser(clientId: string, ssoRedirectUri: string) {\n    await this.saveEmailSettings();\n    // Generate necessary sso params\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n    const state = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, \"sha256\");\n    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n\n    // Save sso params\n    await this.stateService.setSsoState(state);\n    await this.stateService.setSsoCodeVerifier(ssoCodeVerifier);\n\n    // Build URI\n    const webUrl = this.environmentService.getWebVaultUrl();\n\n    // Launch browser\n    this.platformUtilsService.launchUri(\n      webUrl +\n        \"/#/sso?clientId=\" +\n        clientId +\n        \"&redirectUri=\" +\n        encodeURIComponent(ssoRedirectUri) +\n        \"&state=\" +\n        state +\n        \"&codeChallenge=\" +\n        codeChallenge +\n        \"&email=\" +\n        encodeURIComponent(this.formGroup.controls.email.value)\n    );\n  }\n\n  async validateEmail() {\n    this.formGroup.controls.email.markAsTouched();\n    const emailInvalid = this.formGroup.get(\"email\").invalid;\n    if (!emailInvalid) {\n      this.toggleValidateEmail(true);\n      await this.getLoginWithDevice(this.loggedEmail);\n    }\n  }\n\n  toggleValidateEmail(value: boolean) {\n    this.validatedEmail = value;\n    if (!this.validatedEmail) {\n      // Reset master password only when going from validated to not validated\n      // so that autofill can work properly\n      this.formGroup.controls.masterPassword.reset();\n    } else {\n      // Mark MP as untouched so that, when users enter email and hit enter,\n      // the MP field doesn't load with validation errors\n      this.formGroup.controls.masterPassword.markAsUntouched();\n\n      // When email is validated, focus on master password after\n      // waiting for input to be rendered\n      if (this.ngZone.isStable) {\n        this.masterPasswordInput?.nativeElement?.focus();\n      } else {\n        this.ngZone.onStable.pipe(take(1)).subscribe(() => {\n          this.masterPasswordInput?.nativeElement?.focus();\n        });\n      }\n    }\n  }\n\n  setFormValues() {\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n  }\n\n  async saveEmailSettings() {\n    this.setFormValues();\n    await this.loginService.saveEmailSettings();\n  }\n\n  private getErrorToastMessage() {\n    const error: AllValidationErrors = this.formValidationErrorService\n      .getFormValidationErrors(this.formGroup.controls)\n      .shift();\n\n    if (error) {\n      switch (error.errorName) {\n        case \"email\":\n          return this.i18nService.t(\"invalidEmail\");\n        case \"minlength\":\n          return this.i18nService.t(\"masterPasswordMinlength\", Utils.originalMinimumPasswordLength);\n        default:\n          return this.i18nService.t(this.errorTag(error));\n      }\n    }\n\n    return;\n  }\n\n  private errorTag(error: AllValidationErrors): string {\n    const name = error.errorName.charAt(0).toUpperCase() + error.errorName.slice(1);\n    return `${error.controlName}${name}`;\n  }\n\n  async getLoginWithDevice(email: string) {\n    try {\n      const deviceIdentifier = await this.appIdService.getAppId();\n      this.showLoginWithDevice = await this.devicesApiService.getKnownDevice(\n        email,\n        deviceIdentifier\n      );\n    } catch (e) {\n      this.showLoginWithDevice = false;\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <h1 class=\"login-center\">\n      <span class=\"title\">{{ \"logIn\" | i18n }}</span>\n    </h1>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <input id=\"email\" type=\"text\" formControlName=\"email\" [hidden]=\"true\" />\n            <input\n              id=\"rememberEmail\"\n              type=\"checkbox\"\n              formControlName=\"rememberEmail\"\n              [hidden]=\"true\"\n            />\n            <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n            <input\n              id=\"masterPassword\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              class=\"monospaced\"\n              formControlName=\"masterPassword\"\n              appInputVerbatim\n              appAutofocus\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" [hidden]=\"!showCaptcha()\">\n          <iframe\n            id=\"hcaptcha_iframe\"\n            height=\"80\"\n            sandbox=\"allow-scripts allow-same-origin\"\n          ></iframe>\n        </div>\n      </div>\n      <div class=\"box-footer\">\n        <button type=\"button\" class=\"btn link\" routerLink=\"/hint\" (click)=\"setFormValues()\">\n          <b>{{ \"getMasterPasswordHint\" | i18n }}</b>\n        </button>\n      </div>\n    </div>\n    <app-private-mode-warning></app-private-mode-warning>\n    <div class=\"content login-buttons\">\n      <button type=\"submit\" class=\"btn primary block\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\"\n          ><b>{{ \"logInWithMasterPassword\" | i18n }}</b></span\n        >\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n      <div class=\"tw-mb-3\" *ngIf=\"showLoginWithDevice && showPasswordless\">\n        <button type=\"button\" class=\"btn block\" (click)=\"startPasswordlessLogin()\">\n          <span> <i class=\"bwi bwi-mobile\"></i> {{ \"loginWithDevice\" | i18n }} </span>\n        </button>\n      </div>\n      <button type=\"button\" (click)=\"launchSsoBrowser()\" class=\"btn block\">\n        <i class=\"bwi bwi-provider\" aria-hidden=\"true\"></i> {{ \"enterpriseSingleSignOn\" | i18n }}\n      </button>\n      <div class=\"small\">\n        <p class=\"no-margin\">{{ \"loggingInAs\" | i18n }} {{ loggedEmail }}</p>\n        <a routerLink=\"/home\">{{ \"notYou\" | i18n }}</a>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, NgZone } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { LoginComponent as BaseLoginComponent } from \"@bitwarden/angular/auth/components/login.component\";\nimport { FormValidationErrorsService } from \"@bitwarden/angular/platform/abstractions/form-validation-errors.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { flagEnabled } from \"../../platform/flags\";\n\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"login.component.html\",\n})\nexport class LoginComponent extends BaseLoginComponent {\n  showPasswordless = false;\n  constructor(\n    devicesApiService: DevicesApiServiceAbstraction,\n    appIdService: AppIdService,\n    authService: AuthService,\n    router: Router,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected stateService: StateService,\n    protected environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected cryptoFunctionService: CryptoFunctionService,\n    syncService: SyncService,\n    logService: LogService,\n    ngZone: NgZone,\n    formBuilder: FormBuilder,\n    formValidationErrorService: FormValidationErrorsService,\n    route: ActivatedRoute,\n    loginService: LoginService\n  ) {\n    super(\n      devicesApiService,\n      appIdService,\n      authService,\n      router,\n      platformUtilsService,\n      i18nService,\n      stateService,\n      environmentService,\n      passwordGenerationService,\n      cryptoFunctionService,\n      logService,\n      ngZone,\n      formBuilder,\n      formValidationErrorService,\n      route,\n      loginService\n    );\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n    };\n    super.successRoute = \"/tabs/vault\";\n    this.showPasswordless = flagEnabled(\"showPasswordless\");\n\n    if (this.showPasswordless) {\n      this.formGroup.controls.email.setValue(this.loginService.getEmail());\n      this.formGroup.controls.rememberEmail.setValue(this.loginService.getRememberEmail());\n      this.validateEmail();\n    }\n  }\n\n  settings() {\n    this.router.navigate([\"environment\"]);\n  }\n\n  async launchSsoBrowser() {\n    await this.loginService.saveEmailSettings();\n    // Generate necessary sso params\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n\n    const state =\n      (await this.passwordGenerationService.generatePassword(passwordOptions)) +\n      \":clientId=browser\";\n    const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, \"sha256\");\n    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n\n    await this.stateService.setSsoCodeVerifier(codeVerifier);\n    await this.stateService.setSsoState(state);\n\n    let url = this.environmentService.getWebVaultUrl();\n    if (url == null) {\n      url = \"https://vault.bitwarden.com\";\n    }\n\n    const redirectUri = url + \"/sso-connector.html\";\n\n    // Launch browser\n    this.platformUtilsService.launchUri(\n      url +\n        \"/#/sso?clientId=browser\" +\n        \"&redirectUri=\" +\n        encodeURIComponent(redirectUri) +\n        \"&state=\" +\n        state +\n        \"&codeChallenge=\" +\n        codeChallenge +\n        \"&email=\" +\n        encodeURIComponent(this.formGroup.controls.email.value)\n    );\n  }\n}\n","import { CaptchaProtectedRequest } from \"../../auth/models/request/captcha-protected.request\";\nimport { KdfType } from \"../../enums\";\n\nimport { KeysRequest } from \"./keys.request\";\nimport { ReferenceEventRequest } from \"./reference-event.request\";\n\nexport class RegisterRequest implements CaptchaProtectedRequest {\n  masterPasswordHint: string;\n  keys: KeysRequest;\n  token: string;\n  organizationUserId: string;\n\n  constructor(\n    public email: string,\n    public name: string,\n    public masterPasswordHash: string,\n    masterPasswordHint: string,\n    public key: string,\n    public referenceData: ReferenceEventRequest,\n    public captchaResponse: string,\n    public kdf: KdfType,\n    public kdfIterations: number,\n    public kdfMemory?: number,\n    public kdfParallelism?: number\n  ) {\n    this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;\n  }\n}\n","import { AbstractControl, UntypedFormGroup, ValidatorFn } from \"@angular/forms\";\n\nimport { FormGroupControls } from \"../platform/abstractions/form-validation-errors.service\";\n\nexport class InputsFieldMatch {\n  //check to ensure two fields do not have the same value\n  static validateInputsDoesntMatch(matchTo: string, errorMessage: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      if (control.parent && control.parent.controls) {\n        return control?.value === (control?.parent?.controls as FormGroupControls)[matchTo].value\n          ? {\n              inputsMatchError: {\n                message: errorMessage,\n              },\n            }\n          : null;\n      }\n\n      return null;\n    };\n  }\n\n  //check to ensure two fields have the same value\n  static validateInputsMatch(matchTo: string, errorMessage: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      if (control.parent && control.parent.controls) {\n        return control?.value === (control?.parent?.controls as FormGroupControls)[matchTo].value\n          ? null\n          : {\n              inputsDoesntMatchError: {\n                message: errorMessage,\n              },\n            };\n      }\n\n      return null;\n    };\n  }\n\n  //checks the formGroup if two fields have the same value and validation is controlled from either field\n  static validateFormInputsMatch(field: string, fieldMatchTo: string, errorMessage: string) {\n    return (formGroup: UntypedFormGroup) => {\n      const fieldCtrl = formGroup.controls[field];\n      const fieldMatchToCtrl = formGroup.controls[fieldMatchTo];\n\n      if (fieldCtrl.value !== fieldMatchToCtrl.value) {\n        fieldMatchToCtrl.setErrors({\n          inputsDoesntMatchError: {\n            message: errorMessage,\n          },\n        });\n      } else {\n        fieldMatchToCtrl.setErrors(null);\n      }\n    };\n  }\n}\n","import { BreachAccountResponse } from \"../models/response/breach-account.response\";\n\nexport abstract class AuditService {\n  passwordLeaked: (password: string) => Promise<number>;\n  breachedAccounts: (username: string) => Promise<BreachAccountResponse[]>;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { AbstractControl, UntypedFormBuilder, ValidatorFn, Validators } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { PasswordLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { RegisterResponse } from \"@bitwarden/common/auth/models/response/register.response\";\nimport { DEFAULT_KDF_CONFIG, DEFAULT_KDF_TYPE } from \"@bitwarden/common/enums\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { ReferenceEventRequest } from \"@bitwarden/common/models/request/reference-event.request\";\nimport { RegisterRequest } from \"@bitwarden/common/models/request/register.request\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { CaptchaProtectedComponent } from \"../auth/components/captcha-protected.component\";\nimport {\n  AllValidationErrors,\n  FormValidationErrorsService,\n} from \"../platform/abstractions/form-validation-errors.service\";\nimport { PasswordColorText } from \"../shared/components/password-strength/password-strength.component\";\nimport { InputsFieldMatch } from \"../validators/inputsFieldMatch.validator\";\n\n@Directive()\nexport class RegisterComponent extends CaptchaProtectedComponent implements OnInit {\n  @Input() isInTrialFlow = false;\n  @Output() createdAccount = new EventEmitter<string>();\n\n  showPassword = false;\n  formPromise: Promise<RegisterResponse>;\n  referenceData: ReferenceEventRequest;\n  showTerms = true;\n  showErrorSummary = false;\n  passwordStrengthResult: any;\n  characterMinimumMessage: string;\n  minimumLength = Utils.minimumPasswordLength;\n  color: string;\n  text: string;\n\n  formGroup = this.formBuilder.group(\n    {\n      email: [\"\", [Validators.required, Validators.email]],\n      name: [\"\"],\n      masterPassword: [\"\", [Validators.required, Validators.minLength(this.minimumLength)]],\n      confirmMasterPassword: [\"\", [Validators.required, Validators.minLength(this.minimumLength)]],\n      hint: [\n        null,\n        [\n          InputsFieldMatch.validateInputsDoesntMatch(\n            \"masterPassword\",\n            this.i18nService.t(\"hintEqualsPassword\")\n          ),\n        ],\n      ],\n      checkForBreaches: [true],\n      acceptPolicies: [false, [this.acceptPoliciesValidation()]],\n    },\n    {\n      validator: InputsFieldMatch.validateFormInputsMatch(\n        \"masterPassword\",\n        \"confirmMasterPassword\",\n        this.i18nService.t(\"masterPassDoesntMatch\")\n      ),\n    }\n  );\n\n  protected successRoute = \"login\";\n\n  protected accountCreated = false;\n\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected formValidationErrorService: FormValidationErrorsService,\n    protected formBuilder: UntypedFormBuilder,\n    protected authService: AuthService,\n    protected router: Router,\n    i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    environmentService: EnvironmentService,\n    protected logService: LogService,\n    protected auditService: AuditService,\n    protected dialogService: DialogService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.showTerms = !platformUtilsService.isSelfHost();\n    this.characterMinimumMessage = this.i18nService.t(\"characterMinimum\", this.minimumLength);\n  }\n\n  async ngOnInit() {\n    this.setupCaptcha();\n  }\n\n  async submit(showToast = true) {\n    let email = this.formGroup.value.email;\n    email = email.trim().toLowerCase();\n    let name = this.formGroup.value.name;\n    name = name === \"\" ? null : name; // Why do we do this?\n    const masterPassword = this.formGroup.value.masterPassword;\n    try {\n      if (!this.accountCreated) {\n        const registerResponse = await this.registerAccount(\n          await this.buildRegisterRequest(email, masterPassword, name),\n          showToast\n        );\n        if (!registerResponse.successful) {\n          return;\n        }\n        this.captchaBypassToken = registerResponse.captchaBypassToken;\n        this.accountCreated = true;\n      }\n      if (this.isInTrialFlow) {\n        if (!this.accountCreated) {\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"trialAccountCreated\")\n          );\n        }\n        const loginResponse = await this.logIn(email, masterPassword, this.captchaBypassToken);\n        if (loginResponse.captchaRequired) {\n          return;\n        }\n        this.createdAccount.emit(this.formGroup.value.email);\n      } else {\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"newAccountCreated\")\n        );\n        this.router.navigate([this.successRoute], { queryParams: { email: email } });\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  getStrengthResult(result: any) {\n    this.passwordStrengthResult = result;\n  }\n\n  getPasswordScoreText(event: PasswordColorText) {\n    this.color = event.color;\n    this.text = event.text;\n  }\n\n  private getErrorToastMessage() {\n    const error: AllValidationErrors = this.formValidationErrorService\n      .getFormValidationErrors(this.formGroup.controls)\n      .shift();\n\n    if (error) {\n      switch (error.errorName) {\n        case \"email\":\n          return this.i18nService.t(\"invalidEmail\");\n        case \"inputsDoesntMatchError\":\n          return this.i18nService.t(\"masterPassDoesntMatch\");\n        case \"inputsMatchError\":\n          return this.i18nService.t(\"hintEqualsPassword\");\n        case \"minlength\":\n          return this.i18nService.t(\"masterPasswordMinlength\", Utils.minimumPasswordLength);\n        default:\n          return this.i18nService.t(this.errorTag(error));\n      }\n    }\n\n    return;\n  }\n\n  private errorTag(error: AllValidationErrors): string {\n    const name = error.errorName.charAt(0).toUpperCase() + error.errorName.slice(1);\n    return `${error.controlName}${name}`;\n  }\n\n  //validation would be ignored on selfhosted\n  private acceptPoliciesValidation(): ValidatorFn {\n    return (control: AbstractControl) => {\n      const ctrlValue = control.value;\n\n      return !ctrlValue && this.showTerms ? { required: true } : null;\n    };\n  }\n\n  private async validateRegistration(showToast: boolean): Promise<{ isValid: boolean }> {\n    this.formGroup.markAllAsTouched();\n    this.showErrorSummary = true;\n\n    if (this.formGroup.get(\"acceptPolicies\").hasError(\"required\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"acceptPoliciesRequired\")\n      );\n      return { isValid: false };\n    }\n\n    //web\n    if (this.formGroup.invalid && !showToast) {\n      return { isValid: false };\n    }\n\n    //desktop, browser\n    if (this.formGroup.invalid && showToast) {\n      const errorText = this.getErrorToastMessage();\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errorText);\n      return { isValid: false };\n    }\n\n    const passwordWeak =\n      this.passwordStrengthResult != null && this.passwordStrengthResult.score < 3;\n    const passwordLeak =\n      this.formGroup.controls.checkForBreaches.value &&\n      (await this.auditService.passwordLeaked(this.formGroup.controls.masterPassword.value)) > 0;\n\n    if (passwordWeak && passwordLeak) {\n      const result = await this.dialogService.openSimpleDialog({\n        title: { key: \"weakAndExposedMasterPassword\" },\n        content: { key: \"weakAndBreachedMasterPasswordDesc\" },\n        type: \"warning\",\n      });\n\n      if (!result) {\n        return { isValid: false };\n      }\n    } else if (passwordWeak) {\n      const result = await this.dialogService.openSimpleDialog({\n        title: { key: \"weakMasterPassword\" },\n        content: { key: \"weakMasterPasswordDesc\" },\n        type: \"warning\",\n      });\n\n      if (!result) {\n        return { isValid: false };\n      }\n    } else if (passwordLeak) {\n      const result = await this.dialogService.openSimpleDialog({\n        title: { key: \"exposedMasterPassword\" },\n        content: { key: \"exposedMasterPasswordDesc\" },\n        type: \"warning\",\n      });\n\n      if (!result) {\n        return { isValid: false };\n      }\n    }\n\n    return { isValid: true };\n  }\n\n  private async buildRegisterRequest(\n    email: string,\n    masterPassword: string,\n    name: string\n  ): Promise<RegisterRequest> {\n    const hint = this.formGroup.value.hint;\n    const kdf = DEFAULT_KDF_TYPE;\n    const kdfConfig = DEFAULT_KDF_CONFIG;\n    const key = await this.cryptoService.makeMasterKey(masterPassword, email, kdf, kdfConfig);\n    const newUserKey = await this.cryptoService.makeUserKey(key);\n    const masterKeyHash = await this.cryptoService.hashMasterKey(masterPassword, key);\n    const keys = await this.cryptoService.makeKeyPair(newUserKey[0]);\n    const request = new RegisterRequest(\n      email,\n      name,\n      masterKeyHash,\n      hint,\n      newUserKey[1].encryptedString,\n      this.referenceData,\n      this.captchaToken,\n      kdf,\n      kdfConfig.iterations,\n      kdfConfig.memory,\n      kdfConfig.parallelism\n    );\n    request.keys = new KeysRequest(keys[0], keys[1].encryptedString);\n    const orgInvite = await this.stateService.getOrganizationInvitation();\n    if (orgInvite != null && orgInvite.token != null && orgInvite.organizationUserId != null) {\n      request.token = orgInvite.token;\n      request.organizationUserId = orgInvite.organizationUserId;\n    }\n    return request;\n  }\n\n  private async registerAccount(\n    request: RegisterRequest,\n    showToast: boolean\n  ): Promise<{ successful: boolean; captchaBypassToken?: string }> {\n    if (!(await this.validateRegistration(showToast)).isValid) {\n      return { successful: false };\n    }\n    this.formPromise = this.apiService.postRegister(request);\n    try {\n      const response = await this.formPromise;\n      return { successful: true, captchaBypassToken: response.captchaBypassToken };\n    } catch (e) {\n      if (this.handleCaptchaRequired(e)) {\n        return { successful: false };\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  private async logIn(\n    email: string,\n    masterPassword: string,\n    captchaBypassToken: string\n  ): Promise<{ captchaRequired: boolean }> {\n    const credentials = new PasswordLogInCredentials(\n      email,\n      masterPassword,\n      captchaBypassToken,\n      null\n    );\n    const loginResponse = await this.authService.logIn(credentials);\n    if (this.handleCaptchaRequired(loginResponse)) {\n      return { captchaRequired: true };\n    }\n    return { captchaRequired: false };\n  }\n}\n","<div class=\"progress\">\n  <div\n    class=\"progress-bar {{ color }}\"\n    role=\"progressbar\"\n    [ngStyle]=\"{ width: scoreWidth + '%' }\"\n    attr.aria-valuenow=\"{{ scoreWidth }}\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n  >\n    <ng-container *ngIf=\"showText && text\">\n      {{ text }}\n    </ng-container>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, OnChanges, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PasswordStrengthServiceAbstraction } from \"@bitwarden/common/tools/password-strength\";\n\nexport interface PasswordColorText {\n  color: string;\n  text: string;\n}\n\n@Component({\n  selector: \"app-password-strength\",\n  templateUrl: \"password-strength.component.html\",\n})\nexport class PasswordStrengthComponent implements OnChanges {\n  @Input() showText = false;\n  @Input() email: string;\n  @Input() name: string;\n  @Input() set password(value: string) {\n    this.updatePasswordStrength(value);\n  }\n  @Output() passwordStrengthResult = new EventEmitter<any>();\n  @Output() passwordScoreColor = new EventEmitter<PasswordColorText>();\n\n  masterPasswordScore: number;\n  scoreWidth = 0;\n  color = \"bg-danger\";\n  text: string;\n\n  private masterPasswordStrengthTimeout: any;\n\n  //used by desktop and browser to display strength text color\n  get masterPasswordScoreColor() {\n    switch (this.masterPasswordScore) {\n      case 4:\n        return \"success\";\n      case 3:\n        return \"primary\";\n      case 2:\n        return \"warning\";\n      default:\n        return \"danger\";\n    }\n  }\n\n  //used by desktop and browser to display strength text\n  get masterPasswordScoreText() {\n    switch (this.masterPasswordScore) {\n      case 4:\n        return this.i18nService.t(\"strong\");\n      case 3:\n        return this.i18nService.t(\"good\");\n      case 2:\n        return this.i18nService.t(\"weak\");\n      default:\n        return this.masterPasswordScore != null ? this.i18nService.t(\"weak\") : null;\n    }\n  }\n\n  constructor(\n    private i18nService: I18nService,\n    private passwordStrengthService: PasswordStrengthServiceAbstraction\n  ) {}\n\n  ngOnChanges(): void {\n    this.masterPasswordStrengthTimeout = setTimeout(() => {\n      this.scoreWidth = this.masterPasswordScore == null ? 0 : (this.masterPasswordScore + 1) * 20;\n\n      switch (this.masterPasswordScore) {\n        case 4:\n          this.color = \"bg-success\";\n          this.text = this.i18nService.t(\"strong\");\n          break;\n        case 3:\n          this.color = \"bg-primary\";\n          this.text = this.i18nService.t(\"good\");\n          break;\n        case 2:\n          this.color = \"bg-warning\";\n          this.text = this.i18nService.t(\"weak\");\n          break;\n        default:\n          this.color = \"bg-danger\";\n          this.text = this.masterPasswordScore != null ? this.i18nService.t(\"weak\") : null;\n          break;\n      }\n\n      this.setPasswordScoreText(this.color, this.text);\n    }, 300);\n  }\n\n  updatePasswordStrength(password: string) {\n    const masterPassword = password;\n\n    if (this.masterPasswordStrengthTimeout != null) {\n      clearTimeout(this.masterPasswordStrengthTimeout);\n    }\n\n    const strengthResult = this.passwordStrengthService.getPasswordStrength(\n      masterPassword,\n      this.email,\n      this.name?.trim().toLowerCase().split(\" \")\n    );\n    this.passwordStrengthResult.emit(strengthResult);\n    this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;\n  }\n\n  setPasswordScoreText(color: string, text: string) {\n    color = color.slice(3);\n    this.passwordScoreColor.emit({ color: color, text: text });\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"createAccount\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n          <input id=\"email\" type=\"email\" formControlName=\"email\" appInputVerbatim=\"false\" />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"masterPassword\">\n                {{ \"masterPass\" | i18n }}\n                <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                  {{ text }}\n                </strong>\n              </label>\n              <input\n                id=\"masterPassword\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                aria-describedby=\"masterPasswordHelp\"\n                class=\"monospaced\"\n                formControlName=\"masterPassword\"\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword()\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <app-password-strength\n            [password]=\"formGroup.get('masterPassword')?.value\"\n            [email]=\"formGroup.get('email')?.value\"\n            [name]=\"formGroup.get('name')?.value\"\n            (passwordStrengthResult)=\"getStrengthResult($event)\"\n            (passwordScoreColor)=\"getPasswordScoreText($event)\"\n          >\n          </app-password-strength>\n        </div>\n      </div>\n      <div id=\"masterPasswordHelp\" class=\"box-footer\">\n        <b>{{ \"important\" | i18n }}</b> {{ \"masterPasswordHint\" | i18n }}\n        {{ characterMinimumMessage }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n            <input\n              id=\"masterPasswordRetype\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              class=\"monospaced\"\n              formControlName=\"confirmMasterPassword\"\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n          <input id=\"hint\" type=\"text\" aria-describedby=\"hintHelp\" formControlName=\"hint\" />\n        </div>\n      </div>\n      <div id=\"hintHelp\" class=\"box-footer\">\n        {{ \"masterPassHintDesc\" | i18n }}\n      </div>\n      <div class=\"box-content row-top-padding\">\n        <div\n          class=\"box-content-row box-content-row-checkbox box-content-row-checkbox-left box-content-row-word-break\"\n          appBoxRow\n        >\n          <input type=\"checkbox\" id=\"checkForBreaches\" formControlName=\"checkForBreaches\" />\n          <label for=\"checkForBreaches\">\n            {{ \"checkForBreaches\" | i18n }}\n          </label>\n        </div>\n      </div>\n    </div>\n    <div [hidden]=\"!showCaptcha()\">\n      <iframe id=\"hcaptcha_iframe\" height=\"80\" sandbox=\"allow-scripts allow-same-origin\"></iframe>\n    </div>\n    <div class=\"box last\" *ngIf=\"showTerms\">\n      <div class=\"box-content\">\n        <div\n          class=\"box-content-row box-content-row-checkbox box-content-row-checkbox-left box-content-row-word-break\"\n          appBoxRow\n        >\n          <input type=\"checkbox\" id=\"acceptPolicies\" formControlName=\"acceptPolicies\" />\n          <label for=\"acceptPolicies\">\n            {{ \"acceptPolicies\" | i18n }}<br />\n            <a href=\"https://bitwarden.com/terms/\" target=\"_blank\" rel=\"noopener\">{{\n              \"termsOfService\" | i18n\n            }}</a\n            >,\n            <a href=\"https://bitwarden.com/privacy/\" target=\"_blank\" rel=\"noopener\">{{\n              \"privacyPolicy\" | i18n\n            }}</a>\n          </label>\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { UntypedFormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { RegisterComponent as BaseRegisterComponent } from \"@bitwarden/angular/components/register.component\";\nimport { FormValidationErrorsService } from \"@bitwarden/angular/platform/abstractions/form-validation-errors.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-register\",\n  templateUrl: \"register.component.html\",\n})\nexport class RegisterComponent extends BaseRegisterComponent {\n  color: string;\n  text: string;\n\n  constructor(\n    formValidationErrorService: FormValidationErrorsService,\n    formBuilder: UntypedFormBuilder,\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    auditService: AuditService,\n    dialogService: DialogService\n  ) {\n    super(\n      formValidationErrorService,\n      formBuilder,\n      authService,\n      router,\n      i18nService,\n      cryptoService,\n      apiService,\n      stateService,\n      platformUtilsService,\n      passwordGenerationService,\n      environmentService,\n      logService,\n      auditService,\n      dialogService\n    );\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class RemovePasswordComponent implements OnInit {\n  actionPromise: Promise<void | boolean>;\n  continuing = false;\n  leaving = false;\n\n  loading = true;\n  organization: Organization;\n  email: string;\n\n  constructor(\n    private router: Router,\n    private stateService: StateService,\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private keyConnectorService: KeyConnectorService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    this.organization = await this.keyConnectorService.getManagingOrganization();\n    this.email = await this.stateService.getEmail();\n    await this.syncService.fullSync(false);\n    this.loading = false;\n  }\n\n  async convert() {\n    this.continuing = true;\n    this.actionPromise = this.keyConnectorService.migrateUser();\n\n    try {\n      await this.actionPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"removedMasterPassword\")\n      );\n      await this.keyConnectorService.removeConvertAccountRequired();\n      this.router.navigate([\"\"]);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e.message);\n    }\n  }\n\n  async leave() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: this.organization.name,\n      content: { key: \"leaveOrganizationConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.leaving = true;\n      this.actionPromise = this.organizationApiService.leave(this.organization.id);\n      await this.actionPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"leftOrganization\"));\n      await this.keyConnectorService.removeConvertAccountRequired();\n      this.router.navigate([\"\"]);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e);\n    }\n  }\n}\n","<header>\n  <div class=\"left\"></div>\n  <div class=\"center\">\n    <span class=\"title\">{{ \"removeMasterPassword\" | i18n }}</span>\n  </div>\n  <div class=\"right\"></div>\n</header>\n\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <p>{{ \"convertOrganizationEncryptionDesc\" | i18n : organization.name }}</p>\n      </div>\n      <div class=\"box-content-row\">\n        <button\n          type=\"button\"\n          class=\"btn block primary\"\n          (click)=\"convert()\"\n          [disabled]=\"actionPromise\"\n        >\n          <i\n            class=\"bwi bwi-spinner bwi-spin\"\n            title=\"{{ 'loading' | i18n }}\"\n            aria-hidden=\"true\"\n            *ngIf=\"continuing\"\n          ></i>\n          {{ \"removeMasterPassword\" | i18n }}\n        </button>\n      </div>\n      <div class=\"box-content-row\">\n        <button\n          type=\"button\"\n          class=\"btn btn-outline-secondary block\"\n          (click)=\"leave()\"\n          [disabled]=\"actionPromise\"\n        >\n          <i\n            class=\"bwi bwi-spinner bwi-spin\"\n            title=\"{{ 'loading' | i18n }}\"\n            aria-hidden=\"true\"\n            *ngIf=\"leaving\"\n          ></i>\n          {{ \"leaveOrganization\" | i18n }}\n        </button>\n      </div>\n    </div>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\n\nimport { RemovePasswordComponent as BaseRemovePasswordComponent } from \"@bitwarden/angular/auth/components/remove-password.component\";\n\n@Component({\n  selector: \"app-remove-password\",\n  templateUrl: \"remove-password.component.html\",\n})\nexport class RemovePasswordComponent extends BaseRemovePasswordComponent {}\n","import { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\n\nexport class OrganizationUserResetPasswordEnrollmentRequest extends SecretVerificationRequest {\n  resetPasswordKey: string;\n}\n","import { KdfType } from \"../../../enums\";\nimport { KeysRequest } from \"../../../models/request/keys.request\";\n\nexport class SetPasswordRequest {\n  masterPasswordHash: string;\n  key: string;\n  masterPasswordHint: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    masterPasswordHash: string,\n    key: string,\n    masterPasswordHint: string,\n    orgIdentifier: string,\n    keys: KeysRequest,\n    kdf: KdfType,\n    kdfIterations: number,\n    kdfMemory?: number,\n    kdfParallelism?: number\n  ) {\n    this.masterPasswordHash = masterPasswordHash;\n    this.key = key;\n    this.masterPasswordHint = masterPasswordHint;\n    this.kdf = kdf;\n    this.kdfIterations = kdfIterations;\n    this.kdfMemory = kdfMemory;\n    this.kdfParallelism = kdfParallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { KdfConfig } from \"@bitwarden/common/auth/models/domain/kdf-config\";\nimport { KdfType } from \"@bitwarden/common/enums\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport { MasterKey, UserKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { PasswordColorText } from \"../../shared/components/password-strength/password-strength.component\";\n\n@Directive()\nexport class ChangePasswordComponent implements OnInit, OnDestroy {\n  masterPassword: string;\n  masterPasswordRetype: string;\n  formPromise: Promise<any>;\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  passwordStrengthResult: any;\n  color: string;\n  text: string;\n  leakedPassword: boolean;\n  minimumLength = Utils.minimumPasswordLength;\n\n  protected email: string;\n  protected kdf: KdfType;\n  protected kdfConfig: KdfConfig;\n\n  protected destroy$ = new Subject<void>();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected messagingService: MessagingService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected policyService: PolicyService,\n    protected stateService: StateService,\n    protected dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    this.email = await this.stateService.getEmail();\n    this.policyService\n      .masterPasswordPolicyOptions$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(\n        (enforcedPasswordPolicyOptions) =>\n          (this.enforcedPolicyOptions ??= enforcedPasswordPolicyOptions)\n      );\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async submit() {\n    if (!(await this.strongPassword())) {\n      return;\n    }\n\n    if (!(await this.setupSubmitActions())) {\n      return;\n    }\n\n    const email = await this.stateService.getEmail();\n    if (this.kdf == null) {\n      this.kdf = await this.stateService.getKdfType();\n    }\n    if (this.kdfConfig == null) {\n      this.kdfConfig = await this.stateService.getKdfConfig();\n    }\n\n    // Create new master key\n    const newMasterKey = await this.cryptoService.makeMasterKey(\n      this.masterPassword,\n      email.trim().toLowerCase(),\n      this.kdf,\n      this.kdfConfig\n    );\n    const newMasterKeyHash = await this.cryptoService.hashMasterKey(\n      this.masterPassword,\n      newMasterKey\n    );\n\n    let newProtectedUserKey: [UserKey, EncString] = null;\n    const userKey = await this.cryptoService.getUserKey();\n    if (userKey == null) {\n      newProtectedUserKey = await this.cryptoService.makeUserKey(newMasterKey);\n    } else {\n      newProtectedUserKey = await this.cryptoService.encryptUserKeyWithMasterKey(newMasterKey);\n    }\n\n    await this.performSubmitActions(newMasterKeyHash, newMasterKey, newProtectedUserKey);\n  }\n\n  async setupSubmitActions(): Promise<boolean> {\n    // Override in sub-class\n    // Can be used for additional validation and/or other processes the should occur before changing passwords\n    return true;\n  }\n\n  async performSubmitActions(\n    newMasterKeyHash: string,\n    newMasterKey: MasterKey,\n    newUserKey: [UserKey, EncString]\n  ) {\n    // Override in sub-class\n  }\n\n  async strongPassword(): Promise<boolean> {\n    if (this.masterPassword == null || this.masterPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return false;\n    }\n    if (this.masterPassword.length < this.minimumLength) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordMinimumlength\", this.minimumLength)\n      );\n      return false;\n    }\n    if (this.masterPassword !== this.masterPasswordRetype) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPassDoesntMatch\")\n      );\n      return false;\n    }\n\n    const strengthResult = this.passwordStrengthResult;\n\n    if (\n      this.enforcedPolicyOptions != null &&\n      !this.policyService.evaluateMasterPassword(\n        strengthResult.score,\n        this.masterPassword,\n        this.enforcedPolicyOptions\n      )\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordPolicyRequirementsNotMet\")\n      );\n      return false;\n    }\n\n    const weakPassword = strengthResult != null && strengthResult.score < 3;\n\n    if (weakPassword && this.leakedPassword) {\n      const result = await this.dialogService.openSimpleDialog({\n        title: { key: \"weakAndExposedMasterPassword\" },\n        content: { key: \"weakAndBreachedMasterPasswordDesc\" },\n        type: \"warning\",\n      });\n\n      if (!result) {\n        return false;\n      }\n    } else {\n      if (weakPassword) {\n        const result = await this.dialogService.openSimpleDialog({\n          title: { key: \"weakMasterPassword\" },\n          content: { key: \"weakMasterPasswordDesc\" },\n          type: \"warning\",\n        });\n\n        if (!result) {\n          return false;\n        }\n      }\n      if (this.leakedPassword) {\n        const result = await this.dialogService.openSimpleDialog({\n          title: { key: \"exposedMasterPassword\" },\n          content: { key: \"exposedMasterPasswordDesc\" },\n          type: \"warning\",\n        });\n\n        if (!result) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  async logOut() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"logOut\" },\n      content: { key: \"logOutConfirmation\" },\n      acceptButtonText: { key: \"logOut\" },\n      type: \"warning\",\n    });\n\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  getStrengthResult(result: any) {\n    this.passwordStrengthResult = result;\n  }\n\n  getPasswordScoreText(event: PasswordColorText) {\n    this.color = event.color;\n    this.text = event.text;\n  }\n}\n","import { Directive } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationUserResetPasswordEnrollmentRequest } from \"@bitwarden/common/abstractions/organization-user/requests\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { SetPasswordRequest } from \"@bitwarden/common/auth/models/request/set-password.request\";\nimport { HashPurpose, DEFAULT_KDF_TYPE, DEFAULT_KDF_CONFIG } from \"@bitwarden/common/enums\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport { MasterKey, UserKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { ChangePasswordComponent as BaseChangePasswordComponent } from \"../auth/components/change-password.component\";\n\n@Directive()\nexport class SetPasswordComponent extends BaseChangePasswordComponent {\n  syncLoading = true;\n  showPassword = false;\n  hint = \"\";\n  identifier: string = null;\n  orgId: string;\n  resetPasswordAutoEnroll = false;\n\n  onSuccessfulChangePassword: () => Promise<void>;\n  successRoute = \"vault\";\n\n  constructor(\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    private policyApiService: PolicyApiServiceAbstraction,\n    policyService: PolicyService,\n    protected router: Router,\n    private apiService: ApiService,\n    private syncService: SyncService,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private organizationUserService: OrganizationUserService,\n    dialogService: DialogService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyService,\n      stateService,\n      dialogService\n    );\n  }\n\n  async ngOnInit() {\n    await this.syncService.fullSync(true);\n    this.syncLoading = false;\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.identifier != null) {\n        this.identifier = qParams.identifier;\n      }\n    });\n\n    // Automatic Enrollment Detection\n    if (this.identifier != null) {\n      try {\n        const response = await this.organizationApiService.getAutoEnrollStatus(this.identifier);\n        this.orgId = response.id;\n        this.resetPasswordAutoEnroll = response.resetPasswordEnabled;\n        this.enforcedPolicyOptions =\n          await this.policyApiService.getMasterPasswordPoliciesForInvitedUsers(this.orgId);\n      } catch {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      }\n    }\n\n    super.ngOnInit();\n  }\n\n  async setupSubmitActions() {\n    this.kdf = DEFAULT_KDF_TYPE;\n    this.kdfConfig = DEFAULT_KDF_CONFIG;\n    return true;\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    masterKey: MasterKey,\n    userKey: [UserKey, EncString]\n  ) {\n    const newKeyPair = await this.cryptoService.makeKeyPair(userKey[0]);\n    const request = new SetPasswordRequest(\n      masterPasswordHash,\n      userKey[1].encryptedString,\n      this.hint,\n      this.identifier,\n      new KeysRequest(newKeyPair[0], newKeyPair[1].encryptedString),\n      this.kdf,\n      this.kdfConfig.iterations,\n      this.kdfConfig.memory,\n      this.kdfConfig.parallelism\n    );\n    try {\n      if (this.resetPasswordAutoEnroll) {\n        this.formPromise = this.apiService\n          .setPassword(request)\n          .then(async () => {\n            await this.onSetPasswordSuccess(masterKey, userKey, newKeyPair);\n            return this.organizationApiService.getKeys(this.orgId);\n          })\n          .then(async (response) => {\n            if (response == null) {\n              throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));\n            }\n            const userId = await this.stateService.getUserId();\n            const publicKey = Utils.fromB64ToArray(response.publicKey);\n\n            // RSA Encrypt user key with organization public key\n            const userKey = await this.cryptoService.getUserKey();\n            const encryptedUserKey = await this.cryptoService.rsaEncrypt(userKey.key, publicKey);\n\n            const resetRequest = new OrganizationUserResetPasswordEnrollmentRequest();\n            resetRequest.masterPasswordHash = masterPasswordHash;\n            resetRequest.resetPasswordKey = encryptedUserKey.encryptedString;\n\n            return this.organizationUserService.putOrganizationUserResetPasswordEnrollment(\n              this.orgId,\n              userId,\n              resetRequest\n            );\n          });\n      } else {\n        this.formPromise = this.apiService.setPassword(request).then(async () => {\n          await this.onSetPasswordSuccess(masterKey, userKey, newKeyPair);\n        });\n      }\n\n      await this.formPromise;\n\n      if (this.onSuccessfulChangePassword != null) {\n        this.onSuccessfulChangePassword();\n      } else {\n        this.router.navigate([this.successRoute]);\n      }\n    } catch {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n  }\n\n  togglePassword(confirmField: boolean) {\n    this.showPassword = !this.showPassword;\n    document.getElementById(confirmField ? \"masterPasswordRetype\" : \"masterPassword\").focus();\n  }\n\n  private async onSetPasswordSuccess(\n    masterKey: MasterKey,\n    userKey: [UserKey, EncString],\n    keyPair: [string, EncString]\n  ) {\n    await this.stateService.setKdfType(this.kdf);\n    await this.stateService.setKdfConfig(this.kdfConfig);\n    await this.cryptoService.setMasterKey(masterKey);\n    await this.cryptoService.setUserKey(userKey[0]);\n    await this.cryptoService.setPrivateKey(keyPair[1].encryptedString);\n\n    const localMasterKeyHash = await this.cryptoService.hashMasterKey(\n      this.masterPassword,\n      masterKey,\n      HashPurpose.LocalAuthorization\n    );\n    await this.cryptoService.setMasterKeyHash(localMasterKeyHash);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"setMasterPassword\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"full-loading-spinner\" *ngIf=\"syncLoading\">\n      <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n    </div>\n    <div *ngIf=\"!syncLoading\">\n      <div class=\"box\">\n        <app-callout type=\"tip\">{{ \"ssoCompleteRegistration\" | i18n }}</app-callout>\n        <app-callout\n          type=\"warning\"\n          title=\"{{ 'resetPasswordPolicyAutoEnroll' | i18n }}\"\n          *ngIf=\"resetPasswordAutoEnroll\"\n        >\n          {{ \"resetPasswordAutoEnrollInviteWarning\" | i18n }}\n        </app-callout>\n        <app-callout\n          type=\"info\"\n          [enforcedPolicyOptions]=\"enforcedPolicyOptions\"\n          *ngIf=\"enforcedPolicyOptions\"\n        >\n        </app-callout>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <div class=\"box-content-row-flex\">\n              <div class=\"row-main\">\n                <label for=\"masterPassword\">\n                  {{ \"masterPass\" | i18n }}\n                  <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                    {{ text }}\n                  </strong>\n                </label>\n                <input\n                  id=\"masterPassword\"\n                  type=\"{{ showPassword ? 'text' : 'password' }}\"\n                  name=\"MasterPassword\"\n                  aria-describedby=\"masterPasswordHelp\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPassword\"\n                  required\n                  appInputVerbatim\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword(false)\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n\n            <app-password-strength\n              [password]=\"masterPassword\"\n              [email]=\"email\"\n              (passwordStrengthResult)=\"getStrengthResult($event)\"\n              (passwordScoreColor)=\"getPasswordScoreText($event)\"\n            >\n            </app-password-strength>\n          </div>\n        </div>\n        <div id=\"masterPasswordHelp\" class=\"box-footer\">\n          {{ \"masterPassDesc\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <div class=\"box-content-row-flex\">\n              <div class=\"row-main\">\n                <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n                <input\n                  id=\"masterPasswordRetype\"\n                  type=\"password\"\n                  name=\"MasterPasswordRetype\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPasswordRetype\"\n                  required\n                  appInputVerbatim\n                  autocomplete=\"new-password\"\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword(true)\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"box last\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n            <input\n              id=\"hint\"\n              type=\"text\"\n              name=\"Hint\"\n              aria-describedby=\"hintHelp\"\n              [(ngModel)]=\"hint\"\n            />\n          </div>\n        </div>\n        <div id=\"hintHelp\" class=\"box-footer\">\n          {{ \"masterPassHintDesc\" | i18n }}\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { SetPasswordComponent as BaseSetPasswordComponent } from \"@bitwarden/angular/components/set-password.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-set-password\",\n  templateUrl: \"set-password.component.html\",\n})\nexport class SetPasswordComponent extends BaseSetPasswordComponent {\n  constructor(\n    apiService: ApiService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    stateService: StateService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    policyApiService: PolicyApiServiceAbstraction,\n    policyService: PolicyService,\n    router: Router,\n    syncService: SyncService,\n    route: ActivatedRoute,\n    organizationApiService: OrganizationApiServiceAbstraction,\n    organizationUserService: OrganizationUserService,\n    dialogService: DialogService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyApiService,\n      policyService,\n      router,\n      apiService,\n      syncService,\n      route,\n      stateService,\n      organizationApiService,\n      organizationUserService,\n      dialogService\n    );\n  }\n}\n","import { Directive } from \"@angular/core\";\nimport { ActivatedRoute, NavigationExtras, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { SsoLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { TrustedDeviceUserDecryptionOption } from \"@bitwarden/common/auth/models/domain/user-decryption-options/trusted-device-user-decryption-option\";\nimport { SsoPreValidateResponse } from \"@bitwarden/common/auth/models/response/sso-pre-validate.response\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { AccountDecryptionOptions } from \"@bitwarden/common/platform/models/domain/account\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\n@Directive()\nexport class SsoComponent {\n  identifier: string;\n  loggingIn = false;\n\n  formPromise: Promise<AuthResult>;\n  initiateSsoFormPromise: Promise<SsoPreValidateResponse>;\n  onSuccessfulLogin: () => Promise<void>;\n  onSuccessfulLoginNavigate: () => Promise<void>;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<void>;\n  onSuccessfulLoginChangePasswordNavigate: () => Promise<void>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<void>;\n\n  onSuccessfulLoginTde: () => Promise<void>;\n  onSuccessfulLoginTdeNavigate: () => Promise<void>;\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"lock\";\n  protected trustedDeviceEncRoute = \"login-initiated\";\n  protected changePasswordRoute = \"set-password\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  protected clientId: string;\n  protected redirectUri: string;\n  protected state: string;\n  protected codeChallenge: string;\n\n  constructor(\n    protected authService: AuthService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected route: ActivatedRoute,\n    protected stateService: StateService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected logService: LogService,\n    protected configService: ConfigServiceAbstraction\n  ) {}\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.code != null && qParams.state != null) {\n        const codeVerifier = await this.stateService.getSsoCodeVerifier();\n        const state = await this.stateService.getSsoState();\n        await this.stateService.setSsoCodeVerifier(null);\n        await this.stateService.setSsoState(null);\n        if (\n          qParams.code != null &&\n          codeVerifier != null &&\n          state != null &&\n          this.checkState(state, qParams.state)\n        ) {\n          // We are not using a query param to pass org identifier around specifically\n          // for the browser SSO case when it needs it on extension open after SSO success\n          // on the TDE login decryption options component\n          const ssoOrganizationIdentifier = this.getOrgIdentifierFromState(qParams.state);\n          await this.logIn(qParams.code, codeVerifier, ssoOrganizationIdentifier);\n          await this.stateService.setUserSsoOrganizationIdentifier(ssoOrganizationIdentifier);\n        }\n      } else if (\n        qParams.clientId != null &&\n        qParams.redirectUri != null &&\n        qParams.state != null &&\n        qParams.codeChallenge != null\n      ) {\n        this.redirectUri = qParams.redirectUri;\n        this.state = qParams.state;\n        this.codeChallenge = qParams.codeChallenge;\n        this.clientId = qParams.clientId;\n      }\n    });\n  }\n\n  async submit(returnUri?: string, includeUserIdentifier?: boolean) {\n    if (this.identifier == null || this.identifier === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"ssoValidationFailed\"),\n        this.i18nService.t(\"ssoIdentifierRequired\")\n      );\n      return;\n    }\n\n    this.initiateSsoFormPromise = this.apiService.preValidateSso(this.identifier);\n    const response = await this.initiateSsoFormPromise;\n\n    const authorizeUrl = await this.buildAuthorizeUrl(\n      returnUri,\n      includeUserIdentifier,\n      response.token\n    );\n    this.platformUtilsService.launchUri(authorizeUrl, { sameWindow: true });\n  }\n\n  protected async buildAuthorizeUrl(\n    returnUri?: string,\n    includeUserIdentifier?: boolean,\n    token?: string\n  ): Promise<string> {\n    let codeChallenge = this.codeChallenge;\n    let state = this.state;\n\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n\n    if (codeChallenge == null) {\n      const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n      const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, \"sha256\");\n      codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n      await this.stateService.setSsoCodeVerifier(codeVerifier);\n    }\n\n    if (state == null) {\n      state = await this.passwordGenerationService.generatePassword(passwordOptions);\n      if (returnUri) {\n        state += `_returnUri='${returnUri}'`;\n      }\n    }\n\n    // Add Organization Identifier to state\n    state += `_identifier=${this.identifier}`;\n\n    // Save state (regardless of new or existing)\n    await this.stateService.setSsoState(state);\n\n    let authorizeUrl =\n      this.environmentService.getIdentityUrl() +\n      \"/connect/authorize?\" +\n      \"client_id=\" +\n      this.clientId +\n      \"&redirect_uri=\" +\n      encodeURIComponent(this.redirectUri) +\n      \"&\" +\n      \"response_type=code&scope=api offline_access&\" +\n      \"state=\" +\n      state +\n      \"&code_challenge=\" +\n      codeChallenge +\n      \"&\" +\n      \"code_challenge_method=S256&response_mode=query&\" +\n      \"domain_hint=\" +\n      encodeURIComponent(this.identifier) +\n      \"&ssoToken=\" +\n      encodeURIComponent(token);\n\n    if (includeUserIdentifier) {\n      const userIdentifier = await this.apiService.getSsoUserIdentifier();\n      authorizeUrl += `&user_identifier=${encodeURIComponent(userIdentifier)}`;\n    }\n\n    return authorizeUrl;\n  }\n\n  private async logIn(code: string, codeVerifier: string, orgIdentifier: string) {\n    this.loggingIn = true;\n    try {\n      const credentials = new SsoLogInCredentials(\n        code,\n        codeVerifier,\n        this.redirectUri,\n        orgIdentifier\n      );\n      this.formPromise = this.authService.logIn(credentials);\n      const authResult = await this.formPromise;\n\n      const acctDecryptionOpts: AccountDecryptionOptions =\n        await this.stateService.getAccountDecryptionOptions();\n\n      if (authResult.requiresTwoFactor) {\n        return await this.handleTwoFactorRequired(orgIdentifier);\n      }\n\n      const tdeEnabled = await this.isTrustedDeviceEncEnabled(\n        acctDecryptionOpts.trustedDeviceOption\n      );\n\n      if (tdeEnabled) {\n        return await this.handleTrustedDeviceEncryptionEnabled(\n          authResult,\n          orgIdentifier,\n          acctDecryptionOpts\n        );\n      }\n\n      // In the standard, non TDE case, a user must set password if they don't\n      // have one and they aren't using key connector.\n      // Note: TDE & Key connector are mutually exclusive org config options.\n      const requireSetPassword =\n        !acctDecryptionOpts.hasMasterPassword &&\n        acctDecryptionOpts.keyConnectorOption === undefined;\n\n      if (requireSetPassword || authResult.resetMasterPassword) {\n        // Change implies going no password -> password in this case\n        return await this.handleChangePasswordRequired(orgIdentifier);\n      }\n\n      // Users can be forced to reset their password via an admin or org policy\n      // disallowing weak passwords\n      if (authResult.forcePasswordReset !== ForceResetPasswordReason.None) {\n        return await this.handleForcePasswordReset(orgIdentifier);\n      }\n\n      // Standard SSO login success case\n      return await this.handleSuccessfulLogin();\n    } catch (e) {\n      await this.handleLoginError(e);\n    }\n  }\n\n  private async isTrustedDeviceEncEnabled(\n    trustedDeviceOption: TrustedDeviceUserDecryptionOption\n  ): Promise<boolean> {\n    const trustedDeviceEncryptionFeatureActive = await this.configService.getFeatureFlag<boolean>(\n      FeatureFlag.TrustedDeviceEncryption\n    );\n\n    return trustedDeviceEncryptionFeatureActive && trustedDeviceOption !== undefined;\n  }\n\n  private async handleTwoFactorRequired(orgIdentifier: string) {\n    await this.navigateViaCallbackOrRoute(\n      this.onSuccessfulLoginTwoFactorNavigate,\n      [this.twoFactorRoute],\n      {\n        queryParams: {\n          identifier: orgIdentifier,\n          sso: \"true\",\n        },\n      }\n    );\n  }\n\n  private async handleTrustedDeviceEncryptionEnabled(\n    authResult: AuthResult,\n    orgIdentifier: string,\n    acctDecryptionOpts: AccountDecryptionOptions\n  ): Promise<void> {\n    // If user doesn't have a MP, but has reset password permission, they must set a MP\n    if (\n      !acctDecryptionOpts.hasMasterPassword &&\n      acctDecryptionOpts.trustedDeviceOption.hasManageResetPasswordPermission\n    ) {\n      // Change implies going no password -> password in this case\n      return await this.handleChangePasswordRequired(orgIdentifier);\n    }\n\n    if (authResult.forcePasswordReset !== ForceResetPasswordReason.None) {\n      return await this.handleForcePasswordReset(orgIdentifier);\n    }\n\n    if (this.onSuccessfulLoginTde != null) {\n      // Don't await b/c causes hang on desktop & browser\n      this.onSuccessfulLoginTde();\n    }\n\n    this.navigateViaCallbackOrRoute(\n      this.onSuccessfulLoginTdeNavigate,\n      // Navigate to TDE page (if user was on trusted device and TDE has decrypted\n      //  their user key, the login-initiated guard will redirect them to the vault)\n      [this.trustedDeviceEncRoute]\n    );\n  }\n\n  private async handleChangePasswordRequired(orgIdentifier: string) {\n    await this.navigateViaCallbackOrRoute(\n      this.onSuccessfulLoginChangePasswordNavigate,\n      [this.changePasswordRoute],\n      {\n        queryParams: {\n          identifier: orgIdentifier,\n        },\n      }\n    );\n  }\n\n  private async handleForcePasswordReset(orgIdentifier: string) {\n    await this.navigateViaCallbackOrRoute(\n      this.onSuccessfulLoginForceResetNavigate,\n      [this.forcePasswordResetRoute],\n      {\n        queryParams: {\n          identifier: orgIdentifier,\n        },\n      }\n    );\n  }\n\n  private async handleSuccessfulLogin() {\n    if (this.onSuccessfulLogin != null) {\n      // Don't await b/c causes hang on desktop & browser\n      this.onSuccessfulLogin();\n    }\n\n    await this.navigateViaCallbackOrRoute(this.onSuccessfulLoginNavigate, [this.successRoute]);\n  }\n\n  private async handleLoginError(e: any) {\n    this.logService.error(e);\n\n    // TODO: Key Connector Service should pass this error message to the logout callback instead of displaying here\n    if (e.message === \"Key Connector error\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"ssoKeyConnectorError\")\n      );\n    }\n  }\n\n  private async navigateViaCallbackOrRoute(\n    callback: () => Promise<unknown>,\n    commands: unknown[],\n    extras?: NavigationExtras\n  ): Promise<void> {\n    if (callback) {\n      await callback();\n    } else {\n      await this.router.navigate(commands, extras);\n    }\n  }\n\n  private getOrgIdentifierFromState(state: string): string {\n    if (state === null || state === undefined) {\n      return null;\n    }\n\n    const stateSplit = state.split(\"_identifier=\");\n    return stateSplit.length > 1 ? stateSplit[1] : null;\n  }\n\n  private checkState(state: string, checkState: string): boolean {\n    if (state === null || state === undefined) {\n      return false;\n    }\n    if (checkState === null || checkState === undefined) {\n      return false;\n    }\n\n    const stateSplit = state.split(\"_identifier=\");\n    const checkStateSplit = checkState.split(\"_identifier=\");\n    return stateSplit[0] === checkStateSplit[0];\n  }\n}\n","import { InjectionToken } from \"@angular/core\";\n\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\n\nexport const WINDOW = new InjectionToken<Window>(\"WINDOW\");\nexport const MEMORY_STORAGE = new InjectionToken<AbstractMemoryStorageService>(\"MEMORY_STORAGE\");\nexport const SECURE_STORAGE = new InjectionToken<AbstractStorageService>(\"SECURE_STORAGE\");\nexport const STATE_FACTORY = new InjectionToken<StateFactory>(\"STATE_FACTORY\");\nexport const STATE_SERVICE_USE_CACHE = new InjectionToken<boolean>(\"STATE_SERVICE_USE_CACHE\");\nexport const LOGOUT_CALLBACK = new InjectionToken<\n  (expired: boolean, userId?: string) => Promise<void>\n>(\"LOGOUT_CALLBACK\");\nexport const LOCKED_CALLBACK = new InjectionToken<(userId?: string) => Promise<void>>(\n  \"LOCKED_CALLBACK\"\n);\nexport const CLIENT_TYPE = new InjectionToken<boolean>(\"CLIENT_TYPE\");\nexport const LOCALES_DIRECTORY = new InjectionToken<string>(\"LOCALES_DIRECTORY\");\nexport const SYSTEM_LANGUAGE = new InjectionToken<string>(\"SYSTEM_LANGUAGE\");\nexport const LOG_MAC_FAILURES = new InjectionToken<string>(\"LOG_MAC_FAILURES\");\n","import { Component, Inject } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { SsoComponent as BaseSsoComponent } from \"@bitwarden/angular/auth/components/sso.component\";\nimport { WINDOW } from \"@bitwarden/angular/services/injection-tokens\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\n\n@Component({\n  selector: \"app-sso\",\n  templateUrl: \"sso.component.html\",\n})\nexport class SsoComponent extends BaseSsoComponent {\n  constructor(\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    route: ActivatedRoute,\n    stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    cryptoFunctionService: CryptoFunctionService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    syncService: SyncService,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    configService: ConfigServiceAbstraction,\n    @Inject(WINDOW) private win: Window\n  ) {\n    super(\n      authService,\n      router,\n      i18nService,\n      route,\n      stateService,\n      platformUtilsService,\n      apiService,\n      cryptoFunctionService,\n      environmentService,\n      passwordGenerationService,\n      logService,\n      configService\n    );\n\n    const url = this.environmentService.getWebVaultUrl();\n\n    this.redirectUri = url + \"/sso-connector.html\";\n    this.clientId = \"browser\";\n\n    super.onSuccessfulLogin = async () => {\n      syncService.fullSync(true);\n\n      // If the vault is unlocked then this will clear keys from memory, which we don't want to do\n      if ((await this.authService.getAuthStatus()) !== AuthenticationStatus.Unlocked) {\n        BrowserApi.reloadOpenWindows();\n      }\n\n      this.win.close();\n    };\n\n    super.onSuccessfulLoginTde = async () => {\n      syncService.fullSync(true);\n    };\n\n    super.onSuccessfulLoginTdeNavigate = async () => {\n      this.win.close();\n    };\n  }\n}\n","import { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport interface TwoFactorProviderDetails {\n  type: TwoFactorProviderType;\n  name: string;\n  description: string;\n  priority: number;\n  sort: number;\n  premium: boolean;\n}\n\nexport abstract class TwoFactorService {\n  init: () => void;\n  getSupportedProviders: (win: Window) => TwoFactorProviderDetails[];\n  getDefaultProvider: (webAuthnSupported: boolean) => TwoFactorProviderType;\n  setSelectedProvider: (type: TwoFactorProviderType) => void;\n  clearSelectedProvider: () => void;\n\n  setProviders: (response: IdentityTwoFactorResponse) => void;\n  clearProviders: () => void;\n  getProviders: () => Map<TwoFactorProviderType, { [key: string]: string }>;\n}\n","import { Directive, EventEmitter, OnInit, Output } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n@Directive()\nexport class TwoFactorOptionsComponent implements OnInit {\n  @Output() onProviderSelected = new EventEmitter<TwoFactorProviderType>();\n  @Output() onRecoverSelected = new EventEmitter();\n\n  providers: any[] = [];\n\n  constructor(\n    protected twoFactorService: TwoFactorService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected win: Window\n  ) {}\n\n  ngOnInit() {\n    this.providers = this.twoFactorService.getSupportedProviders(this.win);\n  }\n\n  choose(p: any) {\n    this.onProviderSelected.emit(p.type);\n  }\n\n  recover() {\n    this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/recover-2fa\");\n    this.onRecoverSelected.emit();\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"twoStepOptions\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        appStopClick\n        *ngFor=\"let p of providers\"\n        class=\"box-content-row\"\n        (click)=\"choose(p)\"\n      >\n        <span class=\"text\">{{ p.name }}</span>\n        <span class=\"detail\">{{ p.description }}</span>\n      </button>\n      <button type=\"button\" appStopClick class=\"box-content-row\" (click)=\"recover()\">\n        <span class=\"text\">{{ \"recoveryCodeTitle\" | i18n }}</span>\n        <span class=\"detail\">{{ \"recoveryCodeDesc\" | i18n }}</span>\n      </button>\n    </div>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { TwoFactorOptionsComponent as BaseTwoFactorOptionsComponent } from \"@bitwarden/angular/auth/components/two-factor-options.component\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n@Component({\n  selector: \"app-two-factor-options\",\n  templateUrl: \"two-factor-options.component.html\",\n})\nexport class TwoFactorOptionsComponent extends BaseTwoFactorOptionsComponent {\n  constructor(\n    twoFactorService: TwoFactorService,\n    router: Router,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private activatedRoute: ActivatedRoute\n  ) {\n    super(twoFactorService, router, i18nService, platformUtilsService, window);\n  }\n\n  close() {\n    this.navigateTo2FA();\n  }\n\n  choose(p: any) {\n    super.choose(p);\n    this.twoFactorService.setSelectedProvider(p.type);\n\n    this.navigateTo2FA();\n  }\n\n  navigateTo2FA() {\n    const sso = this.activatedRoute.snapshot.queryParamMap.get(\"sso\") === \"true\";\n\n    if (sso) {\n      // Persist SSO flag back to the 2FA comp if it exists\n      // in order for successful login logic to work properly for\n      // SSO + 2FA in browser extension\n      this.router.navigate([\"2fa\"], { queryParams: { sso: true } });\n    } else {\n      this.router.navigate([\"2fa\"]);\n    }\n  }\n}\n","export enum TwoFactorProviderType {\n  Authenticator = 0,\n  Email = 1,\n  Duo = 2,\n  Yubikey = 3,\n  U2f = 4,\n  Remember = 5,\n  OrganizationDuo = 6,\n  WebAuthn = 7,\n}\n","import { TwoFactorProviderType } from \"../../../enums/two-factor-provider-type\";\n\nexport class TokenTwoFactorRequest {\n  constructor(\n    public provider: TwoFactorProviderType = null,\n    public token: string = null,\n    public remember: boolean = false\n  ) {}\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class TwoFactorEmailRequest extends SecretVerificationRequest {\n  email: string;\n  deviceIdentifier: string;\n  authRequestId: string;\n  ssoEmail2FaSessionToken?: string;\n}\n","import { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport {\n  TwoFactorProviderDetails,\n  TwoFactorService as TwoFactorServiceAbstraction,\n} from \"../abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport const TwoFactorProviders: Partial<Record<TwoFactorProviderType, TwoFactorProviderDetails>> =\n  {\n    [TwoFactorProviderType.Authenticator]: {\n      type: TwoFactorProviderType.Authenticator,\n      name: null as string,\n      description: null as string,\n      priority: 1,\n      sort: 1,\n      premium: false,\n    },\n    [TwoFactorProviderType.Yubikey]: {\n      type: TwoFactorProviderType.Yubikey,\n      name: null as string,\n      description: null as string,\n      priority: 3,\n      sort: 2,\n      premium: true,\n    },\n    [TwoFactorProviderType.Duo]: {\n      type: TwoFactorProviderType.Duo,\n      name: \"Duo\",\n      description: null as string,\n      priority: 2,\n      sort: 3,\n      premium: true,\n    },\n    [TwoFactorProviderType.OrganizationDuo]: {\n      type: TwoFactorProviderType.OrganizationDuo,\n      name: \"Duo (Organization)\",\n      description: null as string,\n      priority: 10,\n      sort: 4,\n      premium: false,\n    },\n    [TwoFactorProviderType.Email]: {\n      type: TwoFactorProviderType.Email,\n      name: null as string,\n      description: null as string,\n      priority: 0,\n      sort: 6,\n      premium: false,\n    },\n    [TwoFactorProviderType.WebAuthn]: {\n      type: TwoFactorProviderType.WebAuthn,\n      name: null as string,\n      description: null as string,\n      priority: 4,\n      sort: 5,\n      premium: false,\n    },\n  };\n\nexport class TwoFactorService implements TwoFactorServiceAbstraction {\n  private twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string }>;\n  private selectedTwoFactorProviderType: TwoFactorProviderType = null;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  init() {\n    TwoFactorProviders[TwoFactorProviderType.Email].name = this.i18nService.t(\"emailTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Email].description = this.i18nService.t(\"emailDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].name =\n      this.i18nService.t(\"authenticatorAppTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].description =\n      this.i18nService.t(\"authenticatorAppDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Duo].description = this.i18nService.t(\"duoDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].name =\n      \"Duo (\" + this.i18nService.t(\"organization\") + \")\";\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].description =\n      this.i18nService.t(\"duoOrganizationDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].name = this.i18nService.t(\"webAuthnTitle\");\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].description =\n      this.i18nService.t(\"webAuthnDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].name = this.i18nService.t(\"yubiKeyTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].description =\n      this.i18nService.t(\"yubiKeyDesc\");\n  }\n\n  getSupportedProviders(win: Window): TwoFactorProviderDetails[] {\n    const providers: any[] = [];\n    if (this.twoFactorProvidersData == null) {\n      return providers;\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.OrganizationDuo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.OrganizationDuo]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Authenticator)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Authenticator]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Yubikey)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Yubikey]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.Duo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Duo]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.WebAuthn) &&\n      this.platformUtilsService.supportsWebAuthn(win)\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.WebAuthn]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Email)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Email]);\n    }\n\n    return providers;\n  }\n\n  getDefaultProvider(webAuthnSupported: boolean): TwoFactorProviderType {\n    if (this.twoFactorProvidersData == null) {\n      return null;\n    }\n\n    if (\n      this.selectedTwoFactorProviderType != null &&\n      this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType)\n    ) {\n      return this.selectedTwoFactorProviderType;\n    }\n\n    let providerType: TwoFactorProviderType = null;\n    let providerPriority = -1;\n    this.twoFactorProvidersData.forEach((_value, type) => {\n      const provider = (TwoFactorProviders as any)[type];\n      if (provider != null && provider.priority > providerPriority) {\n        if (type === TwoFactorProviderType.WebAuthn && !webAuthnSupported) {\n          return;\n        }\n\n        providerType = type;\n        providerPriority = provider.priority;\n      }\n    });\n\n    return providerType;\n  }\n\n  setSelectedProvider(type: TwoFactorProviderType) {\n    this.selectedTwoFactorProviderType = type;\n  }\n\n  clearSelectedProvider() {\n    this.selectedTwoFactorProviderType = null;\n  }\n\n  setProviders(response: IdentityTwoFactorResponse) {\n    this.twoFactorProvidersData = response.twoFactorProviders2;\n  }\n\n  clearProviders() {\n    this.twoFactorProvidersData = null;\n  }\n\n  getProviders() {\n    return this.twoFactorProvidersData;\n  }\n}\n","import { I18nService } from \"../platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../platform/abstractions/platform-utils.service\";\n\nexport class WebAuthnIFrame {\n  private iframe: HTMLIFrameElement = null;\n  private connectorLink: HTMLAnchorElement;\n  private parseFunction = this.parseMessage.bind(this);\n\n  constructor(\n    private win: Window,\n    private webVaultUrl: string,\n    private webAuthnNewTab: boolean,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private successCallback: Function, // eslint-disable-line\n    private errorCallback: Function, // eslint-disable-line\n    private infoCallback: Function // eslint-disable-line\n  ) {\n    this.connectorLink = win.document.createElement(\"a\");\n  }\n\n  init(data: any): void {\n    const params = new URLSearchParams({\n      data: this.base64Encode(JSON.stringify(data)),\n      parent: encodeURIComponent(this.win.document.location.href),\n      btnText: encodeURIComponent(this.i18nService.t(\"webAuthnAuthenticate\")),\n      v: \"1\",\n    });\n\n    if (this.webAuthnNewTab) {\n      // Firefox fallback which opens the webauthn page in a new tab\n      params.append(\"locale\", this.i18nService.translationLocale);\n      this.platformUtilsService.launchUri(\n        `${this.webVaultUrl}/webauthn-fallback-connector.html?${params}`\n      );\n    } else {\n      this.connectorLink.href = `${this.webVaultUrl}/webauthn-connector.html?${params}`;\n      this.iframe = this.win.document.getElementById(\"webauthn_iframe\") as HTMLIFrameElement;\n      this.iframe.allow = \"publickey-credentials-get \" + new URL(this.webVaultUrl).origin;\n      this.iframe.src = this.connectorLink.href;\n\n      this.win.addEventListener(\"message\", this.parseFunction, false);\n    }\n  }\n\n  stop() {\n    this.sendMessage(\"stop\");\n  }\n\n  start() {\n    this.sendMessage(\"start\");\n  }\n\n  sendMessage(message: any) {\n    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {\n      return;\n    }\n\n    this.iframe.contentWindow.postMessage(message, this.iframe.src);\n  }\n\n  base64Encode(str: string): string {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode((\"0x\" + p1) as any);\n      })\n    );\n  }\n\n  cleanup() {\n    this.win.removeEventListener(\"message\", this.parseFunction, false);\n  }\n\n  private parseMessage(event: MessageEvent) {\n    if (!this.validMessage(event)) {\n      return;\n    }\n\n    const parts: string[] = event.data.split(\"|\");\n    if (parts[0] === \"success\" && this.successCallback) {\n      this.successCallback(parts[1]);\n    } else if (parts[0] === \"error\" && this.errorCallback) {\n      this.errorCallback(parts[1]);\n    } else if (parts[0] === \"info\" && this.infoCallback) {\n      this.infoCallback(parts[1]);\n    }\n  }\n\n  private validMessage(event: MessageEvent) {\n    if (\n      event.origin == null ||\n      event.origin === \"\" ||\n      event.origin !== (this.connectorLink as any).origin ||\n      event.data == null ||\n      typeof event.data !== \"string\"\n    ) {\n      return false;\n    }\n\n    return (\n      event.data.indexOf(\"success|\") === 0 ||\n      event.data.indexOf(\"error|\") === 0 ||\n      event.data.indexOf(\"info|\") === 0\n    );\n  }\n}\n","import { Directive, Inject, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, NavigationExtras, Router } from \"@angular/router\";\nimport * as DuoWebSDK from \"duo_web_sdk\";\nimport { first } from \"rxjs/operators\";\n\n// eslint-disable-next-line no-restricted-imports\nimport { WINDOW } from \"@bitwarden/angular/services/injection-tokens\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { TrustedDeviceUserDecryptionOption } from \"@bitwarden/common/auth/models/domain/user-decryption-options/trusted-device-user-decryption-option\";\nimport { TokenTwoFactorRequest } from \"@bitwarden/common/auth/models/request/identity-token/token-two-factor.request\";\nimport { TwoFactorEmailRequest } from \"@bitwarden/common/auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviders } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { WebAuthnIFrame } from \"@bitwarden/common/auth/webauthn-iframe\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { AccountDecryptionOptions } from \"@bitwarden/common/platform/models/domain/account\";\n\nimport { CaptchaProtectedComponent } from \"./captcha-protected.component\";\n\n@Directive()\nexport class TwoFactorComponent extends CaptchaProtectedComponent implements OnInit, OnDestroy {\n  token = \"\";\n  remember = false;\n  webAuthnReady = false;\n  webAuthnNewTab = false;\n  providers = TwoFactorProviders;\n  providerType = TwoFactorProviderType;\n  selectedProviderType: TwoFactorProviderType = TwoFactorProviderType.Authenticator;\n  webAuthnSupported = false;\n  webAuthn: WebAuthnIFrame = null;\n  title = \"\";\n  twoFactorEmail: string = null;\n  formPromise: Promise<any>;\n  emailPromise: Promise<any>;\n  orgIdentifier: string = null;\n  onSuccessfulLogin: () => Promise<void>;\n  onSuccessfulLoginNavigate: () => Promise<void>;\n\n  onSuccessfulLoginTde: () => Promise<void>;\n  onSuccessfulLoginTdeNavigate: () => Promise<void>;\n\n  protected loginRoute = \"login\";\n\n  protected trustedDeviceEncRoute = \"login-initiated\";\n  protected changePasswordRoute = \"set-password\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  protected successRoute = \"vault\";\n\n  constructor(\n    protected authService: AuthService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected apiService: ApiService,\n    protected platformUtilsService: PlatformUtilsService,\n    @Inject(WINDOW) protected win: Window,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected route: ActivatedRoute,\n    protected logService: LogService,\n    protected twoFactorService: TwoFactorService,\n    protected appIdService: AppIdService,\n    protected loginService: LoginService,\n    protected configService: ConfigServiceAbstraction\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.webAuthnSupported = this.platformUtilsService.supportsWebAuthn(win);\n  }\n\n  async ngOnInit() {\n    if (!this.authing || this.twoFactorService.getProviders() == null) {\n      this.router.navigate([this.loginRoute]);\n      return;\n    }\n\n    this.route.queryParams.pipe(first()).subscribe((qParams) => {\n      if (qParams.identifier != null) {\n        this.orgIdentifier = qParams.identifier;\n      }\n    });\n\n    if (this.needsLock) {\n      this.successRoute = \"lock\";\n    }\n\n    if (this.win != null && this.webAuthnSupported) {\n      const webVaultUrl = this.environmentService.getWebVaultUrl();\n      this.webAuthn = new WebAuthnIFrame(\n        this.win,\n        webVaultUrl,\n        this.webAuthnNewTab,\n        this.platformUtilsService,\n        this.i18nService,\n        (token: string) => {\n          this.token = token;\n          this.submit();\n        },\n        (error: string) => {\n          this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), error);\n        },\n        (info: string) => {\n          if (info === \"ready\") {\n            this.webAuthnReady = true;\n          }\n        }\n      );\n    }\n\n    this.selectedProviderType = this.twoFactorService.getDefaultProvider(this.webAuthnSupported);\n    await this.init();\n  }\n\n  ngOnDestroy(): void {\n    this.cleanupWebAuthn();\n    this.webAuthn = null;\n  }\n\n  async init() {\n    if (this.selectedProviderType == null) {\n      this.title = this.i18nService.t(\"loginUnavailable\");\n      return;\n    }\n\n    this.cleanupWebAuthn();\n    this.title = (TwoFactorProviders as any)[this.selectedProviderType].name;\n    const providerData = this.twoFactorService.getProviders().get(this.selectedProviderType);\n    switch (this.selectedProviderType) {\n      case TwoFactorProviderType.WebAuthn:\n        if (!this.webAuthnNewTab) {\n          setTimeout(() => {\n            this.authWebAuthn();\n          }, 500);\n        }\n        break;\n      case TwoFactorProviderType.Duo:\n      case TwoFactorProviderType.OrganizationDuo:\n        setTimeout(() => {\n          DuoWebSDK.init({\n            iframe: undefined,\n            host: providerData.Host,\n            sig_request: providerData.Signature,\n            submit_callback: async (f: HTMLFormElement) => {\n              const sig = f.querySelector('input[name=\"sig_response\"]') as HTMLInputElement;\n              if (sig != null) {\n                this.token = sig.value;\n                await this.submit();\n              }\n            },\n          });\n        }, 0);\n        break;\n      case TwoFactorProviderType.Email:\n        this.twoFactorEmail = providerData.Email;\n        if (this.twoFactorService.getProviders().size > 1) {\n          await this.sendEmail(false);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  async submit() {\n    await this.setupCaptcha();\n\n    if (this.token == null || this.token === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"verificationCodeRequired\")\n      );\n      return;\n    }\n\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn) {\n      if (this.webAuthn != null) {\n        this.webAuthn.stop();\n      } else {\n        return;\n      }\n    } else if (\n      this.selectedProviderType === TwoFactorProviderType.Email ||\n      this.selectedProviderType === TwoFactorProviderType.Authenticator\n    ) {\n      this.token = this.token.replace(\" \", \"\").trim();\n    }\n\n    try {\n      await this.doSubmit();\n    } catch {\n      if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && this.webAuthn != null) {\n        this.webAuthn.start();\n      }\n    }\n  }\n\n  async doSubmit() {\n    this.formPromise = this.authService.logInTwoFactor(\n      new TokenTwoFactorRequest(this.selectedProviderType, this.token, this.remember),\n      this.captchaToken\n    );\n    const authResult: AuthResult = await this.formPromise;\n\n    await this.handleLoginResponse(authResult);\n  }\n\n  private async handleLoginResponse(authResult: AuthResult) {\n    if (this.handleCaptchaRequired(authResult)) {\n      return;\n    }\n\n    this.loginService.clearValues();\n\n    const acctDecryptionOpts: AccountDecryptionOptions =\n      await this.stateService.getAccountDecryptionOptions();\n\n    const tdeEnabled = await this.isTrustedDeviceEncEnabled(acctDecryptionOpts.trustedDeviceOption);\n\n    if (tdeEnabled) {\n      return await this.handleTrustedDeviceEncryptionEnabled(\n        authResult,\n        this.orgIdentifier,\n        acctDecryptionOpts\n      );\n    }\n\n    // User must set password if they don't have one and they aren't using either TDE or key connector.\n    const requireSetPassword =\n      !acctDecryptionOpts.hasMasterPassword && acctDecryptionOpts.keyConnectorOption === undefined;\n\n    if (requireSetPassword || authResult.resetMasterPassword) {\n      // Change implies going no password -> password in this case\n      return await this.handleChangePasswordRequired(this.orgIdentifier);\n    }\n\n    // Users can be forced to reset their password via an admin or org policy\n    // disallowing weak passwords\n    if (authResult.forcePasswordReset !== ForceResetPasswordReason.None) {\n      return await this.handleForcePasswordReset(this.orgIdentifier);\n    }\n\n    return await this.handleSuccessfulLogin();\n  }\n\n  private async isTrustedDeviceEncEnabled(\n    trustedDeviceOption: TrustedDeviceUserDecryptionOption\n  ): Promise<boolean> {\n    const ssoTo2faFlowActive = this.route.snapshot.queryParamMap.get(\"sso\") === \"true\";\n    const trustedDeviceEncryptionFeatureActive = await this.configService.getFeatureFlag<boolean>(\n      FeatureFlag.TrustedDeviceEncryption\n    );\n\n    return (\n      ssoTo2faFlowActive &&\n      trustedDeviceEncryptionFeatureActive &&\n      trustedDeviceOption !== undefined\n    );\n  }\n\n  private async handleTrustedDeviceEncryptionEnabled(\n    authResult: AuthResult,\n    orgIdentifier: string,\n    acctDecryptionOpts: AccountDecryptionOptions\n  ): Promise<void> {\n    // If user doesn't have a MP, but has reset password permission, they must set a MP\n    if (\n      !acctDecryptionOpts.hasMasterPassword &&\n      acctDecryptionOpts.trustedDeviceOption.hasManageResetPasswordPermission\n    ) {\n      // Change implies going no password -> password in this case\n      return await this.handleChangePasswordRequired(orgIdentifier);\n    }\n\n    // Users can be forced to reset their password via an admin or org policy\n    // disallowing weak passwords\n    if (authResult.forcePasswordReset !== ForceResetPasswordReason.None) {\n      return await this.handleForcePasswordReset(orgIdentifier);\n    }\n\n    if (this.onSuccessfulLoginTde != null) {\n      // Note: awaiting this will currently cause a hang on desktop & browser as they will wait for a full sync to complete\n      // before navigating to the success route.\n      this.onSuccessfulLoginTde();\n    }\n\n    this.navigateViaCallbackOrRoute(\n      this.onSuccessfulLoginTdeNavigate,\n      // Navigate to TDE page (if user was on trusted device and TDE has decrypted\n      //  their user key, the login-initiated guard will redirect them to the vault)\n      [this.trustedDeviceEncRoute]\n    );\n  }\n\n  private async handleChangePasswordRequired(orgIdentifier: string) {\n    await this.router.navigate([this.changePasswordRoute], {\n      queryParams: {\n        identifier: orgIdentifier,\n      },\n    });\n  }\n\n  private async handleForcePasswordReset(orgIdentifier: string) {\n    this.router.navigate([this.forcePasswordResetRoute], {\n      queryParams: {\n        identifier: orgIdentifier,\n      },\n    });\n  }\n\n  private async handleSuccessfulLogin() {\n    if (this.onSuccessfulLogin != null) {\n      // Note: awaiting this will currently cause a hang on desktop & browser as they will wait for a full sync to complete\n      // before navigating to the success route.\n      this.onSuccessfulLogin();\n    }\n    await this.navigateViaCallbackOrRoute(this.onSuccessfulLoginNavigate, [this.successRoute]);\n  }\n\n  private async navigateViaCallbackOrRoute(\n    callback: () => Promise<unknown>,\n    commands: unknown[],\n    extras?: NavigationExtras\n  ): Promise<void> {\n    if (callback) {\n      await callback();\n    } else {\n      await this.router.navigate(commands, extras);\n    }\n  }\n\n  async sendEmail(doToast: boolean) {\n    if (this.selectedProviderType !== TwoFactorProviderType.Email) {\n      return;\n    }\n\n    if (this.emailPromise != null) {\n      return;\n    }\n\n    if (this.authService.email == null) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"sessionTimeout\")\n      );\n      return;\n    }\n\n    try {\n      const request = new TwoFactorEmailRequest();\n      request.email = this.authService.email;\n      request.masterPasswordHash = this.authService.masterPasswordHash;\n      request.ssoEmail2FaSessionToken = this.authService.ssoEmail2FaSessionToken;\n      request.deviceIdentifier = await this.appIdService.getAppId();\n      request.authRequestAccessCode = this.authService.accessCode;\n      request.authRequestId = this.authService.authRequestId;\n      this.emailPromise = this.apiService.postTwoFactorEmail(request);\n      await this.emailPromise;\n      if (doToast) {\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"verificationCodeEmailSent\", this.twoFactorEmail)\n        );\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    this.emailPromise = null;\n  }\n\n  authWebAuthn() {\n    const providerData = this.twoFactorService.getProviders().get(this.selectedProviderType);\n\n    if (!this.webAuthnSupported || this.webAuthn == null) {\n      return;\n    }\n\n    this.webAuthn.init(providerData);\n  }\n\n  private cleanupWebAuthn() {\n    if (this.webAuthn != null) {\n      this.webAuthn.stop();\n      this.webAuthn.cleanup();\n    }\n  }\n\n  get authing(): boolean {\n    return (\n      this.authService.authingWithPassword() ||\n      this.authService.authingWithSso() ||\n      this.authService.authingWithUserApiKey() ||\n      this.authService.authingWithPasswordless()\n    );\n  }\n\n  get needsLock(): boolean {\n    return this.authService.authingWithSso() || this.authService.authingWithUserApiKey();\n  }\n}\n","export interface MessageBase {\n  command: string;\n}\n\n/**\n * @deprecated Use the observable from the appropriate service instead.\n */\nexport abstract class BroadcasterService {\n  /**\n   * @deprecated Use the observable from the appropriate service instead.\n   */\n  send: (message: MessageBase, id?: string) => void;\n  /**\n   * @deprecated Use the observable from the appropriate service instead.\n   */\n  subscribe: (id: string, messageCallback: (message: MessageBase) => void) => void;\n  /**\n   * @deprecated Use the observable from the appropriate service instead.\n   */\n  unsubscribe: (id: string) => void;\n}\n","<form id=\"two-factor-page\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/login\">{{ \"back\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button\n        type=\"submit\"\n        [disabled]=\"form.loading\"\n        *ngIf=\"\n          selectedProviderType != null &&\n          selectedProviderType !== providerType.Duo &&\n          selectedProviderType !== providerType.OrganizationDuo &&\n          (selectedProviderType !== providerType.WebAuthn || form.loading)\n        \"\n      >\n        <span [hidden]=\"form.loading\">{{ \"continue\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <ng-container\n      *ngIf=\"\n        selectedProviderType === providerType.Authenticator ||\n        selectedProviderType === providerType.Email\n      \"\n    >\n      <div class=\"content text-center\">\n        <span *ngIf=\"selectedProviderType === providerType.Authenticator\">\n          {{ \"enterVerificationCodeApp\" | i18n }}\n        </span>\n        <span *ngIf=\"selectedProviderType === providerType.Email\">\n          {{ \"enterVerificationCodeEmail\" | i18n : twoFactorEmail }}\n        </span>\n      </div>\n      <div class=\"box first\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"code\">{{ \"verificationCode\" | i18n }}</label>\n            <input\n              id=\"code\"\n              type=\"text\"\n              name=\"Code\"\n              [(ngModel)]=\"token\"\n              required\n              appAutofocus\n              inputmode=\"tel\"\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.Yubikey\">\n      <div class=\"content text-center\">\n        <p class=\"text-center\">{{ \"insertYubiKey\" | i18n }}</p>\n        <img src=\"../../popup/images/yubikey.jpg\" class=\"img-rounded img-responsive\" alt=\"\" />\n      </div>\n      <div class=\"box first\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"code\" class=\"sr-only\">{{ \"verificationCode\" | i18n }}</label>\n            <input\n              id=\"code\"\n              type=\"password\"\n              name=\"Code\"\n              [(ngModel)]=\"token\"\n              required\n              appAutofocus\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.WebAuthn && !webAuthnNewTab\">\n      <div id=\"web-authn-frame\">\n        <iframe id=\"webauthn_iframe\" sandbox=\"allow-scripts allow-same-origin\"></iframe>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.WebAuthn && webAuthnNewTab\">\n      <div class=\"content text-center\" *ngIf=\"webAuthnNewTab\">\n        <p class=\"text-center\">{{ \"webAuthnNewTab\" | i18n }}</p>\n        <button type=\"button\" class=\"btn primary block\" (click)=\"authWebAuthn()\" appStopClick>\n          {{ \"webAuthnNewTabOpen\" | i18n }}\n        </button>\n      </div>\n    </ng-container>\n    <ng-container\n      *ngIf=\"\n        selectedProviderType === providerType.Duo ||\n        selectedProviderType === providerType.OrganizationDuo\n      \"\n    >\n      <div id=\"duo-frame\">\n        <iframe id=\"duo_iframe\" sandbox=\"allow-scripts allow-forms allow-same-origin\"></iframe>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <div class=\"box-content-row\" [hidden]=\"!showCaptcha()\">\n      <iframe id=\"hcaptcha_iframe\" height=\"80\" sandbox=\"allow-scripts allow-same-origin\"></iframe>\n    </div>\n    <div class=\"content\" *ngIf=\"selectedProviderType == null\">\n      <p class=\"text-center\">{{ \"noTwoStepProviders\" | i18n }}</p>\n      <p class=\"text-center\">{{ \"noTwoStepProviders2\" | i18n }}</p>\n    </div>\n    <div class=\"content no-vpad\" *ngIf=\"selectedProviderType != null\">\n      <p class=\"text-center\">\n        <button type=\"button\" appStopClick (click)=\"anotherMethod()\">\n          {{ \"useAnotherTwoStepMethod\" | i18n }}\n        </button>\n      </p>\n      <p *ngIf=\"selectedProviderType === providerType.Email\" class=\"text-center\">\n        <button type=\"button\" appStopClick (click)=\"sendEmail(true)\" [appApiAction]=\"emailPromise\">\n          {{ \"sendVerificationCodeEmailAgain\" | i18n }}\n        </button>\n      </p>\n    </div>\n  </main>\n</form>\n","import { Component, Inject } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { TwoFactorComponent as BaseTwoFactorComponent } from \"@bitwarden/angular/auth/components/two-factor.component\";\nimport { WINDOW } from \"@bitwarden/angular/services/injection-tokens\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { PopupUtilsService } from \"../../popup/services/popup-utils.service\";\n\nconst BroadcasterSubscriptionId = \"TwoFactorComponent\";\n\n@Component({\n  selector: \"app-two-factor\",\n  templateUrl: \"two-factor.component.html\",\n})\nexport class TwoFactorComponent extends BaseTwoFactorComponent {\n  showNewWindowMessage = false;\n\n  constructor(\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    apiService: ApiService,\n    platformUtilsService: PlatformUtilsService,\n    private syncService: SyncService,\n    environmentService: EnvironmentService,\n    private broadcasterService: BroadcasterService,\n    private popupUtilsService: PopupUtilsService,\n    stateService: StateService,\n    route: ActivatedRoute,\n    private messagingService: MessagingService,\n    logService: LogService,\n    twoFactorService: TwoFactorService,\n    appIdService: AppIdService,\n    loginService: LoginService,\n    configService: ConfigServiceAbstraction,\n    private dialogService: DialogService,\n    @Inject(WINDOW) protected win: Window\n  ) {\n    super(\n      authService,\n      router,\n      i18nService,\n      apiService,\n      platformUtilsService,\n      win,\n      environmentService,\n      stateService,\n      route,\n      logService,\n      twoFactorService,\n      appIdService,\n      loginService,\n      configService\n    );\n    super.onSuccessfulLogin = async () => {\n      syncService.fullSync(true);\n    };\n\n    super.onSuccessfulLoginTde = async () => {\n      syncService.fullSync(true);\n    };\n\n    super.onSuccessfulLoginTdeNavigate = async () => {\n      this.win.close();\n    };\n\n    super.successRoute = \"/tabs/vault\";\n    // FIXME: Chromium 110 has broken WebAuthn support in extensions via an iframe\n    this.webAuthnNewTab = true;\n  }\n\n  async ngOnInit() {\n    if (this.route.snapshot.paramMap.has(\"webAuthnResponse\")) {\n      // WebAuthn fallback response\n      this.selectedProviderType = TwoFactorProviderType.WebAuthn;\n      this.token = this.route.snapshot.paramMap.get(\"webAuthnResponse\");\n      super.onSuccessfulLogin = async () => {\n        this.syncService.fullSync(true);\n        this.messagingService.send(\"reloadPopup\");\n        window.close();\n      };\n      this.remember = this.route.snapshot.paramMap.get(\"remember\") === \"true\";\n      await this.doSubmit();\n      return;\n    }\n\n    await super.ngOnInit();\n    if (this.selectedProviderType == null) {\n      return;\n    }\n\n    // WebAuthn prompt appears inside the popup on linux, and requires a larger popup width\n    // than usual to avoid cutting off the dialog.\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && (await this.isLinux())) {\n      document.body.classList.add(\"linux-webauthn\");\n    }\n\n    if (\n      this.selectedProviderType === TwoFactorProviderType.Email &&\n      this.popupUtilsService.inPopup(window)\n    ) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"warning\" },\n        content: { key: \"popup2faCloseMessage\" },\n        type: \"warning\",\n      });\n      if (confirmed) {\n        this.popupUtilsService.popOut(window);\n      }\n    }\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.sso === \"true\") {\n        super.onSuccessfulLogin = async () => {\n          // This is not awaited so we don't pause the application while the sync is happening.\n          // This call is executed by the service that lives in the background script so it will continue\n          // the sync even if this tab closes.\n          this.syncService.fullSync(true);\n\n          // Force sidebars (FF && Opera) to reload while exempting current window\n          // because we are just going to close the current window.\n          BrowserApi.reloadOpenWindows(true);\n\n          // We don't need this window anymore because the intent is for the user to be left\n          // on the web vault screen which tells them to continue in the browser extension (sidebar or popup)\n          BrowserApi.closeBitwardenExtensionTab();\n        };\n      }\n    });\n  }\n\n  async ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && (await this.isLinux())) {\n      document.body.classList.remove(\"linux-webauthn\");\n    }\n    super.ngOnDestroy();\n  }\n\n  anotherMethod() {\n    const sso = this.route.snapshot.queryParamMap.get(\"sso\") === \"true\";\n\n    if (sso) {\n      // We must persist this so when the user returns to the 2FA comp, the\n      // proper onSuccessfulLogin logic is executed.\n      this.router.navigate([\"2fa-options\"], { queryParams: { sso: true } });\n    } else {\n      this.router.navigate([\"2fa-options\"]);\n    }\n  }\n\n  async isLinux() {\n    return (await BrowserApi.getPlatformInfo()).os === \"linux\";\n  }\n}\n","export enum VerificationType {\n  MasterPassword = 0,\n  OTP = 1,\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class PasswordRequest extends SecretVerificationRequest {\n  newMasterPasswordHash: string;\n  masterPasswordHint: string;\n  key: string;\n}\n","export class OrganizationUserResetPasswordRequest {\n  newMasterPasswordHash: string;\n  key: string;\n}\n","import { OrganizationUserResetPasswordRequest } from \"../../../abstractions/organization-user/requests\";\n\nexport class UpdateTempPasswordRequest extends OrganizationUserResetPasswordRequest {\n  masterPasswordHint: string;\n}\n","import { Directive } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { VerificationType } from \"@bitwarden/common/auth/enums/verification-type\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { PasswordRequest } from \"@bitwarden/common/auth/models/request/password.request\";\nimport { UpdateTempPasswordRequest } from \"@bitwarden/common/auth/models/request/update-temp-password.request\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport { MasterKey, UserKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { Verification } from \"@bitwarden/common/types/verification\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { ChangePasswordComponent as BaseChangePasswordComponent } from \"./change-password.component\";\n\n@Directive()\nexport class UpdateTempPasswordComponent extends BaseChangePasswordComponent {\n  hint: string;\n  key: string;\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  showPassword = false;\n  reason: ForceResetPasswordReason = ForceResetPasswordReason.None;\n  verification: Verification = {\n    type: VerificationType.MasterPassword,\n    secret: \"\",\n  };\n\n  onSuccessfulChangePassword: () => Promise<any>;\n\n  get requireCurrentPassword(): boolean {\n    return this.reason === ForceResetPasswordReason.WeakMasterPassword;\n  }\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    policyService: PolicyService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    private apiService: ApiService,\n    stateService: StateService,\n    private syncService: SyncService,\n    private logService: LogService,\n    private userVerificationService: UserVerificationService,\n    private router: Router,\n    dialogService: DialogService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyService,\n      stateService,\n      dialogService\n    );\n  }\n\n  async ngOnInit() {\n    await this.syncService.fullSync(true);\n\n    this.reason = await this.stateService.getForcePasswordResetReason();\n\n    // If we somehow end up here without a reason, go back to the home page\n    if (this.reason == ForceResetPasswordReason.None) {\n      this.router.navigate([\"/\"]);\n      return;\n    }\n\n    await super.ngOnInit();\n  }\n\n  get masterPasswordWarningText(): string {\n    return this.reason == ForceResetPasswordReason.WeakMasterPassword\n      ? this.i18nService.t(\"updateWeakMasterPasswordWarning\")\n      : this.i18nService.t(\"updateMasterPasswordWarning\");\n  }\n\n  togglePassword(confirmField: boolean) {\n    this.showPassword = !this.showPassword;\n    document.getElementById(confirmField ? \"masterPasswordRetype\" : \"masterPassword\").focus();\n  }\n\n  async setupSubmitActions(): Promise<boolean> {\n    this.email = await this.stateService.getEmail();\n    this.kdf = await this.stateService.getKdfType();\n    this.kdfConfig = await this.stateService.getKdfConfig();\n    return true;\n  }\n\n  async submit() {\n    // Validation\n    if (!(await this.strongPassword())) {\n      return;\n    }\n\n    if (!(await this.setupSubmitActions())) {\n      return;\n    }\n\n    try {\n      // Create new key and hash new password\n      const newMasterKey = await this.cryptoService.makeMasterKey(\n        this.masterPassword,\n        this.email.trim().toLowerCase(),\n        this.kdf,\n        this.kdfConfig\n      );\n      const newPasswordHash = await this.cryptoService.hashMasterKey(\n        this.masterPassword,\n        newMasterKey\n      );\n\n      // Grab user key\n      const userKey = await this.cryptoService.getUserKey();\n\n      // Encrypt user key with new master key\n      const newProtectedUserKey = await this.cryptoService.encryptUserKeyWithMasterKey(\n        newMasterKey,\n        userKey\n      );\n\n      await this.performSubmitActions(newPasswordHash, newMasterKey, newProtectedUserKey);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    masterKey: MasterKey,\n    userKey: [UserKey, EncString]\n  ) {\n    try {\n      switch (this.reason) {\n        case ForceResetPasswordReason.AdminForcePasswordReset:\n          this.formPromise = this.updateTempPassword(masterPasswordHash, userKey);\n          break;\n        case ForceResetPasswordReason.WeakMasterPassword:\n          this.formPromise = this.updatePassword(masterPasswordHash, userKey);\n          break;\n      }\n\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"updatedMasterPassword\")\n      );\n\n      await this.stateService.setForcePasswordResetReason(ForceResetPasswordReason.None);\n\n      if (this.onSuccessfulChangePassword != null) {\n        this.onSuccessfulChangePassword();\n      } else {\n        this.messagingService.send(\"logout\");\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n  private async updateTempPassword(masterPasswordHash: string, userKey: [UserKey, EncString]) {\n    const request = new UpdateTempPasswordRequest();\n    request.key = userKey[1].encryptedString;\n    request.newMasterPasswordHash = masterPasswordHash;\n    request.masterPasswordHint = this.hint;\n\n    return this.apiService.putUpdateTempPassword(request);\n  }\n\n  private async updatePassword(newMasterPasswordHash: string, userKey: [UserKey, EncString]) {\n    const request = await this.userVerificationService.buildRequest(\n      this.verification,\n      PasswordRequest\n    );\n    request.masterPasswordHint = this.hint;\n    request.newMasterPasswordHash = newMasterPasswordHash;\n    request.key = userKey[1].encryptedString;\n\n    return this.apiService.postPassword(request);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <a (click)=\"logOut()\">{{ \"logOut\" | i18n }}</a>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"updateMasterPassword\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout type=\"warning\" title=\"{{ 'updateMasterPassword' | i18n }}\">\n      {{ masterPasswordWarningText }}\n    </app-callout>\n    <app-callout\n      type=\"info\"\n      [enforcedPolicyOptions]=\"enforcedPolicyOptions\"\n      *ngIf=\"enforcedPolicyOptions\"\n    >\n    </app-callout>\n    <div class=\"box\" *ngIf=\"requireCurrentPassword\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"currentMasterPassword\">\n                {{ \"currentMasterPass\" | i18n }}\n              </label>\n              <input\n                id=\"currentMasterPassword\"\n                type=\"password\"\n                name=\"CurrentMasterPassword\"\n                class=\"monospaced\"\n                [(ngModel)]=\"verification.secret\"\n                required\n                appInputVerbatim\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"masterPassword\">\n                {{ \"newMasterPass\" | i18n }}\n                <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                  {{ text }}\n                </strong>\n              </label>\n              <input\n                id=\"masterPassword\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"MasterPassword\"\n                class=\"monospaced\"\n                [(ngModel)]=\"masterPassword\"\n                required\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword(false)\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <app-password-strength\n            [password]=\"masterPassword\"\n            [email]=\"email\"\n            (passwordStrengthResult)=\"getStrengthResult($event)\"\n            (passwordScoreColor)=\"getPasswordScoreText($event)\"\n          >\n          </app-password-strength>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <label for=\"masterPasswordRetype\">{{ \"confirmNewMasterPass\" | i18n }}</label>\n            <input\n              id=\"masterPasswordRetype\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"MasterPasswordRetype\"\n              class=\"monospaced\"\n              [(ngModel)]=\"masterPasswordRetype\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword(true)\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n          <input id=\"hint\" type=\"text\" name=\"Hint\" aria-describedby=\"hintHelp\" [(ngModel)]=\"hint\" />\n        </div>\n      </div>\n      <div id=\"hintHelp\" class=\"box-footer\">\n        {{ \"masterPassHintDesc\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\n\nimport { UpdateTempPasswordComponent as BaseUpdateTempPasswordComponent } from \"@bitwarden/angular/auth/components/update-temp-password.component\";\n\n@Component({\n  selector: \"app-update-temp-password\",\n  templateUrl: \"update-temp-password.component.html\",\n})\nexport class UpdateTempPasswordComponent extends BaseUpdateTempPasswordComponent {}\n","import { UsernameGeneratorOptions } from \"./username-generation-options\";\n\nexport abstract class UsernameGenerationServiceAbstraction {\n  generateUsername: (options: UsernameGeneratorOptions) => Promise<string>;\n  generateWord: (options: UsernameGeneratorOptions) => Promise<string>;\n  generateSubaddress: (options: UsernameGeneratorOptions) => Promise<string>;\n  generateCatchall: (options: UsernameGeneratorOptions) => Promise<string>;\n  generateForwarded: (options: UsernameGeneratorOptions) => Promise<string>;\n  getOptions: () => Promise<UsernameGeneratorOptions>;\n  saveOptions: (options: UsernameGeneratorOptions) => Promise<void>;\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class AnonAddyForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid addy.io API token.\";\n    }\n    if (options.anonaddy?.domain == null || options.anonaddy.domain === \"\") {\n      throw \"Invalid addy.io domain.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n        \"X-Requested-With\": \"XMLHttpRequest\",\n      }),\n    };\n    const url = \"https://app.addy.io/api/v1/aliases\";\n    requestInit.body = JSON.stringify({\n      domain: options.anonaddy.domain,\n      description:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.data?.email;\n    }\n    if (response.status === 401) {\n      throw \"Invalid addy.io API token.\";\n    }\n    throw \"Unknown addy.io error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class DuckDuckGoForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://quack.duckduckgo.com/api/email/addresses\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      if (json.address) {\n        return `${json.address}@duck.com`;\n      }\n    } else if (response.status === 401) {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    throw \"Unknown DuckDuckGo error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FastmailForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Fastmail API token.\";\n    }\n\n    const accountId = await this.getAccountId(apiService, options);\n    if (accountId == null || accountId === \"\") {\n      throw \"Unable to obtain Fastmail masked email account ID.\";\n    }\n\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://api.fastmail.com/jmap/api/\";\n    requestInit.body = JSON.stringify({\n      using: [\"https://www.fastmail.com/dev/maskedemail\", \"urn:ietf:params:jmap:core\"],\n      methodCalls: [\n        [\n          \"MaskedEmail/set\",\n          {\n            accountId: accountId,\n            create: {\n              \"new-masked-email\": {\n                state: \"enabled\",\n                description: \"\",\n                url: options.website,\n                emailPrefix: options.fastmail.prefix,\n              },\n            },\n          },\n          \"0\",\n        ],\n      ],\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (\n        json.methodResponses != null &&\n        json.methodResponses.length > 0 &&\n        json.methodResponses[0].length > 0\n      ) {\n        if (json.methodResponses[0][0] === \"MaskedEmail/set\") {\n          if (json.methodResponses[0][1]?.created?.[\"new-masked-email\"] != null) {\n            return json.methodResponses[0][1]?.created?.[\"new-masked-email\"]?.email;\n          }\n          if (json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"] != null) {\n            throw (\n              \"Fastmail error: \" +\n              json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"]?.description\n            );\n          }\n        } else if (json.methodResponses[0][0] === \"error\") {\n          throw \"Fastmail error: \" + json.methodResponses[0][1]?.description;\n        }\n      }\n    }\n    if (response.status === 401 || response.status === 403) {\n      throw \"Invalid Fastmail API token.\";\n    }\n    throw \"Unknown Fastmail error occurred.\";\n  }\n\n  private async getAccountId(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      method: \"GET\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n      }),\n    };\n    const url = \"https://api.fastmail.com/.well-known/jmap\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (json.primaryAccounts != null) {\n        return json.primaryAccounts[\"https://www.fastmail.com/dev/maskedemail\"];\n      }\n    }\n    return null;\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FirefoxRelayForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Token \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://relay.firefox.com/api/v1/relayaddresses/\";\n    requestInit.body = JSON.stringify({\n      enabled: true,\n      generated_for: options.website,\n      description:\n        (options.website != null ? options.website + \" - \" : \"\") + \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.full_address;\n    }\n    if (response.status === 401) {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    throw \"Unknown Firefox Relay error occurred.\";\n  }\n}\n","export class ForwarderOptions {\n  apiKey: string;\n  website: string;\n  fastmail = new FastmailForwarderOptions();\n  anonaddy = new AnonAddyForwarderOptions();\n  forwardemail = new ForwardEmailForwarderOptions();\n}\n\nexport class FastmailForwarderOptions {\n  prefix: string;\n}\n\nexport class AnonAddyForwarderOptions {\n  domain: string;\n}\n\nexport class ForwardEmailForwarderOptions {\n  domain: string;\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class SimpleLoginForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authentication: options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    let url = \"https://app.simplelogin.io/api/alias/random/new\";\n    if (options.website != null) {\n      url += \"?hostname=\" + options.website;\n    }\n    requestInit.body = JSON.stringify({\n      note:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json.alias;\n    }\n    if (response.status === 401) {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    const json = await response.json();\n    if (json?.error != null) {\n      throw \"SimpleLogin error:\" + json.error;\n    }\n    throw \"Unknown SimpleLogin error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\nimport { Utils } from \"../../../../platform/misc/utils\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class ForwardEmailForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Forward Email API key.\";\n    }\n    if (options.forwardemail?.domain == null || options.forwardemail.domain === \"\") {\n      throw \"Invalid Forward Email domain.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Basic \" + Utils.fromUtf8ToB64(options.apiKey + \":\"),\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = `https://api.forwardemail.net/v1/domains/${options.forwardemail.domain}/aliases`;\n    requestInit.body = JSON.stringify({\n      labels: options.website,\n      description:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.name + \"@\" + (json?.domain?.name || options.forwardemail.domain);\n    }\n    if (response.status === 401) {\n      throw \"Invalid Forward Email API key.\";\n    }\n    const json = await response.json();\n    if (json?.message != null) {\n      throw \"Forward Email error:\\n\" + json.message;\n    }\n    if (json?.error != null) {\n      throw \"Forward Email error:\\n\" + json.error;\n    }\n    throw \"Unknown Forward Email error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { EFFLongWordList } from \"../../../platform/misc/wordlist\";\n\nimport {\n  AnonAddyForwarder,\n  DuckDuckGoForwarder,\n  FastmailForwarder,\n  FirefoxRelayForwarder,\n  ForwardEmailForwarder,\n  Forwarder,\n  ForwarderOptions,\n  SimpleLoginForwarder,\n} from \"./email-forwarders\";\nimport { UsernameGeneratorOptions } from \"./username-generation-options\";\nimport { UsernameGenerationServiceAbstraction } from \"./username-generation.service.abstraction\";\n\nconst DefaultOptions: UsernameGeneratorOptions = {\n  type: \"word\",\n  wordCapitalize: true,\n  wordIncludeNumber: true,\n  subaddressType: \"random\",\n  catchallType: \"random\",\n  forwardedService: \"\",\n  forwardedAnonAddyDomain: \"anonaddy.me\",\n  forwardedForwardEmailDomain: \"hideaddress.net\",\n};\n\nexport class UsernameGenerationService implements UsernameGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private apiService: ApiService\n  ) {}\n\n  generateUsername(options: UsernameGeneratorOptions): Promise<string> {\n    if (options.type === \"catchall\") {\n      return this.generateCatchall(options);\n    } else if (options.type === \"subaddress\") {\n      return this.generateSubaddress(options);\n    } else if (options.type === \"forwarded\") {\n      return this.generateForwarded(options);\n    } else {\n      return this.generateWord(options);\n    }\n  }\n\n  async generateWord(options: UsernameGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.wordCapitalize == null) {\n      o.wordCapitalize = true;\n    }\n    if (o.wordIncludeNumber == null) {\n      o.wordIncludeNumber = true;\n    }\n\n    const wordIndex = await this.cryptoService.randomNumber(0, EFFLongWordList.length - 1);\n    let word = EFFLongWordList[wordIndex];\n    if (o.wordCapitalize) {\n      word = word.charAt(0).toUpperCase() + word.slice(1);\n    }\n    if (o.wordIncludeNumber) {\n      const num = await this.cryptoService.randomNumber(1, 9999);\n      word = word + this.zeroPad(num.toString(), 4);\n    }\n    return word;\n  }\n\n  async generateSubaddress(options: UsernameGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    const subaddressEmail = o.subaddressEmail;\n    if (subaddressEmail == null || subaddressEmail.length < 3) {\n      return o.subaddressEmail;\n    }\n    const atIndex = subaddressEmail.indexOf(\"@\");\n    if (atIndex < 1 || atIndex >= subaddressEmail.length - 1) {\n      return subaddressEmail;\n    }\n    if (o.subaddressType == null) {\n      o.subaddressType = \"random\";\n    }\n\n    const emailBeginning = subaddressEmail.substr(0, atIndex);\n    const emailEnding = subaddressEmail.substr(atIndex + 1, subaddressEmail.length);\n\n    let subaddressString = \"\";\n    if (o.subaddressType === \"random\") {\n      subaddressString = await this.randomString(8);\n    } else if (o.subaddressType === \"website-name\") {\n      subaddressString = o.website;\n    }\n    return emailBeginning + \"+\" + subaddressString + \"@\" + emailEnding;\n  }\n\n  async generateCatchall(options: UsernameGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.catchallDomain == null || o.catchallDomain === \"\") {\n      return null;\n    }\n    if (o.catchallType == null) {\n      o.catchallType = \"random\";\n    }\n\n    let startString = \"\";\n    if (o.catchallType === \"random\") {\n      startString = await this.randomString(8);\n    } else if (o.catchallType === \"website-name\") {\n      startString = o.website;\n    }\n    return startString + \"@\" + o.catchallDomain;\n  }\n\n  async generateForwarded(options: UsernameGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.forwardedService == null) {\n      return null;\n    }\n\n    let forwarder: Forwarder = null;\n    const forwarderOptions = new ForwarderOptions();\n    forwarderOptions.website = o.website;\n    if (o.forwardedService === \"simplelogin\") {\n      forwarder = new SimpleLoginForwarder();\n      forwarderOptions.apiKey = o.forwardedSimpleLoginApiKey;\n    } else if (o.forwardedService === \"anonaddy\") {\n      forwarder = new AnonAddyForwarder();\n      forwarderOptions.apiKey = o.forwardedAnonAddyApiToken;\n      forwarderOptions.anonaddy.domain = o.forwardedAnonAddyDomain;\n    } else if (o.forwardedService === \"firefoxrelay\") {\n      forwarder = new FirefoxRelayForwarder();\n      forwarderOptions.apiKey = o.forwardedFirefoxApiToken;\n    } else if (o.forwardedService === \"fastmail\") {\n      forwarder = new FastmailForwarder();\n      forwarderOptions.apiKey = o.forwardedFastmailApiToken;\n    } else if (o.forwardedService === \"duckduckgo\") {\n      forwarder = new DuckDuckGoForwarder();\n      forwarderOptions.apiKey = o.forwardedDuckDuckGoToken;\n    } else if (o.forwardedService === \"forwardemail\") {\n      forwarder = new ForwardEmailForwarder();\n      forwarderOptions.apiKey = o.forwardedForwardEmailApiToken;\n      forwarderOptions.forwardemail.domain = o.forwardedForwardEmailDomain;\n    }\n\n    if (forwarder == null) {\n      return null;\n    }\n\n    return forwarder.generate(this.apiService, forwarderOptions);\n  }\n\n  async getOptions(): Promise<UsernameGeneratorOptions> {\n    let options = await this.stateService.getUsernameGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setUsernameGenerationOptions(options);\n    return options;\n  }\n\n  async saveOptions(options: UsernameGeneratorOptions) {\n    await this.stateService.setUsernameGenerationOptions(options);\n  }\n\n  private async randomString(length: number) {\n    let str = \"\";\n    const charSet = \"abcdefghijklmnopqrstuvwxyz1234567890\";\n    for (let i = 0; i < length; i++) {\n      const randomCharIndex = await this.cryptoService.randomNumber(0, charSet.length - 1);\n      str += charSet.charAt(randomCharIndex);\n    }\n    return str;\n  }\n\n  // ref: https://stackoverflow.com/a/10073788\n  private zeroPad(number: string, width: number) {\n    return number.length >= width\n      ? number\n      : new Array(width - number.length + 1).join(\"0\") + number;\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { PasswordGeneratorPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/password-generator-policy-options\";\nimport { EmailForwarderOptions } from \"@bitwarden/common/models/domain/email-forwarder-options\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { GeneratorOptions } from \"@bitwarden/common/tools/generator/generator-options\";\nimport {\n  PasswordGenerationServiceAbstraction,\n  PasswordGeneratorOptions,\n} from \"@bitwarden/common/tools/generator/password\";\nimport {\n  UsernameGenerationServiceAbstraction,\n  UsernameGeneratorOptions,\n} from \"@bitwarden/common/tools/generator/username\";\n\n@Directive()\nexport class GeneratorComponent implements OnInit {\n  @Input() comingFromAddEdit = false;\n  @Input() type: string;\n  @Output() onSelected = new EventEmitter<string>();\n\n  usernameGeneratingPromise: Promise<string>;\n  typeOptions: any[];\n  passTypeOptions: any[];\n  usernameTypeOptions: any[];\n  subaddressOptions: any[];\n  catchallOptions: any[];\n  forwardOptions: EmailForwarderOptions[];\n  usernameOptions: UsernameGeneratorOptions = {};\n  passwordOptions: PasswordGeneratorOptions = {};\n  username = \"-\";\n  password = \"-\";\n  showOptions = false;\n  avoidAmbiguous = false;\n  enforcedPasswordPolicyOptions: PasswordGeneratorPolicyOptions;\n  usernameWebsite: string = null;\n\n  constructor(\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected usernameGenerationService: UsernameGenerationServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected stateService: StateService,\n    protected i18nService: I18nService,\n    protected logService: LogService,\n    protected route: ActivatedRoute,\n    private win: Window\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"password\"), value: \"password\" },\n      { name: i18nService.t(\"username\"), value: \"username\" },\n    ];\n    this.passTypeOptions = [\n      { name: i18nService.t(\"password\"), value: \"password\" },\n      { name: i18nService.t(\"passphrase\"), value: \"passphrase\" },\n    ];\n    this.usernameTypeOptions = [\n      {\n        name: i18nService.t(\"plusAddressedEmail\"),\n        value: \"subaddress\",\n        desc: i18nService.t(\"plusAddressedEmailDesc\"),\n      },\n      {\n        name: i18nService.t(\"catchallEmail\"),\n        value: \"catchall\",\n        desc: i18nService.t(\"catchallEmailDesc\"),\n      },\n      {\n        name: i18nService.t(\"forwardedEmail\"),\n        value: \"forwarded\",\n        desc: i18nService.t(\"forwardedEmailDesc\"),\n      },\n      { name: i18nService.t(\"randomWord\"), value: \"word\" },\n    ];\n    this.subaddressOptions = [{ name: i18nService.t(\"random\"), value: \"random\" }];\n    this.catchallOptions = [{ name: i18nService.t(\"random\"), value: \"random\" }];\n    this.initForwardOptions();\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      const passwordOptionsResponse = await this.passwordGenerationService.getOptions();\n      this.passwordOptions = passwordOptionsResponse[0];\n      this.enforcedPasswordPolicyOptions = passwordOptionsResponse[1];\n      this.avoidAmbiguous = !this.passwordOptions.ambiguous;\n      this.passwordOptions.type =\n        this.passwordOptions.type === \"passphrase\" ? \"passphrase\" : \"password\";\n\n      this.usernameOptions = await this.usernameGenerationService.getOptions();\n      if (this.usernameOptions.type == null) {\n        this.usernameOptions.type = \"word\";\n      }\n      if (\n        this.usernameOptions.subaddressEmail == null ||\n        this.usernameOptions.subaddressEmail === \"\"\n      ) {\n        this.usernameOptions.subaddressEmail = await this.stateService.getEmail();\n      }\n      if (this.usernameWebsite == null) {\n        this.usernameOptions.subaddressType = this.usernameOptions.catchallType = \"random\";\n      } else {\n        this.usernameOptions.website = this.usernameWebsite;\n        const websiteOption = { name: this.i18nService.t(\"websiteName\"), value: \"website-name\" };\n        this.subaddressOptions.push(websiteOption);\n        this.catchallOptions.push(websiteOption);\n      }\n\n      if (this.type !== \"username\" && this.type !== \"password\") {\n        if (qParams.type === \"username\" || qParams.type === \"password\") {\n          this.type = qParams.type;\n        } else {\n          const generatorOptions = await this.stateService.getGeneratorOptions();\n          this.type = generatorOptions?.type ?? \"password\";\n        }\n      }\n      if (this.regenerateWithoutButtonPress()) {\n        await this.regenerate();\n      }\n    });\n  }\n\n  async typeChanged() {\n    await this.stateService.setGeneratorOptions({ type: this.type } as GeneratorOptions);\n    if (this.regenerateWithoutButtonPress()) {\n      await this.regenerate();\n    }\n  }\n\n  async regenerate() {\n    if (this.type === \"password\") {\n      await this.regeneratePassword();\n    } else if (this.type === \"username\") {\n      await this.regenerateUsername();\n    }\n  }\n\n  async sliderChanged() {\n    this.savePasswordOptions(false);\n    await this.passwordGenerationService.addHistory(this.password);\n  }\n\n  async sliderInput() {\n    this.normalizePasswordOptions();\n    this.password = await this.passwordGenerationService.generatePassword(this.passwordOptions);\n  }\n\n  async savePasswordOptions(regenerate = true) {\n    this.normalizePasswordOptions();\n    await this.passwordGenerationService.saveOptions(this.passwordOptions);\n\n    if (regenerate && this.regenerateWithoutButtonPress()) {\n      await this.regeneratePassword();\n    }\n  }\n\n  async saveUsernameOptions(regenerate = true) {\n    await this.usernameGenerationService.saveOptions(this.usernameOptions);\n    if (this.usernameOptions.type === \"forwarded\") {\n      this.username = \"-\";\n    }\n    if (regenerate && this.regenerateWithoutButtonPress()) {\n      await this.regenerateUsername();\n    }\n  }\n\n  async regeneratePassword() {\n    this.password = await this.passwordGenerationService.generatePassword(this.passwordOptions);\n    await this.passwordGenerationService.addHistory(this.password);\n  }\n\n  regenerateUsername() {\n    return this.generateUsername();\n  }\n\n  async generateUsername() {\n    try {\n      this.usernameGeneratingPromise = this.usernameGenerationService.generateUsername(\n        this.usernameOptions\n      );\n      this.username = await this.usernameGeneratingPromise;\n      if (this.username === \"\" || this.username === null) {\n        this.username = \"-\";\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  copy() {\n    const password = this.type === \"password\";\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(\n      password ? this.password : this.username,\n      copyOptions\n    );\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(password ? \"password\" : \"username\"))\n    );\n  }\n\n  select() {\n    this.onSelected.emit(this.type === \"password\" ? this.password : this.username);\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  regenerateWithoutButtonPress() {\n    return this.type !== \"username\" || this.usernameOptions.type !== \"forwarded\";\n  }\n\n  private normalizePasswordOptions() {\n    // Application level normalize options dependent on class variables\n    this.passwordOptions.ambiguous = !this.avoidAmbiguous;\n\n    if (\n      !this.passwordOptions.uppercase &&\n      !this.passwordOptions.lowercase &&\n      !this.passwordOptions.number &&\n      !this.passwordOptions.special\n    ) {\n      this.passwordOptions.lowercase = true;\n      if (this.win != null) {\n        const lowercase = this.win.document.querySelector(\"#lowercase\") as HTMLInputElement;\n        if (lowercase) {\n          lowercase.checked = true;\n        }\n      }\n    }\n\n    this.passwordGenerationService.normalizeOptions(\n      this.passwordOptions,\n      this.enforcedPasswordPolicyOptions\n    );\n  }\n\n  private async initForwardOptions() {\n    this.forwardOptions = [\n      { name: \"addy.io\", value: \"anonaddy\", validForSelfHosted: true },\n      { name: \"DuckDuckGo\", value: \"duckduckgo\", validForSelfHosted: false },\n      { name: \"Fastmail\", value: \"fastmail\", validForSelfHosted: true },\n      { name: \"Firefox Relay\", value: \"firefoxrelay\", validForSelfHosted: false },\n      { name: \"SimpleLogin\", value: \"simplelogin\", validForSelfHosted: true },\n      { name: \"Forward Email\", value: \"forwardemail\", validForSelfHosted: true },\n    ];\n\n    this.usernameOptions = await this.usernameGenerationService.getOptions();\n    if (\n      this.usernameOptions.forwardedService == null ||\n      this.usernameOptions.forwardedService === \"\"\n    ) {\n      this.forwardOptions.push({ name: \"\", value: null, validForSelfHosted: false });\n    }\n\n    this.forwardOptions = this.forwardOptions.sort((a, b) => a.name.localeCompare(b.name));\n  }\n}\n","import { Directive, ElementRef, HostListener, Input } from \"@angular/core\";\n\nimport { ClientType } from \"@bitwarden/common/enums\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n@Directive({\n  selector: \"[appCopyText]\",\n})\nexport class CopyTextDirective {\n  constructor(private el: ElementRef, private platformUtilsService: PlatformUtilsService) {}\n\n  @Input(\"appCopyText\") copyText: string;\n\n  @HostListener(\"copy\") onCopy() {\n    if (window == null) {\n      return;\n    }\n\n    const timeout = this.platformUtilsService.getClientType() === ClientType.Desktop ? 100 : 0;\n    setTimeout(() => {\n      this.platformUtilsService.copyToClipboard(this.copyText, { window: window });\n    }, timeout);\n  }\n}\n","<ng-container *ngIf=\"show\">\n  <button type=\"button\" (click)=\"expand()\" appA11yTitle=\"{{ 'popOutNewWindow' | i18n }}\">\n    <i class=\"bwi bwi-external-link bwi-rotate-270 bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-pop-out\",\n  templateUrl: \"pop-out.component.html\",\n})\nexport class PopOutComponent implements OnInit {\n  @Input() show = true;\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private popupUtilsService: PopupUtilsService\n  ) {}\n\n  ngOnInit() {\n    if (this.show) {\n      if (\n        (this.popupUtilsService.inSidebar(window) && this.platformUtilsService.isFirefox()) ||\n        this.popupUtilsService.inPopout(window)\n      ) {\n        this.show = false;\n      }\n    }\n  }\n\n  expand() {\n    this.popupUtilsService.popOut(window);\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\n/*\n An updated pipe that sanitizes HTML, highlights numbers and special characters (in different colors each)\n and handles Unicode / Emoji characters correctly.\n*/\n@Pipe({ name: \"colorPassword\" })\nexport class ColorPasswordPipe implements PipeTransform {\n  transform(password: string) {\n    const template = (character: string, type: string) =>\n      `<span class=\"password-${type}\">${character}</span>`;\n    const colorizedPassword = this.generateTemplate(password, template);\n    return colorizedPassword;\n  }\n\n  protected generateTemplate(\n    password: string,\n    templateGenerator: (character: string, type: string, index?: number) => string\n  ) {\n    // Convert to an array to handle cases that stings have special characters, ie: emoji.\n    const passwordArray = Array.from(password);\n    let colorizedPassword = \"\";\n    for (let i = 0; i < passwordArray.length; i++) {\n      let character = passwordArray[i];\n      let isSpecial = false;\n      // Sanitize HTML first.\n      switch (character) {\n        case \"&\":\n          character = \"&amp;\";\n          isSpecial = true;\n          break;\n        case \"<\":\n          character = \"&lt;\";\n          isSpecial = true;\n          break;\n        case \">\":\n          character = \"&gt;\";\n          isSpecial = true;\n          break;\n        case \" \":\n          character = \"&nbsp;\";\n          isSpecial = true;\n          break;\n        default:\n          break;\n      }\n      let type = \"letter\";\n      if (character.match(Utils.regexpEmojiPresentation)) {\n        type = \"emoji\";\n      } else if (isSpecial || character.match(/[^\\w ]/)) {\n        type = \"special\";\n      } else if (character.match(/\\d/)) {\n        type = \"number\";\n      }\n      colorizedPassword += templateGenerator(character, type, i);\n    }\n    return colorizedPassword;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <app-pop-out [show]=\"!comingFromAddEdit\"></app-pop-out>\n    <button type=\"button\" (click)=\"close()\" *ngIf=\"comingFromAddEdit\">\n      {{ \"cancel\" | i18n }}\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"generator\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"select()\" *ngIf=\"comingFromAddEdit\">\n      {{ \"select\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <app-callout type=\"info\" *ngIf=\"enforcedPasswordPolicyOptions?.inEffect() && type === 'password'\">\n    {{ \"passwordGeneratorPolicyInEffect\" | i18n }}\n  </app-callout>\n  <div class=\"generated-block\" *ngIf=\"type === 'password'\">\n    <div\n      class=\"generated-wrapper\"\n      [innerHTML]=\"password | colorPassword\"\n      [appCopyText]=\"password\"\n    ></div>\n    <div class=\"action-buttons\">\n      <button\n        type=\"button\"\n        class=\"row-btn\"\n        appStopClick\n        appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n        (click)=\"copy()\"\n      >\n        <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        appStopClick\n        appA11yTitle=\"{{ 'regeneratePassword' | i18n }}\"\n        (click)=\"regenerate()\"\n      >\n        <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"generated-block\" *ngIf=\"type === 'username'\">\n    <div\n      class=\"generated-wrapper\"\n      [innerHTML]=\"username | colorPassword\"\n      [appCopyText]=\"username\"\n    ></div>\n    <div class=\"action-buttons\" #form [appApiAction]=\"usernameGeneratingPromise\">\n      <button\n        type=\"button\"\n        class=\"row-btn\"\n        appStopClick\n        appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n        (click)=\"copy()\"\n      >\n        <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        appStopClick\n        appA11yTitle=\"{{ 'regenerateUsername' | i18n }}\"\n        (click)=\"$any(form).loading ? false : regenerate()\"\n        [attr.aria-disabled]=\"$any(form).loading ? 'true' : null\"\n      >\n        <i\n          class=\"bwi bwi-lg bwi-generate\"\n          [ngClass]=\"$any(form).loading ? 'bwi-spin' : ''\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"typeHeading\">\n        <label id=\"typeHeading\" class=\"radio-header\">{{\n          \"whatWouldYouLikeToGenerate\" | i18n\n        }}</label>\n        <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of typeOptions\">\n          <input\n            type=\"radio\"\n            [(ngModel)]=\"type\"\n            name=\"Type\"\n            id=\"type_{{ o.value }}\"\n            [value]=\"o.value\"\n            (change)=\"typeChanged()\"\n            [checked]=\"type === o.value\"\n            [disabled]=\"comingFromAddEdit && type !== o.value\"\n          />\n          <label for=\"type_{{ o.value }}\">\n            {{ o.name }}\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"type === 'password'\">\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"options\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"passwordTypeHeading\">\n          <label id=\"passwordTypeHeading\" class=\"radio-header\">{{ \"passwordType\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of passTypeOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"passwordOptions.type\"\n              name=\"PasswordType\"\n              id=\"passwordtype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"savePasswordOptions()\"\n              [checked]=\"passwordOptions.type === o.value\"\n            />\n            <label for=\"passwordtype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"passwordOptions.type === 'passphrase'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-input\" appBoxRow>\n          <label for=\"num-words\">{{ \"numWords\" | i18n }}</label>\n          <input\n            id=\"num-words\"\n            type=\"number\"\n            min=\"3\"\n            max=\"20\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.numWords\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-input\" appBoxRow>\n          <label for=\"word-separator\">{{ \"wordSeparator\" | i18n }}</label>\n          <input\n            id=\"word-separator\"\n            type=\"text\"\n            maxlength=\"1\"\n            (input)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.wordSeparator\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"capitalize\">{{ \"capitalize\" | i18n }}</label>\n          <input\n            id=\"capitalize\"\n            type=\"checkbox\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.capitalize\"\n            [disabled]=\"enforcedPasswordPolicyOptions?.capitalize\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"include-number\">{{ \"includeNumber\" | i18n }}</label>\n          <input\n            id=\"include-number\"\n            type=\"checkbox\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.includeNumber\"\n            [disabled]=\"enforcedPasswordPolicyOptions?.includeNumber\"\n          />\n        </div>\n      </div>\n    </div>\n    <ng-container *ngIf=\"passwordOptions.type === 'password'\">\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-slider\" appBoxRow>\n            <label for=\"length\">{{ \"length\" | i18n }}</label>\n            <input\n              id=\"length\"\n              type=\"number\"\n              min=\"5\"\n              max=\"128\"\n              [(ngModel)]=\"passwordOptions.length\"\n              (change)=\"savePasswordOptions()\"\n            />\n            <input\n              id=\"lengthRange\"\n              type=\"range\"\n              min=\"5\"\n              max=\"128\"\n              step=\"1\"\n              [(ngModel)]=\"passwordOptions.length\"\n              (change)=\"sliderChanged()\"\n              (input)=\"sliderInput()\"\n              attr.aria-label=\"{{ 'length' | i18n }}\"\n              tabindex=\"-1\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"uppercase\">A-Z</label>\n            <input\n              id=\"uppercase\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'uppercase' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useUppercase\"\n              [(ngModel)]=\"passwordOptions.uppercase\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"lowercase\">a-z</label>\n            <input\n              id=\"lowercase\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'lowercase' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useLowercase\"\n              [(ngModel)]=\"passwordOptions.lowercase\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"numbers\">0-9</label>\n            <input\n              id=\"numbers\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'numbers' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useNumbers\"\n              [(ngModel)]=\"passwordOptions.number\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"special\">!@#$%^&*</label>\n            <input\n              id=\"special\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'specialCharacters' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useSpecial\"\n              [(ngModel)]=\"passwordOptions.special\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-input\" appBoxRow>\n            <label for=\"min-number\">{{ \"minNumbers\" | i18n }}</label>\n            <input\n              id=\"min-number\"\n              type=\"number\"\n              min=\"0\"\n              max=\"9\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"passwordOptions.minNumber\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-input\" appBoxRow>\n            <label for=\"min-special\">{{ \"minSpecial\" | i18n }}</label>\n            <input\n              id=\"min-special\"\n              type=\"number\"\n              min=\"0\"\n              max=\"9\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"passwordOptions.minSpecial\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"ambiguous\">{{ \"avoidAmbChar\" | i18n }}</label>\n            <input\n              id=\"ambiguous\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"avoidAmbiguous\"\n            />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <div class=\"box list\">\n      <div class=\"box-content single-line\">\n        <a class=\"box-content-row box-content-row-flex\" routerLink=\"/generator-history\">\n          <div class=\"row-main\">{{ \"passwordHistory\" | i18n }}</div>\n          <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </a>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"type === 'username'\">\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"options\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"usernameTypeHeading\">\n          <label id=\"usernameTypeHeading\" class=\"radio-header\">\n            {{ \"usernameType\" | i18n }}\n            <a\n              href=\"https://bitwarden.com/help/generator/#username-types\"\n              target=\"_blank\"\n              rel=\"noopener\"\n              appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n            </a>\n          </label>\n          <div\n            class=\"radio-group align-start text-default\"\n            appBoxRow\n            *ngFor=\"let o of usernameTypeOptions\"\n          >\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.type\"\n              name=\"UsernameType\"\n              id=\"type_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.type === o.value\"\n            />\n            <label for=\"type_{{ o.value }}\">\n              {{ o.name }}\n              <div class=\"small text-muted\" *ngIf=\"o.desc\">\n                {{ o.desc }}\n              </div>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'forwarded'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"listbox\" aria-labelledby=\"forwardTypeHeading\">\n          <label id=\"forwardTypeHeading\">{{ \"service\" | i18n }}</label>\n          <select\n            id=\"ForwardTypeDropdown\"\n            name=\"ForwardType\"\n            [(ngModel)]=\"usernameOptions.forwardedService\"\n            (change)=\"saveUsernameOptions()\"\n          >\n            <option *ngFor=\"let o of forwardOptions\" [ngValue]=\"o.value\" role=\"option\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'simplelogin'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"simplelogin-apikey\">{{ \"apiKey\" | i18n }}</label>\n            <input\n              id=\"simplelogin-apikey\"\n              type=\"password\"\n              name=\"SimpleLoginApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedSimpleLoginApiKey\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'duckduckgo'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"duckduckgo-apikey\">{{ \"apiKey\" | i18n }}</label>\n            <input\n              id=\"duckduckgo-apikey\"\n              type=\"password\"\n              name=\"DuckDuckGoApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedDuckDuckGoToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'anonaddy'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"anonaddy-accessToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"anonaddy-accessToken\"\n              type=\"password\"\n              name=\"AnonAddyAccessToken\"\n              [(ngModel)]=\"usernameOptions.forwardedAnonAddyApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"anonaddy-domain\">{{ \"domainName\" | i18n }}</label>\n            <input\n              id=\"anonaddy-domain\"\n              type=\"text\"\n              name=\"AnonAddyDomain\"\n              [(ngModel)]=\"usernameOptions.forwardedAnonAddyDomain\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'firefoxrelay'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"firefox-apikey\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"firefox-apikey\"\n              type=\"password\"\n              name=\"FirefoxApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedFirefoxApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'fastmail'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"fastmail-apiToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"fastmail-apiToken\"\n              type=\"password\"\n              name=\"FastmailApiToken\"\n              [(ngModel)]=\"usernameOptions.forwardedFastmailApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'forwardemail'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"forwardemail-accessToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"forwardemail-accessToken\"\n              type=\"password\"\n              name=\"ForwardEmailAccessToken\"\n              [(ngModel)]=\"usernameOptions.forwardedForwardEmailApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"forwardemail-domain\">{{ \"domainName\" | i18n }}</label>\n            <input\n              id=\"forwardemail-domain\"\n              type=\"text\"\n              name=\"ForwardEmailDomain\"\n              [(ngModel)]=\"usernameOptions.forwardedForwardEmailDomain\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'subaddress'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"subaddress-email\">{{ \"emailAddress\" | i18n }}</label>\n          <input\n            id=\"subaddress-email\"\n            type=\"text\"\n            name=\"SubaddressEmail\"\n            [(ngModel)]=\"usernameOptions.subaddressEmail\"\n            (blur)=\"saveUsernameOptions()\"\n          />\n        </div>\n        <div\n          class=\"box-content-row\"\n          role=\"radiogroup\"\n          aria-labelledby=\"subaddressTypeHeading\"\n          *ngIf=\"subaddressOptions.length > 1\"\n        >\n          <label id=\"subaddressTypeHeading\" class=\"radio-header\">{{ \"type\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of subaddressOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.subaddressType\"\n              name=\"SubaddressType\"\n              id=\"subaddresstype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.subaddressType === o.value\"\n            />\n            <label for=\"subaddresstype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"usernameWebsite\">\n          <label for=\"subaddress-website\">{{ \"website\" | i18n }}</label>\n          <input\n            id=\"subaddress-website\"\n            type=\"text\"\n            name=\"SubaddressWebsite\"\n            [value]=\"usernameOptions.website\"\n            disabled\n            readonly\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'catchall'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"catchall-domain\">{{ \"domainName\" | i18n }}</label>\n          <input\n            id=\"catchall-domain\"\n            type=\"text\"\n            name=\"CatchallDomain\"\n            [(ngModel)]=\"usernameOptions.catchallDomain\"\n            (blur)=\"saveUsernameOptions()\"\n          />\n        </div>\n        <div\n          class=\"box-content-row\"\n          role=\"radiogroup\"\n          aria-labelledby=\"catchallTypeHeading\"\n          *ngIf=\"catchallOptions.length > 1\"\n        >\n          <label id=\"catchallTypeHeading\" class=\"radio-header\">{{ \"type\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of catchallOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.catchallType\"\n              name=\"CatchallType\"\n              id=\"catchalltype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.catchallType === o.value\"\n            />\n            <label for=\"catchalltype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"usernameWebsite\">\n          <label for=\"catchall-website\">{{ \"website\" | i18n }}</label>\n          <input\n            id=\"catchall-website\"\n            type=\"text\"\n            name=\"CatchallWebsite\"\n            [value]=\"usernameOptions.website\"\n            disabled\n            readonly\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'word'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"capitalize\">{{ \"capitalize\" | i18n }}</label>\n          <input\n            id=\"capitalize\"\n            type=\"checkbox\"\n            (change)=\"saveUsernameOptions()\"\n            [(ngModel)]=\"usernameOptions.wordCapitalize\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"include-number\">{{ \"includeNumber\" | i18n }}</label>\n          <input\n            id=\"include-number\"\n            type=\"checkbox\"\n            (change)=\"saveUsernameOptions()\"\n            [(ngModel)]=\"usernameOptions.wordIncludeNumber\"\n          />\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\n\nimport { GeneratorComponent as BaseGeneratorComponent } from \"@bitwarden/angular/tools/generator/components/generator.component\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { UsernameGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/username\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { AddEditCipherInfo } from \"@bitwarden/common/vault/types/add-edit-cipher-info\";\n\n@Component({\n  selector: \"app-generator\",\n  templateUrl: \"generator.component.html\",\n})\nexport class GeneratorComponent extends BaseGeneratorComponent {\n  private addEditCipherInfo: AddEditCipherInfo;\n  private cipherState: CipherView;\n\n  constructor(\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    usernameGenerationService: UsernameGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    stateService: StateService,\n    route: ActivatedRoute,\n    logService: LogService,\n    private location: Location\n  ) {\n    super(\n      passwordGenerationService,\n      usernameGenerationService,\n      platformUtilsService,\n      stateService,\n      i18nService,\n      logService,\n      route,\n      window\n    );\n  }\n\n  async ngOnInit() {\n    this.addEditCipherInfo = await this.stateService.getAddEditCipherInfo();\n    if (this.addEditCipherInfo != null) {\n      this.cipherState = this.addEditCipherInfo.cipher;\n    }\n    this.comingFromAddEdit = this.cipherState != null;\n    if (this.cipherState?.login?.hasUris) {\n      this.usernameWebsite = this.cipherState.login.uris[0].hostname;\n    }\n    await super.ngOnInit();\n  }\n\n  select() {\n    super.select();\n    if (this.type === \"password\") {\n      this.cipherState.login.password = this.password;\n    } else if (this.type === \"username\") {\n      this.cipherState.login.username = this.username;\n    }\n    this.addEditCipherInfo.cipher = this.cipherState;\n    this.stateService.setAddEditCipherInfo(this.addEditCipherInfo);\n    this.close();\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","export enum SendType {\n  Text = 0,\n  File = 1,\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport {\n  GeneratedPasswordHistory,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\n\n@Directive()\nexport class PasswordGeneratorHistoryComponent implements OnInit {\n  history: GeneratedPasswordHistory[] = [];\n\n  constructor(\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    private win: Window\n  ) {}\n\n  async ngOnInit() {\n    this.history = await this.passwordGenerationService.getHistory();\n  }\n\n  clear = async () => {\n    this.history = [];\n    await this.passwordGenerationService.clear();\n  };\n\n  copy(password: string) {\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(password, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" type=\"button\" (click)=\"close()\">\n      <span class=\"header-icon\" aria-hidden=\"true\"><i class=\"bwi bwi-angle-left\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"passwordHistory\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" type=\"button\" (click)=\"clear()\">\n      {{ \"clear\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"history && history.length\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let h of history\">\n        <div class=\"row-main\">\n          <div class=\"row-main-content\">\n            <div\n              class=\"monospaced password-wrapper\"\n              [appCopyText]=\"h.password\"\n              [innerHTML]=\"h.password | colorPassword\"\n            ></div>\n            <span class=\"detail\">{{ h.date | date : \"medium\" }}</span>\n          </div>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n            (click)=\"copy(h.password)\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!history || !history.length\">\n    <p>{{ \"noPasswordsInList\" | i18n }}</p>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\n\nimport { PasswordGeneratorHistoryComponent as BasePasswordGeneratorHistoryComponent } from \"@bitwarden/angular/tools/generator/components/password-generator-history.component\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\n@Component({\n  selector: \"app-password-generator-history\",\n  templateUrl: \"password-generator-history.component.html\",\n})\nexport class PasswordGeneratorHistoryComponent extends BasePasswordGeneratorHistoryComponent {\n  constructor(\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    private location: Location\n  ) {\n    super(passwordGenerationService, platformUtilsService, i18nService, window);\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","import { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendFile } from \"../domain/send-file\";\n\nexport class SendFileView implements View {\n  id: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n\n  constructor(f?: SendFile) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.size = f.size;\n    this.sizeName = f.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(json: DeepJsonify<SendFileView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFileView(), json);\n  }\n}\n","import { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendText } from \"../domain/send-text\";\n\nexport class SendTextView implements View {\n  text: string = null;\n  hidden: boolean;\n\n  constructor(t?: SendText) {\n    if (!t) {\n      return;\n    }\n\n    this.hidden = t.hidden;\n  }\n\n  get maskedText(): string {\n    return this.text != null ? \"\" : null;\n  }\n\n  static fromJSON(json: DeepJsonify<SendTextView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendTextView(), json);\n  }\n}\n","import { Jsonify, Opaque } from \"type-fest\";\n\nimport { EncryptionType } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\n\nexport class SymmetricCryptoKey {\n  key: Uint8Array;\n  encKey?: Uint8Array;\n  macKey?: Uint8Array;\n  encType: EncryptionType;\n\n  keyB64: string;\n  encKeyB64: string;\n  macKeyB64: string;\n\n  meta: any;\n\n  constructor(key: Uint8Array, encType?: EncryptionType) {\n    if (key == null) {\n      throw new Error(\"Must provide key\");\n    }\n\n    if (encType == null) {\n      if (key.byteLength === 32) {\n        encType = EncryptionType.AesCbc256_B64;\n      } else if (key.byteLength === 64) {\n        encType = EncryptionType.AesCbc256_HmacSha256_B64;\n      } else {\n        throw new Error(\"Unable to determine encType.\");\n      }\n    }\n\n    this.key = key;\n    this.encType = encType;\n\n    if (encType === EncryptionType.AesCbc256_B64 && key.byteLength === 32) {\n      this.encKey = key;\n      this.macKey = null;\n    } else if (encType === EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {\n      this.encKey = key.slice(0, 16);\n      this.macKey = key.slice(16, 32);\n    } else if (encType === EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {\n      this.encKey = key.slice(0, 32);\n      this.macKey = key.slice(32, 64);\n    } else {\n      throw new Error(\"Unsupported encType/key length.\");\n    }\n\n    if (this.key != null) {\n      this.keyB64 = Utils.fromBufferToB64(this.key);\n    }\n    if (this.encKey != null) {\n      this.encKeyB64 = Utils.fromBufferToB64(this.encKey);\n    }\n    if (this.macKey != null) {\n      this.macKeyB64 = Utils.fromBufferToB64(this.macKey);\n    }\n  }\n\n  toJSON() {\n    // The whole object is constructed from the initial key, so just store the B64 key\n    return { keyB64: this.keyB64 };\n  }\n\n  static fromString(s: string): SymmetricCryptoKey {\n    if (s == null) {\n      return null;\n    }\n\n    const arrayBuffer = Utils.fromB64ToArray(s);\n    return new SymmetricCryptoKey(arrayBuffer);\n  }\n\n  static fromJSON(obj: Jsonify<SymmetricCryptoKey>): SymmetricCryptoKey {\n    return SymmetricCryptoKey.fromString(obj?.keyB64);\n  }\n}\n\n// Setup all separate key types as opaque types\nexport type DeviceKey = Opaque<SymmetricCryptoKey, \"DeviceKey\">;\nexport type UserKey = Opaque<SymmetricCryptoKey, \"UserKey\">;\nexport type MasterKey = Opaque<SymmetricCryptoKey, \"MasterKey\">;\nexport type PinKey = Opaque<SymmetricCryptoKey, \"PinKey\">;\nexport type OrgKey = Opaque<SymmetricCryptoKey, \"OrgKey\">;\nexport type ProviderKey = Opaque<SymmetricCryptoKey, \"ProviderKey\">;\nexport type CipherKey = Opaque<SymmetricCryptoKey, \"CipherKey\">;\n","import { View } from \"../../../../models/view/view\";\nimport { Utils } from \"../../../../platform/misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../../platform/models/domain/symmetric-crypto-key\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendType } from \"../../enums/send-type\";\nimport { Send } from \"../domain/send\";\n\nimport { SendFileView } from \"./send-file.view\";\nimport { SendTextView } from \"./send-text.view\";\n\nexport class SendView implements View {\n  id: string = null;\n  accessId: string = null;\n  name: string = null;\n  notes: string = null;\n  key: Uint8Array;\n  cryptoKey: SymmetricCryptoKey;\n  type: SendType = null;\n  text = new SendTextView();\n  file = new SendFileView();\n  maxAccessCount?: number = null;\n  accessCount = 0;\n  revisionDate: Date = null;\n  deletionDate: Date = null;\n  expirationDate: Date = null;\n  password: string = null;\n  disabled = false;\n  hideEmail = false;\n\n  constructor(s?: Send) {\n    if (!s) {\n      return;\n    }\n\n    this.id = s.id;\n    this.accessId = s.accessId;\n    this.type = s.type;\n    this.maxAccessCount = s.maxAccessCount;\n    this.accessCount = s.accessCount;\n    this.revisionDate = s.revisionDate;\n    this.deletionDate = s.deletionDate;\n    this.expirationDate = s.expirationDate;\n    this.disabled = s.disabled;\n    this.password = s.password;\n    this.hideEmail = s.hideEmail;\n  }\n\n  get urlB64Key(): string {\n    return Utils.fromBufferToUrlB64(this.key);\n  }\n\n  get maxAccessCountReached(): boolean {\n    if (this.maxAccessCount == null) {\n      return false;\n    }\n    return this.accessCount >= this.maxAccessCount;\n  }\n\n  get expired(): boolean {\n    if (this.expirationDate == null) {\n      return false;\n    }\n    return this.expirationDate <= new Date();\n  }\n\n  get pendingDelete(): boolean {\n    return this.deletionDate <= new Date();\n  }\n\n  toJSON() {\n    return Utils.merge(\n      { ...this },\n      {\n        key: Utils.fromBufferToB64(this.key),\n      }\n    );\n  }\n\n  static fromJSON(json: DeepJsonify<SendView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendView(), json, {\n      key: Utils.fromB64ToArray(json.key),\n      cryptoKey: SymmetricCryptoKey.fromJSON(json.cryptoKey),\n      text: SendTextView.fromJSON(json.text),\n      file: SendFileView.fromJSON(json.file),\n      revisionDate: json.revisionDate == null ? null : new Date(json.revisionDate),\n      deletionDate: json.deletionDate == null ? null : new Date(json.deletionDate),\n      expirationDate: json.expirationDate == null ? null : new Date(json.expirationDate),\n    });\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendView } from \"../models/view/send.view\";\n\nexport abstract class SendService {\n  sends$: Observable<Send[]>;\n  sendViews$: Observable<SendView[]>;\n\n  encrypt: (\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ) => Promise<[Send, EncArrayBuffer]>;\n  get: (id: string) => Send;\n  /**\n   * @deprecated Do not call this, use the sends$ observable collection\n   */\n  getAll: () => Promise<Send[]>;\n  /**\n   * @deprecated Only use in CLI\n   */\n  getFromState: (id: string) => Promise<Send>;\n  /**\n   * @deprecated Only use in CLI\n   */\n  getAllDecryptedFromState: () => Promise<SendView[]>;\n}\n\nexport abstract class InternalSendService extends SendService {\n  upsert: (send: SendData | SendData[]) => Promise<any>;\n  replace: (sends: { [id: string]: SendData }) => Promise<void>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { ListResponse } from \"../../../models/response/list.response\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { Send } from \"../models/domain/send\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\n\nexport abstract class SendApiService {\n  getSend: (id: string) => Promise<SendResponse>;\n  postSendAccess: (\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ) => Promise<SendAccessResponse>;\n  getSends: () => Promise<ListResponse<SendResponse>>;\n  postSend: (request: SendRequest) => Promise<SendResponse>;\n  postFileTypeSend: (request: SendRequest) => Promise<SendFileUploadDataResponse>;\n  postSendFile: (sendId: string, fileId: string, data: FormData) => Promise<any>;\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postSendFileLegacy: (data: FormData) => Promise<SendResponse>;\n  putSend: (id: string, request: SendRequest) => Promise<SendResponse>;\n  putSendRemovePassword: (id: string) => Promise<SendResponse>;\n  deleteSend: (id: string) => Promise<any>;\n  getSendFileDownloadData: (\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ) => Promise<SendFileDownloadDataResponse>;\n  renewSendFileUploadUrl: (sendId: string, fileId: string) => Promise<SendFileUploadDataResponse>;\n  removePassword: (id: string) => Promise<any>;\n  delete: (id: string) => Promise<any>;\n  save: (sendData: [Send, EncArrayBuffer]) => Promise<any>;\n}\n","import { DatePipe } from \"@angular/common\";\nimport { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncArrayBuffer } from \"@bitwarden/common/platform/models/domain/enc-array-buffer\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { Send } from \"@bitwarden/common/tools/send/models/domain/send\";\nimport { SendFileView } from \"@bitwarden/common/tools/send/models/view/send-file.view\";\nimport { SendTextView } from \"@bitwarden/common/tools/send/models/view/send-text.view\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\n// Value = hours\nenum DatePreset {\n  OneHour = 1,\n  OneDay = 24,\n  TwoDays = 48,\n  ThreeDays = 72,\n  SevenDays = 168,\n  ThirtyDays = 720,\n  Custom = 0,\n  Never = null,\n}\n\ninterface DatePresetSelectOption {\n  name: string;\n  value: DatePreset;\n}\n\n@Directive()\nexport class AddEditComponent implements OnInit, OnDestroy {\n  @Input() sendId: string;\n  @Input() type: SendType;\n\n  @Output() onSavedSend = new EventEmitter<SendView>();\n  @Output() onDeletedSend = new EventEmitter<SendView>();\n  @Output() onCancelled = new EventEmitter<SendView>();\n\n  deletionDatePresets: DatePresetSelectOption[] = [\n    { name: this.i18nService.t(\"oneHour\"), value: DatePreset.OneHour },\n    { name: this.i18nService.t(\"oneDay\"), value: DatePreset.OneDay },\n    { name: this.i18nService.t(\"days\", \"2\"), value: DatePreset.TwoDays },\n    { name: this.i18nService.t(\"days\", \"3\"), value: DatePreset.ThreeDays },\n    { name: this.i18nService.t(\"days\", \"7\"), value: DatePreset.SevenDays },\n    { name: this.i18nService.t(\"days\", \"30\"), value: DatePreset.ThirtyDays },\n    { name: this.i18nService.t(\"custom\"), value: DatePreset.Custom },\n  ];\n\n  expirationDatePresets: DatePresetSelectOption[] = [\n    { name: this.i18nService.t(\"never\"), value: DatePreset.Never },\n    ...this.deletionDatePresets,\n  ];\n\n  copyLink = false;\n  disableSend = false;\n  disableHideEmail = false;\n  send: SendView;\n  hasPassword: boolean;\n  showPassword = false;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  sendType = SendType;\n  typeOptions: any[];\n  canAccessPremium = true;\n  emailVerified = true;\n  alertShown = false;\n  showOptions = false;\n\n  protected componentName = \"\";\n  private sendLinkBaseUrl: string;\n  private destroy$ = new Subject<void>();\n\n  protected formGroup = this.formBuilder.group({\n    name: [\"\", Validators.required],\n    text: [],\n    textHidden: [false],\n    fileContents: [],\n    file: [null, Validators.required],\n    link: [],\n    copyLink: false,\n    maxAccessCount: [],\n    accessCount: [],\n    password: [],\n    notes: [],\n    hideEmail: false,\n    disabled: false,\n    type: [],\n    defaultExpirationDateTime: [],\n    defaultDeletionDateTime: [\"\", Validators.required],\n    selectedDeletionDatePreset: [DatePreset.SevenDays, Validators.required],\n    selectedExpirationDatePreset: [],\n  });\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected datePipe: DatePipe,\n    protected sendService: SendService,\n    protected messagingService: MessagingService,\n    protected policyService: PolicyService,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected sendApiService: SendApiService,\n    protected dialogService: DialogService,\n    protected formBuilder: FormBuilder\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"sendTypeFile\"), value: SendType.File },\n      { name: i18nService.t(\"sendTypeText\"), value: SendType.Text },\n    ];\n    this.sendLinkBaseUrl = this.environmentService.getSendUrl();\n  }\n\n  get link(): string {\n    if (this.send != null && this.send.id != null && this.send.accessId != null) {\n      return this.sendLinkBaseUrl + this.send.accessId + \"/\" + this.send.urlB64Key;\n    }\n    return null;\n  }\n\n  get isSafari() {\n    return this.platformUtilsService.isSafari();\n  }\n\n  get isDateTimeLocalSupported(): boolean {\n    return !(this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari());\n  }\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisableSend)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableSend = policyAppliesToActiveUser;\n        if (this.disableSend) {\n          this.formGroup.disable();\n        }\n      });\n\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.SendOptions, (p) => p.data.disableHideEmail)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        if (\n          (this.disableHideEmail = policyAppliesToActiveUser) &&\n          !this.formGroup.controls.hideEmail.value\n        ) {\n          this.formGroup.controls.hideEmail.disable();\n        } else {\n          this.formGroup.controls.hideEmail.enable();\n        }\n      });\n\n    this.formGroup.controls.type.valueChanges.subscribe((val) => {\n      this.type = val;\n      this.typeChanged();\n    });\n\n    this.formGroup.controls.selectedDeletionDatePreset.valueChanges\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((datePreset) => {\n        datePreset === DatePreset.Custom\n          ? this.formGroup.controls.defaultDeletionDateTime.enable()\n          : this.formGroup.controls.defaultDeletionDateTime.disable();\n      });\n\n    this.formGroup.controls.hideEmail.valueChanges\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((val) => {\n        if (!val && this.disableHideEmail) {\n          this.formGroup.controls.hideEmail.disable();\n        }\n      });\n\n    await this.load();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  get editMode(): boolean {\n    return this.sendId != null;\n  }\n\n  get title(): string {\n    return this.i18nService.t(this.editMode ? \"editSend\" : \"createSend\");\n  }\n\n  async load() {\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.emailVerified = await this.stateService.getEmailVerified();\n\n    this.type = !this.canAccessPremium || !this.emailVerified ? SendType.Text : SendType.File;\n    if (this.send == null) {\n      if (this.editMode) {\n        const send = this.loadSend();\n        this.send = await send.decrypt();\n        this.type = this.send.type;\n        this.updateFormValues();\n      } else {\n        this.send = new SendView();\n        this.send.type = this.type;\n        this.send.file = new SendFileView();\n        this.send.text = new SendTextView();\n        this.send.deletionDate = new Date();\n        this.send.deletionDate.setDate(this.send.deletionDate.getDate() + 7);\n        this.formGroup.controls.type.patchValue(this.send.type);\n\n        this.formGroup.patchValue({\n          selectedDeletionDatePreset: DatePreset.SevenDays,\n          selectedExpirationDatePreset: DatePreset.Never,\n        });\n      }\n    }\n\n    this.hasPassword = this.send.password != null && this.send.password.trim() !== \"\";\n  }\n\n  async submit(): Promise<boolean> {\n    this.formGroup.markAllAsTouched();\n\n    if (this.disableSend) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"sendDisabledWarning\")\n      );\n      return false;\n    }\n\n    this.send.name = this.formGroup.controls.name.value;\n    this.send.text.text = this.formGroup.controls.text.value;\n    this.send.text.hidden = this.formGroup.controls.textHidden.value;\n    this.send.maxAccessCount = this.formGroup.controls.maxAccessCount.value;\n    this.send.accessCount = this.formGroup.controls.accessCount.value;\n    this.send.password = this.formGroup.controls.password.value;\n    this.send.notes = this.formGroup.controls.notes.value;\n    this.send.hideEmail = this.formGroup.controls.hideEmail.value;\n    this.send.disabled = this.formGroup.controls.disabled.value;\n    this.send.type = this.type;\n\n    if (Utils.isNullOrWhitespace(this.send.name)) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    let file: File = null;\n    if (this.type === SendType.File && !this.editMode) {\n      const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n      const files = fileEl.files;\n      if (files == null || files.length === 0) {\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"selectFile\")\n        );\n        return;\n      }\n\n      file = files[0];\n      if (files[0].size > 524288000) {\n        // 500 MB\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"maxFileSize\")\n        );\n        return;\n      }\n    }\n\n    if (Utils.isNullOrWhitespace(this.send.password)) {\n      this.send.password = null;\n    }\n\n    this.formPromise = this.encryptSend(file).then(async (encSend) => {\n      const uploadPromise = this.sendApiService.save(encSend);\n      await uploadPromise;\n      if (this.send.id == null) {\n        this.send.id = encSend[0].id;\n      }\n      if (this.send.accessId == null) {\n        this.send.accessId = encSend[0].accessId;\n      }\n      this.onSavedSend.emit(this.send);\n      if (this.formGroup.controls.copyLink.value && this.link != null) {\n        await this.handleCopyLinkToClipboard();\n        return;\n      }\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\")\n      );\n    });\n    try {\n      await this.formPromise;\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n    return false;\n  }\n\n  async copyLinkToClipboard(link: string): Promise<void | boolean> {\n    return Promise.resolve(this.platformUtilsService.copyToClipboard(link));\n  }\n\n  protected async delete(): Promise<boolean> {\n    if (this.deletePromise != null) {\n      return false;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"deleteSend\" },\n      content: { key: \"deleteSendConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.sendApiService.delete(this.send.id);\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedSend\"));\n      await this.load();\n      this.onDeletedSend.emit(this.send);\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  typeChanged() {\n    if (this.type === SendType.File && !this.alertShown) {\n      if (!this.canAccessPremium) {\n        this.alertShown = true;\n        this.messagingService.send(\"premiumRequired\");\n      } else if (!this.emailVerified) {\n        this.alertShown = true;\n        this.messagingService.send(\"emailVerificationRequired\");\n      }\n    }\n    this.type === SendType.Text || this.editMode\n      ? this.formGroup.controls.file.disable()\n      : this.formGroup.controls.file.enable();\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  protected loadSend(): Send {\n    return this.sendService.get(this.sendId);\n  }\n\n  protected async encryptSend(file: File): Promise<[Send, EncArrayBuffer]> {\n    const sendData = await this.sendService.encrypt(this.send, file, this.send.password, null);\n\n    // Parse dates\n    try {\n      sendData[0].deletionDate =\n        this.formattedDeletionDate == null ? null : new Date(this.formattedDeletionDate);\n    } catch {\n      sendData[0].deletionDate = null;\n    }\n    try {\n      sendData[0].expirationDate =\n        this.formattedExpirationDate == null ? null : new Date(this.formattedExpirationDate);\n    } catch {\n      sendData[0].expirationDate = null;\n    }\n\n    return sendData;\n  }\n\n  protected togglePasswordVisible() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"password\").focus();\n  }\n\n  updateFormValues() {\n    this.formGroup.patchValue({\n      name: this.send?.name ?? \"\",\n      text: this.send?.text?.text ?? \"\",\n      textHidden: this.send?.text?.hidden ?? false,\n      link: this.link ?? \"\",\n      maxAccessCount: this.send?.maxAccessCount,\n      accessCount: this.send?.accessCount ?? 0,\n      notes: this.send?.notes ?? \"\",\n      hideEmail: this.send?.hideEmail ?? false,\n      disabled: this.send?.disabled ?? false,\n      type: this.send.type ?? this.type,\n      password: null,\n\n      selectedDeletionDatePreset: this.editMode ? DatePreset.Custom : DatePreset.SevenDays,\n      selectedExpirationDatePreset: this.editMode ? DatePreset.Custom : DatePreset.Never,\n      defaultExpirationDateTime:\n        this.send.expirationDate != null\n          ? this.datePipe.transform(new Date(this.send.expirationDate), \"yyyy-MM-ddTHH:mm\")\n          : null,\n      defaultDeletionDateTime: this.datePipe.transform(\n        new Date(this.send.deletionDate),\n        \"yyyy-MM-ddTHH:mm\"\n      ),\n    });\n\n    if (this.send.hideEmail) {\n      this.formGroup.controls.hideEmail.enable();\n    }\n  }\n\n  private async handleCopyLinkToClipboard() {\n    const copySuccess = await this.copyLinkToClipboard(this.link);\n    if (copySuccess ?? true) {\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\")\n      );\n    } else {\n      await this.dialogService.openSimpleDialog({\n        title: \"\",\n        content: { key: this.editMode ? \"editedSend\" : \"createdSend\" },\n        acceptButtonText: { key: \"ok\" },\n        cancelButtonText: null,\n        type: \"success\",\n      });\n\n      await this.copyLinkToClipboard(this.link);\n    }\n  }\n\n  clearExpiration() {\n    this.formGroup.controls.defaultExpirationDateTime.patchValue(null);\n  }\n\n  get formattedExpirationDate(): string {\n    switch (this.formGroup.controls.selectedExpirationDatePreset.value as DatePreset) {\n      case DatePreset.Never:\n        return null;\n      case DatePreset.Custom:\n        if (!this.formGroup.controls.defaultExpirationDateTime.value) {\n          return null;\n        }\n        return this.formGroup.controls.defaultExpirationDateTime.value;\n      default: {\n        const now = new Date();\n        const milliseconds = now.setTime(\n          now.getTime() +\n            (this.formGroup.controls.selectedExpirationDatePreset.value as number) * 60 * 60 * 1000\n        );\n        return new Date(milliseconds).toString();\n      }\n    }\n  }\n\n  get formattedDeletionDate(): string {\n    switch (this.formGroup.controls.selectedDeletionDatePreset.value as DatePreset) {\n      case DatePreset.Never:\n        this.formGroup.controls.selectedDeletionDatePreset.patchValue(DatePreset.SevenDays);\n        return this.formattedDeletionDate;\n      case DatePreset.Custom:\n        return this.formGroup.controls.defaultDeletionDateTime.value;\n      default: {\n        const now = new Date();\n        const milliseconds = now.setTime(\n          now.getTime() +\n            (this.formGroup.controls.selectedDeletionDatePreset.value as number) * 60 * 60 * 1000\n        );\n        return new Date(milliseconds).toString();\n      }\n    }\n  }\n}\n","import { StateService as BaseStateServiceAbstraction } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { StorageOptions } from \"@bitwarden/common/platform/models/domain/storage-options\";\n\nimport { Account } from \"../../../models/account\";\nimport { BrowserComponentState } from \"../../../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../../../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../../../models/browserSendComponentState\";\n\nexport abstract class BrowserStateService extends BaseStateServiceAbstraction<Account> {\n  getBrowserGroupingComponentState: (\n    options?: StorageOptions\n  ) => Promise<BrowserGroupingsComponentState>;\n  setBrowserGroupingComponentState: (\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserVaultItemsComponentState: (options?: StorageOptions) => Promise<BrowserComponentState>;\n  setBrowserVaultItemsComponentState: (\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserSendComponentState: (options?: StorageOptions) => Promise<BrowserSendComponentState>;\n  setBrowserSendComponentState: (\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserSendTypeComponentState: (options?: StorageOptions) => Promise<BrowserComponentState>;\n  setBrowserSendTypeComponentState: (\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"send\">\n    <!-- Policy Banner -->\n    <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n      {{ \"sendDisabledWarning\" | i18n }}\n    </app-callout>\n    <app-callout type=\"info\" *ngIf=\"disableHideEmail && !disableSend\">\n      {{ \"sendOptionsPolicyInEffect\" | i18n }}\n    </app-callout>\n    <!-- File Warning -->\n    <app-callout\n      type=\"warning\"\n      icon=\"bwi-external-link bwi-rotate-270 bwi-fw\"\n      [clickable]=\"true\"\n      title=\"{{ 'sendFileCalloutHeader' | i18n }}\"\n      *ngIf=\"showFilePopoutMessage && type === sendType.File && !disableSend\"\n      (click)=\"popOutWindow()\"\n    >\n      <div *ngIf=\"showChromiumFileWarning\">{{ \"sendLinuxChromiumFileWarning\" | i18n }}</div>\n      <div *ngIf=\"showFirefoxFileWarning\">{{ \"sendFirefoxFileWarning\" | i18n }}</div>\n      <div *ngIf=\"showSafariFileWarning\">{{ \"sendSafariFileWarning\" | i18n }}</div>\n    </app-callout>\n    <!-- Name -->\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            formControlName=\"name\"\n            aria-describedby=\"nameHelp\"\n            [readonly]=\"disableSend\"\n          />\n        </div>\n      </div>\n      <div id=\"nameHelp\" class=\"box-footer\">\n        {{ \"sendNameDesc\" | i18n }}\n      </div>\n    </div>\n    <!-- Type Options -->\n    <div class=\"box\" *ngIf=\"!editMode\">\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\">\n          <label for=\"sendTypeOptions\">{{ \"sendTypeHeader\" | i18n }}</label>\n          <div\n            class=\"radio-group text-default\"\n            appBoxRow\n            name=\"SendTypeOptions\"\n            *ngFor=\"let o of typeOptions\"\n          >\n            <input\n              type=\"radio\"\n              formControlName=\"type\"\n              id=\"type_{{ o.value }}\"\n              [value]=\"o.value\"\n              [readonly]=\"disableSend\"\n            />\n            <label for=\"type_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- File -->\n    <div class=\"box\" *ngIf=\"type === sendType.File && (editMode || showFileSelector)\">\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\" *ngIf=\"editMode\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <div class=\"row-main\">{{ send.file.fileName }} ({{ send.file.sizeName }})</div>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"showFileSelector\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <input\n            type=\"file\"\n            id=\"file\"\n            formControlName=\"file\"\n            aria-describedby=\"fileHelp\"\n            [readonly]=\"disableSend\"\n          />\n        </div>\n      </div>\n      <div id=\"fileHelp\" class=\"box-footer\" *ngIf=\"showFileSelector\">\n        {{ \"sendFileDesc\" | i18n }} {{ \"maxFileSize\" | i18n }}\n      </div>\n    </div>\n    <!-- Text -->\n    <div class=\"box\" *ngIf=\"type === sendType.Text\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"text\">{{ \"sendTypeText\" | i18n }}</label>\n          <textarea\n            id=\"text\"\n            formControlName=\"text\"\n            aria-describedby=\"textHelp\"\n            rows=\"6\"\n          ></textarea>\n        </div>\n      </div>\n      <div id=\"textHelp\" class=\"box-footer\">\n        {{ \"sendTextDesc\" | i18n }}\n      </div>\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"hideText\">{{ \"sendHideText\" | i18n }}</label>\n          <input id=\"hideText\" type=\"checkbox\" name=\"HideText\" formControlName=\"textHidden\" />\n        </div>\n      </div>\n    </div>\n    <!-- Share -->\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"share\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <!-- Copy Link on Save -->\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"copyOnSave\">{{ \"sendShareDesc\" | i18n }}</label>\n          <input id=\"copyOnSave\" type=\"checkbox\" name=\"CopyOnSave\" formControlName=\"copyLink\" />\n        </div>\n      </div>\n    </div>\n    <!-- Options -->\n    <div class=\"box\">\n      <h2>\n        <button\n          type=\"button\"\n          class=\"box-header-expandable\"\n          (click)=\"showOptions = !showOptions\"\n          [attr.aria-expanded]=\"showOptions\"\n        >\n          <i *ngIf=\"!showOptions\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n          <i *ngIf=\"showOptions\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n          {{ \"options\" | i18n }}\n        </button>\n      </h2>\n    </div>\n    <div [hidden]=\"!showOptions\">\n      <!-- Deletion Date -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <ng-container *ngIf=\"!editMode\">\n            <div class=\"box-content-row\" appBoxRow>\n              <label for=\"deletionDate\">{{ \"deletionDate\" | i18n }}</label>\n              <select\n                id=\"deletionDate\"\n                name=\"DeletionDateSelect\"\n                aria-describedby=\"deletionDateHelp\"\n                formControlName=\"selectedDeletionDatePreset\"\n                required\n              >\n                <option *ngFor=\"let o of deletionDatePresets\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </div>\n            <div\n              class=\"box-content-row\"\n              appBoxRow\n              *ngIf=\"formGroup.controls['selectedDeletionDatePreset'].value === 0\"\n            >\n              <input\n                id=\"deletionDateCustom\"\n                type=\"datetime-local\"\n                name=\"DeletionDate\"\n                aria-describedby=\"deletionDateHelp\"\n                formControlName=\"defaultDeletionDateTime\"\n                required\n                placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n              />\n            </div>\n          </ng-container>\n          <div class=\"box-content-row\" appBoxRow *ngIf=\"editMode\">\n            <label for=\"deletionDate\">{{ \"deletionDate\" | i18n }}</label>\n            <input\n              id=\"deletionDateCustom\"\n              type=\"datetime-local\"\n              name=\"DeletionDate\"\n              aria-describedby=\"deletionDateHelp\"\n              formControlName=\"defaultDeletionDateTime\"\n              required\n              placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n            />\n          </div>\n        </div>\n        <div id=\"deletionDateHelp\" class=\"box-footer\">\n          {{ \"deletionDateDesc\" | i18n }}\n          <ng-container\n            *ngIf=\"\n              !inPopout &&\n              isFirefox &&\n              (editMode ||\n                (formGroup.controls['selectedDeletionDatePreset'].value === 0 && !editMode))\n            \"\n          >\n            <br />{{ \"sendFirefoxCustomDatePopoutMessage1\" | i18n }}\n            <a (click)=\"popOutWindow()\">{{ \"sendFirefoxCustomDatePopoutMessage2\" | i18n }}</a>\n            {{ \"sendFirefoxCustomDatePopoutMessage3\" | i18n }}\n          </ng-container>\n        </div>\n      </div>\n\n      <!-- Expiration Date -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <ng-container *ngIf=\"!editMode\">\n            <div class=\"box-content-row\" *ngIf=\"!editMode\" appBoxRow>\n              <label for=\"editExpirationDate\">{{ \"expirationDate\" | i18n }}</label>\n              <select\n                id=\"expirationDate\"\n                name=\"ExpirationDateSelect\"\n                aria-describedby=\"expirationDateHelp\"\n                formControlName=\"selectedExpirationDatePreset\"\n                required\n              >\n                <option *ngFor=\"let o of expirationDatePresets\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </div>\n            <div\n              class=\"box-content-row\"\n              *ngIf=\"formGroup.controls['selectedExpirationDatePreset'].value === 0\"\n              appBoxRow\n            >\n              <input\n                id=\"expirationDateCustom\"\n                type=\"datetime-local\"\n                name=\"ExpirationDate\"\n                aria-describedby=\"expirationDateHelp\"\n                formControlName=\"defaultExpirationDateTime\"\n                required\n                placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n                [readOnly]=\"disableSend\"\n              />\n            </div>\n          </ng-container>\n          <div class=\"box-content-row\" *ngIf=\"editMode\" appBoxRow>\n            <div class=\"flex-label\">\n              <label>{{ \"expirationDate\" | i18n }}</label>\n              <button type=\"button\" *ngIf=\"!disableSend\" appStopClick (click)=\"clearExpiration()\">\n                {{ \"clear\" | i18n }}\n              </button>\n            </div>\n            <input\n              id=\"expirationDateCustom\"\n              type=\"datetime-local\"\n              name=\"ExpirationDate\"\n              aria-describedby=\"expirationDateHelp\"\n              formControlName=\"defaultExpirationDateTime\"\n              required\n              placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n              [readOnly]=\"disableSend\"\n            />\n          </div>\n        </div>\n        <div id=\"expirationDateHelp\" class=\"box-footer\">\n          {{ \"expirationDateDesc\" | i18n }}\n          <ng-container\n            *ngIf=\"\n              !inPopout &&\n              isFirefox &&\n              (editMode ||\n                (formGroup.controls['selectedExpirationDatePreset'].value === 0 && !editMode))\n            \"\n          >\n            <br />{{ \"sendFirefoxCustomDatePopoutMessage1\" | i18n }}\n            <a (click)=\"popOutWindow()\">{{ \"sendFirefoxCustomDatePopoutMessage2\" | i18n }}</a>\n            {{ \"sendFirefoxCustomDatePopoutMessage3\" | i18n }}\n          </ng-container>\n        </div>\n      </div>\n      <!-- Maximum Access Count -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"maximumAccessCount\">{{ \"maximumAccessCount\" | i18n }}</label>\n            <input\n              id=\"maximumAccessCount\"\n              min=\"1\"\n              type=\"number\"\n              name=\"MaximumAccessCount\"\n              aria-describedby=\"maximumAccessCountHelp\"\n              formControlName=\"maxAccessCount\"\n            />\n          </div>\n        </div>\n        <div id=\"maximumAccessCountHelp\" class=\"box-footer\">\n          {{ \"maximumAccessCountDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Current Access Count -->\n      <div class=\"box\" *ngIf=\"editMode\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"currentAccessCount\">{{ \"currentAccessCount\" | i18n }}</label>\n            <input\n              id=\"currentAccessCount\"\n              type=\"text\"\n              name=\"CurrentAccessCount\"\n              formControlName=\"accessCount\"\n            />\n          </div>\n        </div>\n      </div>\n      <!-- Password -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"password\" *ngIf=\"hasPassword\">{{ \"newPassword\" | i18n }}</label>\n              <label for=\"password\" *ngIf=\"!hasPassword\">{{ \"password\" | i18n }}</label>\n              <input\n                id=\"password\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"Password\"\n                aria-describedby=\"passwordHelp\"\n                class=\"monospaced\"\n                formControlName=\"password\"\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\" *ngIf=\"!disableSend\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePasswordVisible()\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  aria-hidden=\"true\"\n                ></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <div id=\"passwordHelp\" class=\"box-footer\">\n          {{ \"sendPasswordDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Notes -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"notes\">{{ \"notes\" | i18n }}</label>\n            <textarea\n              id=\"notes\"\n              name=\"Notes\"\n              aria-describedby=\"notesHelp\"\n              rows=\"6\"\n              formControlName=\"notes\"\n            ></textarea>\n          </div>\n        </div>\n        <div id=\"notesHelp\" class=\"box-footer\">\n          {{ \"sendNotesDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Hide Email -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"hideEmail\">{{ \"hideEmail\" | i18n }}</label>\n            <input id=\"hideEmail\" type=\"checkbox\" name=\"HideEmail\" formControlName=\"hideEmail\" />\n          </div>\n        </div>\n      </div>\n      <!-- Disable Send -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"disableSend\">{{ \"sendDisableDesc\" | i18n }}</label>\n            <input id=\"disableSend\" type=\"checkbox\" name=\"DisableSend\" formControlName=\"disabled\" />\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Delete -->\n    <div class=\"box list\" *ngIf=\"editMode\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteSend\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { DatePipe, Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AddEditComponent as BaseAddEditComponent } from \"@bitwarden/angular/tools/send/add-edit.component\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BrowserStateService } from \"../../../platform/services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../../../popup/services/popup-utils.service\";\n\n@Component({\n  selector: \"app-send-add-edit\",\n  templateUrl: \"send-add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class SendAddEditComponent extends BaseAddEditComponent {\n  // Options header\n  showOptions = false;\n  // File visibility\n  isFirefox = false;\n  inPopout = false;\n  inSidebar = false;\n  isLinux = false;\n  isUnsupportedMac = false;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    stateService: BrowserStateService,\n    messagingService: MessagingService,\n    policyService: PolicyService,\n    environmentService: EnvironmentService,\n    datePipe: DatePipe,\n    sendService: SendService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private popupUtilsService: PopupUtilsService,\n    logService: LogService,\n    sendApiService: SendApiService,\n    dialogService: DialogService,\n    formBuilder: FormBuilder\n  ) {\n    super(\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      datePipe,\n      sendService,\n      messagingService,\n      policyService,\n      logService,\n      stateService,\n      sendApiService,\n      dialogService,\n      formBuilder\n    );\n  }\n\n  get showFileSelector(): boolean {\n    return !(this.editMode || this.showFilePopoutMessage);\n  }\n\n  get showFilePopoutMessage(): boolean {\n    return (\n      !this.editMode &&\n      (this.showFirefoxFileWarning || this.showSafariFileWarning || this.showChromiumFileWarning)\n    );\n  }\n\n  get showFirefoxFileWarning(): boolean {\n    return this.isFirefox && !(this.inSidebar || this.inPopout);\n  }\n\n  get showSafariFileWarning(): boolean {\n    return this.isSafari && !this.inPopout;\n  }\n\n  // Only show this for Chromium based browsers in Linux and Mac > Big Sur\n  get showChromiumFileWarning(): boolean {\n    return (\n      (this.isLinux || this.isUnsupportedMac) &&\n      !this.isFirefox &&\n      !(this.inSidebar || this.inPopout)\n    );\n  }\n\n  popOutWindow() {\n    this.popupUtilsService.popOut(window);\n  }\n\n  async ngOnInit() {\n    // File visibility\n    this.isFirefox = this.platformUtilsService.isFirefox();\n    this.inPopout = this.popupUtilsService.inPopout(window);\n    this.inSidebar = this.popupUtilsService.inSidebar(window);\n    this.isLinux = window?.navigator?.userAgent.indexOf(\"Linux\") !== -1;\n    this.isUnsupportedMac =\n      this.platformUtilsService.isChrome() && window?.navigator?.appVersion.includes(\"Mac OS X 11\");\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.sendId) {\n        this.sendId = params.sendId;\n      }\n      if (params.type) {\n        const type = parseInt(params.type, null);\n        this.type = type;\n      }\n      await super.ngOnInit();\n    });\n\n    window.setTimeout(() => {\n      if (!this.editMode) {\n        document.getElementById(\"name\").focus();\n      }\n    }, 200);\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      this.cancel();\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    if (await super.delete()) {\n      this.cancel();\n      return true;\n    }\n\n    return false;\n  }\n\n  cancel() {\n    // If true, the window was pop'd out on the add-send page. location.back will not work\n    if ((window as any).previousPopupUrl.startsWith(\"/add-send\")) {\n      this.router.navigate([\"tabs/send\"]);\n    } else {\n      this.location.back();\n    }\n  }\n}\n","import { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport abstract class SearchService {\n  indexedEntityId?: string = null;\n  clearIndex: () => void;\n  isSearchable: (query: string) => boolean;\n  indexCiphers: (ciphersToIndex: CipherView[], indexedEntityGuid?: string) => void;\n  searchCiphers: (\n    query: string,\n    filter?: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[],\n    ciphers?: CipherView[]\n  ) => Promise<CipherView[]>;\n  searchCiphersBasic: (ciphers: CipherView[], query: string, deleted?: boolean) => CipherView[];\n  searchSends: (sends: SendView[], query: string) => SendView[];\n}\n","import { Directive, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class SendComponent implements OnInit, OnDestroy {\n  disableSend = false;\n  sendType = SendType;\n  loaded = false;\n  loading = true;\n  refreshing = false;\n  expired = false;\n  type: SendType = null;\n  sends: SendView[] = [];\n  searchText: string;\n  selectedType: SendType;\n  selectedAll: boolean;\n  filter: (cipher: SendView) => boolean;\n  searchPending = false;\n  hasSearched = false; // search() function called - returns true if text qualifies for search\n\n  actionPromise: any;\n  onSuccessfulRemovePassword: () => Promise<any>;\n  onSuccessfulDelete: () => Promise<any>;\n  onSuccessfulLoad: () => Promise<any>;\n\n  private searchTimeout: any;\n  private destroy$ = new Subject<void>();\n  private _filteredSends: SendView[];\n\n  get filteredSends(): SendView[] {\n    return this._filteredSends;\n  }\n\n  set filteredSends(filteredSends: SendView[]) {\n    this._filteredSends = filteredSends;\n  }\n\n  constructor(\n    protected sendService: SendService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected ngZone: NgZone,\n    protected searchService: SearchService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected sendApiService: SendApiService,\n    protected dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisableSend)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableSend = policyAppliesToActiveUser;\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load(filter: (send: SendView) => boolean = null) {\n    this.loading = true;\n    this.sendService.sendViews$.pipe(takeUntil(this.destroy$)).subscribe((sends) => {\n      this.sends = sends;\n    });\n    if (this.onSuccessfulLoad != null) {\n      await this.onSuccessfulLoad();\n    } else {\n      // Default action\n      this.selectAll();\n    }\n    this.loading = false;\n    this.loaded = true;\n  }\n\n  async reload(filter: (send: SendView) => boolean = null) {\n    this.loaded = false;\n    this.sends = [];\n    await this.load(filter);\n  }\n\n  async refresh() {\n    try {\n      this.refreshing = true;\n      await this.reload(this.filter);\n    } finally {\n      this.refreshing = false;\n    }\n  }\n\n  async applyFilter(filter: (send: SendView) => boolean = null) {\n    this.filter = filter;\n    await this.search(null);\n  }\n\n  async search(timeout: number = null) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    if (timeout == null) {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));\n      this.applyTextSearch();\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));\n      this.applyTextSearch();\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.actionPromise != null || s.password == null) {\n      return;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"removePassword\" },\n      content: { key: \"removePasswordConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.actionPromise = this.sendApiService.removePassword(s.id);\n      await this.actionPromise;\n      if (this.onSuccessfulRemovePassword != null) {\n        this.onSuccessfulRemovePassword();\n      } else {\n        // Default actions\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"removedPassword\"));\n        await this.load();\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n    this.actionPromise = null;\n  }\n\n  async delete(s: SendView): Promise<boolean> {\n    if (this.actionPromise != null) {\n      return false;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"deleteSend\" },\n      content: { key: \"deleteSendConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.actionPromise = this.sendApiService.delete(s.id);\n      await this.actionPromise;\n\n      if (this.onSuccessfulDelete != null) {\n        this.onSuccessfulDelete();\n      } else {\n        // Default actions\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedSend\"));\n        await this.refresh();\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n    this.actionPromise = null;\n    return true;\n  }\n\n  copy(s: SendView) {\n    const sendLinkBaseUrl = this.environmentService.getSendUrl();\n    const link = sendLinkBaseUrl + s.accessId + \"/\" + s.urlB64Key;\n    this.platformUtilsService.copyToClipboard(link);\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"sendLink\"))\n    );\n  }\n\n  searchTextChanged() {\n    this.search(200);\n  }\n\n  selectAll() {\n    this.clearSelections();\n    this.selectedAll = true;\n    this.applyFilter(null);\n  }\n\n  selectType(type: SendType) {\n    this.clearSelections();\n    this.selectedType = type;\n    this.applyFilter((s) => s.type === type);\n  }\n\n  clearSelections() {\n    this.selectedAll = false;\n    this.selectedType = null;\n  }\n\n  private applyTextSearch() {\n    if (this.searchText != null) {\n      this.filteredSends = this.searchService.searchSends(this.filteredSends, this.searchText);\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class BrowserComponentState {\n  scrollY: number;\n  searchText: string;\n\n  static fromJSON(json: Jsonify<BrowserComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserComponentState(), json);\n  }\n}\n","import { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserSendComponentState extends BrowserComponentState {\n  sends: SendView[];\n  typeCounts: Map<SendType, number>;\n\n  toJSON() {\n    return Utils.merge(this, {\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserSendComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserSendComponentState(), json, {\n      sends: json.sends?.map((s) => SendView.fromJSON(s)),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n    });\n  }\n}\n","import { Directive, HostListener } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appStopProp]\",\n})\nexport class StopPropDirective {\n  @HostListener(\"click\", [\"$event\"]) onClick($event: MouseEvent) {\n    $event.stopPropagation();\n  }\n}\n","<div\n  role=\"group\"\n  *ngFor=\"let s of sends\"\n  appA11yTitle=\"{{ s.name }}\"\n  class=\"box-content-row box-content-row-flex\"\n>\n  <button\n    type=\"button\"\n    class=\"row-main\"\n    (click)=\"selectSend(s)\"\n    appStopClick\n    title=\"{{ title }} - {{ s.name }}\"\n  >\n    <div class=\"app-vault-icon\">\n      <div class=\"icon\" aria-hidden=\"true\">\n        <i class=\"bwi bwi-fw bwi-lg bwi-file-text\" *ngIf=\"s.type === sendType.Text\"></i>\n        <i class=\"bwi bwi-fw bwi-lg bwi-file\" *ngIf=\"s.type === sendType.File\"></i>\n      </div>\n    </div>\n    <div class=\"row-main-content\">\n      <span class=\"text\">\n        {{ s.name }}\n        <ng-container *ngIf=\"s.disabled\">\n          <i\n            class=\"bwi bwi-exclamation-triangle text-muted\"\n            title=\"{{ 'disabled' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"disabled\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.password\">\n          <i\n            class=\"bwi bwi-key text-muted\"\n            title=\"{{ 'passwordProtected' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"passwordProtected\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.maxAccessCountReached\">\n          <i\n            class=\"bwi bwi-ban text-muted\"\n            title=\"{{ 'maxAccessCountReached' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"maxAccessCountReached\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.expired\">\n          <i class=\"bwi bwi-clock text-muted\" title=\"{{ 'expired' | i18n }}\" aria-hidden=\"true\"></i>\n          <span class=\"sr-only\">{{ \"expired\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.pendingDelete\">\n          <i\n            class=\"bwi bwi-trash text-muted\"\n            title=\"{{ 'pendingDeletion' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"pendingDeletion\" | i18n }}</span>\n        </ng-container>\n      </span>\n      <span class=\"detail\">{{ s.deletionDate | date : \"medium\" }}</span>\n    </div>\n  </button>\n  <div class=\"action-buttons\">\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'copySendLink' | i18n }}\"\n      (click)=\"copySendLink(s)\"\n    >\n      <i class=\"bwi bwi-lg bwi-files\" aria-hidden=\"true\"></i>\n    </button>\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      [ngClass]=\"{ disabled: disabledByPolicy }\"\n      [attr.disabled]=\"disabledByPolicy ? '' : null\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'removePassword' | i18n }}\"\n      (click)=\"removePassword(s)\"\n      *ngIf=\"s.password\"\n    >\n      <i class=\"bwi bwi-lg bwi-undo\" aria-hidden=\"true\"></i>\n    </button>\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'delete' | i18n }}\"\n      (click)=\"delete(s)\"\n    >\n      <i class=\"bwi bwi-lg bwi-trash\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\n\n@Component({\n  selector: \"app-send-list\",\n  templateUrl: \"send-list.component.html\",\n})\nexport class SendListComponent {\n  @Input() sends: SendView[];\n  @Input() title: string;\n  @Input() disabledByPolicy = false;\n  @Output() onSelected = new EventEmitter<SendView>();\n  @Output() onCopySendLink = new EventEmitter<SendView>();\n  @Output() onRemovePassword = new EventEmitter<SendView>();\n  @Output() onDeleteSend = new EventEmitter<SendView>();\n\n  sendType = SendType;\n\n  selectSend(s: SendView) {\n    this.onSelected.emit(s);\n  }\n\n  copySendLink(s: SendView) {\n    this.onCopySendLink.emit(s);\n  }\n\n  removePassword(s: SendView) {\n    this.onRemovePassword.emit(s);\n  }\n\n  delete(s: SendView) {\n    this.onDeleteSend.emit(s);\n  }\n}\n","<header>\n  <div class=\"left\" *ngIf=\"showLeftHeader\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"sr-only\">{{ \"send\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      placeholder=\"{{ 'searchSends' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button\n      type=\"button\"\n      (click)=\"addSend()\"\n      appA11yTitle=\"{{ 'addSend' | i18n }}\"\n      [disabled]=\"disableSend\"\n    >\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ flex: disableSend, 'tab-page': disableSend }\">\n  <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n    {{ \"sendDisabledWarning\" | i18n }}\n  </app-callout>\n  <div class=\"no-items\" *ngIf=\"(!sends || !sends.length) && !showSearching() && !disableSend\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <img class=\"no-items-image\" aria-hidden=\"true\" />\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button\n        type=\"button\"\n        (click)=\"addSend()\"\n        class=\"btn block primary link\"\n        [disabled]=\"disableSend\"\n      >\n        {{ \"addSend\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <ng-container *ngIf=\"sends && sends.length && !showSearching()\">\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"types\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(sendType.Text)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-file-text\"></i></div>\n            <span class=\"text\">{{ \"sendTypeText\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(sendType.Text) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(sendType.File)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-file\"></i></div>\n            <span class=\"text\">{{ \"sendTypeFile\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(sendType.File) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"allSends\" | i18n }}\n        <div class=\"flex-right\">{{ sends.length }}</div>\n      </h2>\n      <div class=\"box-content\">\n        <app-send-list\n          [sends]=\"sends\"\n          title=\"{{ 'editItem' | i18n }}\"\n          [disabledByPolicy]=\"disableSend\"\n          (onSelected)=\"selectSend($event)\"\n          (onCopySendLink)=\"copy($event)\"\n          (onRemovePassword)=\"removePassword($event)\"\n          (onDeleteSend)=\"delete($event)\"\n        ></app-send-list>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"showSearching()\">\n    <div class=\"no-items\" *ngIf=\"!filteredSends || !filteredSends.length\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n    </div>\n    <div class=\"box list full-list\" *ngIf=\"filteredSends && filteredSends.length > 0\">\n      <div class=\"box-content\">\n        <app-send-list\n          [sends]=\"filteredSends\"\n          title=\"{{ 'editItem' | i18n }}\"\n          [disabledByPolicy]=\"disableSend\"\n          (onSelected)=\"selectSend($event)\"\n          (onCopySendLink)=\"copy($event)\"\n          (onRemovePassword)=\"removePassword($event)\"\n          (onDeleteSend)=\"delete($event)\"\n        >\n        </app-send-list>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { SendComponent as BaseSendComponent } from \"@bitwarden/angular/tools/send/send.component\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BrowserSendComponentState } from \"../../../models/browserSendComponentState\";\nimport { BrowserStateService } from \"../../../platform/services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../../../popup/services/popup-utils.service\";\n\nconst ComponentId = \"SendComponent\";\n\n@Component({\n  selector: \"app-send-groupings\",\n  templateUrl: \"send-groupings.component.html\",\n})\nexport class SendGroupingsComponent extends BaseSendComponent {\n  // Header\n  showLeftHeader = true;\n  // Send Type Calculations\n  typeCounts = new Map<SendType, number>();\n  // State Handling\n  state: BrowserSendComponentState;\n  private loadedTimeout: number;\n\n  constructor(\n    sendService: SendService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    environmentService: EnvironmentService,\n    ngZone: NgZone,\n    policyService: PolicyService,\n    searchService: SearchService,\n    private popupUtils: PopupUtilsService,\n    private stateService: BrowserStateService,\n    private router: Router,\n    private syncService: SyncService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private broadcasterService: BroadcasterService,\n    logService: LogService,\n    sendApiService: SendApiService,\n    dialogService: DialogService\n  ) {\n    super(\n      sendService,\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      ngZone,\n      searchService,\n      policyService,\n      logService,\n      sendApiService,\n      dialogService\n    );\n    super.onSuccessfulLoad = async () => {\n      this.calculateTypeCounts();\n      this.selectAll();\n    };\n  }\n\n  async ngOnInit() {\n    // Determine Header details\n    this.showLeftHeader = !(\n      this.popupUtils.inSidebar(window) && this.platformUtilsService.isFirefox()\n    );\n    // Clear state of Send Type Component\n    await this.stateService.setBrowserSendTypeComponentState(null);\n    // Let super class finish\n    await super.ngOnInit();\n    // Handle State Restore if necessary\n    const restoredScopeState = await this.restoreState();\n    if (this.state?.searchText != null) {\n      this.searchText = this.state.searchText;\n    }\n\n    if (!this.syncService.syncInProgress) {\n      this.load();\n    } else {\n      this.loadedTimeout = window.setTimeout(() => {\n        if (!this.loaded) {\n          this.load();\n        }\n      }, 5000);\n    }\n\n    if (!this.syncService.syncInProgress || restoredScopeState) {\n      window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n    }\n\n    // Load all sends if sync completed in background\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            window.setTimeout(() => {\n              this.load();\n            }, 500);\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    // Remove timeout\n    if (this.loadedTimeout != null) {\n      window.clearTimeout(this.loadedTimeout);\n    }\n    // Save state\n    this.saveState();\n    // Unsubscribe\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async selectType(type: SendType) {\n    this.router.navigate([\"/send-type\"], { queryParams: { type: type } });\n  }\n\n  async selectSend(s: SendView) {\n    this.router.navigate([\"/edit-send\"], { queryParams: { sendId: s.id } });\n  }\n\n  async addSend() {\n    if (this.disableSend) {\n      return;\n    }\n    this.router.navigate([\"/add-send\"]);\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.disableSend) {\n      return;\n    }\n    super.removePassword(s);\n  }\n\n  showSearching() {\n    return (\n      this.hasSearched || (!this.searchPending && this.searchService.isSearchable(this.searchText))\n    );\n  }\n\n  private calculateTypeCounts() {\n    // Create type counts\n    const typeCounts = new Map<SendType, number>();\n    this.sends.forEach((s) => {\n      if (typeCounts.has(s.type)) {\n        typeCounts.set(s.type, typeCounts.get(s.type) + 1);\n      } else {\n        typeCounts.set(s.type, 1);\n      }\n    });\n    this.typeCounts = typeCounts;\n  }\n\n  private async saveState() {\n    this.state = Object.assign(new BrowserSendComponentState(), {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n      sends: this.sends,\n      typeCounts: this.typeCounts,\n    });\n    await this.stateService.setBrowserSendComponentState(this.state);\n  }\n\n  private async restoreState(): Promise<boolean> {\n    this.state = await this.stateService.getBrowserSendComponentState();\n    if (this.state == null) {\n      return false;\n    }\n\n    if (this.state.sends != null) {\n      this.sends = this.state.sends;\n    }\n    if (this.state.typeCounts != null) {\n      this.typeCounts = this.state.typeCounts;\n    }\n\n    return true;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"back()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"sr-only\">{{ \"send\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      placeholder=\"{{ 'searchType' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button\n      type=\"button\"\n      (click)=\"addSend()\"\n      appA11yTitle=\"{{ 'addSend' | i18n }}\"\n      [disabled]=\"disableSend\"\n    >\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ flex: disableSend }\">\n  <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n    {{ \"sendDisabledWarning\" | i18n }}\n  </app-callout>\n  <div class=\"no-items\" *ngIf=\"!filteredSends.length\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\" aria-hidden=\"true\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button\n        type=\"button\"\n        (click)=\"addSend()\"\n        class=\"btn block primary link\"\n        [disabled]=\"disableSend\"\n      >\n        {{ \"addSend\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <div class=\"box list only-list\" *ngIf=\"filteredSends.length\">\n    <h2 class=\"box-header\">\n      {{ groupingTitle }}\n      <span class=\"flex-right\">{{ filteredSends.length }}</span>\n    </h2>\n    <div class=\"box-content\">\n      <app-send-list\n        [sends]=\"filteredSends\"\n        title=\"{{ 'editItem' | i18n }}\"\n        [disabledByPolicy]=\"disableSend\"\n        (onSelected)=\"selectSend($event)\"\n        (onCopySendLink)=\"copy($event)\"\n        (onRemovePassword)=\"removePassword($event)\"\n        (onDeleteSend)=\"delete($event)\"\n      >\n      </app-send-list>\n    </div>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { SendComponent as BaseSendComponent } from \"@bitwarden/angular/tools/send/send.component\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BrowserComponentState } from \"../../../models/browserComponentState\";\nimport { BrowserStateService } from \"../../../platform/services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../../../popup/services/popup-utils.service\";\n\nconst ComponentId = \"SendTypeComponent\";\n\n@Component({\n  selector: \"app-send-type\",\n  templateUrl: \"send-type.component.html\",\n})\nexport class SendTypeComponent extends BaseSendComponent {\n  groupingTitle: string;\n  // State Handling\n  state: BrowserComponentState;\n  private refreshTimeout: number;\n  private applySavedState = true;\n\n  constructor(\n    sendService: SendService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    environmentService: EnvironmentService,\n    ngZone: NgZone,\n    policyService: PolicyService,\n    searchService: SearchService,\n    private popupUtils: PopupUtilsService,\n    private stateService: BrowserStateService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private changeDetectorRef: ChangeDetectorRef,\n    private broadcasterService: BroadcasterService,\n    private router: Router,\n    logService: LogService,\n    sendApiService: SendApiService,\n    dialogService: DialogService\n  ) {\n    super(\n      sendService,\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      ngZone,\n      searchService,\n      policyService,\n      logService,\n      sendApiService,\n      dialogService\n    );\n    super.onSuccessfulLoad = async () => {\n      this.selectType(this.type);\n    };\n    this.applySavedState =\n      (window as any).previousPopupUrl != null &&\n      !(window as any).previousPopupUrl.startsWith(\"/send-type\");\n  }\n\n  async ngOnInit() {\n    // Let super class finish\n    await super.ngOnInit();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (this.applySavedState) {\n        this.state = await this.stateService.getBrowserSendTypeComponentState();\n        if (this.state?.searchText != null) {\n          this.searchText = this.state.searchText;\n        }\n      }\n\n      if (params.type != null) {\n        this.type = parseInt(params.type, null);\n        switch (this.type) {\n          case SendType.Text:\n            this.groupingTitle = this.i18nService.t(\"sendTypeText\");\n            break;\n          case SendType.File:\n            this.groupingTitle = this.i18nService.t(\"sendTypeFile\");\n            break;\n          default:\n            break;\n        }\n        await this.load((s) => s.type === this.type);\n      }\n\n      // Restore state and remove reference\n      if (this.applySavedState && this.state != null) {\n        window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n      }\n      this.stateService.setBrowserSendTypeComponentState(null);\n    });\n\n    // Refresh Send list if sync completed in background\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              this.refreshTimeout = window.setTimeout(() => {\n                this.refresh();\n              }, 500);\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    // Remove timeout\n    if (this.refreshTimeout != null) {\n      window.clearTimeout(this.refreshTimeout);\n    }\n    // Save state\n    this.saveState();\n    // Unsubscribe\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async selectSend(s: SendView) {\n    this.router.navigate([\"/edit-send\"], { queryParams: { sendId: s.id } });\n  }\n\n  async addSend() {\n    if (this.disableSend) {\n      return;\n    }\n    this.router.navigate([\"/add-send\"], { queryParams: { type: this.type } });\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.disableSend) {\n      return;\n    }\n    super.removePassword(s);\n  }\n\n  back() {\n    (window as any).routeDirection = \"b\";\n    this.location.back();\n  }\n\n  private async saveState() {\n    this.state = {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n    };\n    await this.stateService.setBrowserSendTypeComponentState(this.state);\n  }\n}\n","export const EXPORT_FORMATS = [\"csv\", \"json\", \"encrypted_json\"] as const;\nexport type ExportFormat = (typeof EXPORT_FORMATS)[number];\n\nexport abstract class VaultExportServiceAbstraction {\n  getExport: (format?: ExportFormat, organizationId?: string) => Promise<string>;\n  getPasswordProtectedExport: (password: string, organizationId?: string) => Promise<string>;\n  getOrganizationExport: (organizationId: string, format?: ExportFormat) => Promise<string>;\n  getFileName: (prefix?: string, extension?: string) => string;\n}\n","import { CardApi } from \"../../../models/api/card.api\";\n\nexport class CardData {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data?: CardApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.cardholderName = data.cardholderName;\n    this.brand = data.brand;\n    this.number = data.number;\n    this.expMonth = data.expMonth;\n    this.expYear = data.expYear;\n    this.code = data.code;\n  }\n}\n","import { LinkedIdType } from \"../enums\";\nimport { ItemView } from \"../vault/models/view/item.view\";\n\nexport class LinkedMetadata {\n  constructor(readonly propertyKey: string, private readonly _i18nKey?: string) {}\n\n  get i18nKey() {\n    return this._i18nKey ?? this.propertyKey;\n  }\n}\n\n/**\n * A decorator used to set metadata used by Linked custom fields. Apply it to a class property or getter to make it\n *    available as a Linked custom field option.\n * @param id - A unique value that is saved in the Field model. It is used to look up the decorated class property.\n * @param i18nKey - The i18n key used to describe the decorated class property in the UI. If it is null, then the name\n *    of the class property will be used as the i18n key.\n */\nexport function linkedFieldOption(id: LinkedIdType, i18nKey?: string) {\n  return (prototype: ItemView, propertyKey: string) => {\n    if (prototype.linkedFieldOptions == null) {\n      prototype.linkedFieldOptions = new Map<LinkedIdType, LinkedMetadata>();\n    }\n\n    prototype.linkedFieldOptions.set(id, new LinkedMetadata(propertyKey, i18nKey));\n  };\n}\n","import { LinkedMetadata } from \"../../../misc/linkedFieldOption.decorator\";\nimport { View } from \"../../../models/view/view\";\n\nexport abstract class ItemView implements View {\n  linkedFieldOptions: Map<number, LinkedMetadata>;\n  abstract get subTitle(): string;\n}\n","export enum CipherRepromptType {\n  None = 0,\n  Password = 1,\n}\n","export enum CipherType {\n  Login = 1,\n  SecureNote = 2,\n  Card = 3,\n  Identity = 4,\n}\n","export enum InitializerKey {\n  Cipher = 0,\n  CipherView = 1,\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { CardLinkedId as LinkedId } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class CardView extends ItemView {\n  @linkedFieldOption(LinkedId.CardholderName)\n  cardholderName: string = null;\n  @linkedFieldOption(LinkedId.ExpMonth, \"expirationMonth\")\n  expMonth: string = null;\n  @linkedFieldOption(LinkedId.ExpYear, \"expirationYear\")\n  expYear: string = null;\n  @linkedFieldOption(LinkedId.Code, \"securityCode\")\n  code: string = null;\n\n  private _brand: string = null;\n  private _number: string = null;\n  private _subTitle: string = null;\n\n  get maskedCode(): string {\n    return this.code != null ? \"\".repeat(this.code.length) : null;\n  }\n\n  get maskedNumber(): string {\n    return this.number != null ? \"\".repeat(this.number.length) : null;\n  }\n\n  @linkedFieldOption(LinkedId.Brand)\n  get brand(): string {\n    return this._brand;\n  }\n  set brand(value: string) {\n    this._brand = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.Number)\n  get number(): string {\n    return this._number;\n  }\n  set number(value: string) {\n    this._number = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null) {\n      this._subTitle = this.brand;\n      if (this.number != null && this.number.length >= 4) {\n        if (this._subTitle != null && this._subTitle !== \"\") {\n          this._subTitle += \", \";\n        } else {\n          this._subTitle = \"\";\n        }\n\n        // Show last 5 on amex, last 4 for all others\n        const count =\n          this.number.length >= 5 && this.number.match(new RegExp(\"^3[47]\")) != null ? 5 : 4;\n        this._subTitle += \"*\" + this.number.substr(this.number.length - count);\n      }\n    }\n    return this._subTitle;\n  }\n\n  get expiration(): string {\n    if (!this.expMonth && !this.expYear) {\n      return null;\n    }\n\n    let exp = this.expMonth != null ? (\"0\" + this.expMonth).slice(-2) : \"__\";\n    exp += \" / \" + (this.expYear != null ? this.formatYear(this.expYear) : \"____\");\n    return exp;\n  }\n\n  private formatYear(year: string): string {\n    return year.length === 2 ? \"20\" + year : year;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CardView>>): CardView {\n    return Object.assign(new CardView(), obj);\n  }\n\n  // ref https://stackoverflow.com/a/5911300\n  static getCardBrandByPatterns(cardNum: string): string {\n    if (cardNum == null || typeof cardNum !== \"string\" || cardNum.trim() === \"\") {\n      return null;\n    }\n\n    // Visa\n    let re = new RegExp(\"^4\");\n    if (cardNum.match(re) != null) {\n      return \"Visa\";\n    }\n\n    // Mastercard\n    // Updated for Mastercard 2017 BINs expansion\n    if (\n      /^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(\n        cardNum\n      )\n    ) {\n      return \"Mastercard\";\n    }\n\n    // AMEX\n    re = new RegExp(\"^3[47]\");\n    if (cardNum.match(re) != null) {\n      return \"Amex\";\n    }\n\n    // Discover\n    re = new RegExp(\n      \"^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)\"\n    );\n    if (cardNum.match(re) != null) {\n      return \"Discover\";\n    }\n\n    // Diners\n    re = new RegExp(\"^36\");\n    if (cardNum.match(re) != null) {\n      return \"Diners Club\";\n    }\n\n    // Diners - Carte Blanche\n    re = new RegExp(\"^30[0-5]\");\n    if (cardNum.match(re) != null) {\n      return \"Diners Club\";\n    }\n\n    // JCB\n    re = new RegExp(\"^35(2[89]|[3-8][0-9])\");\n    if (cardNum.match(re) != null) {\n      return \"JCB\";\n    }\n\n    // Visa Electron\n    re = new RegExp(\"^(4026|417500|4508|4844|491(3|7))\");\n    if (cardNum.match(re) != null) {\n      return \"Visa\";\n    }\n\n    return null;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { CardData } from \"../data/card.data\";\nimport { CardView } from \"../view/card.view\";\n\nexport class Card extends Domain {\n  cardholderName: EncString;\n  brand: EncString;\n  number: EncString;\n  expMonth: EncString;\n  expYear: EncString;\n  code: EncString;\n\n  constructor(obj?: CardData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<CardView> {\n    return this.decryptObj(\n      new CardView(),\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toCardData(): CardData {\n    const c = new CardData();\n    this.buildDataModel(this, c, {\n      cardholderName: null,\n      brand: null,\n      number: null,\n      expMonth: null,\n      expYear: null,\n      code: null,\n    });\n    return c;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Card>>): Card {\n    if (obj == null) {\n      return null;\n    }\n\n    const cardholderName = EncString.fromJSON(obj.cardholderName);\n    const brand = EncString.fromJSON(obj.brand);\n    const number = EncString.fromJSON(obj.number);\n    const expMonth = EncString.fromJSON(obj.expMonth);\n    const expYear = EncString.fromJSON(obj.expYear);\n    const code = EncString.fromJSON(obj.code);\n    return Object.assign(new Card(), obj, {\n      cardholderName,\n      brand,\n      number,\n      expMonth,\n      expYear,\n      code,\n    });\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Card as CardDomain } from \"../../vault/models/domain/card\";\nimport { CardView } from \"../../vault/models/view/card.view\";\n\nexport class CardExport {\n  static template(): CardExport {\n    const req = new CardExport();\n    req.cardholderName = \"John Doe\";\n    req.brand = \"visa\";\n    req.number = \"4242424242424242\";\n    req.expMonth = \"04\";\n    req.expYear = \"2023\";\n    req.code = \"123\";\n    return req;\n  }\n\n  static toView(req: CardExport, view = new CardView()) {\n    view.cardholderName = req.cardholderName;\n    view.brand = req.brand;\n    view.number = req.number;\n    view.expMonth = req.expMonth;\n    view.expYear = req.expYear;\n    view.code = req.code;\n    return view;\n  }\n\n  static toDomain(req: CardExport, domain = new CardDomain()) {\n    domain.cardholderName = req.cardholderName != null ? new EncString(req.cardholderName) : null;\n    domain.brand = req.brand != null ? new EncString(req.brand) : null;\n    domain.number = req.number != null ? new EncString(req.number) : null;\n    domain.expMonth = req.expMonth != null ? new EncString(req.expMonth) : null;\n    domain.expYear = req.expYear != null ? new EncString(req.expYear) : null;\n    domain.code = req.code != null ? new EncString(req.code) : null;\n    return domain;\n  }\n\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(o?: CardView | CardDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof CardView) {\n      this.cardholderName = o.cardholderName;\n      this.brand = o.brand;\n      this.number = o.number;\n      this.expMonth = o.expMonth;\n      this.expYear = o.expYear;\n      this.code = o.code;\n    } else {\n      this.cardholderName = o.cardholderName?.encryptedString;\n      this.brand = o.brand?.encryptedString;\n      this.number = o.number?.encryptedString;\n      this.expMonth = o.expMonth?.encryptedString;\n      this.expYear = o.expYear?.encryptedString;\n      this.code = o.code?.encryptedString;\n    }\n  }\n}\n","import { AttachmentResponse } from \"../response/attachment.response\";\n\nexport class AttachmentData {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response?: AttachmentResponse) {\n    if (response == null) {\n      return;\n    }\n    this.id = response.id;\n    this.url = response.url;\n    this.fileName = response.fileName;\n    this.key = response.key;\n    this.size = response.size;\n    this.sizeName = response.sizeName;\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../../enums\";\nimport { FieldApi } from \"../../../models/api/field.api\";\n\nexport class FieldData {\n  type: FieldType;\n  name: string;\n  value: string;\n  linkedId: LinkedIdType;\n\n  constructor(response?: FieldApi) {\n    if (response == null) {\n      return;\n    }\n    this.type = response.type;\n    this.name = response.name;\n    this.value = response.value;\n    this.linkedId = response.linkedId;\n  }\n}\n","import { IdentityApi } from \"../../../models/api/identity.api\";\n\nexport class IdentityData {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data?: IdentityApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.title = data.title;\n    this.firstName = data.firstName;\n    this.middleName = data.middleName;\n    this.lastName = data.lastName;\n    this.address1 = data.address1;\n    this.address2 = data.address2;\n    this.address3 = data.address3;\n    this.city = data.city;\n    this.state = data.state;\n    this.postalCode = data.postalCode;\n    this.country = data.country;\n    this.company = data.company;\n    this.email = data.email;\n    this.phone = data.phone;\n    this.ssn = data.ssn;\n    this.username = data.username;\n    this.passportNumber = data.passportNumber;\n    this.licenseNumber = data.licenseNumber;\n  }\n}\n","import { UriMatchType } from \"../../../enums\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\n\nexport class LoginUriData {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data?: LoginUriApi) {\n    if (data == null) {\n      return;\n    }\n    this.uri = data.uri;\n    this.match = data.match;\n  }\n}\n","import { LoginApi } from \"../../../models/api/login.api\";\n\nimport { LoginUriData } from \"./login-uri.data\";\n\nexport class LoginData {\n  uris: LoginUriData[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data?: LoginApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.username = data.username;\n    this.password = data.password;\n    this.passwordRevisionDate = data.passwordRevisionDate;\n    this.totp = data.totp;\n    this.autofillOnPageLoad = data.autofillOnPageLoad;\n\n    if (data.uris) {\n      this.uris = data.uris.map((u) => new LoginUriData(u));\n    }\n  }\n}\n","import { PasswordHistoryResponse } from \"../response/password-history.response\";\n\nexport class PasswordHistoryData {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response?: PasswordHistoryResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.password = response.password;\n    this.lastUsedDate = response.lastUsedDate;\n  }\n}\n","import { SecureNoteType } from \"../../../enums\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\n\nexport class SecureNoteData {\n  type: SecureNoteType;\n\n  constructor(data?: SecureNoteApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.type = data.type;\n  }\n}\n","import { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherResponse } from \"../response/cipher.response\";\n\nimport { AttachmentData } from \"./attachment.data\";\nimport { CardData } from \"./card.data\";\nimport { FieldData } from \"./field.data\";\nimport { IdentityData } from \"./identity.data\";\nimport { LoginData } from \"./login.data\";\nimport { PasswordHistoryData } from \"./password-history.data\";\nimport { SecureNoteData } from \"./secure-note.data\";\n\nexport class CipherData {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  favorite: boolean;\n  revisionDate: string;\n  type: CipherType;\n  name: string;\n  notes: string;\n  login?: LoginData;\n  secureNote?: SecureNoteData;\n  card?: CardData;\n  identity?: IdentityData;\n  fields?: FieldData[];\n  attachments?: AttachmentData[];\n  passwordHistory?: PasswordHistoryData[];\n  collectionIds?: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n  key: string;\n\n  constructor(response?: CipherResponse, collectionIds?: string[]) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.folderId = response.folderId;\n    this.edit = response.edit;\n    this.viewPassword = response.viewPassword;\n    this.organizationUseTotp = response.organizationUseTotp;\n    this.favorite = response.favorite;\n    this.revisionDate = response.revisionDate;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.collectionIds = collectionIds != null ? collectionIds : response.collectionIds;\n    this.creationDate = response.creationDate;\n    this.deletedDate = response.deletedDate;\n    this.reprompt = response.reprompt;\n    this.key = response.key;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginData(response.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteData(response.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardData(response.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityData(response.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (response.fields != null) {\n      this.fields = response.fields.map((f) => new FieldData(f));\n    }\n    if (response.attachments != null) {\n      this.attachments = response.attachments.map((a) => new AttachmentData(a));\n    }\n    if (response.passwordHistory != null) {\n      this.passwordHistory = response.passwordHistory.map((ph) => new PasswordHistoryData(ph));\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { View } from \"../../../models/view/view\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { Attachment } from \"../domain/attachment\";\n\nexport class AttachmentView implements View {\n  id: string = null;\n  url: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n  key: SymmetricCryptoKey = null;\n\n  constructor(a?: Attachment) {\n    if (!a) {\n      return;\n    }\n\n    this.id = a.id;\n    this.url = a.url;\n    this.size = a.size;\n    this.sizeName = a.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<AttachmentView>>): AttachmentView {\n    const key = obj.key == null ? null : SymmetricCryptoKey.fromJSON(obj.key);\n    return Object.assign(new AttachmentView(), obj, { key: key });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType, LinkedIdType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { Field } from \"../domain/field\";\n\nexport class FieldView implements View {\n  name: string = null;\n  value: string = null;\n  type: FieldType = null;\n  newField = false; // Marks if the field is new and hasn't been saved\n  showValue = false;\n  showCount = false;\n  linkedId: LinkedIdType = null;\n\n  constructor(f?: Field) {\n    if (!f) {\n      return;\n    }\n\n    this.type = f.type;\n    this.linkedId = f.linkedId;\n  }\n\n  get maskedValue(): string {\n    return this.value != null ? \"\" : null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<FieldView>>): FieldView {\n    return Object.assign(new FieldView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { IdentityLinkedId as LinkedId } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../platform/misc/utils\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class IdentityView extends ItemView {\n  @linkedFieldOption(LinkedId.Title)\n  title: string = null;\n  @linkedFieldOption(LinkedId.MiddleName)\n  middleName: string = null;\n  @linkedFieldOption(LinkedId.Address1)\n  address1: string = null;\n  @linkedFieldOption(LinkedId.Address2)\n  address2: string = null;\n  @linkedFieldOption(LinkedId.Address3)\n  address3: string = null;\n  @linkedFieldOption(LinkedId.City, \"cityTown\")\n  city: string = null;\n  @linkedFieldOption(LinkedId.State, \"stateProvince\")\n  state: string = null;\n  @linkedFieldOption(LinkedId.PostalCode, \"zipPostalCode\")\n  postalCode: string = null;\n  @linkedFieldOption(LinkedId.Country)\n  country: string = null;\n  @linkedFieldOption(LinkedId.Company)\n  company: string = null;\n  @linkedFieldOption(LinkedId.Email)\n  email: string = null;\n  @linkedFieldOption(LinkedId.Phone)\n  phone: string = null;\n  @linkedFieldOption(LinkedId.Ssn)\n  ssn: string = null;\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.PassportNumber)\n  passportNumber: string = null;\n  @linkedFieldOption(LinkedId.LicenseNumber)\n  licenseNumber: string = null;\n\n  private _firstName: string = null;\n  private _lastName: string = null;\n  private _subTitle: string = null;\n\n  constructor() {\n    super();\n  }\n\n  @linkedFieldOption(LinkedId.FirstName)\n  get firstName(): string {\n    return this._firstName;\n  }\n  set firstName(value: string) {\n    this._firstName = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.LastName)\n  get lastName(): string {\n    return this._lastName;\n  }\n  set lastName(value: string) {\n    this._lastName = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {\n      this._subTitle = \"\";\n      if (this.firstName != null) {\n        this._subTitle = this.firstName;\n      }\n      if (this.lastName != null) {\n        if (this._subTitle !== \"\") {\n          this._subTitle += \" \";\n        }\n        this._subTitle += this.lastName;\n      }\n    }\n\n    return this._subTitle;\n  }\n\n  @linkedFieldOption(LinkedId.FullName)\n  get fullName(): string {\n    if (\n      this.title != null ||\n      this.firstName != null ||\n      this.middleName != null ||\n      this.lastName != null\n    ) {\n      let name = \"\";\n      if (this.title != null) {\n        name += this.title + \" \";\n      }\n      if (this.firstName != null) {\n        name += this.firstName + \" \";\n      }\n      if (this.middleName != null) {\n        name += this.middleName + \" \";\n      }\n      if (this.lastName != null) {\n        name += this.lastName;\n      }\n      return name.trim();\n    }\n\n    return null;\n  }\n\n  get fullAddress(): string {\n    let address = this.address1;\n    if (!Utils.isNullOrWhitespace(this.address2)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address2;\n    }\n    if (!Utils.isNullOrWhitespace(this.address3)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address3;\n    }\n    return address;\n  }\n\n  get fullAddressPart2(): string {\n    if (this.city == null && this.state == null && this.postalCode == null) {\n      return null;\n    }\n    const city = this.city || \"-\";\n    const state = this.state;\n    const postalCode = this.postalCode || \"-\";\n    let addressPart2 = city;\n    if (!Utils.isNullOrWhitespace(state)) {\n      addressPart2 += \", \" + state;\n    }\n    addressPart2 += \", \" + postalCode;\n    return addressPart2;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<IdentityView>>): IdentityView {\n    return Object.assign(new IdentityView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { LoginUri } from \"../domain/login-uri\";\n\nconst CanLaunchWhitelist = [\n  \"https://\",\n  \"http://\",\n  \"ssh://\",\n  \"ftp://\",\n  \"sftp://\",\n  \"irc://\",\n  \"vnc://\",\n  // https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri\n  \"rdp://\", // Legacy RDP URI scheme\n  \"ms-rd:\", // Preferred RDP URI scheme\n  \"chrome://\",\n  \"iosapp://\",\n  \"androidapp://\",\n];\n\nexport class LoginUriView implements View {\n  match: UriMatchType = null;\n\n  private _uri: string = null;\n  private _domain: string = null;\n  private _hostname: string = null;\n  private _host: string = null;\n  private _canLaunch: boolean = null;\n\n  constructor(u?: LoginUri) {\n    if (!u) {\n      return;\n    }\n\n    this.match = u.match;\n  }\n\n  get uri(): string {\n    return this._uri;\n  }\n  set uri(value: string) {\n    this._uri = value;\n    this._domain = null;\n    this._canLaunch = null;\n  }\n\n  get domain(): string {\n    if (this._domain == null && this.uri != null) {\n      this._domain = Utils.getDomain(this.uri);\n      if (this._domain === \"\") {\n        this._domain = null;\n      }\n    }\n\n    return this._domain;\n  }\n\n  get hostname(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._hostname == null && this.uri != null) {\n      this._hostname = Utils.getHostname(this.uri);\n      if (this._hostname === \"\") {\n        this._hostname = null;\n      }\n    }\n\n    return this._hostname;\n  }\n\n  get host(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._host == null && this.uri != null) {\n      this._host = Utils.getHost(this.uri);\n      if (this._host === \"\") {\n        this._host = null;\n      }\n    }\n\n    return this._host;\n  }\n\n  get hostnameOrUri(): string {\n    return this.hostname != null ? this.hostname : this.uri;\n  }\n\n  get hostOrUri(): string {\n    return this.host != null ? this.host : this.uri;\n  }\n\n  get isWebsite(): boolean {\n    return (\n      this.uri != null &&\n      (this.uri.indexOf(\"http://\") === 0 ||\n        this.uri.indexOf(\"https://\") === 0 ||\n        (this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))))\n    );\n  }\n\n  get canLaunch(): boolean {\n    if (this._canLaunch != null) {\n      return this._canLaunch;\n    }\n    if (this.uri != null && this.match !== UriMatchType.RegularExpression) {\n      const uri = this.launchUri;\n      for (let i = 0; i < CanLaunchWhitelist.length; i++) {\n        if (uri.indexOf(CanLaunchWhitelist[i]) === 0) {\n          this._canLaunch = true;\n          return this._canLaunch;\n        }\n      }\n    }\n    this._canLaunch = false;\n    return this._canLaunch;\n  }\n\n  get launchUri(): string {\n    return this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))\n      ? \"http://\" + this.uri\n      : this.uri;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginUriView>>): LoginUriView {\n    return Object.assign(new LoginUriView(), obj);\n  }\n\n  matchesUri(\n    targetUri: string,\n    equivalentDomains: Set<string>,\n    defaultUriMatch: UriMatchType = null\n  ): boolean {\n    if (!this.uri || !targetUri) {\n      return false;\n    }\n\n    let matchType = this.match ?? defaultUriMatch;\n    matchType ??= UriMatchType.Domain;\n\n    const targetDomain = Utils.getDomain(targetUri);\n    const matchDomains = equivalentDomains.add(targetDomain);\n\n    switch (matchType) {\n      case UriMatchType.Domain:\n        return this.matchesDomain(targetUri, matchDomains);\n      case UriMatchType.Host: {\n        const urlHost = Utils.getHost(targetUri);\n        return urlHost != null && urlHost === Utils.getHost(this.uri);\n      }\n      case UriMatchType.Exact:\n        return targetUri === this.uri;\n      case UriMatchType.StartsWith:\n        return targetUri.startsWith(this.uri);\n      case UriMatchType.RegularExpression:\n        try {\n          const regex = new RegExp(this.uri, \"i\");\n          return regex.test(targetUri);\n        } catch (e) {\n          // Invalid regex\n          return false;\n        }\n      case UriMatchType.Never:\n        return false;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  private matchesDomain(targetUri: string, matchDomains: Set<string>) {\n    if (targetUri == null || this.domain == null || !matchDomains.has(this.domain)) {\n      return false;\n    }\n\n    if (Utils.DomainMatchBlacklist.has(this.domain)) {\n      const domainUrlHost = Utils.getHost(targetUri);\n      return !Utils.DomainMatchBlacklist.get(this.domain).has(domainUrlHost);\n    }\n\n    return true;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LoginLinkedId as LinkedId, UriMatchType } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Login } from \"../domain/login\";\n\nimport { ItemView } from \"./item.view\";\nimport { LoginUriView } from \"./login-uri.view\";\n\nexport class LoginView extends ItemView {\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.Password)\n  password: string = null;\n\n  passwordRevisionDate?: Date = null;\n  totp: string = null;\n  uris: LoginUriView[] = null;\n  autofillOnPageLoad: boolean = null;\n\n  constructor(l?: Login) {\n    super();\n    if (!l) {\n      return;\n    }\n\n    this.passwordRevisionDate = l.passwordRevisionDate;\n    this.autofillOnPageLoad = l.autofillOnPageLoad;\n  }\n\n  get uri(): string {\n    return this.hasUris ? this.uris[0].uri : null;\n  }\n\n  get maskedPassword(): string {\n    return this.password != null ? \"\" : null;\n  }\n\n  get subTitle(): string {\n    return this.username;\n  }\n\n  get canLaunch(): boolean {\n    return this.hasUris && this.uris.some((u) => u.canLaunch);\n  }\n\n  get hasTotp(): boolean {\n    return !Utils.isNullOrWhitespace(this.totp);\n  }\n\n  get launchUri(): string {\n    if (this.hasUris) {\n      const uri = this.uris.find((u) => u.canLaunch);\n      if (uri != null) {\n        return uri.launchUri;\n      }\n    }\n    return null;\n  }\n\n  get hasUris(): boolean {\n    return this.uris != null && this.uris.length > 0;\n  }\n\n  matchesUri(\n    targetUri: string,\n    equivalentDomains: Set<string>,\n    defaultUriMatch: UriMatchType = null\n  ): boolean {\n    if (this.uris == null) {\n      return false;\n    }\n\n    return this.uris.some((uri) => uri.matchesUri(targetUri, equivalentDomains, defaultUriMatch));\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginView>>): LoginView {\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUriView.fromJSON(uri));\n\n    return Object.assign(new LoginView(), obj, {\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { View } from \"../../../models/view/view\";\nimport { Password } from \"../domain/password\";\n\nexport class PasswordHistoryView implements View {\n  password: string = null;\n  lastUsedDate: Date = null;\n\n  constructor(ph?: Password) {\n    if (!ph) {\n      return;\n    }\n\n    this.lastUsedDate = ph.lastUsedDate;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<PasswordHistoryView>>): PasswordHistoryView {\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new PasswordHistoryView(), obj, {\n      lastUsedDate: lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums\";\nimport { SecureNote } from \"../domain/secure-note\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class SecureNoteView extends ItemView {\n  type: SecureNoteType = null;\n\n  constructor(n?: SecureNote) {\n    super();\n    if (!n) {\n      return;\n    }\n\n    this.type = n.type;\n  }\n\n  get subTitle(): string {\n    return null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<SecureNoteView>>): SecureNoteView {\n    return Object.assign(new SecureNoteView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LinkedIdType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { InitializerMetadata } from \"../../../platform/interfaces/initializer-metadata.interface\";\nimport { InitializerKey } from \"../../../platform/services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { LocalData } from \"../data/local.data\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentView } from \"./attachment.view\";\nimport { CardView } from \"./card.view\";\nimport { FieldView } from \"./field.view\";\nimport { IdentityView } from \"./identity.view\";\nimport { LoginView } from \"./login.view\";\nimport { PasswordHistoryView } from \"./password-history.view\";\nimport { SecureNoteView } from \"./secure-note.view\";\n\nexport class CipherView implements View, InitializerMetadata {\n  readonly initializerKey = InitializerKey.CipherView;\n\n  id: string = null;\n  organizationId: string = null;\n  folderId: string = null;\n  name: string = null;\n  notes: string = null;\n  type: CipherType = null;\n  favorite = false;\n  organizationUseTotp = false;\n  edit = false;\n  viewPassword = true;\n  localData: LocalData;\n  login = new LoginView();\n  identity = new IdentityView();\n  card = new CardView();\n  secureNote = new SecureNoteView();\n  attachments: AttachmentView[] = null;\n  fields: FieldView[] = null;\n  passwordHistory: PasswordHistoryView[] = null;\n  collectionIds: string[] = null;\n  revisionDate: Date = null;\n  creationDate: Date = null;\n  deletedDate: Date = null;\n  reprompt: CipherRepromptType = CipherRepromptType.None;\n\n  constructor(c?: Cipher) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.folderId = c.folderId;\n    this.favorite = c.favorite;\n    this.organizationUseTotp = c.organizationUseTotp;\n    this.edit = c.edit;\n    this.viewPassword = c.viewPassword;\n    this.type = c.type;\n    this.localData = c.localData;\n    this.collectionIds = c.collectionIds;\n    this.revisionDate = c.revisionDate;\n    this.creationDate = c.creationDate;\n    this.deletedDate = c.deletedDate;\n    // Old locally stored ciphers might have reprompt == null. If so set it to None.\n    this.reprompt = c.reprompt ?? CipherRepromptType.None;\n  }\n\n  private get item() {\n    switch (this.type) {\n      case CipherType.Login:\n        return this.login;\n      case CipherType.SecureNote:\n        return this.secureNote;\n      case CipherType.Card:\n        return this.card;\n      case CipherType.Identity:\n        return this.identity;\n      default:\n        break;\n    }\n\n    return null;\n  }\n\n  get subTitle(): string {\n    return this.item.subTitle;\n  }\n\n  get hasPasswordHistory(): boolean {\n    return this.passwordHistory && this.passwordHistory.length > 0;\n  }\n\n  get hasAttachments(): boolean {\n    return this.attachments && this.attachments.length > 0;\n  }\n\n  get hasOldAttachments(): boolean {\n    if (this.hasAttachments) {\n      for (let i = 0; i < this.attachments.length; i++) {\n        if (this.attachments[i].key == null) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  get hasFields(): boolean {\n    return this.fields && this.fields.length > 0;\n  }\n\n  get passwordRevisionDisplayDate(): Date {\n    if (this.type !== CipherType.Login || this.login == null) {\n      return null;\n    } else if (this.login.password == null || this.login.password === \"\") {\n      return null;\n    }\n    return this.login.passwordRevisionDate;\n  }\n\n  get isDeleted(): boolean {\n    return this.deletedDate != null;\n  }\n\n  get linkedFieldOptions() {\n    return this.item.linkedFieldOptions;\n  }\n\n  linkedFieldValue(id: LinkedIdType) {\n    const linkedFieldOption = this.linkedFieldOptions?.get(id);\n    if (linkedFieldOption == null) {\n      return null;\n    }\n\n    const item = this.item;\n    return this.item[linkedFieldOption.propertyKey as keyof typeof item];\n  }\n\n  linkedFieldI18nKey(id: LinkedIdType): string {\n    return this.linkedFieldOptions.get(id)?.i18nKey;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CipherView>>): CipherView {\n    const view = new CipherView();\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => AttachmentView.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => FieldView.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => PasswordHistoryView.fromJSON(ph));\n\n    Object.assign(view, obj, {\n      revisionDate: revisionDate,\n      deletedDate: deletedDate,\n      attachments: attachments,\n      fields: fields,\n      passwordHistory: passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        view.card = CardView.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityView.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        view.login = LoginView.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteView.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return view;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../platform/misc/utils\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { AttachmentData } from \"../data/attachment.data\";\nimport { AttachmentView } from \"../view/attachment.view\";\n\nexport class Attachment extends Domain {\n  id: string;\n  url: string;\n  size: string;\n  sizeName: string; // Readable size, ex: \"4.2 KB\" or \"1.43 GB\"\n  key: EncString;\n  fileName: EncString;\n\n  constructor(obj?: AttachmentData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<AttachmentView> {\n    const view = await this.decryptObj(\n      new AttachmentView(this),\n      {\n        fileName: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.key != null) {\n      view.key = await this.decryptAttachmentKey(orgId, encKey);\n    }\n\n    return view;\n  }\n\n  private async decryptAttachmentKey(orgId: string, encKey?: SymmetricCryptoKey) {\n    try {\n      if (encKey == null) {\n        encKey = await this.getKeyForDecryption(orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      const decValue = await encryptService.decryptToBytes(this.key, encKey);\n      return new SymmetricCryptoKey(decValue);\n    } catch (e) {\n      // TODO: error?\n    }\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getUserKeyWithLegacySupport();\n  }\n\n  toAttachmentData(): AttachmentData {\n    const a = new AttachmentData();\n    a.size = this.size;\n    this.buildDataModel(\n      this,\n      a,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n    return a;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Attachment>>): Attachment {\n    if (obj == null) {\n      return null;\n    }\n\n    const key = EncString.fromJSON(obj.key);\n    const fileName = EncString.fromJSON(obj.fileName);\n\n    return Object.assign(new Attachment(), obj, {\n      key,\n      fileName,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType, LinkedIdType } from \"../../../enums\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { FieldData } from \"../data/field.data\";\nimport { FieldView } from \"../view/field.view\";\n\nexport class Field extends Domain {\n  name: EncString;\n  value: EncString;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(obj?: FieldData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n    this.linkedId = obj.linkedId;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        name: null,\n        value: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<FieldView> {\n    return this.decryptObj(\n      new FieldView(this),\n      {\n        name: null,\n        value: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toFieldData(): FieldData {\n    const f = new FieldData();\n    this.buildDataModel(\n      this,\n      f,\n      {\n        name: null,\n        value: null,\n        type: null,\n        linkedId: null,\n      },\n      [\"type\", \"linkedId\"]\n    );\n    return f;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Field>>): Field {\n    if (obj == null) {\n      return null;\n    }\n\n    const name = EncString.fromJSON(obj.name);\n    const value = EncString.fromJSON(obj.value);\n\n    return Object.assign(new Field(), obj, {\n      name,\n      value,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { IdentityData } from \"../data/identity.data\";\nimport { IdentityView } from \"../view/identity.view\";\n\nexport class Identity extends Domain {\n  title: EncString;\n  firstName: EncString;\n  middleName: EncString;\n  lastName: EncString;\n  address1: EncString;\n  address2: EncString;\n  address3: EncString;\n  city: EncString;\n  state: EncString;\n  postalCode: EncString;\n  country: EncString;\n  company: EncString;\n  email: EncString;\n  phone: EncString;\n  ssn: EncString;\n  username: EncString;\n  passportNumber: EncString;\n  licenseNumber: EncString;\n\n  constructor(obj?: IdentityData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<IdentityView> {\n    return this.decryptObj(\n      new IdentityView(),\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toIdentityData(): IdentityData {\n    const i = new IdentityData();\n    this.buildDataModel(this, i, {\n      title: null,\n      firstName: null,\n      middleName: null,\n      lastName: null,\n      address1: null,\n      address2: null,\n      address3: null,\n      city: null,\n      state: null,\n      postalCode: null,\n      country: null,\n      company: null,\n      email: null,\n      phone: null,\n      ssn: null,\n      username: null,\n      passportNumber: null,\n      licenseNumber: null,\n    });\n    return i;\n  }\n\n  static fromJSON(obj: Jsonify<Identity>): Identity {\n    if (obj == null) {\n      return null;\n    }\n\n    const title = EncString.fromJSON(obj.title);\n    const firstName = EncString.fromJSON(obj.firstName);\n    const middleName = EncString.fromJSON(obj.middleName);\n    const lastName = EncString.fromJSON(obj.lastName);\n    const address1 = EncString.fromJSON(obj.address1);\n    const address2 = EncString.fromJSON(obj.address2);\n    const address3 = EncString.fromJSON(obj.address3);\n    const city = EncString.fromJSON(obj.city);\n    const state = EncString.fromJSON(obj.state);\n    const postalCode = EncString.fromJSON(obj.postalCode);\n    const country = EncString.fromJSON(obj.country);\n    const company = EncString.fromJSON(obj.company);\n    const email = EncString.fromJSON(obj.email);\n    const phone = EncString.fromJSON(obj.phone);\n    const ssn = EncString.fromJSON(obj.ssn);\n    const username = EncString.fromJSON(obj.username);\n    const passportNumber = EncString.fromJSON(obj.passportNumber);\n    const licenseNumber = EncString.fromJSON(obj.licenseNumber);\n\n    return Object.assign(new Identity(), obj, {\n      title,\n      firstName,\n      middleName,\n      lastName,\n      address1,\n      address2,\n      address3,\n      city,\n      state,\n      postalCode,\n      country,\n      company,\n      email,\n      phone,\n      ssn,\n      username,\n      passportNumber,\n      licenseNumber,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { LoginUriData } from \"../data/login-uri.data\";\nimport { LoginUriView } from \"../view/login-uri.view\";\n\nexport class LoginUri extends Domain {\n  uri: EncString;\n  match: UriMatchType;\n\n  constructor(obj?: LoginUriData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.match = obj.match;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        uri: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginUriView> {\n    return this.decryptObj(\n      new LoginUriView(this),\n      {\n        uri: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toLoginUriData(): LoginUriData {\n    const u = new LoginUriData();\n    this.buildDataModel(\n      this,\n      u,\n      {\n        uri: null,\n        match: null,\n      },\n      [\"match\"]\n    );\n    return u;\n  }\n\n  static fromJSON(obj: Jsonify<LoginUri>): LoginUri {\n    if (obj == null) {\n      return null;\n    }\n\n    const uri = EncString.fromJSON(obj.uri);\n    return Object.assign(new LoginUri(), obj, {\n      uri,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { LoginData } from \"../data/login.data\";\nimport { LoginView } from \"../view/login.view\";\n\nimport { LoginUri } from \"./login-uri\";\n\nexport class Login extends Domain {\n  uris: LoginUri[];\n  username: EncString;\n  password: EncString;\n  passwordRevisionDate?: Date;\n  totp: EncString;\n  autofillOnPageLoad: boolean;\n\n  constructor(obj?: LoginData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.passwordRevisionDate =\n      obj.passwordRevisionDate != null ? new Date(obj.passwordRevisionDate) : null;\n    this.autofillOnPageLoad = obj.autofillOnPageLoad;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      []\n    );\n\n    if (obj.uris) {\n      this.uris = [];\n      obj.uris.forEach((u) => {\n        this.uris.push(new LoginUri(u));\n      });\n    }\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginView> {\n    const view = await this.decryptObj(\n      new LoginView(this),\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.uris != null) {\n      view.uris = [];\n      for (let i = 0; i < this.uris.length; i++) {\n        const uri = await this.uris[i].decrypt(orgId, encKey);\n        view.uris.push(uri);\n      }\n    }\n\n    return view;\n  }\n\n  toLoginData(): LoginData {\n    const l = new LoginData();\n    l.passwordRevisionDate =\n      this.passwordRevisionDate != null ? this.passwordRevisionDate.toISOString() : null;\n    l.autofillOnPageLoad = this.autofillOnPageLoad;\n    this.buildDataModel(this, l, {\n      username: null,\n      password: null,\n      totp: null,\n    });\n\n    if (this.uris != null && this.uris.length > 0) {\n      l.uris = [];\n      this.uris.forEach((u) => {\n        l.uris.push(u.toLoginUriData());\n      });\n    }\n\n    return l;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Login>>): Login {\n    if (obj == null) {\n      return null;\n    }\n\n    const username = EncString.fromJSON(obj.username);\n    const password = EncString.fromJSON(obj.password);\n    const totp = EncString.fromJSON(obj.totp);\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUri.fromJSON(uri));\n\n    return Object.assign(new Login(), obj, {\n      username,\n      password,\n      totp,\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordHistoryData } from \"../data/password-history.data\";\nimport { PasswordHistoryView } from \"../view/password-history.view\";\n\nexport class Password extends Domain {\n  password: EncString;\n  lastUsedDate: Date;\n\n  constructor(obj?: PasswordHistoryData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(this, obj, {\n      password: null,\n    });\n    this.lastUsedDate = new Date(obj.lastUsedDate);\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<PasswordHistoryView> {\n    return this.decryptObj(\n      new PasswordHistoryView(this),\n      {\n        password: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toPasswordHistoryData(): PasswordHistoryData {\n    const ph = new PasswordHistoryData();\n    ph.lastUsedDate = this.lastUsedDate.toISOString();\n    this.buildDataModel(this, ph, {\n      password: null,\n    });\n    return ph;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Password>>): Password {\n    if (obj == null) {\n      return null;\n    }\n\n    const password = EncString.fromJSON(obj.password);\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new Password(), obj, {\n      password,\n      lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { SecureNoteData } from \"../data/secure-note.data\";\nimport { SecureNoteView } from \"../view/secure-note.view\";\n\nexport class SecureNote extends Domain {\n  type: SecureNoteType;\n\n  constructor(obj?: SecureNoteData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<SecureNoteView> {\n    return Promise.resolve(new SecureNoteView(this));\n  }\n\n  toSecureNoteData(): SecureNoteData {\n    const n = new SecureNoteData();\n    n.type = this.type;\n    return n;\n  }\n\n  static fromJSON(obj: Jsonify<SecureNote>): SecureNote {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SecureNote(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Decryptable } from \"../../../platform/interfaces/decryptable.interface\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { InitializerKey } from \"../../../platform/services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherData } from \"../data/cipher.data\";\nimport { LocalData } from \"../data/local.data\";\nimport { CipherView } from \"../view/cipher.view\";\n\nimport { Attachment } from \"./attachment\";\nimport { Card } from \"./card\";\nimport { Field } from \"./field\";\nimport { Identity } from \"./identity\";\nimport { Login } from \"./login\";\nimport { Password } from \"./password\";\nimport { SecureNote } from \"./secure-note\";\n\nexport class Cipher extends Domain implements Decryptable<CipherView> {\n  readonly initializerKey = InitializerKey.Cipher;\n\n  id: string;\n  organizationId: string;\n  folderId: string;\n  name: EncString;\n  notes: EncString;\n  type: CipherType;\n  favorite: boolean;\n  organizationUseTotp: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  revisionDate: Date;\n  localData: LocalData;\n  login: Login;\n  identity: Identity;\n  card: Card;\n  secureNote: SecureNote;\n  attachments: Attachment[];\n  fields: Field[];\n  passwordHistory: Password[];\n  collectionIds: string[];\n  creationDate: Date;\n  deletedDate: Date;\n  reprompt: CipherRepromptType;\n  key: EncString;\n\n  constructor(obj?: CipherData, localData: LocalData = null) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        folderId: null,\n        name: null,\n        notes: null,\n        key: null,\n      },\n      [\"id\", \"organizationId\", \"folderId\"]\n    );\n\n    this.type = obj.type;\n    this.favorite = obj.favorite;\n    this.organizationUseTotp = obj.organizationUseTotp;\n    this.edit = obj.edit;\n    if (obj.viewPassword != null) {\n      this.viewPassword = obj.viewPassword;\n    } else {\n      this.viewPassword = true; // Default for already synced Ciphers without viewPassword\n    }\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.collectionIds = obj.collectionIds;\n    this.localData = localData;\n    this.creationDate = obj.creationDate != null ? new Date(obj.creationDate) : null;\n    this.deletedDate = obj.deletedDate != null ? new Date(obj.deletedDate) : null;\n    this.reprompt = obj.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new Login(obj.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNote(obj.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new Card(obj.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new Identity(obj.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (obj.attachments != null) {\n      this.attachments = obj.attachments.map((a) => new Attachment(a));\n    } else {\n      this.attachments = null;\n    }\n\n    if (obj.fields != null) {\n      this.fields = obj.fields.map((f) => new Field(f));\n    } else {\n      this.fields = null;\n    }\n\n    if (obj.passwordHistory != null) {\n      this.passwordHistory = obj.passwordHistory.map((ph) => new Password(ph));\n    } else {\n      this.passwordHistory = null;\n    }\n  }\n\n  // We are passing the organizationId into the EncString.decrypt() method here, but because the encKey will always be\n  // present and so the organizationId will not be used.\n  // We will refactor the EncString.decrypt() in https://bitwarden.atlassian.net/browse/PM-3762 to remove the dependency on the organizationId.\n  async decrypt(encKey: SymmetricCryptoKey): Promise<CipherView> {\n    const model = new CipherView(this);\n\n    if (this.key != null) {\n      const encryptService = Utils.getContainerService().getEncryptService();\n      encKey = new SymmetricCryptoKey(await encryptService.decryptToBytes(this.key, encKey));\n    }\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      this.organizationId,\n      encKey\n    );\n\n    switch (this.type) {\n      case CipherType.Login:\n        model.login = await this.login.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.SecureNote:\n        model.secureNote = await this.secureNote.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Card:\n        model.card = await this.card.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Identity:\n        model.identity = await this.identity.decrypt(this.organizationId, encKey);\n        break;\n      default:\n        break;\n    }\n\n    if (this.attachments != null && this.attachments.length > 0) {\n      const attachments: any[] = [];\n      await this.attachments.reduce((promise, attachment) => {\n        return promise\n          .then(() => {\n            return attachment.decrypt(this.organizationId, encKey);\n          })\n          .then((decAttachment) => {\n            attachments.push(decAttachment);\n          });\n      }, Promise.resolve());\n      model.attachments = attachments;\n    }\n\n    if (this.fields != null && this.fields.length > 0) {\n      const fields: any[] = [];\n      await this.fields.reduce((promise, field) => {\n        return promise\n          .then(() => {\n            return field.decrypt(this.organizationId, encKey);\n          })\n          .then((decField) => {\n            fields.push(decField);\n          });\n      }, Promise.resolve());\n      model.fields = fields;\n    }\n\n    if (this.passwordHistory != null && this.passwordHistory.length > 0) {\n      const passwordHistory: any[] = [];\n      await this.passwordHistory.reduce((promise, ph) => {\n        return promise\n          .then(() => {\n            return ph.decrypt(this.organizationId, encKey);\n          })\n          .then((decPh) => {\n            passwordHistory.push(decPh);\n          });\n      }, Promise.resolve());\n      model.passwordHistory = passwordHistory;\n    }\n\n    return model;\n  }\n\n  toCipherData(): CipherData {\n    const c = new CipherData();\n    c.id = this.id;\n    c.organizationId = this.organizationId;\n    c.folderId = this.folderId;\n    c.edit = this.edit;\n    c.viewPassword = this.viewPassword;\n    c.organizationUseTotp = this.organizationUseTotp;\n    c.favorite = this.favorite;\n    c.revisionDate = this.revisionDate != null ? this.revisionDate.toISOString() : null;\n    c.type = this.type;\n    c.collectionIds = this.collectionIds;\n    c.creationDate = this.creationDate != null ? this.creationDate.toISOString() : null;\n    c.deletedDate = this.deletedDate != null ? this.deletedDate.toISOString() : null;\n    c.reprompt = this.reprompt;\n    c.key = this.key?.encryptedString;\n\n    this.buildDataModel(this, c, {\n      name: null,\n      notes: null,\n    });\n\n    switch (c.type) {\n      case CipherType.Login:\n        c.login = this.login.toLoginData();\n        break;\n      case CipherType.SecureNote:\n        c.secureNote = this.secureNote.toSecureNoteData();\n        break;\n      case CipherType.Card:\n        c.card = this.card.toCardData();\n        break;\n      case CipherType.Identity:\n        c.identity = this.identity.toIdentityData();\n        break;\n      default:\n        break;\n    }\n\n    if (this.fields != null) {\n      c.fields = this.fields.map((f) => f.toFieldData());\n    }\n    if (this.attachments != null) {\n      c.attachments = this.attachments.map((a) => a.toAttachmentData());\n    }\n    if (this.passwordHistory != null) {\n      c.passwordHistory = this.passwordHistory.map((ph) => ph.toPasswordHistoryData());\n    }\n    return c;\n  }\n\n  static fromJSON(obj: Jsonify<Cipher>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const domain = new Cipher();\n    const name = EncString.fromJSON(obj.name);\n    const notes = EncString.fromJSON(obj.notes);\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => Attachment.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => Field.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => Password.fromJSON(ph));\n    const key = EncString.fromJSON(obj.key);\n\n    Object.assign(domain, obj, {\n      name,\n      notes,\n      revisionDate,\n      deletedDate,\n      attachments,\n      fields,\n      passwordHistory,\n      key,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        domain.card = Card.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = Identity.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        domain.login = Login.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNote.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return domain;\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../enums\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Field as FieldDomain } from \"../../vault/models/domain/field\";\nimport { FieldView } from \"../../vault/models/view/field.view\";\n\nexport class FieldExport {\n  static template(): FieldExport {\n    const req = new FieldExport();\n    req.name = \"Field name\";\n    req.value = \"Some value\";\n    req.type = FieldType.Text;\n    return req;\n  }\n\n  static toView(req: FieldExport, view = new FieldView()) {\n    view.type = req.type;\n    view.value = req.value;\n    view.name = req.name;\n    view.linkedId = req.linkedId;\n    return view;\n  }\n\n  static toDomain(req: FieldExport, domain = new FieldDomain()) {\n    domain.type = req.type;\n    domain.value = req.value != null ? new EncString(req.value) : null;\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.linkedId = req.linkedId;\n    return domain;\n  }\n\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(o?: FieldView | FieldDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof FieldView) {\n      this.name = o.name;\n      this.value = o.value;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.value = o.value?.encryptedString;\n    }\n    this.type = o.type;\n    this.linkedId = o.linkedId;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Identity as IdentityDomain } from \"../../vault/models/domain/identity\";\nimport { IdentityView } from \"../../vault/models/view/identity.view\";\n\nexport class IdentityExport {\n  static template(): IdentityExport {\n    const req = new IdentityExport();\n    req.title = \"Mr\";\n    req.firstName = \"John\";\n    req.middleName = \"William\";\n    req.lastName = \"Doe\";\n    req.address1 = \"123 Any St\";\n    req.address2 = \"Apt #123\";\n    req.address3 = null;\n    req.city = \"New York\";\n    req.state = \"NY\";\n    req.postalCode = \"10001\";\n    req.country = \"US\";\n    req.company = \"Acme Inc.\";\n    req.email = \"john@company.com\";\n    req.phone = \"5555551234\";\n    req.ssn = \"000-123-4567\";\n    req.username = \"jdoe\";\n    req.passportNumber = \"US-123456789\";\n    req.licenseNumber = \"D123-12-123-12333\";\n    return req;\n  }\n\n  static toView(req: IdentityExport, view = new IdentityView()) {\n    view.title = req.title;\n    view.firstName = req.firstName;\n    view.middleName = req.middleName;\n    view.lastName = req.lastName;\n    view.address1 = req.address1;\n    view.address2 = req.address2;\n    view.address3 = req.address3;\n    view.city = req.city;\n    view.state = req.state;\n    view.postalCode = req.postalCode;\n    view.country = req.country;\n    view.company = req.company;\n    view.email = req.email;\n    view.phone = req.phone;\n    view.ssn = req.ssn;\n    view.username = req.username;\n    view.passportNumber = req.passportNumber;\n    view.licenseNumber = req.licenseNumber;\n    return view;\n  }\n\n  static toDomain(req: IdentityExport, domain = new IdentityDomain()) {\n    domain.title = req.title != null ? new EncString(req.title) : null;\n    domain.firstName = req.firstName != null ? new EncString(req.firstName) : null;\n    domain.middleName = req.middleName != null ? new EncString(req.middleName) : null;\n    domain.lastName = req.lastName != null ? new EncString(req.lastName) : null;\n    domain.address1 = req.address1 != null ? new EncString(req.address1) : null;\n    domain.address2 = req.address2 != null ? new EncString(req.address2) : null;\n    domain.address3 = req.address3 != null ? new EncString(req.address3) : null;\n    domain.city = req.city != null ? new EncString(req.city) : null;\n    domain.state = req.state != null ? new EncString(req.state) : null;\n    domain.postalCode = req.postalCode != null ? new EncString(req.postalCode) : null;\n    domain.country = req.country != null ? new EncString(req.country) : null;\n    domain.company = req.company != null ? new EncString(req.company) : null;\n    domain.email = req.email != null ? new EncString(req.email) : null;\n    domain.phone = req.phone != null ? new EncString(req.phone) : null;\n    domain.ssn = req.ssn != null ? new EncString(req.ssn) : null;\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.passportNumber = req.passportNumber != null ? new EncString(req.passportNumber) : null;\n    domain.licenseNumber = req.licenseNumber != null ? new EncString(req.licenseNumber) : null;\n    return domain;\n  }\n\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(o?: IdentityView | IdentityDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof IdentityView) {\n      this.title = o.title;\n      this.firstName = o.firstName;\n      this.middleName = o.middleName;\n      this.lastName = o.lastName;\n      this.address1 = o.address1;\n      this.address2 = o.address2;\n      this.address3 = o.address3;\n      this.city = o.city;\n      this.state = o.state;\n      this.postalCode = o.postalCode;\n      this.country = o.country;\n      this.company = o.company;\n      this.email = o.email;\n      this.phone = o.phone;\n      this.ssn = o.ssn;\n      this.username = o.username;\n      this.passportNumber = o.passportNumber;\n      this.licenseNumber = o.licenseNumber;\n    } else {\n      this.title = o.title?.encryptedString;\n      this.firstName = o.firstName?.encryptedString;\n      this.middleName = o.middleName?.encryptedString;\n      this.lastName = o.lastName?.encryptedString;\n      this.address1 = o.address1?.encryptedString;\n      this.address2 = o.address2?.encryptedString;\n      this.address3 = o.address3?.encryptedString;\n      this.city = o.city?.encryptedString;\n      this.state = o.state?.encryptedString;\n      this.postalCode = o.postalCode?.encryptedString;\n      this.country = o.country?.encryptedString;\n      this.company = o.company?.encryptedString;\n      this.email = o.email?.encryptedString;\n      this.phone = o.phone?.encryptedString;\n      this.ssn = o.ssn?.encryptedString;\n      this.username = o.username?.encryptedString;\n      this.passportNumber = o.passportNumber?.encryptedString;\n      this.licenseNumber = o.licenseNumber?.encryptedString;\n    }\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport { LoginUri as LoginUriDomain } from \"../../vault/models/domain/login-uri\";\nimport { LoginUriView } from \"../../vault/models/view/login-uri.view\";\n\nexport class LoginUriExport {\n  static template(): LoginUriExport {\n    const req = new LoginUriExport();\n    req.uri = \"https://google.com\";\n    req.match = null;\n    return req;\n  }\n\n  static toView(req: LoginUriExport, view = new LoginUriView()) {\n    view.uri = req.uri;\n    view.match = req.match;\n    return view;\n  }\n\n  static toDomain(req: LoginUriExport, domain = new LoginUriDomain()) {\n    domain.uri = req.uri != null ? new EncString(req.uri) : null;\n    domain.match = req.match;\n    return domain;\n  }\n\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(o?: LoginUriView | LoginUriDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof LoginUriView) {\n      this.uri = o.uri;\n    } else {\n      this.uri = o.uri?.encryptedString;\n    }\n    this.match = o.match;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Login as LoginDomain } from \"../../vault/models/domain/login\";\nimport { LoginView } from \"../../vault/models/view/login.view\";\n\nimport { LoginUriExport } from \"./login-uri.export\";\n\nexport class LoginExport {\n  static template(): LoginExport {\n    const req = new LoginExport();\n    req.uris = [];\n    req.username = \"jdoe\";\n    req.password = \"myp@ssword123\";\n    req.totp = \"JBSWY3DPEHPK3PXP\";\n    return req;\n  }\n\n  static toView(req: LoginExport, view = new LoginView()) {\n    if (req.uris != null) {\n      view.uris = req.uris.map((u) => LoginUriExport.toView(u));\n    }\n    view.username = req.username;\n    view.password = req.password;\n    view.totp = req.totp;\n    return view;\n  }\n\n  static toDomain(req: LoginExport, domain = new LoginDomain()) {\n    if (req.uris != null) {\n      domain.uris = req.uris.map((u) => LoginUriExport.toDomain(u));\n    }\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.password = req.password != null ? new EncString(req.password) : null;\n    domain.totp = req.totp != null ? new EncString(req.totp) : null;\n    return domain;\n  }\n\n  uris: LoginUriExport[];\n  username: string;\n  password: string;\n  totp: string;\n\n  constructor(o?: LoginView | LoginDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o.uris != null) {\n      if (o instanceof LoginView) {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      } else {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      }\n    }\n\n    if (o instanceof LoginView) {\n      this.username = o.username;\n      this.password = o.password;\n      this.totp = o.totp;\n    } else {\n      this.username = o.username?.encryptedString;\n      this.password = o.password?.encryptedString;\n      this.totp = o.totp?.encryptedString;\n    }\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Password } from \"../../vault/models/domain/password\";\nimport { PasswordHistoryView } from \"../../vault/models/view/password-history.view\";\n\nexport class PasswordHistoryExport {\n  static template(): PasswordHistoryExport {\n    const req = new PasswordHistoryExport();\n    req.password = null;\n    req.lastUsedDate = null;\n    return req;\n  }\n\n  static toView(req: PasswordHistoryExport, view = new PasswordHistoryView()) {\n    view.password = req.password;\n    view.lastUsedDate = req.lastUsedDate;\n    return view;\n  }\n\n  static toDomain(req: PasswordHistoryExport, domain = new Password()) {\n    domain.password = req.password != null ? new EncString(req.password) : null;\n    domain.lastUsedDate = req.lastUsedDate;\n    return domain;\n  }\n\n  password: string;\n  lastUsedDate: Date = null;\n\n  constructor(o?: PasswordHistoryView | Password) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof PasswordHistoryView) {\n      this.password = o.password;\n    } else {\n      this.password = o.password?.encryptedString;\n    }\n    this.lastUsedDate = o.lastUsedDate;\n  }\n}\n","import { SecureNoteType } from \"../../enums\";\nimport { SecureNote as SecureNoteDomain } from \"../../vault/models/domain/secure-note\";\nimport { SecureNoteView } from \"../../vault/models/view/secure-note.view\";\n\nexport class SecureNoteExport {\n  static template(): SecureNoteExport {\n    const req = new SecureNoteExport();\n    req.type = SecureNoteType.Generic;\n    return req;\n  }\n\n  static toView(req: SecureNoteExport, view = new SecureNoteView()) {\n    view.type = req.type;\n    return view;\n  }\n\n  static toDomain(req: SecureNoteExport, view = new SecureNoteDomain()) {\n    view.type = req.type;\n    return view;\n  }\n\n  type: SecureNoteType;\n\n  constructor(o?: SecureNoteView | SecureNoteDomain) {\n    if (o == null) {\n      return;\n    }\n\n    this.type = o.type;\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { CipherRepromptType } from \"../../vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../vault/enums/cipher-type\";\nimport { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { CardExport } from \"./card.export\";\nimport { FieldExport } from \"./field.export\";\nimport { IdentityExport } from \"./identity.export\";\nimport { LoginExport } from \"./login.export\";\nimport { PasswordHistoryExport } from \"./password-history.export\";\nimport { SecureNoteExport } from \"./secure-note.export\";\n\nexport class CipherExport {\n  static template(): CipherExport {\n    const req = new CipherExport();\n    req.organizationId = null;\n    req.collectionIds = null;\n    req.folderId = null;\n    req.type = CipherType.Login;\n    req.name = \"Item name\";\n    req.notes = \"Some notes about this item.\";\n    req.favorite = false;\n    req.fields = [];\n    req.login = null;\n    req.secureNote = null;\n    req.card = null;\n    req.identity = null;\n    req.reprompt = CipherRepromptType.None;\n    req.passwordHistory = [];\n    req.creationDate = null;\n    req.revisionDate = null;\n    req.deletedDate = null;\n    return req;\n  }\n\n  static toView(req: CipherExport, view = new CipherView()) {\n    view.type = req.type;\n    view.folderId = req.folderId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    if (view.collectionIds || req.collectionIds) {\n      const set = new Set((view.collectionIds ?? []).concat(req.collectionIds ?? []));\n      view.collectionIds = Array.from(set.values());\n    }\n    view.name = req.name;\n    view.notes = req.notes;\n    view.favorite = req.favorite;\n    view.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      view.fields = req.fields.map((f) => FieldExport.toView(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        view.login = LoginExport.toView(req.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteExport.toView(req.secureNote);\n        break;\n      case CipherType.Card:\n        view.card = CardExport.toView(req.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityExport.toView(req.identity);\n        break;\n    }\n\n    if (req.passwordHistory != null) {\n      view.passwordHistory = req.passwordHistory.map((ph) => PasswordHistoryExport.toView(ph));\n    }\n\n    view.creationDate = req.creationDate;\n    view.revisionDate = req.revisionDate;\n    view.deletedDate = req.deletedDate;\n    return view;\n  }\n\n  static toDomain(req: CipherExport, domain = new CipherDomain()) {\n    domain.type = req.type;\n    domain.folderId = req.folderId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.notes = req.notes != null ? new EncString(req.notes) : null;\n    domain.favorite = req.favorite;\n    domain.reprompt = req.reprompt ?? CipherRepromptType.None;\n    domain.key = req.key != null ? new EncString(req.key) : null;\n\n    if (req.fields != null) {\n      domain.fields = req.fields.map((f) => FieldExport.toDomain(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        domain.login = LoginExport.toDomain(req.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNoteExport.toDomain(req.secureNote);\n        break;\n      case CipherType.Card:\n        domain.card = CardExport.toDomain(req.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = IdentityExport.toDomain(req.identity);\n        break;\n    }\n\n    if (req.passwordHistory != null) {\n      domain.passwordHistory = req.passwordHistory.map((ph) => PasswordHistoryExport.toDomain(ph));\n    }\n\n    domain.creationDate = req.creationDate;\n    domain.revisionDate = req.revisionDate;\n    domain.deletedDate = req.deletedDate;\n    return domain;\n  }\n\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  collectionIds: string[];\n  name: string;\n  notes: string;\n  favorite: boolean;\n  fields: FieldExport[];\n  login: LoginExport;\n  secureNote: SecureNoteExport;\n  card: CardExport;\n  identity: IdentityExport;\n  reprompt: CipherRepromptType;\n  passwordHistory: PasswordHistoryExport[] = null;\n  revisionDate: Date = null;\n  creationDate: Date = null;\n  deletedDate: Date = null;\n  key: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.organizationId = o.organizationId;\n    this.folderId = o.folderId;\n    this.type = o.type;\n    this.reprompt = o.reprompt;\n\n    if (o instanceof CipherView) {\n      this.name = o.name;\n      this.notes = o.notes;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.notes = o.notes?.encryptedString;\n      this.key = o.key?.encryptedString;\n    }\n\n    this.favorite = o.favorite;\n\n    if (o.fields != null) {\n      if (o instanceof CipherView) {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      } else {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      }\n    }\n\n    switch (o.type) {\n      case CipherType.Login:\n        this.login = new LoginExport(o.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteExport(o.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardExport(o.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityExport(o.identity);\n        break;\n    }\n\n    if (o.passwordHistory != null) {\n      if (o instanceof CipherView) {\n        this.passwordHistory = o.passwordHistory.map((ph) => new PasswordHistoryExport(ph));\n      } else {\n        this.passwordHistory = o.passwordHistory.map((ph) => new PasswordHistoryExport(ph));\n      }\n    }\n\n    this.creationDate = o.creationDate;\n    this.revisionDate = o.revisionDate;\n    this.deletedDate = o.deletedDate;\n  }\n}\n","import { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { CipherExport } from \"./cipher.export\";\n\nexport class CipherWithIdExport extends CipherExport {\n  id: string;\n  collectionIds: string[];\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.id = o.id;\n    super.build(o);\n    this.collectionIds = o.collectionIds;\n  }\n}\n","import { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Collection } from \"../domain/collection\";\nimport { CollectionAccessDetailsResponse } from \"../response/collection.response\";\n\nexport const NestingDelimiter = \"/\";\n\nexport class CollectionView implements View, ITreeNodeObject {\n  id: string = null;\n  organizationId: string = null;\n  name: string = null;\n  externalId: string = null;\n  readOnly: boolean = null;\n  hidePasswords: boolean = null;\n\n  constructor(c?: Collection | CollectionAccessDetailsResponse) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.externalId = c.externalId;\n    if (c instanceof Collection) {\n      this.readOnly = c.readOnly;\n      this.hidePasswords = c.hidePasswords;\n    }\n  }\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { CollectionData } from \"../data/collection.data\";\nimport { CollectionView } from \"../view/collection.view\";\n\nexport class Collection extends Domain {\n  id: string;\n  organizationId: string;\n  name: EncString;\n  externalId: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(obj?: CollectionData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        name: null,\n        externalId: null,\n        readOnly: null,\n        hidePasswords: null,\n      },\n      [\"id\", \"organizationId\", \"externalId\", \"readOnly\", \"hidePasswords\"]\n    );\n  }\n\n  decrypt(): Promise<CollectionView> {\n    return this.decryptObj(\n      new CollectionView(this),\n      {\n        name: null,\n      },\n      this.organizationId\n    );\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Collection as CollectionDomain } from \"../../vault/models/domain/collection\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\n\nexport class CollectionExport {\n  static template(): CollectionExport {\n    const req = new CollectionExport();\n    req.organizationId = \"00000000-0000-0000-0000-000000000000\";\n    req.name = \"Collection name\";\n    req.externalId = null;\n    return req;\n  }\n\n  static toView(req: CollectionExport, view = new CollectionView()) {\n    view.name = req.name;\n    view.externalId = req.externalId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    return view;\n  }\n\n  static toDomain(req: CollectionExport, domain = new CollectionDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.externalId = req.externalId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    return domain;\n  }\n\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.organizationId = o.organizationId;\n    if (o instanceof CollectionView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n    this.externalId = o.externalId;\n  }\n}\n","import { Collection as CollectionDomain } from \"../../vault/models/domain/collection\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\n\nimport { CollectionExport } from \"./collection.export\";\n\nexport class CollectionWithIdExport extends CollectionExport {\n  id: string;\n\n  static toView(req: CollectionWithIdExport, view = new CollectionView()) {\n    view.id = req.id;\n    return super.toView(req, view);\n  }\n\n  static toDomain(req: CollectionWithIdExport, domain = new CollectionDomain()) {\n    domain.id = req.id;\n    return super.toDomain(req, domain);\n  }\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Folder } from \"../domain/folder\";\n\nexport class FolderView implements View, ITreeNodeObject {\n  id: string = null;\n  name: string = null;\n  revisionDate: Date = null;\n\n  constructor(f?: Folder) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.revisionDate = f.revisionDate;\n  }\n\n  static fromJSON(obj: Jsonify<FolderView>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new FolderView(), obj, { revisionDate });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { FolderData } from \"../data/folder.data\";\nimport { FolderView } from \"../view/folder.view\";\n\nexport class Folder extends Domain {\n  id: string;\n  name: EncString;\n  revisionDate: Date;\n\n  constructor(obj?: FolderData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        name: null,\n      },\n      [\"id\"]\n    );\n\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n  }\n\n  decrypt(): Promise<FolderView> {\n    return this.decryptObj(\n      new FolderView(this),\n      {\n        name: null,\n      },\n      null\n    );\n  }\n\n  static fromJSON(obj: Jsonify<Folder>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new Folder(), obj, { name: EncString.fromJSON(obj.name), revisionDate });\n  }\n}\n","import { EncString } from \"../../platform/models/domain/enc-string\";\nimport { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\n\nexport class FolderExport {\n  static template(): FolderExport {\n    const req = new FolderExport();\n    req.name = \"Folder name\";\n    return req;\n  }\n\n  static toView(req: FolderExport, view = new FolderView()) {\n    view.name = req.name;\n    return view;\n  }\n\n  static toDomain(req: FolderExport, domain = new FolderDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    return domain;\n  }\n\n  name: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    if (o instanceof FolderView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n  }\n}\n","import { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\n\nimport { FolderExport } from \"./folder.export\";\n\nexport class FolderWithIdExport extends FolderExport {\n  id: string;\n\n  static toView(req: FolderWithIdExport, view = new FolderView()) {\n    view.id = req.id;\n    return super.toView(req, view);\n  }\n\n  static toDomain(req: FolderWithIdExport, domain = new FolderDomain()) {\n    domain.id = req.id;\n    return super.toDomain(req, domain);\n  }\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","import { CollectionDetailsResponse } from \"../response/collection.response\";\n\nexport class CollectionData {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n  readOnly: boolean;\n\n  constructor(response: CollectionDetailsResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.name = response.name;\n    this.externalId = response.externalId;\n    this.readOnly = response.readOnly;\n  }\n}\n","export class ExportHelper {\n  static getFileName(prefix: string = null, extension = \"csv\"): string {\n    const now = new Date();\n    const dateString =\n      now.getFullYear() +\n      \"\" +\n      this.padNumber(now.getMonth() + 1, 2) +\n      \"\" +\n      this.padNumber(now.getDate(), 2) +\n      this.padNumber(now.getHours(), 2) +\n      \"\" +\n      this.padNumber(now.getMinutes(), 2) +\n      this.padNumber(now.getSeconds(), 2);\n\n    return \"bitwarden\" + (prefix ? \"_\" + prefix : \"\") + \"_export_\" + dateString + \".\" + extension;\n  }\n\n  private static padNumber(num: number, width: number, padCharacter = \"0\"): string {\n    const numString = num.toString();\n    return numString.length >= width\n      ? numString\n      : new Array(width - numString.length + 1).join(padCharacter) + numString;\n  }\n}\n","import * as papa from \"papaparse\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { KdfConfig } from \"@bitwarden/common/auth/models/domain/kdf-config\";\nimport { KdfType } from \"@bitwarden/common/enums\";\nimport {\n  CipherWithIdExport,\n  CollectionWithIdExport,\n  FolderWithIdExport,\n} from \"@bitwarden/common/models/export\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherData } from \"@bitwarden/common/vault/models/data/cipher.data\";\nimport { CollectionData } from \"@bitwarden/common/vault/models/data/collection.data\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { Collection } from \"@bitwarden/common/vault/models/domain/collection\";\nimport { Folder } from \"@bitwarden/common/vault/models/domain/folder\";\nimport { CollectionDetailsResponse } from \"@bitwarden/common/vault/models/response/collection.response\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { ExportHelper } from \"../../export-helper\";\nimport {\n  BitwardenCsvExportType,\n  BitwardenCsvIndividualExportType,\n  BitwardenCsvOrgExportType,\n} from \"../bitwarden-csv-export-type\";\nimport {\n  BitwardenEncryptedIndividualJsonExport,\n  BitwardenEncryptedOrgJsonExport,\n  BitwardenUnEncryptedIndividualJsonExport,\n  BitwardenUnEncryptedOrgJsonExport,\n  BitwardenPasswordProtectedFileFormat,\n} from \"../bitwarden-json-export-types\";\n\nimport { ExportFormat, VaultExportServiceAbstraction } from \"./vault-export.service.abstraction\";\n\nexport class VaultExportService implements VaultExportServiceAbstraction {\n  constructor(\n    private folderService: FolderService,\n    private cipherService: CipherService,\n    private apiService: ApiService,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {}\n\n  async getExport(format: ExportFormat = \"csv\", organizationId?: string): Promise<string> {\n    if (organizationId) {\n      return await this.getOrganizationExport(organizationId, format);\n    }\n\n    if (format === \"encrypted_json\") {\n      return this.getEncryptedExport();\n    } else {\n      return this.getDecryptedExport(format);\n    }\n  }\n\n  async getPasswordProtectedExport(password: string, organizationId?: string): Promise<string> {\n    const clearText = organizationId\n      ? await this.getOrganizationExport(organizationId, \"json\")\n      : await this.getExport(\"json\");\n\n    const kdfType: KdfType = await this.stateService.getKdfType();\n    const kdfConfig: KdfConfig = await this.stateService.getKdfConfig();\n\n    const salt = Utils.fromBufferToB64(await this.cryptoFunctionService.randomBytes(16));\n    const key = await this.cryptoService.makePinKey(password, salt, kdfType, kdfConfig);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), key);\n    const encText = await this.cryptoService.encrypt(clearText, key);\n\n    const jsonDoc: BitwardenPasswordProtectedFileFormat = {\n      encrypted: true,\n      passwordProtected: true,\n      salt: salt,\n      kdfType: kdfType,\n      kdfIterations: kdfConfig.iterations,\n      kdfMemory: kdfConfig.memory,\n      kdfParallelism: kdfConfig.parallelism,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      data: encText.encryptedString,\n    };\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  async getOrganizationExport(\n    organizationId: string,\n    format: ExportFormat = \"csv\"\n  ): Promise<string> {\n    if (format === \"encrypted_json\") {\n      return this.getOrganizationEncryptedExport(organizationId);\n    } else {\n      return this.getOrganizationDecryptedExport(organizationId, format);\n    }\n  }\n\n  getFileName(prefix: string = null, extension = \"csv\"): string {\n    return ExportHelper.getFileName(prefix, extension);\n  }\n\n  private async getDecryptedExport(format: \"json\" | \"csv\"): Promise<string> {\n    let decFolders: FolderView[] = [];\n    let decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllDecryptedFromState().then((folders) => {\n        decFolders = folders;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAllDecrypted().then((ciphers) => {\n        decCiphers = ciphers.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const foldersMap = new Map<string, FolderView>();\n      decFolders.forEach((f) => {\n        if (f.id != null) {\n          foldersMap.set(f.id, f);\n        }\n      });\n\n      const exportCiphers: BitwardenCsvIndividualExportType[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n        if (c.organizationId != null) {\n          return;\n        }\n\n        const cipher = {} as BitwardenCsvIndividualExportType;\n        cipher.folder =\n          c.folderId != null && foldersMap.has(c.folderId) ? foldersMap.get(c.folderId).name : null;\n        cipher.favorite = c.favorite ? 1 : null;\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: BitwardenUnEncryptedIndividualJsonExport = {\n        encrypted: false,\n        folders: [],\n        items: [],\n      };\n\n      decFolders.forEach((f) => {\n        if (f.id == null) {\n          return;\n        }\n        const folder = new FolderWithIdExport();\n        folder.build(f);\n        jsonDoc.folders.push(folder);\n      });\n\n      decCiphers.forEach((c) => {\n        if (c.organizationId != null) {\n          return;\n        }\n        const cipher = new CipherWithIdExport();\n        cipher.build(c);\n        cipher.collectionIds = null;\n        jsonDoc.items.push(cipher);\n      });\n\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getEncryptedExport(): Promise<string> {\n    let folders: Folder[] = [];\n    let ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllFromState().then((f) => {\n        folders = f;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAll().then((c) => {\n        ciphers = c.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid());\n\n    const jsonDoc: BitwardenEncryptedIndividualJsonExport = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      folders: [],\n      items: [],\n    };\n\n    folders.forEach((f) => {\n      if (f.id == null) {\n        return;\n      }\n      const folder = new FolderWithIdExport();\n      folder.build(f);\n      jsonDoc.folders.push(folder);\n    });\n\n    ciphers.forEach((c) => {\n      if (c.organizationId != null) {\n        return;\n      }\n      const cipher = new CipherWithIdExport();\n      cipher.build(c);\n      cipher.collectionIds = null;\n      jsonDoc.items.push(cipher);\n    });\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private async getOrganizationDecryptedExport(\n    organizationId: string,\n    format: \"json\" | \"csv\"\n  ): Promise<string> {\n    const decCollections: CollectionView[] = [];\n    const decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getOrganizationExport(organizationId).then((exportData) => {\n        const exportPromises: any = [];\n        if (exportData != null) {\n          if (exportData.collections != null && exportData.collections.length > 0) {\n            exportData.collections.forEach((c) => {\n              const collection = new Collection(new CollectionData(c as CollectionDetailsResponse));\n              exportPromises.push(\n                collection.decrypt().then((decCol) => {\n                  decCollections.push(decCol);\n                })\n              );\n            });\n          }\n          if (exportData.ciphers != null && exportData.ciphers.length > 0) {\n            exportData.ciphers\n              .filter((c) => c.deletedDate === null)\n              .forEach(async (c) => {\n                const cipher = new Cipher(new CipherData(c));\n                exportPromises.push(\n                  this.cipherService\n                    .getKeyForCipherKeyDecryption(cipher)\n                    .then((key) => cipher.decrypt(key))\n                    .then((decCipher) => {\n                      decCiphers.push(decCipher);\n                    })\n                );\n              });\n          }\n        }\n        return Promise.all(exportPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const collectionsMap = new Map<string, CollectionView>();\n      decCollections.forEach((c) => {\n        collectionsMap.set(c.id, c);\n      });\n\n      const exportCiphers: BitwardenCsvOrgExportType[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n\n        const cipher = {} as BitwardenCsvOrgExportType;\n        cipher.collections = [];\n        if (c.collectionIds != null) {\n          cipher.collections = c.collectionIds\n            .filter((id) => collectionsMap.has(id))\n            .map((id) => collectionsMap.get(id).name);\n        }\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: BitwardenUnEncryptedOrgJsonExport = {\n        encrypted: false,\n        collections: [],\n        items: [],\n      };\n\n      decCollections.forEach((c) => {\n        const collection = new CollectionWithIdExport();\n        collection.build(c);\n        jsonDoc.collections.push(collection);\n      });\n\n      decCiphers.forEach((c) => {\n        const cipher = new CipherWithIdExport();\n        cipher.build(c);\n        jsonDoc.items.push(cipher);\n      });\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getOrganizationEncryptedExport(organizationId: string): Promise<string> {\n    const collections: Collection[] = [];\n    const ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getCollections(organizationId).then((c) => {\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data.forEach((r) => {\n            const collection = new Collection(new CollectionData(r as CollectionDetailsResponse));\n            collections.push(collection);\n          });\n        }\n      })\n    );\n\n    promises.push(\n      this.apiService.getCiphersOrganization(organizationId).then((c) => {\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data\n            .filter((item) => item.deletedDate === null)\n            .forEach((item) => {\n              const cipher = new Cipher(new CipherData(item));\n              ciphers.push(cipher);\n            });\n        }\n      })\n    );\n\n    await Promise.all(promises);\n\n    const orgKey = await this.cryptoService.getOrgKey(organizationId);\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), orgKey);\n\n    const jsonDoc: BitwardenEncryptedOrgJsonExport = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      collections: [],\n      items: [],\n    };\n\n    collections.forEach((c) => {\n      const collection = new CollectionWithIdExport();\n      collection.build(c);\n      jsonDoc.collections.push(collection);\n    });\n\n    ciphers.forEach((c) => {\n      const cipher = new CipherWithIdExport();\n      cipher.build(c);\n      jsonDoc.items.push(cipher);\n    });\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private buildCommonCipher(cipher: BitwardenCsvExportType, c: CipherView): BitwardenCsvExportType {\n    cipher.type = null;\n    cipher.name = c.name;\n    cipher.notes = c.notes;\n    cipher.fields = null;\n    cipher.reprompt = c.reprompt;\n    // Login props\n    cipher.login_uri = null;\n    cipher.login_username = null;\n    cipher.login_password = null;\n    cipher.login_totp = null;\n\n    if (c.fields) {\n      c.fields.forEach((f) => {\n        if (!cipher.fields) {\n          cipher.fields = \"\";\n        } else {\n          cipher.fields += \"\\n\";\n        }\n\n        cipher.fields += (f.name || \"\") + \": \" + f.value;\n      });\n    }\n\n    switch (c.type) {\n      case CipherType.Login:\n        cipher.type = \"login\";\n        cipher.login_username = c.login.username;\n        cipher.login_password = c.login.password;\n        cipher.login_totp = c.login.totp;\n\n        if (c.login.uris) {\n          cipher.login_uri = [];\n          c.login.uris.forEach((u) => {\n            cipher.login_uri.push(u.uri);\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        cipher.type = \"note\";\n        break;\n      default:\n        return;\n    }\n\n    return cipher;\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport abstract class EventCollectionService {\n  collect: (\n    eventType: EventType,\n    cipherId?: string,\n    uploadImmediately?: boolean,\n    organizationId?: string\n  ) => Promise<any>;\n}\n","import { FileDownloadRequest } from \"./file-download.request\";\n\nexport abstract class FileDownloadService {\n  download: (request: FileDownloadRequest) => void;\n}\n","import { Directive, EventEmitter, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { UntypedFormBuilder, Validators } from \"@angular/forms\";\nimport { merge, startWith, Subject, takeUntil } from \"rxjs\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { EncryptedExportType, EventType } from \"@bitwarden/common/enums\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { DialogService } from \"@bitwarden/components\";\nimport { VaultExportServiceAbstraction } from \"@bitwarden/exporter/vault-export\";\n\n@Directive()\nexport class ExportComponent implements OnInit, OnDestroy {\n  @Output() onSaved = new EventEmitter();\n\n  formPromise: Promise<string>;\n  private _disabledByPolicy = false;\n\n  protected get disabledByPolicy(): boolean {\n    return this._disabledByPolicy;\n  }\n\n  exportForm = this.formBuilder.group({\n    format: [\"json\"],\n    secret: [\"\"],\n    filePassword: [\"\", Validators.required],\n    confirmFilePassword: [\"\", Validators.required],\n    fileEncryptionType: [EncryptedExportType.AccountEncrypted],\n  });\n\n  formatOptions = [\n    { name: \".json\", value: \"json\" },\n    { name: \".csv\", value: \"csv\" },\n    { name: \".json (Encrypted)\", value: \"encrypted_json\" },\n  ];\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected exportService: VaultExportServiceAbstraction,\n    protected eventCollectionService: EventCollectionService,\n    private policyService: PolicyService,\n    protected win: Window,\n    private logService: LogService,\n    private userVerificationService: UserVerificationService,\n    private formBuilder: UntypedFormBuilder,\n    protected fileDownloadService: FileDownloadService,\n    protected dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisablePersonalVaultExport)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this._disabledByPolicy = policyAppliesToActiveUser;\n        if (this.disabledByPolicy) {\n          this.exportForm.disable();\n        }\n      });\n\n    merge(\n      this.exportForm.get(\"format\").valueChanges,\n      this.exportForm.get(\"fileEncryptionType\").valueChanges\n    )\n      .pipe(takeUntil(this.destroy$))\n      .pipe(startWith(0))\n      .subscribe(() => this.adjustValidators());\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n  }\n\n  get encryptedFormat() {\n    return this.format === \"encrypted_json\";\n  }\n\n  protected async doExport() {\n    try {\n      this.formPromise = this.getExportData();\n      const data = await this.formPromise;\n      this.downloadFile(data);\n      this.saved();\n      await this.collectEvent();\n      this.exportForm.get(\"secret\").setValue(\"\");\n      this.exportForm.clearValidators();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async submit() {\n    if (this.disabledByPolicy) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"personalVaultExportPolicyInEffect\")\n      );\n      return;\n    }\n\n    const acceptedWarning = await this.warningDialog();\n    if (!acceptedWarning) {\n      return;\n    }\n    const secret = this.exportForm.get(\"secret\").value;\n\n    try {\n      await this.userVerificationService.verifyUser(secret);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e.message);\n      return;\n    }\n\n    this.doExport();\n  }\n\n  async warningDialog() {\n    if (this.encryptedFormat) {\n      return await this.dialogService.openSimpleDialog({\n        title: { key: \"confirmVaultExport\" },\n        content:\n          this.i18nService.t(\"encExportKeyWarningDesc\") +\n          \" \" +\n          this.i18nService.t(\"encExportAccountWarningDesc\"),\n        acceptButtonText: { key: \"exportVault\" },\n        type: \"warning\",\n      });\n    } else {\n      return await this.dialogService.openSimpleDialog({\n        title: { key: \"confirmVaultExport\" },\n        content: { key: \"exportWarningDesc\" },\n        acceptButtonText: { key: \"exportVault\" },\n        type: \"warning\",\n      });\n    }\n  }\n\n  protected saved() {\n    this.onSaved.emit();\n  }\n\n  protected getExportData() {\n    if (\n      this.format === \"encrypted_json\" &&\n      this.fileEncryptionType === EncryptedExportType.FileEncrypted\n    ) {\n      return this.exportService.getPasswordProtectedExport(this.filePassword);\n    } else {\n      return this.exportService.getExport(this.format, null);\n    }\n  }\n\n  protected getFileName(prefix?: string) {\n    let extension = this.format;\n    if (this.format === \"encrypted_json\") {\n      if (prefix == null) {\n        prefix = \"encrypted\";\n      } else {\n        prefix = \"encrypted_\" + prefix;\n      }\n      extension = \"json\";\n    }\n    return this.exportService.getFileName(prefix, extension);\n  }\n\n  protected async collectEvent(): Promise<void> {\n    await this.eventCollectionService.collect(EventType.User_ClientExportedVault);\n  }\n\n  get format() {\n    return this.exportForm.get(\"format\").value;\n  }\n\n  get filePassword() {\n    return this.exportForm.get(\"filePassword\").value;\n  }\n\n  get confirmFilePassword() {\n    return this.exportForm.get(\"confirmFilePassword\").value;\n  }\n\n  get fileEncryptionType() {\n    return this.exportForm.get(\"fileEncryptionType\").value;\n  }\n\n  adjustValidators() {\n    this.exportForm.get(\"confirmFilePassword\").reset();\n    this.exportForm.get(\"filePassword\").reset();\n\n    if (this.encryptedFormat && this.fileEncryptionType == EncryptedExportType.FileEncrypted) {\n      this.exportForm.controls.filePassword.enable();\n      this.exportForm.controls.confirmFilePassword.enable();\n    } else {\n      this.exportForm.controls.filePassword.disable();\n      this.exportForm.controls.confirmFilePassword.disable();\n    }\n  }\n\n  private downloadFile(csv: string): void {\n    const fileName = this.getFileName();\n    this.fileDownloadService.download({\n      fileName: fileName,\n      blobData: csv,\n      blobOptions: { type: \"text/plain\" },\n    });\n  }\n}\n","import { map, Observable } from \"rxjs\";\n\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport function canAccessVaultTab(org: Organization): boolean {\n  return org.canViewAssignedCollections || org.canViewAllCollections;\n}\n\nexport function canAccessSettingsTab(org: Organization): boolean {\n  return (\n    org.isOwner ||\n    org.canManagePolicies ||\n    org.canManageSso ||\n    org.canManageScim ||\n    org.canAccessImportExport ||\n    org.canManageDeviceApprovals\n  );\n}\n\nexport function canAccessMembersTab(org: Organization): boolean {\n  return org.canManageUsers || org.canManageUsersPassword;\n}\n\nexport function canAccessGroupsTab(org: Organization): boolean {\n  return org.canManageGroups;\n}\n\nexport function canAccessReportingTab(org: Organization): boolean {\n  return org.canAccessReports || org.canAccessEventLogs;\n}\n\nexport function canAccessBillingTab(org: Organization): boolean {\n  return org.isOwner;\n}\n\nexport function canAccessOrgAdmin(org: Organization): boolean {\n  return (\n    canAccessMembersTab(org) ||\n    canAccessGroupsTab(org) ||\n    canAccessReportingTab(org) ||\n    canAccessBillingTab(org) ||\n    canAccessSettingsTab(org) ||\n    canAccessVaultTab(org)\n  );\n}\n\nexport function getOrganizationById(id: string) {\n  return map<Organization[], Organization | undefined>((orgs) => orgs.find((o) => o.id === id));\n}\n\nexport function canAccessAdmin(i18nService: I18nService) {\n  return map<Organization[], Organization[]>((orgs) =>\n    orgs.filter(canAccessOrgAdmin).sort(Utils.getSortFunction(i18nService, \"name\"))\n  );\n}\n\nexport function canAccessImportExport(i18nService: I18nService) {\n  return map<Organization[], Organization[]>((orgs) =>\n    orgs.filter((org) => org.canAccessImportExport).sort(Utils.getSortFunction(i18nService, \"name\"))\n  );\n}\n\n/**\n * Returns `true` if a user is a member of an organization (rather than only being a ProviderUser)\n * @deprecated Use organizationService.memberOrganizations$ instead\n */\nexport function isMember(org: Organization): boolean {\n  return org.isMember;\n}\n\nexport abstract class OrganizationService {\n  organizations$: Observable<Organization[]>;\n\n  /**\n   * Organizations that the user is a member of (excludes organizations that they only have access to via a provider)\n   */\n  memberOrganizations$: Observable<Organization[]>;\n\n  get$: (id: string) => Observable<Organization | undefined>;\n  get: (id: string) => Organization;\n  getByIdentifier: (identifier: string) => Organization;\n  getAll: (userId?: string) => Promise<Organization[]>;\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  getFromState: (id: string) => Promise<Organization>;\n  canManageSponsorships: () => Promise<boolean>;\n  hasOrganizations: () => boolean;\n}\n\nexport abstract class InternalOrganizationServiceAbstraction extends OrganizationService {\n  replace: (organizations: { [id: string]: OrganizationData }) => Promise<void>;\n  upsert: (OrganizationData: OrganizationData | OrganizationData[]) => Promise<void>;\n}\n","<ng-container *ngIf=\"show\">\n  <app-callout type=\"info\" title=\"{{ scopeConfig.title | i18n }}\">\n    {{ scopeConfig.description | i18n : scopeConfig.scopeIdentifier }}\n  </app-callout>\n</ng-container>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\n@Component({\n  selector: \"app-export-scope-callout\",\n  templateUrl: \"export-scope-callout.component.html\",\n})\nexport class ExportScopeCalloutComponent implements OnInit {\n  @Input() organizationId: string = null;\n\n  show = false;\n  scopeConfig: {\n    title: string;\n    description: string;\n    scopeIdentifier: string;\n  };\n\n  constructor(\n    protected organizationService: OrganizationService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit(): Promise<void> {\n    if (!this.organizationService.hasOrganizations()) {\n      return;\n    }\n    this.scopeConfig =\n      this.organizationId != null\n        ? {\n            title: \"exportingOrganizationVaultTitle\",\n            description: \"exportingOrganizationVaultDesc\",\n            scopeIdentifier: this.organizationService.get(this.organizationId).name,\n          }\n        : {\n            title: \"exportingPersonalVaultTitle\",\n            description: \"exportingIndividualVaultDescription\",\n            scopeIdentifier: await this.stateService.getEmail(),\n          };\n    this.show = true;\n  }\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { ControlValueAccessor, FormControl, Validators } from \"@angular/forms\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { VerificationType } from \"@bitwarden/common/auth/enums/verification-type\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { Verification } from \"@bitwarden/common/types/verification\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Collects the user's master password, or if they are not using a password, prompts for an OTP via email.\n * This is exposed to the parent component via the ControlValueAccessor interface (e.g. bind it to a FormControl).\n * Use UserVerificationService to verify the user's input.\n */\n@Directive({\n  selector: \"app-user-verification\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class UserVerificationComponent implements ControlValueAccessor, OnInit, OnDestroy {\n  private _invalidSecret = false;\n  @Input()\n  get invalidSecret() {\n    return this._invalidSecret;\n  }\n  set invalidSecret(value: boolean) {\n    this._invalidSecret = value;\n    this.invalidSecretChange.emit(value);\n\n    // ISSUE: This is pretty hacky but unfortunately there is no way of knowing if the parent\n    // control has been marked as touched, see: https://github.com/angular/angular/issues/10887\n    // When that functionality has been added we should also look into forwarding reactive form\n    // controls errors so that we don't need a separate input/output `invalidSecret`.\n    if (value) {\n      this.secret.markAsTouched();\n    }\n    this.secret.updateValueAndValidity({ emitEvent: false });\n  }\n  @Output() invalidSecretChange = new EventEmitter<boolean>();\n\n  hasMasterPassword = true;\n  disableRequestOTP = false;\n  sentCode = false;\n\n  secret = new FormControl(\"\", [\n    Validators.required,\n    () => {\n      if (this.invalidSecret) {\n        return {\n          invalidSecret: {\n            message: this.hasMasterPassword\n              ? this.i18nService.t(\"incorrectCode\")\n              : this.i18nService.t(\"incorrectPassword\"),\n          },\n        };\n      }\n    },\n  ]);\n\n  private onChange: (value: Verification) => void;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private userVerificationService: UserVerificationService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    this.hasMasterPassword = await this.userVerificationService.hasMasterPasswordAndMasterKeyHash();\n    this.processChanges(this.secret.value);\n\n    this.secret.valueChanges\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((secret: string) => this.processChanges(secret));\n  }\n\n  requestOTP = async () => {\n    if (!this.hasMasterPassword) {\n      this.disableRequestOTP = true;\n      try {\n        await this.userVerificationService.requestOTP();\n        this.sentCode = true;\n      } finally {\n        this.disableRequestOTP = false;\n      }\n    }\n  };\n\n  writeValue(obj: any): void {\n    this.secret.setValue(obj);\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    // Not implemented\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disableRequestOTP = isDisabled;\n    if (isDisabled) {\n      this.secret.disable();\n    } else {\n      this.secret.enable();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  protected processChanges(secret: string) {\n    this.invalidSecret = false;\n\n    if (this.onChange == null) {\n      return;\n    }\n\n    this.onChange({\n      type: this.hasMasterPassword ? VerificationType.MasterPassword : VerificationType.OTP,\n      secret: Utils.isNullOrWhitespace(secret) ? null : secret,\n    });\n  }\n}\n","<ng-container *ngIf=\"hasMasterPassword\">\n  <div class=\"box-content-row\" appBoxRow>\n    <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n    <input\n      id=\"masterPassword\"\n      type=\"password\"\n      name=\"MasterPasswordHash\"\n      aria-describedby=\"confirmIdentityHelp\"\n      class=\"form-control\"\n      [formControl]=\"secret\"\n      required\n      appAutofocus\n      appInputVerbatim\n    />\n  </div>\n</ng-container>\n<ng-container *ngIf=\"!hasMasterPassword\">\n  <div class=\"box-content-row\" appBoxRow>\n    <label class=\"d-block\">{{ \"sendVerificationCode\" | i18n }}</label>\n    <button\n      type=\"button\"\n      class=\"btn btn-outline-secondary\"\n      (click)=\"requestOTP()\"\n      [disabled]=\"disableRequestOTP\"\n    >\n      {{ \"sendCode\" | i18n }}\n    </button>\n    <span class=\"ml-2 text-success\" role=\"alert\" @sent *ngIf=\"sentCode\">\n      <i class=\"bwi bwi-check-circle\" aria-hidden=\"true\"></i>\n      {{ \"codeSent\" | i18n }}\n    </span>\n  </div>\n\n  <div class=\"box-content-row\" appBoxRow>\n    <label for=\"verificationCode\">{{ \"verificationCode\" | i18n }}</label>\n    <input\n      id=\"verificationCode\"\n      type=\"input\"\n      name=\"verificationCode\"\n      class=\"form-control\"\n      [formControl]=\"secret\"\n      required\n      appAutofocus\n      appInputVerbatim\n    />\n  </div>\n</ng-container>\n","import { animate, style, transition, trigger } from \"@angular/animations\";\nimport { Component } from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\nimport { UserVerificationComponent as BaseComponent } from \"@bitwarden/angular/auth/components/user-verification.component\";\n\n@Component({\n  selector: \"app-user-verification\",\n  templateUrl: \"user-verification.component.html\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: UserVerificationComponent,\n    },\n  ],\n  animations: [\n    trigger(\"sent\", [\n      transition(\":enter\", [style({ opacity: 0 }), animate(\"100ms\", style({ opacity: 1 }))]),\n    ]),\n  ],\n})\nexport class UserVerificationComponent extends BaseComponent {}\n","<form (ngSubmit)=\"submit()\" [formGroup]=\"exportForm\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/tabs/settings\">\n        <span class=\"header-icon\" aria-hidden=\"true\"><i class=\"bwi bwi-angle-left\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"exportVault\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"!exportForm.enabled\">\n        {{ \"submit\" | i18n }}\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout type=\"warning\" title=\"{{ 'vaultExportDisabled' | i18n }}\" *ngIf=\"disabledByPolicy\">\n      {{ \"personalVaultExportPolicyInEffect\" | i18n }}\n    </app-callout>\n    <app-export-scope-callout *ngIf=\"!disabledByPolicy\"></app-export-scope-callout>\n\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"format\">{{ \"fileFormat\" | i18n }}</label>\n          <select id=\"format\" name=\"Format\" formControlName=\"format\">\n            <option *ngFor=\"let f of formatOptions\" [value]=\"f.value\">{{ f.name }}</option>\n          </select>\n        </div>\n        <app-user-verification ngDefaultControl formControlName=\"secret\" name=\"Secret\">\n        </app-user-verification>\n      </div>\n      <div id=\"confirmIdentityHelp\" class=\"box-footer\">\n        <p>{{ \"confirmIdentity\" | i18n }}</p>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { UntypedFormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { ExportComponent as BaseExportComponent } from \"@bitwarden/angular/tools/export/components/export.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { DialogService } from \"@bitwarden/components\";\nimport { VaultExportServiceAbstraction } from \"@bitwarden/exporter/vault-export\";\n\n@Component({\n  selector: \"app-export\",\n  templateUrl: \"export.component.html\",\n})\nexport class ExportComponent extends BaseExportComponent {\n  constructor(\n    cryptoService: CryptoService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    exportService: VaultExportServiceAbstraction,\n    eventCollectionService: EventCollectionService,\n    policyService: PolicyService,\n    private router: Router,\n    logService: LogService,\n    userVerificationService: UserVerificationService,\n    formBuilder: UntypedFormBuilder,\n    fileDownloadService: FileDownloadService,\n    dialogService: DialogService\n  ) {\n    super(\n      cryptoService,\n      i18nService,\n      platformUtilsService,\n      exportService,\n      eventCollectionService,\n      policyService,\n      window,\n      logService,\n      userVerificationService,\n      formBuilder,\n      fileDownloadService,\n      dialogService\n    );\n  }\n\n  protected saved() {\n    super.saved();\n    this.router.navigate([\"/tabs/settings\"]);\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { SymmetricCryptoKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\n\nexport abstract class CipherService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (\n    model: CipherView,\n    keyForEncryption?: SymmetricCryptoKey,\n    keyForCipherKeyDecryption?: SymmetricCryptoKey,\n    originalCipher?: Cipher\n  ) => Promise<Cipher>;\n  encryptFields: (fieldsModel: FieldView[], key: SymmetricCryptoKey) => Promise<Field[]>;\n  encryptField: (fieldModel: FieldView, key: SymmetricCryptoKey) => Promise<Field>;\n  get: (id: string) => Promise<Cipher>;\n  getAll: () => Promise<Cipher[]>;\n  getAllDecrypted: () => Promise<CipherView[]>;\n  getAllDecryptedForGrouping: (groupingId: string, folder?: boolean) => Promise<CipherView[]>;\n  getAllDecryptedForUrl: (\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch?: UriMatchType\n  ) => Promise<CipherView[]>;\n  getAllFromApiForOrganization: (organizationId: string) => Promise<CipherView[]>;\n  getLastUsedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getLastLaunchedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getNextCipherForUrl: (url: string) => Promise<CipherView>;\n  updateLastUsedIndexForUrl: (url: string) => void;\n  updateLastUsedDate: (id: string) => Promise<void>;\n  updateLastLaunchedDate: (id: string) => Promise<void>;\n  saveNeverDomain: (domain: string) => Promise<void>;\n  createWithServer: (cipher: Cipher, orgAdmin?: boolean) => Promise<any>;\n  updateWithServer: (cipher: Cipher, orgAdmin?: boolean, isNotClone?: boolean) => Promise<any>;\n  shareWithServer: (\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  shareManyWithServer: (\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  saveAttachmentWithServer: (\n    cipher: Cipher,\n    unencryptedFile: any,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveAttachmentRawWithServer: (\n    cipher: Cipher,\n    filename: string,\n    data: ArrayBuffer,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveCollectionsWithServer: (cipher: Cipher) => Promise<any>;\n  upsert: (cipher: CipherData | CipherData[]) => Promise<any>;\n  replace: (ciphers: { [id: string]: CipherData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  moveManyWithServer: (ids: string[], folderId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n  deleteWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  deleteManyWithServer: (ids: string[], asAdmin?: boolean) => Promise<any>;\n  deleteAttachment: (id: string, attachmentId: string) => Promise<void>;\n  deleteAttachmentWithServer: (id: string, attachmentId: string) => Promise<void>;\n  sortCiphersByLastUsed: (a: CipherView, b: CipherView) => number;\n  sortCiphersByLastUsedThenName: (a: CipherView, b: CipherView) => number;\n  getLocaleSortingFunction: () => (a: CipherView, b: CipherView) => number;\n  softDelete: (id: string | string[]) => Promise<any>;\n  softDeleteWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  softDeleteManyWithServer: (ids: string[], asAdmin?: boolean) => Promise<any>;\n  restore: (\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) => Promise<any>;\n  restoreWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  restoreManyWithServer: (\n    ids: string[],\n    organizationId?: string,\n    asAdmin?: boolean\n  ) => Promise<void>;\n  getKeyForCipherKeyDecryption: (cipher: Cipher) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { FolderData } from \"../../models/data/folder.data\";\nimport { Folder } from \"../../models/domain/folder\";\nimport { FolderView } from \"../../models/view/folder.view\";\n\nexport abstract class FolderService {\n  folders$: Observable<Folder[]>;\n  folderViews$: Observable<FolderView[]>;\n\n  clearCache: () => Promise<void>;\n  encrypt: (model: FolderView, key?: SymmetricCryptoKey) => Promise<Folder>;\n  get: (id: string) => Promise<Folder>;\n  getAllFromState: () => Promise<Folder[]>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getFromState: (id: string) => Promise<Folder>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getAllDecryptedFromState: () => Promise<FolderView[]>;\n}\n\nexport abstract class InternalFolderService extends FolderService {\n  upsert: (folder: FolderData | FolderData[]) => Promise<void>;\n  replace: (folders: { [id: string]: FolderData }) => Promise<void>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { TreeNode } from \"../../models/domain/tree-node\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nexport abstract class CollectionService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (model: CollectionView) => Promise<Collection>;\n  decryptMany: (collections: Collection[]) => Promise<CollectionView[]>;\n  get: (id: string) => Promise<Collection>;\n  getAll: () => Promise<Collection[]>;\n  getAllDecrypted: () => Promise<CollectionView[]>;\n  getAllNested: (collections?: CollectionView[]) => Promise<TreeNode<CollectionView>[]>;\n  getNested: (id: string) => Promise<TreeNode<CollectionView>>;\n  upsert: (collection: CollectionData | CollectionData[]) => Promise<any>;\n  replace: (collections: { [id: string]: CollectionData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","export abstract class PasswordRepromptService {\n  protectedFields: () => string[];\n  showPasswordPrompt: () => Promise<boolean>;\n  enabled: () => Promise<boolean>;\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { Observable, Subject, takeUntil, concatMap } from \"rxjs\";\n\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport {\n  isMember,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { OrganizationUserStatusType, PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { EventType, SecureNoteType, UriMatchType } from \"@bitwarden/common/enums\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { CardView } from \"@bitwarden/common/vault/models/view/card.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { IdentityView } from \"@bitwarden/common/vault/models/view/identity.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\nimport { SecureNoteView } from \"@bitwarden/common/vault/models/view/secure-note.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class AddEditComponent implements OnInit, OnDestroy {\n  @Input() cloneMode = false;\n  @Input() folderId: string = null;\n  @Input() cipherId: string;\n  @Input() type: CipherType;\n  @Input() collectionIds: string[];\n  @Input() organizationId: string = null;\n  @Output() onSavedCipher = new EventEmitter<CipherView>();\n  @Output() onDeletedCipher = new EventEmitter<CipherView>();\n  @Output() onRestoredCipher = new EventEmitter<CipherView>();\n  @Output() onCancelled = new EventEmitter<CipherView>();\n  @Output() onEditAttachments = new EventEmitter<CipherView>();\n  @Output() onShareCipher = new EventEmitter<CipherView>();\n  @Output() onEditCollections = new EventEmitter<CipherView>();\n  @Output() onGeneratePassword = new EventEmitter();\n  @Output() onGenerateUsername = new EventEmitter();\n\n  editMode = false;\n  cipher: CipherView;\n  folders$: Observable<FolderView[]>;\n  collections: CollectionView[] = [];\n  title: string;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  restorePromise: Promise<any>;\n  checkPasswordPromise: Promise<number>;\n  showPassword = false;\n  showCardNumber = false;\n  showCardCode = false;\n  cipherType = CipherType;\n  typeOptions: any[];\n  cardBrandOptions: any[];\n  cardExpMonthOptions: any[];\n  identityTitleOptions: any[];\n  uriMatchOptions: any[];\n  ownershipOptions: any[] = [];\n  autofillOnPageLoadOptions: any[];\n  currentDate = new Date();\n  allowPersonal = true;\n  reprompt = false;\n  canUseReprompt = true;\n  organization: Organization;\n\n  protected componentName = \"\";\n  protected destroy$ = new Subject<void>();\n  protected writeableCollections: CollectionView[];\n  private personalOwnershipPolicyAppliesToActiveUser: boolean;\n  private previousCipherId: string;\n\n  constructor(\n    protected cipherService: CipherService,\n    protected folderService: FolderService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected auditService: AuditService,\n    protected stateService: StateService,\n    protected collectionService: CollectionService,\n    protected messagingService: MessagingService,\n    protected eventCollectionService: EventCollectionService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected passwordRepromptService: PasswordRepromptService,\n    private organizationService: OrganizationService,\n    protected sendApiService: SendApiService,\n    protected dialogService: DialogService\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"typeLogin\"), value: CipherType.Login },\n      { name: i18nService.t(\"typeCard\"), value: CipherType.Card },\n      { name: i18nService.t(\"typeIdentity\"), value: CipherType.Identity },\n      { name: i18nService.t(\"typeSecureNote\"), value: CipherType.SecureNote },\n    ];\n    this.cardBrandOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: \"Visa\", value: \"Visa\" },\n      { name: \"Mastercard\", value: \"Mastercard\" },\n      { name: \"American Express\", value: \"Amex\" },\n      { name: \"Discover\", value: \"Discover\" },\n      { name: \"Diners Club\", value: \"Diners Club\" },\n      { name: \"JCB\", value: \"JCB\" },\n      { name: \"Maestro\", value: \"Maestro\" },\n      { name: \"UnionPay\", value: \"UnionPay\" },\n      { name: \"RuPay\", value: \"RuPay\" },\n      { name: i18nService.t(\"other\"), value: \"Other\" },\n    ];\n    this.cardExpMonthOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: \"01 - \" + i18nService.t(\"january\"), value: \"1\" },\n      { name: \"02 - \" + i18nService.t(\"february\"), value: \"2\" },\n      { name: \"03 - \" + i18nService.t(\"march\"), value: \"3\" },\n      { name: \"04 - \" + i18nService.t(\"april\"), value: \"4\" },\n      { name: \"05 - \" + i18nService.t(\"may\"), value: \"5\" },\n      { name: \"06 - \" + i18nService.t(\"june\"), value: \"6\" },\n      { name: \"07 - \" + i18nService.t(\"july\"), value: \"7\" },\n      { name: \"08 - \" + i18nService.t(\"august\"), value: \"8\" },\n      { name: \"09 - \" + i18nService.t(\"september\"), value: \"9\" },\n      { name: \"10 - \" + i18nService.t(\"october\"), value: \"10\" },\n      { name: \"11 - \" + i18nService.t(\"november\"), value: \"11\" },\n      { name: \"12 - \" + i18nService.t(\"december\"), value: \"12\" },\n    ];\n    this.identityTitleOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: i18nService.t(\"mr\"), value: i18nService.t(\"mr\") },\n      { name: i18nService.t(\"mrs\"), value: i18nService.t(\"mrs\") },\n      { name: i18nService.t(\"ms\"), value: i18nService.t(\"ms\") },\n      { name: i18nService.t(\"mx\"), value: i18nService.t(\"mx\") },\n      { name: i18nService.t(\"dr\"), value: i18nService.t(\"dr\") },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"defaultMatchDetection\"), value: null },\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n    this.autofillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadUseDefault\"), value: null },\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n  }\n\n  async ngOnInit() {\n    this.writeableCollections = await this.loadCollections();\n    this.canUseReprompt = await this.passwordRepromptService.enabled();\n\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n      .pipe(\n        concatMap(async (policyAppliesToActiveUser) => {\n          this.personalOwnershipPolicyAppliesToActiveUser = policyAppliesToActiveUser;\n          await this.init();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async init() {\n    if (this.ownershipOptions.length) {\n      this.ownershipOptions = [];\n    }\n    if (this.personalOwnershipPolicyAppliesToActiveUser) {\n      this.allowPersonal = false;\n    } else {\n      const myEmail = await this.stateService.getEmail();\n      this.ownershipOptions.push({ name: myEmail, value: null });\n    }\n\n    const orgs = await this.organizationService.getAll();\n    orgs\n      .filter(isMember)\n      .sort(Utils.getSortFunction(this.i18nService, \"name\"))\n      .forEach((o) => {\n        if (o.enabled && o.status === OrganizationUserStatusType.Confirmed) {\n          this.ownershipOptions.push({ name: o.name, value: o.id });\n        }\n      });\n    if (!this.allowPersonal && this.organizationId == undefined) {\n      this.organizationId = this.defaultOwnerId;\n    }\n  }\n\n  async load() {\n    this.editMode = this.cipherId != null;\n    if (this.editMode) {\n      this.editMode = true;\n      if (this.cloneMode) {\n        this.cloneMode = true;\n        this.title = this.i18nService.t(\"addItem\");\n      } else {\n        this.title = this.i18nService.t(\"editItem\");\n      }\n    } else {\n      this.title = this.i18nService.t(\"addItem\");\n    }\n\n    const loadedAddEditCipherInfo = await this.loadAddEditCipherInfo();\n\n    if (this.cipher == null) {\n      if (this.editMode) {\n        const cipher = await this.loadCipher();\n        this.cipher = await cipher.decrypt(\n          await this.cipherService.getKeyForCipherKeyDecryption(cipher)\n        );\n\n        // Adjust Cipher Name if Cloning\n        if (this.cloneMode) {\n          this.cipher.name += \" - \" + this.i18nService.t(\"clone\");\n          // If not allowing personal ownership, update cipher's org Id to prompt downstream changes\n          if (this.cipher.organizationId == null && !this.allowPersonal) {\n            this.cipher.organizationId = this.organizationId;\n          }\n        }\n      } else {\n        this.cipher = new CipherView();\n        this.cipher.organizationId = this.organizationId == null ? null : this.organizationId;\n        this.cipher.folderId = this.folderId;\n        this.cipher.type = this.type == null ? CipherType.Login : this.type;\n        this.cipher.login = new LoginView();\n        this.cipher.login.uris = [new LoginUriView()];\n        this.cipher.card = new CardView();\n        this.cipher.identity = new IdentityView();\n        this.cipher.secureNote = new SecureNoteView();\n        this.cipher.secureNote.type = SecureNoteType.Generic;\n        this.cipher.reprompt = CipherRepromptType.None;\n      }\n    }\n\n    if (this.cipher != null && (!this.editMode || loadedAddEditCipherInfo || this.cloneMode)) {\n      await this.organizationChanged();\n      if (\n        this.collectionIds != null &&\n        this.collectionIds.length > 0 &&\n        this.collections.length > 0\n      ) {\n        this.collections.forEach((c) => {\n          if (this.collectionIds.indexOf(c.id) > -1) {\n            (c as any).checked = true;\n          }\n        });\n      }\n    }\n\n    this.folders$ = this.folderService.folderViews$;\n\n    if (this.editMode && this.previousCipherId !== this.cipherId) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientViewed, this.cipherId);\n    }\n    this.previousCipherId = this.cipherId;\n    this.reprompt = this.cipher.reprompt !== CipherRepromptType.None;\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.cipher.isDeleted) {\n      return this.restore();\n    }\n\n    if (this.cipher.name == null || this.cipher.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    if (\n      (!this.editMode || this.cloneMode) &&\n      !this.allowPersonal &&\n      this.cipher.organizationId == null\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"personalOwnershipSubmitError\")\n      );\n      return false;\n    }\n\n    if (\n      (!this.editMode || this.cloneMode) &&\n      this.cipher.type === CipherType.Login &&\n      this.cipher.login.uris != null &&\n      this.cipher.login.uris.length === 1 &&\n      (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === \"\")\n    ) {\n      this.cipher.login.uris = null;\n    }\n\n    // Allows saving of selected collections during \"Add\" and \"Clone\" flows\n    if ((!this.editMode || this.cloneMode) && this.cipher.organizationId != null) {\n      this.cipher.collectionIds =\n        this.collections == null\n          ? []\n          : this.collections.filter((c) => (c as any).checked).map((c) => c.id);\n    }\n\n    // Clear current Cipher Id to trigger \"Add\" cipher flow\n    if (this.cloneMode) {\n      this.cipher.id = null;\n    }\n\n    const cipher = await this.encryptCipher();\n    try {\n      this.formPromise = this.saveCipher(cipher);\n      await this.formPromise;\n      this.cipher.id = cipher.id;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode && !this.cloneMode ? \"editedItem\" : \"addedItem\")\n      );\n      this.onSavedCipher.emit(this.cipher);\n      this.messagingService.send(this.editMode && !this.cloneMode ? \"editedCipher\" : \"addedCipher\");\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  addUri() {\n    if (this.cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    if (this.cipher.login.uris == null) {\n      this.cipher.login.uris = [];\n    }\n\n    this.cipher.login.uris.push(new LoginUriView());\n  }\n\n  removeUri(uri: LoginUriView) {\n    if (this.cipher.type !== CipherType.Login || this.cipher.login.uris == null) {\n      return;\n    }\n\n    const i = this.cipher.login.uris.indexOf(uri);\n    if (i > -1) {\n      this.cipher.login.uris.splice(i, 1);\n    }\n  }\n\n  onCardNumberChange(): void {\n    this.cipher.card.brand = CardView.getCardBrandByPatterns(this.cipher.card.number);\n  }\n\n  getCardExpMonthDisplay() {\n    return this.cardExpMonthOptions.find((x) => x.value == this.cipher.card.expMonth)?.name;\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  cancel() {\n    this.onCancelled.emit(this.cipher);\n  }\n\n  attachments() {\n    this.onEditAttachments.emit(this.cipher);\n  }\n\n  share() {\n    this.onShareCipher.emit(this.cipher);\n  }\n\n  editCollections() {\n    this.onEditCollections.emit(this.cipher);\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"deleteItem\" },\n      content: {\n        key: this.cipher.isDeleted ? \"permanentlyDeleteItemConfirmation\" : \"deleteItemConfirmation\",\n      },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.deleteCipher();\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.cipher.isDeleted ? \"permanentlyDeletedItem\" : \"deletedItem\")\n      );\n      this.onDeletedCipher.emit(this.cipher);\n      this.messagingService.send(\n        this.cipher.isDeleted ? \"permanentlyDeletedCipher\" : \"deletedCipher\"\n      );\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async restore(): Promise<boolean> {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n\n    try {\n      this.restorePromise = this.restoreCipher();\n      await this.restorePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"restoredItem\"));\n      this.onRestoredCipher.emit(this.cipher);\n      this.messagingService.send(\"restoredCipher\");\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async generateUsername(): Promise<boolean> {\n    if (this.cipher.login?.username?.length) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"overwriteUsername\" },\n        content: { key: \"overwriteUsernameConfirmation\" },\n        type: \"warning\",\n      });\n\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    this.onGenerateUsername.emit();\n    return true;\n  }\n\n  async generatePassword(): Promise<boolean> {\n    if (this.cipher.login?.password?.length) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"overwritePassword\" },\n        content: { key: \"overwritePasswordConfirmation\" },\n        type: \"warning\",\n      });\n\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    this.onGeneratePassword.emit();\n    return true;\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"loginPassword\").focus();\n    if (this.editMode && this.showPassword) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledPasswordVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async toggleCardNumber() {\n    this.showCardNumber = !this.showCardNumber;\n    if (this.showCardNumber) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardNumberVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  toggleCardCode() {\n    this.showCardCode = !this.showCardCode;\n    document.getElementById(\"cardCode\").focus();\n    if (this.editMode && this.showCardCode) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardCodeVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  toggleUriOptions(uri: LoginUriView) {\n    const u = uri as any;\n    u.showOptions = u.showOptions == null && uri.match != null ? false : !u.showOptions;\n  }\n\n  loginUriMatchChanged(uri: LoginUriView) {\n    const u = uri as any;\n    u.showOptions = u.showOptions == null ? true : u.showOptions;\n  }\n\n  async organizationChanged() {\n    if (this.writeableCollections != null) {\n      this.writeableCollections.forEach((c) => ((c as any).checked = false));\n    }\n    if (this.cipher.organizationId != null) {\n      this.collections = this.writeableCollections.filter(\n        (c) => c.organizationId === this.cipher.organizationId\n      );\n      const org = await this.organizationService.get(this.cipher.organizationId);\n      if (org != null) {\n        this.cipher.organizationUseTotp = org.useTotp;\n      }\n    } else {\n      this.collections = [];\n    }\n  }\n\n  async checkPassword() {\n    if (this.checkPasswordPromise != null) {\n      return;\n    }\n\n    if (\n      this.cipher.login == null ||\n      this.cipher.login.password == null ||\n      this.cipher.login.password === \"\"\n    ) {\n      return;\n    }\n\n    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);\n    const matches = await this.checkPasswordPromise;\n    this.checkPasswordPromise = null;\n\n    if (matches > 0) {\n      this.platformUtilsService.showToast(\n        \"warning\",\n        null,\n        this.i18nService.t(\"passwordExposed\", matches.toString())\n      );\n    } else {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"passwordSafe\"));\n    }\n  }\n\n  repromptChanged() {\n    this.reprompt = !this.reprompt;\n    if (this.reprompt) {\n      this.cipher.reprompt = CipherRepromptType.Password;\n    } else {\n      this.cipher.reprompt = CipherRepromptType.None;\n    }\n  }\n\n  protected async loadCollections() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    return allCollections.filter((c) => !c.readOnly);\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected encryptCipher() {\n    return this.cipherService.encrypt(this.cipher);\n  }\n\n  protected saveCipher(cipher: Cipher) {\n    const isNotClone = this.editMode && !this.cloneMode;\n    const orgAdmin = this.organization?.isAdmin;\n    return this.cipher.id == null\n      ? this.cipherService.createWithServer(cipher, orgAdmin)\n      : this.cipherService.updateWithServer(cipher, orgAdmin, isNotClone);\n  }\n\n  protected deleteCipher() {\n    const asAdmin = this.organization?.canEditAnyCollection;\n    return this.cipher.isDeleted\n      ? this.cipherService.deleteWithServer(this.cipher.id, asAdmin)\n      : this.cipherService.softDeleteWithServer(this.cipher.id, asAdmin);\n  }\n\n  protected restoreCipher() {\n    const asAdmin = this.organization?.canEditAnyCollection;\n    return this.cipherService.restoreWithServer(this.cipher.id, asAdmin);\n  }\n\n  get defaultOwnerId(): string | null {\n    return this.ownershipOptions[0].value;\n  }\n\n  async loadAddEditCipherInfo(): Promise<boolean> {\n    const addEditCipherInfo: any = await this.stateService.getAddEditCipherInfo();\n    const loadedSavedInfo = addEditCipherInfo != null;\n\n    if (loadedSavedInfo) {\n      this.cipher = addEditCipherInfo.cipher;\n      this.collectionIds = addEditCipherInfo.collectionIds;\n\n      if (!this.editMode && !this.allowPersonal && this.cipher.organizationId == null) {\n        // This is a new cipher and personal ownership isn't allowed, so we need to set the default owner\n        this.cipher.organizationId = this.defaultOwnerId;\n      }\n    }\n\n    await this.stateService.setAddEditCipherInfo(null);\n\n    return loadedSavedInfo;\n  }\n}\n","import { CdkDragDrop, moveItemInArray } from \"@angular/cdk/drag-drop\";\nimport { Directive, Input, OnChanges, SimpleChanges } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventType, FieldType } from \"@bitwarden/common/enums\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\n@Directive()\nexport class AddEditCustomFieldsComponent implements OnChanges {\n  @Input() cipher: CipherView;\n  @Input() thisCipherType: CipherType;\n  @Input() editMode: boolean;\n\n  addFieldType: FieldType = FieldType.Text;\n  addFieldTypeOptions: any[];\n  addFieldLinkedTypeOption: any;\n  linkedFieldOptions: any[] = [];\n\n  cipherType = CipherType;\n  fieldType = FieldType;\n  eventType = EventType;\n\n  constructor(\n    private i18nService: I18nService,\n    private eventCollectionService: EventCollectionService\n  ) {\n    this.addFieldTypeOptions = [\n      { name: i18nService.t(\"cfTypeText\"), value: FieldType.Text },\n      { name: i18nService.t(\"cfTypeHidden\"), value: FieldType.Hidden },\n      { name: i18nService.t(\"cfTypeBoolean\"), value: FieldType.Boolean },\n    ];\n    this.addFieldLinkedTypeOption = {\n      name: this.i18nService.t(\"cfTypeLinked\"),\n      value: FieldType.Linked,\n    };\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.thisCipherType != null) {\n      this.setLinkedFieldOptions();\n\n      if (!changes.thisCipherType.firstChange) {\n        this.resetCipherLinkedFields();\n      }\n    }\n  }\n\n  addField() {\n    if (this.cipher.fields == null) {\n      this.cipher.fields = [];\n    }\n\n    const f = new FieldView();\n    f.type = this.addFieldType;\n    f.newField = true;\n\n    if (f.type === FieldType.Linked) {\n      f.linkedId = this.linkedFieldOptions[0].value;\n    }\n\n    this.cipher.fields.push(f);\n  }\n\n  removeField(field: FieldView) {\n    const i = this.cipher.fields.indexOf(field);\n    if (i > -1) {\n      this.cipher.fields.splice(i, 1);\n    }\n  }\n\n  toggleFieldValue(field: FieldView) {\n    const f = field as any;\n    f.showValue = !f.showValue;\n    if (this.editMode && f.showValue) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipher.id\n      );\n    }\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.cipher.fields, event.previousIndex, event.currentIndex);\n  }\n\n  private setLinkedFieldOptions() {\n    if (this.cipher.linkedFieldOptions == null) {\n      return;\n    }\n\n    const options: any = [];\n    this.cipher.linkedFieldOptions.forEach((linkedFieldOption, id) =>\n      options.push({ name: this.i18nService.t(linkedFieldOption.i18nKey), value: id })\n    );\n    this.linkedFieldOptions = options.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  private resetCipherLinkedFields() {\n    if (this.cipher.fields == null || this.cipher.fields.length === 0) {\n      return;\n    }\n\n    // Delete any Linked custom fields if the item type does not support them\n    if (this.cipher.linkedFieldOptions == null) {\n      this.cipher.fields = this.cipher.fields.filter((f) => f.type !== FieldType.Linked);\n      return;\n    }\n\n    this.cipher.fields\n      .filter((f) => f.type === FieldType.Linked)\n      .forEach((f) => (f.linkedId = this.linkedFieldOptions[0].value));\n  }\n}\n","import { Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from \"@angular/core\";\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\n// ref: https://juristr.com/blog/2018/02/ng-true-value-directive/\n@Directive({\n  selector: \"input[type=checkbox][appTrueFalseValue]\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TrueFalseValueDirective),\n      multi: true,\n    },\n  ],\n})\nexport class TrueFalseValueDirective implements ControlValueAccessor {\n  @Input() trueValue: boolean | string = true;\n  @Input() falseValue: boolean | string = false;\n\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\n\n  @HostListener(\"change\", [\"$event\"])\n  onHostChange(ev: any) {\n    this.propagateChange(ev.target.checked ? this.trueValue : this.falseValue);\n  }\n\n  writeValue(obj: any): void {\n    if (obj === this.trueValue) {\n      this.renderer.setProperty(this.elementRef.nativeElement, \"checked\", true);\n    } else {\n      this.renderer.setProperty(this.elementRef.nativeElement, \"checked\", false);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    /* nothing */\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    /* nothing */\n  }\n\n  private propagateChange = (_: any) => {\n    /* nothing */\n  };\n}\n","<div class=\"box\">\n  <h2 class=\"box-header\">\n    {{ \"customFields\" | i18n }}\n  </h2>\n  <div class=\"box-content\">\n    <!-- Current custom fields -->\n    <div cdkDropList (cdkDropListDropped)=\"drop($event)\" *ngIf=\"cipher.hasFields\">\n      <div\n        role=\"group\"\n        class=\"box-content-row box-content-row-multi box-draggable-row\"\n        appBoxRow\n        cdkDrag\n        *ngFor=\"let f of cipher.fields; let i = index; trackBy: trackByFunction\"\n        [ngClass]=\"{ 'box-content-row-checkbox': f.type === fieldType.Boolean }\"\n        attr.aria-label=\"{{ f.name }}\"\n      >\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"removeField(f)\"\n          appA11yTitle=\"{{ 'remove' | i18n }}\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n        >\n          <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n        </button>\n        <label for=\"fieldName{{ i }}\" class=\"sr-only\">{{ \"name\" | i18n }}</label>\n        <label for=\"fieldValue{{ i }}\" class=\"sr-only\">{{ \"value\" | i18n }}</label>\n        <div class=\"row-main\">\n          <input\n            id=\"fieldName{{ i }}\"\n            type=\"text\"\n            name=\"Field.Name{{ i }}\"\n            [(ngModel)]=\"f.name\"\n            class=\"row-label\"\n            placeholder=\"{{ 'name' | i18n }}\"\n            appInputVerbatim\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Text -->\n          <input\n            id=\"fieldValue{{ i }}\"\n            type=\"text\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.value\"\n            *ngIf=\"f.type === fieldType.Text\"\n            placeholder=\"{{ 'value' | i18n }}\"\n            appInputVerbatim\n            attr.aria-describedby=\"fieldName{{ i }}\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Hidden -->\n          <input\n            id=\"fieldValue{{ i }}\"\n            type=\"{{ f.showValue ? 'text' : 'password' }}\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.value\"\n            class=\"monospaced\"\n            appInputVerbatim\n            *ngIf=\"f.type === fieldType.Hidden\"\n            placeholder=\"{{ 'value' | i18n }}\"\n            [disabled]=\"!cipher.viewPassword && !f.newField\"\n            attr.aria-describedby=\"fieldName{{ i }}\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Linked -->\n          <select\n            id=\"fieldValue{{ i }}\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.linkedId\"\n            *ngIf=\"f.type === fieldType.Linked && cipher.linkedFieldOptions != null\"\n            attr.aria-describedby=\"fieldName{{ i }}\"\n          >\n            <option *ngFor=\"let o of linkedFieldOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <!-- Boolean -->\n        <input\n          id=\"fieldValue{{ i }}\"\n          name=\"Field.Value{{ i }}\"\n          type=\"checkbox\"\n          [(ngModel)]=\"f.value\"\n          *ngIf=\"f.type === fieldType.Boolean\"\n          appTrueFalseValue\n          trueValue=\"true\"\n          falseValue=\"false\"\n          attr.aria-describedby=\"fieldName{{ i }}\"\n          [readonly]=\"!cipher.edit && editMode\"\n        />\n        <div\n          class=\"action-buttons\"\n          *ngIf=\"f.type === fieldType.Hidden && (cipher.viewPassword || f.newField)\"\n        >\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n            (click)=\"toggleFieldValue(f)\"\n            [attr.aria-pressed]=\"f.showValue\"\n          >\n            <i\n              class=\"bwi bwi-lg\"\n              aria-hidden=\"true\"\n              [ngClass]=\"{ 'bwi-eye': !f.showValue, 'bwi-eye-slash': f.showValue }\"\n            ></i>\n          </button>\n        </div>\n        <div\n          class=\"drag-handle\"\n          appA11yTitle=\"{{ 'dragToSort' | i18n }}\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n          cdkDragHandle\n        >\n          <i class=\"bwi bwi-hamburger\" aria-hidden=\"true\"></i>\n        </div>\n      </div>\n    </div>\n    <!-- Add new custom field -->\n    <div\n      class=\"box-content-row box-content-row-newmulti\"\n      *ngIf=\"!(!cipher.edit && editMode)\"\n      appBoxRow\n    >\n      <button type=\"button\" appStopClick (click)=\"addField()\">\n        <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i>\n        {{ \"newCustomField\" | i18n }}\n      </button>\n      <label for=\"addFieldType\" class=\"sr-only\">{{ \"type\" | i18n }}</label>\n      <select id=\"addFieldType\" name=\"AddFieldType\" [(ngModel)]=\"addFieldType\" class=\"field-type\">\n        <option *ngFor=\"let o of addFieldTypeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        <option\n          *ngIf=\"cipher.linkedFieldOptions != null\"\n          [ngValue]=\"addFieldLinkedTypeOption.value\"\n        >\n          {{ addFieldLinkedTypeOption.name }}\n        </option>\n      </select>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { AddEditCustomFieldsComponent as BaseAddEditCustomFieldsComponent } from \"@bitwarden/angular/vault/components/add-edit-custom-fields.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\n@Component({\n  selector: \"app-vault-add-edit-custom-fields\",\n  templateUrl: \"add-edit-custom-fields.component.html\",\n})\nexport class AddEditCustomFieldsComponent extends BaseAddEditCustomFieldsComponent {\n  constructor(i18nService: I18nService, eventCollectionService: EventCollectionService) {\n    super(i18nService, eventCollectionService);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"cipher\">\n    <app-callout type=\"info\" *ngIf=\"allowOwnershipOptions() && !allowPersonal\">\n      {{ \"personalOwnershipPolicyInEffect\" | i18n }}\n    </app-callout>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"itemInformation\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" *ngIf=\"!editMode\" appBoxRow>\n          <label for=\"type\">{{ \"type\" | i18n }}</label>\n          <select id=\"type\" name=\"Type\" [(ngModel)]=\"cipher.type\">\n            <option *ngFor=\"let o of typeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            [(ngModel)]=\"cipher.name\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n        </div>\n        <!-- Login -->\n        <div *ngIf=\"cipher.type === cipherType.Login\">\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"loginUsername\">{{ \"username\" | i18n }}</label>\n              <input\n                id=\"loginUsername\"\n                type=\"text\"\n                name=\"Login.Username\"\n                [(ngModel)]=\"cipher.login.username\"\n                inputmode=\"email\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'generateUsername' | i18n }}\"\n                (click)=\"generateUsername()\"\n                *ngIf=\"!(!cipher.edit && editMode)\"\n              >\n                <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"loginPassword\">{{ \"password\" | i18n }}</label>\n              <input\n                id=\"loginPassword\"\n                class=\"monospaced\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"Login.Password\"\n                [(ngModel)]=\"cipher.login.password\"\n                appInputVerbatim\n                [disabled]=\"!cipher.viewPassword\"\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                #checkPasswordBtn\n                class=\"row-btn btn\"\n                appA11yTitle=\"{{ 'checkPassword' | i18n }}\"\n                (click)=\"checkPassword()\"\n                [appApiAction]=\"checkPasswordPromise\"\n                [disabled]=\"$any(checkPasswordBtn).loading\"\n                *ngIf=\"cipher.viewPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg bwi-check-circle\"\n                  [hidden]=\"$any(checkPasswordBtn).loading\"\n                  aria-hidden=\"true\"\n                ></i>\n                <i\n                  class=\"bwi bwi-lg bwi-spinner bwi-spin\"\n                  [hidden]=\"!$any(checkPasswordBtn).loading\"\n                  aria-hidden=\"true\"\n                ></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword()\"\n                *ngIf=\"cipher.viewPassword\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'generatePassword' | i18n }}\"\n                (click)=\"generatePassword()\"\n                *ngIf=\"cipher.viewPassword && !(!cipher.edit && editMode)\"\n              >\n                <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"loginTotp\">{{ \"authenticatorKeyTotp\" | i18n }}</label>\n            <input\n              id=\"loginTotp\"\n              type=\"{{ cipher.viewPassword ? 'text' : 'password' }}\"\n              name=\"Login.Totp\"\n              class=\"monospaced\"\n              [(ngModel)]=\"cipher.login.totp\"\n              appInputVerbatim\n              [disabled]=\"!cipher.viewPassword\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n        </div>\n        <!-- Card -->\n        <div *ngIf=\"cipher.type === cipherType.Card\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardCardholderName\">{{ \"cardholderName\" | i18n }}</label>\n            <input\n              id=\"cardCardholderName\"\n              type=\"text\"\n              name=\"Card.CardCardholderName\"\n              [(ngModel)]=\"cipher.card.cardholderName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"cardNumber\">{{ \"number\" | i18n }}</label>\n              <input\n                id=\"cardNumber\"\n                class=\"monospaced\"\n                type=\"{{ showCardNumber ? 'text' : 'password' }}\"\n                name=\"Card.Number\"\n                (input)=\"onCardNumberChange()\"\n                [(ngModel)]=\"cipher.card.number\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"toggleCardNumber()\"\n                [attr.aria-pressed]=\"showCardNumber\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showCardNumber, 'bwi-eye-slash': showCardNumber }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardBrand\">{{ \"brand\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyCardBrand\">\n              <select id=\"cardBrand\" name=\"Card.Brand\" [(ngModel)]=\"cipher.card.brand\">\n                <option *ngFor=\"let o of cardBrandOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n              </select>\n            </span>\n            <ng-template #readonlyCardBrand>\n              <input\n                id=\"cardBrand\"\n                name=\"Card.Brand\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"cipher.card.brand\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardExpMonth\">{{ \"expirationMonth\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyCardExpMonth\">\n              <select id=\"cardExpMonth\" name=\"Card.ExpMonth\" [(ngModel)]=\"cipher.card.expMonth\">\n                <option *ngFor=\"let o of cardExpMonthOptions\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </span>\n            <ng-template #readonlyCardExpMonth>\n              <input\n                id=\"cardExpMonth\"\n                name=\"Card.ExpMonth\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"getCardExpMonthDisplay()\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardExpYear\">{{ \"expirationYear\" | i18n }}</label>\n            <input\n              id=\"cardExpYear\"\n              type=\"text\"\n              name=\"Card.ExpYear\"\n              [(ngModel)]=\"cipher.card.expYear\"\n              placeholder=\"{{ 'ex' | i18n }} {{ currentDate | date : 'yyyy' }}\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"cardCode\">{{ \"securityCode\" | i18n }}</label>\n              <input\n                id=\"cardCode\"\n                class=\"monospaced\"\n                type=\"{{ showCardCode ? 'text' : 'password' }}\"\n                name=\"Card.Code\"\n                [(ngModel)]=\"cipher.card.code\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"toggleCardCode()\"\n                [attr.aria-pressed]=\"showCardCode\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showCardCode, 'bwi-eye-slash': showCardCode }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <!-- Identity -->\n        <div *ngIf=\"cipher.type === cipherType.Identity\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idTitle\">{{ \"title\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyIdTitle\">\n              <select id=\"idTitle\" name=\"Identity.Title\" [(ngModel)]=\"cipher.identity.title\">\n                <option *ngFor=\"let o of identityTitleOptions\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </span>\n            <ng-template #readonlyIdTitle>\n              <input\n                id=\"idTitle\"\n                name=\"Identity.Title\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"cipher.identity.title\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idFirstName\">{{ \"firstName\" | i18n }}</label>\n            <input\n              id=\"idFirstName\"\n              type=\"text\"\n              name=\"Identity.FirstName\"\n              [(ngModel)]=\"cipher.identity.firstName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idMiddleName\">{{ \"middleName\" | i18n }}</label>\n            <input\n              id=\"idMiddleName\"\n              type=\"text\"\n              name=\"Identity.MiddleName\"\n              [(ngModel)]=\"cipher.identity.middleName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idLastName\">{{ \"lastName\" | i18n }}</label>\n            <input\n              id=\"idLastName\"\n              type=\"text\"\n              name=\"Identity.LastName\"\n              [(ngModel)]=\"cipher.identity.lastName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idUsername\">{{ \"username\" | i18n }}</label>\n            <input\n              id=\"idUsername\"\n              type=\"text\"\n              name=\"Identity.Username\"\n              [(ngModel)]=\"cipher.identity.username\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCompany\">{{ \"company\" | i18n }}</label>\n            <input\n              id=\"idCompany\"\n              type=\"text\"\n              name=\"Identity.Company\"\n              [(ngModel)]=\"cipher.identity.company\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idSsn\">{{ \"ssn\" | i18n }}</label>\n            <input\n              id=\"idSsn\"\n              type=\"text\"\n              name=\"Identity.SSN\"\n              [(ngModel)]=\"cipher.identity.ssn\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPassportNumber\">{{ \"passportNumber\" | i18n }}</label>\n            <input\n              id=\"idPassportNumber\"\n              type=\"text\"\n              name=\"Identity.PassportNumber\"\n              [(ngModel)]=\"cipher.identity.passportNumber\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idLicenseNumber\">{{ \"licenseNumber\" | i18n }}</label>\n            <input\n              id=\"idLicenseNumber\"\n              type=\"text\"\n              name=\"Identity.LicenseNumber\"\n              [(ngModel)]=\"cipher.identity.licenseNumber\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idEmail\">{{ \"email\" | i18n }}</label>\n            <input\n              id=\"idEmail\"\n              type=\"text\"\n              name=\"Identity.Email\"\n              [(ngModel)]=\"cipher.identity.email\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPhone\">{{ \"phone\" | i18n }}</label>\n            <input\n              id=\"idPhone\"\n              type=\"text\"\n              name=\"Identity.Phone\"\n              [(ngModel)]=\"cipher.identity.phone\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress1\">{{ \"address1\" | i18n }}</label>\n            <input\n              id=\"idAddress1\"\n              type=\"text\"\n              name=\"Identity.Address1\"\n              [(ngModel)]=\"cipher.identity.address1\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress2\">{{ \"address2\" | i18n }}</label>\n            <input\n              id=\"idAddress2\"\n              type=\"text\"\n              name=\"Identity.Address2\"\n              [(ngModel)]=\"cipher.identity.address2\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress3\">{{ \"address3\" | i18n }}</label>\n            <input\n              id=\"idAddress3\"\n              type=\"text\"\n              name=\"Identity.Address3\"\n              [(ngModel)]=\"cipher.identity.address3\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCity\">{{ \"cityTown\" | i18n }}</label>\n            <input\n              id=\"idCity\"\n              type=\"text\"\n              name=\"Identity.City\"\n              [(ngModel)]=\"cipher.identity.city\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idState\">{{ \"stateProvince\" | i18n }}</label>\n            <input\n              id=\"idState\"\n              type=\"text\"\n              name=\"Identity.State\"\n              [(ngModel)]=\"cipher.identity.state\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPostalCode\">{{ \"zipPostalCode\" | i18n }}</label>\n            <input\n              id=\"idPostalCode\"\n              type=\"text\"\n              name=\"Identity.PostalCode\"\n              [(ngModel)]=\"cipher.identity.postalCode\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCountry\">{{ \"country\" | i18n }}</label>\n            <input\n              id=\"idCountry\"\n              type=\"text\"\n              name=\"Identity.Country\"\n              [(ngModel)]=\"cipher.identity.country\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"cipher.type === cipherType.Login\">\n      <div class=\"box-content\">\n        <ng-container *ngIf=\"cipher.login.hasUris\">\n          <div\n            role=\"group\"\n            class=\"box-content-row box-content-row-multi\"\n            appBoxRow\n            *ngFor=\"let u of cipher.login.uris; let i = index; trackBy: trackByFunction\"\n            attr.aria-label=\"{{ 'uriPosition' | i18n : i + 1 }}\"\n          >\n            <button\n              type=\"button\"\n              appStopClick\n              (click)=\"removeUri(u)\"\n              appA11yTitle=\"{{ 'remove' | i18n }}\"\n            >\n              <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n            </button>\n            <div class=\"row-main\">\n              <label for=\"loginUri{{ i }}\">{{ \"uriPosition\" | i18n : i + 1 }}</label>\n              <input\n                id=\"loginUri{{ i }}\"\n                type=\"text\"\n                name=\"Login.Uris[{{ i }}].Uri\"\n                [(ngModel)]=\"u.uri\"\n                [hidden]=\"$any(u).showUriOptionsInput === true\"\n                placeholder=\"{{ 'ex' | i18n }} https://google.com\"\n                inputmode=\"url\"\n                appInputVerbatim\n              />\n              <label for=\"loginUriMatch{{ i }}\" class=\"sr-only\">\n                {{ \"currentUri\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                *ngIf=\"currentUris && currentUris.length\"\n                id=\"currentUris{{ i }}\"\n                name=\"Login.Uris[{{ i }}].CurrentUris\"\n                [(ngModel)]=\"u.uri\"\n                [hidden]=\"!$any(u).showCurrentUris\"\n              >\n                <option [ngValue]=\"null\">-- {{ \"select\" | i18n }} --</option>\n                <option *ngFor=\"let u of currentUris\" [ngValue]=\"u\">{{ u }}</option>\n              </select>\n              <label for=\"loginUriMatch{{ i }}\" class=\"sr-only\">\n                {{ \"matchDetection\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                id=\"loginUriMatch{{ i }}\"\n                name=\"Login.Uris[{{ i }}].Match\"\n                [(ngModel)]=\"u.match\"\n                [hidden]=\"\n                  $any(u).showOptions === false || ($any(u).showOptions == null && u.match == null)\n                \"\n                (change)=\"loginUriMatchChanged(u)\"\n              >\n                <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n              </select>\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                *ngIf=\"currentUris && currentUris.length\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleCurrentUris' | i18n }}\"\n                (click)=\"toggleUriInput(u)\"\n                [attr.aria-pressed]=\"$any(u).showCurrentUris === true\"\n              >\n                <i aria-hidden=\"true\" class=\"bwi bwi-lg bwi-list\"></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleOptions' | i18n }}\"\n                (click)=\"toggleUriOptions(u)\"\n                [attr.aria-pressed]=\"$any(u).showOptions === true\"\n              >\n                <i class=\"bwi bwi-lg bwi-cog\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </ng-container>\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"addUri()\"\n          class=\"box-content-row box-content-row-newmulti single-line\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n        >\n          <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i> {{ \"newUri\" | i18n }}\n        </button>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"showAutoFillOnPageLoadOptions\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"autofillOnPageLoad\">{{ \"itemAutoFillOnPageLoad\" | i18n }} </label>\n          <select\n            id=\"autofillOnPageLoad\"\n            name=\"AutofillOnPageLoad\"\n            [(ngModel)]=\"cipher.login.autofillOnPageLoad\"\n          >\n            <option *ngFor=\"let o of autofillOnPageLoadOptions\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"folder\">{{ \"folder\" | i18n }}</label>\n          <select id=\"folder\" name=\"FolderId\" [(ngModel)]=\"cipher.folderId\">\n            <option *ngFor=\"let f of folders$ | async\" [ngValue]=\"f.id\">{{ f.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"favorite\">{{ \"favorite\" | i18n }}</label>\n          <input id=\"favorite\" type=\"checkbox\" name=\"Favorite\" [(ngModel)]=\"cipher.favorite\" />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow *ngIf=\"canUseReprompt\">\n          <label for=\"passwordPrompt\">\n            {{ \"passwordPrompt\" | i18n }}\n            <a\n              target=\"_blank\"\n              rel=\"noopener\"\n              appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n              href=\"https://bitwarden.com/help/managing-items/#protect-individual-items\"\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n            </a>\n          </label>\n          <input\n            id=\"passwordPrompt\"\n            type=\"checkbox\"\n            name=\"PasswordPrompt\"\n            [ngModel]=\"reprompt\"\n            (change)=\"repromptChanged()\"\n            [disabled]=\"!cipher.edit && editMode\"\n          />\n        </div>\n        <button\n          type=\"button\"\n          class=\"box-content-row box-content-row-flex text-default single-line\"\n          appStopClick\n          (click)=\"attachments()\"\n          *ngIf=\"editMode && showAttachments && !cloneMode\"\n        >\n          <div class=\"row-main\">{{ \"attachments\" | i18n }}</div>\n          <i\n            class=\"bwi bwi-external-link bwi-lg bwi-fw\"\n            aria-hidden=\"true\"\n            *ngIf=\"openAttachmentsInPopup\"\n          ></i>\n          <i\n            class=\"bwi bwi-angle-right row-sub-icon\"\n            aria-hidden=\"true\"\n            *ngIf=\"!openAttachmentsInPopup\"\n          ></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row box-content-row-flex text-default\"\n          appStopClick\n          (click)=\"editCollections()\"\n          *ngIf=\"editMode && cipher.organizationId && !cloneMode\"\n        >\n          <div class=\"row-main\">{{ \"collections\" | i18n }}</div>\n          <i class=\"bwi bwi-angle-right row-sub-icon\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        <label for=\"notes\">{{ \"notes\" | i18n }}</label>\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <textarea\n            id=\"notes\"\n            name=\"Notes\"\n            rows=\"6\"\n            [(ngModel)]=\"cipher.notes\"\n            [readonly]=\"!cipher.edit && editMode\"\n          ></textarea>\n        </div>\n      </div>\n    </div>\n    <app-vault-add-edit-custom-fields\n      *ngIf=\"!(!cipher.hasFields && !cipher.edit && editMode)\"\n      [cipher]=\"cipher\"\n      [thisCipherType]=\"cipher.type\"\n      [editMode]=\"editMode\"\n    >\n    </app-vault-add-edit-custom-fields>\n    <div class=\"box\" *ngIf=\"allowOwnershipOptions()\">\n      <h2 class=\"box-header\">\n        {{ \"ownership\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"organizationId\">{{ \"whoOwnsThisItem\" | i18n }}</label>\n          <select\n            id=\"organizationId\"\n            class=\"form-control\"\n            name=\"OrganizationId\"\n            [(ngModel)]=\"cipher.organizationId\"\n            (change)=\"organizationChanged()\"\n          >\n            <option *ngFor=\"let o of ownershipOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"(!editMode || cloneMode) && cipher.organizationId\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n      </h2>\n      <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n        <div class=\"box-content-row padded no-hover\">\n          {{ \"noCollectionsInList\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n        <div\n          class=\"box-content-row box-content-row-checkbox\"\n          *ngFor=\"let c of collections; let i = index\"\n          appBoxRow\n        >\n          <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n          <input\n            id=\"collection_{{ i }}\"\n            type=\"checkbox\"\n            [(ngModel)]=\"$any(c).checked\"\n            name=\"Collection[{{ i }}].Checked\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"editMode && !cloneMode && !(!cipher.edit && editMode)\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteItem\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AddEditComponent as BaseAddEditComponent } from \"@bitwarden/angular/vault/components/add-edit.component\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BrowserApi } from \"../../../../platform/browser/browser-api\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\n\n@Component({\n  selector: \"app-vault-add-edit\",\n  templateUrl: \"add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class AddEditComponent extends BaseAddEditComponent {\n  currentUris: string[];\n  showAttachments = true;\n  openAttachmentsInPopup: boolean;\n  showAutoFillOnPageLoadOptions: boolean;\n\n  constructor(\n    cipherService: CipherService,\n    folderService: FolderService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    auditService: AuditService,\n    stateService: StateService,\n    collectionService: CollectionService,\n    messagingService: MessagingService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    eventCollectionService: EventCollectionService,\n    policyService: PolicyService,\n    private popupUtilsService: PopupUtilsService,\n    organizationService: OrganizationService,\n    passwordRepromptService: PasswordRepromptService,\n    logService: LogService,\n    sendApiService: SendApiService,\n    dialogService: DialogService\n  ) {\n    super(\n      cipherService,\n      folderService,\n      i18nService,\n      platformUtilsService,\n      auditService,\n      stateService,\n      collectionService,\n      messagingService,\n      eventCollectionService,\n      policyService,\n      logService,\n      passwordRepromptService,\n      organizationService,\n      sendApiService,\n      dialogService\n    );\n  }\n\n  async ngOnInit() {\n    await super.ngOnInit();\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      }\n      if (params.folderId) {\n        this.folderId = params.folderId;\n      }\n      if (params.collectionId) {\n        const collection = this.writeableCollections.find((c) => c.id === params.collectionId);\n        if (collection != null) {\n          this.collectionIds = [collection.id];\n          this.organizationId = collection.organizationId;\n        }\n      }\n      if (params.type) {\n        const type = parseInt(params.type, null);\n        this.type = type;\n      }\n      this.editMode = !params.cipherId;\n\n      if (params.cloneMode != null) {\n        this.cloneMode = params.cloneMode === \"true\";\n      }\n      if (params.selectedVault) {\n        this.organizationId = params.selectedVault;\n      }\n      await this.load();\n\n      if (!this.editMode || this.cloneMode) {\n        if (\n          !this.popupUtilsService.inPopout(window) &&\n          params.name &&\n          (this.cipher.name == null || this.cipher.name === \"\")\n        ) {\n          this.cipher.name = params.name;\n        }\n        if (\n          !this.popupUtilsService.inPopout(window) &&\n          params.uri &&\n          (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === \"\")\n        ) {\n          this.cipher.login.uris[0].uri = params.uri;\n        }\n      }\n\n      this.openAttachmentsInPopup = this.popupUtilsService.inPopup(window);\n    });\n\n    if (!this.editMode) {\n      const tabs = await BrowserApi.tabsQuery({ windowType: \"normal\" });\n      this.currentUris =\n        tabs == null\n          ? null\n          : tabs.filter((tab) => tab.url != null && tab.url !== \"\").map((tab) => tab.url);\n    }\n\n    this.setFocus();\n\n    if (this.popupUtilsService.inTab(window)) {\n      this.popupUtilsService.enableCloseTabWarning();\n    }\n  }\n\n  async load() {\n    await super.load();\n    this.showAutoFillOnPageLoadOptions =\n      this.cipher.type === CipherType.Login &&\n      (await this.stateService.getEnableAutoFillOnPageLoad());\n  }\n\n  async submit(): Promise<boolean> {\n    const success = await super.submit();\n    if (!success) {\n      return false;\n    }\n\n    if (this.popupUtilsService.inTab(window)) {\n      this.popupUtilsService.disableCloseTabWarning();\n      this.messagingService.send(\"closeTab\", { delay: 1000 });\n      return true;\n    }\n\n    if (this.cloneMode) {\n      this.router.navigate([\"/tabs/vault\"]);\n    } else {\n      this.location.back();\n    }\n    return true;\n  }\n\n  attachments() {\n    super.attachments();\n\n    if (this.openAttachmentsInPopup) {\n      const destinationUrl = this.router\n        .createUrlTree([\"/attachments\"], { queryParams: { cipherId: this.cipher.id } })\n        .toString();\n      const currentBaseUrl = window.location.href.replace(this.router.url, \"\");\n      this.popupUtilsService.popOut(window, currentBaseUrl + destinationUrl);\n    } else {\n      this.router.navigate([\"/attachments\"], { queryParams: { cipherId: this.cipher.id } });\n    }\n  }\n\n  editCollections() {\n    super.editCollections();\n    if (this.cipher.organizationId != null) {\n      this.router.navigate([\"/collections\"], { queryParams: { cipherId: this.cipher.id } });\n    }\n  }\n\n  cancel() {\n    super.cancel();\n\n    if (this.popupUtilsService.inTab(window)) {\n      this.messagingService.send(\"closeTab\");\n      return;\n    }\n\n    this.location.back();\n  }\n\n  async generateUsername(): Promise<boolean> {\n    const confirmed = await super.generateUsername();\n    if (confirmed) {\n      await this.saveCipherState();\n      this.router.navigate([\"generator\"], { queryParams: { type: \"username\" } });\n    }\n    return confirmed;\n  }\n\n  async generatePassword(): Promise<boolean> {\n    const confirmed = await super.generatePassword();\n    if (confirmed) {\n      await this.saveCipherState();\n      this.router.navigate([\"generator\"], { queryParams: { type: \"password\" } });\n    }\n    return confirmed;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await super.delete();\n    if (confirmed) {\n      this.router.navigate([\"/tabs/vault\"]);\n    }\n    return confirmed;\n  }\n\n  toggleUriInput(uri: LoginUriView) {\n    const u = uri as any;\n    u.showCurrentUris = !u.showCurrentUris;\n  }\n\n  allowOwnershipOptions(): boolean {\n    return (\n      (!this.editMode || this.cloneMode) &&\n      this.ownershipOptions &&\n      (this.ownershipOptions.length > 1 || !this.allowPersonal)\n    );\n  }\n\n  private saveCipherState() {\n    return this.stateService.setAddEditCipherInfo({\n      cipher: this.cipher,\n      collectionIds:\n        this.collections == null\n          ? []\n          : this.collections.filter((c) => (c as any).checked).map((c) => c.id),\n    });\n  }\n\n  private setFocus() {\n    window.setTimeout(() => {\n      if (this.editMode) {\n        return;\n      }\n\n      if (this.cipher.name != null && this.cipher.name !== \"\") {\n        document.getElementById(\"loginUsername\").focus();\n      } else {\n        document.getElementById(\"name\").focus();\n      }\n    }, 200);\n  }\n}\n","import { EncryptionType } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Encrypted } from \"../../interfaces/encrypted\";\n\nconst ENC_TYPE_LENGTH = 1;\nconst IV_LENGTH = 16;\nconst MAC_LENGTH = 32;\nconst MIN_DATA_LENGTH = 1;\n\nexport class EncArrayBuffer implements Encrypted {\n  readonly encryptionType: EncryptionType = null;\n  readonly dataBytes: Uint8Array = null;\n  readonly ivBytes: Uint8Array = null;\n  readonly macBytes: Uint8Array = null;\n\n  constructor(readonly buffer: Uint8Array) {\n    const encBytes = buffer;\n    const encType = encBytes[0];\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH);\n        this.macBytes = encBytes.slice(\n          ENC_TYPE_LENGTH + IV_LENGTH,\n          ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH\n        );\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH);\n        break;\n      }\n      case EncryptionType.AesCbc256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH);\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH);\n        break;\n      }\n      default:\n        this.throwDecryptionError();\n    }\n\n    this.encryptionType = encType;\n  }\n\n  private throwDecryptionError() {\n    throw new Error(\n      \"Error parsing encrypted ArrayBuffer: data is corrupted or has an invalid format.\"\n    );\n  }\n\n  static async fromResponse(response: {\n    arrayBuffer: () => Promise<ArrayBuffer>;\n  }): Promise<EncArrayBuffer> {\n    const buffer = await response.arrayBuffer();\n    if (buffer == null) {\n      throw new Error(\"Cannot create EncArrayBuffer from Response - Response is empty\");\n    }\n    return new EncArrayBuffer(new Uint8Array(buffer));\n  }\n\n  static fromB64(b64: string) {\n    const buffer = Utils.fromB64ToArray(b64);\n    return new EncArrayBuffer(buffer);\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { EncArrayBuffer } from \"@bitwarden/common/platform/models/domain/enc-array-buffer\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { AttachmentView } from \"@bitwarden/common/vault/models/view/attachment.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class AttachmentsComponent implements OnInit {\n  @Input() cipherId: string;\n  @Output() onUploadedAttachment = new EventEmitter();\n  @Output() onDeletedAttachment = new EventEmitter();\n  @Output() onReuploadedAttachment = new EventEmitter();\n\n  cipher: CipherView;\n  cipherDomain: Cipher;\n  hasUpdatedKey: boolean;\n  canAccessAttachments: boolean;\n  formPromise: Promise<any>;\n  deletePromises: { [id: string]: Promise<any> } = {};\n  reuploadPromises: { [id: string]: Promise<any> } = {};\n  emergencyAccessId?: string = null;\n  protected componentName = \"\";\n\n  constructor(\n    protected cipherService: CipherService,\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    protected win: Window,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected fileDownloadService: FileDownloadService,\n    protected dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  async submit() {\n    if (!this.hasUpdatedKey) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"updateKey\")\n      );\n      return;\n    }\n\n    const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n    const files = fileEl.files;\n    if (files == null || files.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectFile\")\n      );\n      return;\n    }\n\n    if (files[0].size > 524288000) {\n      // 500 MB\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"maxFileSize\")\n      );\n      return;\n    }\n\n    try {\n      this.formPromise = this.saveCipherAttachment(files[0]);\n      this.cipherDomain = await this.formPromise;\n      this.cipher = await this.cipherDomain.decrypt(\n        await this.cipherService.getKeyForCipherKeyDecryption(this.cipherDomain)\n      );\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"attachmentSaved\"));\n      this.onUploadedAttachment.emit();\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    // reset file input\n    // ref: https://stackoverflow.com/a/20552042\n    fileEl.type = \"\";\n    fileEl.type = \"file\";\n    fileEl.value = \"\";\n  }\n\n  async delete(attachment: AttachmentView) {\n    if (this.deletePromises[attachment.id] != null) {\n      return;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"deleteAttachment\" },\n      content: { key: \"deleteAttachmentConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);\n      await this.deletePromises[attachment.id];\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedAttachment\"));\n      const i = this.cipher.attachments.indexOf(attachment);\n      if (i > -1) {\n        this.cipher.attachments.splice(i, 1);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    this.deletePromises[attachment.id] = null;\n    this.onDeletedAttachment.emit();\n  }\n\n  async download(attachment: AttachmentView) {\n    const a = attachment as any;\n    if (a.downloading) {\n      return;\n    }\n\n    if (!this.canAccessAttachments) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"premiumRequiredDesc\")\n      );\n      return;\n    }\n\n    let url: string;\n    try {\n      const attachmentDownloadResponse = await this.apiService.getAttachmentData(\n        this.cipher.id,\n        attachment.id,\n        this.emergencyAccessId\n      );\n      url = attachmentDownloadResponse.url;\n    } catch (e) {\n      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n        url = attachment.url;\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    a.downloading = true;\n    const response = await fetch(new Request(url, { cache: \"no-store\" }));\n    if (response.status !== 200) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      a.downloading = false;\n      return;\n    }\n\n    try {\n      const encBuf = await EncArrayBuffer.fromResponse(response);\n      const key =\n        attachment.key != null\n          ? attachment.key\n          : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n      const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n      this.fileDownloadService.download({\n        fileName: attachment.fileName,\n        blobData: decBuf,\n      });\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n\n    a.downloading = false;\n  }\n\n  protected async init() {\n    this.cipherDomain = await this.loadCipher();\n    this.cipher = await this.cipherDomain.decrypt(\n      await this.cipherService.getKeyForCipherKeyDecryption(this.cipherDomain)\n    );\n\n    this.hasUpdatedKey = await this.cryptoService.hasUserKey();\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.canAccessAttachments = canAccessPremium || this.cipher.organizationId != null;\n\n    if (!this.canAccessAttachments) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"premiumRequired\" },\n        content: { key: \"premiumRequiredDesc\" },\n        acceptButtonText: { key: \"learnMore\" },\n        type: \"success\",\n      });\n\n      if (confirmed) {\n        this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=purchase\");\n      }\n    } else if (!this.hasUpdatedKey) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"featureUnavailable\" },\n        content: { key: \"updateKey\" },\n        acceptButtonText: { key: \"learnMore\" },\n        type: \"warning\",\n      });\n\n      if (confirmed) {\n        this.platformUtilsService.launchUri(\n          \"https://bitwarden.com/help/account-encryption-key/#rotate-your-encryption-key\"\n        );\n      }\n    }\n  }\n\n  protected async reuploadCipherAttachment(attachment: AttachmentView, admin: boolean) {\n    const a = attachment as any;\n    if (attachment.key != null || a.downloading || this.reuploadPromises[attachment.id] != null) {\n      return;\n    }\n\n    try {\n      this.reuploadPromises[attachment.id] = Promise.resolve().then(async () => {\n        // 1. Download\n        a.downloading = true;\n        const response = await fetch(new Request(attachment.url, { cache: \"no-store\" }));\n        if (response.status !== 200) {\n          this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n          a.downloading = false;\n          return;\n        }\n\n        try {\n          // 2. Resave\n          const encBuf = await EncArrayBuffer.fromResponse(response);\n          const key =\n            attachment.key != null\n              ? attachment.key\n              : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n          const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n          this.cipherDomain = await this.cipherService.saveAttachmentRawWithServer(\n            this.cipherDomain,\n            attachment.fileName,\n            decBuf,\n            admin\n          );\n          this.cipher = await this.cipherDomain.decrypt(\n            await this.cipherService.getKeyForCipherKeyDecryption(this.cipherDomain)\n          );\n\n          // 3. Delete old\n          this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);\n          await this.deletePromises[attachment.id];\n          const foundAttachment = this.cipher.attachments.filter((a2) => a2.id === attachment.id);\n          if (foundAttachment.length > 0) {\n            const i = this.cipher.attachments.indexOf(foundAttachment[0]);\n            if (i > -1) {\n              this.cipher.attachments.splice(i, 1);\n            }\n          }\n\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"attachmentSaved\")\n          );\n          this.onReuploadedAttachment.emit();\n        } catch (e) {\n          this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n        }\n\n        a.downloading = false;\n      });\n      await this.reuploadPromises[attachment.id];\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected saveCipherAttachment(file: File) {\n    return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file);\n  }\n\n  protected deleteCipherAttachment(attachmentId: string) {\n    return this.cipherService.deleteAttachmentWithServer(this.cipher.id, attachmentId);\n  }\n\n  protected async reupload(attachment: AttachmentView) {\n    // TODO: This should be removed but is needed since we re-use the same template\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"close()\" *ngIf=\"openedAttachmentsInPopup\">\n        {{ \"close\" | i18n }}\n      </button>\n      <button type=\"button\" (click)=\"back()\" *ngIf=\"!openedAttachmentsInPopup\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"attachments\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\" *ngIf=\"cipher && cipher.hasAttachments\">\n      <div class=\"box-content no-hover single-line\">\n        <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let a of cipher.attachments\">\n          <div class=\"row-main\">\n            {{ a.fileName }}\n          </div>\n          <small class=\"row-sub-label\">{{ a.sizeName }}</small>\n          <div class=\"action-buttons no-pad\">\n            <button\n              type=\"button\"\n              class=\"row-btn btn\"\n              type=\"button\"\n              appStopClick\n              appA11yTitle=\"{{ 'deleteAttachment' | i18n }}\"\n              (click)=\"delete(a)\"\n              #deleteBtn\n              [appApiAction]=\"deletePromises[a.id]\"\n              [disabled]=\"$any(deleteBtn).loading\"\n            >\n              <i\n                class=\"bwi bwi-trash bwi-lg bwi-fw\"\n                [hidden]=\"$any(deleteBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"newAttachment\" | i18n }}\n      </h2>\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <input type=\"file\" id=\"file\" name=\"file\" aria-describedby=\"fileHelp\" required />\n        </div>\n      </div>\n      <div id=\"fileHelp\" class=\"box-footer\">\n        {{ \"maxFileSize\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AttachmentsComponent as BaseAttachmentsComponent } from \"@bitwarden/angular/vault/components/attachments.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-vault-attachments\",\n  templateUrl: \"attachments.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class AttachmentsComponent extends BaseAttachmentsComponent {\n  openedAttachmentsInPopup: boolean;\n\n  constructor(\n    cipherService: CipherService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    private location: Location,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    logService: LogService,\n    fileDownloadService: FileDownloadService,\n    dialogService: DialogService\n  ) {\n    super(\n      cipherService,\n      i18nService,\n      cryptoService,\n      platformUtilsService,\n      apiService,\n      window,\n      logService,\n      stateService,\n      fileDownloadService,\n      dialogService\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.init();\n    });\n\n    this.openedAttachmentsInPopup = history.length === 1;\n  }\n\n  back() {\n    this.location.back();\n  }\n\n  close() {\n    window.close();\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\n\n@Directive()\nexport class CollectionsComponent implements OnInit {\n  @Input() cipherId: string;\n  @Input() allowSelectNone = false;\n  @Output() onSavedCollections = new EventEmitter();\n\n  formPromise: Promise<any>;\n  cipher: CipherView;\n  collectionIds: string[];\n  collections: CollectionView[] = [];\n\n  protected cipherDomain: Cipher;\n\n  constructor(\n    protected collectionService: CollectionService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected cipherService: CipherService,\n    private logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n  }\n\n  async load() {\n    this.cipherDomain = await this.loadCipher();\n    this.collectionIds = this.loadCipherCollections();\n    this.cipher = await this.cipherDomain.decrypt(\n      await this.cipherService.getKeyForCipherKeyDecryption(this.cipherDomain)\n    );\n    this.collections = await this.loadCollections();\n\n    this.collections.forEach((c) => ((c as any).checked = false));\n    if (this.collectionIds != null) {\n      this.collections.forEach((c) => {\n        (c as any).checked = this.collectionIds != null && this.collectionIds.indexOf(c.id) > -1;\n      });\n    }\n  }\n\n  async submit() {\n    const selectedCollectionIds = this.collections\n      .filter((c) => !!(c as any).checked)\n      .map((c) => c.id);\n    if (!this.allowSelectNone && selectedCollectionIds.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectOneCollection\")\n      );\n      return;\n    }\n    this.cipherDomain.collectionIds = selectedCollectionIds;\n    try {\n      this.formPromise = this.saveCollections();\n      await this.formPromise;\n      this.onSavedCollections.emit();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"editedItem\"));\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected loadCipherCollections() {\n    return this.cipherDomain.collectionIds;\n  }\n\n  protected async loadCollections() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    return allCollections.filter(\n      (c) => !c.readOnly && c.organizationId === this.cipher.organizationId\n    );\n  }\n\n  protected saveCollections() {\n    return this.cipherService.saveCollectionsWithServer(this.cipherDomain);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"back()\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"collections\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n        <div class=\"box-content-row padded no-hover\">\n          {{ \"noCollectionsInList\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n        <div\n          class=\"box-content-row box-content-row-checkbox\"\n          *ngFor=\"let c of collections; let i = index\"\n          appBoxRow\n        >\n          <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n          <input\n            id=\"collection_{{ i }}\"\n            type=\"checkbox\"\n            [(ngModel)]=\"$any(c).checked\"\n            name=\"Collection[{{ i }}].Checked\"\n          />\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { CollectionsComponent as BaseCollectionsComponent } from \"@bitwarden/angular/admin-console/components/collections.component\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\n\n@Component({\n  selector: \"app-vault-collections\",\n  templateUrl: \"collections.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class CollectionsComponent extends BaseCollectionsComponent {\n  constructor(\n    collectionService: CollectionService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    cipherService: CipherService,\n    private route: ActivatedRoute,\n    private location: Location,\n    logService: LogService\n  ) {\n    super(collectionService, platformUtilsService, i18nService, cipherService, logService);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.onSavedCollections.subscribe(() => {\n      this.back();\n    });\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.load();\n    });\n  }\n\n  back() {\n    this.location.back();\n  }\n}\n","import { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { CipherStatus } from \"./cipher-status.model\";\n\nexport type VaultFilterFunction = (cipher: CipherView) => boolean;\n\nexport class VaultFilter {\n  cipherType?: CipherType;\n  selectedCollection = false; // This is needed because of how the \"Unassigned\" collection works. It has a null id.\n  selectedCollectionId?: string;\n  status?: CipherStatus;\n  selectedFolder = false; // This is needed because of how the \"No Folder\" folder works. It has a null id.\n  selectedFolderId?: string;\n  selectedOrganizationId?: string;\n  myVaultOnly = false;\n  refreshCollectionsAndFolders = false;\n\n  constructor(init?: Partial<VaultFilter>) {\n    Object.assign(this, init);\n  }\n\n  resetFilter() {\n    this.cipherType = null;\n    this.status = null;\n    this.selectedCollection = false;\n    this.selectedCollectionId = null;\n    this.selectedFolder = false;\n    this.selectedFolderId = null;\n  }\n\n  resetOrganization() {\n    this.myVaultOnly = false;\n    this.selectedOrganizationId = null;\n    this.resetFilter();\n  }\n\n  buildFilter(): VaultFilterFunction {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.status === \"favorites\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.favorite;\n      }\n      if (this.status === \"trash\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.cipherType != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.cipherType;\n      }\n      if (this.selectedFolder && this.selectedFolderId == null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.selectedFolder && this.selectedFolderId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.selectedFolderId;\n      }\n      if (this.selectedCollection && this.selectedCollectionId == null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.organizationId != null &&\n          (cipher.collectionIds == null || cipher.collectionIds.length === 0);\n      }\n      if (this.selectedCollection && this.selectedCollectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.includes(this.selectedCollectionId);\n      }\n      if (this.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.selectedOrganizationId;\n      }\n      if (this.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n}\n","export class TreeNode<T extends ITreeNodeObject> {\n  node: T;\n  parent: TreeNode<T>;\n  children: TreeNode<T>[] = [];\n\n  constructor(node: T, parent: TreeNode<T>, name?: string, id?: string) {\n    this.parent = parent;\n    this.node = node;\n    if (name) {\n      this.node.name = name;\n    }\n    if (id) {\n      this.node.id = id;\n    }\n  }\n}\n\nexport interface ITreeNodeObject {\n  id: string;\n  name: string;\n}\n","import { ITreeNodeObject, TreeNode } from \"../models/domain/tree-node\";\n\nexport class ServiceUtils {\n  /**\n   * Recursively adds a node to nodeTree\n   * @param {TreeNode<ITreeNodeObject>[]} nodeTree - An array of TreeNodes that the node will be added to\n   * @param {number} partIndex - Index of the `parts` array that is being processed\n   * @param {string[]} parts - Array of strings that represent the path to the `obj` node\n   * @param {ITreeNodeObject} obj - The node to be added to the tree\n   * @param {ITreeNodeObject} parent - The parent node of the `obj` node\n   * @param {string} delimiter - The delimiter used to split the path string, will be used to combine the path for missing nodes\n   */\n  static nestedTraverse(\n    nodeTree: TreeNode<ITreeNodeObject>[],\n    partIndex: number,\n    parts: string[],\n    obj: ITreeNodeObject,\n    parent: TreeNode<ITreeNodeObject> | undefined,\n    delimiter: string\n  ) {\n    if (parts.length <= partIndex) {\n      return;\n    }\n\n    const end: boolean = partIndex === parts.length - 1;\n    const partName: string = parts[partIndex];\n\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.name !== partName) {\n        continue;\n      }\n      if (end && nodeTree[i].node.id !== obj.id) {\n        // Another node exists with the same name as the node being added\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // Move down the tree to the next level\n      ServiceUtils.nestedTraverse(\n        nodeTree[i].children,\n        partIndex + 1,\n        parts,\n        obj,\n        nodeTree[i],\n        delimiter\n      );\n      return;\n    }\n\n    // If there's no node here with the same name...\n    if (nodeTree.filter((n) => n.node.name === partName).length === 0) {\n      // And we're at the end of the path given, add the node\n      if (end) {\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // And we're not at the end of the path, combine the current name with the next name\n      // 1, *1.2, 1.2.1 becomes\n      // 1, *1.2/1.2.1\n      const newPartName = partName + delimiter + parts[partIndex + 1];\n      ServiceUtils.nestedTraverse(\n        nodeTree,\n        0,\n        [newPartName, ...parts.slice(partIndex + 2)],\n        obj,\n        parent,\n        delimiter\n      );\n    }\n  }\n\n  /**\n   * Searches a tree for a node with a matching `id`\n   * @param {TreeNode<T>} nodeTree - A single TreeNode branch that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<T>} The node with a matching `id`\n   */\n  static getTreeNodeObject<T extends ITreeNodeObject>(\n    nodeTree: TreeNode<T>,\n    id: string\n  ): TreeNode<T> {\n    if (nodeTree.node.id === id) {\n      return nodeTree;\n    }\n    for (let i = 0; i < nodeTree.children.length; i++) {\n      if (nodeTree.children[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObject(nodeTree.children[i], id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Searches an array of tree nodes for a node with a matching `id`\n   * @param {TreeNode<T>} nodeTree - An array of TreeNode branches that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<T>} The node with a matching `id`\n   */\n  static getTreeNodeObjectFromList<T extends ITreeNodeObject>(\n    nodeTree: TreeNode<T>[],\n    id: string\n  ): TreeNode<T> {\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.id === id) {\n        return nodeTree[i];\n      } else if (nodeTree[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObjectFromList(nodeTree[i].children, id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n}\n","import { ITreeNodeObject, TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\n\nexport class DynamicTreeNode<T extends ITreeNodeObject> {\n  fullList: T[];\n  nestedList: TreeNode<T>[];\n\n  hasId(id: string): boolean {\n    return this.fullList != null && this.fullList.filter((i: T) => i.id === id).length > 0;\n  }\n\n  constructor(init?: Partial<DynamicTreeNode<T>>) {\n    Object.assign(this, init);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { firstValueFrom, from, mergeMap, Observable } from \"rxjs\";\n\nimport {\n  isMember,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { ServiceUtils } from \"@bitwarden/common/misc/serviceUtils\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { DeprecatedVaultFilterService as DeprecatedVaultFilterServiceAbstraction } from \"../../abstractions/deprecated-vault-filter.service\";\nimport { DynamicTreeNode } from \"../models/dynamic-tree-node.model\";\n\nconst NestingDelimiter = \"/\";\n\n@Injectable()\nexport class VaultFilterService implements DeprecatedVaultFilterServiceAbstraction {\n  constructor(\n    protected stateService: StateService,\n    protected organizationService: OrganizationService,\n    protected folderService: FolderService,\n    protected cipherService: CipherService,\n    protected collectionService: CollectionService,\n    protected policyService: PolicyService\n  ) {}\n\n  async storeCollapsedFilterNodes(collapsedFilterNodes: Set<string>): Promise<void> {\n    await this.stateService.setCollapsedGroupings(Array.from(collapsedFilterNodes));\n  }\n\n  async buildCollapsedFilterNodes(): Promise<Set<string>> {\n    return new Set(await this.stateService.getCollapsedGroupings());\n  }\n\n  async buildOrganizations(): Promise<Organization[]> {\n    let organizations = await this.organizationService.getAll();\n    if (organizations != null) {\n      organizations = organizations.filter(isMember).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return organizations;\n  }\n\n  buildNestedFolders(organizationId?: string): Observable<DynamicTreeNode<FolderView>> {\n    const transformation = async (storedFolders: FolderView[]) => {\n      let folders: FolderView[];\n\n      // If no org or \"My Vault\" is selected, show all folders\n      if (organizationId == null || organizationId == \"MyVault\") {\n        folders = storedFolders;\n      } else {\n        // Otherwise, show only folders that have ciphers from the selected org and the \"no folder\" folder\n        const ciphers = await this.cipherService.getAllDecrypted();\n        const orgCiphers = ciphers.filter((c) => c.organizationId == organizationId);\n        folders = storedFolders.filter(\n          (f) => orgCiphers.some((oc) => oc.folderId == f.id) || f.id == null\n        );\n      }\n\n      const nestedFolders = await this.getAllFoldersNested(folders);\n      return new DynamicTreeNode<FolderView>({\n        fullList: folders,\n        nestedList: nestedFolders,\n      });\n    };\n\n    return this.folderService.folderViews$.pipe(\n      mergeMap((folders) => from(transformation(folders)))\n    );\n  }\n\n  async buildCollections(organizationId?: string): Promise<DynamicTreeNode<CollectionView>> {\n    const storedCollections = await this.collectionService.getAllDecrypted();\n    let collections: CollectionView[];\n    if (organizationId != null) {\n      collections = storedCollections.filter((c) => c.organizationId === organizationId);\n    } else {\n      collections = storedCollections;\n    }\n    const nestedCollections = await this.collectionService.getAllNested(collections);\n    return new DynamicTreeNode<CollectionView>({\n      fullList: collections,\n      nestedList: nestedCollections,\n    });\n  }\n\n  async checkForSingleOrganizationPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.SingleOrg)\n    );\n  }\n\n  async checkForPersonalOwnershipPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n\n  protected async getAllFoldersNested(folders: FolderView[]): Promise<TreeNode<FolderView>[]> {\n    const nodes: TreeNode<FolderView>[] = [];\n    folders.forEach((f) => {\n      const folderCopy = new FolderView();\n      folderCopy.id = f.id;\n      folderCopy.revisionDate = f.revisionDate;\n      const parts = f.name != null ? f.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, folderCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  async getFolderNested(id: string): Promise<TreeNode<FolderView>> {\n    const folders = await this.getAllFoldersNested(\n      await firstValueFrom(this.folderService.folderViews$)\n    );\n    return ServiceUtils.getTreeNodeObjectFromList(folders, id) as TreeNode<FolderView>;\n  }\n}\n","import { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { VaultFilterService as BaseVaultFilterService } from \"@bitwarden/angular/vault/vault-filter/services/vault-filter.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nexport class VaultFilterService extends BaseVaultFilterService {\n  vaultFilter: VaultFilter = new VaultFilter();\n\n  allVaults = \"allVaults\";\n  myVault = \"myVault\";\n\n  constructor(\n    stateService: StateService,\n    organizationService: OrganizationService,\n    folderService: FolderService,\n    cipherService: CipherService,\n    collectionService: CollectionService,\n    policyService: PolicyService\n  ) {\n    super(\n      stateService,\n      organizationService,\n      folderService,\n      cipherService,\n      collectionService,\n      policyService\n    );\n    this.vaultFilter.myVaultOnly = false;\n    this.vaultFilter.selectedOrganizationId = null;\n  }\n\n  getVaultFilter() {\n    return this.vaultFilter;\n  }\n\n  setVaultFilter(filter: string) {\n    if (filter === this.allVaults) {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else if (filter === this.myVault) {\n      this.vaultFilter.myVaultOnly = true;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = filter;\n    }\n  }\n\n  clear() {\n    this.setVaultFilter(this.allVaults);\n  }\n\n  filterCipherForSelectedVault(cipher: CipherView) {\n    if (!this.vaultFilter.selectedOrganizationId && !this.vaultFilter.myVaultOnly) {\n      return false;\n    }\n    if (this.vaultFilter.selectedOrganizationId) {\n      if (cipher.organizationId === this.vaultFilter.selectedOrganizationId) {\n        return false;\n      }\n    } else if (this.vaultFilter.myVaultOnly) {\n      if (!cipher.organizationId) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import { UriMatchType } from \"@bitwarden/common/enums\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillField from \"../../models/autofill-field\";\nimport AutofillForm from \"../../models/autofill-form\";\nimport AutofillPageDetails from \"../../models/autofill-page-details\";\n\nexport interface PageDetail {\n  frameId: number;\n  tab: chrome.tabs.Tab;\n  details: AutofillPageDetails;\n}\n\nexport interface AutoFillOptions {\n  cipher: CipherView;\n  pageDetails: PageDetail[];\n  doc?: typeof window.document;\n  tab: chrome.tabs.Tab;\n  skipUsernameOnlyFill?: boolean;\n  onlyEmptyFields?: boolean;\n  onlyVisibleFields?: boolean;\n  fillNewPassword?: boolean;\n  skipLastUsed?: boolean;\n  allowUntrustedIframe?: boolean;\n  allowTotpAutofill?: boolean;\n}\n\nexport interface FormData {\n  form: AutofillForm;\n  password: AutofillField;\n  username: AutofillField;\n  passwords: AutofillField[];\n}\n\nexport interface GenerateFillScriptOptions {\n  skipUsernameOnlyFill: boolean;\n  onlyEmptyFields: boolean;\n  onlyVisibleFields: boolean;\n  fillNewPassword: boolean;\n  allowTotpAutofill: boolean;\n  cipher: CipherView;\n  tabUrl: string;\n  defaultUriMatch: UriMatchType;\n}\n\nexport abstract class AutofillService {\n  injectAutofillScripts: (\n    sender: chrome.runtime.MessageSender,\n    autofillV2?: boolean\n  ) => Promise<void>;\n  getFormsWithPasswordFields: (pageDetails: AutofillPageDetails) => FormData[];\n  doAutoFill: (options: AutoFillOptions) => Promise<string | null>;\n  doAutoFillOnTab: (\n    pageDetails: PageDetail[],\n    tab: chrome.tabs.Tab,\n    fromCommand: boolean\n  ) => Promise<string | null>;\n  doAutoFillActiveTab: (pageDetails: PageDetail[], fromCommand: boolean) => Promise<string | null>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"../platform/models/domain/account\";\n\nexport abstract class SettingsService {\n  settings$: Observable<AccountSettingsSettings>;\n  disableFavicon$: Observable<boolean>;\n\n  setEquivalentDomains: (equivalentDomains: string[][]) => Promise<any>;\n  getEquivalentDomains: (url: string) => Set<string>;\n  setDisableFavicon: (value: boolean) => Promise<any>;\n  getDisableFavicon: () => boolean;\n  clear: (userId?: string) => Promise<void>;\n}\n","import { Directive, ElementRef, HostListener, Input } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appFallbackSrc]\",\n})\nexport class FallbackSrcDirective {\n  @Input(\"appFallbackSrc\") appFallbackSrc: string;\n\n  constructor(private el: ElementRef) {}\n\n  @HostListener(\"error\") onError() {\n    this.el.nativeElement.src = this.appFallbackSrc;\n  }\n}\n","<div class=\"icon\" aria-hidden=\"true\">\n  <ng-container *ngIf=\"data$ | async as data\">\n    <img\n      [src]=\"data.image\"\n      [appFallbackSrc]=\"data.fallbackImage\"\n      *ngIf=\"data.imageEnabled && data.image\"\n      alt=\"\"\n      decoding=\"async\"\n      loading=\"lazy\"\n    />\n    <i\n      class=\"tw-text-muted bwi bwi-lg {{ data.icon }}\"\n      *ngIf=\"!data.imageEnabled || !data.image\"\n    ></i>\n  </ng-container>\n</div>\n","import { ChangeDetectionStrategy, Component, Input, OnInit } from \"@angular/core\";\nimport {\n  BehaviorSubject,\n  combineLatest,\n  distinctUntilChanged,\n  filter,\n  map,\n  Observable,\n} from \"rxjs\";\n\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n/**\n * Provides a mapping from supported card brands to\n * the filenames of icon that should be present in images/cards folder of clients.\n */\nconst cardIcons: Record<string, string> = {\n  Visa: \"card-visa\",\n  Mastercard: \"card-mastercard\",\n  Amex: \"card-amex\",\n  Discover: \"card-discover\",\n  \"Diners Club\": \"card-diners-club\",\n  JCB: \"card-jcb\",\n  Maestro: \"card-maestro\",\n  UnionPay: \"card-union-pay\",\n  RuPay: \"card-ru-pay\",\n};\n\n@Component({\n  selector: \"app-vault-icon\",\n  templateUrl: \"icon.component.html\",\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IconComponent implements OnInit {\n  @Input()\n  set cipher(value: CipherView) {\n    this.cipher$.next(value);\n  }\n\n  protected data$: Observable<{\n    imageEnabled: boolean;\n    image?: string;\n    fallbackImage: string;\n    icon?: string;\n  }>;\n\n  private cipher$ = new BehaviorSubject<CipherView>(undefined);\n\n  constructor(\n    private environmentService: EnvironmentService,\n    private settingsService: SettingsService\n  ) {}\n\n  async ngOnInit() {\n    const iconsUrl = this.environmentService.getIconsUrl();\n\n    this.data$ = combineLatest([\n      this.settingsService.disableFavicon$.pipe(distinctUntilChanged()),\n      this.cipher$.pipe(filter((c) => c !== undefined)),\n    ]).pipe(\n      map(([disableFavicon, cipher]) => {\n        const imageEnabled = !disableFavicon;\n        let image = undefined;\n        let fallbackImage = \"\";\n        let icon = undefined;\n\n        switch (cipher.type) {\n          case CipherType.Login:\n            icon = \"bwi-globe\";\n\n            if (cipher.login.uri) {\n              let hostnameUri = cipher.login.uri;\n              let isWebsite = false;\n\n              if (hostnameUri.indexOf(\"androidapp://\") === 0) {\n                icon = \"bwi-android\";\n                image = null;\n              } else if (hostnameUri.indexOf(\"iosapp://\") === 0) {\n                icon = \"bwi-apple\";\n                image = null;\n              } else if (\n                imageEnabled &&\n                hostnameUri.indexOf(\"://\") === -1 &&\n                hostnameUri.indexOf(\".\") > -1\n              ) {\n                hostnameUri = \"http://\" + hostnameUri;\n                isWebsite = true;\n              } else if (imageEnabled) {\n                isWebsite = hostnameUri.indexOf(\"http\") === 0 && hostnameUri.indexOf(\".\") > -1;\n              }\n\n              if (imageEnabled && isWebsite) {\n                try {\n                  image = iconsUrl + \"/\" + Utils.getHostname(hostnameUri) + \"/icon.png\";\n                  fallbackImage = \"images/bwi-globe.png\";\n                } catch (e) {\n                  // Ignore error since the fallback icon will be shown if image is null.\n                }\n              }\n            } else {\n              image = null;\n            }\n            break;\n          case CipherType.SecureNote:\n            icon = \"bwi-sticky-note\";\n            break;\n          case CipherType.Card:\n            icon = \"bwi-credit-card\";\n            if (imageEnabled && cipher.card.brand in cardIcons) {\n              icon = \"credit-card-icon \" + cardIcons[cipher.card.brand];\n            }\n            break;\n          case CipherType.Identity:\n            icon = \"bwi-id-card\";\n            break;\n          default:\n            break;\n        }\n\n        return {\n          imageEnabled,\n          image,\n          fallbackImage,\n          icon,\n        };\n      })\n    );\n  }\n}\n","export abstract class TotpService {\n  getCode: (key: string) => Promise<string>;\n  getTimeInterval: (key: string) => number;\n}\n","<button\n  type=\"button\"\n  class=\"row-btn\"\n  (click)=\"view()\"\n  appStopClick\n  appStopProp\n  appA11yTitle=\"{{ 'view' | i18n }}\"\n  *ngIf=\"showView\"\n>\n  <i class=\"bwi bwi-lg bwi-list-alt\" aria-hidden=\"true\"></i>\n</button>\n<ng-container *ngIf=\"cipher.type === cipherType.Login\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'launch' | i18n }}\"\n    (click)=\"launchCipher()\"\n    *ngIf=\"!showView\"\n    [ngClass]=\"{ disabled: !cipher.login.canLaunch }\"\n    [attr.disabled]=\"!cipher.login.canLaunch ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-share-square\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.username, 'username', 'Username')\"\n    [ngClass]=\"{ disabled: !cipher.login.username }\"\n    [attr.disabled]=\"!cipher.login.username ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-user\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.password, 'password', 'Password')\"\n    [ngClass]=\"{ disabled: !cipher.login.password || !cipher.viewPassword }\"\n    [attr.disabled]=\"!cipher.login.password ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-key\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyVerificationCode' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.totp, 'verificationCodeTotp', 'TOTP')\"\n    [ngClass]=\"{ disabled: !displayTotpCopyButton(cipher) }\"\n    [attr.disabled]=\"!displayTotpCopyButton(cipher) ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-clock\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n<ng-container *ngIf=\"cipher.type === cipherType.Card\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyNumber' | i18n }}\"\n    (click)=\"copy(cipher, cipher.card.number, 'number', 'Card Number')\"\n    [ngClass]=\"{ disabled: !cipher.card.number }\"\n    [attr.disabled]=\"!cipher.card.number ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-hashtag\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copySecurityCode' | i18n }}\"\n    (click)=\"copy(cipher, cipher.card.code, 'securityCode', 'Security Code')\"\n    [ngClass]=\"{ disabled: !cipher.card.code }\"\n    [attr.disabled]=\"!cipher.card.code ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-key\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n<ng-container *ngIf=\"cipher.type === cipherType.SecureNote\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyNote' | i18n }}\"\n    (click)=\"copy(cipher, cipher.notes, 'note', 'Note')\"\n    [ngClass]=\"{ disabled: !cipher.notes }\"\n    [attr.disabled]=\"!cipher.notes ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { EventType } from \"@bitwarden/common/enums\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-action-buttons\",\n  templateUrl: \"action-buttons.component.html\",\n})\nexport class ActionButtonsComponent {\n  @Output() onView = new EventEmitter<CipherView>();\n  @Output() launchEvent = new EventEmitter<CipherView>();\n  @Input() cipher: CipherView;\n  @Input() showView = false;\n\n  cipherType = CipherType;\n  userHasPremiumAccess = false;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private eventCollectionService: EventCollectionService,\n    private totpService: TotpService,\n    private stateService: StateService,\n    private passwordRepromptService: PasswordRepromptService\n  ) {}\n\n  async ngOnInit() {\n    this.userHasPremiumAccess = await this.stateService.getCanAccessPremium();\n  }\n\n  launchCipher() {\n    this.launchEvent.emit(this.cipher);\n  }\n\n  async copy(cipher: CipherView, value: string, typeI18nKey: string, aType: string) {\n    if (\n      this.cipher.reprompt !== CipherRepromptType.None &&\n      this.passwordRepromptService.protectedFields().includes(aType) &&\n      !(await this.passwordRepromptService.showPasswordPrompt())\n    ) {\n      return;\n    }\n\n    if (value == null || (aType === \"TOTP\" && !this.displayTotpCopyButton(cipher))) {\n      return;\n    } else if (aType === \"TOTP\") {\n      value = await this.totpService.getCode(value);\n    }\n\n    if (!cipher.viewPassword) {\n      return;\n    }\n\n    this.platformUtilsService.copyToClipboard(value, { window: window });\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(typeI18nKey))\n    );\n\n    if (typeI18nKey === \"password\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedPassword, cipher.id);\n    } else if (typeI18nKey === \"verificationCodeTotp\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedHiddenField, cipher.id);\n    } else if (typeI18nKey === \"securityCode\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedCardCode, cipher.id);\n    }\n  }\n\n  displayTotpCopyButton(cipher: CipherView) {\n    return (\n      (cipher?.login?.hasTotp ?? false) && (cipher.organizationUseTotp || this.userHasPremiumAccess)\n    );\n  }\n\n  view() {\n    this.onView.emit(this.cipher);\n  }\n}\n","<div\n  role=\"group\"\n  appA11yTitle=\"{{ cipher.name }}\"\n  class=\"virtual-scroll-item\"\n  [ngClass]=\"{ 'override-last': !last }\"\n>\n  <div class=\"box-content-row box-content-row-flex\">\n    <button\n      type=\"button\"\n      (click)=\"selectCipher(cipher)\"\n      (dblclick)=\"launchCipher(cipher)\"\n      appStopClick\n      title=\"{{ title }} - {{ cipher.name }}\"\n      class=\"row-main\"\n    >\n      <app-vault-icon [cipher]=\"cipher\"></app-vault-icon>\n      <div class=\"row-main-content\">\n        <span class=\"text\">\n          <span class=\"truncate-box\">\n            <span class=\"truncate\">{{ cipher.name }}</span>\n            <ng-container *ngIf=\"cipher.organizationId\">\n              <i\n                class=\"bwi bwi-collection text-muted\"\n                title=\"{{ 'shared' | i18n }}\"\n                aria-hidden=\"true\"\n              ></i>\n              <span class=\"sr-only\">{{ \"shared\" | i18n }}</span>\n            </ng-container>\n            <ng-container *ngIf=\"cipher.hasAttachments\">\n              <i\n                class=\"bwi bwi-paperclip text-muted\"\n                title=\"{{ 'attachments' | i18n }}\"\n                aria-hidden=\"true\"\n              ></i>\n              <span class=\"sr-only\">{{ \"attachments\" | i18n }}</span>\n            </ng-container>\n          </span>\n        </span>\n        <span class=\"detail\">{{ cipher.subTitle }}</span>\n      </div>\n    </button>\n    <app-action-buttons\n      [cipher]=\"cipher\"\n      [showView]=\"showView\"\n      (onView)=\"viewCipher(cipher)\"\n      (launchEvent)=\"launchCipher(cipher)\"\n      class=\"action-buttons\"\n    >\n    </app-action-buttons>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-cipher-row\",\n  templateUrl: \"cipher-row.component.html\",\n})\nexport class CipherRowComponent {\n  @Output() onSelected = new EventEmitter<CipherView>();\n  @Output() launchEvent = new EventEmitter<CipherView>();\n  @Output() onView = new EventEmitter<CipherView>();\n  @Input() cipher: CipherView;\n  @Input() last: boolean;\n  @Input() showView = false;\n  @Input() title: string;\n\n  selectCipher(c: CipherView) {\n    this.onSelected.emit(c);\n  }\n\n  launchCipher(c: CipherView) {\n    this.launchEvent.emit(c);\n  }\n\n  viewCipher(c: CipherView) {\n    this.onView.emit(c);\n  }\n}\n","<ng-container *ngIf=\"loaded && organizations$ | async as organizations\">\n  <div class=\"content org-filter-content\" *ngIf=\"loaded && shouldShow(organizations)\">\n    <ng-container *ngIf=\"selectedVault$ | async as vaultFilterDisplay\">\n      <button\n        type=\"button\"\n        #toggleVaults\n        class=\"org-filter\"\n        (click)=\"openOverlay()\"\n        aria-haspopup=\"menu\"\n        aria-controls=\"cdk-overlay-container\"\n        [attr.aria-expanded]=\"isOpen\"\n        [attr.aria-label]=\"vaultFilterDisplay\"\n      >\n        <span class=\"org-filter-text-container\">\n          <span class=\"org-filter-text-name\">{{ vaultFilterDisplay }}</span\n          >&nbsp;\n          <span\n            ><i\n              class=\"bwi bwi-sm\"\n              aria-hidden=\"true\"\n              [ngClass]=\"{ 'bwi-angle-down': !isOpen, 'bwi-angle-up': isOpen }\"\n            ></i></span\n        ></span>\n      </button>\n    </ng-container>\n    <ng-template class=\"vault-select-container\" #vaultSelectorTemplate>\n      <div\n        class=\"vault-select\"\n        [@transformPanel]=\"'open'\"\n        cdkTrapFocus\n        cdkTrapFocusAutoCapture\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        <button type=\"button\" appStopClick (click)=\"selectAllVaults()\">\n          <div class=\"vault-select-org-text-container\">\n            <i class=\"bwi bwi-fw bwi-filter vault-select-prefix-icon\" aria-hidden=\"true\"></i>\n            <span class=\"vault-select-org-name\">{{ \"allVaults\" | i18n }}</span>\n          </div>\n        </button>\n        <button\n          type=\"button\"\n          *ngIf=\"!enforcePersonalOwnership\"\n          appStopClick\n          (click)=\"selectMyVault()\"\n        >\n          <div class=\"vault-select-org-text-container\">\n            <i class=\"bwi bwi-fw bwi-user vault-select-prefix-icon\" aria-hidden=\"true\"></i>\n            <span class=\"vault-select-org-name\">{{ \"myVault\" | i18n }}</span>\n          </div>\n        </button>\n        <button\n          type=\"button\"\n          *ngFor=\"let organization of organizations\"\n          appStopClick\n          (click)=\"selectOrganization(organization)\"\n        >\n          <div class=\"vault-select-org-text-container\">\n            <i\n              *ngIf=\"organization.planProductType !== 1\"\n              class=\"bwi bwi-fw bwi-business vault-select-prefix-icon\"\n              aria-hidden=\"true\"\n            ></i>\n            <i\n              *ngIf=\"organization.planProductType === 1\"\n              class=\"bwi bwi-fw bwi-family vault-select-prefix-icon\"\n              aria-hidden=\"true\"\n            ></i>\n\n            <span class=\"vault-select-org-name\">{{ organization.name }}</span\n            ><i\n              *ngIf=\"!organization.enabled\"\n              class=\"bwi bwi-fw bwi-exclamation-triangle text-danger vault-select-suffix-icon\"\n              attr.aria-label=\"{{ 'organizationIsDisabled' | i18n }}\"\n              appA11yTitle=\"{{ 'organizationIsDisabled' | i18n }}\"\n            ></i>\n          </div>\n        </button>\n      </div>\n    </ng-template>\n  </div>\n</ng-container>\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { ConnectedPosition, Overlay, OverlayRef } from \"@angular/cdk/overlay\";\nimport { TemplatePortal } from \"@angular/cdk/portal\";\nimport {\n  Component,\n  ElementRef,\n  EventEmitter,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  HostListener,\n  OnDestroy,\n} from \"@angular/core\";\nimport { BehaviorSubject, concatMap, map, merge, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\n@Component({\n  selector: \"app-vault-select\",\n  templateUrl: \"vault-select.component.html\",\n  animations: [\n    trigger(\"transformPanel\", [\n      state(\n        \"void\",\n        style({\n          opacity: 0,\n        })\n      ),\n      transition(\n        \"void => open\",\n        animate(\n          \"100ms linear\",\n          style({\n            opacity: 1,\n          })\n        )\n      ),\n      transition(\"* => void\", animate(\"100ms linear\", style({ opacity: 0 }))),\n    ]),\n  ],\n})\nexport class VaultSelectComponent implements OnInit, OnDestroy {\n  @Output() onVaultSelectionChanged = new EventEmitter();\n\n  @ViewChild(\"toggleVaults\", { read: ElementRef })\n  buttonRef: ElementRef<HTMLButtonElement>;\n  @ViewChild(\"vaultSelectorTemplate\", { read: TemplateRef }) templateRef: TemplateRef<HTMLElement>;\n\n  private _selectedVault = new BehaviorSubject<string | null>(null);\n\n  isOpen = false;\n  loaded = false;\n  organizations$: Observable<Organization[]>;\n  selectedVault$: Observable<string | null> = this._selectedVault.asObservable();\n\n  enforcePersonalOwnership = false;\n  overlayPosition: ConnectedPosition[] = [\n    {\n      originX: \"start\",\n      originY: \"bottom\",\n      overlayX: \"start\",\n      overlayY: \"top\",\n    },\n  ];\n\n  private overlayRef: OverlayRef;\n  private _destroy = new Subject<void>();\n\n  shouldShow(organizations: Organization[]): boolean {\n    return (\n      (organizations.length > 0 && !this.enforcePersonalOwnership) ||\n      (organizations.length > 1 && this.enforcePersonalOwnership)\n    );\n  }\n\n  constructor(\n    private vaultFilterService: VaultFilterService,\n    private i18nService: I18nService,\n    private overlay: Overlay,\n    private viewContainerRef: ViewContainerRef,\n    private platformUtilsService: PlatformUtilsService,\n    private organizationService: OrganizationService\n  ) {}\n\n  @HostListener(\"document:keydown.escape\", [\"$event\"])\n  handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.isOpen) {\n      event.preventDefault();\n      this.close();\n    }\n  }\n\n  async ngOnInit() {\n    this.organizations$ = this.organizationService.memberOrganizations$\n      .pipe(takeUntil(this._destroy))\n      .pipe(map((orgs) => orgs.sort(Utils.getSortFunction(this.i18nService, \"name\"))));\n\n    this.organizations$\n      .pipe(\n        concatMap(async (organizations) => {\n          this.enforcePersonalOwnership =\n            await this.vaultFilterService.checkForPersonalOwnershipPolicy();\n\n          if (this.shouldShow(organizations)) {\n            if (this.enforcePersonalOwnership && !this.vaultFilterService.vaultFilter.myVaultOnly) {\n              const firstOrganization = organizations[0];\n              this._selectedVault.next(firstOrganization.name);\n              this.vaultFilterService.setVaultFilter(firstOrganization.id);\n            } else if (this.vaultFilterService.vaultFilter.myVaultOnly) {\n              this._selectedVault.next(this.i18nService.t(this.vaultFilterService.myVault));\n            } else if (this.vaultFilterService.vaultFilter.selectedOrganizationId != null) {\n              const selectedOrganization = organizations.find(\n                (o) => o.id === this.vaultFilterService.vaultFilter.selectedOrganizationId\n              );\n              this._selectedVault.next(selectedOrganization.name);\n            } else {\n              this._selectedVault.next(this.i18nService.t(this.vaultFilterService.allVaults));\n            }\n          }\n        })\n      )\n      .pipe(takeUntil(this._destroy))\n      .subscribe();\n\n    this.loaded = true;\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n    this._selectedVault.complete();\n  }\n\n  openOverlay() {\n    const viewPortHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    const positionStrategyBuilder = this.overlay.position();\n\n    const positionStrategy = positionStrategyBuilder\n      .flexibleConnectedTo(this.buttonRef.nativeElement)\n      .withFlexibleDimensions(true)\n      .withPush(true)\n      .withViewportMargin(10)\n      .withGrowAfterOpen(true)\n      .withPositions(this.overlayPosition);\n\n    this.overlayRef = this.overlay.create({\n      hasBackdrop: true,\n      positionStrategy,\n      maxHeight: viewPortHeight - 160,\n      backdropClass: \"cdk-overlay-transparent-backdrop\",\n      scrollStrategy: this.overlay.scrollStrategies.close(),\n    });\n\n    const templatePortal = new TemplatePortal(this.templateRef, this.viewContainerRef);\n    this.overlayRef.attach(templatePortal);\n    this.isOpen = true;\n\n    // Handle closing\n    merge(\n      this.overlayRef.outsidePointerEvents(),\n      this.overlayRef.backdropClick(),\n      this.overlayRef.detachments()\n      // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    ).subscribe(() => {\n      this.close();\n    });\n  }\n\n  close() {\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n      this.overlayRef = undefined;\n    }\n    this.isOpen = false;\n  }\n\n  selectOrganization(organization: Organization) {\n    if (!organization.enabled) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"disabledOrganizationFilterError\")\n      );\n    } else {\n      this._selectedVault.next(organization.name);\n      this.vaultFilterService.setVaultFilter(organization.id);\n      this.onVaultSelectionChanged.emit();\n      this.close();\n    }\n  }\n  selectAllVaults() {\n    this._selectedVault.next(this.i18nService.t(this.vaultFilterService.allVaults));\n    this.vaultFilterService.setVaultFilter(this.vaultFilterService.allVaults);\n    this.onVaultSelectionChanged.emit();\n    this.close();\n  }\n  selectMyVault() {\n    this._selectedVault.next(this.i18nService.t(this.vaultFilterService.myVault));\n    this.vaultFilterService.setVaultFilter(this.vaultFilterService.myVault);\n    this.onVaultSelectionChanged.emit();\n    this.close();\n  }\n}\n","<header>\n  <h1 class=\"sr-only\">{{ \"currentTab\" | i18n }}</h1>\n  <div class=\"left\">\n    <app-pop-out *ngIf=\"!inSidebar\"></app-pop-out>\n    <button\n      type=\"button\"\n      (click)=\"refresh()\"\n      appA11yTitle=\"{{ 'refresh' | i18n }}\"\n      *ngIf=\"inSidebar\"\n    >\n      <i class=\"bwi bwi-refresh-tab bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ 'searchVault' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search$.next()\"\n      autocomplete=\"off\"\n      (keydown)=\"closeOnEsc($event)\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\" aria-hidden=\"true\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"no-items\" *ngIf=\"!loaded\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n  </div>\n  <ng-container *ngIf=\"loaded\">\n    <app-vault-select (onVaultSelectionChanged)=\"load()\"></app-vault-select>\n    <app-callout *ngIf=\"showHowToAutofill\" type=\"info\" title=\"{{ 'howToAutofill' | i18n }}\">\n      <p>{{ autofillCalloutText }}</p>\n      <button\n        type=\"button\"\n        class=\"btn primary callout-half\"\n        appStopClick\n        (click)=\"dismissCallout()\"\n      >\n        {{ \"gotIt\" | i18n }}\n      </button>\n      <button type=\"button\" class=\"btn callout-half\" appStopClick (click)=\"goToSettings()\">\n        {{ \"autofillSettings\" | i18n }}\n      </button>\n    </app-callout>\n    <div class=\"box list\" *ngIf=\"loginCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"typeLogins\" | i18n }}\n        <span class=\"flex-right\">{{ loginCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let loginCipher of loginCiphers\"\n          [cipher]=\"loginCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        >\n        </app-cipher-row>\n        <div class=\"box-content-row padded no-hover\" *ngIf=\"!loginCiphers.length\">\n          <p class=\"text-center\">{{ \"autoFillInfo\" | i18n }}</p>\n          <button type=\"button\" class=\"btn primary link block\" (click)=\"addCipher()\">\n            {{ \"addLogin\" | i18n }}\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"cardCiphers && cardCiphers.length\">\n      <h2 class=\"box-header\">\n        {{ \"cards\" | i18n }}\n        <span class=\"flex-right\">{{ cardCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let cardCipher of cardCiphers\"\n          [cipher]=\"cardCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        ></app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"identityCiphers && identityCiphers.length\">\n      <h2 class=\"box-header\">\n        {{ \"identities\" | i18n }}\n        <span class=\"flex-right\">{{ identityCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let identityCipher of identityCiphers\"\n          [cipher]=\"identityCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        ></app-cipher-row>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, takeUntil } from \"rxjs/operators\";\n\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { AutofillService } from \"../../../../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../../../../platform/browser/browser-api\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst BroadcasterSubscriptionId = \"CurrentTabComponent\";\n\n@Component({\n  selector: \"app-current-tab\",\n  templateUrl: \"current-tab.component.html\",\n})\nexport class CurrentTabComponent implements OnInit, OnDestroy {\n  pageDetails: any[] = [];\n  tab: chrome.tabs.Tab;\n  cardCiphers: CipherView[];\n  identityCiphers: CipherView[];\n  loginCiphers: CipherView[];\n  url: string;\n  hostname: string;\n  searchText: string;\n  inSidebar = false;\n  searchTypeSearch = false;\n  loaded = false;\n  isLoading = false;\n  showOrganizations = false;\n  showHowToAutofill = false;\n  autofillCalloutText: string;\n  protected search$ = new Subject<void>();\n  private destroy$ = new Subject<void>();\n\n  private totpCode: string;\n  private totpTimeout: number;\n  private loadedTimeout: number;\n  private searchTimeout: number;\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private popupUtilsService: PopupUtilsService,\n    private autofillService: AutofillService,\n    private i18nService: I18nService,\n    private router: Router,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private syncService: SyncService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private passwordRepromptService: PasswordRepromptService,\n    private organizationService: OrganizationService,\n    private vaultFilterService: VaultFilterService\n  ) {}\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.inSidebar = this.popupUtilsService.inSidebar(window);\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (this.isLoading) {\n              window.setTimeout(() => {\n                this.load();\n              }, 500);\n            }\n            break;\n          case \"collectPageDetailsResponse\":\n            if (message.sender === BroadcasterSubscriptionId) {\n              this.pageDetails.push({\n                frameId: message.webExtSender.frameId,\n                tab: message.tab,\n                details: message.details,\n              });\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n\n    if (!this.syncService.syncInProgress) {\n      await this.load();\n      await this.setCallout();\n    } else {\n      this.loadedTimeout = window.setTimeout(async () => {\n        if (!this.isLoading) {\n          await this.load();\n          await this.setCallout();\n        }\n      }, 5000);\n    }\n\n    this.search$\n      .pipe(debounceTime(500), takeUntil(this.destroy$))\n      .subscribe(() => this.searchVault());\n\n    // activate autofill on page load if policy is set\n    if (await this.stateService.getActivateAutoFillOnPageLoadFromPolicy()) {\n      await this.stateService.setEnableAutoFillOnPageLoad(true);\n      await this.stateService.setActivateAutoFillOnPageLoadFromPolicy(false);\n      this.platformUtilsService.showToast(\n        \"info\",\n        null,\n        this.i18nService.t(\"autofillPageLoadPolicyActivated\")\n      );\n    }\n  }\n\n  ngOnDestroy() {\n    window.clearTimeout(this.loadedTimeout);\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async refresh() {\n    await this.load();\n  }\n\n  addCipher() {\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: {\n        name: this.hostname,\n        uri: this.url,\n        selectedVault: this.vaultFilterService.getVaultFilter().selectedOrganizationId,\n      },\n    });\n  }\n\n  viewCipher(cipher: CipherView) {\n    this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n  }\n\n  async fillCipher(cipher: CipherView, closePopupDelay?: number) {\n    if (\n      cipher.reprompt !== CipherRepromptType.None &&\n      !(await this.passwordRepromptService.showPasswordPrompt())\n    ) {\n      return;\n    }\n\n    this.totpCode = null;\n    if (this.totpTimeout != null) {\n      window.clearTimeout(this.totpTimeout);\n    }\n\n    if (this.pageDetails == null || this.pageDetails.length === 0) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      return;\n    }\n\n    try {\n      this.totpCode = await this.autofillService.doAutoFill({\n        tab: this.tab,\n        cipher: cipher,\n        pageDetails: this.pageDetails,\n        doc: window.document,\n        fillNewPassword: true,\n        allowTotpAutofill: true,\n      });\n      if (this.totpCode != null) {\n        this.platformUtilsService.copyToClipboard(this.totpCode, { window: window });\n      }\n      if (this.popupUtilsService.inPopup(window)) {\n        if (!closePopupDelay) {\n          if (this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari()) {\n            BrowserApi.closePopup(window);\n          } else {\n            // Slight delay to fix bug in Chromium browsers where popup closes without copying totp to clipboard\n            setTimeout(() => BrowserApi.closePopup(window), 50);\n          }\n        } else {\n          setTimeout(() => BrowserApi.closePopup(window), closePopupDelay);\n        }\n      }\n    } catch {\n      this.ngZone.run(() => {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n        this.changeDetectorRef.detectChanges();\n      });\n    }\n  }\n\n  searchVault() {\n    if (!this.searchService.isSearchable(this.searchText)) {\n      return;\n    }\n\n    this.router.navigate([\"/tabs/vault\"], { queryParams: { searchText: this.searchText } });\n  }\n\n  closeOnEsc(e: KeyboardEvent) {\n    // If input not empty, use browser default behavior of clearing input instead\n    if (e.key === \"Escape\" && (this.searchText == null || this.searchText === \"\")) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  protected async load() {\n    this.isLoading = false;\n    this.tab = await BrowserApi.getTabFromCurrentWindow();\n    if (this.tab != null) {\n      this.url = this.tab.url;\n    } else {\n      this.loginCiphers = [];\n      this.isLoading = this.loaded = true;\n      return;\n    }\n\n    this.hostname = Utils.getHostname(this.url);\n    this.pageDetails = [];\n    BrowserApi.tabSendMessage(this.tab, {\n      command: \"collectPageDetails\",\n      tab: this.tab,\n      sender: BroadcasterSubscriptionId,\n    });\n\n    const otherTypes: CipherType[] = [];\n    const dontShowCards = await this.stateService.getDontShowCardsCurrentTab();\n    const dontShowIdentities = await this.stateService.getDontShowIdentitiesCurrentTab();\n    this.showOrganizations = this.organizationService.hasOrganizations();\n    if (!dontShowCards) {\n      otherTypes.push(CipherType.Card);\n    }\n    if (!dontShowIdentities) {\n      otherTypes.push(CipherType.Identity);\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(\n      this.url,\n      otherTypes.length > 0 ? otherTypes : null\n    );\n\n    this.loginCiphers = [];\n    this.cardCiphers = [];\n    this.identityCiphers = [];\n\n    ciphers.forEach((c) => {\n      if (!this.vaultFilterService.filterCipherForSelectedVault(c)) {\n        switch (c.type) {\n          case CipherType.Login:\n            this.loginCiphers.push(c);\n            break;\n          case CipherType.Card:\n            this.cardCiphers.push(c);\n            break;\n          case CipherType.Identity:\n            this.identityCiphers.push(c);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n\n    this.loginCiphers = this.loginCiphers.sort((a, b) =>\n      this.cipherService.sortCiphersByLastUsedThenName(a, b)\n    );\n    this.isLoading = this.loaded = true;\n  }\n\n  async goToSettings() {\n    this.router.navigate([\"autofill\"]);\n  }\n\n  async dismissCallout() {\n    await this.stateService.setDismissedAutofillCallout(true);\n    this.showHowToAutofill = false;\n  }\n\n  private async setCallout() {\n    this.showHowToAutofill =\n      this.loginCiphers.length > 0 &&\n      !(await this.stateService.getEnableAutoFillOnPageLoad()) &&\n      !(await this.stateService.getDismissedAutofillCallout());\n\n    if (this.showHowToAutofill) {\n      const autofillCommand = await this.platformUtilsService.getAutofillKeyboardShortcut();\n      await this.setAutofillCalloutText(autofillCommand);\n    }\n  }\n\n  private setAutofillCalloutText(command: string) {\n    if (command) {\n      this.autofillCalloutText = this.i18nService.t(\"autofillSelectInfoWithCommand\", command);\n    } else {\n      this.autofillCalloutText = this.i18nService.t(\"autofillSelectInfoWithoutCommand\");\n    }\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { PasswordHistoryView } from \"@bitwarden/common/vault/models/view/password-history.view\";\n\n@Directive()\nexport class PasswordHistoryComponent implements OnInit {\n  cipherId: string;\n  history: PasswordHistoryView[] = [];\n\n  constructor(\n    protected cipherService: CipherService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    private win: Window\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  copy(password: string) {\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(password, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n\n  protected async init() {\n    const cipher = await this.cipherService.get(this.cipherId);\n    const decCipher = await cipher.decrypt(\n      await this.cipherService.getKeyForCipherKeyDecryption(cipher)\n    );\n    this.history = decCipher.passwordHistory == null ? [] : decCipher.passwordHistory;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"passwordHistory\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"history && history.length\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let h of history\">\n        <div class=\"row-main\">\n          <div class=\"row-main-content\">\n            <span\n              class=\"text monospaced no-ellipsis\"\n              [innerHTML]=\"h.password | colorPassword\"\n            ></span>\n            <span class=\"detail\">{{ h.lastUsedDate | date : \"medium\" }}</span>\n          </div>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n            (click)=\"copy(h.password)\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!history || !history.length\">\n    <p>{{ \"noPasswordsInList\" | i18n }}</p>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { PasswordHistoryComponent as BasePasswordHistoryComponent } from \"@bitwarden/angular/vault/components/password-history.component\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-password-history\",\n  templateUrl: \"password-history.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class PasswordHistoryComponent extends BasePasswordHistoryComponent {\n  constructor(\n    cipherService: CipherService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    private location: Location,\n    private route: ActivatedRoute\n  ) {\n    super(cipherService, platformUtilsService, i18nService, window);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      } else {\n        this.close();\n      }\n      await this.init();\n    });\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","type CheckableBase = {\n  checked?: boolean;\n};\n\nexport type Checkable<T> = T & CheckableBase;\n\nexport function isChecked(item: CheckableBase): boolean {\n  return !!item.checked;\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { firstValueFrom, map, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserStatusType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { Checkable, isChecked } from \"@bitwarden/common/types/checkable\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\n\n@Directive()\nexport class ShareComponent implements OnInit, OnDestroy {\n  @Input() cipherId: string;\n  @Input() organizationId: string;\n  @Output() onSharedCipher = new EventEmitter();\n\n  formPromise: Promise<void>;\n  cipher: CipherView;\n  collections: Checkable<CollectionView>[] = [];\n  organizations$: Observable<Organization[]>;\n\n  protected writeableCollections: Checkable<CollectionView>[] = [];\n\n  private _destroy = new Subject<void>();\n\n  constructor(\n    protected collectionService: CollectionService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected cipherService: CipherService,\n    private logService: LogService,\n    protected organizationService: OrganizationService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  async load() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    this.writeableCollections = allCollections.map((c) => c).filter((c) => !c.readOnly);\n\n    this.organizations$ = this.organizationService.memberOrganizations$.pipe(\n      map((orgs) => {\n        return orgs\n          .filter((o) => o.enabled && o.status === OrganizationUserStatusType.Confirmed)\n          .sort(Utils.getSortFunction(this.i18nService, \"name\"));\n      })\n    );\n\n    this.organizations$.pipe(takeUntil(this._destroy)).subscribe((orgs) => {\n      if (this.organizationId == null && orgs.length > 0) {\n        this.organizationId = orgs[0].id;\n      }\n    });\n\n    const cipherDomain = await this.cipherService.get(this.cipherId);\n    this.cipher = await cipherDomain.decrypt(\n      await this.cipherService.getKeyForCipherKeyDecryption(cipherDomain)\n    );\n\n    this.filterCollections();\n  }\n\n  filterCollections() {\n    this.writeableCollections.forEach((c) => (c.checked = false));\n    if (this.organizationId == null || this.writeableCollections.length === 0) {\n      this.collections = [];\n    } else {\n      this.collections = this.writeableCollections.filter(\n        (c) => c.organizationId === this.organizationId\n      );\n    }\n  }\n\n  async submit(): Promise<boolean> {\n    const selectedCollectionIds = this.collections.filter(isChecked).map((c) => c.id);\n    if (selectedCollectionIds.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectOneCollection\")\n      );\n      return;\n    }\n\n    const cipherDomain = await this.cipherService.get(this.cipherId);\n    const cipherView = await cipherDomain.decrypt(\n      await this.cipherService.getKeyForCipherKeyDecryption(cipherDomain)\n    );\n    const orgs = await firstValueFrom(this.organizations$);\n    const orgName =\n      orgs.find((o) => o.id === this.organizationId)?.name ?? this.i18nService.t(\"organization\");\n\n    try {\n      this.formPromise = this.cipherService\n        .shareWithServer(cipherView, this.organizationId, selectedCollectionIds)\n        .then(async () => {\n          this.onSharedCipher.emit();\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"movedItemToOrg\", cipherView.name, orgName)\n          );\n        });\n      await this.formPromise;\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n    return false;\n  }\n\n  get canSave() {\n    if (this.collections != null) {\n      for (let i = 0; i < this.collections.length; i++) {\n        if (this.collections[i].checked) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <ng-container *ngIf=\"organizations$ | async as organizations\">\n    <header>\n      <div class=\"left\">\n        <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n      </div>\n      <h1 class=\"center\">\n        <span class=\"title\">{{ \"moveToOrganization\" | i18n }}</span>\n      </h1>\n      <div class=\"right\">\n        <button\n          type=\"submit\"\n          [disabled]=\"form.loading || !canSave\"\n          *ngIf=\"organizations && organizations.length\"\n        >\n          <span [hidden]=\"form.loading\">{{ \"move\" | i18n }}</span>\n          <i\n            class=\"bwi bwi-spinner bwi-lg bwi-spin\"\n            [hidden]=\"!form.loading\"\n            aria-hidden=\"true\"\n          ></i>\n        </button>\n      </div>\n    </header>\n    <main tabindex=\"-1\">\n      <div class=\"box\">\n        <div class=\"box-content\" *ngIf=\"!organizations || !organizations.length\">\n          <div class=\"box-content-row padded no-hover\">\n            {{ \"noOrganizationsList\" | i18n }}\n          </div>\n        </div>\n        <div class=\"box-content\" *ngIf=\"organizations && organizations.length\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"organization\">{{ \"organization\" | i18n }}</label>\n            <select\n              id=\"organization\"\n              name=\"OrganizationId\"\n              aria-describedby=\"organizationHelp\"\n              [(ngModel)]=\"organizationId\"\n              (change)=\"filterCollections()\"\n            >\n              <option *ngFor=\"let o of organizations\" [ngValue]=\"o.id\">{{ o.name }}</option>\n            </select>\n          </div>\n        </div>\n        <div id=\"organizationHelp\" class=\"box-footer\">\n          {{ \"moveToOrgDesc\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box\" *ngIf=\"organizations && organizations.length\">\n        <h2 class=\"box-header\">\n          {{ \"collections\" | i18n }}\n        </h2>\n        <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n          <div class=\"box-content-row padded no-hover\">\n            {{ \"noCollectionsInList\" | i18n }}\n          </div>\n        </div>\n        <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n          <div\n            class=\"box-content-row box-content-row-checkbox\"\n            *ngFor=\"let c of collections; let i = index\"\n            appBoxRow\n          >\n            <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n            <input\n              id=\"collection_{{ i }}\"\n              type=\"checkbox\"\n              [(ngModel)]=\"c.checked\"\n              name=\"Collection[{{ i }}].Checked\"\n            />\n          </div>\n        </div>\n      </div>\n    </main>\n  </ng-container>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ShareComponent as BaseShareComponent } from \"@bitwarden/angular/components/share.component\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\n\n@Component({\n  selector: \"app-vault-share\",\n  templateUrl: \"share.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class ShareComponent extends BaseShareComponent {\n  constructor(\n    collectionService: CollectionService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    logService: LogService,\n    cipherService: CipherService,\n    private route: ActivatedRoute,\n    private router: Router,\n    organizationService: OrganizationService\n  ) {\n    super(\n      collectionService,\n      platformUtilsService,\n      i18nService,\n      cipherService,\n      logService,\n      organizationService\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.onSharedCipher.subscribe(() => {\n      this.router.navigate([\"view-cipher\", { cipherId: this.cipherId }]);\n    });\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.load();\n    });\n  }\n\n  async submit(): Promise<boolean> {\n    const success = await super.submit();\n    if (success) {\n      this.cancel();\n    }\n    return success;\n  }\n\n  cancel() {\n    this.router.navigate([\"/view-cipher\"], {\n      replaceUrl: true,\n      queryParams: { cipherId: this.cipher.id },\n    });\n  }\n}\n","import { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserGroupingsComponentState extends BrowserComponentState {\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  ciphers: CipherView[];\n  collectionCounts: Map<string, number>;\n  folderCounts: Map<string, number>;\n  typeCounts: Map<CipherType, number>;\n  folders: FolderView[];\n  collections: CollectionView[];\n  deletedCount: number;\n\n  toJSON() {\n    return Utils.merge(this, {\n      collectionCounts: Utils.mapToRecord(this.collectionCounts),\n      folderCounts: Utils.mapToRecord(this.folderCounts),\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserGroupingsComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserGroupingsComponentState(), json, {\n      favoriteCiphers: json.favoriteCiphers?.map((c) => CipherView.fromJSON(c)),\n      noFolderCiphers: json.noFolderCiphers?.map((c) => CipherView.fromJSON(c)),\n      ciphers: json.ciphers?.map((c) => CipherView.fromJSON(c)),\n      collectionCounts: Utils.recordToMap(json.collectionCounts),\n      folderCounts: Utils.recordToMap(json.folderCounts),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n      folders: json.folders?.map((f) => FolderView.fromJSON(f)),\n    });\n  }\n}\n","<header>\n  <div class=\"left\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"sr-only\">{{ \"myVault\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ 'searchVault' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n      (keydown)=\"closeOnEsc($event)\"\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" cdk-scrollable>\n  <app-vault-select\n    (onVaultSelectionChanged)=\"vaultFilterChanged()\"\n    class=\"select-index-top\"\n  ></app-vault-select>\n  <div class=\"no-items\" *ngIf=\"(!ciphers || !ciphers.length) && !showSearching()\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <img class=\"no-items-image\" aria-hidden=\"true\" />\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button type=\"button\" (click)=\"addCipher()\" class=\"btn block primary link\">\n        {{ \"addItem\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <ng-container *ngIf=\"ciphers && ciphers.length && !showSearching()\">\n    <div class=\"box list\" *ngIf=\"favoriteCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"favorites\" | i18n }}\n        <span class=\"flex-right\">{{ favoriteCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let favoriteCipher of favoriteCiphers\"\n          [cipher]=\"favoriteCipher\"\n          title=\"{{ 'viewItem' | i18n }}\"\n          (onSelected)=\"selectCipher($event)\"\n          (launchEvent)=\"launchCipher($event)\"\n        >\n        </app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"types\" | i18n }}\n        <span class=\"flex-right\">4</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Login)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-globe\"></i></div>\n            <span class=\"text\">{{ \"typeLogin\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Login) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Card)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-credit-card\"></i></div>\n            <span class=\"text\">{{ \"typeCard\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Card) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Identity)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-id-card\"></i></div>\n            <span class=\"text\">{{ \"typeIdentity\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Identity) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.SecureNote)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-sticky-note\"></i></div>\n            <span class=\"text\">{{ \"typeSecureNote\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.SecureNote) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"nestedFolders?.length\">\n      <h2 class=\"box-header\">\n        {{ \"folders\" | i18n }}\n        <span class=\"flex-right\">{{ folderCount }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let f of nestedFolders\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectFolder(f.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-folder\"></i>\n            </div>\n            <span class=\"text\">{{ f.node.name }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ folderCounts.get(f.node.id) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"showCollections && nestedCollections && nestedCollections.length\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n        <span class=\"flex-right\">{{ nestedCollections.length }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let nestedCollection of nestedCollections\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectCollection(nestedCollection.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-collection\"></i></div>\n            <span class=\"text\">{{ nestedCollection.node.name }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{\n            collectionCounts.get(nestedCollection.node.id) || 0\n          }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"showNoFolderCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"noneFolder\" | i18n }}\n        <div class=\"flex-right\">{{ noFolderCiphers.length }}</div>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let noFolderCipher of noFolderCiphers\"\n          [cipher]=\"noFolderCipher\"\n          title=\"{{ 'viewItem' | i18n }}\"\n          (onSelected)=\"selectCipher($event)\"\n          (launchEvent)=\"launchCipher($event)\"\n        >\n        </app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"deletedCount\">\n      <h2 class=\"box-header\">\n        {{ \"trash\" | i18n }}\n        <span class=\"flex-right\">{{ deletedCount }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button type=\"button\" class=\"box-content-row\" appStopClick (click)=\"selectTrash()\">\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-trash\"></i></div>\n            <span class=\"text\">{{ \"trash\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ deletedCount }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"showSearching()\">\n    <div class=\"no-items\" *ngIf=\"!ciphers || !ciphers.length\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n    </div>\n    <cdk-virtual-scroll-viewport\n      itemSize=\"55\"\n      minBufferPx=\"400\"\n      maxBufferPx=\"600\"\n      *ngIf=\"ciphers && ciphers.length > 0\"\n    >\n      <div class=\"box list full-list\">\n        <div class=\"box-content\">\n          <app-cipher-row\n            *cdkVirtualFor=\"let searchedCipher of ciphers\"\n            [cipher]=\"searchedCipher\"\n            title=\"{{ 'viewItem' | i18n }}\"\n            (onSelected)=\"selectCipher($event)\"\n            (launchEvent)=\"launchCipher($event)\"\n          >\n          </app-cipher-row>\n        </div>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { firstValueFrom } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nimport { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserGroupingsComponentState } from \"../../../../models/browserGroupingsComponentState\";\nimport { BrowserApi } from \"../../../../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../../../../platform/services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst ComponentId = \"VaultComponent\";\n\n@Component({\n  selector: \"app-vault-filter\",\n  templateUrl: \"vault-filter.component.html\",\n})\nexport class VaultFilterComponent implements OnInit, OnDestroy {\n  get showNoFolderCiphers(): boolean {\n    return (\n      this.noFolderCiphers != null &&\n      this.noFolderCiphers.length < this.noFolderListSize &&\n      this.collections.length === 0\n    );\n  }\n\n  get folderCount(): number {\n    return this.nestedFolders.length - (this.showNoFolderCiphers ? 0 : 1);\n  }\n  folders: FolderView[];\n  nestedFolders: TreeNode<FolderView>[];\n  collections: CollectionView[];\n  nestedCollections: TreeNode<CollectionView>[];\n  loaded = false;\n  cipherType = CipherType;\n  ciphers: CipherView[];\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  folderCounts = new Map<string, number>();\n  collectionCounts = new Map<string, number>();\n  typeCounts = new Map<CipherType, number>();\n  searchText: string;\n  state: BrowserGroupingsComponentState;\n  showLeftHeader = true;\n  searchPending = false;\n  searchTypeSearch = false;\n  deletedCount = 0;\n  vaultFilter: VaultFilter;\n  selectedOrganization: string = null;\n  showCollections = true;\n\n  private loadedTimeout: number;\n  private selectedTimeout: number;\n  private preventSelected = false;\n  private noFolderListSize = 100;\n  private searchTimeout: any = null;\n  private hasSearched = false;\n  private hasLoadedAllCiphers = false;\n  private allCiphers: CipherView[] = null;\n\n  constructor(\n    private i18nService: I18nService,\n    private cipherService: CipherService,\n    private router: Router,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private route: ActivatedRoute,\n    private popupUtils: PopupUtilsService,\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private searchService: SearchService,\n    private location: Location,\n    private browserStateService: BrowserStateService,\n    private vaultFilterService: VaultFilterService\n  ) {\n    this.noFolderListSize = 100;\n  }\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.showLeftHeader = !(\n      this.popupUtils.inSidebar(window) && this.platformUtilsService.isFirefox()\n    );\n    await this.browserStateService.setBrowserVaultItemsComponentState(null);\n\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            window.setTimeout(() => {\n              this.load();\n            }, 500);\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n\n    const restoredScopeState = await this.restoreState();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.state = await this.browserStateService.getBrowserGroupingComponentState();\n      if (this.state?.searchText) {\n        this.searchText = this.state.searchText;\n      } else if (params.searchText) {\n        this.searchText = params.searchText;\n        this.location.replaceState(\"vault\");\n      }\n\n      if (!this.syncService.syncInProgress) {\n        this.load();\n      } else {\n        this.loadedTimeout = window.setTimeout(() => {\n          if (!this.loaded) {\n            this.load();\n          }\n        }, 5000);\n      }\n\n      if (!this.syncService.syncInProgress || restoredScopeState) {\n        window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.loadedTimeout != null) {\n      window.clearTimeout(this.loadedTimeout);\n    }\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.saveState();\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async load() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n\n    this.updateSelectedOrg();\n    await this.loadCollectionsAndFolders();\n    await this.loadCiphers();\n\n    if (this.showNoFolderCiphers && this.nestedFolders.length > 0) {\n      // Remove \"No Folder\" from folder listing\n      this.nestedFolders = this.nestedFolders.slice(0, this.nestedFolders.length - 1);\n    }\n\n    this.loaded = true;\n  }\n\n  async loadCiphers() {\n    this.allCiphers = await this.cipherService.getAllDecrypted();\n    if (!this.hasLoadedAllCiphers) {\n      this.hasLoadedAllCiphers = !this.searchService.isSearchable(this.searchText);\n    }\n    await this.search(null);\n    this.getCounts();\n  }\n\n  async loadCollections() {\n    const allCollections = await this.vaultFilterService.buildCollections(\n      this.selectedOrganization\n    );\n    this.collections = allCollections.fullList;\n    this.nestedCollections = allCollections.nestedList;\n  }\n\n  async loadFolders() {\n    const allFolders = await firstValueFrom(\n      this.vaultFilterService.buildNestedFolders(this.selectedOrganization)\n    );\n    this.folders = allFolders.fullList;\n    this.nestedFolders = allFolders.nestedList;\n  }\n\n  async search(timeout: number = null) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    const filterDeleted = (c: CipherView) => !c.isDeleted;\n    if (timeout == null) {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.ciphers = await this.searchService.searchCiphers(\n        this.searchText,\n        filterDeleted,\n        this.allCiphers\n      );\n      this.ciphers = this.ciphers.filter(\n        (c) => !this.vaultFilterService.filterCipherForSelectedVault(c)\n      );\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      if (!this.hasLoadedAllCiphers && !this.hasSearched) {\n        await this.loadCiphers();\n      } else {\n        this.ciphers = await this.searchService.searchCiphers(\n          this.searchText,\n          filterDeleted,\n          this.allCiphers\n        );\n      }\n      this.ciphers = this.ciphers.filter(\n        (c) => !this.vaultFilterService.filterCipherForSelectedVault(c)\n      );\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  async selectType(type: CipherType) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { type: type } });\n  }\n\n  async selectFolder(folder: FolderView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { folderId: folder.id || \"none\" } });\n  }\n\n  async selectCollection(collection: CollectionView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { collectionId: collection.id } });\n  }\n\n  async selectTrash() {\n    this.router.navigate([\"/ciphers\"], { queryParams: { deleted: true } });\n  }\n\n  async selectCipher(cipher: CipherView) {\n    this.selectedTimeout = window.setTimeout(() => {\n      if (!this.preventSelected) {\n        this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n      }\n      this.preventSelected = false;\n    }, 200);\n  }\n\n  async launchCipher(cipher: CipherView) {\n    if (cipher.type !== CipherType.Login || !cipher.login.canLaunch) {\n      return;\n    }\n\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.preventSelected = true;\n    await this.cipherService.updateLastLaunchedDate(cipher.id);\n    BrowserApi.createNewTab(cipher.login.launchUri);\n    if (this.popupUtils.inPopup(window)) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  async addCipher() {\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: { selectedVault: this.vaultFilter.selectedOrganizationId },\n    });\n  }\n\n  async vaultFilterChanged() {\n    if (this.showSearching) {\n      await this.search();\n    }\n    this.updateSelectedOrg();\n    await this.loadCollectionsAndFolders();\n    this.getCounts();\n  }\n\n  updateSelectedOrg() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    if (this.vaultFilter.selectedOrganizationId != null) {\n      this.selectedOrganization = this.vaultFilter.selectedOrganizationId;\n    } else {\n      this.selectedOrganization = null;\n    }\n  }\n\n  getCounts() {\n    let favoriteCiphers: CipherView[] = null;\n    let noFolderCiphers: CipherView[] = null;\n    const folderCounts = new Map<string, number>();\n    const collectionCounts = new Map<string, number>();\n    const typeCounts = new Map<CipherType, number>();\n\n    this.deletedCount = this.allCiphers.filter(\n      (c) => c.isDeleted && !this.vaultFilterService.filterCipherForSelectedVault(c)\n    ).length;\n\n    this.ciphers?.forEach((c) => {\n      if (!this.vaultFilterService.filterCipherForSelectedVault(c)) {\n        if (c.isDeleted) {\n          return;\n        }\n        if (c.favorite) {\n          if (favoriteCiphers == null) {\n            favoriteCiphers = [];\n          }\n          favoriteCiphers.push(c);\n        }\n\n        if (c.folderId == null) {\n          if (noFolderCiphers == null) {\n            noFolderCiphers = [];\n          }\n          noFolderCiphers.push(c);\n        }\n\n        if (typeCounts.has(c.type)) {\n          typeCounts.set(c.type, typeCounts.get(c.type) + 1);\n        } else {\n          typeCounts.set(c.type, 1);\n        }\n\n        if (folderCounts.has(c.folderId)) {\n          folderCounts.set(c.folderId, folderCounts.get(c.folderId) + 1);\n        } else {\n          folderCounts.set(c.folderId, 1);\n        }\n\n        if (c.collectionIds != null) {\n          c.collectionIds.forEach((colId) => {\n            if (collectionCounts.has(colId)) {\n              collectionCounts.set(colId, collectionCounts.get(colId) + 1);\n            } else {\n              collectionCounts.set(colId, 1);\n            }\n          });\n        }\n      }\n    });\n\n    this.favoriteCiphers = favoriteCiphers;\n    this.noFolderCiphers = noFolderCiphers;\n    this.typeCounts = typeCounts;\n    this.folderCounts = folderCounts;\n    this.collectionCounts = collectionCounts;\n  }\n\n  showSearching() {\n    return (\n      this.hasSearched || (!this.searchPending && this.searchService.isSearchable(this.searchText))\n    );\n  }\n\n  closeOnEsc(e: KeyboardEvent) {\n    // If input not empty, use browser default behavior of clearing input instead\n    if (e.key === \"Escape\" && (this.searchText == null || this.searchText === \"\")) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  private async loadCollectionsAndFolders() {\n    this.showCollections = !this.vaultFilter.myVaultOnly;\n    await this.loadFolders();\n    await this.loadCollections();\n  }\n\n  private async saveState() {\n    this.state = Object.assign(new BrowserGroupingsComponentState(), {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n      favoriteCiphers: this.favoriteCiphers,\n      noFolderCiphers: this.noFolderCiphers,\n      ciphers: this.ciphers,\n      collectionCounts: this.collectionCounts,\n      folderCounts: this.folderCounts,\n      typeCounts: this.typeCounts,\n      folders: this.folders,\n      collections: this.collections,\n      deletedCount: this.deletedCount,\n    });\n    await this.browserStateService.setBrowserGroupingComponentState(this.state);\n  }\n\n  private async restoreState(): Promise<boolean> {\n    this.state = await this.browserStateService.getBrowserGroupingComponentState();\n    if (this.state == null) {\n      return false;\n    }\n\n    if (this.state.favoriteCiphers != null) {\n      this.favoriteCiphers = this.state.favoriteCiphers;\n    }\n    if (this.state.noFolderCiphers != null) {\n      this.noFolderCiphers = this.state.noFolderCiphers;\n    }\n    if (this.state.ciphers != null) {\n      this.ciphers = this.state.ciphers;\n    }\n    if (this.state.collectionCounts != null) {\n      this.collectionCounts = this.state.collectionCounts;\n    }\n    if (this.state.folderCounts != null) {\n      this.folderCounts = this.state.folderCounts;\n    }\n    if (this.state.typeCounts != null) {\n      this.typeCounts = this.state.typeCounts;\n    }\n    if (this.state.folders != null) {\n      this.folders = this.state.folders;\n    }\n    if (this.state.collections != null) {\n      this.collections = this.state.collections;\n    }\n    if (this.state.deletedCount != null) {\n      this.deletedCount = this.state.deletedCount;\n    }\n\n    return true;\n  }\n}\n","import { Directive, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class VaultItemsComponent {\n  @Input() activeCipherId: string = null;\n  @Output() onCipherClicked = new EventEmitter<CipherView>();\n  @Output() onCipherRightClicked = new EventEmitter<CipherView>();\n  @Output() onAddCipher = new EventEmitter();\n  @Output() onAddCipherOptions = new EventEmitter();\n\n  loaded = false;\n  ciphers: CipherView[] = [];\n  searchPlaceholder: string = null;\n  filter: (cipher: CipherView) => boolean = null;\n  deleted = false;\n  organization: Organization;\n  accessEvents = false;\n\n  protected searchPending = false;\n\n  private searchTimeout: any = null;\n  private _searchText: string = null;\n  get searchText() {\n    return this._searchText;\n  }\n  set searchText(value: string) {\n    this._searchText = value;\n  }\n\n  constructor(protected searchService: SearchService, protected cipherService: CipherService) {}\n\n  async load(filter: (cipher: CipherView) => boolean = null, deleted = false) {\n    this.deleted = deleted ?? false;\n    await this.applyFilter(filter);\n    this.loaded = true;\n  }\n\n  async reload(filter: (cipher: CipherView) => boolean = null, deleted = false) {\n    this.loaded = false;\n    await this.load(filter, deleted);\n  }\n\n  async refresh() {\n    await this.reload(this.filter, this.deleted);\n  }\n\n  async applyFilter(filter: (cipher: CipherView) => boolean = null) {\n    this.filter = filter;\n    await this.search(null);\n  }\n\n  async search(timeout: number = null, indexedCiphers?: CipherView[]) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    if (timeout == null) {\n      await this.doSearch(indexedCiphers);\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      await this.doSearch(indexedCiphers);\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  selectCipher(cipher: CipherView) {\n    this.onCipherClicked.emit(cipher);\n  }\n\n  rightClickCipher(cipher: CipherView) {\n    this.onCipherRightClicked.emit(cipher);\n  }\n\n  addCipher() {\n    this.onAddCipher.emit();\n  }\n\n  addCipherOptions() {\n    this.onAddCipherOptions.emit();\n  }\n\n  isSearching() {\n    return !this.searchPending && this.searchService.isSearchable(this.searchText);\n  }\n\n  protected deletedFilter: (cipher: CipherView) => boolean = (c) => c.isDeleted === this.deleted;\n\n  protected async doSearch(indexedCiphers?: CipherView[]) {\n    indexedCiphers = indexedCiphers ?? (await this.cipherService.getAllDecrypted());\n    this.ciphers = await this.searchService.searchCiphers(\n      this.searchText,\n      [this.filter, this.deletedFilter],\n      indexedCiphers\n    );\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"back()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"sr-only\">{{ \"myVault\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ searchPlaceholder || ('searchVault' | i18n) }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\" aria-hidden=\"true\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ 'stacked-boxes': showGroupings() }\">\n  <ng-container *ngIf=\"showGroupings()\">\n    <app-vault-select\n      *ngIf=\"showVaultFilter\"\n      (onVaultSelectionChanged)=\"changeVaultSelection()\"\n    ></app-vault-select>\n    <div class=\"box list\" *ngIf=\"nestedFolders && nestedFolders.length\">\n      <h2 class=\"box-header\">\n        {{ \"folders\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let f of nestedFolders\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectFolder(f.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-folder\" aria-hidden=\"true\"></i>\n            </div>\n            <span class=\"text\">{{ f.node.name }}</span>\n          </div>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"nestedCollections && nestedCollections.length\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let c of nestedCollections\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectCollection(c.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-collection\" aria-hidden=\"true\"></i>\n            </div>\n            <span class=\"text\">{{ c.node.name }}</span>\n          </div>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"ciphers\">\n    <div *ngIf=\"!ciphers.length\">\n      <app-vault-select\n        *ngIf=\"showVaultFilter && !showGroupings()\"\n        (onVaultSelectionChanged)=\"changeVaultSelection()\"\n      ></app-vault-select>\n      <div class=\"no-items\" *ngIf=\"!nestedFolders?.length && !nestedCollections?.length\">\n        <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\" aria-hidden=\"true\"></i>\n        <ng-container *ngIf=\"loaded\">\n          <img class=\"no-items-image\" aria-hidden=\"true\" />\n          <p>{{ \"noItemsInList\" | i18n }}</p>\n          <button type=\"button\" (click)=\"addCipher()\" class=\"btn block primary link\">\n            {{ \"addItem\" | i18n }}\n          </button>\n        </ng-container>\n      </div>\n    </div>\n    <cdk-virtual-scroll-viewport\n      itemSize=\"55\"\n      minBufferPx=\"400\"\n      maxBufferPx=\"600\"\n      *ngIf=\"ciphers.length\"\n      #virtualScrollViewport\n      ><app-vault-select\n        *ngIf=\"showVaultFilter && !showGroupings()\"\n        (onVaultSelectionChanged)=\"changeVaultSelection()\"\n      ></app-vault-select>\n      <div class=\"box list only-list\">\n        <h2 class=\"box-header\">\n          {{ groupingTitle }}\n          <span class=\"flex-right\">{{ isSearching() ? ciphers.length : ciphers.length }}</span>\n        </h2>\n        <div class=\"box-content\">\n          <app-cipher-row\n            *cdkVirtualFor=\"let c of ciphers; let last = last\"\n            [cipher]=\"c\"\n            [last]=\"last\"\n            title=\"{{ 'viewItem' | i18n }}\"\n            (onSelected)=\"selectCipher($event)\"\n            (launchEvent)=\"launchCipher($event)\"\n          ></app-cipher-row>\n        </div>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { VaultItemsComponent as BaseVaultItemsComponent } from \"@bitwarden/angular/vault/components/vault-items.component\";\nimport { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserComponentState } from \"../../../../models/browserComponentState\";\nimport { BrowserApi } from \"../../../../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../../../../platform/services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst ComponentId = \"VaultItemsComponent\";\n\n@Component({\n  selector: \"app-vault-items\",\n  templateUrl: \"vault-items.component.html\",\n})\nexport class VaultItemsComponent extends BaseVaultItemsComponent implements OnInit, OnDestroy {\n  groupingTitle: string;\n  state: BrowserComponentState;\n  folderId: string = null;\n  collectionId: string = null;\n  type: CipherType = null;\n  nestedFolders: TreeNode<FolderView>[];\n  nestedCollections: TreeNode<CollectionView>[];\n  searchTypeSearch = false;\n  showOrganizations = false;\n  vaultFilter: VaultFilter;\n  deleted = true;\n  noneFolder = false;\n  showVaultFilter = false;\n\n  private selectedTimeout: number;\n  private preventSelected = false;\n  private applySavedState = true;\n  private scrollingContainer = \"cdk-virtual-scroll-viewport\";\n\n  constructor(\n    searchService: SearchService,\n    private organizationService: OrganizationService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private stateService: BrowserStateService,\n    private popupUtils: PopupUtilsService,\n    private i18nService: I18nService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private platformUtilsService: PlatformUtilsService,\n    cipherService: CipherService,\n    private vaultFilterService: VaultFilterService\n  ) {\n    super(searchService, cipherService);\n    this.applySavedState =\n      (window as any).previousPopupUrl != null &&\n      !(window as any).previousPopupUrl.startsWith(\"/ciphers\");\n  }\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.showOrganizations = this.organizationService.hasOrganizations();\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (this.applySavedState) {\n        this.state = await this.stateService.getBrowserVaultItemsComponentState();\n        if (this.state?.searchText) {\n          this.searchText = this.state.searchText;\n        }\n      }\n\n      if (params.deleted) {\n        this.showVaultFilter = true;\n        this.groupingTitle = this.i18nService.t(\"trash\");\n        this.searchPlaceholder = this.i18nService.t(\"searchTrash\");\n        await this.load(this.buildFilter(), true);\n      } else if (params.type) {\n        this.showVaultFilter = true;\n        this.searchPlaceholder = this.i18nService.t(\"searchType\");\n        this.type = parseInt(params.type, null);\n        switch (this.type) {\n          case CipherType.Login:\n            this.groupingTitle = this.i18nService.t(\"logins\");\n            break;\n          case CipherType.Card:\n            this.groupingTitle = this.i18nService.t(\"cards\");\n            break;\n          case CipherType.Identity:\n            this.groupingTitle = this.i18nService.t(\"identities\");\n            break;\n          case CipherType.SecureNote:\n            this.groupingTitle = this.i18nService.t(\"secureNotes\");\n            break;\n          default:\n            break;\n        }\n        await this.load(this.buildFilter());\n      } else if (params.folderId) {\n        this.showVaultFilter = true;\n        this.folderId = params.folderId === \"none\" ? null : params.folderId;\n        this.searchPlaceholder = this.i18nService.t(\"searchFolder\");\n        if (this.folderId != null) {\n          this.showOrganizations = false;\n          const folderNode = await this.vaultFilterService.getFolderNested(this.folderId);\n          if (folderNode != null && folderNode.node != null) {\n            this.groupingTitle = folderNode.node.name;\n            this.nestedFolders =\n              folderNode.children != null && folderNode.children.length > 0\n                ? folderNode.children\n                : null;\n          }\n        } else {\n          this.noneFolder = true;\n          this.groupingTitle = this.i18nService.t(\"noneFolder\");\n        }\n        await this.load(this.buildFilter());\n      } else if (params.collectionId) {\n        this.showVaultFilter = false;\n        this.collectionId = params.collectionId;\n        this.searchPlaceholder = this.i18nService.t(\"searchCollection\");\n        const collectionNode = await this.collectionService.getNested(this.collectionId);\n        if (collectionNode != null && collectionNode.node != null) {\n          this.groupingTitle = collectionNode.node.name;\n          this.nestedCollections =\n            collectionNode.children != null && collectionNode.children.length > 0\n              ? collectionNode.children\n              : null;\n        }\n        await this.load(\n          (c) => c.collectionIds != null && c.collectionIds.indexOf(this.collectionId) > -1\n        );\n      } else {\n        this.showVaultFilter = true;\n        this.groupingTitle = this.i18nService.t(\"allItems\");\n        await this.load(this.buildFilter());\n      }\n\n      if (this.applySavedState && this.state != null) {\n        window.setTimeout(\n          () =>\n            this.popupUtils.setContentScrollY(window, this.state.scrollY, this.scrollingContainer),\n          0\n        );\n      }\n      await this.stateService.setBrowserVaultItemsComponentState(null);\n    });\n\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              window.setTimeout(() => {\n                this.refresh();\n              }, 500);\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.saveState();\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  selectCipher(cipher: CipherView) {\n    this.selectedTimeout = window.setTimeout(() => {\n      if (!this.preventSelected) {\n        super.selectCipher(cipher);\n        this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n      }\n      this.preventSelected = false;\n    }, 200);\n  }\n\n  selectFolder(folder: FolderView) {\n    if (folder.id != null) {\n      this.router.navigate([\"/ciphers\"], { queryParams: { folderId: folder.id } });\n    }\n  }\n\n  selectCollection(collection: CollectionView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { collectionId: collection.id } });\n  }\n\n  async launchCipher(cipher: CipherView) {\n    if (cipher.type !== CipherType.Login || !cipher.login.canLaunch) {\n      return;\n    }\n\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.preventSelected = true;\n    await this.cipherService.updateLastLaunchedDate(cipher.id);\n    BrowserApi.createNewTab(cipher.login.launchUri);\n    if (this.popupUtils.inPopup(window)) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  addCipher() {\n    if (this.deleted) {\n      return false;\n    }\n    super.addCipher();\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: {\n        folderId: this.folderId,\n        type: this.type,\n        collectionId: this.collectionId,\n        selectedVault: this.vaultFilter.selectedOrganizationId,\n      },\n    });\n  }\n\n  back() {\n    (window as any).routeDirection = \"b\";\n    this.location.back();\n  }\n\n  showGroupings() {\n    return (\n      !this.isSearching() &&\n      ((this.nestedFolders && this.nestedFolders.length) ||\n        (this.nestedCollections && this.nestedCollections.length))\n    );\n  }\n\n  async changeVaultSelection() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    await this.load(this.buildFilter(), this.deleted);\n  }\n\n  private buildFilter(): (cipher: CipherView) => boolean {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.deleted && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.type != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.type;\n      }\n      if (this.folderId != null && this.folderId != \"none\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.folderId;\n      }\n      if (this.noneFolder) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.collectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.indexOf(this.collectionId) > -1;\n      }\n      if (this.vaultFilter.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.vaultFilter.selectedOrganizationId;\n      }\n      if (this.vaultFilter.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n\n  private async saveState() {\n    this.state = {\n      scrollY: this.popupUtils.getContentScrollY(window, this.scrollingContainer),\n      searchText: this.searchText,\n    };\n    await this.stateService.setBrowserVaultItemsComponentState(this.state);\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n} from \"@angular/core\";\nimport { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { EventType, FieldType } from \"@bitwarden/common/enums\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { EncArrayBuffer } from \"@bitwarden/common/platform/models/domain/enc-array-buffer\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { AttachmentView } from \"@bitwarden/common/vault/models/view/attachment.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\nconst BroadcasterSubscriptionId = \"ViewComponent\";\n\n@Directive()\nexport class ViewComponent implements OnDestroy, OnInit {\n  @Input() cipherId: string;\n  @Output() onEditCipher = new EventEmitter<CipherView>();\n  @Output() onCloneCipher = new EventEmitter<CipherView>();\n  @Output() onShareCipher = new EventEmitter<CipherView>();\n  @Output() onDeletedCipher = new EventEmitter<CipherView>();\n  @Output() onRestoredCipher = new EventEmitter<CipherView>();\n\n  cipher: CipherView;\n  showPassword: boolean;\n  showPasswordCount: boolean;\n  showCardNumber: boolean;\n  showCardCode: boolean;\n  canAccessPremium: boolean;\n  showPremiumRequiredTotp: boolean;\n  totpCode: string;\n  totpCodeFormatted: string;\n  totpDash: number;\n  totpSec: number;\n  totpLow: boolean;\n  fieldType = FieldType;\n  checkPasswordPromise: Promise<number>;\n  folder: FolderView;\n\n  private totpInterval: any;\n  private previousCipherId: string;\n  private passwordReprompted = false;\n\n  constructor(\n    protected cipherService: CipherService,\n    protected folderService: FolderService,\n    protected totpService: TotpService,\n    protected tokenService: TokenService,\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected auditService: AuditService,\n    protected win: Window,\n    protected broadcasterService: BroadcasterService,\n    protected ngZone: NgZone,\n    protected changeDetectorRef: ChangeDetectorRef,\n    protected eventCollectionService: EventCollectionService,\n    protected apiService: ApiService,\n    protected passwordRepromptService: PasswordRepromptService,\n    private logService: LogService,\n    protected stateService: StateService,\n    protected fileDownloadService: FileDownloadService,\n    protected dialogService: DialogService\n  ) {}\n\n  ngOnInit() {\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              await this.load();\n              this.changeDetectorRef.detectChanges();\n            }\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n    this.cleanUp();\n  }\n\n  async load() {\n    this.cleanUp();\n\n    const cipher = await this.cipherService.get(this.cipherId);\n    this.cipher = await cipher.decrypt(\n      await this.cipherService.getKeyForCipherKeyDecryption(cipher)\n    );\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.showPremiumRequiredTotp =\n      this.cipher.login.totp && !this.canAccessPremium && !this.cipher.organizationUseTotp;\n\n    if (this.cipher.folderId) {\n      this.folder = await (\n        await firstValueFrom(this.folderService.folderViews$)\n      ).find((f) => f.id == this.cipher.folderId);\n    }\n\n    if (\n      this.cipher.type === CipherType.Login &&\n      this.cipher.login.totp &&\n      (cipher.organizationUseTotp || this.canAccessPremium)\n    ) {\n      await this.totpUpdateCode();\n      const interval = this.totpService.getTimeInterval(this.cipher.login.totp);\n      await this.totpTick(interval);\n\n      this.totpInterval = setInterval(async () => {\n        await this.totpTick(interval);\n      }, 1000);\n    }\n\n    if (this.previousCipherId !== this.cipherId) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientViewed, this.cipherId);\n    }\n    this.previousCipherId = this.cipherId;\n  }\n\n  async edit() {\n    if (await this.promptPassword()) {\n      this.onEditCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async clone() {\n    if (await this.promptPassword()) {\n      this.onCloneCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async share() {\n    if (await this.promptPassword()) {\n      this.onShareCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"deleteItem\" },\n      content: {\n        key: this.cipher.isDeleted ? \"permanentlyDeleteItemConfirmation\" : \"deleteItemConfirmation\",\n      },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      await this.deleteCipher();\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.cipher.isDeleted ? \"permanentlyDeletedItem\" : \"deletedItem\")\n      );\n      this.onDeletedCipher.emit(this.cipher);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async restore(): Promise<boolean> {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n\n    try {\n      await this.restoreCipher();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"restoredItem\"));\n      this.onRestoredCipher.emit(this.cipher);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async togglePassword() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showPassword = !this.showPassword;\n    this.showPasswordCount = false;\n    if (this.showPassword) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledPasswordVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async togglePasswordCount() {\n    if (!this.showPassword) {\n      return;\n    }\n\n    this.showPasswordCount = !this.showPasswordCount;\n  }\n\n  async toggleCardNumber() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showCardNumber = !this.showCardNumber;\n    if (this.showCardNumber) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardNumberVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async toggleCardCode() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showCardCode = !this.showCardCode;\n    if (this.showCardCode) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardCodeVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async checkPassword() {\n    if (\n      this.cipher.login == null ||\n      this.cipher.login.password == null ||\n      this.cipher.login.password === \"\"\n    ) {\n      return;\n    }\n\n    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);\n    const matches = await this.checkPasswordPromise;\n\n    if (matches > 0) {\n      this.platformUtilsService.showToast(\n        \"warning\",\n        null,\n        this.i18nService.t(\"passwordExposed\", matches.toString())\n      );\n    } else {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"passwordSafe\"));\n    }\n  }\n\n  launch(uri: LoginUriView, cipherId?: string) {\n    if (!uri.canLaunch) {\n      return;\n    }\n\n    if (cipherId) {\n      this.cipherService.updateLastLaunchedDate(cipherId);\n    }\n\n    this.platformUtilsService.launchUri(uri.launchUri);\n  }\n\n  async copy(value: string, typeI18nKey: string, aType: string): Promise<boolean> {\n    if (value == null) {\n      return false;\n    }\n\n    if (\n      this.passwordRepromptService.protectedFields().includes(aType) &&\n      !(await this.promptPassword())\n    ) {\n      return false;\n    }\n\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(value, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(typeI18nKey))\n    );\n\n    if (typeI18nKey === \"password\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedPassword, this.cipherId);\n    } else if (typeI18nKey === \"securityCode\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedCardCode, this.cipherId);\n    } else if (aType === \"H_Field\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedHiddenField, this.cipherId);\n    }\n\n    return true;\n  }\n\n  setTextDataOnDrag(event: DragEvent, data: string) {\n    event.dataTransfer.setData(\"text\", data);\n  }\n\n  async downloadAttachment(attachment: AttachmentView) {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n    const a = attachment as any;\n    if (a.downloading) {\n      return;\n    }\n\n    if (this.cipher.organizationId == null && !this.canAccessPremium) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"premiumRequiredDesc\")\n      );\n      return;\n    }\n\n    let url: string;\n    try {\n      const attachmentDownloadResponse = await this.apiService.getAttachmentData(\n        this.cipher.id,\n        attachment.id\n      );\n      url = attachmentDownloadResponse.url;\n    } catch (e) {\n      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n        url = attachment.url;\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    a.downloading = true;\n    const response = await fetch(new Request(url, { cache: \"no-store\" }));\n    if (response.status !== 200) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      a.downloading = false;\n      return;\n    }\n\n    try {\n      const encBuf = await EncArrayBuffer.fromResponse(response);\n      const key =\n        attachment.key != null\n          ? attachment.key\n          : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n      const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n      this.fileDownloadService.download({\n        fileName: attachment.fileName,\n        blobData: decBuf,\n      });\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n\n    a.downloading = false;\n  }\n\n  protected deleteCipher() {\n    return this.cipher.isDeleted\n      ? this.cipherService.deleteWithServer(this.cipher.id)\n      : this.cipherService.softDeleteWithServer(this.cipher.id);\n  }\n\n  protected restoreCipher() {\n    return this.cipherService.restoreWithServer(this.cipher.id);\n  }\n\n  protected async promptPassword() {\n    if (this.cipher.reprompt === CipherRepromptType.None || this.passwordReprompted) {\n      return true;\n    }\n\n    return (this.passwordReprompted = await this.passwordRepromptService.showPasswordPrompt());\n  }\n\n  private cleanUp() {\n    this.totpCode = null;\n    this.cipher = null;\n    this.folder = null;\n    this.showPassword = false;\n    this.showCardNumber = false;\n    this.showCardCode = false;\n    this.passwordReprompted = false;\n    if (this.totpInterval) {\n      clearInterval(this.totpInterval);\n    }\n  }\n\n  private async totpUpdateCode() {\n    if (\n      this.cipher == null ||\n      this.cipher.type !== CipherType.Login ||\n      this.cipher.login.totp == null\n    ) {\n      if (this.totpInterval) {\n        clearInterval(this.totpInterval);\n      }\n      return;\n    }\n\n    this.totpCode = await this.totpService.getCode(this.cipher.login.totp);\n    if (this.totpCode != null) {\n      if (this.totpCode.length > 4) {\n        const half = Math.floor(this.totpCode.length / 2);\n        this.totpCodeFormatted =\n          this.totpCode.substring(0, half) + \" \" + this.totpCode.substring(half);\n      } else {\n        this.totpCodeFormatted = this.totpCode;\n      }\n    } else {\n      this.totpCodeFormatted = null;\n      if (this.totpInterval) {\n        clearInterval(this.totpInterval);\n      }\n    }\n  }\n\n  private async totpTick(intervalSeconds: number) {\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const mod = epoch % intervalSeconds;\n\n    this.totpSec = intervalSeconds - mod;\n    this.totpDash = +(Math.round(((78.6 / intervalSeconds) * mod + \"e+2\") as any) + \"e-2\");\n    this.totpLow = this.totpSec <= 7;\n    if (mod === 0) {\n      await this.totpUpdateCode();\n    }\n  }\n}\n","import { Directive, Input } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventType, FieldType } from \"@bitwarden/common/enums\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\n@Directive()\nexport class ViewCustomFieldsComponent {\n  @Input() cipher: CipherView;\n  @Input() promptPassword: () => Promise<boolean>;\n  @Input() copy: (value: string, typeI18nKey: string, aType: string) => void;\n\n  fieldType = FieldType;\n\n  constructor(private eventCollectionService: EventCollectionService) {}\n\n  async toggleFieldValue(field: FieldView) {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    const f = field as any;\n    f.showValue = !f.showValue;\n    f.showCount = false;\n    if (f.showValue) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipher.id\n      );\n    }\n  }\n\n  async toggleFieldCount(field: FieldView) {\n    if (!field.showValue) {\n      return;\n    }\n\n    field.showCount = !field.showCount;\n  }\n\n  setTextDataOnDrag(event: DragEvent, data: string) {\n    event.dataTransfer.setData(\"text\", data);\n  }\n}\n","import { Pipe } from \"@angular/core\";\n\nimport { ColorPasswordPipe } from \"./color-password.pipe\";\n\n/*\n An updated pipe that extends ColourPasswordPipe to include a character count\n*/\n@Pipe({ name: \"colorPasswordCount\" })\nexport class ColorPasswordCountPipe extends ColorPasswordPipe {\n  transform(password: string) {\n    const template = (character: string, type: string, index: number) =>\n      `<span class=\"password-character password-${type}\">\n                ${character}<span class=\"password-count\">${index + 1}</span>\n            </span>`;\n    const colorizedPasswordCount = this.generateTemplate(password, template);\n\n    return colorizedPasswordCount;\n  }\n}\n","<ng-container>\n  <h2 class=\"box-header\">\n    {{ \"customFields\" | i18n }}\n  </h2>\n  <div class=\"box-content\">\n    <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let field of cipher.fields\">\n      <div class=\"row-main\">\n        <span\n          *ngIf=\"field.type != fieldType.Linked\"\n          class=\"row-label draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, field.value)\"\n          >{{ field.name }}</span\n        >\n        <span *ngIf=\"field.type === fieldType.Linked\" class=\"row-label\">{{ field.name }}</span>\n        <div *ngIf=\"field.type === fieldType.Text\">\n          {{ field.value || \"&nbsp;\" }}\n        </div>\n        <div *ngIf=\"field.type === fieldType.Hidden\">\n          <span *ngIf=\"!field.showValue\" class=\"monospaced\">{{ field.maskedValue }}</span>\n          <span\n            *ngIf=\"field.showValue && !field.showCount\"\n            class=\"monospaced show-whitespace\"\n            [innerHTML]=\"field.value | colorPassword\"\n          ></span>\n          <span\n            *ngIf=\"field.showValue && field.showCount\"\n            [innerHTML]=\"field.value | colorPasswordCount\"\n          ></span>\n        </div>\n        <div *ngIf=\"field.type === fieldType.Boolean\">\n          <i class=\"bwi bwi-check-square\" *ngIf=\"field.value === 'true'\" aria-hidden=\"true\"></i>\n          <i class=\"bwi bwi-square\" *ngIf=\"field.value !== 'true'\" aria-hidden=\"true\"></i>\n          <span class=\"sr-only\">{{ field.value }}</span>\n        </div>\n        <div *ngIf=\"field.type === fieldType.Linked\" class=\"box-content-row-flex\">\n          <div class=\"icon icon-small\">\n            <i\n              class=\"bwi bwi-link\"\n              aria-hidden=\"true\"\n              appA11yTitle=\"{{ 'linkedValue' | i18n }}\"\n            ></i>\n            <span class=\"sr-only\">{{ \"linkedValue\" | i18n }}</span>\n          </div>\n          <span>{{ cipher.linkedFieldI18nKey(field.linkedId) | i18n }}</span>\n        </div>\n      </div>\n      <div class=\"action-buttons action-buttons-fixed\">\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'toggleCharacterCount' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'toggleCharacterCount' | i18n }}\"\n          *ngIf=\"field.type === fieldType.Hidden && cipher.viewPassword && field.showValue\"\n          (click)=\"toggleFieldCount(field)\"\n          [attr.aria-pressed]=\"field.showCount\"\n        >\n          <i class=\"bwi bwi-lg bwi-numbered-list\" aria-hidden=\"true\"></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n          *ngIf=\"field.type === fieldType.Hidden && cipher.viewPassword\"\n          (click)=\"toggleFieldValue(field)\"\n          [attr.aria-pressed]=\"field.showValue\"\n        >\n          <i\n            class=\"bwi bwi-lg\"\n            aria-hidden=\"true\"\n            [ngClass]=\"{ 'bwi-eye': !field.showValue, 'bwi-eye-slash': field.showValue }\"\n          ></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'copyValue' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'copyValue' | i18n }}\"\n          *ngIf=\"\n            field.value &&\n            field.type !== fieldType.Boolean &&\n            field.type !== fieldType.Linked &&\n            !(field.type === fieldType.Hidden && !cipher.viewPassword)\n          \"\n          (click)=\"\n            copy(field.value, 'value', field.type === fieldType.Hidden ? 'H_Field' : 'Field')\n          \"\n        >\n          <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import { Component } from \"@angular/core\";\n\nimport { ViewCustomFieldsComponent as BaseViewCustomFieldsComponent } from \"@bitwarden/angular/vault/components/view-custom-fields.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\n\n@Component({\n  selector: \"app-vault-view-custom-fields\",\n  templateUrl: \"view-custom-fields.component.html\",\n})\nexport class ViewCustomFieldsComponent extends BaseViewCustomFieldsComponent {\n  constructor(eventCollectionService: EventCollectionService) {\n    super(eventCollectionService);\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"viewItem\" | i18n }}</span>\n  </h1>\n  <div class=\"right\" *ngIf=\"cipher\">\n    <button type=\"button\" (click)=\"edit()\" *ngIf=\"!cipher.isDeleted\">\n      {{ \"edit\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" *ngIf=\"cipher\">\n  <div class=\"box\">\n    <h2 class=\"box-header\">\n      {{ \"itemInformation\" | i18n }}\n    </h2>\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <label\n          for=\"name\"\n          class=\"draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, cipher.name)\"\n          >{{ \"name\" | i18n }}</label\n        >\n        <input id=\"name\" type=\"text\" [value]=\"cipher.name\" readonly aria-readonly=\"true\" />\n      </div>\n      <!-- Login -->\n      <div *ngIf=\"cipher.login\">\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.login.username\">\n          <div class=\"row-main\">\n            <label\n              for=\"loginUsername\"\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.login.username)\"\n              >{{ \"username\" | i18n }}\n            </label>\n            <input\n              id=\"loginUsername\"\n              type=\"text\"\n              [value]=\"cipher.login.username\"\n              readonly\n              aria-readonly=\"true\"\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n              (click)=\"copy(cipher.login.username, 'username', 'Username')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.login.password\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.login.password)\"\n              >{{ \"password\" | i18n }}</span\n            >\n            <div *ngIf=\"!showPassword\" class=\"monospaced\">\n              {{ cipher.login.maskedPassword }}\n            </div>\n            <div\n              *ngIf=\"showPassword && !showPasswordCount\"\n              class=\"monospaced password-wrapper\"\n              [appCopyText]=\"cipher.login.password\"\n              [innerHTML]=\"cipher.login.password | colorPassword\"\n            ></div>\n            <div\n              *ngIf=\"showPassword && showPasswordCount\"\n              [innerHTML]=\"cipher.login.password | colorPasswordCount\"\n            ></div>\n          </div>\n          <div class=\"action-buttons action-buttons-fixed\">\n            <button\n              type=\"button\"\n              #checkPasswordBtn\n              class=\"row-btn btn\"\n              appA11yTitle=\"{{ 'checkPassword' | i18n }}\"\n              (click)=\"checkPassword()\"\n              [appApiAction]=\"checkPasswordPromise\"\n              [disabled]=\"$any(checkPasswordBtn).loading\"\n              *ngIf=\"cipher.viewPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg bwi-check-circle\"\n                [hidden]=\"$any(checkPasswordBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n              <i\n                class=\"bwi bwi-lg bwi-spinner bwi-spin\"\n                [hidden]=\"!$any(checkPasswordBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleCharacterCount' | i18n }} {{ 'password' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleCharacterCount' | i18n }}\"\n              (click)=\"togglePasswordCount()\"\n              *ngIf=\"showPassword\"\n              [attr.aria-pressed]=\"showPasswordCount\"\n            >\n              <i class=\"bwi bwi-lg bwi-numbered-list\" aria-hidden=\"true\"></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'password' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              *ngIf=\"cipher.viewPassword\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n              (click)=\"copy(cipher.login.password, 'password', 'Password')\"\n              *ngIf=\"cipher.viewPassword\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div\n          class=\"box-content-row box-content-row-flex totp\"\n          [ngClass]=\"{ low: totpLow }\"\n          *ngIf=\"cipher.login.totp && totpCode\"\n        >\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, totpCode)\"\n              >{{ \"verificationCodeTotp\" | i18n }}</span\n            >\n            <span class=\"totp-code\">{{ totpCodeFormatted }}</span>\n          </div>\n          <span class=\"totp-countdown\" aria-hidden=\"true\">\n            <span class=\"totp-sec\">{{ totpSec }}</span>\n            <svg>\n              <g>\n                <circle\n                  class=\"totp-circle inner\"\n                  r=\"12.6\"\n                  cy=\"16\"\n                  cx=\"16\"\n                  [ngStyle]=\"{ 'stroke-dashoffset.px': totpDash }\"\n                ></circle>\n                <circle class=\"totp-circle outer\" r=\"14\" cy=\"16\" cx=\"16\"></circle>\n              </g>\n            </svg>\n          </span>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              title=\"{{ 'copyVerificationCode' | i18n }}\"\n              (click)=\"copy(totpCode, 'verificationCodeTotp', 'TOTP')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n              <span class=\"sr-only\">{{ \"copyValue\" | i18n }}</span>\n              <span\n                class=\"sr-only exists-only-on-parent-focus\"\n                aria-live=\"polite\"\n                aria-atomic=\"true\"\n                >{{ totpSec }}</span\n              >\n            </button>\n          </div>\n        </div>\n\n        <div class=\"box-content-row box-content-row-flex totp\" *ngIf=\"showPremiumRequiredTotp\">\n          <div class=\"row-main\">\n            <span class=\"row-label\">{{ \"verificationCodeTotp\" | i18n }}</span>\n            <span class=\"row-label\">\n              <a routerLink=\"/premium\">\n                {{ \"premiumSubcriptionRequired\" | i18n }}\n              </a>\n            </span>\n          </div>\n        </div>\n      </div>\n      <!-- Card -->\n      <div *ngIf=\"cipher.card\">\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.cardholderName\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.cardholderName)\"\n            >{{ \"cardholderName\" | i18n }}</span\n          >\n          {{ cipher.card.cardholderName }}\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.card.number\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.card.number)\"\n              >{{ \"number\" | i18n }}</span\n            >\n            <span [hidden]=\"showCardNumber\" class=\"monospaced\">{{\n              cipher.card.maskedNumber | creditCardNumber : cipher.card.brand\n            }}</span>\n            <span [hidden]=\"!showCardNumber\" class=\"monospaced\">{{\n              cipher.card.number | creditCardNumber : cipher.card.brand\n            }}</span>\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'number' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"toggleCardNumber()\"\n              [attr.aria-pressed]=\"showCardNumber\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showCardNumber, 'bwi-eye-slash': showCardNumber }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyNumber' | i18n }}\"\n              (click)=\"copy(cipher.card.number, 'number', 'Card Number')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.brand\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.brand)\"\n            >{{ \"brand\" | i18n }}</span\n          >\n          {{ cipher.card.brand }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.expiration\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.expiration)\"\n            >{{ \"expiration\" | i18n }}</span\n          >\n          {{ cipher.card.expiration }}\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.card.code\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.card.code)\"\n              >{{ \"securityCode\" | i18n }}</span\n            >\n            <span [hidden]=\"showCardCode\" class=\"monospaced\">{{ cipher.card.maskedCode }}</span>\n            <span [hidden]=\"!showCardCode\" class=\"monospaced\">{{ cipher.card.code }}</span>\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'securityCode' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"toggleCardCode()\"\n              [attr.aria-pressed]=\"showCardCode\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showCardCode, 'bwi-eye-slash': showCardCode }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copySecurityCode' | i18n }}\"\n              (click)=\"copy(cipher.card.code, 'securityCode', 'Security Code')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <!-- Identity -->\n      <div *ngIf=\"cipher.identity\">\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.fullName\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.fullName)\"\n            >{{ \"identityName\" | i18n }}</span\n          >\n          {{ cipher.identity.fullName }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.username\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.username)\"\n            >{{ \"username\" | i18n }}</span\n          >\n          {{ cipher.identity.username }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.company\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.company)\"\n            >{{ \"company\" | i18n }}</span\n          >\n          {{ cipher.identity.company }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.ssn\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.ssn)\"\n            >{{ \"ssn\" | i18n }}</span\n          >\n          {{ cipher.identity.ssn }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.passportNumber\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.passportNumber)\"\n            >{{ \"passportNumber\" | i18n }}</span\n          >\n          {{ cipher.identity.passportNumber }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.licenseNumber\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.licenseNumber)\"\n            >{{ \"licenseNumber\" | i18n }}</span\n          >\n          {{ cipher.identity.licenseNumber }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.email\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.email)\"\n            >{{ \"email\" | i18n }}</span\n          >\n          {{ cipher.identity.email }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.phone\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.phone)\"\n            >{{ \"phone\" | i18n }}</span\n          >\n          {{ cipher.identity.phone }}\n        </div>\n        <div\n          class=\"box-content-row\"\n          *ngIf=\"cipher.identity.address1 || cipher.identity.city || cipher.identity.country\"\n        >\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"\n              setTextDataOnDrag(\n                $event,\n                (cipher.identity.address1 ? cipher.identity.address1 + '\\n' : '') +\n                  (cipher.identity.address2 ? cipher.identity.address2 + '\\n' : '') +\n                  (cipher.identity.address3 ? cipher.identity.address3 + '\\n' : '') +\n                  (cipher.identity.fullAddressPart2\n                    ? cipher.identity.fullAddressPart2 + '\\n'\n                    : '') +\n                  (cipher.identity.country ? cipher.identity.country : '')\n              )\n            \"\n            >{{ \"address\" | i18n }}</span\n          >\n          <div *ngIf=\"cipher.identity.address1\">{{ cipher.identity.address1 }}</div>\n          <div *ngIf=\"cipher.identity.address2\">{{ cipher.identity.address2 }}</div>\n          <div *ngIf=\"cipher.identity.address3\">{{ cipher.identity.address3 }}</div>\n          <div *ngIf=\"cipher.identity.fullAddressPart2\">{{ cipher.identity.fullAddressPart2 }}</div>\n          <div *ngIf=\"cipher.identity.country\">{{ cipher.identity.country }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.login && cipher.login.hasUris\">\n    <div class=\"box-content\">\n      <div\n        class=\"box-content-row box-content-row-flex\"\n        *ngFor=\"let u of cipher.login.uris; let i = index\"\n      >\n        <div class=\"row-main\">\n          <label\n            for=\"hostOrUri{{ i }}\"\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, u.uri)\"\n            *ngIf=\"!u.isWebsite\"\n            >{{ \"uri\" | i18n }}</label\n          >\n          <label\n            for=\"hostOrUri{{ i }}\"\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, u.uri)\"\n            *ngIf=\"u.isWebsite\"\n            >{{ \"website\" | i18n }}</label\n          >\n          <span title=\"{{ u.uri }}\">\n            <input\n              id=\"hostOrUri{{ i }}\"\n              type=\"text\"\n              [value]=\"u.hostOrUri\"\n              readonly\n              aria-readonly=\"true\"\n            />\n          </span>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            attr.aria-label=\"{{ 'launch' | i18n }} {{ u.uri }}\"\n            appA11yTitle=\"{{ 'launch' | i18n }}\"\n            *ngIf=\"u.canLaunch\"\n            (click)=\"launch(u)\"\n          >\n            <i class=\"bwi bwi-lg bwi-share-square\" aria-hidden=\"true\"></i>\n          </button>\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            attr.aria-label=\"{{ 'copyUri' | i18n }} {{ u.uri }}\"\n            appA11yTitle=\"{{ 'copyUri' | i18n }}\"\n            (click)=\"copy(u.uri, u.isWebsite ? 'website' : 'uri', 'URI')\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.folderId && folder\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <label\n          for=\"folderName\"\n          class=\"draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, folder.name)\"\n          >{{ \"folder\" | i18n }}</label\n        >\n        <input id=\"folderName\" type=\"text\" name=\"folderName\" [value]=\"folder.name\" readonly />\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.notes\">\n    <h2 class=\"box-header\">\n      <label\n        for=\"notes\"\n        class=\"draggable\"\n        draggable=\"true\"\n        (dragstart)=\"setTextDataOnDrag($event, cipher.notes)\"\n        >{{ \"notes\" | i18n }}</label\n      >\n    </h2>\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <textarea\n          id=\"notes\"\n          [value]=\"cipher.notes\"\n          rows=\"6\"\n          readonly\n          aria-readonly=\"true\"\n        ></textarea>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.hasFields\">\n    <app-vault-view-custom-fields\n      [cipher]=\"cipher\"\n      [promptPassword]=\"promptPassword.bind(this)\"\n      [copy]=\"copy.bind(this)\"\n    ></app-vault-view-custom-fields>\n  </div>\n  <div\n    class=\"box\"\n    *ngIf=\"cipher.hasAttachments && (canAccessPremium || cipher.organizationId) && showAttachments\"\n  >\n    <h2 class=\"box-header\">\n      {{ \"attachments\" | i18n }}\n    </h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        *ngFor=\"let attachment of cipher.attachments\"\n        appStopClick\n        (click)=\"downloadAttachment(attachment)\"\n      >\n        <span class=\"row-main\">{{ attachment.fileName }}</span>\n        <small class=\"row-sub-label\">{{ attachment.sizeName }}</small>\n        <i\n          class=\"bwi bwi-download bwi-fw row-sub-icon\"\n          *ngIf=\"!$any(attachment).downloading\"\n          aria-hidden=\"true\"\n        ></i>\n        <i\n          class=\"bwi bwi-spinner bwi-fw bwi-spin row-sub-icon\"\n          *ngIf=\"$any(attachment).downloading\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"fillCipher()\"\n        *ngIf=\"\n          cipher.type !== cipherType.SecureNote &&\n          !cipher.isDeleted &&\n          (!this.inPopout || this.loadAction)\n        \"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-pencil-square bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"autoFill\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"fillCipherAndSave()\"\n        *ngIf=\"cipher.type === cipherType.Login && !cipher.isDeleted && !inPopout\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-bookmark bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"autoFillAndSave\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"clone()\"\n        *ngIf=\"!cipher.organizationId && !cipher.isDeleted\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-files bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"cloneItem\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"share()\"\n        *ngIf=\"!cipher.organizationId\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-arrow-circle-right bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"moveToOrganization\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"restore()\"\n        *ngIf=\"cipher.isDeleted\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-undo bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"restoreItem\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"delete()\"\n        *ngIf=\"cipher.edit\"\n      >\n        <div class=\"row-main text-danger\">\n          <div class=\"icon text-danger\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-trash bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ (cipher.isDeleted ? \"permanentlyDeleteItem\" : \"deleteItem\") | i18n }}</span>\n        </div>\n      </button>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-footer\">\n      <div>\n        <b class=\"font-weight-semibold\">{{ \"dateUpdated\" | i18n }}:</b>\n        {{ cipher.revisionDate | date : \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.creationDate\">\n        <b class=\"font-weight-semibold\">{{ \"dateCreated\" | i18n }}:</b>\n        {{ cipher.creationDate | date : \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.passwordRevisionDisplayDate\">\n        <b class=\"font-weight-semibold\">{{ \"datePasswordUpdated\" | i18n }}:</b>\n        {{ cipher.passwordRevisionDisplayDate | date : \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.hasPasswordHistory\">\n        <b class=\"font-weight-semibold\">{{ \"passwordHistory\" | i18n }}:</b>\n        <button\n          type=\"button\"\n          routerLink=\"/cipher-password-history\"\n          [queryParams]=\"{ cipherId: cipher.id }\"\n          appStopClick\n          title=\"{{ 'passwordHistory' | i18n }}\"\n        >\n          {{ cipher.passwordHistory.length }}\n        </button>\n      </div>\n    </div>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nimport { ViewComponent as BaseViewComponent } from \"@bitwarden/angular/vault/components/view.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { AutofillService } from \"../../../../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../../../../platform/browser/browser-api\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\n\nconst BroadcasterSubscriptionId = \"ChildViewComponent\";\n\nexport const AUTOFILL_ID = \"autofill\";\nexport const COPY_USERNAME_ID = \"copy-username\";\nexport const COPY_PASSWORD_ID = \"copy-password\";\nexport const COPY_VERIFICATIONCODE_ID = \"copy-totp\";\n\ntype LoadAction =\n  | typeof AUTOFILL_ID\n  | typeof COPY_USERNAME_ID\n  | typeof COPY_PASSWORD_ID\n  | typeof COPY_VERIFICATIONCODE_ID;\n\n@Component({\n  selector: \"app-vault-view\",\n  templateUrl: \"view.component.html\",\n})\nexport class ViewComponent extends BaseViewComponent {\n  showAttachments = true;\n  pageDetails: any[] = [];\n  tab: any;\n  senderTabId?: number;\n  loadAction?: LoadAction;\n  uilocation?: \"popout\" | \"popup\" | \"sidebar\" | \"tab\";\n  loadPageDetailsTimeout: number;\n  inPopout = false;\n  cipherType = CipherType;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    cipherService: CipherService,\n    folderService: FolderService,\n    totpService: TotpService,\n    tokenService: TokenService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    platformUtilsService: PlatformUtilsService,\n    auditService: AuditService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    broadcasterService: BroadcasterService,\n    ngZone: NgZone,\n    changeDetectorRef: ChangeDetectorRef,\n    stateService: StateService,\n    eventCollectionService: EventCollectionService,\n    private autofillService: AutofillService,\n    private messagingService: MessagingService,\n    private popupUtilsService: PopupUtilsService,\n    apiService: ApiService,\n    passwordRepromptService: PasswordRepromptService,\n    logService: LogService,\n    fileDownloadService: FileDownloadService,\n    dialogService: DialogService\n  ) {\n    super(\n      cipherService,\n      folderService,\n      totpService,\n      tokenService,\n      i18nService,\n      cryptoService,\n      platformUtilsService,\n      auditService,\n      window,\n      broadcasterService,\n      ngZone,\n      changeDetectorRef,\n      eventCollectionService,\n      apiService,\n      passwordRepromptService,\n      logService,\n      stateService,\n      fileDownloadService,\n      dialogService\n    );\n  }\n\n  ngOnInit() {\n    this.route.queryParams.pipe(takeUntil(this.destroy$)).subscribe((value) => {\n      this.loadAction = value?.action;\n      this.senderTabId = parseInt(value?.senderTabId, 10) || undefined;\n      this.uilocation = value?.uilocation;\n    });\n\n    this.inPopout = this.uilocation === \"popout\" || this.popupUtilsService.inPopout(window);\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      } else {\n        this.close();\n      }\n\n      await this.load();\n    });\n\n    super.ngOnInit();\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"collectPageDetailsResponse\":\n            if (message.sender === BroadcasterSubscriptionId) {\n              this.pageDetails.push({\n                frameId: message.webExtSender.frameId,\n                tab: message.tab,\n                details: message.details,\n              });\n            }\n            break;\n          case \"tabChanged\":\n          case \"windowChanged\":\n            if (this.loadPageDetailsTimeout != null) {\n              window.clearTimeout(this.loadPageDetailsTimeout);\n            }\n            this.loadPageDetailsTimeout = window.setTimeout(() => this.loadPageDetails(), 500);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n    super.ngOnDestroy();\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n  }\n\n  async load() {\n    await super.load();\n    await this.loadPageDetails();\n\n    switch (this.loadAction) {\n      case AUTOFILL_ID:\n        await this.fillCipher();\n        break;\n      case COPY_USERNAME_ID:\n        await this.copy(this.cipher.login.username, \"username\", \"Username\");\n        break;\n      case COPY_PASSWORD_ID:\n        await this.copy(this.cipher.login.password, \"password\", \"Password\");\n        break;\n      case COPY_VERIFICATIONCODE_ID:\n        await this.copy(this.totpCode, \"verificationCodeTotp\", \"TOTP\");\n        break;\n      default:\n        break;\n    }\n\n    if (this.inPopout && this.loadAction) {\n      setTimeout(() => this.close(), 1000);\n    }\n  }\n\n  async edit() {\n    if (this.cipher.isDeleted) {\n      return false;\n    }\n    if (!(await super.edit())) {\n      return false;\n    }\n\n    this.router.navigate([\"/edit-cipher\"], { queryParams: { cipherId: this.cipher.id } });\n    return true;\n  }\n\n  async clone() {\n    if (this.cipher.isDeleted) {\n      return false;\n    }\n\n    if (!(await super.clone())) {\n      return false;\n    }\n\n    this.router.navigate([\"/clone-cipher\"], {\n      queryParams: {\n        cloneMode: true,\n        cipherId: this.cipher.id,\n      },\n    });\n    return true;\n  }\n\n  async share() {\n    if (!(await super.share())) {\n      return false;\n    }\n\n    if (this.cipher.organizationId == null) {\n      this.router.navigate([\"/share-cipher\"], {\n        replaceUrl: true,\n        queryParams: { cipherId: this.cipher.id },\n      });\n    }\n    return true;\n  }\n\n  async fillCipher() {\n    const didAutofill = await this.doAutofill();\n    if (didAutofill) {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"autoFillSuccess\"));\n    }\n  }\n\n  async fillCipherAndSave() {\n    const didAutofill = await this.doAutofill();\n\n    if (didAutofill) {\n      if (this.tab == null) {\n        throw new Error(\"No tab found.\");\n      }\n\n      if (this.cipher.login.uris == null) {\n        this.cipher.login.uris = [];\n      } else {\n        if (this.cipher.login.uris.some((uri) => uri.uri === this.tab.url)) {\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"autoFillSuccessAndSavedUri\")\n          );\n          return;\n        }\n      }\n\n      const loginUri = new LoginUriView();\n      loginUri.uri = this.tab.url;\n      this.cipher.login.uris.push(loginUri);\n\n      try {\n        const cipher: Cipher = await this.cipherService.encrypt(this.cipher);\n        await this.cipherService.updateWithServer(cipher);\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"autoFillSuccessAndSavedUri\")\n        );\n        this.messagingService.send(\"editedCipher\");\n      } catch {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"unexpectedError\"));\n      }\n    }\n  }\n\n  async restore() {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n    if (await super.restore()) {\n      this.close();\n      return true;\n    }\n    return false;\n  }\n\n  async delete() {\n    if (await super.delete()) {\n      this.messagingService.send(\"deletedCipher\");\n      this.close();\n      return true;\n    }\n    return false;\n  }\n\n  close() {\n    if (this.inPopout && this.senderTabId) {\n      BrowserApi.focusTab(this.senderTabId);\n      window.close();\n      return;\n    }\n\n    this.location.back();\n  }\n\n  private async loadPageDetails() {\n    this.pageDetails = [];\n    this.tab = await BrowserApi.getTabFromCurrentWindow();\n\n    if (this.senderTabId) {\n      this.tab = await BrowserApi.getTab(this.senderTabId);\n    }\n\n    if (!this.tab) {\n      return;\n    }\n\n    BrowserApi.tabSendMessage(this.tab, {\n      command: \"collectPageDetails\",\n      tab: this.tab,\n      sender: BroadcasterSubscriptionId,\n    });\n  }\n\n  private async doAutofill() {\n    if (!(await this.promptPassword())) {\n      return false;\n    }\n\n    if (this.pageDetails == null || this.pageDetails.length === 0) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      return false;\n    }\n\n    try {\n      this.totpCode = await this.autofillService.doAutoFill({\n        tab: this.tab,\n        cipher: this.cipher,\n        pageDetails: this.pageDetails,\n        doc: window.document,\n        fillNewPassword: true,\n        allowTotpAutofill: true,\n      });\n      if (this.totpCode != null) {\n        this.platformUtilsService.copyToClipboard(this.totpCode, { window: window });\n      }\n    } catch {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      this.changeDetectorRef.detectChanges();\n      return false;\n    }\n\n    return true;\n  }\n}\n","import { Folder } from \"../../models/domain/folder\";\nimport { FolderResponse } from \"../../models/response/folder.response\";\n\nexport class FolderApiServiceAbstraction {\n  save: (folder: Folder) => Promise<any>;\n  delete: (id: string) => Promise<any>;\n  get: (id: string) => Promise<FolderResponse>;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { Validators, FormBuilder } from \"@angular/forms\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class FolderAddEditComponent implements OnInit {\n  @Input() folderId: string;\n  @Output() onSavedFolder = new EventEmitter<FolderView>();\n  @Output() onDeletedFolder = new EventEmitter<FolderView>();\n\n  editMode = false;\n  folder: FolderView = new FolderView();\n  title: string;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  protected componentName = \"\";\n\n  formGroup = this.formBuilder.group({\n    name: [\"\", [Validators.required]],\n  });\n\n  constructor(\n    protected folderService: FolderService,\n    protected folderApiService: FolderApiServiceAbstraction,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected logService: LogService,\n    protected dialogService: DialogService,\n    protected formBuilder: FormBuilder\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  async submit(): Promise<boolean> {\n    this.folder.name = this.formGroup.controls.name.value;\n    if (this.folder.name == null || this.folder.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    try {\n      const folder = await this.folderService.encrypt(this.folder);\n      this.formPromise = this.folderApiService.save(folder);\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedFolder\" : \"addedFolder\")\n      );\n      this.onSavedFolder.emit(this.folder);\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"deleteFolder\" },\n      content: { key: \"deleteFolderConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.folderApiService.delete(this.folder.id);\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedFolder\"));\n      this.onDeletedFolder.emit(this.folder);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  protected async init() {\n    this.editMode = this.folderId != null;\n\n    if (this.editMode) {\n      this.editMode = true;\n      this.title = this.i18nService.t(\"editFolder\");\n      const folder = await this.folderService.get(this.folderId);\n      this.folder = await folder.decrypt();\n    } else {\n      this.title = this.i18nService.t(\"addFolder\");\n    }\n    this.formGroup.controls.name.setValue(this.folder.name);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/folders\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"folder\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input id=\"name\" type=\"text\" formControlName=\"name\" [appAutofocus]=\"!editMode\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"editMode\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteFolder\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { FolderAddEditComponent as BaseFolderAddEditComponent } from \"@bitwarden/angular/vault/components/folder-add-edit.component\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-folder-add-edit\",\n  templateUrl: \"folder-add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class FolderAddEditComponent extends BaseFolderAddEditComponent {\n  constructor(\n    folderService: FolderService,\n    folderApiService: FolderApiServiceAbstraction,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private router: Router,\n    private route: ActivatedRoute,\n    logService: LogService,\n    dialogService: DialogService,\n    formBuilder: FormBuilder\n  ) {\n    super(\n      folderService,\n      folderApiService,\n      i18nService,\n      platformUtilsService,\n      logService,\n      dialogService,\n      formBuilder\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.folderId) {\n        this.folderId = params.folderId;\n      }\n      await this.init();\n    });\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      this.router.navigate([\"/folders\"]);\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await super.delete();\n    if (confirmed) {\n      this.router.navigate([\"/folders\"]);\n    }\n    return confirmed;\n  }\n}\n","import { Injectable, OnDestroy } from \"@angular/core\";\nimport { CanActivate, NavigationEnd, NavigationStart, Router } from \"@angular/router\";\nimport { Subscription } from \"rxjs\";\nimport { filter, pairwise } from \"rxjs/operators\";\n\n@Injectable()\nexport class DebounceNavigationService implements CanActivate, OnDestroy {\n  navigationStartSub: Subscription;\n  navigationSuccessSub: Subscription;\n\n  private lastNavigation: NavigationStart;\n  private thisNavigation: NavigationStart;\n  private lastNavigationSuccessId: number;\n\n  constructor(private router: Router) {\n    this.navigationStartSub = this.router.events\n      .pipe(\n        filter((event) => event instanceof NavigationStart),\n        pairwise()\n      )\n      .subscribe(\n        (events: [NavigationStart, NavigationStart]) =>\n          ([this.lastNavigation, this.thisNavigation] = events)\n      );\n\n    this.navigationSuccessSub = this.router.events\n      .pipe(filter((event) => event instanceof NavigationEnd))\n      .subscribe((event: NavigationEnd) => (this.lastNavigationSuccessId = event.id));\n  }\n\n  async canActivate() {\n    return !(\n      this.thisNavigation?.navigationTrigger === \"hashchange\" &&\n      this.lastNavigation.navigationTrigger === \"popstate\" &&\n      this.lastNavigationSuccessId === this.lastNavigation.id &&\n      this.lastNavigation.url === this.thisNavigation?.url\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.navigationStartSub != null) {\n      this.navigationStartSub.unsubscribe();\n    }\n\n    if (this.navigationSuccessSub != null) {\n      this.navigationSuccessSub.unsubscribe();\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"autofill\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n        <label for=\"autofill\">{{ \"enableAutoFillOnPageLoad\" | i18n }}</label>\n        <input\n          id=\"autofill\"\n          type=\"checkbox\"\n          aria-describedby=\"autofillHelp\"\n          (change)=\"updateAutoFillOnPageLoad()\"\n          [(ngModel)]=\"enableAutoFillOnPageLoad\"\n        />\n      </div>\n    </div>\n    <div id=\"autofillHelp\" class=\"box-footer\">\n      {{ \"enableAutoFillOnPageLoadDesc\" | i18n }}\n      <b>{{ \"warning\" | i18n }}</b\n      >: {{ \"experimentalFeature\" | i18n }}\n      <a\n        href=\"https://bitwarden.com/help/auto-fill-browser/\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {{ \"learnMoreAboutAutofill\" | i18n }}.\n        <i\n          [attr.aria-label]=\"'opensInANewWindow' | i18n\"\n          class=\"bwi bwi-external-link bwi-sm bwi-fw\"\n        ></i>\n      </a>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <label for=\"defaultAutofill\">{{ \"defaultAutoFillOnPageLoad\" | i18n }}</label>\n        <select\n          id=\"defaultAutofill\"\n          name=\"DefaultAutofill\"\n          aria-describedby=\"defaultAutofillHelp\"\n          [(ngModel)]=\"autoFillOnPageLoadDefault\"\n          (change)=\"updateAutoFillOnPageLoadDefault()\"\n          [disabled]=\"!enableAutoFillOnPageLoad\"\n        >\n          <option *ngFor=\"let o of autoFillOnPageLoadOptions\" [ngValue]=\"o.value\">\n            {{ o.name }}\n          </option>\n        </select>\n      </div>\n    </div>\n    <div id=\"defaultAutofillHelp\" class=\"box-footer\">\n      {{ \"defaultAutoFillOnPageLoadDesc\" | i18n }}\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <label for=\"defaultUriMatch\">{{ \"defaultUriMatchDetection\" | i18n }}</label>\n        <select\n          id=\"defaultUriMatch\"\n          name=\"DefaultUriMatch\"\n          aria-describedby=\"defaultUriMatchHelp\"\n          [(ngModel)]=\"defaultUriMatch\"\n          (change)=\"saveDefaultUriMatch()\"\n        >\n          <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        </select>\n      </div>\n    </div>\n    <div id=\"defaultUriMatchHelp\" class=\"box-footer\">\n      {{ \"defaultUriMatchDetectionDesc\" | i18n }}\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-link box-content-row-flex\"\n        (click)=\"commandSettings()\"\n      >\n        <div class=\"row-main\">{{ \"autofillShortcut\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n    <div id=\"autofillKeyboardHelp\" class=\"box-footer\">\n      {{ autofillKeyboardHelperText }}\n    </div>\n  </div>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { UriMatchType } from \"@bitwarden/common/enums\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\n\n@Component({\n  selector: \"app-autofill\",\n  templateUrl: \"autofill.component.html\",\n})\nexport class AutofillComponent implements OnInit {\n  enableAutoFillOnPageLoad = false;\n  autoFillOnPageLoadDefault = false;\n  autoFillOnPageLoadOptions: any[];\n  defaultUriMatch = UriMatchType.Domain;\n  uriMatchOptions: any[];\n  autofillKeyboardHelperText: string;\n\n  constructor(\n    private stateService: StateService,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {\n    this.autoFillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n  }\n\n  async ngOnInit() {\n    this.enableAutoFillOnPageLoad = await this.stateService.getEnableAutoFillOnPageLoad();\n\n    this.autoFillOnPageLoadDefault =\n      (await this.stateService.getAutoFillOnPageLoadDefault()) ?? true;\n\n    const defaultUriMatch = await this.stateService.getDefaultUriMatch();\n    this.defaultUriMatch = defaultUriMatch == null ? UriMatchType.Domain : defaultUriMatch;\n\n    const command = await this.platformUtilsService.getAutofillKeyboardShortcut();\n    await this.setAutofillKeyboardHelperText(command);\n  }\n\n  async updateAutoFillOnPageLoad() {\n    await this.stateService.setEnableAutoFillOnPageLoad(this.enableAutoFillOnPageLoad);\n  }\n\n  async updateAutoFillOnPageLoadDefault() {\n    await this.stateService.setAutoFillOnPageLoadDefault(this.autoFillOnPageLoadDefault);\n  }\n\n  async saveDefaultUriMatch() {\n    await this.stateService.setDefaultUriMatch(this.defaultUriMatch);\n  }\n\n  private async setAutofillKeyboardHelperText(command: string) {\n    if (command) {\n      this.autofillKeyboardHelperText = this.i18nService.t(\"autofillShortcutText\", command);\n    } else {\n      this.autofillKeyboardHelperText = this.i18nService.t(\"autofillShortcutNotSet\");\n    }\n  }\n\n  async commandSettings() {\n    if (this.platformUtilsService.isChrome()) {\n      BrowserApi.createNewTab(\"chrome://extensions/shortcuts\");\n    } else if (this.platformUtilsService.isOpera()) {\n      BrowserApi.createNewTab(\"opera://extensions/shortcuts\");\n    } else if (this.platformUtilsService.isEdge()) {\n      BrowserApi.createNewTab(\"edge://extensions/shortcuts\");\n    } else if (this.platformUtilsService.isVivaldi()) {\n      BrowserApi.createNewTab(\"vivaldi://extensions/shortcuts\");\n    } else {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/keyboard-shortcuts\");\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/tabs/settings\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"excludedDomains\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\">{{ \"save\" | i18n }}</button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <ng-container *ngIf=\"excludedDomains\">\n          <div\n            class=\"box-content-row box-content-row-multi\"\n            appBoxRow\n            *ngFor=\"let domain of excludedDomains; let i = index; trackBy: trackByFunction\"\n          >\n            <button\n              type=\"button\"\n              appStopClick\n              (click)=\"removeUri(i)\"\n              appA11yTitle=\"{{ 'remove' | i18n }}\"\n            >\n              <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n            </button>\n            <div class=\"row-main\">\n              <label for=\"excludedDomain{{ i }}\">{{ \"uriPosition\" | i18n : i + 1 }}</label>\n              <input\n                id=\"excludedDomain{{ i }}\"\n                name=\"excludedDomain{{ i }}\"\n                type=\"text\"\n                [(ngModel)]=\"domain.uri\"\n                placeholder=\"{{ 'ex' | i18n }} https://google.com\"\n                inputmode=\"url\"\n                appInputVerbatim\n              />\n              <label for=\"currentUris{{ i }}\" class=\"sr-only\">\n                {{ \"currentUri\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                *ngIf=\"currentUris && currentUris.length\"\n                id=\"currentUris{{ i }}\"\n                name=\"currentUris{{ i }}\"\n                [(ngModel)]=\"domain.uri\"\n                [hidden]=\"!domain.showCurrentUris\"\n              >\n                <option [ngValue]=\"null\">-- {{ \"select\" | i18n }} --</option>\n                <option *ngFor=\"let u of currentUris\" [ngValue]=\"u\">{{ u }}</option>\n              </select>\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                *ngIf=\"currentUris && currentUris.length\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleCurrentUris' | i18n }}\"\n                (click)=\"toggleUriInput(domain)\"\n                [attr.aria-pressed]=\"domain.showCurrentUris === true\"\n              >\n                <i aria-hidden=\"true\" class=\"bwi bwi-lg bwi-list\"></i>\n              </button>\n            </div>\n          </div>\n        </ng-container>\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"addUri()\"\n          class=\"box-content-row box-content-row-newmulti single-line\"\n        >\n          <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i> {{ \"newUri\" | i18n }}\n        </button>\n      </div>\n      <div class=\"box-footer\">\n        {{ \"excludedDomainsDesc\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\n\ninterface ExcludedDomain {\n  uri: string;\n  showCurrentUris: boolean;\n}\n\nconst BroadcasterSubscriptionId = \"excludedDomains\";\n\n@Component({\n  selector: \"app-excluded-domains\",\n  templateUrl: \"excluded-domains.component.html\",\n})\nexport class ExcludedDomainsComponent implements OnInit, OnDestroy {\n  excludedDomains: ExcludedDomain[] = [];\n  existingExcludedDomains: ExcludedDomain[] = [];\n  currentUris: string[];\n  loadCurrentUrisTimeout: number;\n\n  constructor(\n    private stateService: StateService,\n    private i18nService: I18nService,\n    private router: Router,\n    private broadcasterService: BroadcasterService,\n    private ngZone: NgZone,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async ngOnInit() {\n    const savedDomains = await this.stateService.getNeverDomains();\n    if (savedDomains) {\n      for (const uri of Object.keys(savedDomains)) {\n        this.excludedDomains.push({ uri: uri, showCurrentUris: false });\n        this.existingExcludedDomains.push({ uri: uri, showCurrentUris: false });\n      }\n    }\n\n    await this.loadCurrentUris();\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"tabChanged\":\n          case \"windowChanged\":\n            if (this.loadCurrentUrisTimeout != null) {\n              window.clearTimeout(this.loadCurrentUrisTimeout);\n            }\n            this.loadCurrentUrisTimeout = window.setTimeout(\n              async () => await this.loadCurrentUris(),\n              500\n            );\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n  }\n\n  async addUri() {\n    this.excludedDomains.push({ uri: \"\", showCurrentUris: false });\n  }\n\n  async removeUri(i: number) {\n    this.excludedDomains.splice(i, 1);\n  }\n\n  async submit() {\n    const savedDomains: { [name: string]: null } = {};\n    const newExcludedDomains = this.getNewlyAddedDomains(this.excludedDomains);\n    for (const domain of this.excludedDomains) {\n      const resp = newExcludedDomains.filter((e) => e.uri === domain.uri);\n      if (resp.length === 0) {\n        savedDomains[domain.uri] = null;\n      } else {\n        if (domain.uri && domain.uri !== \"\") {\n          const validDomain = Utils.getHostname(domain.uri);\n          if (!validDomain) {\n            this.platformUtilsService.showToast(\n              \"error\",\n              null,\n              this.i18nService.t(\"excludedDomainsInvalidDomain\", domain.uri)\n            );\n            return;\n          }\n          savedDomains[validDomain] = null;\n        }\n      }\n    }\n\n    await this.stateService.setNeverDomains(savedDomains);\n    this.router.navigate([\"/tabs/settings\"]);\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  getNewlyAddedDomains(domain: ExcludedDomain[]): ExcludedDomain[] {\n    const result = this.excludedDomains.filter(\n      (newDomain) =>\n        !this.existingExcludedDomains.some((oldDomain) => newDomain.uri === oldDomain.uri)\n    );\n    return result;\n  }\n\n  toggleUriInput(domain: ExcludedDomain) {\n    domain.showCurrentUris = !domain.showCurrentUris;\n  }\n\n  async loadCurrentUris() {\n    const tabs = await BrowserApi.tabsQuery({ windowType: \"normal\" });\n    if (tabs) {\n      const uriSet = new Set(tabs.map((tab) => Utils.getHostname(tab.url)));\n      uriSet.delete(null);\n      this.currentUris = Array.from(uriSet);\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"folders\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addFolder()\" appA11yTitle=\"{{ 'addFolder' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"(folders$ | async)?.length\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        appStopClick\n        (click)=\"folderSelected(f)\"\n        class=\"box-content-row padded\"\n        *ngFor=\"let f of folders$ | async\"\n      >\n        {{ f.name }}\n      </button>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!(folders$ | async)?.length\">\n    <p>{{ \"noFolders\" | i18n }}</p>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { map, Observable } from \"rxjs\";\n\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\n@Component({\n  selector: \"app-folders\",\n  templateUrl: \"folders.component.html\",\n})\nexport class FoldersComponent {\n  folders$: Observable<FolderView[]>;\n\n  constructor(private folderService: FolderService, private router: Router) {\n    this.folders$ = this.folderService.folderViews$.pipe(\n      map((folders) => {\n        if (folders.length > 0) {\n          folders = folders.slice(0, folders.length - 1);\n        }\n\n        return folders;\n      })\n    );\n  }\n\n  folderSelected(folder: FolderView) {\n    this.router.navigate([\"/edit-folder\"], { queryParams: { folderId: folder.id } });\n  }\n\n  addFolder() {\n    this.router.navigate([\"/add-folder\"]);\n  }\n}\n","import { Component } from \"@angular/core\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\n\n@Component({\n  selector: \"app-help-and-feedback\",\n  templateUrl: \"help-and-feedback.component.html\",\n})\nexport class HelpAndFeedbackComponent {\n  launchHelp() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/\");\n  }\n  launchContactForm() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/contact/\");\n  }\n\n  launchForums() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/getinvolved/\");\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"helpFeedback\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list\">\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"launchHelp()\"\n      >\n        <div class=\"icon\">\n          <i class=\"bwi bwi-shield bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"row-main\">{{ \"helpCenter\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"launchForums()\"\n      >\n        <div class=\"icon\">\n          <i class=\"bwi bwi-discourse bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"row-main\">{{ \"communityForums\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"launchContactForm()\"\n      >\n        <div class=\"icon\">\n          <i class=\"bwi bwi-shield bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"row-main\">{{ \"contactSupport\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n</main>\n","import { Observable } from \"rxjs\";\n\nimport { ThemeType } from \"@bitwarden/common/enums\";\n\nimport { Theme } from \"./theme\";\n\nexport abstract class AbstractThemingService {\n  theme$: Observable<Theme>;\n  monitorThemeChanges: () => Promise<void>;\n  updateSystemTheme: (systemTheme: ThemeType) => void;\n  updateConfiguredTheme: (theme: ThemeType) => Promise<void>;\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"options\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <h2>\n      <button\n        type=\"button\"\n        class=\"box-header-expandable\"\n        (click)=\"showGeneral = !showGeneral\"\n        [attr.aria-expanded]=\"showGeneral\"\n      >\n        <i *ngIf=\"!showGeneral\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n        <i *ngIf=\"showGeneral\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n        {{ \"general\" | i18n }}\n      </button>\n    </h2>\n  </div>\n  <ng-container *ngIf=\"showGeneral\">\n    <div class=\"box\" *ngIf=\"showClearClipboard\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"clearClipboard\">{{ \"clearClipboard\" | i18n }}</label>\n          <select\n            id=\"clearClipboard\"\n            name=\"ClearClipboard\"\n            aria-describedby=\"clearClipboardHelp\"\n            [(ngModel)]=\"clearClipboard\"\n            (change)=\"saveClearClipboard()\"\n          >\n            <option *ngFor=\"let o of clearClipboardOptions\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div id=\"clearClipboardHelp\" class=\"box-footer\">{{ \"clearClipboardDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"totp\">{{ \"enableAutoTotpCopy\" | i18n }}</label>\n          <input\n            id=\"totp\"\n            type=\"checkbox\"\n            aria-describedby=\"totpHelp\"\n            (change)=\"updateAutoTotpCopy()\"\n            [(ngModel)]=\"enableAutoTotpCopy\"\n          />\n        </div>\n      </div>\n      <div id=\"totpHelp\" class=\"box-footer\">{{ \"disableAutoTotpCopyDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"addlogin-notification-bar\">{{ \"enableAddLoginNotification\" | i18n }}</label>\n          <input\n            id=\"addlogin-notification-bar\"\n            type=\"checkbox\"\n            aria-describedby=\"addlogin-notification-barHelp\"\n            (change)=\"updateAddLoginNotification()\"\n            [(ngModel)]=\"enableAddLoginNotification\"\n          />\n        </div>\n      </div>\n      <div id=\"addlogin-notification-barHelp\" class=\"box-footer\">\n        {{ \"addLoginNotificationDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"changedpass-notification-bar\">{{\n            \"enableChangedPasswordNotification\" | i18n\n          }}</label>\n          <input\n            id=\"changedpass-notification-bar\"\n            type=\"checkbox\"\n            aria-describedby=\"changedpass-notification-barHelp\"\n            (change)=\"updateChangedPasswordNotification()\"\n            [(ngModel)]=\"enableChangedPasswordNotification\"\n          />\n        </div>\n      </div>\n      <div id=\"changedpass-notification-barHelp\" class=\"box-footer\">\n        {{ \"changedPasswordNotificationDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"context-menu\">{{ \"enableContextMenuItem\" | i18n }}</label>\n          <input\n            id=\"context-menu\"\n            type=\"checkbox\"\n            aria-describedby=\"context-menuHelp\"\n            (change)=\"updateContextMenuItem()\"\n            [(ngModel)]=\"enableContextMenuItem\"\n          />\n        </div>\n      </div>\n      <div id=\"context-menuHelp\" class=\"box-footer\">{{ \"contextMenuItemDesc\" | i18n }}</div>\n    </div>\n  </ng-container>\n  <div class=\"box box-section-divider\">\n    <h2>\n      <button\n        type=\"button\"\n        class=\"box-header-expandable\"\n        (click)=\"showDisplay = !showDisplay\"\n        [attr.aria-expanded]=\"showDisplay\"\n      >\n        <i *ngIf=\"!showDisplay\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n        <i *ngIf=\"showDisplay\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n        {{ \"display\" | i18n }}\n      </button>\n    </h2>\n  </div>\n  <ng-container *ngIf=\"showDisplay\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"showCardsCurrentTab\">{{ \"showCardsCurrentTab\" | i18n }}</label>\n          <input\n            id=\"showCardsCurrentTab\"\n            type=\"checkbox\"\n            aria-describedby=\"showCardsCurrentTabHelp\"\n            (change)=\"updateShowCardsCurrentTab()\"\n            [(ngModel)]=\"showCardsCurrentTab\"\n          />\n        </div>\n      </div>\n      <div id=\"showCardsCurrentTabHelp\" class=\"box-footer\">\n        {{ \"showCardsCurrentTabDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"showIdentitiesCurrentTab\">{{ \"showIdentitiesCurrentTab\" | i18n }}</label>\n          <input\n            id=\"showIdentitiesCurrentTab\"\n            type=\"checkbox\"\n            aria-describedby=\"showIdentitiesCurrentTabHelp\"\n            (change)=\"updateShowIdentitiesCurrentTab()\"\n            [(ngModel)]=\"showIdentitiesCurrentTab\"\n          />\n        </div>\n      </div>\n      <div id=\"showIdentitiesCurrentTabHelp\" class=\"box-footer\">\n        {{ \"showIdentitiesCurrentTabDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"favicon\">{{ \"enableFavicon\" | i18n }}</label>\n          <input\n            id=\"favicon\"\n            type=\"checkbox\"\n            aria-describedby=\"faviconHelp\"\n            (change)=\"updateFavicon()\"\n            [(ngModel)]=\"enableFavicon\"\n          />\n        </div>\n      </div>\n      <div id=\"faviconHelp\" class=\"box-footer\">{{ \"faviconDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"badge\">{{ \"enableBadgeCounter\" | i18n }}</label>\n          <input\n            id=\"badge\"\n            type=\"checkbox\"\n            aria-describedby=\"badgeHelp\"\n            (change)=\"updateBadgeCounter()\"\n            [(ngModel)]=\"enableBadgeCounter\"\n          />\n        </div>\n      </div>\n      <div id=\"badgeHelp\" class=\"box-footer\">{{ \"badgeCounterDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"theme\">{{ \"theme\" | i18n }}</label>\n          <select\n            id=\"theme\"\n            name=\"Theme\"\n            aria-describedby=\"themeHelp\"\n            [(ngModel)]=\"theme\"\n            (change)=\"saveTheme()\"\n          >\n            <option *ngFor=\"let o of themeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n      </div>\n      <div id=\"themeHelp\" class=\"box-footer\">{{ \"themeDesc\" | i18n }}</div>\n    </div>\n  </ng-container>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { ThemeType, UriMatchType } from \"@bitwarden/common/enums\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\n@Component({\n  selector: \"app-options\",\n  templateUrl: \"options.component.html\",\n})\nexport class OptionsComponent implements OnInit {\n  enableFavicon = false;\n  enableBadgeCounter = false;\n  enableAutoFillOnPageLoad = false;\n  autoFillOnPageLoadDefault = false;\n  autoFillOnPageLoadOptions: any[];\n  enableAutoTotpCopy = false; // TODO: Does it matter if this is set to false or true?\n  enableContextMenuItem = false;\n  enableAddLoginNotification = false;\n  enableChangedPasswordNotification = false;\n  showCardsCurrentTab = false;\n  showIdentitiesCurrentTab = false;\n  showClearClipboard = true;\n  theme: ThemeType;\n  themeOptions: any[];\n  defaultUriMatch = UriMatchType.Domain;\n  uriMatchOptions: any[];\n  clearClipboard: number;\n  clearClipboardOptions: any[];\n  showGeneral = true;\n  showAutofill = true;\n  showDisplay = true;\n\n  constructor(\n    private messagingService: MessagingService,\n    private stateService: StateService,\n    private totpService: TotpService,\n    i18nService: I18nService,\n    private themingService: AbstractThemingService,\n    private settingsService: SettingsService\n  ) {\n    this.themeOptions = [\n      { name: i18nService.t(\"default\"), value: ThemeType.System },\n      { name: i18nService.t(\"light\"), value: ThemeType.Light },\n      { name: i18nService.t(\"dark\"), value: ThemeType.Dark },\n      { name: \"Nord\", value: ThemeType.Nord },\n      { name: i18nService.t(\"solarizedDark\"), value: ThemeType.SolarizedDark },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n    this.clearClipboardOptions = [\n      { name: i18nService.t(\"never\"), value: null },\n      { name: i18nService.t(\"tenSeconds\"), value: 10 },\n      { name: i18nService.t(\"twentySeconds\"), value: 20 },\n      { name: i18nService.t(\"thirtySeconds\"), value: 30 },\n      { name: i18nService.t(\"oneMinute\"), value: 60 },\n      { name: i18nService.t(\"twoMinutes\"), value: 120 },\n      { name: i18nService.t(\"fiveMinutes\"), value: 300 },\n    ];\n    this.autoFillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n  }\n\n  async ngOnInit() {\n    this.enableAutoFillOnPageLoad = await this.stateService.getEnableAutoFillOnPageLoad();\n\n    this.autoFillOnPageLoadDefault =\n      (await this.stateService.getAutoFillOnPageLoadDefault()) ?? true;\n\n    this.enableAddLoginNotification = !(await this.stateService.getDisableAddLoginNotification());\n\n    this.enableChangedPasswordNotification =\n      !(await this.stateService.getDisableChangedPasswordNotification());\n\n    this.enableContextMenuItem = !(await this.stateService.getDisableContextMenuItem());\n\n    this.showCardsCurrentTab = !(await this.stateService.getDontShowCardsCurrentTab());\n    this.showIdentitiesCurrentTab = !(await this.stateService.getDontShowIdentitiesCurrentTab());\n\n    this.enableAutoTotpCopy = !(await this.stateService.getDisableAutoTotpCopy());\n\n    this.enableFavicon = !this.settingsService.getDisableFavicon();\n\n    this.enableBadgeCounter = !(await this.stateService.getDisableBadgeCounter());\n\n    this.theme = await this.stateService.getTheme();\n\n    const defaultUriMatch = await this.stateService.getDefaultUriMatch();\n    this.defaultUriMatch = defaultUriMatch == null ? UriMatchType.Domain : defaultUriMatch;\n\n    this.clearClipboard = await this.stateService.getClearClipboard();\n  }\n\n  async updateAddLoginNotification() {\n    await this.stateService.setDisableAddLoginNotification(!this.enableAddLoginNotification);\n  }\n\n  async updateChangedPasswordNotification() {\n    await this.stateService.setDisableChangedPasswordNotification(\n      !this.enableChangedPasswordNotification\n    );\n  }\n\n  async updateContextMenuItem() {\n    await this.stateService.setDisableContextMenuItem(!this.enableContextMenuItem);\n    this.messagingService.send(\"bgUpdateContextMenu\");\n  }\n\n  async updateAutoTotpCopy() {\n    await this.stateService.setDisableAutoTotpCopy(!this.enableAutoTotpCopy);\n  }\n\n  async updateAutoFillOnPageLoad() {\n    await this.stateService.setEnableAutoFillOnPageLoad(this.enableAutoFillOnPageLoad);\n  }\n\n  async updateAutoFillOnPageLoadDefault() {\n    await this.stateService.setAutoFillOnPageLoadDefault(this.autoFillOnPageLoadDefault);\n  }\n\n  async updateFavicon() {\n    await this.settingsService.setDisableFavicon(!this.enableFavicon);\n  }\n\n  async updateBadgeCounter() {\n    await this.stateService.setDisableBadgeCounter(!this.enableBadgeCounter);\n    this.messagingService.send(\"bgUpdateContextMenu\");\n  }\n\n  async updateShowCardsCurrentTab() {\n    await this.stateService.setDontShowCardsCurrentTab(!this.showCardsCurrentTab);\n  }\n\n  async updateShowIdentitiesCurrentTab() {\n    await this.stateService.setDontShowIdentitiesCurrentTab(!this.showIdentitiesCurrentTab);\n  }\n\n  async saveTheme() {\n    await this.themingService.updateConfiguredTheme(this.theme);\n  }\n\n  async saveDefaultUriMatch() {\n    await this.stateService.setDefaultUriMatch(this.defaultUriMatch);\n  }\n\n  async saveClearClipboard() {\n    await this.stateService.setClearClipboard(this.clearClipboard);\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Directive()\nexport class PremiumComponent implements OnInit {\n  isPremium = false;\n  price = 10;\n  refreshPromise: Promise<any>;\n  cloudWebVaultUrl: string;\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    private logService: LogService,\n    protected stateService: StateService,\n    protected dialogService: DialogService,\n    private environmentService: EnvironmentService\n  ) {\n    this.cloudWebVaultUrl = this.environmentService.getCloudWebVaultUrl();\n  }\n\n  async ngOnInit() {\n    this.isPremium = await this.stateService.getCanAccessPremium();\n  }\n\n  async refresh() {\n    try {\n      this.refreshPromise = this.apiService.refreshIdentityToken();\n      await this.refreshPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"refreshComplete\"));\n      this.isPremium = await this.stateService.getCanAccessPremium();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async purchase() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"premiumPurchase\" },\n      content: { key: \"premiumPurchaseAlert\" },\n      type: \"info\",\n    });\n\n    if (confirmed) {\n      this.platformUtilsService.launchUri(`${this.cloudWebVaultUrl}/#/?premium=purchase`);\n    }\n  }\n\n  async manage() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"premiumManage\" },\n      content: { key: \"premiumManageAlert\" },\n      type: \"info\",\n    });\n\n    if (confirmed) {\n      this.platformUtilsService.launchUri(`${this.cloudWebVaultUrl}/#/?premium=manage`);\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"goBack()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"premiumMembership\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"content\">\n    <ng-container *ngIf=\"!isPremium\">\n      <p class=\"text-center lead\">{{ \"premiumNotCurrentMember\" | i18n }}</p>\n      <p>{{ \"premiumSignUpAndGet\" | i18n }}</p>\n      <ul class=\"bwi-ul\">\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpStorage\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"premiumSignUpTwoStepOptions\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpReports\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpTotp\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpSupport\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpFuture\" | i18n }}\n        </li>\n      </ul>\n      <p class=\"text-center lead\">{{ priceString }}</p>\n      <button type=\"button\" class=\"btn primary block\" (click)=\"purchase()\">\n        <b>{{ \"premiumPurchase\" | i18n }}</b>\n      </button>\n      <button\n        #refreshBtn\n        type=\"button\"\n        (click)=\"refresh()\"\n        [disabled]=\"$any(refreshBtn).loading\"\n        [appApiAction]=\"refreshPromise\"\n        class=\"btn link block\"\n      >\n        <span [hidden]=\"$any(refreshBtn).loading\">{{ \"premiumRefresh\" | i18n }}</span>\n        <i\n          class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n          [hidden]=\"!$any(refreshBtn).loading\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </ng-container>\n    <ng-container *ngIf=\"isPremium\">\n      <p class=\"text-center lead\">{{ \"premiumCurrentMember\" | i18n }}</p>\n      <p class=\"text-center\">{{ \"premiumCurrentMemberThanks\" | i18n }}</p>\n      <button type=\"button\" class=\"btn block primary\" (click)=\"manage()\">\n        <b>{{ \"premiumManage\" | i18n }}</b>\n      </button>\n    </ng-container>\n  </div>\n</main>\n","import { CurrencyPipe, Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\n\nimport { PremiumComponent as BasePremiumComponent } from \"@bitwarden/angular/vault/components/premium.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-premium\",\n  templateUrl: \"premium.component.html\",\n})\nexport class PremiumComponent extends BasePremiumComponent {\n  priceString: string;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    stateService: StateService,\n    logService: LogService,\n    private location: Location,\n    private currencyPipe: CurrencyPipe,\n    dialogService: DialogService,\n    environmentService: EnvironmentService\n  ) {\n    super(\n      i18nService,\n      platformUtilsService,\n      apiService,\n      logService,\n      stateService,\n      dialogService,\n      environmentService\n    );\n\n    // Support old price string. Can be removed in future once all translations are properly updated.\n    const thePrice = this.currencyPipe.transform(this.price, \"$\");\n    // Safari extension crashes due to $1 appearing in the price string ($10.00). Escape the $ to fix.\n    const formattedPrice = this.platformUtilsService.isSafari()\n      ? thePrice.replace(\"$\", \"$$$\")\n      : thePrice;\n    this.priceString = i18nService.t(\"premiumPrice\", formattedPrice);\n    if (this.priceString.indexOf(\"%price%\") > -1) {\n      this.priceString = this.priceString.replace(\"%price%\", thePrice);\n    }\n  }\n\n  goBack() {\n    this.location.back();\n  }\n}\n","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\n\nimport { ButtonComponent } from \"./button.component\";\n\n@NgModule({\n  imports: [CommonModule],\n  exports: [ButtonComponent],\n  declarations: [ButtonComponent],\n})\nexport class ButtonModule {}\n","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\n\nimport { I18nPipe } from \"./i18n.pipe\";\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [I18nPipe],\n  exports: [CommonModule, I18nPipe],\n})\nexport class SharedModule {}\n","import { NgModule } from \"@angular/core\";\n\nimport { SharedModule } from \"../shared\";\n\nimport { BitActionDirective } from \"./bit-action.directive\";\nimport { BitSubmitDirective } from \"./bit-submit.directive\";\nimport { BitFormButtonDirective } from \"./form-button.directive\";\n\n@NgModule({\n  imports: [SharedModule],\n  declarations: [BitActionDirective, BitFormButtonDirective, BitSubmitDirective],\n  exports: [BitActionDirective, BitFormButtonDirective, BitSubmitDirective],\n})\nexport class AsyncActionsModule {}\n","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\n\nimport { BitIconButtonComponent } from \"./icon-button.component\";\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [BitIconButtonComponent],\n  exports: [BitIconButtonComponent],\n})\nexport class IconButtonModule {}\n","import { DialogModule as CdkDialogModule } from \"@angular/cdk/dialog\";\nimport { NgModule } from \"@angular/core\";\nimport { ReactiveFormsModule } from \"@angular/forms\";\n\nimport { AsyncActionsModule } from \"../async-actions\";\nimport { ButtonModule } from \"../button\";\nimport { IconButtonModule } from \"../icon-button\";\nimport { SharedModule } from \"../shared\";\n\nimport { DialogComponent } from \"./dialog/dialog.component\";\nimport { DialogService } from \"./dialog.service\";\nimport { DialogCloseDirective } from \"./directives/dialog-close.directive\";\nimport { DialogTitleContainerDirective } from \"./directives/dialog-title-container.directive\";\nimport { SimpleConfigurableDialogComponent } from \"./simple-dialog/simple-configurable-dialog/simple-configurable-dialog.component\";\nimport { IconDirective, SimpleDialogComponent } from \"./simple-dialog/simple-dialog.component\";\n\n@NgModule({\n  imports: [\n    SharedModule,\n    AsyncActionsModule,\n    ButtonModule,\n    CdkDialogModule,\n    IconButtonModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [\n    DialogCloseDirective,\n    DialogTitleContainerDirective,\n    DialogComponent,\n    SimpleDialogComponent,\n    SimpleConfigurableDialogComponent,\n    IconDirective,\n  ],\n  exports: [\n    CdkDialogModule,\n    DialogComponent,\n    SimpleDialogComponent,\n    DialogCloseDirective,\n    IconDirective,\n  ],\n  providers: [DialogService],\n})\nexport class DialogModule {}\n","import { DialogRef } from \"@angular/cdk/dialog\";\nimport { Directive, HostListener, Input, Optional } from \"@angular/core\";\n\n@Directive({\n  selector: \"[bitDialogClose]\",\n})\nexport class DialogCloseDirective {\n  @Input(\"bitDialogClose\") dialogResult: any;\n\n  constructor(@Optional() public dialogRef: DialogRef) {}\n\n  @HostListener(\"click\") close(): void {\n    this.dialogRef.close(this.dialogResult);\n  }\n}\n","import { DIALOG_DATA } from \"@angular/cdk/dialog\";\nimport { Component, Inject } from \"@angular/core\";\n\nimport { JslibModule } from \"@bitwarden/angular/jslib.module\";\nimport { ButtonModule, DialogModule, DialogService } from \"@bitwarden/components\";\n\nexport type FingerprintDialogData = {\n  fingerprint: string[];\n};\n\n@Component({\n  templateUrl: \"fingerprint-dialog.component.html\",\n  standalone: true,\n  imports: [JslibModule, ButtonModule, DialogModule],\n})\nexport class FingerprintDialogComponent {\n  constructor(@Inject(DIALOG_DATA) protected data: FingerprintDialogData) {}\n\n  static open(dialogService: DialogService, data: FingerprintDialogData) {\n    return dialogService.open(FingerprintDialogComponent, { data });\n  }\n}\n","<bit-simple-dialog>\n  <i bitDialogIcon class=\"bwi bwi-info-circle tw-text-3xl\" aria-hidden=\"true\"></i>\n  <span bitDialogTitle>{{ \"yourAccountsFingerprint\" | i18n }}:</span>\n  <span bitDialogContent>\n    <strong>{{ data.fingerprint.join(\"-\") }}</strong>\n  </span>\n  <ng-container bitDialogFooter>\n    <a\n      bitButton\n      href=\"https://bitwarden.com/help/fingerprint-phrase/\"\n      target=\"_blank\"\n      rel=\"noopener\"\n      buttonType=\"primary\"\n      bitDialogClose\n    >\n      {{ \"learnMore\" | i18n }}\n      <i class=\"bwi bwi-external-link bwi-fw\" aria-hidden=\"true\"></i>\n    </a>\n    <button bitButton type=\"button\" buttonType=\"secondary\" bitDialogClose>\n      {{ \"close\" | i18n }}\n    </button>\n  </ng-container>\n</bit-simple-dialog>\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { KeySuffixOptions } from \"@bitwarden/common/enums/key-suffix-options.enum\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { ModalRef } from \"./modal/modal.ref\";\n\n@Directive()\nexport class SetPinComponent implements OnInit {\n  pin = \"\";\n  showPin = false;\n  masterPassOnRestart = true;\n  showMasterPassOnRestart = true;\n\n  constructor(\n    private modalRef: ModalRef,\n    private cryptoService: CryptoService,\n    private userVerificationService: UserVerificationService,\n    private stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.showMasterPassOnRestart = this.masterPassOnRestart =\n      await this.userVerificationService.hasMasterPassword();\n  }\n\n  toggleVisibility() {\n    this.showPin = !this.showPin;\n  }\n\n  async submit() {\n    if (Utils.isNullOrWhitespace(this.pin)) {\n      this.modalRef.close(false);\n    }\n\n    const pinKey = await this.cryptoService.makePinKey(\n      this.pin,\n      await this.stateService.getEmail(),\n      await this.stateService.getKdfType(),\n      await this.stateService.getKdfConfig()\n    );\n    const userKey = await this.cryptoService.getUserKey();\n    const pinProtectedKey = await this.cryptoService.encrypt(userKey.key, pinKey);\n    const encPin = await this.cryptoService.encrypt(this.pin, userKey);\n    await this.stateService.setProtectedPin(encPin.encryptedString);\n    if (this.masterPassOnRestart) {\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(pinProtectedKey);\n    } else {\n      await this.stateService.setPinKeyEncryptedUserKey(pinProtectedKey);\n    }\n    await this.cryptoService.clearDeprecatedKeys(KeySuffixOptions.Pin);\n\n    this.modalRef.close(true);\n  }\n}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\">\n      <div class=\"modal-body\">\n        <div>\n          {{ \"setYourPinCode\" | i18n }}\n        </div>\n        <div class=\"box\">\n          <div class=\"box-content\">\n            <div class=\"box-content-row box-content-row-flex no-hover no-bg\" appBoxRow>\n              <div class=\"row-main\">\n                <label for=\"pin\">{{ \"pin\" | i18n }}</label>\n                <input\n                  id=\"pin\"\n                  type=\"{{ showPin ? 'text' : 'password' }}\"\n                  name=\"Pin\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"pin\"\n                  required\n                  appInputVerbatim\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"toggleVisibility()\"\n                  [attr.aria-pressed]=\"showPin\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPin, 'bwi-eye-slash': showPin }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"checkbox\" *ngIf=\"showMasterPassOnRestart\">\n          <label for=\"masterPasswordOnRestart\">\n            <input\n              type=\"checkbox\"\n              id=\"masterPasswordOnRestart\"\n              name=\"MasterPasswordOnRestart\"\n              [(ngModel)]=\"masterPassOnRestart\"\n            />\n            <span>{{ \"lockWithMasterPassOnRestart\" | i18n }}</span>\n          </label>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\">\n          <span>{{ \"ok\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { SetPinComponent as BaseSetPinComponent } from \"@bitwarden/angular/components/set-pin.component\";\n\n@Component({\n  templateUrl: \"set-pin.component.html\",\n})\nexport class SetPinComponent extends BaseSetPinComponent {}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-body\">\n        <p class=\"text-center\">\n          <i class=\"bwi bwi-shield bwi-3x\" aria-hidden=\"true\"></i>\n        </p>\n        <p class=\"text-center\">\n          <b>Bitwarden</b>\n        </p>\n        <p class=\"text-center\">&copy; Bitwarden Inc. 2015-{{ year }}</p>\n        <p class=\"text-center\">{{ \"version\" | i18n }}: {{ version }}</p>\n        <ng-container *ngIf=\"serverConfig$ | async as serverConfig\">\n          <p class=\"text-center\" *ngIf=\"isCloud\">\n            {{ \"serverVersion\" | i18n }}: {{ this.serverConfig?.version }}\n            <span *ngIf=\"!serverConfig.isValid()\">\n              ({{ \"lastSeenOn\" | i18n : (serverConfig.utcDate | date : \"mediumDate\") }})\n            </span>\n          </p>\n\n          <ng-container *ngIf=\"!isCloud\">\n            <ng-container *ngIf=\"serverConfig.server\">\n              <p class=\"text-center\">\n                {{ \"serverVersion\" | i18n }} <small>({{ \"thirdParty\" | i18n }})</small>:\n                {{ this.serverConfig?.version }}\n                <span *ngIf=\"!serverConfig.isValid()\">\n                  ({{ \"lastSeenOn\" | i18n : (serverConfig.utcDate | date : \"mediumDate\") }})\n                </span>\n              </p>\n              <div class=\"text-center\">\n                <small>{{ \"thirdPartyServerMessage\" | i18n : serverConfig.server?.name }}</small>\n              </div>\n            </ng-container>\n\n            <p class=\"text-center\" *ngIf=\"!serverConfig.server\">\n              {{ \"serverVersion\" | i18n }} <small>({{ \"selfHostedServer\" | i18n }})</small>:\n              {{ this.serverConfig?.version }}\n              <span *ngIf=\"!serverConfig.isValid()\">\n                ({{ \"lastSeenOn\" | i18n : (serverConfig.utcDate | date : \"mediumDate\") }})\n              </span>\n            </p>\n          </ng-container>\n        </ng-container>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"close\" | i18n }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\n\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"@bitwarden/common/platform/abstractions/config/server-config\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\n\n@Component({\n  selector: \"app-about\",\n  templateUrl: \"about.component.html\",\n})\nexport class AboutComponent {\n  serverConfig$: Observable<ServerConfig>;\n\n  year = new Date().getFullYear();\n  version = BrowserApi.getApplicationVersion();\n  isCloud: boolean;\n\n  constructor(configService: ConfigServiceAbstraction, environmentService: EnvironmentService) {\n    this.serverConfig$ = configService.serverConfig$;\n    this.isCloud = environmentService.isCloud();\n  }\n}\n","import { Component } from \"@angular/core\";\n\nimport { JslibModule } from \"@bitwarden/angular/jslib.module\";\nimport { ButtonModule, DialogModule, DialogService } from \"@bitwarden/components\";\n\n@Component({\n  templateUrl: \"await-desktop-dialog.component.html\",\n  standalone: true,\n  imports: [JslibModule, ButtonModule, DialogModule],\n})\nexport class AwaitDesktopDialogComponent {\n  static open(dialogService: DialogService) {\n    return dialogService.open<boolean>(AwaitDesktopDialogComponent, {\n      disableClose: true,\n    });\n  }\n}\n","<bit-simple-dialog>\n  <span bitDialogTitle>{{ \"awaitDesktop\" | i18n }}</span>\n  <span bitDialogContent>\n    {{ \"awaitDesktopDesc\" | i18n }}\n  </span>\n  <ng-container bitDialogFooter>\n    <button bitButton type=\"button\" buttonType=\"secondary\" [bitDialogClose]=\"true\">\n      {{ \"close\" | i18n }}\n    </button>\n  </ng-container>\n</bit-simple-dialog>\n","import { Directive, Input, OnChanges, OnDestroy, OnInit } from \"@angular/core\";\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  FormBuilder,\n  ValidationErrors,\n  Validator,\n} from \"@angular/forms\";\nimport { filter, map, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Policy } from \"@bitwarden/common/admin-console/models/domain/policy\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\ninterface VaultTimeoutFormValue {\n  vaultTimeout: number | null;\n  custom: {\n    hours: number | null;\n    minutes: number | null;\n  };\n}\n\n@Directive()\nexport class VaultTimeoutInputComponent\n  implements ControlValueAccessor, Validator, OnInit, OnDestroy, OnChanges\n{\n  get showCustom() {\n    return this.form.get(\"vaultTimeout\").value === VaultTimeoutInputComponent.CUSTOM_VALUE;\n  }\n\n  get exceedsMinimumTimout(): boolean {\n    return (\n      !this.showCustom || this.customTimeInMinutes() > VaultTimeoutInputComponent.MIN_CUSTOM_MINUTES\n    );\n  }\n\n  static CUSTOM_VALUE = -100;\n  static MIN_CUSTOM_MINUTES = 0;\n\n  form = this.formBuilder.group({\n    vaultTimeout: [null],\n    custom: this.formBuilder.group({\n      hours: [null],\n      minutes: [null],\n    }),\n  });\n\n  @Input() vaultTimeoutOptions: { name: string; value: number }[];\n  vaultTimeoutPolicy: Policy;\n  vaultTimeoutPolicyHours: number;\n  vaultTimeoutPolicyMinutes: number;\n\n  protected canLockVault$: Observable<boolean>;\n\n  private onChange: (vaultTimeout: number) => void;\n  private validatorChange: () => void;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private policyService: PolicyService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .get$(PolicyType.MaximumVaultTimeout)\n      .pipe(\n        filter((policy) => policy != null),\n        takeUntil(this.destroy$)\n      )\n      .subscribe((policy) => {\n        this.vaultTimeoutPolicy = policy;\n        this.applyVaultTimeoutPolicy();\n      });\n\n    this.form.valueChanges\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((value: VaultTimeoutFormValue) => {\n        if (this.onChange) {\n          this.onChange(this.getVaultTimeout(value));\n        }\n      });\n\n    // Assign the current value to the custom fields\n    // so that if the user goes from a numeric value to custom\n    // we can initialize the custom fields with the current value\n    // ex: user picks 5 min, goes to custom, we want to show 0 hr, 5 min in the custom fields\n    this.form.controls.vaultTimeout.valueChanges\n      .pipe(\n        filter((value) => value !== VaultTimeoutInputComponent.CUSTOM_VALUE),\n        takeUntil(this.destroy$)\n      )\n      .subscribe((value) => {\n        const current = Math.max(value, 0);\n\n        // This cannot emit an event b/c it would cause form.valueChanges to fire again\n        // and we are already handling that above so just silently update\n        // custom fields when vaultTimeout changes to a non-custom value\n        this.form.patchValue(\n          {\n            custom: {\n              hours: Math.floor(current / 60),\n              minutes: current % 60,\n            },\n          },\n          { emitEvent: false }\n        );\n      });\n\n    this.canLockVault$ = this.vaultTimeoutSettingsService\n      .availableVaultTimeoutActions$()\n      .pipe(map((actions) => actions.includes(VaultTimeoutAction.Lock)));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  ngOnChanges() {\n    if (\n      !this.vaultTimeoutOptions.find((p) => p.value === VaultTimeoutInputComponent.CUSTOM_VALUE)\n    ) {\n      this.vaultTimeoutOptions.push({\n        name: this.i18nService.t(\"custom\"),\n        value: VaultTimeoutInputComponent.CUSTOM_VALUE,\n      });\n    }\n  }\n\n  getVaultTimeout(value: VaultTimeoutFormValue) {\n    if (value.vaultTimeout !== VaultTimeoutInputComponent.CUSTOM_VALUE) {\n      return value.vaultTimeout;\n    }\n\n    return value.custom.hours * 60 + value.custom.minutes;\n  }\n\n  writeValue(value: number): void {\n    if (value == null) {\n      return;\n    }\n\n    if (this.vaultTimeoutOptions.every((p) => p.value !== value)) {\n      this.form.setValue({\n        vaultTimeout: VaultTimeoutInputComponent.CUSTOM_VALUE,\n        custom: {\n          hours: Math.floor(value / 60),\n          minutes: value % 60,\n        },\n      });\n      return;\n    }\n\n    this.form.patchValue({\n      vaultTimeout: value,\n    });\n  }\n\n  registerOnChange(onChange: any): void {\n    this.onChange = onChange;\n  }\n\n  registerOnTouched(onTouched: any): void {\n    // Empty\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    // Empty\n  }\n\n  validate(control: AbstractControl): ValidationErrors {\n    if (this.vaultTimeoutPolicy && this.vaultTimeoutPolicy?.data?.minutes < control.value) {\n      return { policyError: true };\n    }\n\n    if (!this.exceedsMinimumTimout) {\n      return { minTimeoutError: true };\n    }\n\n    return null;\n  }\n\n  registerOnValidatorChange(fn: () => void): void {\n    this.validatorChange = fn;\n  }\n\n  private customTimeInMinutes() {\n    return this.form.value.custom.hours * 60 + this.form.value.custom.minutes;\n  }\n\n  private applyVaultTimeoutPolicy() {\n    this.vaultTimeoutPolicyHours = Math.floor(this.vaultTimeoutPolicy.data.minutes / 60);\n    this.vaultTimeoutPolicyMinutes = this.vaultTimeoutPolicy.data.minutes % 60;\n\n    this.vaultTimeoutOptions = this.vaultTimeoutOptions.filter(\n      (t) =>\n        t.value <= this.vaultTimeoutPolicy.data.minutes &&\n        (t.value > 0 || t.value === VaultTimeoutInputComponent.CUSTOM_VALUE) &&\n        t.value != null\n    );\n    this.validatorChange();\n  }\n}\n","<div [formGroup]=\"form\">\n  <div class=\"box-content-row last display-block\" appBoxRow>\n    <label for=\"vaultTimeout\">{{ \"vaultTimeout\" | i18n }}</label>\n    <select\n      id=\"vaultTimeout\"\n      name=\"VaultTimeout\"\n      formControlName=\"vaultTimeout\"\n      class=\"form-control\"\n    >\n      <option *ngFor=\"let o of vaultTimeoutOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n    </select>\n  </div>\n  <div class=\"box-content-row last\" *ngIf=\"showCustom\">\n    <div formGroupName=\"custom\" class=\"row\">\n      <div class=\"col\">\n        <div class=\"display-block\" appBoxRow>\n          <label for=\"customVaultTimeout\">{{ \"hours\" | i18n }}</label>\n          <input\n            id=\"hours\"\n            class=\"form-control\"\n            type=\"number\"\n            min=\"0\"\n            name=\"hours\"\n            formControlName=\"hours\"\n          />\n        </div>\n      </div>\n      <div class=\"col\">\n        <div class=\"display-block\" appBoxRow>\n          <label for=\"customVaultTimeout\">{{ \"minutes\" | i18n }}</label>\n          <input\n            id=\"minutes\"\n            class=\"form-control\"\n            type=\"number\"\n            min=\"0\"\n            max=\"59\"\n            name=\"minutes\"\n            formControlName=\"minutes\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { NG_VALIDATORS, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\nimport { VaultTimeoutInputComponent as VaultTimeoutInputComponentBase } from \"@bitwarden/angular/components/settings/vault-timeout-input.component\";\n\n@Component({\n  selector: \"app-vault-timeout-input\",\n  templateUrl: \"vault-timeout-input.component.html\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: VaultTimeoutInputComponent,\n    },\n    {\n      provide: NG_VALIDATORS,\n      multi: true,\n      useExisting: VaultTimeoutInputComponent,\n    },\n  ],\n})\nexport class VaultTimeoutInputComponent extends VaultTimeoutInputComponentBase {}\n","<header>\n  <div class=\"left\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"settings\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\" [formGroup]=\"form\">\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"manage\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/autofill\"\n      >\n        <div class=\"row-main\">{{ \"autofill\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/folders\"\n      >\n        <div class=\"row-main\">{{ \"folders\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/sync\"\n      >\n        <div class=\"row-main\">{{ \"sync\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/excluded-domains\"\n      >\n        <div class=\"row-main\">{{ \"excludedDomains\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"security\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <app-callout type=\"info\" *ngIf=\"vaultTimeoutPolicyCallout | async as policy\">\n        <span *ngIf=\"policy.timeout && policy.action\">\n          {{\n            \"vaultTimeoutPolicyWithActionInEffect\"\n              | i18n : policy.timeout.hours : policy.timeout.minutes : (policy.action | i18n)\n          }}\n        </span>\n        <span *ngIf=\"policy.timeout && !policy.action\">\n          {{ \"vaultTimeoutPolicyInEffect\" | i18n : policy.timeout.hours : policy.timeout.minutes }}\n        </span>\n        <span *ngIf=\"!policy.timeout && policy.action\">\n          {{ \"vaultTimeoutActionPolicyInEffect\" | i18n : (policy.action | i18n) }}\n        </span>\n      </app-callout>\n      <app-vault-timeout-input\n        [vaultTimeoutOptions]=\"vaultTimeoutOptions\"\n        [formControl]=\"form.controls.vaultTimeout\"\n        ngDefaultControl\n      >\n      </app-vault-timeout-input>\n      <div class=\"box-content-row display-block\" appBoxRow>\n        <label for=\"vaultTimeoutAction\">{{ \"vaultTimeoutAction\" | i18n }}</label>\n        <select\n          id=\"vaultTimeoutAction\"\n          name=\"VaultTimeoutActions\"\n          formControlName=\"vaultTimeoutAction\"\n        >\n          <option *ngFor=\"let action of availableVaultTimeoutActions\" [ngValue]=\"action\">\n            {{ action | i18n }}\n          </option>\n        </select>\n      </div>\n      <div\n        *ngIf=\"!availableVaultTimeoutActions.includes(VaultTimeoutAction.Lock)\"\n        id=\"unlockMethodHelp\"\n        class=\"box-footer\"\n      >\n        {{ \"unlockMethodNeededToChangeTimeoutActionDesc\" | i18n }}\n      </div>\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n        <label for=\"pin\">{{ \"unlockWithPin\" | i18n }}</label>\n        <input id=\"pin\" type=\"checkbox\" formControlName=\"pin\" />\n      </div>\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow *ngIf=\"supportsBiometric\">\n        <label for=\"biometric\">{{ \"unlockWithBiometrics\" | i18n }}</label>\n        <input id=\"biometric\" type=\"checkbox\" formControlName=\"biometric\" />\n      </div>\n      <div\n        class=\"box-content-row box-content-row-checkbox\"\n        appBoxRow\n        *ngIf=\"supportsBiometric && this.form.value.biometric\"\n      >\n        <label for=\"autoBiometricsPrompt\">{{ \"enableAutoBiometricsPrompt\" | i18n }}</label>\n        <input\n          id=\"autoBiometricsPrompt\"\n          type=\"checkbox\"\n          (change)=\"updateAutoBiometricsPrompt()\"\n          formControlName=\"enableAutoBiometricsPrompt\"\n        />\n      </div>\n      <button\n        *ngIf=\"availableVaultTimeoutActions.includes(VaultTimeoutAction.Lock)\"\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"lock()\"\n      >\n        <div class=\"row-main\">{{ \"lockNow\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"twoStep()\"\n      >\n        <div class=\"row-main\">{{ \"twoStepLogin\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"account\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button type=\"button\" class=\"box-content-row\" routerLink=\"/premium\">\n        <div class=\"row-main\">\n          <div class=\"icon text-primary\">\n            <i class=\"bwi bwi-fw bwi-lg bwi-star-f\" aria-hidden=\"true\"></i>\n          </div>\n          <span class=\"text text-primary\"\n            ><b>{{ \"premiumMembership\" | i18n }}</b></span\n          >\n        </div>\n        <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"changePassword()\"\n        *ngIf=\"showChangeMasterPass\"\n      >\n        <div class=\"row-main\">{{ \"changeMasterPassword\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"fingerprint()\"\n      >\n        <div class=\"row-main\">{{ \"fingerprintPhrase\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"logOut()\"\n      >\n        <div class=\"row-main\">{{ \"logOut\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"tools\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"import()\"\n      >\n        <div class=\"row-main\">{{ \"importItems\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"export()\"\n      >\n        <div class=\"row-main\">{{ \"exportVault\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"webVault()\"\n      >\n        <div class=\"row-main\">{{ \"bitWebVault\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"other\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/options\"\n      >\n        <div class=\"row-main\">{{ \"options\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"about()\"\n      >\n        <div class=\"row-main\">{{ \"about\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"share()\"\n      >\n        <div class=\"row-main\">{{ \"learnOrg\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/help-and-feedback\"\n      >\n        <div class=\"row-main\">{{ \"helpFeedback\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        aria-describedby=\"rateExtensionHelp\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"rate()\"\n      >\n        <div class=\"row-main\">{{ \"rateExtension\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n    <div id=\"rateExtensionHelp\" class=\"box-footer\">{{ \"rateExtensionDesc\" | i18n }}</div>\n  </div>\n</main>\n","import { ChangeDetectorRef, Component, OnInit } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport {\n  BehaviorSubject,\n  combineLatest,\n  concatMap,\n  distinctUntilChanged,\n  filter,\n  firstValueFrom,\n  map,\n  Observable,\n  pairwise,\n  Subject,\n  switchMap,\n  takeUntil,\n} from \"rxjs\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { FingerprintDialogComponent } from \"@bitwarden/auth\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { DeviceType } from \"@bitwarden/common/enums\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BiometricErrors, BiometricErrorTypes } from \"../../models/biometricErrors\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { SetPinComponent } from \"../components/set-pin.component\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\nimport { AboutComponent } from \"./about.component\";\nimport { AwaitDesktopDialogComponent } from \"./await-desktop-dialog.component\";\n\nconst RateUrls = {\n  [DeviceType.ChromeExtension]:\n    \"https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb/reviews\",\n  [DeviceType.FirefoxExtension]:\n    \"https://addons.mozilla.org/en-US/firefox/addon/bitwarden-password-manager/#reviews\",\n  [DeviceType.OperaExtension]:\n    \"https://addons.opera.com/en/extensions/details/bitwarden-free-password-manager/#feedback-container\",\n  [DeviceType.EdgeExtension]:\n    \"https://microsoftedge.microsoft.com/addons/detail/jbkfoedolllekgbhcbcoahefnbanhhlh\",\n  [DeviceType.VivaldiExtension]:\n    \"https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb/reviews\",\n  [DeviceType.SafariExtension]: \"https://apps.apple.com/app/bitwarden/id1352778147\",\n};\n\n@Component({\n  selector: \"app-settings\",\n  templateUrl: \"settings.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class SettingsComponent implements OnInit {\n  protected readonly VaultTimeoutAction = VaultTimeoutAction;\n\n  availableVaultTimeoutActions: VaultTimeoutAction[] = [];\n  vaultTimeoutOptions: any[];\n  vaultTimeoutPolicyCallout: Observable<{\n    timeout: { hours: number; minutes: number };\n    action: VaultTimeoutAction;\n  }>;\n  supportsBiometric: boolean;\n  showChangeMasterPass = true;\n\n  form = this.formBuilder.group({\n    vaultTimeout: [null as number | null],\n    vaultTimeoutAction: [VaultTimeoutAction.Lock],\n    pin: [null as boolean | null],\n    biometric: false,\n    enableAutoBiometricsPrompt: true,\n  });\n\n  private refreshTimeoutSettings$ = new BehaviorSubject<void>(undefined);\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private policyService: PolicyService,\n    private formBuilder: FormBuilder,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    public messagingService: MessagingService,\n    private router: Router,\n    private environmentService: EnvironmentService,\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private popupUtilsService: PopupUtilsService,\n    private modalService: ModalService,\n    private userVerificationService: UserVerificationService,\n    private dialogService: DialogService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  async ngOnInit() {\n    const maximumVaultTimeoutPolicy = this.policyService.get$(PolicyType.MaximumVaultTimeout);\n    this.vaultTimeoutPolicyCallout = maximumVaultTimeoutPolicy.pipe(\n      filter((policy) => policy != null),\n      map((policy) => {\n        let timeout;\n        if (policy.data?.minutes) {\n          timeout = {\n            hours: Math.floor(policy.data?.minutes / 60),\n            minutes: policy.data?.minutes % 60,\n          };\n        }\n        return { timeout: timeout, action: policy.data?.action };\n      })\n    );\n\n    const showOnLocked =\n      !this.platformUtilsService.isFirefox() && !this.platformUtilsService.isSafari();\n\n    this.vaultTimeoutOptions = [\n      { name: this.i18nService.t(\"immediately\"), value: 0 },\n      { name: this.i18nService.t(\"oneMinute\"), value: 1 },\n      { name: this.i18nService.t(\"fiveMinutes\"), value: 5 },\n      { name: this.i18nService.t(\"fifteenMinutes\"), value: 15 },\n      { name: this.i18nService.t(\"thirtyMinutes\"), value: 30 },\n      { name: this.i18nService.t(\"oneHour\"), value: 60 },\n      { name: this.i18nService.t(\"fourHours\"), value: 240 },\n      // { name: i18nService.t('onIdle'), value: -4 },\n      // { name: i18nService.t('onSleep'), value: -3 },\n    ];\n\n    if (showOnLocked) {\n      this.vaultTimeoutOptions.push({ name: this.i18nService.t(\"onLocked\"), value: -2 });\n    }\n\n    this.vaultTimeoutOptions.push({ name: this.i18nService.t(\"onRestart\"), value: -1 });\n    this.vaultTimeoutOptions.push({ name: this.i18nService.t(\"never\"), value: null });\n\n    let timeout = await this.vaultTimeoutSettingsService.getVaultTimeout();\n    if (timeout === -2 && !showOnLocked) {\n      timeout = -1;\n    }\n    const pinStatus = await this.vaultTimeoutSettingsService.isPinLockSet();\n\n    this.form.controls.vaultTimeout.valueChanges\n      .pipe(\n        pairwise(),\n        concatMap(async ([previousValue, newValue]) => {\n          await this.saveVaultTimeout(previousValue, newValue);\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    this.form.controls.vaultTimeoutAction.valueChanges\n      .pipe(\n        pairwise(),\n        concatMap(async ([previousValue, newValue]) => {\n          await this.saveVaultTimeoutAction(previousValue, newValue);\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    const initialValues = {\n      vaultTimeout: timeout,\n      vaultTimeoutAction: await firstValueFrom(\n        this.vaultTimeoutSettingsService.vaultTimeoutAction$()\n      ),\n      pin: pinStatus !== \"DISABLED\",\n      biometric: await this.vaultTimeoutSettingsService.isBiometricLockSet(),\n      enableAutoBiometricsPrompt: !(await this.stateService.getDisableAutoBiometricsPrompt()),\n    };\n    this.form.patchValue(initialValues); // Emit event to initialize `pairwise` operator\n\n    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();\n    this.showChangeMasterPass = await this.userVerificationService.hasMasterPassword();\n\n    this.form.controls.pin.valueChanges\n      .pipe(\n        concatMap(async (value) => {\n          await this.updatePin(value);\n          this.refreshTimeoutSettings$.next();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    this.form.controls.biometric.valueChanges\n      .pipe(\n        distinctUntilChanged(),\n        concatMap(async (enabled) => {\n          await this.updateBiometric(enabled);\n          if (enabled) {\n            this.form.controls.enableAutoBiometricsPrompt.enable();\n          } else {\n            this.form.controls.enableAutoBiometricsPrompt.disable();\n          }\n          this.refreshTimeoutSettings$.next();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    this.refreshTimeoutSettings$\n      .pipe(\n        switchMap(() =>\n          combineLatest([\n            this.vaultTimeoutSettingsService.availableVaultTimeoutActions$(),\n            this.vaultTimeoutSettingsService.vaultTimeoutAction$(),\n          ])\n        ),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(([availableActions, action]) => {\n        this.availableVaultTimeoutActions = availableActions;\n        this.form.controls.vaultTimeoutAction.setValue(action, { emitEvent: false });\n        // NOTE: The UI doesn't properly update without detect changes.\n        // I've even tried using an async pipe, but it still doesn't work. I'm not sure why.\n        // Using an async pipe means that we can't call `detectChanges` AFTER the data has change\n        // meaning that we are forced to use regular class variables instead of observables.\n        this.changeDetectorRef.detectChanges();\n      });\n\n    this.refreshTimeoutSettings$\n      .pipe(\n        switchMap(() =>\n          combineLatest([\n            this.vaultTimeoutSettingsService.availableVaultTimeoutActions$(),\n            maximumVaultTimeoutPolicy,\n          ])\n        ),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(([availableActions, policy]) => {\n        if (policy?.data?.action || availableActions.length <= 1) {\n          this.form.controls.vaultTimeoutAction.disable({ emitEvent: false });\n        } else {\n          this.form.controls.vaultTimeoutAction.enable({ emitEvent: false });\n        }\n      });\n  }\n\n  async saveVaultTimeout(previousValue: number, newValue: number) {\n    if (newValue == null) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"warning\" },\n        content: { key: \"neverLockWarning\" },\n        type: \"warning\",\n      });\n\n      if (!confirmed) {\n        this.form.controls.vaultTimeout.setValue(previousValue, { emitEvent: false });\n        return;\n      }\n    }\n\n    // The minTimeoutError does not apply to browser because it supports Immediately\n    // So only check for the policyError\n    if (this.form.controls.vaultTimeout.hasError(\"policyError\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"vaultTimeoutTooLarge\")\n      );\n      return;\n    }\n\n    await this.vaultTimeoutSettingsService.setVaultTimeoutOptions(\n      newValue,\n      this.form.value.vaultTimeoutAction\n    );\n    if (newValue == null) {\n      this.messagingService.send(\"bgReseedStorage\");\n    }\n  }\n\n  async saveVaultTimeoutAction(previousValue: VaultTimeoutAction, newValue: VaultTimeoutAction) {\n    if (newValue === VaultTimeoutAction.LogOut) {\n      const confirmed = await this.dialogService.openSimpleDialog({\n        title: { key: \"vaultTimeoutLogOutConfirmationTitle\" },\n        content: { key: \"vaultTimeoutLogOutConfirmation\" },\n        type: \"warning\",\n      });\n\n      if (!confirmed) {\n        this.form.controls.vaultTimeoutAction.setValue(previousValue, {\n          emitEvent: false,\n        });\n        return;\n      }\n    }\n\n    if (this.form.controls.vaultTimeout.hasError(\"policyError\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"vaultTimeoutTooLarge\")\n      );\n      return;\n    }\n\n    await this.vaultTimeoutSettingsService.setVaultTimeoutOptions(\n      this.form.value.vaultTimeout,\n      newValue\n    );\n    this.refreshTimeoutSettings$.next();\n  }\n\n  async updatePin(value: boolean) {\n    if (value) {\n      const ref = this.modalService.open(SetPinComponent, { allowMultipleModals: true });\n\n      if (ref == null) {\n        this.form.controls.pin.setValue(false, { emitEvent: false });\n        return;\n      }\n\n      this.form.controls.pin.setValue(await ref.onClosedPromise(), { emitEvent: false });\n    } else {\n      await this.vaultTimeoutSettingsService.clear();\n    }\n  }\n\n  async updateBiometric(enabled: boolean) {\n    if (enabled && this.supportsBiometric) {\n      let granted;\n      try {\n        granted = await BrowserApi.requestPermission({ permissions: [\"nativeMessaging\"] });\n      } catch (e) {\n        // eslint-disable-next-line\n        console.error(e);\n\n        if (this.platformUtilsService.isFirefox() && this.popupUtilsService.inSidebar(window)) {\n          await this.dialogService.openSimpleDialog({\n            title: { key: \"nativeMessaginPermissionSidebarTitle\" },\n            content: { key: \"nativeMessaginPermissionSidebarDesc\" },\n            acceptButtonText: { key: \"ok\" },\n            cancelButtonText: null,\n            type: \"info\",\n          });\n\n          this.form.controls.biometric.setValue(false);\n          return;\n        }\n      }\n\n      if (!granted) {\n        await this.dialogService.openSimpleDialog({\n          title: { key: \"nativeMessaginPermissionErrorTitle\" },\n          content: { key: \"nativeMessaginPermissionErrorDesc\" },\n          acceptButtonText: { key: \"ok\" },\n          cancelButtonText: null,\n          type: \"danger\",\n        });\n\n        this.form.controls.biometric.setValue(false);\n        return;\n      }\n\n      const awaitDesktopDialogRef = AwaitDesktopDialogComponent.open(this.dialogService);\n      const awaitDesktopDialogClosed = firstValueFrom(awaitDesktopDialogRef.closed);\n\n      await this.stateService.setBiometricAwaitingAcceptance(true);\n      await this.cryptoService.refreshAdditionalKeys();\n\n      await Promise.race([\n        awaitDesktopDialogClosed.then(async (result) => {\n          if (result) {\n            this.form.controls.biometric.setValue(false);\n            await this.stateService.setBiometricAwaitingAcceptance(null);\n          }\n        }),\n        this.platformUtilsService\n          .authenticateBiometric()\n          .then((result) => {\n            this.form.controls.biometric.setValue(result);\n            if (!result) {\n              this.platformUtilsService.showToast(\n                \"error\",\n                this.i18nService.t(\"errorEnableBiometricTitle\"),\n                this.i18nService.t(\"errorEnableBiometricDesc\")\n              );\n            }\n          })\n          .catch((e) => {\n            // Handle connection errors\n            this.form.controls.biometric.setValue(false);\n\n            const error = BiometricErrors[e as BiometricErrorTypes];\n\n            this.dialogService.openSimpleDialog({\n              title: { key: error.title },\n              content: { key: error.description },\n              acceptButtonText: { key: \"ok\" },\n              cancelButtonText: null,\n              type: \"danger\",\n            });\n          })\n          .finally(() => {\n            awaitDesktopDialogRef.close(false);\n          }),\n      ]);\n    } else {\n      await this.stateService.setBiometricUnlock(null);\n      await this.stateService.setBiometricFingerprintValidated(false);\n    }\n  }\n\n  async updateAutoBiometricsPrompt() {\n    await this.stateService.setDisableAutoBiometricsPrompt(\n      !this.form.value.enableAutoBiometricsPrompt\n    );\n  }\n\n  async lock() {\n    await this.vaultTimeoutService.lock();\n  }\n\n  async logOut() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"logOut\" },\n      content: { key: \"logOutConfirmation\" },\n      type: \"info\",\n    });\n\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  async changePassword() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"changeMasterPassword\" },\n      content: { key: \"changeMasterPasswordConfirmation\" },\n      type: \"info\",\n    });\n    if (confirmed) {\n      BrowserApi.createNewTab(\n        \"https://bitwarden.com/help/master-password/#change-your-master-password\"\n      );\n    }\n  }\n\n  async twoStep() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"twoStepLogin\" },\n      content: { key: \"twoStepLoginConfirmation\" },\n      type: \"info\",\n    });\n    if (confirmed) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/setup-two-step-login/\");\n    }\n  }\n\n  async share() {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"learnOrg\" },\n      content: { key: \"learnOrgConfirmation\" },\n      type: \"info\",\n    });\n    if (confirmed) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/about-organizations/\");\n    }\n  }\n\n  async webVault() {\n    const url = this.environmentService.getWebVaultUrl();\n    BrowserApi.createNewTab(url);\n  }\n\n  import() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/import-data/\");\n  }\n\n  export() {\n    this.router.navigate([\"/export\"]);\n  }\n\n  about() {\n    this.modalService.open(AboutComponent);\n  }\n\n  async fingerprint() {\n    const fingerprint = await this.cryptoService.getFingerprint(\n      await this.stateService.getUserId()\n    );\n\n    const dialogRef = FingerprintDialogComponent.open(this.dialogService, {\n      fingerprint,\n    });\n\n    return firstValueFrom(dialogRef.closed);\n  }\n\n  rate() {\n    const deviceType = this.platformUtilsService.getDevice();\n    BrowserApi.createNewTab((RateUrls as any)[deviceType]);\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-sync\",\n  templateUrl: \"sync.component.html\",\n})\nexport class SyncComponent implements OnInit {\n  lastSync = \"--\";\n  syncPromise: Promise<any>;\n\n  constructor(\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    await this.setLastSync();\n  }\n\n  async sync() {\n    this.syncPromise = this.syncService.fullSync(true);\n    const success = await this.syncPromise;\n    if (success) {\n      await this.setLastSync();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"syncingComplete\"));\n    } else {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"syncingFailed\"));\n    }\n  }\n\n  async setLastSync() {\n    const last = await this.syncService.getLastSync();\n    if (last != null) {\n      this.lastSync = last.toLocaleDateString() + \" \" + last.toLocaleTimeString();\n    } else {\n      this.lastSync = this.i18nService.t(\"never\");\n    }\n  }\n}\n","<div class=\"tab-page\">\n  <router-outlet></router-outlet>\n  <nav class=\"tabs\">\n    <ul>\n      <li routerLinkActive=\"active\" #rlaCurrentTab=\"routerLinkActive\" *ngIf=\"showCurrentTab\">\n        <button\n          type=\"button\"\n          routerLink=\"current\"\n          appA11yTitle=\"{{ 'currentTab' | i18n }}\"\n          [attr.aria-pressed]=\"rlaCurrentTab.isActive\"\n        >\n          <i class=\"bwi bwi-folder-closed-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"tab\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaMyVault=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"vault\"\n          appA11yTitle=\"{{ 'myVault' | i18n }}\"\n          [attr.aria-pressed]=\"rlaMyVault.isActive\"\n        >\n          <i class=\"bwi bwi-lock-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"vault\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaSend=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"send\"\n          appA11yTitle=\"{{ 'send' | i18n }}\"\n          [attr.aria-pressed]=\"rlaSend.isActive\"\n        >\n          <i class=\"bwi bwi-send-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"send\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaGenerator=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"generator\"\n          appA11yTitle=\"{{ 'passGen' | i18n }}\"\n          [attr.aria-pressed]=\"rlaGenerator.isActive\"\n        >\n          <i class=\"bwi bwi-generate-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"generator\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaSettings=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"settings\"\n          appA11yTitle=\"{{ 'settings' | i18n }}\"\n          [attr.aria-pressed]=\"rlaSettings.isActive\"\n        >\n          <i class=\"bwi bwi-cog-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"settings\" | i18n }}\n        </button>\n      </li>\n    </ul>\n  </nav>\n</div>\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"sync\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"content center-content\">\n    <button\n      type=\"button\"\n      class=\"btn block primary\"\n      aria-describedby=\"lastSyncHint\"\n      (click)=\"sync()\"\n      #syncBtn\n      [disabled]=\"$any(syncBtn).loading\"\n      [appApiAction]=\"syncPromise\"\n    >\n      <span [hidden]=\"$any(syncBtn).loading\">{{ \"syncVaultNow\" | i18n }}</span>\n      <i\n        class=\"bwi bwi-spinner bwi-lg bwi-spin\"\n        [hidden]=\"!$any(syncBtn).loading\"\n        aria-hidden=\"true\"\n      ></i>\n    </button>\n    <p id=\"lastSyncHint\" class=\"text-center text-muted small\">\n      {{ \"lastSync\" | i18n }} {{ lastSync }}\n    </p>\n  </div>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { PopupUtilsService } from \"./services/popup-utils.service\";\n\n@Component({\n  selector: \"app-tabs\",\n  templateUrl: \"tabs.component.html\",\n})\nexport class TabsComponent implements OnInit {\n  showCurrentTab = true;\n\n  constructor(private popupUtilsService: PopupUtilsService) {}\n\n  ngOnInit() {\n    this.showCurrentTab = !this.popupUtilsService.inPopout(window);\n  }\n}\n","import { Injectable, NgModule } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, RouteReuseStrategy, RouterModule, Routes } from \"@angular/router\";\n\nimport {\n  redirectGuard,\n  AuthGuard,\n  lockGuard,\n  tdeDecryptionRequiredGuard,\n  UnauthGuard,\n} from \"@bitwarden/angular/auth/guards\";\nimport { canAccessFeature } from \"@bitwarden/angular/guard/feature-flag.guard\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\n\nimport { EnvironmentComponent } from \"../auth/popup/environment.component\";\nimport { HintComponent } from \"../auth/popup/hint.component\";\nimport { HomeComponent } from \"../auth/popup/home.component\";\nimport { LockComponent } from \"../auth/popup/lock.component\";\nimport { LoginDecryptionOptionsComponent } from \"../auth/popup/login-decryption-options/login-decryption-options.component\";\nimport { LoginWithDeviceComponent } from \"../auth/popup/login-with-device.component\";\nimport { LoginComponent } from \"../auth/popup/login.component\";\nimport { RegisterComponent } from \"../auth/popup/register.component\";\nimport { RemovePasswordComponent } from \"../auth/popup/remove-password.component\";\nimport { SetPasswordComponent } from \"../auth/popup/set-password.component\";\nimport { SsoComponent } from \"../auth/popup/sso.component\";\nimport { TwoFactorOptionsComponent } from \"../auth/popup/two-factor-options.component\";\nimport { TwoFactorComponent } from \"../auth/popup/two-factor.component\";\nimport { UpdateTempPasswordComponent } from \"../auth/popup/update-temp-password.component\";\nimport { GeneratorComponent } from \"../tools/popup/generator/generator.component\";\nimport { PasswordGeneratorHistoryComponent } from \"../tools/popup/generator/password-generator-history.component\";\nimport { SendAddEditComponent } from \"../tools/popup/send/send-add-edit.component\";\nimport { SendGroupingsComponent } from \"../tools/popup/send/send-groupings.component\";\nimport { SendTypeComponent } from \"../tools/popup/send/send-type.component\";\nimport { ExportComponent } from \"../tools/popup/settings/export.component\";\nimport { AddEditComponent } from \"../vault/popup/components/vault/add-edit.component\";\nimport { AttachmentsComponent } from \"../vault/popup/components/vault/attachments.component\";\nimport { CollectionsComponent } from \"../vault/popup/components/vault/collections.component\";\nimport { CurrentTabComponent } from \"../vault/popup/components/vault/current-tab.component\";\nimport { PasswordHistoryComponent } from \"../vault/popup/components/vault/password-history.component\";\nimport { ShareComponent } from \"../vault/popup/components/vault/share.component\";\nimport { VaultFilterComponent } from \"../vault/popup/components/vault/vault-filter.component\";\nimport { VaultItemsComponent } from \"../vault/popup/components/vault/vault-items.component\";\nimport { ViewComponent } from \"../vault/popup/components/vault/view.component\";\nimport { FolderAddEditComponent } from \"../vault/popup/settings/folder-add-edit.component\";\n\nimport { DebounceNavigationService } from \"./services/debounceNavigationService\";\nimport { AutofillComponent } from \"./settings/autofill.component\";\nimport { ExcludedDomainsComponent } from \"./settings/excluded-domains.component\";\nimport { FoldersComponent } from \"./settings/folders.component\";\nimport { HelpAndFeedbackComponent } from \"./settings/help-and-feedback.component\";\nimport { OptionsComponent } from \"./settings/options.component\";\nimport { PremiumComponent } from \"./settings/premium.component\";\nimport { SettingsComponent } from \"./settings/settings.component\";\nimport { SyncComponent } from \"./settings/sync.component\";\nimport { TabsComponent } from \"./tabs.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    pathMatch: \"full\",\n    children: [], // Children lets us have an empty component.\n    canActivate: [\n      redirectGuard({ loggedIn: \"/tabs/current\", loggedOut: \"/home\", locked: \"/lock\" }),\n    ],\n  },\n  {\n    path: \"vault\",\n    redirectTo: \"/tabs/vault\",\n    pathMatch: \"full\",\n  },\n  {\n    path: \"home\",\n    component: HomeComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"home\" },\n  },\n  {\n    path: \"login\",\n    component: LoginComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"login\" },\n  },\n  {\n    path: \"login-with-device\",\n    component: LoginWithDeviceComponent,\n    canActivate: [],\n    data: { state: \"login-with-device\" },\n  },\n  {\n    path: \"admin-approval-requested\",\n    component: LoginWithDeviceComponent,\n    canActivate: [],\n    data: { state: \"login-with-device\" },\n  },\n  {\n    path: \"lock\",\n    component: LockComponent,\n    canActivate: [lockGuard()],\n    data: { state: \"lock\" },\n  },\n  {\n    path: \"2fa\",\n    component: TwoFactorComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"2fa\" },\n  },\n  {\n    path: \"2fa-options\",\n    component: TwoFactorOptionsComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"2fa-options\" },\n  },\n  {\n    path: \"login-initiated\",\n    component: LoginDecryptionOptionsComponent,\n    canActivate: [\n      tdeDecryptionRequiredGuard(),\n      canAccessFeature(FeatureFlag.TrustedDeviceEncryption),\n    ],\n  },\n  {\n    path: \"sso\",\n    component: SsoComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"sso\" },\n  },\n  {\n    path: \"set-password\",\n    component: SetPasswordComponent,\n    data: { state: \"set-password\" },\n  },\n  {\n    path: \"remove-password\",\n    component: RemovePasswordComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"remove-password\" },\n  },\n  {\n    path: \"register\",\n    component: RegisterComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"register\" },\n  },\n  {\n    path: \"hint\",\n    component: HintComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"hint\" },\n  },\n  {\n    path: \"environment\",\n    component: EnvironmentComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"environment\" },\n  },\n  {\n    path: \"ciphers\",\n    component: VaultItemsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"ciphers\" },\n  },\n  {\n    path: \"view-cipher\",\n    component: ViewComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"view-cipher\" },\n  },\n  {\n    path: \"cipher-password-history\",\n    component: PasswordHistoryComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"cipher-password-history\" },\n  },\n  {\n    path: \"add-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard, DebounceNavigationService],\n    data: { state: \"add-cipher\" },\n    runGuardsAndResolvers: \"always\",\n  },\n  {\n    path: \"edit-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard, DebounceNavigationService],\n    data: { state: \"edit-cipher\" },\n    runGuardsAndResolvers: \"always\",\n  },\n  {\n    path: \"share-cipher\",\n    component: ShareComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"share-cipher\" },\n  },\n  {\n    path: \"collections\",\n    component: CollectionsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"collections\" },\n  },\n  {\n    path: \"attachments\",\n    component: AttachmentsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"attachments\" },\n  },\n  {\n    path: \"generator\",\n    component: GeneratorComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"generator\" },\n  },\n  {\n    path: \"generator-history\",\n    component: PasswordGeneratorHistoryComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"generator-history\" },\n  },\n  {\n    path: \"export\",\n    component: ExportComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"export\" },\n  },\n  {\n    path: \"autofill\",\n    component: AutofillComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"autofill\" },\n  },\n  {\n    path: \"folders\",\n    component: FoldersComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"folders\" },\n  },\n  {\n    path: \"add-folder\",\n    component: FolderAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"add-folder\" },\n  },\n  {\n    path: \"edit-folder\",\n    component: FolderAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"edit-folder\" },\n  },\n  {\n    path: \"sync\",\n    component: SyncComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"sync\" },\n  },\n  {\n    path: \"excluded-domains\",\n    component: ExcludedDomainsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"excluded-domains\" },\n  },\n  {\n    path: \"premium\",\n    component: PremiumComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"premium\" },\n  },\n  {\n    path: \"options\",\n    component: OptionsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"options\" },\n  },\n  {\n    path: \"clone-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"clone-cipher\" },\n  },\n  {\n    path: \"send-type\",\n    component: SendTypeComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"send-type\" },\n  },\n  {\n    path: \"add-send\",\n    component: SendAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"add-send\" },\n  },\n  {\n    path: \"edit-send\",\n    component: SendAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"edit-send\" },\n  },\n  {\n    path: \"update-temp-password\",\n    component: UpdateTempPasswordComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"update-temp-password\" },\n  },\n  {\n    path: \"help-and-feedback\",\n    component: HelpAndFeedbackComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"help-and-feedback\" },\n  },\n  {\n    path: \"tabs\",\n    component: TabsComponent,\n    data: { state: \"tabs\" },\n    children: [\n      {\n        path: \"\",\n        redirectTo: \"/tabs/vault\",\n        pathMatch: \"full\",\n      },\n      {\n        path: \"current\",\n        component: CurrentTabComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_current\" },\n        runGuardsAndResolvers: \"always\",\n      },\n      {\n        path: \"vault\",\n        component: VaultFilterComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_vault\" },\n      },\n      {\n        path: \"generator\",\n        component: GeneratorComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_generator\" },\n      },\n      {\n        path: \"settings\",\n        component: SettingsComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_settings\" },\n      },\n      {\n        path: \"send\",\n        component: SendGroupingsComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_send\" },\n      },\n    ],\n  },\n];\n\n@Injectable()\nexport class NoRouteReuseStrategy implements RouteReuseStrategy {\n  shouldDetach(route: ActivatedRouteSnapshot) {\n    return false;\n  }\n\n  // eslint-disable-next-line\n  store(route: ActivatedRouteSnapshot, handle: {}) {\n    /* Nothing */\n  }\n\n  shouldAttach(route: ActivatedRouteSnapshot) {\n    return false;\n  }\n\n  retrieve(route: ActivatedRouteSnapshot): any {\n    return null;\n  }\n\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot) {\n    return false;\n  }\n}\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, {\n      useHash: true,\n      onSameUrlNavigation: \"reload\",\n      /*enableTracing: true,*/\n    }),\n  ],\n  exports: [RouterModule],\n  providers: [{ provide: RouteReuseStrategy, useClass: NoRouteReuseStrategy }],\n})\nexport class AppRoutingModule {}\n","import { inject } from \"@angular/core\";\nimport {\n  ActivatedRouteSnapshot,\n  CanActivateFn,\n  Router,\n  RouterStateSnapshot,\n} from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\n\n/**\n * Only allow access to this route if the vault is locked.\n * If TDE is enabled then the user must also have had a user key at some point.\n * Otherwise redirect to root.\n */\nexport function lockGuard(): CanActivateFn {\n  return async (\n    activatedRouteSnapshot: ActivatedRouteSnapshot,\n    routerStateSnapshot: RouterStateSnapshot\n  ) => {\n    const authService = inject(AuthService);\n    const cryptoService = inject(CryptoService);\n    const deviceTrustCryptoService = inject(DeviceTrustCryptoServiceAbstraction);\n    const router = inject(Router);\n    const userVerificationService = inject(UserVerificationService);\n\n    const authStatus = await authService.getAuthStatus();\n    if (authStatus !== AuthenticationStatus.Locked) {\n      return router.createUrlTree([\"/\"]);\n    }\n\n    // User is authN and in locked state.\n\n    const tdeEnabled = await deviceTrustCryptoService.supportsDeviceTrust();\n\n    // Create special exception which allows users to go from the login-initiated page to the lock page for the approve w/ MP flow\n    // The MP check is necessary to prevent direct manual navigation from other locked state pages for users who don't have a MP\n    if (\n      activatedRouteSnapshot.queryParams[\"from\"] === \"login-initiated\" &&\n      tdeEnabled &&\n      (await userVerificationService.hasMasterPassword())\n    ) {\n      return true;\n    }\n\n    // If authN user with TDE directly navigates to lock, kick them upwards so redirect guard can\n    // properly route them to the login decryption options component.\n    const everHadUserKey = await cryptoService.getEverHadUserKey();\n    if (tdeEnabled && !everHadUserKey) {\n      return router.createUrlTree([\"/\"]);\n    }\n\n    return true;\n  };\n}\n","import { inject } from \"@angular/core\";\nimport {\n  ActivatedRouteSnapshot,\n  Router,\n  RouterStateSnapshot,\n  CanActivateFn,\n} from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\n\n/**\n * Only allow access to this route if the vault is locked and has never been decrypted.\n * Otherwise redirect to root.\n */\nexport function tdeDecryptionRequiredGuard(): CanActivateFn {\n  return async (_: ActivatedRouteSnapshot, state: RouterStateSnapshot) => {\n    const authService = inject(AuthService);\n    const cryptoService = inject(CryptoService);\n    const deviceTrustCryptoService = inject(DeviceTrustCryptoServiceAbstraction);\n    const router = inject(Router);\n\n    const authStatus = await authService.getAuthStatus();\n    const tdeEnabled = await deviceTrustCryptoService.supportsDeviceTrust();\n    const everHadUserKey = await cryptoService.getEverHadUserKey();\n    if (authStatus !== AuthenticationStatus.Locked || !tdeEnabled || everHadUserKey) {\n      return router.createUrlTree([\"/\"]);\n    }\n\n    return true;\n  };\n}\n","import { inject } from \"@angular/core\";\nimport { CanActivateFn, Router } from \"@angular/router\";\n\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n// Replace this with a type safe lookup of the feature flag values in PM-2282\ntype FlagValue = boolean | number | string;\n\n/**\n * Returns a CanActivateFn that checks if the feature flag is enabled. If not, it shows an \"Access Denied!\"\n * toast and optionally redirects to the specified url.\n * @param featureFlag - The feature flag to check\n * @param requiredFlagValue - Optional value to the feature flag must be equal to, defaults to true\n * @param redirectUrlOnDisabled - Optional url to redirect to if the feature flag is disabled\n */\nexport const canAccessFeature = (\n  featureFlag: FeatureFlag,\n  requiredFlagValue: FlagValue = true,\n  redirectUrlOnDisabled?: string\n): CanActivateFn => {\n  return async () => {\n    const configService = inject(ConfigServiceAbstraction);\n    const platformUtilsService = inject(PlatformUtilsService);\n    const router = inject(Router);\n    const i18nService = inject(I18nService);\n    const logService = inject(LogService);\n\n    try {\n      const flagValue = await configService.getFeatureFlag(featureFlag);\n\n      if (flagValue === requiredFlagValue) {\n        return true;\n      }\n\n      platformUtilsService.showToast(\"error\", null, i18nService.t(\"accessDenied\"));\n\n      if (redirectUrlOnDisabled != null) {\n        return router.createUrlTree([redirectUrlOnDisabled]);\n      }\n      return false;\n    } catch (e) {\n      logService.error(e);\n      return false;\n    }\n  };\n};\n","import { animate, group, query, style, transition, trigger } from \"@angular/animations\";\n\nconst queryShown = query(\n  \":enter, :leave\",\n  [style({ position: \"fixed\", width: \"100%\", height: \"100%\" })],\n  {\n    optional: true,\n  }\n);\n\n// ref: https://github.com/angular/angular/issues/15477\nconst queryChildRoute = query(\"router-outlet ~ *\", [style({}), animate(1, style({}))], {\n  optional: true,\n});\n\nconst speed = \"0.4s\";\n\nexport function queryTranslate(\n  direction: string,\n  axis: string,\n  from: number,\n  to: number,\n  zIndex = 1000\n) {\n  return query(\n    \":\" + direction,\n    [\n      style({\n        transform: \"translate\" + axis + \"(\" + from + \"%)\",\n        zIndex: zIndex,\n        boxShadow: \"0 3px 2px -2px gray\",\n      }),\n      animate(speed + \" ease-in-out\", style({ transform: \"translate\" + axis + \"(\" + to + \"%)\" })),\n    ],\n    { optional: true }\n  );\n}\n\nexport function queryTranslateX(direction: string, from: number, to: number, zIndex = 1000) {\n  return queryTranslate(direction, \"X\", from, to, zIndex);\n}\n\nexport function queryTranslateY(direction: string, from: number, to: number, zIndex = 1000) {\n  return queryTranslate(direction, \"Y\", from, to, zIndex);\n}\n\nconst inSlideLeft = [\n  queryShown,\n  group([queryTranslateX(\"enter\", 100, 0), queryTranslateX(\"leave\", 0, -100), queryChildRoute]),\n];\n\nconst outSlideRight = [\n  queryShown,\n  group([queryTranslateX(\"enter\", -100, 0), queryTranslateX(\"leave\", 0, 100)]),\n];\n\nconst inSlideUp = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 100, 0, 1010), queryTranslateY(\"leave\", 0, 0), queryChildRoute]),\n];\n\nconst outSlideDown = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 0, 0), queryTranslateY(\"leave\", 0, 100, 1010)]),\n];\n\nconst inSlideDown = [\n  queryShown,\n  group([queryTranslateY(\"enter\", -100, 0, 1010), queryTranslateY(\"leave\", 0, 0), queryChildRoute]),\n];\n\n// eslint-disable-next-line\nconst outSlideUp = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 0, 0), queryTranslateY(\"leave\", 0, -100, 1010)]),\n];\n\nexport function tabsToCiphers(fromState: string, toState: string) {\n  if (fromState == null || toState === null || toState.indexOf(\"ciphers_\") === -1) {\n    return false;\n  }\n  return (\n    (fromState.indexOf(\"ciphers_\") === 0 && fromState.indexOf(\"ciphers_direction=b\") === -1) ||\n    fromState === \"tabs\"\n  );\n}\n\nexport function ciphersToTabs(fromState: string, toState: string) {\n  if (fromState == null || toState === null || fromState.indexOf(\"ciphers_\") === -1) {\n    return false;\n  }\n  return toState.indexOf(\"ciphers_direction=b\") === 0 || toState === \"tabs\";\n}\n\nexport function ciphersToView(fromState: string, toState: string) {\n  if (fromState == null || toState === null) {\n    return false;\n  }\n  return (\n    fromState.indexOf(\"ciphers_\") === 0 &&\n    (toState === \"view-cipher\" || toState === \"add-cipher\" || toState === \"clone-cipher\")\n  );\n}\n\nexport function viewToCiphers(fromState: string, toState: string) {\n  if (fromState == null || toState === null) {\n    return false;\n  }\n  return (\n    (fromState === \"view-cipher\" || fromState === \"add-cipher\" || fromState === \"clone-cipher\") &&\n    toState.indexOf(\"ciphers_\") === 0\n  );\n}\n\nexport const routerTransition = trigger(\"routerTransition\", [\n  transition(\"void => home\", inSlideLeft),\n  transition(\"void => tabs\", inSlideLeft),\n\n  transition(\"home => environment, home => login, home => register\", inSlideUp),\n\n  transition(\"login => home\", outSlideDown),\n  transition(\"login => hint\", inSlideUp),\n  transition(\"login => tabs, login => 2fa, login => login-with-device\", inSlideLeft),\n\n  transition(\"hint => login, register => home, environment => home\", outSlideDown),\n\n  transition(\"2fa => login\", outSlideRight),\n  transition(\"2fa => 2fa-options\", inSlideUp),\n  transition(\"2fa-options => 2fa\", outSlideDown),\n  transition(\"2fa => tabs\", inSlideLeft),\n\n  transition(\"login-with-device => tabs, login-with-device => 2fa\", inSlideLeft),\n  transition(\"login-with-device => login\", outSlideRight),\n\n  transition(tabsToCiphers, inSlideLeft),\n  transition(ciphersToTabs, outSlideRight),\n\n  transition(ciphersToView, inSlideUp),\n  transition(viewToCiphers, outSlideDown),\n\n  transition(\"tabs => view-cipher\", inSlideUp),\n  transition(\"view-cipher => tabs\", outSlideDown),\n\n  transition(\"view-cipher => edit-cipher, view-cipher => cipher-password-history\", inSlideUp),\n  transition(\n    \"edit-cipher => view-cipher, cipher-password-history => view-cipher, edit-cipher => tabs\",\n    outSlideDown\n  ),\n\n  transition(\"view-cipher => clone-cipher\", inSlideUp),\n  transition(\"clone-cipher => view-cipher, clone-cipher => tabs\", outSlideDown),\n\n  transition(\"view-cipher => share-cipher\", inSlideUp),\n  transition(\"share-cipher => view-cipher\", outSlideDown),\n\n  transition(\"tabs => add-cipher\", inSlideUp),\n  transition(\"add-cipher => tabs\", outSlideDown),\n\n  transition(\"generator => generator-history, tabs => generator-history\", inSlideLeft),\n  transition(\"generator-history => generator, generator-history => tabs\", outSlideRight),\n\n  transition(\n    \"add-cipher => generator, edit-cipher => generator, clone-cipher => generator\",\n    inSlideUp\n  ),\n  transition(\n    \"generator => add-cipher, generator => edit-cipher, generator => clone-cipher\",\n    outSlideDown\n  ),\n\n  transition(\"edit-cipher => attachments, edit-cipher => collections\", inSlideLeft),\n  transition(\"attachments => edit-cipher, collections => edit-cipher\", outSlideRight),\n\n  transition(\"clone-cipher => attachments, clone-cipher => collections\", inSlideLeft),\n  transition(\"attachments => clone-cipher, collections => clone-cipher\", outSlideRight),\n\n  transition(\"tabs => export\", inSlideLeft),\n  transition(\"export => tabs\", outSlideRight),\n\n  transition(\"tabs => folders\", inSlideLeft),\n  transition(\"folders => tabs\", outSlideRight),\n\n  transition(\"folders => edit-folder, folders => add-folder\", inSlideUp),\n  transition(\"edit-folder => folders, add-folder => folders\", outSlideDown),\n\n  transition(\"tabs => sync\", inSlideLeft),\n  transition(\"sync => tabs\", outSlideRight),\n\n  transition(\"tabs => excluded-domains\", inSlideLeft),\n  transition(\"excluded-domains => tabs\", outSlideRight),\n\n  transition(\"tabs => options\", inSlideLeft),\n  transition(\"options => tabs\", outSlideRight),\n\n  transition(\"tabs => premium\", inSlideLeft),\n  transition(\"premium => tabs\", outSlideRight),\n\n  transition(\"tabs => lock\", inSlideDown),\n\n  transition(\"tabs => help-and-feedback\", inSlideLeft),\n  transition(\"help-and-feedback => tabs\", outSlideRight),\n\n  transition(\"tabs => send-type\", inSlideLeft),\n  transition(\"send-type => tabs\", outSlideRight),\n\n  transition(\"tabs => add-send, send-type => add-send\", inSlideUp),\n  transition(\"add-send => tabs, add-send => send-type\", outSlideDown),\n\n  transition(\"tabs => edit-send, send-type => edit-send\", inSlideUp),\n  transition(\"edit-send => tabs, edit-send => send-type\", outSlideDown),\n\n  transition(\"tabs => autofill\", inSlideLeft),\n  transition(\"autofill => tabs\", outSlideRight),\n]);\n","import { DIALOG_DATA } from \"@angular/cdk/dialog\";\nimport { Component, Inject } from \"@angular/core\";\n\nimport { JslibModule } from \"@bitwarden/angular/jslib.module\";\nimport { ButtonModule, DialogModule, DialogService } from \"@bitwarden/components\";\n\nexport type DesktopSyncVerificationDialogParams = {\n  fingerprint: string[];\n};\n\n@Component({\n  templateUrl: \"desktop-sync-verification-dialog.component.html\",\n  standalone: true,\n  imports: [JslibModule, ButtonModule, DialogModule],\n})\nexport class DesktopSyncVerificationDialogComponent {\n  constructor(@Inject(DIALOG_DATA) protected params: DesktopSyncVerificationDialogParams) {}\n\n  static open(dialogService: DialogService, data: DesktopSyncVerificationDialogParams) {\n    return dialogService.open(DesktopSyncVerificationDialogComponent, {\n      data,\n    });\n  }\n}\n","<bit-simple-dialog>\n  <span bitDialogTitle>\n    {{ \"desktopSyncVerificationTitle\" | i18n }}\n  </span>\n  <span bitDialogContent>\n    <p>\n      {{ \"desktopIntegrationVerificationText\" | i18n }}\n    </p>\n    <p>\n      <strong>{{ params.fingerprint.join(\"-\") }}</strong>\n    </p>\n  </span>\n  <ng-container bitDialogFooter>\n    <button bitButton type=\"button\" buttonType=\"primary\" bitDialogClose>\n      {{ \"ok\" | i18n }}\n    </button>\n  </ng-container>\n</bit-simple-dialog>\n","export enum SsoType {\n  None = 0,\n  OpenIdConnect = 1,\n  Saml2 = 2,\n}\n\nexport enum MemberDecryptionType {\n  MasterPassword = 0,\n  KeyConnector = 1,\n  TrustedDeviceEncryption = 2,\n}\n\nexport enum OpenIdConnectRedirectBehavior {\n  RedirectGet = 0,\n  FormPost = 1,\n}\n\nexport enum Saml2BindingType {\n  HttpRedirect = 1,\n  HttpPost = 2,\n}\n\nexport enum Saml2NameIdFormat {\n  NotConfigured = 0,\n  Unspecified = 1,\n  EmailAddress = 2,\n  X509SubjectName = 3,\n  WindowsDomainQualifiedName = 4,\n  KerberosPrincipalName = 5,\n  EntityIdentifier = 6,\n  Persistent = 7,\n  Transient = 8,\n}\n\nexport enum Saml2SigningBehavior {\n  IfIdpWantAuthnRequestsSigned = 0,\n  Always = 1,\n  Never = 3,\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  SecurityContext,\n} from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { NavigationEnd, Router, RouterOutlet } from \"@angular/router\";\nimport { IndividualConfig, ToastrService } from \"ngx-toastr\";\nimport { filter, concatMap, Subject, takeUntil, firstValueFrom } from \"rxjs\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { BroadcasterService } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { DialogService, SimpleDialogOptions } from \"@bitwarden/components\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../platform/services/abstractions/browser-state.service\";\n\nimport { routerTransition } from \"./app-routing.animations\";\nimport { DesktopSyncVerificationDialogComponent } from \"./components/desktop-sync-verification-dialog.component\";\n\n@Component({\n  selector: \"app-root\",\n  styles: [],\n  animations: [routerTransition],\n  template: ` <div [@routerTransition]=\"getState(o)\">\n    <router-outlet #o=\"outlet\"></router-outlet>\n  </div>`,\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  private lastActivity: number = null;\n  private activeUserId: string;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private toastrService: ToastrService,\n    private broadcasterService: BroadcasterService,\n    private authService: AuthService,\n    private i18nService: I18nService,\n    private router: Router,\n    private stateService: BrowserStateService,\n    private messagingService: MessagingService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private ngZone: NgZone,\n    private sanitizer: DomSanitizer,\n    private platformUtilsService: PlatformUtilsService,\n    private dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    // Component states must not persist between closing and reopening the popup, otherwise they become dead objects\n    // Clear them aggressively to make sure this doesn't occur\n    await this.clearComponentStates();\n\n    this.stateService.activeAccount$.pipe(takeUntil(this.destroy$)).subscribe((userId) => {\n      this.activeUserId = userId;\n    });\n\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        filter((unlocked) => unlocked),\n        concatMap(async () => {\n          await this.recordActivity();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    this.ngZone.runOutsideAngular(() => {\n      window.onmousedown = () => this.recordActivity();\n      window.ontouchstart = () => this.recordActivity();\n      window.onclick = () => this.recordActivity();\n      window.onscroll = () => this.recordActivity();\n      window.onkeypress = () => this.recordActivity();\n    });\n\n    (window as any).bitwardenPopupMainMessageListener = async (\n      msg: any,\n      sender: any,\n      sendResponse: any\n    ) => {\n      if (msg.command === \"doneLoggingOut\") {\n        this.ngZone.run(async () => {\n          this.authService.logOut(async () => {\n            if (msg.expired) {\n              this.showToast({\n                type: \"warning\",\n                title: this.i18nService.t(\"loggedOut\"),\n                text: this.i18nService.t(\"loginExpired\"),\n              });\n            }\n\n            if (this.activeUserId === null) {\n              this.router.navigate([\"home\"]);\n            }\n          });\n          this.changeDetectorRef.detectChanges();\n        });\n      } else if (msg.command === \"authBlocked\") {\n        this.ngZone.run(() => {\n          this.router.navigate([\"home\"]);\n        });\n      } else if (msg.command === \"locked\") {\n        if (msg.userId == null || msg.userId === (await this.stateService.getUserId())) {\n          this.ngZone.run(() => {\n            this.router.navigate([\"lock\"]);\n          });\n        }\n      } else if (msg.command === \"showDialog\") {\n        await this.ngZone.run(() => this.showDialog(msg));\n      } else if (msg.command === \"showNativeMessagingFinterprintDialog\") {\n        // TODO: Should be refactored to live in another service.\n        await this.ngZone.run(() => this.showNativeMessagingFingerprintDialog(msg));\n      } else if (msg.command === \"showToast\") {\n        this.ngZone.run(() => {\n          this.showToast(msg);\n        });\n      } else if (msg.command === \"reloadProcess\") {\n        const forceWindowReload =\n          this.platformUtilsService.isSafari() ||\n          this.platformUtilsService.isFirefox() ||\n          this.platformUtilsService.isOpera();\n        // Wait to make sure background has reloaded first.\n        window.setTimeout(\n          () => BrowserApi.reloadExtension(forceWindowReload ? window : null),\n          2000\n        );\n      } else if (msg.command === \"reloadPopup\") {\n        this.ngZone.run(() => {\n          this.router.navigate([\"/\"]);\n        });\n      } else if (msg.command === \"convertAccountToKeyConnector\") {\n        this.ngZone.run(async () => {\n          this.router.navigate([\"/remove-password\"]);\n        });\n      } else {\n        msg.webExtSender = sender;\n        this.broadcasterService.send(msg);\n      }\n    };\n\n    BrowserApi.messageListener(\"app.component\", (window as any).bitwardenPopupMainMessageListener);\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.router.events.pipe(takeUntil(this.destroy$)).subscribe(async (event) => {\n      if (event instanceof NavigationEnd) {\n        const url = event.urlAfterRedirects || event.url || \"\";\n        if (\n          url.startsWith(\"/tabs/\") &&\n          (window as any).previousPopupUrl != null &&\n          (window as any).previousPopupUrl.startsWith(\"/tabs/\")\n        ) {\n          await this.clearComponentStates();\n        }\n        if (url.startsWith(\"/tabs/\")) {\n          await this.stateService.setAddEditCipherInfo(null);\n        }\n        (window as any).previousPopupUrl = url;\n\n        // Clear route direction after animation (400ms)\n        if ((window as any).routeDirection != null) {\n          window.setTimeout(() => {\n            (window as any).routeDirection = null;\n          }, 400);\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  getState(outlet: RouterOutlet) {\n    if (outlet.activatedRouteData.state === \"ciphers\") {\n      const routeDirection =\n        (window as any).routeDirection != null ? (window as any).routeDirection : \"\";\n      return (\n        \"ciphers_direction=\" +\n        routeDirection +\n        \"_\" +\n        (outlet.activatedRoute.queryParams as any).value.folderId +\n        \"_\" +\n        (outlet.activatedRoute.queryParams as any).value.collectionId\n      );\n    } else {\n      return outlet.activatedRouteData.state;\n    }\n  }\n\n  private async recordActivity() {\n    if (this.activeUserId == null) {\n      return;\n    }\n\n    const now = new Date().getTime();\n    if (this.lastActivity != null && now - this.lastActivity < 250) {\n      return;\n    }\n\n    this.lastActivity = now;\n    await this.stateService.setLastActive(now, { userId: this.activeUserId });\n  }\n\n  private showToast(msg: any) {\n    let message = \"\";\n\n    const options: Partial<IndividualConfig> = {};\n\n    if (typeof msg.text === \"string\") {\n      message = msg.text;\n    } else if (msg.text.length === 1) {\n      message = msg.text[0];\n    } else {\n      msg.text.forEach(\n        (t: string) =>\n          (message += \"<p>\" + this.sanitizer.sanitize(SecurityContext.HTML, t) + \"</p>\")\n      );\n      options.enableHtml = true;\n    }\n    if (msg.options != null) {\n      if (msg.options.trustedHtml === true) {\n        options.enableHtml = true;\n      }\n      if (msg.options.timeout != null && msg.options.timeout > 0) {\n        options.timeOut = msg.options.timeout;\n      }\n    }\n\n    this.toastrService.show(message, msg.title, options, \"toast-\" + msg.type);\n  }\n\n  private async showDialog(msg: SimpleDialogOptions) {\n    await this.dialogService.openSimpleDialog(msg);\n  }\n\n  private async showNativeMessagingFingerprintDialog(msg: any) {\n    const dialogRef = DesktopSyncVerificationDialogComponent.open(this.dialogService, {\n      fingerprint: msg.fingerprint,\n    });\n\n    return firstValueFrom(dialogRef.closed);\n  }\n\n  private async clearComponentStates() {\n    if (!(await this.stateService.getIsAuthenticated())) {\n      return;\n    }\n\n    await Promise.all([\n      this.stateService.setBrowserGroupingComponentState(null),\n      this.stateService.setBrowserVaultItemsComponentState(null),\n      this.stateService.setBrowserSendComponentState(null),\n      this.stateService.setBrowserSendTypeComponentState(null),\n    ]);\n  }\n}\n","export abstract class EventUploadService {\n  uploadEvents: (userId?: string) => Promise<void>;\n}\n","export abstract class NotificationsService {\n  init: () => Promise<void>;\n  updateConnection: (sync?: boolean) => Promise<void>;\n  reconnectFromActivity: () => Promise<void>;\n  disconnectFromInactivity: () => Promise<void>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { OrganizationDomainResponse } from \"./responses/organization-domain.response\";\n\nexport abstract class OrgDomainServiceAbstraction {\n  orgDomains$: Observable<OrganizationDomainResponse[]>;\n\n  get: (orgDomainId: string) => OrganizationDomainResponse;\n\n  copyDnsTxt: (dnsTxt: string) => void;\n}\n\n// Note: this separate class is designed to hold methods that are not\n// meant to be used in components (e.g., data write methods)\nexport abstract class OrgDomainInternalServiceAbstraction extends OrgDomainServiceAbstraction {\n  upsert: (orgDomains: OrganizationDomainResponse[]) => void;\n  replace: (orgDomains: OrganizationDomainResponse[]) => void;\n  clearCache: () => void;\n  delete: (orgDomainIds: string[]) => void;\n}\n","import { Provider } from \"../../models/domain/provider\";\nimport { ProviderData } from \"../models/data/provider.data\";\n\nexport abstract class ProviderService {\n  get: (id: string) => Promise<Provider>;\n  getAll: () => Promise<Provider[]>;\n  save: (providers: { [id: string]: ProviderData }) => Promise<any>;\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class ApiKeyResponse extends BaseResponse {\n  apiKey: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.apiKey = this.getResponseProperty(\"ApiKey\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport {\n  MemberDecryptionType,\n  OpenIdConnectRedirectBehavior,\n  Saml2BindingType,\n  Saml2NameIdFormat,\n  Saml2SigningBehavior,\n  SsoType,\n} from \"../../enums/sso\";\nimport { SsoConfigView } from \"../view/sso-config.view\";\n\nexport class SsoConfigApi extends BaseResponse {\n  static fromView(view: SsoConfigView, api = new SsoConfigApi()) {\n    api.configType = view.configType;\n    api.memberDecryptionType = view.memberDecryptionType;\n\n    api.keyConnectorUrl = view.keyConnectorUrl;\n\n    if (api.configType === SsoType.OpenIdConnect) {\n      api.authority = view.openId.authority;\n      api.clientId = view.openId.clientId;\n      api.clientSecret = view.openId.clientSecret;\n      api.metadataAddress = view.openId.metadataAddress;\n      api.redirectBehavior = view.openId.redirectBehavior;\n      api.getClaimsFromUserInfoEndpoint = view.openId.getClaimsFromUserInfoEndpoint;\n      api.additionalScopes = view.openId.additionalScopes;\n      api.additionalUserIdClaimTypes = view.openId.additionalUserIdClaimTypes;\n      api.additionalEmailClaimTypes = view.openId.additionalEmailClaimTypes;\n      api.additionalNameClaimTypes = view.openId.additionalNameClaimTypes;\n      api.acrValues = view.openId.acrValues;\n      api.expectedReturnAcrValue = view.openId.expectedReturnAcrValue;\n    } else if (api.configType === SsoType.Saml2) {\n      api.spNameIdFormat = view.saml.spNameIdFormat;\n      api.spOutboundSigningAlgorithm = view.saml.spOutboundSigningAlgorithm;\n      api.spSigningBehavior = view.saml.spSigningBehavior;\n      api.spMinIncomingSigningAlgorithm = view.saml.spMinIncomingSigningAlgorithm;\n      api.spWantAssertionsSigned = view.saml.spWantAssertionsSigned;\n      api.spValidateCertificates = view.saml.spValidateCertificates;\n\n      api.idpEntityId = view.saml.idpEntityId;\n      api.idpBindingType = view.saml.idpBindingType;\n      api.idpSingleSignOnServiceUrl = view.saml.idpSingleSignOnServiceUrl;\n      api.idpSingleLogoutServiceUrl = view.saml.idpSingleLogoutServiceUrl;\n      api.idpX509PublicCert = view.saml.idpX509PublicCert;\n      api.idpOutboundSigningAlgorithm = view.saml.idpOutboundSigningAlgorithm;\n      api.idpAllowUnsolicitedAuthnResponse = view.saml.idpAllowUnsolicitedAuthnResponse;\n      api.idpWantAuthnRequestsSigned = view.saml.idpWantAuthnRequestsSigned;\n\n      // Value is inverted in the api model (disable instead of allow)\n      api.idpDisableOutboundLogoutRequests = !view.saml.idpAllowOutboundLogoutRequests;\n    }\n\n    return api;\n  }\n  configType: SsoType;\n  memberDecryptionType: MemberDecryptionType;\n\n  keyConnectorUrl: string;\n\n  // OpenId\n  authority: string;\n  clientId: string;\n  clientSecret: string;\n  metadataAddress: string;\n  redirectBehavior: OpenIdConnectRedirectBehavior;\n  getClaimsFromUserInfoEndpoint: boolean;\n  additionalScopes: string;\n  additionalUserIdClaimTypes: string;\n  additionalEmailClaimTypes: string;\n  additionalNameClaimTypes: string;\n  acrValues: string;\n  expectedReturnAcrValue: string;\n\n  // SAML\n  spNameIdFormat: Saml2NameIdFormat;\n  spOutboundSigningAlgorithm: string;\n  spSigningBehavior: Saml2SigningBehavior;\n  spMinIncomingSigningAlgorithm: string;\n  spWantAssertionsSigned: boolean;\n  spValidateCertificates: boolean;\n\n  idpEntityId: string;\n  idpBindingType: Saml2BindingType;\n  idpSingleSignOnServiceUrl: string;\n  idpSingleLogoutServiceUrl: string;\n  idpX509PublicCert: string;\n  idpOutboundSigningAlgorithm: string;\n  idpAllowUnsolicitedAuthnResponse: boolean;\n  idpDisableOutboundLogoutRequests: boolean;\n  idpWantAuthnRequestsSigned: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n\n    this.configType = this.getResponseProperty(\"ConfigType\");\n    this.memberDecryptionType = this.getResponseProperty(\"MemberDecryptionType\");\n\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n\n    this.authority = this.getResponseProperty(\"Authority\");\n    this.clientId = this.getResponseProperty(\"ClientId\");\n    this.clientSecret = this.getResponseProperty(\"ClientSecret\");\n    this.metadataAddress = this.getResponseProperty(\"MetadataAddress\");\n    this.redirectBehavior = this.getResponseProperty(\"RedirectBehavior\");\n    this.getClaimsFromUserInfoEndpoint = this.getResponseProperty(\"GetClaimsFromUserInfoEndpoint\");\n    this.additionalScopes = this.getResponseProperty(\"AdditionalScopes\");\n    this.additionalUserIdClaimTypes = this.getResponseProperty(\"AdditionalUserIdClaimTypes\");\n    this.additionalEmailClaimTypes = this.getResponseProperty(\"AdditionalEmailClaimTypes\");\n    this.additionalNameClaimTypes = this.getResponseProperty(\"AdditionalNameClaimTypes\");\n    this.acrValues = this.getResponseProperty(\"AcrValues\");\n    this.expectedReturnAcrValue = this.getResponseProperty(\"ExpectedReturnAcrValue\");\n\n    this.spNameIdFormat = this.getResponseProperty(\"SpNameIdFormat\");\n    this.spOutboundSigningAlgorithm = this.getResponseProperty(\"SpOutboundSigningAlgorithm\");\n    this.spSigningBehavior = this.getResponseProperty(\"SpSigningBehavior\");\n    this.spMinIncomingSigningAlgorithm = this.getResponseProperty(\"SpMinIncomingSigningAlgorithm\");\n    this.spWantAssertionsSigned = this.getResponseProperty(\"SpWantAssertionsSigned\");\n    this.spValidateCertificates = this.getResponseProperty(\"SpValidateCertificates\");\n\n    this.idpEntityId = this.getResponseProperty(\"IdpEntityId\");\n    this.idpBindingType = this.getResponseProperty(\"IdpBindingType\");\n    this.idpSingleSignOnServiceUrl = this.getResponseProperty(\"IdpSingleSignOnServiceUrl\");\n    this.idpSingleLogoutServiceUrl = this.getResponseProperty(\"IdpSingleLogoutServiceUrl\");\n    this.idpX509PublicCert = this.getResponseProperty(\"IdpX509PublicCert\");\n    this.idpOutboundSigningAlgorithm = this.getResponseProperty(\"IdpOutboundSigningAlgorithm\");\n    this.idpAllowUnsolicitedAuthnResponse = this.getResponseProperty(\n      \"IdpAllowUnsolicitedAuthnResponse\"\n    );\n    this.idpDisableOutboundLogoutRequests = this.getResponseProperty(\n      \"IdpDisableOutboundLogoutRequests\"\n    );\n    this.idpWantAuthnRequestsSigned = this.getResponseProperty(\"IdpWantAuthnRequestsSigned\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { SsoConfigApi } from \"../api/sso-config.api\";\n\nexport class OrganizationSsoResponse extends BaseResponse {\n  enabled: boolean;\n  identifier: string;\n  data: SsoConfigApi;\n  urls: SsoUrls;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.data =\n      this.getResponseProperty(\"Data\") != null\n        ? new SsoConfigApi(this.getResponseProperty(\"Data\"))\n        : null;\n    this.urls = new SsoUrls(this.getResponseProperty(\"Urls\"));\n  }\n}\n\nclass SsoUrls extends BaseResponse {\n  callbackPath: string;\n  signedOutCallbackPath: string;\n  spEntityId: string;\n  spMetadataUrl: string;\n  spAcsUrl: string;\n\n  constructor(response: any) {\n    super(response);\n    this.callbackPath = this.getResponseProperty(\"CallbackPath\");\n    this.signedOutCallbackPath = this.getResponseProperty(\"SignedOutCallbackPath\");\n    this.spEntityId = this.getResponseProperty(\"SpEntityId\");\n    this.spMetadataUrl = this.getResponseProperty(\"SpMetadataUrl\");\n    this.spAcsUrl = this.getResponseProperty(\"SpAcsUrl\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { PaymentMethodType, TransactionType } from \"../../enums\";\n\nexport class BillingResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n\nexport class BillingSourceResponse extends BaseResponse {\n  type: PaymentMethodType;\n  cardBrand: string;\n  description: string;\n  needsVerification: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.cardBrand = this.getResponseProperty(\"CardBrand\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.needsVerification = this.getResponseProperty(\"NeedsVerification\");\n  }\n}\n\nexport class BillingInvoiceResponse extends BaseResponse {\n  url: string;\n  pdfUrl: string;\n  number: string;\n  paid: boolean;\n  date: string;\n  amount: number;\n\n  constructor(response: any) {\n    super(response);\n    this.url = this.getResponseProperty(\"Url\");\n    this.pdfUrl = this.getResponseProperty(\"PdfUrl\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.paid = this.getResponseProperty(\"Paid\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n\nexport class BillingTransactionResponse extends BaseResponse {\n  createdDate: string;\n  amount: number;\n  refunded: boolean;\n  partiallyRefunded: boolean;\n  refundedAmount: number;\n  type: TransactionType;\n  paymentMethodType: PaymentMethodType;\n  details: string;\n\n  constructor(response: any) {\n    super(response);\n    this.createdDate = this.getResponseProperty(\"CreatedDate\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.refunded = this.getResponseProperty(\"Refunded\");\n    this.partiallyRefunded = this.getResponseProperty(\"PartiallyRefunded\");\n    this.refundedAmount = this.getResponseProperty(\"RefundedAmount\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.paymentMethodType = this.getResponseProperty(\"PaymentMethodType\");\n    this.details = this.getResponseProperty(\"Details\");\n  }\n}\n","import { ProductType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { BitwardenProductType, PlanType } from \"../../enums\";\n\nexport class PlanResponse extends BaseResponse {\n  type: PlanType;\n  product: ProductType;\n  bitwardenProduct: BitwardenProductType;\n  name: string;\n  isAnnual: boolean;\n  nameLocalizationKey: string;\n  descriptionLocalizationKey: string;\n  canBeUsedByBusiness: boolean;\n  baseSeats: number;\n  baseStorageGb: number;\n  maxCollections: number;\n  maxUsers: number;\n\n  hasAdditionalSeatsOption: boolean;\n  maxAdditionalSeats: number;\n  hasAdditionalStorageOption: boolean;\n  maxAdditionalStorage: number;\n  hasPremiumAccessOption: boolean;\n  trialPeriodDays: number;\n\n  hasSelfHost: boolean;\n  hasPolicies: boolean;\n  hasGroups: boolean;\n  hasDirectory: boolean;\n  hasEvents: boolean;\n  hasTotp: boolean;\n  has2fa: boolean;\n  hasApi: boolean;\n  hasSso: boolean;\n  hasResetPassword: boolean;\n  usersGetPremium: boolean;\n\n  upgradeSortOrder: number;\n  displaySortOrder: number;\n  legacyYear: number;\n  disabled: boolean;\n\n  stripePlanId: string;\n  stripeSeatPlanId: string;\n  stripeStoragePlanId: string;\n  stripePremiumAccessPlanId: string;\n  basePrice: number;\n  seatPrice: number;\n  additionalStoragePricePerGb: number;\n  premiumAccessOptionPrice: number;\n\n  // SM only\n  additionalPricePerServiceAccount: number;\n  baseServiceAccount: number;\n  maxServiceAccount: number;\n  hasAdditionalServiceAccountOption: boolean;\n  maxProjects: number;\n  maxAdditionalServiceAccounts: number;\n  stripeServiceAccountPlanId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.product = this.getResponseProperty(\"Product\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.isAnnual = this.getResponseProperty(\"IsAnnual\");\n    this.nameLocalizationKey = this.getResponseProperty(\"NameLocalizationKey\");\n    this.descriptionLocalizationKey = this.getResponseProperty(\"DescriptionLocalizationKey\");\n    this.canBeUsedByBusiness = this.getResponseProperty(\"CanBeUsedByBusiness\");\n    this.baseSeats = this.getResponseProperty(\"BaseSeats\");\n    this.baseStorageGb = this.getResponseProperty(\"BaseStorageGb\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxUsers = this.getResponseProperty(\"MaxUsers\");\n    this.hasAdditionalSeatsOption = this.getResponseProperty(\"HasAdditionalSeatsOption\");\n    this.maxAdditionalSeats = this.getResponseProperty(\"MaxAdditionalSeats\");\n    this.hasAdditionalStorageOption = this.getResponseProperty(\"HasAdditionalStorageOption\");\n    this.maxAdditionalStorage = this.getResponseProperty(\"MaxAdditionalStorage\");\n    this.hasPremiumAccessOption = this.getResponseProperty(\"HasPremiumAccessOption\");\n    this.trialPeriodDays = this.getResponseProperty(\"TrialPeriodDays\");\n    this.hasSelfHost = this.getResponseProperty(\"HasSelfHost\");\n    this.hasPolicies = this.getResponseProperty(\"HasPolicies\");\n    this.hasGroups = this.getResponseProperty(\"HasGroups\");\n    this.hasDirectory = this.getResponseProperty(\"HasDirectory\");\n    this.hasEvents = this.getResponseProperty(\"HasEvents\");\n    this.hasTotp = this.getResponseProperty(\"HasTotp\");\n    this.has2fa = this.getResponseProperty(\"Has2fa\");\n    this.hasApi = this.getResponseProperty(\"HasApi\");\n    this.hasSso = this.getResponseProperty(\"HasSso\");\n    this.hasResetPassword = this.getResponseProperty(\"HasResetPassword\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.upgradeSortOrder = this.getResponseProperty(\"UpgradeSortOrder\");\n    this.displaySortOrder = this.getResponseProperty(\"SortOrder\");\n    this.legacyYear = this.getResponseProperty(\"LegacyYear\");\n    this.disabled = this.getResponseProperty(\"Disabled\");\n    this.stripePlanId = this.getResponseProperty(\"StripePlanId\");\n    this.stripeSeatPlanId = this.getResponseProperty(\"StripeSeatPlanId\");\n    this.stripeStoragePlanId = this.getResponseProperty(\"StripeStoragePlanId\");\n    this.stripePremiumAccessPlanId = this.getResponseProperty(\"StripePremiumAccessPlanId\");\n    this.basePrice = this.getResponseProperty(\"BasePrice\");\n    this.seatPrice = this.getResponseProperty(\"SeatPrice\");\n    this.additionalStoragePricePerGb = this.getResponseProperty(\"AdditionalStoragePricePerGb\");\n    this.premiumAccessOptionPrice = this.getResponseProperty(\"PremiumAccessOptionPrice\");\n\n    this.bitwardenProduct = this.getResponseProperty(\"BitwardenProduct\");\n    this.additionalPricePerServiceAccount = this.getResponseProperty(\n      \"AdditionalPricePerServiceAccount\"\n    );\n    this.baseServiceAccount = this.getResponseProperty(\"BaseServiceAccount\");\n    this.maxServiceAccount = this.getResponseProperty(\"MaxServiceAccount\");\n    this.hasAdditionalServiceAccountOption = this.getResponseProperty(\n      \"HasAdditionalServiceAccountOption\"\n    );\n    this.maxProjects = this.getResponseProperty(\"MaxProjects\");\n    this.maxAdditionalServiceAccounts = this.getResponseProperty(\"MaxAdditionalServiceAccounts\");\n    this.stripeServiceAccountPlanId = this.getResponseProperty(\"StripeServiceAccountPlanId\");\n  }\n}\n","import { PlanType } from \"../../../billing/enums\";\nimport { PlanResponse } from \"../../../billing/models/response/plan.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationResponse extends BaseResponse {\n  id: string;\n  name: string;\n  businessName: string;\n  businessAddress1: string;\n  businessAddress2: string;\n  businessAddress3: string;\n  businessCountry: string;\n  businessTaxNumber: string;\n  billingEmail: string;\n  plan: PlanResponse;\n  secretsManagerPlan: PlanResponse;\n  planType: PlanType;\n  seats: number;\n  maxAutoscaleSeats: number;\n  maxCollections: number;\n  maxStorageGb: number;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  hasPublicAndPrivateKeys: boolean;\n  usePasswordManager: boolean;\n  smSeats?: number;\n  smServiceAccounts?: number;\n  maxAutoscaleSmSeats?: number;\n  maxAutoscaleSmServiceAccounts?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.businessAddress1 = this.getResponseProperty(\"BusinessAddress1\");\n    this.businessAddress2 = this.getResponseProperty(\"BusinessAddress2\");\n    this.businessAddress3 = this.getResponseProperty(\"BusinessAddress3\");\n    this.businessCountry = this.getResponseProperty(\"BusinessCountry\");\n    this.businessTaxNumber = this.getResponseProperty(\"BusinessTaxNumber\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n\n    const plan = this.getResponseProperty(\"Plan\");\n    this.plan = plan == null ? null : new PlanResponse(plan);\n\n    const secretsManagerPlan = this.getResponseProperty(\"SecretsManagerPlan\");\n    this.secretsManagerPlan =\n      secretsManagerPlan == null ? null : new PlanResponse(secretsManagerPlan);\n\n    this.planType = this.getResponseProperty(\"PlanType\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxAutoscaleSeats = this.getResponseProperty(\"MaxAutoscaleSeats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.useSecretsManager = this.getResponseProperty(\"UseSecretsManager\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n    this.usePasswordManager = this.getResponseProperty(\"UsePasswordManager\");\n    this.smSeats = this.getResponseProperty(\"SmSeats\");\n    this.smServiceAccounts = this.getResponseProperty(\"SmServiceAccounts\");\n    this.maxAutoscaleSmSeats = this.getResponseProperty(\"MaxAutoscaleSmSeats\");\n    this.maxAutoscaleSmServiceAccounts = this.getResponseProperty(\"MaxAutoscaleSmServiceAccounts\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { BitwardenProductType } from \"../../enums\";\n\nexport class SubscriptionResponse extends BaseResponse {\n  storageName: string;\n  storageGb: number;\n  maxStorageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  license: any;\n  expiration: string;\n  usingInAppPurchase: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.license = this.getResponseProperty(\"License\");\n    this.expiration = this.getResponseProperty(\"Expiration\");\n    this.usingInAppPurchase = this.getResponseProperty(\"UsingInAppPurchase\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n  }\n}\n\nexport class BillingSubscriptionResponse extends BaseResponse {\n  trialStartDate: string;\n  trialEndDate: string;\n  periodStartDate: string;\n  periodEndDate: string;\n  cancelledDate: string;\n  cancelAtEndDate: boolean;\n  status: string;\n  cancelled: boolean;\n  items: BillingSubscriptionItemResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.trialEndDate = this.getResponseProperty(\"TrialStartDate\");\n    this.trialEndDate = this.getResponseProperty(\"TrialEndDate\");\n    this.periodStartDate = this.getResponseProperty(\"PeriodStartDate\");\n    this.periodEndDate = this.getResponseProperty(\"PeriodEndDate\");\n    this.cancelledDate = this.getResponseProperty(\"CancelledDate\");\n    this.cancelAtEndDate = this.getResponseProperty(\"CancelAtEndDate\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.cancelled = this.getResponseProperty(\"Cancelled\");\n    const items = this.getResponseProperty(\"Items\");\n    if (items != null) {\n      this.items = items.map((i: any) => new BillingSubscriptionItemResponse(i));\n    }\n  }\n}\n\nexport class BillingSubscriptionItemResponse extends BaseResponse {\n  name: string;\n  amount: number;\n  quantity: number;\n  interval: string;\n  sponsoredSubscriptionItem: boolean;\n  addonSubscriptionItem: boolean;\n  bitwardenProduct: BitwardenProductType;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.quantity = this.getResponseProperty(\"Quantity\");\n    this.interval = this.getResponseProperty(\"Interval\");\n    this.sponsoredSubscriptionItem = this.getResponseProperty(\"SponsoredSubscriptionItem\");\n    this.addonSubscriptionItem = this.getResponseProperty(\"AddonSubscriptionItem\");\n    this.bitwardenProduct = this.getResponseProperty(\"BitwardenProduct\");\n  }\n}\n\nexport class BillingSubscriptionUpcomingInvoiceResponse extends BaseResponse {\n  date: string;\n  amount?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n","import { OrganizationResponse } from \"../../../admin-console/models/response/organization.response\";\n\nimport {\n  BillingSubscriptionResponse,\n  BillingSubscriptionUpcomingInvoiceResponse,\n} from \"./subscription.response\";\n\nexport class OrganizationSubscriptionResponse extends OrganizationResponse {\n  storageName: string;\n  storageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  expiration: string;\n  expirationWithoutGracePeriod: string;\n  secretsManagerBeta: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n    this.expiration = this.getResponseProperty(\"Expiration\");\n    this.expirationWithoutGracePeriod = this.getResponseProperty(\"ExpirationWithoutGracePeriod\");\n    this.secretsManagerBeta = this.getResponseProperty(\"SecretsManagerBeta\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PermissionsApi extends BaseResponse {\n  accessEventLogs: boolean;\n  accessImportExport: boolean;\n  accessReports: boolean;\n  createNewCollections: boolean;\n  editAnyCollection: boolean;\n  deleteAnyCollection: boolean;\n  editAssignedCollections: boolean;\n  deleteAssignedCollections: boolean;\n  manageCiphers: boolean;\n  manageGroups: boolean;\n  manageSso: boolean;\n  managePolicies: boolean;\n  manageUsers: boolean;\n  manageResetPassword: boolean;\n  manageScim: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return this;\n    }\n    this.accessEventLogs = this.getResponseProperty(\"AccessEventLogs\");\n    this.accessImportExport = this.getResponseProperty(\"AccessImportExport\");\n    this.accessReports = this.getResponseProperty(\"AccessReports\");\n\n    this.createNewCollections = this.getResponseProperty(\"CreateNewCollections\");\n    this.editAnyCollection = this.getResponseProperty(\"EditAnyCollection\");\n    this.deleteAnyCollection = this.getResponseProperty(\"DeleteAnyCollection\");\n    this.editAssignedCollections = this.getResponseProperty(\"EditAssignedCollections\");\n    this.deleteAssignedCollections = this.getResponseProperty(\"DeleteAssignedCollections\");\n\n    this.manageCiphers = this.getResponseProperty(\"ManageCiphers\");\n    this.manageGroups = this.getResponseProperty(\"ManageGroups\");\n    this.manageSso = this.getResponseProperty(\"ManageSso\");\n    this.managePolicies = this.getResponseProperty(\"ManagePolicies\");\n    this.manageUsers = this.getResponseProperty(\"ManageUsers\");\n    this.manageResetPassword = this.getResponseProperty(\"ManageResetPassword\");\n    this.manageScim = this.getResponseProperty(\"ManageScim\");\n  }\n}\n","import { ProductType, ProviderType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nexport class ProfileOrganizationResponse extends BaseResponse {\n  id: string;\n  name: string;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  usePasswordManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  key: string;\n  hasPublicAndPrivateKeys: boolean;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.usePolicies = this.getResponseProperty(\"UsePolicies\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useSso = this.getResponseProperty(\"UseSso\");\n    this.useKeyConnector = this.getResponseProperty(\"UseKeyConnector\") ?? false;\n    this.useScim = this.getResponseProperty(\"UseScim\") ?? false;\n    this.useCustomPermissions = this.getResponseProperty(\"UseCustomPermissions\") ?? false;\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.useSecretsManager = this.getResponseProperty(\"UseSecretsManager\");\n    this.usePasswordManager = this.getResponseProperty(\"UsePasswordManager\");\n    this.useActivateAutofillPolicy = this.getResponseProperty(\"UseActivateAutofillPolicy\");\n    this.selfHost = this.getResponseProperty(\"SelfHost\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.ssoBound = this.getResponseProperty(\"SsoBound\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.providerName = this.getResponseProperty(\"ProviderName\");\n    this.providerType = this.getResponseProperty(\"ProviderType\");\n    this.familySponsorshipFriendlyName = this.getResponseProperty(\"FamilySponsorshipFriendlyName\");\n    this.familySponsorshipAvailable = this.getResponseProperty(\"FamilySponsorshipAvailable\");\n    this.planProductType = this.getResponseProperty(\"PlanProductType\");\n    this.keyConnectorEnabled = this.getResponseProperty(\"KeyConnectorEnabled\") ?? false;\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    const familySponsorshipLastSyncDateString = this.getResponseProperty(\n      \"FamilySponsorshipLastSyncDate\"\n    );\n    if (familySponsorshipLastSyncDateString) {\n      this.familySponsorshipLastSyncDate = new Date(familySponsorshipLastSyncDateString);\n    }\n    const familySponsorshipValidUntilString = this.getResponseProperty(\n      \"FamilySponsorshipValidUntil\"\n    );\n    if (familySponsorshipValidUntilString) {\n      this.familySponsorshipValidUntil = new Date(familySponsorshipValidUntilString);\n    }\n    this.familySponsorshipToDelete = this.getResponseProperty(\"FamilySponsorshipToDelete\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"./profile-organization.response\";\n\nexport class ProfileProviderOrganizationResponse extends ProfileOrganizationResponse {\n  constructor(response: any) {\n    super(response);\n    this.keyConnectorEnabled = false;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { ProviderUserStatusType, ProviderUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nexport class ProfileProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  key: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  permissions: PermissionsApi;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"../../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../../admin-console/models/response/profile-provider.response\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ProfileResponse extends BaseResponse {\n  id: string;\n  name: string;\n  email: string;\n  emailVerified: boolean;\n  masterPasswordHint: string;\n  premiumPersonally: boolean;\n  premiumFromOrganization: boolean;\n  culture: string;\n  twoFactorEnabled: boolean;\n  key: string;\n  avatarColor: string;\n  privateKey: string;\n  securityStamp: string;\n  forcePasswordReset: boolean;\n  usesKeyConnector: boolean;\n  organizations: ProfileOrganizationResponse[] = [];\n  providers: ProfileProviderResponse[] = [];\n  providerOrganizations: ProfileProviderOrganizationResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.emailVerified = this.getResponseProperty(\"EmailVerified\");\n    this.masterPasswordHint = this.getResponseProperty(\"MasterPasswordHint\");\n    this.premiumPersonally = this.getResponseProperty(\"Premium\");\n    this.premiumFromOrganization = this.getResponseProperty(\"PremiumFromOrganization\");\n    this.culture = this.getResponseProperty(\"Culture\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.securityStamp = this.getResponseProperty(\"SecurityStamp\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\") ?? false;\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n\n    const organizations = this.getResponseProperty(\"Organizations\");\n    if (organizations != null) {\n      this.organizations = organizations.map((o: any) => new ProfileOrganizationResponse(o));\n    }\n    const providers = this.getResponseProperty(\"Providers\");\n    if (providers != null) {\n      this.providers = providers.map((o: any) => new ProfileProviderResponse(o));\n    }\n    const providerOrganizations = this.getResponseProperty(\"ProviderOrganizations\");\n    if (providerOrganizations != null) {\n      this.providerOrganizations = providerOrganizations.map(\n        (o: any) => new ProfileProviderOrganizationResponse(o)\n      );\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\n\nexport class PaymentResponse extends BaseResponse {\n  userProfile: ProfileResponse;\n  paymentIntentClientSecret: string;\n  success: boolean;\n\n  constructor(response: any) {\n    super(response);\n    const userProfile = this.getResponseProperty(\"UserProfile\");\n    if (userProfile != null) {\n      this.userProfile = new ProfileResponse(userProfile);\n    }\n    this.paymentIntentClientSecret = this.getResponseProperty(\"PaymentIntentClientSecret\");\n    this.success = this.getResponseProperty(\"Success\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TaxInfoResponse extends BaseResponse {\n  taxId: string;\n  taxIdType: string;\n  line1: string;\n  line2: string;\n  city: string;\n  state: string;\n  country: string;\n  postalCode: string;\n\n  constructor(response: any) {\n    super(response);\n    this.taxId = this.getResponseProperty(\"TaxIdNumber\");\n    this.taxIdType = this.getResponseProperty(\"TaxIdType\");\n    this.line1 = this.getResponseProperty(\"Line1\");\n    this.line2 = this.getResponseProperty(\"Line2\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ListResponse<T> extends BaseResponse {\n  data: T[];\n  continuationToken: string;\n\n  constructor(response: any, t: new (dataResponse: any) => T) {\n    super(response);\n    const data = this.getResponseProperty(\"Data\");\n    this.data = data == null ? [] : data.map((dr: any) => new t(dr));\n    this.continuationToken = this.getResponseProperty(\"ContinuationToken\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationApiKeyType } from \"../../enums\";\n\nexport class OrganizationApiKeyInformationResponse extends BaseResponse {\n  keyType: OrganizationApiKeyType;\n\n  constructor(response: any) {\n    super(response);\n    this.keyType = this.getResponseProperty(\"KeyType\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationAutoEnrollStatusResponse extends BaseResponse {\n  id: string;\n  resetPasswordEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.resetPasswordEnabled = this.getResponseProperty(\"ResetPasswordEnabled\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class KeysResponse extends BaseResponse {\n  privateKey: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { KeysResponse } from \"../../../models/response/keys.response\";\n\nexport class OrganizationKeysResponse extends KeysResponse {\n  constructor(response: any) {\n    super(response);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ProductType, ProviderType } from \"../../../enums\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { OrganizationData } from \"../data/organization.data\";\n\nexport class Organization {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n\n  /**\n   * The member's role in the organization.\n   * Avoid using this for permission checks - use the getters instead (e.g. isOwner, isAdmin, canManageX), because they\n   * properly handle permission inheritance and relationships.\n   */\n  type: OrganizationUserType;\n\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  usePasswordManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  /**\n   * Indicates that a user is a ProviderUser for the organization\n   */\n  isProviderUser: boolean;\n  /**\n   * Indicates that a user is a member for the organization (may be `false` if they have access via a Provider only)\n   */\n  isMember: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(obj?: OrganizationData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.usePolicies = obj.usePolicies;\n    this.useGroups = obj.useGroups;\n    this.useDirectory = obj.useDirectory;\n    this.useEvents = obj.useEvents;\n    this.useTotp = obj.useTotp;\n    this.use2fa = obj.use2fa;\n    this.useApi = obj.useApi;\n    this.useSso = obj.useSso;\n    this.useKeyConnector = obj.useKeyConnector;\n    this.useScim = obj.useScim;\n    this.useCustomPermissions = obj.useCustomPermissions;\n    this.useResetPassword = obj.useResetPassword;\n    this.useSecretsManager = obj.useSecretsManager;\n    this.usePasswordManager = obj.usePasswordManager;\n    this.useActivateAutofillPolicy = obj.useActivateAutofillPolicy;\n    this.selfHost = obj.selfHost;\n    this.usersGetPremium = obj.usersGetPremium;\n    this.seats = obj.seats;\n    this.maxCollections = obj.maxCollections;\n    this.maxStorageGb = obj.maxStorageGb;\n    this.ssoBound = obj.ssoBound;\n    this.identifier = obj.identifier;\n    this.permissions = obj.permissions;\n    this.resetPasswordEnrolled = obj.resetPasswordEnrolled;\n    this.userId = obj.userId;\n    this.hasPublicAndPrivateKeys = obj.hasPublicAndPrivateKeys;\n    this.providerId = obj.providerId;\n    this.providerName = obj.providerName;\n    this.providerType = obj.providerType;\n    this.isProviderUser = obj.isProviderUser;\n    this.isMember = obj.isMember;\n    this.familySponsorshipFriendlyName = obj.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = obj.familySponsorshipAvailable;\n    this.planProductType = obj.planProductType;\n    this.keyConnectorEnabled = obj.keyConnectorEnabled;\n    this.keyConnectorUrl = obj.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = obj.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = obj.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = obj.familySponsorshipToDelete;\n    this.accessSecretsManager = obj.accessSecretsManager;\n  }\n\n  get canAccess() {\n    if (this.isOwner) {\n      return true;\n    }\n    return this.enabled && this.status === OrganizationUserStatusType.Confirmed;\n  }\n\n  /**\n   * Whether a user has Manager permissions or greater\n   */\n  get isManager() {\n    return this.type === OrganizationUserType.Manager || this.isAdmin;\n  }\n\n  /**\n   * Whether a user has Admin permissions or greater\n   */\n  get isAdmin() {\n    return this.type === OrganizationUserType.Admin || this.isOwner;\n  }\n\n  /**\n   * Whether a user has Owner permissions (including ProviderUsers)\n   */\n  get isOwner() {\n    return this.type === OrganizationUserType.Owner || this.isProviderUser;\n  }\n\n  get canAccessEventLogs() {\n    return (this.isAdmin || this.permissions.accessEventLogs) && this.useEvents;\n  }\n\n  get canAccessImportExport() {\n    return this.isAdmin || this.permissions.accessImportExport;\n  }\n\n  get canAccessReports() {\n    return this.isAdmin || this.permissions.accessReports;\n  }\n\n  get canCreateNewCollections() {\n    return this.isManager || this.permissions.createNewCollections;\n  }\n\n  get canEditAnyCollection() {\n    return this.isAdmin || this.permissions.editAnyCollection;\n  }\n\n  get canUseAdminCollections() {\n    return this.canEditAnyCollection;\n  }\n\n  get canDeleteAnyCollection() {\n    return this.isAdmin || this.permissions.deleteAnyCollection;\n  }\n\n  get canViewAllCollections() {\n    return this.canEditAnyCollection || this.canDeleteAnyCollection;\n  }\n\n  get canEditAssignedCollections() {\n    return this.isManager || this.permissions.editAssignedCollections;\n  }\n\n  get canDeleteAssignedCollections() {\n    return this.isManager || this.permissions.deleteAssignedCollections;\n  }\n\n  get canViewAssignedCollections() {\n    return this.canDeleteAssignedCollections || this.canEditAssignedCollections;\n  }\n\n  get canManageGroups() {\n    return (this.isAdmin || this.permissions.manageGroups) && this.useGroups;\n  }\n\n  get canManageSso() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageDomainVerification() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageScim() {\n    return (this.isAdmin || this.permissions.manageScim) && this.useScim;\n  }\n\n  get canManagePolicies() {\n    return (this.isAdmin || this.permissions.managePolicies) && this.usePolicies;\n  }\n\n  get canManageUsers() {\n    return this.isAdmin || this.permissions.manageUsers;\n  }\n\n  get canManageUsersPassword() {\n    return this.isAdmin || this.permissions.manageResetPassword;\n  }\n\n  get canManageDeviceApprovals() {\n    return (this.isAdmin || this.permissions.manageResetPassword) && this.useSso;\n  }\n\n  get isExemptFromPolicies() {\n    return this.canManagePolicies;\n  }\n\n  get canViewSubscription() {\n    if (this.canEditSubscription) {\n      return true;\n    }\n\n    return this.hasProvider && this.providerType === ProviderType.Msp\n      ? this.isProviderUser\n      : this.isOwner;\n  }\n\n  get canEditSubscription() {\n    return this.hasProvider ? this.isProviderUser : this.isOwner;\n  }\n\n  get canEditPaymentMethods() {\n    return this.canEditSubscription;\n  }\n\n  get canViewBillingHistory() {\n    return this.canEditSubscription;\n  }\n\n  get hasProvider() {\n    return this.providerId != null || this.providerName != null;\n  }\n\n  get canAccessSecretsManager() {\n    return this.useSecretsManager && this.accessSecretsManager;\n  }\n\n  get isFreeOrg() {\n    // return true if organization needs to be upgraded from a free org\n    return !this.useTotp;\n  }\n\n  static fromJSON(json: Jsonify<Organization>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Organization(), json, {\n      familySponsorshipLastSyncDate: new Date(json.familySponsorshipLastSyncDate),\n      familySponsorshipValidUntil: new Date(json.familySponsorshipValidUntil),\n    });\n  }\n}\n","import { BehaviorSubject, concatMap, map, Observable } from \"rxjs\";\n\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport {\n  InternalOrganizationServiceAbstraction,\n  isMember,\n} from \"../../abstractions/organization/organization.service.abstraction\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport class OrganizationService implements InternalOrganizationServiceAbstraction {\n  protected _organizations = new BehaviorSubject<Organization[]>([]);\n\n  organizations$ = this._organizations.asObservable();\n  memberOrganizations$ = this.organizations$.pipe(map((orgs) => orgs.filter(isMember)));\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (!unlocked) {\n            this._organizations.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getOrganizations();\n          this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  get$(id: string): Observable<Organization | undefined> {\n    return this.organizations$.pipe(map((orgs) => orgs.find((o) => o.id === id)));\n  }\n\n  async getAll(userId?: string): Promise<Organization[]> {\n    const organizationsMap = await this.stateService.getOrganizations({ userId: userId });\n    return Object.values(organizationsMap || {}).map((o) => new Organization(o));\n  }\n\n  async canManageSponsorships(): Promise<boolean> {\n    const organizations = this._organizations.getValue();\n    return organizations.some(\n      (o) => o.familySponsorshipAvailable || o.familySponsorshipFriendlyName !== null\n    );\n  }\n\n  hasOrganizations(): boolean {\n    const organizations = this._organizations.getValue();\n    return organizations.length > 0;\n  }\n\n  async upsert(organization: OrganizationData): Promise<void> {\n    let organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      organizations = {};\n    }\n\n    organizations[organization.id] = organization;\n\n    await this.replace(organizations);\n  }\n\n  async delete(id: string): Promise<void> {\n    const organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      return;\n    }\n\n    if (organizations[id] == null) {\n      return;\n    }\n\n    delete organizations[id];\n    await this.replace(organizations);\n  }\n\n  get(id: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.id === id);\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  async getFromState(id: string): Promise<Organization> {\n    const organizationsMap = await this.stateService.getOrganizations();\n    const organization = organizationsMap[id];\n    if (organization == null) {\n      return null;\n    }\n\n    return new Organization(organization);\n  }\n\n  getByIdentifier(identifier: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.identifier === identifier);\n  }\n\n  async replace(organizations: { [id: string]: OrganizationData }) {\n    await this.stateService.setOrganizations(organizations);\n    this.updateObservables(organizations);\n  }\n\n  private updateObservables(organizationsMap: { [id: string]: OrganizationData }) {\n    const organizations = Object.values(organizationsMap || {}).map((o) => new Organization(o));\n    this._organizations.next(organizations);\n  }\n}\n","import { PolicyType } from \"../../enums\";\nimport { PolicyResponse } from \"../response/policy.response\";\n\nexport class PolicyData {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: PolicyResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.type = response.type;\n    this.data = response.data;\n    this.enabled = response.enabled;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { PolicyType } from \"../../enums\";\n\nexport class PolicyResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.data = this.getResponseProperty(\"Data\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"../../../abstractions/api.service\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { PolicyApiServiceAbstraction } from \"../../abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiService implements PolicyApiServiceAbstraction {\n  constructor(\n    private policyService: InternalPolicyService,\n    private apiService: ApiService,\n    private stateService: StateService\n  ) {}\n\n  async getPolicy(organizationId: string, type: PolicyType): Promise<PolicyResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      null,\n      true,\n      true\n    );\n    return new PolicyResponse(r);\n  }\n\n  async getPolicies(organizationId: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByToken(\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" +\n        organizationId +\n        \"/policies/token?\" +\n        \"token=\" +\n        encodeURIComponent(token) +\n        \"&email=\" +\n        Utils.encodeRFC3986URIComponent(email) +\n        \"&organizationUserId=\" +\n        organizationUserId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByInvitedUser(\n    organizationId: string,\n    userId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/invited-user?\" + \"userId=\" + userId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getMasterPasswordPoliciesForInvitedUsers(\n    orgId: string\n  ): Promise<MasterPasswordPolicyOptions> {\n    const userId = await this.stateService.getUserId();\n    const response = await this.getPoliciesByInvitedUser(orgId, userId);\n    const policies = await this.policyService.mapPoliciesFromToken(response);\n    return await firstValueFrom(this.policyService.masterPasswordPolicyOptions$(policies));\n  }\n\n  async putPolicy(organizationId: string, type: PolicyType, request: PolicyRequest): Promise<any> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      request,\n      true,\n      true\n    );\n    const response = new PolicyResponse(r);\n    const data = new PolicyData(response);\n    await this.policyService.upsert(data);\n  }\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../data/policy.data\";\n\nexport class Policy extends Domain {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(obj?: PolicyData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.organizationId = obj.organizationId;\n    this.type = obj.type;\n    this.data = obj.data;\n    this.enabled = obj.enabled;\n  }\n}\n","import Domain from \"../../../platform/models/domain/domain-base\";\n\nexport class ResetPasswordPolicyOptions extends Domain {\n  autoEnrollEnabled = false;\n}\n","import { BehaviorSubject, concatMap, map, Observable, of } from \"rxjs\";\n\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { OrganizationService } from \"../../abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { OrganizationUserStatusType, OrganizationUserType, PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Organization } from \"../../models/domain/organization\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyService implements InternalPolicyServiceAbstraction {\n  protected _policies: BehaviorSubject<Policy[]> = new BehaviorSubject([]);\n\n  policies$ = this._policies.asObservable();\n\n  constructor(\n    protected stateService: StateService,\n    private organizationService: OrganizationService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._policies.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedPolicies();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  /**\n   * Returns the first policy found that applies to the active user\n   * @param policyType Policy type to search for\n   * @param policyFilter Additional filter to apply to the policy\n   */\n  get$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean): Observable<Policy> {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        const appliesToCurrentUser = await this.checkPoliciesThatApplyToUser(\n          policies,\n          policyType,\n          policyFilter,\n          userId\n        );\n        if (appliesToCurrentUser) {\n          return policies.find((policy) => policy.type === policyType && policy.enabled);\n        }\n      })\n    );\n  }\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  async getAll(type?: PolicyType, userId?: string): Promise<Policy[]> {\n    let response: Policy[] = [];\n    const decryptedPolicies = await this.stateService.getDecryptedPolicies({ userId: userId });\n    if (decryptedPolicies != null) {\n      response = decryptedPolicies;\n    } else {\n      const diskPolicies = await this.stateService.getEncryptedPolicies({ userId: userId });\n      for (const id in diskPolicies) {\n        if (Object.prototype.hasOwnProperty.call(diskPolicies, id)) {\n          response.push(new Policy(diskPolicies[id]));\n        }\n      }\n      await this.stateService.setDecryptedPolicies(response, { userId: userId });\n    }\n    if (type != null) {\n      return response.filter((policy) => policy.type === type);\n    } else {\n      return response;\n    }\n  }\n\n  masterPasswordPolicyOptions$(policies?: Policy[]): Observable<MasterPasswordPolicyOptions> {\n    const observable = policies ? of(policies) : this.policies$;\n    return observable.pipe(\n      map((obsPolicies) => {\n        let enforcedOptions: MasterPasswordPolicyOptions = null;\n        const filteredPolicies = obsPolicies.filter((p) => p.type === PolicyType.MasterPassword);\n\n        if (filteredPolicies == null || filteredPolicies.length === 0) {\n          return enforcedOptions;\n        }\n\n        filteredPolicies.forEach((currentPolicy) => {\n          if (!currentPolicy.enabled || currentPolicy.data == null) {\n            return;\n          }\n\n          if (enforcedOptions == null) {\n            enforcedOptions = new MasterPasswordPolicyOptions();\n          }\n\n          if (\n            currentPolicy.data.minComplexity != null &&\n            currentPolicy.data.minComplexity > enforcedOptions.minComplexity\n          ) {\n            enforcedOptions.minComplexity = currentPolicy.data.minComplexity;\n          }\n\n          if (\n            currentPolicy.data.minLength != null &&\n            currentPolicy.data.minLength > enforcedOptions.minLength\n          ) {\n            enforcedOptions.minLength = currentPolicy.data.minLength;\n          }\n\n          if (currentPolicy.data.requireUpper) {\n            enforcedOptions.requireUpper = true;\n          }\n\n          if (currentPolicy.data.requireLower) {\n            enforcedOptions.requireLower = true;\n          }\n\n          if (currentPolicy.data.requireNumbers) {\n            enforcedOptions.requireNumbers = true;\n          }\n\n          if (currentPolicy.data.requireSpecial) {\n            enforcedOptions.requireSpecial = true;\n          }\n\n          if (currentPolicy.data.enforceOnLogin) {\n            enforcedOptions.enforceOnLogin = true;\n          }\n        });\n\n        return enforcedOptions;\n      })\n    );\n  }\n\n  policyAppliesToActiveUser$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        return await this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n      })\n    );\n  }\n\n  evaluateMasterPassword(\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions: MasterPasswordPolicyOptions\n  ): boolean {\n    if (enforcedPolicyOptions == null) {\n      return true;\n    }\n\n    if (\n      enforcedPolicyOptions.minComplexity > 0 &&\n      enforcedPolicyOptions.minComplexity > passwordStrength\n    ) {\n      return false;\n    }\n\n    if (\n      enforcedPolicyOptions.minLength > 0 &&\n      enforcedPolicyOptions.minLength > newPassword.length\n    ) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireUpper && newPassword.toLocaleLowerCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireLower && newPassword.toLocaleUpperCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireNumbers && !/[0-9]/.test(newPassword)) {\n      return false;\n    }\n\n    // eslint-disable-next-line\n    if (enforcedPolicyOptions.requireSpecial && !/[!@#$%\\^&*]/g.test(newPassword)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getResetPasswordPolicyOptions(\n    policies: Policy[],\n    orgId: string\n  ): [ResetPasswordPolicyOptions, boolean] {\n    const resetPasswordPolicyOptions = new ResetPasswordPolicyOptions();\n\n    if (policies == null || orgId == null) {\n      return [resetPasswordPolicyOptions, false];\n    }\n\n    const policy = policies.find(\n      (p) => p.organizationId === orgId && p.type === PolicyType.ResetPassword && p.enabled\n    );\n    resetPasswordPolicyOptions.autoEnrollEnabled = policy?.data?.autoEnrollEnabled ?? false;\n\n    return [resetPasswordPolicyOptions, policy?.enabled ?? false];\n  }\n\n  mapPoliciesFromToken(policiesResponse: ListResponse<PolicyResponse>): Policy[] {\n    if (policiesResponse == null || policiesResponse.data == null) {\n      return null;\n    }\n\n    const policiesData = policiesResponse.data.map((p) => new PolicyData(p));\n    return policiesData.map((p) => new Policy(p));\n  }\n\n  async policyAppliesToUser(\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const policies = await this.getAll(policyType, userId);\n\n    return this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n  }\n\n  async upsert(policy: PolicyData): Promise<any> {\n    let policies = await this.stateService.getEncryptedPolicies();\n    if (policies == null) {\n      policies = {};\n    }\n\n    policies[policy.id] = policy;\n\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async replace(policies: { [id: string]: PolicyData }): Promise<void> {\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._policies.next([]);\n    }\n    await this.stateService.setDecryptedPolicies(null, { userId: userId });\n    await this.stateService.setEncryptedPolicies(null, { userId: userId });\n  }\n\n  private isExemptFromPolicies(organization: Organization, policyType: PolicyType) {\n    if (policyType === PolicyType.MaximumVaultTimeout) {\n      return organization.type === OrganizationUserType.Owner;\n    }\n\n    return organization.isExemptFromPolicies;\n  }\n\n  private async updateObservables(policiesMap: { [id: string]: PolicyData }) {\n    const policies = Object.values(policiesMap || {}).map((f) => new Policy(f));\n\n    this._policies.next(policies);\n  }\n\n  private async checkPoliciesThatApplyToUser(\n    policies: Policy[],\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const organizations = await this.organizationService.getAll(userId);\n    const filteredPolicies = policies.filter(\n      (p) => p.type === policyType && p.enabled && (policyFilter == null || policyFilter(p))\n    );\n    const policySet = new Set(filteredPolicies.map((p) => p.organizationId));\n\n    return organizations.some(\n      (o) =>\n        o.status >= OrganizationUserStatusType.Accepted &&\n        o.usePolicies &&\n        policySet.has(o.id) &&\n        !this.isExemptFromPolicies(o, policyType)\n    );\n  }\n}\n","import { ProviderUserStatusType, ProviderUserType } from \"../../admin-console/enums\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\n\nexport class Provider {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(obj?: ProviderData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.userId = obj.userId;\n    this.useEvents = obj.useEvents;\n  }\n\n  get canAccess() {\n    if (this.isProviderAdmin) {\n      return true;\n    }\n    return this.enabled && this.status === ProviderUserStatusType.Confirmed;\n  }\n\n  get canCreateOrganizations() {\n    return this.enabled && this.isProviderAdmin;\n  }\n\n  get canManageUsers() {\n    return this.isProviderAdmin;\n  }\n\n  get canAccessEventLogs() {\n    return this.isProviderAdmin;\n  }\n\n  get isProviderAdmin() {\n    return this.type === ProviderUserType.ProviderAdmin;\n  }\n}\n","import { Provider } from \"../../models/domain/provider\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { ProviderService as ProviderServiceAbstraction } from \"../abstractions/provider.service\";\nimport { ProviderData } from \"../models/data/provider.data\";\n\nexport class ProviderService implements ProviderServiceAbstraction {\n  constructor(private stateService: StateService) {}\n\n  async get(id: string): Promise<Provider> {\n    const providers = await this.stateService.getProviders();\n    // eslint-disable-next-line\n    if (providers == null || !providers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Provider(providers[id]);\n  }\n\n  async getAll(): Promise<Provider[]> {\n    const providers = await this.stateService.getProviders();\n    const response: Provider[] = [];\n    for (const id in providers) {\n      // eslint-disable-next-line\n      if (providers.hasOwnProperty(id)) {\n        response.push(new Provider(providers[id]));\n      }\n    }\n    return response;\n  }\n\n  async save(providers: { [id: string]: ProviderData }) {\n    await this.stateService.setProviders(providers);\n  }\n}\n","export abstract class AccountService {}\n\nexport abstract class InternalAccountService extends AccountService {\n  abstract delete(): void;\n}\n","import { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\nexport abstract class UserVerificationApiServiceAbstraction {\n  postAccountVerifyOTP: (request: VerifyOTPRequest) => Promise<void>;\n  postAccountRequestOTP: () => Promise<void>;\n}\n","import { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport {\n  UserKey,\n  SymmetricCryptoKey,\n  MasterKey,\n} from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { AuthRequestCryptoServiceAbstraction } from \"../abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nexport class AuthRequestCryptoServiceImplementation implements AuthRequestCryptoServiceAbstraction {\n  constructor(private cryptoService: CryptoService) {}\n\n  async setUserKeyAfterDecryptingSharedUserKey(\n    authReqResponse: AuthRequestResponse,\n    authReqPrivateKey: Uint8Array\n  ) {\n    const userKey = await this.decryptPubKeyEncryptedUserKey(\n      authReqResponse.key,\n      authReqPrivateKey\n    );\n    await this.cryptoService.setUserKey(userKey);\n  }\n\n  async setKeysAfterDecryptingSharedMasterKeyAndHash(\n    authReqResponse: AuthRequestResponse,\n    authReqPrivateKey: Uint8Array\n  ) {\n    const { masterKey, masterKeyHash } = await this.decryptPubKeyEncryptedMasterKeyAndHash(\n      authReqResponse.key,\n      authReqResponse.masterPasswordHash,\n      authReqPrivateKey\n    );\n\n    // Decrypt and set user key in state\n    const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n\n    // Set masterKey + masterKeyHash in state after decryption (in case decryption fails)\n    await this.cryptoService.setMasterKey(masterKey);\n    await this.cryptoService.setMasterKeyHash(masterKeyHash);\n\n    await this.cryptoService.setUserKey(userKey);\n  }\n\n  // Decryption helpers\n  async decryptPubKeyEncryptedUserKey(\n    pubKeyEncryptedUserKey: string,\n    privateKey: Uint8Array\n  ): Promise<UserKey> {\n    const decryptedUserKeyBytes = await this.cryptoService.rsaDecrypt(\n      pubKeyEncryptedUserKey,\n      privateKey\n    );\n\n    return new SymmetricCryptoKey(decryptedUserKeyBytes) as UserKey;\n  }\n\n  async decryptPubKeyEncryptedMasterKeyAndHash(\n    pubKeyEncryptedMasterKey: string,\n    pubKeyEncryptedMasterKeyHash: string,\n    privateKey: Uint8Array\n  ): Promise<{ masterKey: MasterKey; masterKeyHash: string }> {\n    const decryptedMasterKeyArrayBuffer = await this.cryptoService.rsaDecrypt(\n      pubKeyEncryptedMasterKey,\n      privateKey\n    );\n\n    const decryptedMasterKeyHashArrayBuffer = await this.cryptoService.rsaDecrypt(\n      pubKeyEncryptedMasterKeyHash,\n      privateKey\n    );\n\n    const masterKey = new SymmetricCryptoKey(decryptedMasterKeyArrayBuffer) as MasterKey;\n    const masterKeyHash = Utils.fromBufferToUtf8(decryptedMasterKeyHashArrayBuffer);\n\n    return {\n      masterKey,\n      masterKeyHash,\n    };\n  }\n}\n","export class PreloginRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\n\nexport abstract class TokenRequest {\n  protected device?: DeviceRequest;\n  protected passwordlessAuthRequest: string;\n\n  constructor(protected twoFactor: TokenTwoFactorRequest, device?: DeviceRequest) {\n    this.device = device != null ? device : null;\n  }\n\n  // eslint-disable-next-line\n  alterIdentityTokenHeaders(headers: Headers) {\n    // Implemented in subclass if required\n  }\n\n  setTwoFactor(twoFactor: TokenTwoFactorRequest) {\n    this.twoFactor = twoFactor;\n  }\n\n  setPasswordlessAccessCode(accessCode: string) {\n    this.passwordlessAuthRequest = accessCode;\n  }\n\n  protected toIdentityToken(clientId: string) {\n    const obj: any = {\n      scope: \"api offline_access\",\n      client_id: clientId,\n    };\n\n    if (this.device) {\n      obj.deviceType = this.device.type;\n      obj.deviceIdentifier = this.device.identifier;\n      obj.deviceName = this.device.name;\n      // no push tokens for browser apps yet\n      // obj.devicePushToken = this.device.pushToken;\n    }\n\n    //passswordless login\n    if (this.passwordlessAuthRequest) {\n      obj.authRequest = this.passwordlessAuthRequest;\n    }\n\n    if (this.twoFactor) {\n      if (this.twoFactor.token && this.twoFactor.provider != null) {\n        obj.twoFactorToken = this.twoFactor.token;\n        obj.twoFactorProvider = this.twoFactor.provider;\n        obj.twoFactorRemember = this.twoFactor.remember ? \"1\" : \"0\";\n      }\n    }\n\n    return obj;\n  }\n}\n","import { ClientType } from \"../../../../enums\";\nimport { Utils } from \"../../../../platform/misc/utils\";\nimport { CaptchaProtectedRequest } from \"../captcha-protected.request\";\n\nimport { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class PasswordTokenRequest extends TokenRequest implements CaptchaProtectedRequest {\n  constructor(\n    public email: string,\n    public masterPasswordHash: string,\n    public captchaResponse: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: ClientType) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"password\";\n    obj.username = this.email;\n    obj.password = this.masterPasswordHash;\n\n    if (this.captchaResponse != null) {\n      obj.captchaResponse = this.captchaResponse;\n    }\n\n    return obj;\n  }\n\n  alterIdentityTokenHeaders(headers: Headers) {\n    headers.set(\"Auth-Email\", Utils.fromUtf8ToUrlB64(this.email));\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class IdentityCaptchaResponse extends BaseResponse {\n  siteKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.siteKey = this.getResponseProperty(\"HCaptcha_SiteKey\");\n  }\n}\n","export class KeyConnectorUserDecryptionOption {\n  constructor(public keyConnectorUrl: string) {}\n}\n","export class TrustedDeviceUserDecryptionOption {\n  constructor(\n    public hasAdminApproval: boolean,\n    public hasLoginApprovingDevice: boolean,\n    public hasManageResetPasswordPermission: boolean\n  ) {}\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Region } from \"../../abstractions/environment.service\";\nimport {\n  ServerConfigResponse,\n  ThirdPartyServerConfigResponse,\n  EnvironmentServerConfigResponse,\n} from \"../response/server-config.response\";\n\nexport class ServerConfigData {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: string;\n  featureStates: { [key: string]: string } = {};\n\n  constructor(serverConfigResponse: Partial<ServerConfigResponse>) {\n    this.version = serverConfigResponse?.version;\n    this.gitHash = serverConfigResponse?.gitHash;\n    this.server = serverConfigResponse?.server\n      ? new ThirdPartyServerConfigData(serverConfigResponse.server)\n      : null;\n    this.utcDate = new Date().toISOString();\n    this.environment = serverConfigResponse?.environment\n      ? new EnvironmentServerConfigData(serverConfigResponse.environment)\n      : null;\n    this.featureStates = serverConfigResponse?.featureStates;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfigData>): ServerConfigData {\n    return Object.assign(new ServerConfigData({}), obj, {\n      server: obj?.server ? ThirdPartyServerConfigData.fromJSON(obj.server) : null,\n      environment: obj?.environment ? EnvironmentServerConfigData.fromJSON(obj.environment) : null,\n    });\n  }\n}\n\nexport class ThirdPartyServerConfigData {\n  name: string;\n  url: string;\n\n  constructor(response: Partial<ThirdPartyServerConfigResponse>) {\n    this.name = response.name;\n    this.url = response.url;\n  }\n\n  static fromJSON(obj: Jsonify<ThirdPartyServerConfigData>): ThirdPartyServerConfigData {\n    return Object.assign(new ThirdPartyServerConfigData({}), obj);\n  }\n}\n\nexport class EnvironmentServerConfigData {\n  cloudRegion: Region;\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(response: Partial<EnvironmentServerConfigResponse>) {\n    this.cloudRegion = response.cloudRegion;\n    this.vault = response.vault;\n    this.api = response.api;\n    this.identity = response.identity;\n    this.notifications = response.notifications;\n    this.sso = response.sso;\n  }\n\n  static fromJSON(obj: Jsonify<EnvironmentServerConfigData>): EnvironmentServerConfigData {\n    return Object.assign(new EnvironmentServerConfigData({}), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptedOrganizationKeyData } from \"../../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../../admin-console/models/domain/policy\";\nimport { AuthenticationStatus } from \"../../../auth/enums/authentication-status\";\nimport { AdminAuthRequestStorable } from \"../../../auth/models/domain/admin-auth-req-storable\";\nimport { EnvironmentUrls } from \"../../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../../auth/models/domain/force-reset-password-reason\";\nimport { KeyConnectorUserDecryptionOption } from \"../../../auth/models/domain/user-decryption-options/key-connector-user-decryption-option\";\nimport { TrustedDeviceUserDecryptionOption } from \"../../../auth/models/domain/user-decryption-options/trusted-device-user-decryption-option\";\nimport { IdentityTokenResponse } from \"../../../auth/models/response/identity-token.response\";\nimport { KdfType, UriMatchType } from \"../../../enums\";\nimport { EventData } from \"../../../models/data/event.data\";\nimport { GeneratorOptions } from \"../../../tools/generator/generator-options\";\nimport {\n  GeneratedPasswordHistory,\n  PasswordGeneratorOptions,\n} from \"../../../tools/generator/password\";\nimport { UsernameGeneratorOptions } from \"../../../tools/generator/username/username-generation-options\";\nimport { SendData } from \"../../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../../tools/send/models/view/send.view\";\nimport { DeepJsonify } from \"../../../types/deep-jsonify\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { CipherView } from \"../../../vault/models/view/cipher.view\";\nimport { CollectionView } from \"../../../vault/models/view/collection.view\";\nimport { Utils } from \"../../misc/utils\";\nimport { ServerConfigData } from \"../../models/data/server-config.data\";\n\nimport { EncryptedString, EncString } from \"./enc-string\";\nimport { MasterKey, SymmetricCryptoKey, UserKey } from \"./symmetric-crypto-key\";\n\nexport class EncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: TEncrypted;\n  decrypted?: TDecrypted;\n\n  toJSON() {\n    return {\n      encrypted: this.encrypted,\n      decrypted:\n        this.decrypted instanceof ArrayBuffer\n          ? Utils.fromBufferToByteString(this.decrypted)\n          : this.decrypted,\n    };\n  }\n\n  static fromJSON<TEncrypted, TDecrypted>(\n    obj: { encrypted?: Jsonify<TEncrypted>; decrypted?: string | Jsonify<TDecrypted> },\n    decryptedFromJson?: (decObj: Jsonify<TDecrypted> | string) => TDecrypted,\n    encryptedFromJson?: (encObj: Jsonify<TEncrypted>) => TEncrypted\n  ) {\n    if (obj == null) {\n      return null;\n    }\n\n    const pair = new EncryptionPair<TEncrypted, TDecrypted>();\n    if (obj?.encrypted != null) {\n      pair.encrypted = encryptedFromJson\n        ? encryptedFromJson(obj.encrypted)\n        : (obj.encrypted as TEncrypted);\n    }\n    if (obj?.decrypted != null) {\n      pair.decrypted = decryptedFromJson\n        ? decryptedFromJson(obj.decrypted)\n        : (obj.decrypted as TDecrypted);\n    }\n    return pair;\n  }\n}\n\nexport class DataEncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n  decrypted?: TDecrypted[];\n}\n\n// This is a temporary structure to handle migrated `DataEncryptionPair` to\n//  avoid needing a data migration at this stage. It should be replaced with\n//  proper data migrations when `DataEncryptionPair` is deprecated.\nexport class TemporaryDataEncryption<TEncrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n}\n\nexport class AccountData {\n  ciphers?: DataEncryptionPair<CipherData, CipherView> = new DataEncryptionPair<\n    CipherData,\n    CipherView\n  >();\n  folders? = new TemporaryDataEncryption<FolderData>();\n  localData?: any;\n  sends?: DataEncryptionPair<SendData, SendView> = new DataEncryptionPair<SendData, SendView>();\n  collections?: DataEncryptionPair<CollectionData, CollectionView> = new DataEncryptionPair<\n    CollectionData,\n    CollectionView\n  >();\n  policies?: DataEncryptionPair<PolicyData, Policy> = new DataEncryptionPair<PolicyData, Policy>();\n  passwordGenerationHistory?: EncryptionPair<\n    GeneratedPasswordHistory[],\n    GeneratedPasswordHistory[]\n  > = new EncryptionPair<GeneratedPasswordHistory[], GeneratedPasswordHistory[]>();\n  addEditCipherInfo?: any;\n  eventCollection?: EventData[];\n  organizations?: { [id: string]: OrganizationData };\n  providers?: { [id: string]: ProviderData };\n}\n\nexport class AccountKeys {\n  userKey?: UserKey;\n  masterKey?: MasterKey;\n  masterKeyEncryptedUserKey?: string;\n  deviceKey?: ReturnType<SymmetricCryptoKey[\"toJSON\"]>;\n  organizationKeys?: EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  > = new EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  >();\n  providerKeys?: EncryptionPair<any, Record<string, SymmetricCryptoKey>> = new EncryptionPair<\n    any,\n    Record<string, SymmetricCryptoKey>\n  >();\n  privateKey?: EncryptionPair<string, Uint8Array> = new EncryptionPair<string, Uint8Array>();\n  publicKey?: Uint8Array;\n  apiKeyClientSecret?: string;\n\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoMasterKey?: SymmetricCryptoKey;\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoMasterKeyAuto?: string;\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoMasterKeyBiometric?: string;\n  /** @deprecated July 2023, left for migration purposes*/\n  cryptoSymmetricKey?: EncryptionPair<string, SymmetricCryptoKey> = new EncryptionPair<\n    string,\n    SymmetricCryptoKey\n  >();\n\n  toJSON() {\n    return Utils.merge(this, {\n      publicKey: Utils.fromBufferToByteString(this.publicKey),\n    });\n  }\n\n  static fromJSON(obj: DeepJsonify<AccountKeys>): AccountKeys {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountKeys(), {\n      userKey: SymmetricCryptoKey.fromJSON(obj?.userKey),\n      masterKey: SymmetricCryptoKey.fromJSON(obj?.masterKey),\n      deviceKey: obj?.deviceKey,\n      cryptoMasterKey: SymmetricCryptoKey.fromJSON(obj?.cryptoMasterKey),\n      cryptoSymmetricKey: EncryptionPair.fromJSON(\n        obj?.cryptoSymmetricKey,\n        SymmetricCryptoKey.fromJSON\n      ),\n      organizationKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.organizationKeys),\n      providerKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.providerKeys),\n      privateKey: EncryptionPair.fromJSON<string, Uint8Array>(obj?.privateKey, (decObj: string) =>\n        Utils.fromByteStringToArray(decObj)\n      ),\n      publicKey: Utils.fromByteStringToArray(obj?.publicKey),\n    });\n  }\n\n  static initRecordEncryptionPairsFromJSON(obj: any) {\n    return EncryptionPair.fromJSON(obj, (decObj: any) => {\n      if (obj == null) {\n        return null;\n      }\n\n      const record: Record<string, SymmetricCryptoKey> = {};\n      for (const id in decObj) {\n        record[id] = SymmetricCryptoKey.fromJSON(decObj[id]);\n      }\n      return record;\n    });\n  }\n}\n\nexport class AccountProfile {\n  apiKeyClientId?: string;\n  authenticationStatus?: AuthenticationStatus;\n  convertAccountToKeyConnector?: boolean;\n  name?: string;\n  email?: string;\n  emailVerified?: boolean;\n  entityId?: string;\n  entityType?: string;\n  everHadUserKey?: boolean;\n  everBeenUnlocked?: boolean;\n  forcePasswordResetReason?: ForceResetPasswordReason;\n  hasPremiumPersonally?: boolean;\n  hasPremiumFromOrganization?: boolean;\n  lastSync?: string;\n  userId?: string;\n  usesKeyConnector?: boolean;\n  keyHash?: string;\n  kdfIterations?: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  kdfType?: KdfType;\n\n  static fromJSON(obj: Jsonify<AccountProfile>): AccountProfile {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountProfile(), obj);\n  }\n}\n\nexport class AccountSettings {\n  autoConfirmFingerPrints?: boolean;\n  autoFillOnPageLoadDefault?: boolean;\n  biometricUnlock?: boolean;\n  clearClipboard?: number;\n  collapsedGroupings?: string[];\n  defaultUriMatch?: UriMatchType;\n  disableAddLoginNotification?: boolean;\n  disableAutoBiometricsPrompt?: boolean;\n  disableAutoTotpCopy?: boolean;\n  disableBadgeCounter?: boolean;\n  disableChangedPasswordNotification?: boolean;\n  disableContextMenuItem?: boolean;\n  disableGa?: boolean;\n  dismissedAutoFillOnPageLoadCallout?: boolean;\n  dontShowCardsCurrentTab?: boolean;\n  dontShowIdentitiesCurrentTab?: boolean;\n  enableAlwaysOnTop?: boolean;\n  enableAutoFillOnPageLoad?: boolean;\n  enableBiometric?: boolean;\n  enableFullWidth?: boolean;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  equivalentDomains?: any;\n  minimizeOnCopyToClipboard?: boolean;\n  neverDomains?: { [id: string]: any };\n  passwordGenerationOptions?: PasswordGeneratorOptions;\n  usernameGenerationOptions?: UsernameGeneratorOptions;\n  generatorOptions?: GeneratorOptions;\n  pinKeyEncryptedUserKey?: EncryptedString;\n  pinKeyEncryptedUserKeyEphemeral?: EncryptedString;\n  protectedPin?: string;\n  settings?: AccountSettingsSettings; // TODO: Merge whatever is going on here into the AccountSettings model properly\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string = \"lock\";\n  serverConfig?: ServerConfigData;\n  approveLoginRequests?: boolean;\n  avatarColor?: string;\n  activateAutoFillOnPageLoadFromPolicy?: boolean;\n  region?: string;\n  smOnboardingTasks?: Record<string, Record<string, boolean>>;\n  trustDeviceChoiceForDecryption?: boolean;\n\n  /** @deprecated July 2023, left for migration purposes*/\n  pinProtected?: EncryptionPair<string, EncString> = new EncryptionPair<string, EncString>();\n\n  static fromJSON(obj: Jsonify<AccountSettings>): AccountSettings {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), obj, {\n      environmentUrls: EnvironmentUrls.fromJSON(obj?.environmentUrls),\n      pinProtected: EncryptionPair.fromJSON<string, EncString>(\n        obj?.pinProtected,\n        EncString.fromJSON\n      ),\n      serverConfig: ServerConfigData.fromJSON(obj?.serverConfig),\n    });\n  }\n}\n\nexport type AccountSettingsSettings = {\n  equivalentDomains?: string[][];\n};\n\nexport class AccountTokens {\n  accessToken?: string;\n  refreshToken?: string;\n  securityStamp?: string;\n\n  static fromJSON(obj: Jsonify<AccountTokens>): AccountTokens {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountTokens(), obj);\n  }\n}\n\nexport class AccountDecryptionOptions {\n  hasMasterPassword: boolean;\n  trustedDeviceOption?: TrustedDeviceUserDecryptionOption;\n  keyConnectorOption?: KeyConnectorUserDecryptionOption;\n\n  constructor(init?: Partial<AccountDecryptionOptions>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  // TODO: these nice getters don't work because the Account object is not properly being deserialized out of\n  // JSON (the Account static fromJSON method is not running) so these getters don't exist on the\n  // account decryptions options object when pulled out of state.  This is a bug that needs to be fixed later on\n  // get hasTrustedDeviceOption(): boolean {\n  //   return this.trustedDeviceOption !== null && this.trustedDeviceOption !== undefined;\n  // }\n\n  // get hasKeyConnectorOption(): boolean {\n  //   return this.keyConnectorOption !== null && this.keyConnectorOption !== undefined;\n  // }\n\n  static fromResponse(response: IdentityTokenResponse): AccountDecryptionOptions {\n    if (response == null) {\n      return null;\n    }\n\n    const accountDecryptionOptions = new AccountDecryptionOptions();\n\n    if (response.userDecryptionOptions) {\n      // If the response has userDecryptionOptions, this means it's on a post-TDE server version and can interrogate\n      // the new decryption options.\n      const responseOptions = response.userDecryptionOptions;\n      accountDecryptionOptions.hasMasterPassword = responseOptions.hasMasterPassword;\n\n      if (responseOptions.trustedDeviceOption) {\n        accountDecryptionOptions.trustedDeviceOption = new TrustedDeviceUserDecryptionOption(\n          responseOptions.trustedDeviceOption.hasAdminApproval,\n          responseOptions.trustedDeviceOption.hasLoginApprovingDevice,\n          responseOptions.trustedDeviceOption.hasManageResetPasswordPermission\n        );\n      }\n\n      if (responseOptions.keyConnectorOption) {\n        accountDecryptionOptions.keyConnectorOption = new KeyConnectorUserDecryptionOption(\n          responseOptions.keyConnectorOption.keyConnectorUrl\n        );\n      }\n    } else {\n      // If the response does not have userDecryptionOptions, this means it's on a pre-TDE server version and so\n      // we must base our decryption options on the presence of the keyConnectorUrl.\n      // Note that the presence of keyConnectorUrl implies that the user does not have a master password, as in pre-TDE\n      // server versions, a master password short-circuited the addition of the keyConnectorUrl to the response.\n      // TODO: remove this check after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3537)\n      const usingKeyConnector = response.keyConnectorUrl != null;\n      accountDecryptionOptions.hasMasterPassword = !usingKeyConnector;\n      if (usingKeyConnector) {\n        accountDecryptionOptions.keyConnectorOption = new KeyConnectorUserDecryptionOption(\n          response.keyConnectorUrl\n        );\n      }\n    }\n    return accountDecryptionOptions;\n  }\n\n  static fromJSON(obj: Jsonify<AccountDecryptionOptions>): AccountDecryptionOptions {\n    if (obj == null) {\n      return null;\n    }\n\n    const accountDecryptionOptions = Object.assign(new AccountDecryptionOptions(), obj);\n\n    if (obj.trustedDeviceOption) {\n      accountDecryptionOptions.trustedDeviceOption = new TrustedDeviceUserDecryptionOption(\n        obj.trustedDeviceOption.hasAdminApproval,\n        obj.trustedDeviceOption.hasLoginApprovingDevice,\n        obj.trustedDeviceOption.hasManageResetPasswordPermission\n      );\n    }\n\n    if (obj.keyConnectorOption) {\n      accountDecryptionOptions.keyConnectorOption = new KeyConnectorUserDecryptionOption(\n        obj.keyConnectorOption.keyConnectorUrl\n      );\n    }\n\n    return accountDecryptionOptions;\n  }\n}\n\nexport class LoginState {\n  ssoOrganizationIdentifier?: string;\n\n  constructor(init?: Partial<LoginState>) {\n    if (init) {\n      Object.assign(this, init);\n    }\n  }\n\n  static fromJSON(obj: Jsonify<LoginState>): LoginState {\n    if (obj == null) {\n      return null;\n    }\n\n    const loginState = Object.assign(new LoginState(), obj);\n    return loginState;\n  }\n}\n\nexport class Account {\n  data?: AccountData = new AccountData();\n  keys?: AccountKeys = new AccountKeys();\n  profile?: AccountProfile = new AccountProfile();\n  settings?: AccountSettings = new AccountSettings();\n  tokens?: AccountTokens = new AccountTokens();\n  decryptionOptions?: AccountDecryptionOptions = new AccountDecryptionOptions();\n  loginState?: LoginState = new LoginState();\n  adminAuthRequest?: Jsonify<AdminAuthRequestStorable> = null;\n\n  constructor(init: Partial<Account>) {\n    Object.assign(this, {\n      data: {\n        ...new AccountData(),\n        ...init?.data,\n      },\n      keys: {\n        ...new AccountKeys(),\n        ...init?.keys,\n      },\n      profile: {\n        ...new AccountProfile(),\n        ...init?.profile,\n      },\n      settings: {\n        ...new AccountSettings(),\n        ...init?.settings,\n      },\n      tokens: {\n        ...new AccountTokens(),\n        ...init?.tokens,\n      },\n      decryptionOptions: {\n        ...new AccountDecryptionOptions(),\n        ...init?.decryptionOptions,\n      },\n      loginState: {\n        ...new LoginState(),\n        ...init?.loginState,\n      },\n      adminAuthRequest: init?.adminAuthRequest,\n    });\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, {\n      keys: AccountKeys.fromJSON(json?.keys),\n      profile: AccountProfile.fromJSON(json?.profile),\n      settings: AccountSettings.fromJSON(json?.settings),\n      tokens: AccountTokens.fromJSON(json?.tokens),\n      decryptionOptions: AccountDecryptionOptions.fromJSON(json?.decryptionOptions),\n      loginState: LoginState.fromJSON(json?.loginState),\n      adminAuthRequest: AdminAuthRequestStorable.fromJSON(json?.adminAuthRequest),\n    });\n  }\n}\n","import { Utils } from \"../../../platform/misc/utils\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nimport { ForceResetPasswordReason } from \"./force-reset-password-reason\";\n\nexport class AuthResult {\n  captchaSiteKey = \"\";\n  // TODO: PM-3287 - Remove this after 3 releases of backwards compatibility. - Target release 2023.12 for removal\n  /**\n   * @deprecated\n   * Replace with using AccountDecryptionOptions to determine if the user does\n   * not have a master password and is not using Key Connector.\n   * */\n  resetMasterPassword = false;\n\n  forcePasswordReset: ForceResetPasswordReason = ForceResetPasswordReason.None;\n  twoFactorProviders: Map<TwoFactorProviderType, { [key: string]: string }> = null;\n  ssoEmail2FaSessionToken?: string;\n  email: string;\n\n  get requiresCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  get requiresTwoFactor() {\n    return this.twoFactorProviders != null;\n  }\n}\n","import { DeviceType } from \"../../../../enums\";\nimport { PlatformUtilsService } from \"../../../../platform/abstractions/platform-utils.service\";\n\nexport class DeviceRequest {\n  type: DeviceType;\n  name: string;\n  identifier: string;\n  pushToken?: string;\n\n  constructor(appId: string, platformUtilsService: PlatformUtilsService) {\n    this.type = platformUtilsService.getDevice();\n    this.name = platformUtilsService.getDeviceString();\n    this.identifier = appId;\n    this.pushToken = null;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class MasterPasswordPolicyResponse extends BaseResponse {\n  minComplexity: number;\n  minLength: number;\n  requireUpper: boolean;\n  requireLower: boolean;\n  requireNumbers: boolean;\n  requireSpecial: boolean;\n\n  /**\n   * Flag to indicate if the policy should be enforced on login.\n   * If true, and the user's password does not meet the policy requirements,\n   * the user will be forced to update their password.\n   */\n  enforceOnLogin: boolean;\n\n  constructor(response: any) {\n    super(response);\n\n    this.minComplexity = this.getResponseProperty(\"MinComplexity\");\n    this.minLength = this.getResponseProperty(\"MinLength\");\n    this.requireUpper = this.getResponseProperty(\"RequireUpper\");\n    this.requireLower = this.getResponseProperty(\"RequireLower\");\n    this.requireNumbers = this.getResponseProperty(\"RequireNumbers\");\n    this.requireSpecial = this.getResponseProperty(\"RequireSpecial\");\n    this.enforceOnLogin = this.getResponseProperty(\"EnforceOnLogin\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport interface IKeyConnectorUserDecryptionOptionServerResponse {\n  KeyConnectorUrl: string;\n}\n\nexport class KeyConnectorUserDecryptionOptionResponse extends BaseResponse {\n  keyConnectorUrl: string;\n\n  constructor(response: IKeyConnectorUserDecryptionOptionServerResponse) {\n    super(response);\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\n\nexport interface ITrustedDeviceUserDecryptionOptionServerResponse {\n  HasAdminApproval: boolean;\n  HasLoginApprovingDevice: boolean;\n  HasManageResetPasswordPermission: boolean;\n  EncryptedPrivateKey?: string;\n  EncryptedUserKey?: string;\n}\n\nexport class TrustedDeviceUserDecryptionOptionResponse extends BaseResponse {\n  hasAdminApproval: boolean;\n  hasLoginApprovingDevice: boolean;\n  hasManageResetPasswordPermission: boolean;\n  encryptedPrivateKey: EncString;\n  encryptedUserKey: EncString;\n\n  constructor(response: any) {\n    super(response);\n    this.hasAdminApproval = this.getResponseProperty(\"HasAdminApproval\");\n\n    this.hasLoginApprovingDevice = this.getResponseProperty(\"HasLoginApprovingDevice\");\n    this.hasManageResetPasswordPermission = this.getResponseProperty(\n      \"HasManageResetPasswordPermission\"\n    );\n\n    if (response.EncryptedPrivateKey) {\n      this.encryptedPrivateKey = new EncString(this.getResponseProperty(\"EncryptedPrivateKey\"));\n    }\n    if (response.EncryptedUserKey) {\n      this.encryptedUserKey = new EncString(this.getResponseProperty(\"EncryptedUserKey\"));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nimport {\n  IKeyConnectorUserDecryptionOptionServerResponse,\n  KeyConnectorUserDecryptionOptionResponse,\n} from \"./key-connector-user-decryption-option.response\";\nimport {\n  ITrustedDeviceUserDecryptionOptionServerResponse,\n  TrustedDeviceUserDecryptionOptionResponse,\n} from \"./trusted-device-user-decryption-option.response\";\n\nexport interface IUserDecryptionOptionsServerResponse {\n  HasMasterPassword: boolean;\n  TrustedDeviceOption?: ITrustedDeviceUserDecryptionOptionServerResponse;\n  KeyConnectorOption?: IKeyConnectorUserDecryptionOptionServerResponse;\n}\n\nexport class UserDecryptionOptionsResponse extends BaseResponse {\n  hasMasterPassword: boolean;\n  trustedDeviceOption?: TrustedDeviceUserDecryptionOptionResponse;\n  keyConnectorOption?: KeyConnectorUserDecryptionOptionResponse;\n\n  constructor(response: IUserDecryptionOptionsServerResponse) {\n    super(response);\n\n    this.hasMasterPassword = this.getResponseProperty(\"HasMasterPassword\");\n\n    if (response.TrustedDeviceOption) {\n      this.trustedDeviceOption = new TrustedDeviceUserDecryptionOptionResponse(\n        this.getResponseProperty(\"TrustedDeviceOption\")\n      );\n    }\n    if (response.KeyConnectorOption) {\n      this.keyConnectorOption = new KeyConnectorUserDecryptionOptionResponse(\n        this.getResponseProperty(\"KeyConnectorOption\")\n      );\n    }\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { MasterPasswordPolicyResponse } from \"./master-password-policy.response\";\nimport { UserDecryptionOptionsResponse } from \"./user-decryption-options/user-decryption-options.response\";\n\nexport class IdentityTokenResponse extends BaseResponse {\n  accessToken: string;\n  expiresIn: number;\n  refreshToken: string;\n  tokenType: string;\n\n  resetMasterPassword: boolean;\n  privateKey: string;\n  key: string;\n  twoFactorToken: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  forcePasswordReset: boolean;\n  masterPasswordPolicy: MasterPasswordPolicyResponse;\n  apiUseKeyConnector: boolean;\n  keyConnectorUrl: string;\n\n  userDecryptionOptions: UserDecryptionOptionsResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.accessToken = response.access_token;\n    this.expiresIn = response.expires_in;\n    this.refreshToken = response.refresh_token;\n    this.tokenType = response.token_type;\n\n    this.resetMasterPassword = this.getResponseProperty(\"ResetMasterPassword\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.twoFactorToken = this.getResponseProperty(\"TwoFactorToken\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\");\n    this.apiUseKeyConnector = this.getResponseProperty(\"ApiUseKeyConnector\");\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    this.masterPasswordPolicy = new MasterPasswordPolicyResponse(\n      this.getResponseProperty(\"MasterPasswordPolicy\")\n    );\n\n    if (response.UserDecryptionOptions) {\n      this.userDecryptionOptions = new UserDecryptionOptionsResponse(\n        this.getResponseProperty(\"UserDecryptionOptions\")\n      );\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nimport { MasterPasswordPolicyResponse } from \"./master-password-policy.response\";\n\nexport class IdentityTwoFactorResponse extends BaseResponse {\n  twoFactorProviders: TwoFactorProviderType[];\n  twoFactorProviders2 = new Map<TwoFactorProviderType, { [key: string]: string }>();\n  captchaToken: string;\n  ssoEmail2faSessionToken: string;\n  email?: string;\n  masterPasswordPolicy?: MasterPasswordPolicyResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaToken = this.getResponseProperty(\"CaptchaBypassToken\");\n    this.twoFactorProviders = this.getResponseProperty(\"TwoFactorProviders\");\n    const twoFactorProviders2 = this.getResponseProperty(\"TwoFactorProviders2\");\n    if (twoFactorProviders2 != null) {\n      for (const prop in twoFactorProviders2) {\n        // eslint-disable-next-line\n        if (twoFactorProviders2.hasOwnProperty(prop)) {\n          this.twoFactorProviders2.set(parseInt(prop, null), twoFactorProviders2[prop]);\n        }\n      }\n    }\n    this.masterPasswordPolicy = new MasterPasswordPolicyResponse(\n      this.getResponseProperty(\"MasterPasswordPolicy\")\n    );\n\n    this.ssoEmail2faSessionToken = this.getResponseProperty(\"SsoEmail2faSessionToken\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport {\n  Account,\n  AccountDecryptionOptions,\n  AccountKeys,\n  AccountProfile,\n  AccountTokens,\n} from \"../../platform/models/domain/account\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"../models/domain/force-reset-password-reason\";\nimport {\n  PasswordlessLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  UserApiLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { DeviceRequest } from \"../models/request/identity-token/device.request\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\ntype IdentityResponse = IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse;\n\nexport abstract class LogInStrategy {\n  protected abstract tokenRequest: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest;\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService\n  ) {}\n\n  abstract logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult>;\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string = null\n  ): Promise<AuthResult> {\n    this.tokenRequest.setTwoFactor(twoFactor);\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  protected async startLogIn(): Promise<[AuthResult, IdentityResponse]> {\n    this.twoFactorService.clearSelectedProvider();\n\n    const response = await this.apiService.postIdentityToken(this.tokenRequest);\n\n    if (response instanceof IdentityTwoFactorResponse) {\n      return [await this.processTwoFactorResponse(response), response];\n    } else if (response instanceof IdentityCaptchaResponse) {\n      return [await this.processCaptchaResponse(response), response];\n    } else if (response instanceof IdentityTokenResponse) {\n      return [await this.processTokenResponse(response), response];\n    }\n\n    throw new Error(\"Invalid response object.\");\n  }\n\n  protected async buildDeviceRequest() {\n    const appId = await this.appIdService.getAppId();\n    return new DeviceRequest(appId, this.platformUtilsService);\n  }\n\n  protected async buildTwoFactor(userProvidedTwoFactor?: TokenTwoFactorRequest) {\n    if (userProvidedTwoFactor != null) {\n      return userProvidedTwoFactor;\n    }\n\n    const storedTwoFactorToken = await this.tokenService.getTwoFactorToken();\n    if (storedTwoFactorToken != null) {\n      return new TokenTwoFactorRequest(TwoFactorProviderType.Remember, storedTwoFactorToken, false);\n    }\n\n    return new TokenTwoFactorRequest();\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    const accountInformation = await this.tokenService.decodeToken(tokenResponse.accessToken);\n\n    // Must persist existing device key if it exists for trusted device decryption to work\n    // However, we must provide a user id so that the device key can be retrieved\n    // as the state service won't have an active account at this point in time\n    // even though the data exists in local storage.\n    const userId = accountInformation.sub;\n\n    const deviceKey = await this.stateService.getDeviceKey({ userId });\n    const accountKeys = new AccountKeys();\n    if (deviceKey) {\n      accountKeys.deviceKey = deviceKey;\n    }\n\n    // If you don't persist existing admin auth requests on login, they will get deleted.\n    const adminAuthRequest = await this.stateService.getAdminAuthRequest({ userId });\n\n    await this.stateService.addAccount(\n      new Account({\n        profile: {\n          ...new AccountProfile(),\n          ...{\n            userId,\n            name: accountInformation.name,\n            email: accountInformation.email,\n            hasPremiumPersonally: accountInformation.premium,\n            kdfIterations: tokenResponse.kdfIterations,\n            kdfMemory: tokenResponse.kdfMemory,\n            kdfParallelism: tokenResponse.kdfParallelism,\n            kdfType: tokenResponse.kdf,\n          },\n        },\n        tokens: {\n          ...new AccountTokens(),\n          ...{\n            accessToken: tokenResponse.accessToken,\n            refreshToken: tokenResponse.refreshToken,\n          },\n        },\n        keys: accountKeys,\n        decryptionOptions: AccountDecryptionOptions.fromResponse(tokenResponse),\n        adminAuthRequest: adminAuthRequest?.toJSON(),\n      })\n    );\n  }\n\n  protected async processTokenResponse(response: IdentityTokenResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.resetMasterPassword = response.resetMasterPassword;\n\n    if (response.forcePasswordReset) {\n      result.forcePasswordReset = ForceResetPasswordReason.AdminForcePasswordReset;\n    }\n\n    // Must come before setting keys, user key needs email to update additional keys\n    await this.saveAccountInformation(response);\n\n    if (response.twoFactorToken != null) {\n      await this.tokenService.setTwoFactorToken(response);\n    }\n\n    await this.setMasterKey(response);\n\n    await this.setUserKey(response);\n\n    await this.setPrivateKey(response);\n\n    this.messagingService.send(\"loggedIn\");\n\n    return result;\n  }\n\n  // The keys comes from different sources depending on the login strategy\n  protected abstract setMasterKey(response: IdentityTokenResponse): Promise<void>;\n\n  protected abstract setUserKey(response: IdentityTokenResponse): Promise<void>;\n\n  protected abstract setPrivateKey(response: IdentityTokenResponse): Promise<void>;\n\n  protected async createKeyPairForOldAccount() {\n    try {\n      const [publicKey, privateKey] = await this.cryptoService.makeKeyPair();\n      await this.apiService.postAccountKeys(new KeysRequest(publicKey, privateKey.encryptedString));\n      return privateKey.encryptedString;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  private async processTwoFactorResponse(response: IdentityTwoFactorResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.twoFactorProviders = response.twoFactorProviders2;\n\n    this.twoFactorService.setProviders(response);\n    this.captchaBypassToken = response.captchaToken ?? null;\n    result.ssoEmail2FaSessionToken = response.ssoEmail2faSessionToken;\n    result.email = response.email;\n    return result;\n  }\n\n  private async processCaptchaResponse(response: IdentityCaptchaResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.captchaSiteKey = response.siteKey;\n    return result;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"../../admin-console/models/domain/master-password-policy-options\";\nimport { HashPurpose } from \"../../enums\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { MasterKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordStrengthServiceAbstraction } from \"../../tools/password-strength\";\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"../models/domain/force-reset-password-reason\";\nimport { PasswordLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class PasswordLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get masterPasswordHash() {\n    return this.tokenRequest.masterPasswordHash;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n\n  private localMasterKeyHash: string;\n  private masterKey: MasterKey;\n\n  /**\n   * Options to track if the user needs to update their password due to a password that does not meet an organization's\n   * master password policy.\n   */\n  private forcePasswordResetReason: ForceResetPasswordReason = ForceResetPasswordReason.None;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    protected stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private passwordStrengthService: PasswordStrengthServiceAbstraction,\n    private policyService: PolicyService,\n    private authService: AuthService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  override async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    const result = await super.logInTwoFactor(twoFactor);\n\n    // 2FA was successful, save the force update password options with the state service if defined\n    if (\n      !result.requiresTwoFactor &&\n      !result.requiresCaptcha &&\n      this.forcePasswordResetReason != ForceResetPasswordReason.None\n    ) {\n      await this.stateService.setForcePasswordResetReason(this.forcePasswordResetReason);\n      result.forcePasswordReset = this.forcePasswordResetReason;\n    }\n\n    return result;\n  }\n\n  override async logIn(credentials: PasswordLogInCredentials) {\n    const { email, masterPassword, captchaToken, twoFactor } = credentials;\n\n    this.masterKey = await this.authService.makePreloginKey(masterPassword, email);\n\n    // Hash the password early (before authentication) so we don't persist it in memory in plaintext\n    this.localMasterKeyHash = await this.cryptoService.hashMasterKey(\n      masterPassword,\n      this.masterKey,\n      HashPurpose.LocalAuthorization\n    );\n    const masterKeyHash = await this.cryptoService.hashMasterKey(masterPassword, this.masterKey);\n\n    this.tokenRequest = new PasswordTokenRequest(\n      email,\n      masterKeyHash,\n      captchaToken,\n      await this.buildTwoFactor(twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult, identityResponse] = await this.startLogIn();\n\n    const masterPasswordPolicyOptions =\n      this.getMasterPasswordPolicyOptionsFromResponse(identityResponse);\n\n    // The identity result can contain master password policies for the user's organizations\n    if (masterPasswordPolicyOptions?.enforceOnLogin) {\n      // If there is a policy active, evaluate the supplied password before its no longer in memory\n      const meetsRequirements = this.evaluateMasterPassword(\n        credentials,\n        masterPasswordPolicyOptions\n      );\n\n      if (!meetsRequirements) {\n        if (authResult.requiresCaptcha || authResult.requiresTwoFactor) {\n          // Save the flag to this strategy for later use as the master password is about to pass out of scope\n          this.forcePasswordResetReason = ForceResetPasswordReason.WeakMasterPassword;\n        } else {\n          // Authentication was successful, save the force update password options with the state service\n          await this.stateService.setForcePasswordResetReason(\n            ForceResetPasswordReason.WeakMasterPassword\n          );\n          authResult.forcePasswordReset = ForceResetPasswordReason.WeakMasterPassword;\n        }\n      }\n    }\n    return authResult;\n  }\n\n  protected override async setMasterKey(response: IdentityTokenResponse) {\n    await this.cryptoService.setMasterKey(this.masterKey);\n    await this.cryptoService.setMasterKeyHash(this.localMasterKeyHash);\n  }\n\n  protected override async setUserKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n\n    const masterKey = await this.cryptoService.getMasterKey();\n    if (masterKey) {\n      const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n      await this.cryptoService.setUserKey(userKey);\n    }\n  }\n\n  protected override async setPrivateKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setPrivateKey(\n      response.privateKey ?? (await this.createKeyPairForOldAccount())\n    );\n  }\n\n  private getMasterPasswordPolicyOptionsFromResponse(\n    response: IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse\n  ): MasterPasswordPolicyOptions {\n    if (response == null || response instanceof IdentityCaptchaResponse) {\n      return null;\n    }\n    return MasterPasswordPolicyOptions.fromResponse(response.masterPasswordPolicy);\n  }\n\n  private evaluateMasterPassword(\n    { masterPassword, email }: PasswordLogInCredentials,\n    options: MasterPasswordPolicyOptions\n  ): boolean {\n    const passwordStrength = this.passwordStrengthService.getPasswordStrength(\n      masterPassword,\n      email\n    )?.score;\n\n    return this.policyService.evaluateMasterPassword(passwordStrength, masterPassword, options);\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { PasswordlessLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class PasswordlessLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get accessCode() {\n    return this.passwordlessCredentials.accessCode;\n  }\n\n  get authRequestId() {\n    return this.passwordlessCredentials.authRequestId;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n  private passwordlessCredentials: PasswordlessLogInCredentials;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  override async logIn(credentials: PasswordlessLogInCredentials) {\n    this.passwordlessCredentials = credentials;\n\n    this.tokenRequest = new PasswordTokenRequest(\n      credentials.email,\n      credentials.accessCode,\n      null,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    this.tokenRequest.setPasswordlessAccessCode(credentials.authRequestId);\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  override async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    return super.logInTwoFactor(twoFactor);\n  }\n\n  protected override async setMasterKey(response: IdentityTokenResponse) {\n    if (\n      this.passwordlessCredentials.decryptedMasterKey &&\n      this.passwordlessCredentials.decryptedMasterKeyHash\n    ) {\n      await this.cryptoService.setMasterKey(this.passwordlessCredentials.decryptedMasterKey);\n      await this.cryptoService.setMasterKeyHash(\n        this.passwordlessCredentials.decryptedMasterKeyHash\n      );\n    }\n  }\n\n  protected override async setUserKey(response: IdentityTokenResponse): Promise<void> {\n    // User now may or may not have a master password\n    // but set the master key encrypted user key if it exists regardless\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n\n    if (this.passwordlessCredentials.decryptedUserKey) {\n      await this.cryptoService.setUserKey(this.passwordlessCredentials.decryptedUserKey);\n    } else {\n      await this.trySetUserKeyWithMasterKey();\n      // Establish trust if required after setting user key\n      await this.deviceTrustCryptoService.trustDeviceIfRequired();\n    }\n  }\n\n  private async trySetUserKeyWithMasterKey(): Promise<void> {\n    const masterKey = await this.cryptoService.getMasterKey();\n    if (masterKey) {\n      const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n      await this.cryptoService.setUserKey(userKey);\n    }\n  }\n\n  protected override async setPrivateKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setPrivateKey(\n      response.privateKey ?? (await this.createKeyPairForOldAccount())\n    );\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class SsoTokenRequest extends TokenRequest {\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUri: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: string) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"authorization_code\";\n    obj.code = this.code;\n    obj.code_verifier = this.codeVerifier;\n    obj.redirect_uri = this.redirectUri;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AuthRequestResponse } from \"../../auth/models/response/auth-request.response\";\nimport { HttpStatusCode } from \"../../enums\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"../abstractions/auth-request-crypto.service.abstraction\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { SsoLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class SsoLogInStrategy extends LogInStrategy {\n  tokenRequest: SsoTokenRequest;\n  orgId: string;\n\n  // A session token server side to serve as an authentication factor for the user\n  // in order to send email OTPs to the user's configured 2FA email address\n  // as we don't have a master password hash or other verifiable secret when using SSO.\n  ssoEmail2FaSessionToken?: string;\n  email?: string; // email not preserved through SSO process so get from server\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private keyConnectorService: KeyConnectorService,\n    private deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    private authReqCryptoService: AuthRequestCryptoServiceAbstraction,\n    private i18nService: I18nService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async logIn(credentials: SsoLogInCredentials) {\n    this.orgId = credentials.orgId;\n    this.tokenRequest = new SsoTokenRequest(\n      credentials.code,\n      credentials.codeVerifier,\n      credentials.redirectUrl,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    const [ssoAuthResult] = await this.startLogIn();\n\n    this.email = ssoAuthResult.email;\n    this.ssoEmail2FaSessionToken = ssoAuthResult.ssoEmail2FaSessionToken;\n\n    return ssoAuthResult;\n  }\n\n  protected override async setMasterKey(tokenResponse: IdentityTokenResponse) {\n    // The only way we can be setting a master key at this point is if we are using Key Connector.\n    // First, check to make sure that we should do so based on the token response.\n    if (this.shouldSetMasterKeyFromKeyConnector(tokenResponse)) {\n      // If we're here, we know that the user should use Key Connector (they have a KeyConnectorUrl) and does not have a master password.\n      // We can now check the key on the token response to see whether they are a brand new user or an existing user.\n      // The presence of a masterKeyEncryptedUserKey indicates that the user has already been provisioned in Key Connector.\n      const newSsoUser = tokenResponse.key == null;\n      if (newSsoUser) {\n        await this.keyConnectorService.convertNewSsoUserToKeyConnector(tokenResponse, this.orgId);\n      } else {\n        const keyConnectorUrl = this.getKeyConnectorUrl(tokenResponse);\n        await this.keyConnectorService.setMasterKeyFromUrl(keyConnectorUrl);\n      }\n    }\n  }\n\n  /**\n   * Determines if it is possible set the `masterKey` from Key Connector.\n   * @param tokenResponse\n   * @returns `true` if the master key can be set from Key Connector, `false` otherwise\n   */\n  private shouldSetMasterKeyFromKeyConnector(tokenResponse: IdentityTokenResponse): boolean {\n    const userDecryptionOptions = tokenResponse?.userDecryptionOptions;\n\n    if (userDecryptionOptions != null) {\n      const userHasMasterPassword = userDecryptionOptions.hasMasterPassword;\n      const userHasKeyConnectorUrl =\n        userDecryptionOptions.keyConnectorOption?.keyConnectorUrl != null;\n\n      // In order for us to set the master key from Key Connector, we need to have a Key Connector URL\n      // and the user must not have a master password.\n      return userHasKeyConnectorUrl && !userHasMasterPassword;\n    } else {\n      // In pre-TDE versions of the server, the userDecryptionOptions will not be present.\n      // In this case, we can determine if the user has a master password and has a Key Connector URL by\n      // just checking the keyConnectorUrl property. This is because the server short-circuits on the response\n      // and will not pass back the URL in the response if the user has a master password.\n      // TODO: remove compatibility check after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3537)\n      return tokenResponse.keyConnectorUrl != null;\n    }\n  }\n\n  private getKeyConnectorUrl(tokenResponse: IdentityTokenResponse): string {\n    // TODO: remove tokenResponse.keyConnectorUrl reference after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3537)\n    const userDecryptionOptions = tokenResponse?.userDecryptionOptions;\n    return (\n      tokenResponse.keyConnectorUrl ?? userDecryptionOptions?.keyConnectorOption?.keyConnectorUrl\n    );\n  }\n\n  // TODO: future passkey login strategy will need to support setting user key (decrypting via TDE or admin approval request)\n  // so might be worth moving this logic to a common place (base login strategy or a separate service?)\n  protected override async setUserKey(tokenResponse: IdentityTokenResponse): Promise<void> {\n    const masterKeyEncryptedUserKey = tokenResponse.key;\n\n    // Note: masterKeyEncryptedUserKey is undefined for SSO JIT provisioned users\n    // on account creation and subsequent logins (confirmed or unconfirmed)\n    // but that is fine for TDE so we cannot return if it is undefined\n\n    if (masterKeyEncryptedUserKey) {\n      // set the master key encrypted user key if it exists\n      await this.cryptoService.setMasterKeyEncryptedUserKey(masterKeyEncryptedUserKey);\n    }\n\n    const userDecryptionOptions = tokenResponse?.userDecryptionOptions;\n\n    // Note: TDE and key connector are mutually exclusive\n    if (userDecryptionOptions?.trustedDeviceOption) {\n      await this.trySetUserKeyWithApprovedAdminRequestIfExists();\n\n      const hasUserKey = await this.cryptoService.hasUserKey();\n\n      // Only try to set user key with device key if admin approval request was not successful\n      if (!hasUserKey) {\n        await this.trySetUserKeyWithDeviceKey(tokenResponse);\n      }\n    } else if (\n      masterKeyEncryptedUserKey != null &&\n      this.getKeyConnectorUrl(tokenResponse) != null\n    ) {\n      // Key connector enabled for user\n      await this.trySetUserKeyWithMasterKey();\n    }\n\n    // Note: In the traditional SSO flow with MP without key connector, the lock component\n    // is responsible for deriving master key from MP entry and then decrypting the user key\n  }\n\n  private async trySetUserKeyWithApprovedAdminRequestIfExists(): Promise<void> {\n    // At this point a user could have an admin auth request that has been approved\n    const adminAuthReqStorable = await this.stateService.getAdminAuthRequest();\n\n    if (!adminAuthReqStorable) {\n      return;\n    }\n\n    // Call server to see if admin auth request has been approved\n    let adminAuthReqResponse: AuthRequestResponse;\n\n    try {\n      adminAuthReqResponse = await this.apiService.getAuthRequest(adminAuthReqStorable.id);\n    } catch (error) {\n      if (error instanceof ErrorResponse && error.statusCode === HttpStatusCode.NotFound) {\n        // if we get a 404, it means the auth request has been deleted so clear it from storage\n        await this.stateService.setAdminAuthRequest(null);\n      }\n\n      // Always return on an error here as we don't want to block the user from logging in\n      return;\n    }\n\n    if (adminAuthReqResponse?.requestApproved) {\n      // if masterPasswordHash has a value, we will always receive authReqResponse.key\n      // as authRequestPublicKey(masterKey) + authRequestPublicKey(masterPasswordHash)\n      if (adminAuthReqResponse.masterPasswordHash) {\n        await this.authReqCryptoService.setKeysAfterDecryptingSharedMasterKeyAndHash(\n          adminAuthReqResponse,\n          adminAuthReqStorable.privateKey\n        );\n      } else {\n        // if masterPasswordHash is null, we will always receive authReqResponse.key\n        // as authRequestPublicKey(userKey)\n        await this.authReqCryptoService.setUserKeyAfterDecryptingSharedUserKey(\n          adminAuthReqResponse,\n          adminAuthReqStorable.privateKey\n        );\n      }\n\n      if (await this.cryptoService.hasUserKey()) {\n        // Now that we have a decrypted user key in memory, we can check if we\n        // need to establish trust on the current device\n        await this.deviceTrustCryptoService.trustDeviceIfRequired();\n\n        // if we successfully decrypted the user key, we can delete the admin auth request out of state\n        // TODO: eventually we post and clean up DB as well once consumed on client\n        await this.stateService.setAdminAuthRequest(null);\n\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"loginApproved\"));\n      }\n    }\n  }\n\n  private async trySetUserKeyWithDeviceKey(tokenResponse: IdentityTokenResponse): Promise<void> {\n    const trustedDeviceOption = tokenResponse.userDecryptionOptions?.trustedDeviceOption;\n\n    const deviceKey = await this.deviceTrustCryptoService.getDeviceKey();\n    const encDevicePrivateKey = trustedDeviceOption?.encryptedPrivateKey;\n    const encUserKey = trustedDeviceOption?.encryptedUserKey;\n\n    if (!deviceKey || !encDevicePrivateKey || !encUserKey) {\n      return;\n    }\n\n    const userKey = await this.deviceTrustCryptoService.decryptUserKeyWithDeviceKey(\n      encDevicePrivateKey,\n      encUserKey,\n      deviceKey\n    );\n\n    if (userKey) {\n      await this.cryptoService.setUserKey(userKey);\n    }\n  }\n\n  private async trySetUserKeyWithMasterKey(): Promise<void> {\n    const masterKey = await this.cryptoService.getMasterKey();\n\n    // There is a scenario in which the master key is not set here. That will occur if the user\n    // has a master password and is using Key Connector. In that case, we cannot set the master key\n    // because the user hasn't entered their master password yet.\n    // Instead, we'll return here and let the migration to Key Connector handle setting the master key.\n    if (!masterKey) {\n      return;\n    }\n\n    const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n    await this.cryptoService.setUserKey(userKey);\n  }\n\n  protected override async setPrivateKey(tokenResponse: IdentityTokenResponse): Promise<void> {\n    const newSsoUser = tokenResponse.key == null;\n\n    if (!newSsoUser) {\n      await this.cryptoService.setPrivateKey(\n        tokenResponse.privateKey ?? (await this.createKeyPairForOldAccount())\n      );\n    }\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class UserApiTokenRequest extends TokenRequest {\n  constructor(\n    public clientId: string,\n    public clientSecret: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken() {\n    const obj = super.toIdentityToken(this.clientId);\n\n    obj.scope = this.clientId.startsWith(\"organization\") ? \"api.organization\" : \"api\";\n    obj.grant_type = \"client_credentials\";\n    obj.client_secret = this.clientSecret;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { TokenService } from \"../../auth/abstractions/token.service\";\nimport { TwoFactorService } from \"../../auth/abstractions/two-factor.service\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EnvironmentService } from \"../../platform/abstractions/environment.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { UserApiLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class UserApiLogInStrategy extends LogInStrategy {\n  tokenRequest: UserApiTokenRequest;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private environmentService: EnvironmentService,\n    private keyConnectorService: KeyConnectorService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  override async logIn(credentials: UserApiLogInCredentials) {\n    this.tokenRequest = new UserApiTokenRequest(\n      credentials.clientId,\n      credentials.clientSecret,\n      await this.buildTwoFactor(),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  protected override async setMasterKey(response: IdentityTokenResponse) {\n    if (response.apiUseKeyConnector) {\n      const keyConnectorUrl = this.environmentService.getKeyConnectorUrl();\n      await this.keyConnectorService.setMasterKeyFromUrl(keyConnectorUrl);\n    }\n  }\n\n  protected override async setUserKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n\n    if (response.apiUseKeyConnector) {\n      const masterKey = await this.cryptoService.getMasterKey();\n      if (masterKey) {\n        const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(masterKey);\n        await this.cryptoService.setUserKey(userKey);\n      }\n    }\n  }\n\n  protected override async setPrivateKey(response: IdentityTokenResponse): Promise<void> {\n    await this.cryptoService.setPrivateKey(\n      response.privateKey ?? (await this.createKeyPairForOldAccount())\n    );\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    await super.saveAccountInformation(tokenResponse);\n    await this.stateService.setApiKeyClientId(this.tokenRequest.clientId);\n    await this.stateService.setApiKeyClientSecret(this.tokenRequest.clientSecret);\n  }\n}\n","export class PasswordlessAuthRequest {\n  constructor(\n    readonly key: string,\n    readonly masterPasswordHash: string,\n    readonly deviceIdentifier: string,\n    readonly requestApproved: boolean\n  ) {}\n}\n","import { Observable, Subject } from \"rxjs\";\n\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { KdfType, KeySuffixOptions } from \"../../enums\";\nimport { PreloginRequest } from \"../../models/request/prelogin.request\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { AuthRequestPushNotification } from \"../../models/response/notification.response\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EncryptService } from \"../../platform/abstractions/encrypt.service\";\nimport { EnvironmentService } from \"../../platform/abstractions/environment.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { MasterKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordStrengthServiceAbstraction } from \"../../tools/password-strength\";\nimport { AuthRequestCryptoServiceAbstraction } from \"../abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService as AuthServiceAbstraction } from \"../abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthenticationStatus } from \"../enums/authentication-status\";\nimport { AuthenticationType } from \"../enums/authentication-type\";\nimport { PasswordLogInStrategy } from \"../login-strategies/password-login.strategy\";\nimport { PasswordlessLogInStrategy } from \"../login-strategies/passwordless-login.strategy\";\nimport { SsoLogInStrategy } from \"../login-strategies/sso-login.strategy\";\nimport { UserApiLogInStrategy } from \"../login-strategies/user-api-login.strategy\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport {\n  PasswordlessLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  UserApiLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { PasswordlessAuthRequest } from \"../models/request/passwordless-auth.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nconst sessionTimeoutLength = 2 * 60 * 1000; // 2 minutes\n\nexport class AuthService implements AuthServiceAbstraction {\n  get email(): string {\n    if (\n      this.logInStrategy instanceof PasswordLogInStrategy ||\n      this.logInStrategy instanceof PasswordlessLogInStrategy ||\n      this.logInStrategy instanceof SsoLogInStrategy\n    ) {\n      return this.logInStrategy.email;\n    }\n\n    return null;\n  }\n\n  get masterPasswordHash(): string {\n    return this.logInStrategy instanceof PasswordLogInStrategy\n      ? this.logInStrategy.masterPasswordHash\n      : null;\n  }\n\n  get accessCode(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.accessCode\n      : null;\n  }\n\n  get authRequestId(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.authRequestId\n      : null;\n  }\n\n  get ssoEmail2FaSessionToken(): string {\n    return this.logInStrategy instanceof SsoLogInStrategy\n      ? this.logInStrategy.ssoEmail2FaSessionToken\n      : null;\n  }\n\n  private logInStrategy:\n    | UserApiLogInStrategy\n    | PasswordLogInStrategy\n    | SsoLogInStrategy\n    | PasswordlessLogInStrategy;\n  private sessionTimeout: any;\n\n  private pushNotificationSubject = new Subject<string>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected keyConnectorService: KeyConnectorService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService,\n    protected i18nService: I18nService,\n    protected encryptService: EncryptService,\n    protected passwordStrengthService: PasswordStrengthServiceAbstraction,\n    protected policyService: PolicyService,\n    protected deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction,\n    protected authReqCryptoService: AuthRequestCryptoServiceAbstraction\n  ) {}\n\n  async logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult> {\n    this.clearState();\n\n    let strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy;\n\n    switch (credentials.type) {\n      case AuthenticationType.Password:\n        strategy = new PasswordLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.passwordStrengthService,\n          this.policyService,\n          this\n        );\n        break;\n      case AuthenticationType.Sso:\n        strategy = new SsoLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.keyConnectorService,\n          this.deviceTrustCryptoService,\n          this.authReqCryptoService,\n          this.i18nService\n        );\n        break;\n      case AuthenticationType.UserApi:\n        strategy = new UserApiLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.environmentService,\n          this.keyConnectorService\n        );\n        break;\n      case AuthenticationType.Passwordless:\n        strategy = new PasswordlessLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.deviceTrustCryptoService\n        );\n        break;\n    }\n\n    const result = await strategy.logIn(credentials as any);\n\n    if (result?.requiresTwoFactor) {\n      this.saveState(strategy);\n    }\n    return result;\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    if (this.logInStrategy == null) {\n      throw new Error(this.i18nService.t(\"sessionTimeout\"));\n    }\n\n    try {\n      const result = await this.logInStrategy.logInTwoFactor(twoFactor, captchaResponse);\n\n      // Only clear state if 2FA token has been accepted, otherwise we need to be able to try again\n      if (!result.requiresTwoFactor && !result.requiresCaptcha) {\n        this.clearState();\n      }\n      return result;\n    } catch (e) {\n      // API exceptions are okay, but if there are any unhandled client-side errors then clear state to be safe\n      if (!(e instanceof ErrorResponse)) {\n        this.clearState();\n      }\n      throw e;\n    }\n  }\n\n  logOut(callback: () => void) {\n    callback();\n    this.messagingService.send(\"loggedOut\");\n  }\n\n  authingWithUserApiKey(): boolean {\n    return this.logInStrategy instanceof UserApiLogInStrategy;\n  }\n\n  authingWithSso(): boolean {\n    return this.logInStrategy instanceof SsoLogInStrategy;\n  }\n\n  authingWithPassword(): boolean {\n    return this.logInStrategy instanceof PasswordLogInStrategy;\n  }\n\n  authingWithPasswordless(): boolean {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy;\n  }\n\n  async getAuthStatus(userId?: string): Promise<AuthenticationStatus> {\n    // If we don't have an access token or userId, we're logged out\n    const isAuthenticated = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!isAuthenticated) {\n      return AuthenticationStatus.LoggedOut;\n    }\n\n    // If we don't have a user key in memory, we're locked\n    if (!(await this.cryptoService.hasUserKeyInMemory(userId))) {\n      // Check if the user has vault timeout set to never and verify that\n      // they've never unlocked their vault\n      const neverLock =\n        (await this.cryptoService.hasUserKeyStored(KeySuffixOptions.Auto, userId)) &&\n        !(await this.stateService.getEverBeenUnlocked({ userId: userId }));\n\n      if (neverLock) {\n        // Attempt to get the key from storage and set it in memory\n        const userKey = await this.cryptoService.getUserKeyFromStorage(\n          KeySuffixOptions.Auto,\n          userId\n        );\n        await this.cryptoService.setUserKey(userKey, userId);\n      }\n    }\n\n    // We do another check here in case setting the auto key failed\n    const hasKeyInMemory = await this.cryptoService.hasUserKeyInMemory(userId);\n    if (!hasKeyInMemory) {\n      return AuthenticationStatus.Locked;\n    }\n\n    return AuthenticationStatus.Unlocked;\n  }\n\n  async makePreloginKey(masterPassword: string, email: string): Promise<MasterKey> {\n    email = email.trim().toLowerCase();\n    let kdf: KdfType = null;\n    let kdfConfig: KdfConfig = null;\n    try {\n      const preloginResponse = await this.apiService.postPrelogin(new PreloginRequest(email));\n      if (preloginResponse != null) {\n        kdf = preloginResponse.kdf;\n        kdfConfig = new KdfConfig(\n          preloginResponse.kdfIterations,\n          preloginResponse.kdfMemory,\n          preloginResponse.kdfParallelism\n        );\n      }\n    } catch (e) {\n      if (e == null || e.statusCode !== 404) {\n        throw e;\n      }\n    }\n    return await this.cryptoService.makeMasterKey(masterPassword, email, kdf, kdfConfig);\n  }\n\n  async authResponsePushNotification(notification: AuthRequestPushNotification): Promise<any> {\n    this.pushNotificationSubject.next(notification.id);\n  }\n\n  getPushNotificationObs$(): Observable<any> {\n    return this.pushNotificationSubject.asObservable();\n  }\n\n  async passwordlessLogin(\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ): Promise<AuthRequestResponse> {\n    const pubKey = Utils.fromB64ToArray(key);\n\n    const masterKey = await this.cryptoService.getMasterKey();\n    let keyToEncrypt;\n    let encryptedMasterKeyHash = null;\n\n    if (masterKey) {\n      keyToEncrypt = masterKey.encKey;\n\n      // Only encrypt the master password hash if masterKey exists as\n      // we won't have a masterKeyHash without a masterKey\n      const masterKeyHash = await this.stateService.getKeyHash();\n      if (masterKeyHash != null) {\n        encryptedMasterKeyHash = await this.cryptoService.rsaEncrypt(\n          Utils.fromUtf8ToArray(masterKeyHash),\n          pubKey\n        );\n      }\n    } else {\n      const userKey = await this.cryptoService.getUserKey();\n      keyToEncrypt = userKey.key;\n    }\n\n    const encryptedKey = await this.cryptoService.rsaEncrypt(keyToEncrypt, pubKey);\n\n    const request = new PasswordlessAuthRequest(\n      encryptedKey.encryptedString,\n      encryptedMasterKeyHash?.encryptedString,\n      await this.appIdService.getAppId(),\n      requestApproved\n    );\n    return await this.apiService.putAuthRequest(id, request);\n  }\n\n  private saveState(\n    strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy\n  ) {\n    this.logInStrategy = strategy;\n    this.startSessionTimeout();\n  }\n\n  private clearState() {\n    this.logInStrategy = null;\n    this.clearSessionTimeout();\n  }\n\n  private startSessionTimeout() {\n    this.clearSessionTimeout();\n    this.sessionTimeout = setTimeout(() => this.clearState(), sessionTimeoutLength);\n  }\n\n  private clearSessionTimeout() {\n    if (this.sessionTimeout != null) {\n      clearTimeout(this.sessionTimeout);\n    }\n  }\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class UpdateDevicesTrustRequest extends SecretVerificationRequest {\n  currentDevice: DeviceKeysUpdateRequest;\n  otherDevices: OtherDeviceKeysUpdateRequest[];\n}\n\nexport class DeviceKeysUpdateRequest {\n  encryptedPublicKey: string;\n  encryptedUserKey: string;\n}\n\nexport class OtherDeviceKeysUpdateRequest extends DeviceKeysUpdateRequest {\n  id: string;\n}\n","import { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { AppIdService } from \"../../platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"../../platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EncryptService } from \"../../platform/abstractions/encrypt.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport {\n  SymmetricCryptoKey,\n  DeviceKey,\n  UserKey,\n} from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { CsprngArray } from \"../../types/csprng\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"../abstractions/device-trust-crypto.service.abstraction\";\nimport { DevicesApiServiceAbstraction } from \"../abstractions/devices-api.service.abstraction\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport {\n  DeviceKeysUpdateRequest,\n  UpdateDevicesTrustRequest,\n} from \"../models/request/update-devices-trust.request\";\n\nexport class DeviceTrustCryptoService implements DeviceTrustCryptoServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private cryptoService: CryptoService,\n    private encryptService: EncryptService,\n    private stateService: StateService,\n    private appIdService: AppIdService,\n    private devicesApiService: DevicesApiServiceAbstraction,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  /**\n   * @description Retrieves the users choice to trust the device which can only happen after decryption\n   * Note: this value should only be used once and then reset\n   */\n  async getShouldTrustDevice(): Promise<boolean> {\n    return await this.stateService.getShouldTrustDevice();\n  }\n\n  async setShouldTrustDevice(value: boolean): Promise<void> {\n    await this.stateService.setShouldTrustDevice(value);\n  }\n\n  async trustDeviceIfRequired(): Promise<void> {\n    const shouldTrustDevice = await this.getShouldTrustDevice();\n    if (shouldTrustDevice) {\n      await this.trustDevice();\n      // reset the trust choice\n      await this.setShouldTrustDevice(false);\n    }\n  }\n\n  async trustDevice(): Promise<DeviceResponse> {\n    // Attempt to get user key\n    const userKey: UserKey = await this.cryptoService.getUserKey();\n\n    // If user key is not found, throw error\n    if (!userKey) {\n      throw new Error(\"User symmetric key not found\");\n    }\n\n    // Generate deviceKey\n    const deviceKey = await this.makeDeviceKey();\n\n    // Generate asymmetric RSA key pair: devicePrivateKey, devicePublicKey\n    const [devicePublicKey, devicePrivateKey] = await this.cryptoFunctionService.rsaGenerateKeyPair(\n      2048\n    );\n\n    const [\n      devicePublicKeyEncryptedUserKey,\n      userKeyEncryptedDevicePublicKey,\n      deviceKeyEncryptedDevicePrivateKey,\n    ] = await Promise.all([\n      // Encrypt user key with the DevicePublicKey\n      this.cryptoService.rsaEncrypt(userKey.key, devicePublicKey),\n\n      // Encrypt devicePublicKey with user key\n      this.encryptService.encrypt(devicePublicKey, userKey),\n\n      // Encrypt devicePrivateKey with deviceKey\n      this.encryptService.encrypt(devicePrivateKey, deviceKey),\n    ]);\n\n    // Send encrypted keys to server\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const deviceResponse = await this.devicesApiService.updateTrustedDeviceKeys(\n      deviceIdentifier,\n      devicePublicKeyEncryptedUserKey.encryptedString,\n      userKeyEncryptedDevicePublicKey.encryptedString,\n      deviceKeyEncryptedDevicePrivateKey.encryptedString\n    );\n\n    // store device key in local/secure storage if enc keys posted to server successfully\n    await this.setDeviceKey(deviceKey);\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deviceTrusted\"));\n\n    return deviceResponse;\n  }\n\n  async rotateDevicesTrust(newUserKey: UserKey, masterPasswordHash: string): Promise<void> {\n    const currentDeviceKey = await this.getDeviceKey();\n    if (currentDeviceKey == null) {\n      // If the current device doesn't have a device key available to it, then we can't\n      // rotate any trust at all, so early return.\n      return;\n    }\n\n    // At this point of rotating their keys, they should still have their old user key in state\n    const oldUserKey = await this.stateService.getUserKey();\n\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const secretVerificationRequest = new SecretVerificationRequest();\n    secretVerificationRequest.masterPasswordHash = masterPasswordHash;\n\n    // Get the keys that are used in rotating a devices keys from the server\n    const currentDeviceKeys = await this.devicesApiService.getDeviceKeys(\n      deviceIdentifier,\n      secretVerificationRequest\n    );\n\n    // Decrypt the existing device public key with the old user key\n    const decryptedDevicePublicKey = await this.encryptService.decryptToBytes(\n      currentDeviceKeys.encryptedPublicKey,\n      oldUserKey\n    );\n\n    // Encrypt the brand new user key with the now-decrypted public key for the device\n    const encryptedNewUserKey = await this.cryptoService.rsaEncrypt(\n      newUserKey.key,\n      decryptedDevicePublicKey\n    );\n\n    // Re-encrypt the device public key with the new user key\n    const encryptedDevicePublicKey = await this.encryptService.encrypt(\n      decryptedDevicePublicKey,\n      newUserKey\n    );\n\n    const currentDeviceUpdateRequest = new DeviceKeysUpdateRequest();\n    currentDeviceUpdateRequest.encryptedUserKey = encryptedNewUserKey.encryptedString;\n    currentDeviceUpdateRequest.encryptedPublicKey = encryptedDevicePublicKey.encryptedString;\n\n    // TODO: For device management, allow this method to take an array of device ids that can be looped over and individually rotated\n    // then it can be added to trustRequest.otherDevices.\n\n    const trustRequest = new UpdateDevicesTrustRequest();\n    trustRequest.masterPasswordHash = masterPasswordHash;\n    trustRequest.currentDevice = currentDeviceUpdateRequest;\n    trustRequest.otherDevices = [];\n\n    await this.devicesApiService.updateTrust(trustRequest);\n  }\n\n  async getDeviceKey(): Promise<DeviceKey> {\n    return await this.stateService.getDeviceKey();\n  }\n\n  private async setDeviceKey(deviceKey: DeviceKey | null): Promise<void> {\n    await this.stateService.setDeviceKey(deviceKey);\n  }\n\n  private async makeDeviceKey(): Promise<DeviceKey> {\n    // Create 512-bit device key\n    const randomBytes: CsprngArray = await this.cryptoFunctionService.aesGenerateKey(512);\n    const deviceKey = new SymmetricCryptoKey(randomBytes) as DeviceKey;\n\n    return deviceKey;\n  }\n\n  async decryptUserKeyWithDeviceKey(\n    encryptedDevicePrivateKey: EncString,\n    encryptedUserKey: EncString,\n    deviceKey?: DeviceKey\n  ): Promise<UserKey | null> {\n    // If device key provided use it, otherwise try to retrieve from storage\n    deviceKey ||= await this.getDeviceKey();\n\n    if (!deviceKey) {\n      // User doesn't have a device key anymore so device is untrusted\n      return null;\n    }\n\n    try {\n      // attempt to decrypt encryptedDevicePrivateKey with device key\n      const devicePrivateKey = await this.encryptService.decryptToBytes(\n        encryptedDevicePrivateKey,\n        deviceKey\n      );\n\n      // Attempt to decrypt encryptedUserDataKey with devicePrivateKey\n      const userKey = await this.cryptoService.rsaDecrypt(\n        encryptedUserKey.encryptedString,\n        devicePrivateKey\n      );\n\n      return new SymmetricCryptoKey(userKey) as UserKey;\n    } catch (e) {\n      // If either decryption effort fails, we want to remove the device key\n      await this.setDeviceKey(null);\n\n      return null;\n    }\n  }\n\n  async supportsDeviceTrust(): Promise<boolean> {\n    const decryptionOptions = await this.stateService.getAccountDecryptionOptions();\n    return decryptionOptions?.trustedDeviceOption != null;\n  }\n}\n","import { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class DeviceResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  name: string;\n  identifier: string;\n  type: DeviceType;\n  creationDate: string;\n  revisionDate: string;\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n  }\n}\n","export class TrustedDeviceKeysRequest {\n  constructor(\n    public encryptedUserKey: string,\n    public encryptedPublicKey: string,\n    public encryptedPrivateKey: string\n  ) {}\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\n\nexport class ProtectedDeviceResponse extends BaseResponse {\n  constructor(response: Jsonify<ProtectedDeviceResponse>) {\n    super(response);\n    this.id = this.getResponseProperty(\"id\");\n    this.name = this.getResponseProperty(\"name\");\n    this.identifier = this.getResponseProperty(\"identifier\");\n    this.type = this.getResponseProperty(\"type\");\n    this.creationDate = new Date(this.getResponseProperty(\"creationDate\"));\n    if (response.encryptedUserKey) {\n      this.encryptedUserKey = new EncString(this.getResponseProperty(\"encryptedUserKey\"));\n    }\n    if (response.encryptedPublicKey) {\n      this.encryptedPublicKey = new EncString(this.getResponseProperty(\"encryptedPublicKey\"));\n    }\n  }\n\n  id: string;\n  name: string;\n  type: DeviceType;\n  identifier: string;\n  creationDate: Date;\n  /**\n   * Intended to be the users symmetric key that is encrypted in some form, the current way to encrypt this is with\n   * the devices public key.\n   */\n  encryptedUserKey: EncString;\n  /**\n   * Intended to be the public key that was generated for a device upon trust and encrypted. Currenly encrypted using\n   * a users symmetric key so that when trusted and unlocked a user can decrypt the public key for all their devices.\n   * This enabled a user to rotate the keys for all of their devices.\n   */\n  encryptedPublicKey: EncString;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { TrustedDeviceKeysRequest } from \"../../services/devices/requests/trusted-device-keys.request\";\nimport { DevicesApiServiceAbstraction } from \"../abstractions/devices-api.service.abstraction\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport { UpdateDevicesTrustRequest } from \"../models/request/update-devices-trust.request\";\nimport { ProtectedDeviceResponse } from \"../models/response/protected-device.response\";\n\nexport class DevicesApiServiceImplementation implements DevicesApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  async getKnownDevice(email: string, deviceIdentifier: string): Promise<boolean> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/devices/knowndevice\",\n      null,\n      false,\n      true,\n      null,\n      (headers) => {\n        headers.set(\"X-Device-Identifier\", deviceIdentifier);\n        headers.set(\"X-Request-Email\", Utils.fromUtf8ToUrlB64(email));\n      }\n    );\n    return r as boolean;\n  }\n\n  /**\n   * Get device by identifier\n   * @param deviceIdentifier - client generated id (not device id in DB)\n   */\n  async getDeviceByIdentifier(deviceIdentifier: string): Promise<DeviceResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      `/devices/identifier/${deviceIdentifier}`,\n      null,\n      true,\n      true\n    );\n    return new DeviceResponse(r);\n  }\n\n  async getDevices(): Promise<ListResponse<DeviceResponse>> {\n    const r = await this.apiService.send(\"GET\", \"/devices\", null, true, true, null);\n    return new ListResponse(r, DeviceResponse);\n  }\n\n  async updateTrustedDeviceKeys(\n    deviceIdentifier: string,\n    devicePublicKeyEncryptedUserKey: string,\n    userKeyEncryptedDevicePublicKey: string,\n    deviceKeyEncryptedDevicePrivateKey: string\n  ): Promise<DeviceResponse> {\n    const request = new TrustedDeviceKeysRequest(\n      devicePublicKeyEncryptedUserKey,\n      userKeyEncryptedDevicePublicKey,\n      deviceKeyEncryptedDevicePrivateKey\n    );\n\n    const result = await this.apiService.send(\n      \"PUT\",\n      `/devices/${deviceIdentifier}/keys`,\n      request,\n      true,\n      true\n    );\n\n    return new DeviceResponse(result);\n  }\n\n  async updateTrust(updateDevicesTrustRequestModel: UpdateDevicesTrustRequest): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/devices/update-trust\",\n      updateDevicesTrustRequestModel,\n      true,\n      false\n    );\n  }\n\n  async getDeviceKeys(\n    deviceIdentifier: string,\n    secretVerificationRequest: SecretVerificationRequest\n  ): Promise<ProtectedDeviceResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/devices/${deviceIdentifier}/retrieve-keys`,\n      secretVerificationRequest,\n      true,\n      true\n    );\n    return new ProtectedDeviceResponse(result);\n  }\n}\n","export class KeyConnectorUserKeyRequest {\n  key: string;\n\n  constructor(key: string) {\n    this.key = key;\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { KeysRequest } from \"../../../models/request/keys.request\";\nimport { KdfConfig } from \"../domain/kdf-config\";\n\nexport class SetKeyConnectorKeyRequest {\n  key: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    key: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    orgIdentifier: string,\n    keys: KeysRequest\n  ) {\n    this.key = key;\n    this.kdf = kdf;\n    this.kdfIterations = kdfConfig.iterations;\n    this.kdfMemory = kdfConfig.memory;\n    this.kdfParallelism = kdfConfig.parallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrganizationService } from \"../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserType } from \"../../admin-console/enums\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { CryptoFunctionService } from \"../../platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { MasterKey, SymmetricCryptoKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { KeyConnectorUserKeyRequest } from \"../models/request/key-connector-user-key.request\";\nimport { SetKeyConnectorKeyRequest } from \"../models/request/set-key-connector-key.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class KeyConnectorService implements KeyConnectorServiceAbstraction {\n  constructor(\n    private stateService: StateService,\n    private cryptoService: CryptoService,\n    private apiService: ApiService,\n    private tokenService: TokenService,\n    private logService: LogService,\n    private organizationService: OrganizationService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private logoutCallback: (expired: boolean, userId?: string) => Promise<void>\n  ) {}\n\n  setUsesKeyConnector(usesKeyConnector: boolean) {\n    return this.stateService.setUsesKeyConnector(usesKeyConnector);\n  }\n\n  async getUsesKeyConnector(): Promise<boolean> {\n    return await this.stateService.getUsesKeyConnector();\n  }\n\n  async userNeedsMigration() {\n    const loggedInUsingSso = await this.tokenService.getIsExternal();\n    const requiredByOrganization = (await this.getManagingOrganization()) != null;\n    const userIsNotUsingKeyConnector = !(await this.getUsesKeyConnector());\n\n    return loggedInUsingSso && requiredByOrganization && userIsNotUsingKeyConnector;\n  }\n\n  async migrateUser() {\n    const organization = await this.getManagingOrganization();\n    const masterKey = await this.cryptoService.getMasterKey();\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(masterKey.encKeyB64);\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(\n        organization.keyConnectorUrl,\n        keyConnectorRequest\n      );\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    await this.apiService.postConvertToKeyConnector();\n  }\n\n  // TODO: UserKey should be renamed to MasterKey and typed accordingly\n  async setMasterKeyFromUrl(url: string) {\n    try {\n      const masterKeyResponse = await this.apiService.getMasterKeyFromKeyConnector(url);\n      const keyArr = Utils.fromB64ToArray(masterKeyResponse.key);\n      const masterKey = new SymmetricCryptoKey(keyArr) as MasterKey;\n      await this.cryptoService.setMasterKey(masterKey);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n  }\n\n  async getManagingOrganization() {\n    const orgs = await this.organizationService.getAll();\n    return orgs.find(\n      (o) =>\n        o.keyConnectorEnabled &&\n        o.type !== OrganizationUserType.Admin &&\n        o.type !== OrganizationUserType.Owner &&\n        !o.isProviderUser\n    );\n  }\n\n  async convertNewSsoUserToKeyConnector(tokenResponse: IdentityTokenResponse, orgId: string) {\n    // TODO: Remove after tokenResponse.keyConnectorUrl is deprecated in 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3537)\n    const {\n      kdf,\n      kdfIterations,\n      kdfMemory,\n      kdfParallelism,\n      keyConnectorUrl: legacyKeyConnectorUrl,\n      userDecryptionOptions,\n    } = tokenResponse;\n    const password = await this.cryptoFunctionService.aesGenerateKey(512);\n    const kdfConfig = new KdfConfig(kdfIterations, kdfMemory, kdfParallelism);\n\n    const masterKey = await this.cryptoService.makeMasterKey(\n      Utils.fromBufferToB64(password),\n      await this.tokenService.getEmail(),\n      kdf,\n      kdfConfig\n    );\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(masterKey.encKeyB64);\n    await this.cryptoService.setMasterKey(masterKey);\n\n    const userKey = await this.cryptoService.makeUserKey(masterKey);\n    await this.cryptoService.setUserKey(userKey[0]);\n    await this.cryptoService.setMasterKeyEncryptedUserKey(userKey[1].encryptedString);\n\n    const [pubKey, privKey] = await this.cryptoService.makeKeyPair();\n\n    try {\n      const keyConnectorUrl =\n        legacyKeyConnectorUrl ?? userDecryptionOptions?.keyConnectorOption?.keyConnectorUrl;\n      await this.apiService.postUserKeyToKeyConnector(keyConnectorUrl, keyConnectorRequest);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    const keys = new KeysRequest(pubKey, privKey.encryptedString);\n    const setPasswordRequest = new SetKeyConnectorKeyRequest(\n      userKey[1].encryptedString,\n      kdf,\n      kdfConfig,\n      orgId,\n      keys\n    );\n    await this.apiService.postSetKeyConnectorKey(setPasswordRequest);\n  }\n\n  async setConvertAccountRequired(status: boolean) {\n    await this.stateService.setConvertAccountToKeyConnector(status);\n  }\n\n  async getConvertAccountRequired(): Promise<boolean> {\n    return await this.stateService.getConvertAccountToKeyConnector();\n  }\n\n  async removeConvertAccountRequired() {\n    await this.stateService.setConvertAccountToKeyConnector(null);\n  }\n\n  async clear() {\n    await this.removeConvertAccountRequired();\n  }\n\n  private handleKeyConnectorError(e: any) {\n    this.logService.error(e);\n    if (this.logoutCallback != null) {\n      this.logoutCallback(false);\n    }\n    throw new Error(\"Key Connector error\");\n  }\n}\n","import { StateService } from \"../../platform/abstractions/state.service\";\nimport { LoginService as LoginServiceAbstraction } from \"../abstractions/login.service\";\n\nexport class LoginService implements LoginServiceAbstraction {\n  private _email: string;\n  private _rememberEmail: boolean;\n\n  constructor(private stateService: StateService) {}\n\n  getEmail() {\n    return this._email;\n  }\n\n  getRememberEmail() {\n    return this._rememberEmail;\n  }\n\n  setEmail(value: string) {\n    this._email = value;\n  }\n\n  setRememberEmail(value: boolean) {\n    this._rememberEmail = value;\n  }\n\n  clearValues() {\n    this._email = null;\n    this._rememberEmail = null;\n  }\n\n  async saveEmailSettings() {\n    await this.stateService.setRememberedEmail(this._rememberEmail ? this._email : null);\n    this.clearValues();\n  }\n}\n","import { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { TokenService as TokenServiceAbstraction } from \"../abstractions/token.service\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class TokenService implements TokenServiceAbstraction {\n  static decodeToken(token: string): Promise<any> {\n    if (token == null) {\n      throw new Error(\"Token not provided.\");\n    }\n\n    const parts = token.split(\".\");\n    if (parts.length !== 3) {\n      throw new Error(\"JWT must have 3 parts\");\n    }\n\n    const decoded = Utils.fromUrlB64ToUtf8(parts[1]);\n    if (decoded == null) {\n      throw new Error(\"Cannot decode the token\");\n    }\n\n    const decodedToken = JSON.parse(decoded);\n    return decodedToken;\n  }\n\n  constructor(private stateService: StateService) {}\n\n  async setTokens(\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ): Promise<any> {\n    await this.setToken(accessToken);\n    await this.setRefreshToken(refreshToken);\n    if (clientIdClientSecret != null) {\n      await this.setClientId(clientIdClientSecret[0]);\n      await this.setClientSecret(clientIdClientSecret[1]);\n    }\n  }\n\n  async setClientId(clientId: string): Promise<any> {\n    return await this.stateService.setApiKeyClientId(clientId);\n  }\n\n  async getClientId(): Promise<string> {\n    return await this.stateService.getApiKeyClientId();\n  }\n\n  async setClientSecret(clientSecret: string): Promise<any> {\n    return await this.stateService.setApiKeyClientSecret(clientSecret);\n  }\n\n  async getClientSecret(): Promise<string> {\n    return await this.stateService.getApiKeyClientSecret();\n  }\n\n  async setToken(token: string): Promise<void> {\n    await this.stateService.setAccessToken(token);\n  }\n\n  async getToken(): Promise<string> {\n    return await this.stateService.getAccessToken();\n  }\n\n  async setRefreshToken(refreshToken: string): Promise<any> {\n    return await this.stateService.setRefreshToken(refreshToken);\n  }\n\n  async getRefreshToken(): Promise<string> {\n    return await this.stateService.getRefreshToken();\n  }\n\n  async setTwoFactorToken(tokenResponse: IdentityTokenResponse): Promise<any> {\n    return await this.stateService.setTwoFactorToken(tokenResponse.twoFactorToken);\n  }\n\n  async getTwoFactorToken(): Promise<string> {\n    return await this.stateService.getTwoFactorToken();\n  }\n\n  async clearTwoFactorToken(): Promise<any> {\n    return await this.stateService.setTwoFactorToken(null);\n  }\n\n  async clearToken(userId?: string): Promise<any> {\n    await this.stateService.setAccessToken(null, { userId: userId });\n    await this.stateService.setRefreshToken(null, { userId: userId });\n    await this.stateService.setApiKeyClientId(null, { userId: userId });\n    await this.stateService.setApiKeyClientSecret(null, { userId: userId });\n  }\n\n  // jwthelper methods\n  // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js\n\n  async decodeToken(token?: string): Promise<any> {\n    token = token ?? (await this.stateService.getAccessToken());\n\n    if (token == null) {\n      throw new Error(\"Token not found.\");\n    }\n\n    return TokenService.decodeToken(token);\n  }\n\n  async getTokenExpirationDate(): Promise<Date> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.exp === \"undefined\") {\n      return null;\n    }\n\n    const d = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    d.setUTCSeconds(decoded.exp);\n    return d;\n  }\n\n  async tokenSecondsRemaining(offsetSeconds = 0): Promise<number> {\n    const d = await this.getTokenExpirationDate();\n    if (d == null) {\n      return 0;\n    }\n\n    const msRemaining = d.valueOf() - (new Date().valueOf() + offsetSeconds * 1000);\n    return Math.round(msRemaining / 1000);\n  }\n\n  async tokenNeedsRefresh(minutes = 5): Promise<boolean> {\n    const sRemaining = await this.tokenSecondsRemaining();\n    return sRemaining < 60 * minutes;\n  }\n\n  async getUserId(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.sub === \"undefined\") {\n      throw new Error(\"No user id found\");\n    }\n\n    return decoded.sub as string;\n  }\n\n  async getEmail(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email === \"undefined\") {\n      throw new Error(\"No email found\");\n    }\n\n    return decoded.email as string;\n  }\n\n  async getEmailVerified(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email_verified === \"undefined\") {\n      throw new Error(\"No email verification found\");\n    }\n\n    return decoded.email_verified as boolean;\n  }\n\n  async getName(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.name === \"undefined\") {\n      return null;\n    }\n\n    return decoded.name as string;\n  }\n\n  async getIssuer(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.iss === \"undefined\") {\n      throw new Error(\"No issuer found\");\n    }\n\n    return decoded.iss as string;\n  }\n\n  async getIsExternal(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n\n    return Array.isArray(decoded.amr) && decoded.amr.includes(\"external\");\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { UserVerificationApiServiceAbstraction } from \"../../abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\nexport class UserVerificationApiService implements UserVerificationApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  postAccountVerifyOTP(request: VerifyOTPRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/verify-otp\", request, true, false);\n  }\n  async postAccountRequestOTP(): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/request-otp\", null, true, false);\n  }\n}\n","export class VerifyOTPRequest {\n  OTP: string;\n\n  constructor(OTP: string) {\n    this.OTP = OTP;\n  }\n}\n","import { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Verification } from \"../../../types/verification\";\nimport { UserVerificationApiServiceAbstraction } from \"../../abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"../../abstractions/user-verification/user-verification.service.abstraction\";\nimport { VerificationType } from \"../../enums/verification-type\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Use it to verify the input collected by UserVerificationComponent.\n */\nexport class UserVerificationService implements UserVerificationServiceAbstraction {\n  constructor(\n    private stateService: StateService,\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private userVerificationApiService: UserVerificationApiServiceAbstraction\n  ) {}\n\n  /**\n   * Create a new request model to be used for server-side verification\n   * @param verification User-supplied verification data (Master Password or OTP)\n   * @param requestClass The request model to create\n   * @param alreadyHashed Whether the master password is already hashed\n   */\n  async buildRequest<T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) {\n    this.validateInput(verification);\n\n    const request =\n      requestClass != null ? new requestClass() : (new SecretVerificationRequest() as T);\n\n    if (verification.type === VerificationType.OTP) {\n      request.otp = verification.secret;\n    } else {\n      let masterKey = await this.cryptoService.getMasterKey();\n      if (!masterKey && !alreadyHashed) {\n        masterKey = await this.cryptoService.makeMasterKey(\n          verification.secret,\n          await this.stateService.getEmail(),\n          await this.stateService.getKdfType(),\n          await this.stateService.getKdfConfig()\n        );\n      }\n      request.masterPasswordHash = alreadyHashed\n        ? verification.secret\n        : await this.cryptoService.hashMasterKey(verification.secret, masterKey);\n    }\n\n    return request;\n  }\n\n  /**\n   * Used to verify the Master Password client-side, or send the OTP to the server for verification (with no other data)\n   * Generally used for client-side verification only.\n   * @param verification User-supplied verification data (Master Password or OTP)\n   */\n  async verifyUser(verification: Verification): Promise<boolean> {\n    this.validateInput(verification);\n\n    if (verification.type === VerificationType.OTP) {\n      const request = new VerifyOTPRequest(verification.secret);\n      try {\n        await this.userVerificationApiService.postAccountVerifyOTP(request);\n      } catch (e) {\n        throw new Error(this.i18nService.t(\"invalidVerificationCode\"));\n      }\n    } else {\n      let masterKey = await this.cryptoService.getMasterKey();\n      if (!masterKey) {\n        masterKey = await this.cryptoService.makeMasterKey(\n          verification.secret,\n          await this.stateService.getEmail(),\n          await this.stateService.getKdfType(),\n          await this.stateService.getKdfConfig()\n        );\n      }\n      const passwordValid = await this.cryptoService.compareAndUpdateKeyHash(\n        verification.secret,\n        masterKey\n      );\n      if (!passwordValid) {\n        throw new Error(this.i18nService.t(\"invalidMasterPassword\"));\n      }\n      this.cryptoService.setMasterKey(masterKey);\n    }\n    return true;\n  }\n\n  async requestOTP() {\n    await this.userVerificationApiService.postAccountRequestOTP();\n  }\n\n  /**\n   * Check if user has master password or can only use passwordless technologies to log in\n   * Note: This only checks the server, not the local state\n   * @param userId The user id to check. If not provided, the current user is used\n   * @returns True if the user has a master password\n   */\n  async hasMasterPassword(userId?: string): Promise<boolean> {\n    const decryptionOptions = await this.stateService.getAccountDecryptionOptions({ userId });\n\n    if (decryptionOptions?.hasMasterPassword != undefined) {\n      return decryptionOptions.hasMasterPassword;\n    }\n\n    // TODO: PM-3518 - Left for backwards compatibility, remove after 2023.12.0\n    return !(await this.stateService.getUsesKeyConnector({ userId }));\n  }\n\n  async hasMasterPasswordAndMasterKeyHash(userId?: string): Promise<boolean> {\n    return (\n      (await this.hasMasterPassword(userId)) &&\n      (await this.cryptoService.getMasterKeyHash()) != null\n    );\n  }\n\n  private validateInput(verification: Verification) {\n    if (verification?.secret == null || verification.secret === \"\") {\n      if (verification.type === VerificationType.OTP) {\n        throw new Error(this.i18nService.t(\"verificationCodeRequired\"));\n      } else {\n        throw new Error(this.i18nService.t(\"masterPasswordRequired\"));\n      }\n    }\n  }\n}\n","import { ServerConfigResponse } from \"../../models/response/server-config.response\";\n\nexport abstract class ConfigApiServiceAbstraction {\n  get: () => Promise<ServerConfigResponse>;\n}\n","import { Decryptable } from \"../interfaces/decryptable.interface\";\nimport { Encrypted } from \"../interfaces/encrypted\";\nimport { InitializerMetadata } from \"../interfaces/initializer-metadata.interface\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class EncryptService {\n  abstract encrypt(plainValue: string | Uint8Array, key: SymmetricCryptoKey): Promise<EncString>;\n  abstract encryptToBytes: (\n    plainValue: Uint8Array,\n    key?: SymmetricCryptoKey\n  ) => Promise<EncArrayBuffer>;\n  abstract decryptToUtf8: (encString: EncString, key: SymmetricCryptoKey) => Promise<string>;\n  abstract decryptToBytes: (encThing: Encrypted, key: SymmetricCryptoKey) => Promise<Uint8Array>;\n  abstract resolveLegacyKey: (key: SymmetricCryptoKey, encThing: Encrypted) => SymmetricCryptoKey;\n  abstract decryptItems: <T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ) => Promise<T[]>;\n}\n","import { FileUploadType } from \"../../../enums\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\n\nexport abstract class FileUploadService {\n  upload: (\n    uploadData: { url: string; fileUploadType: FileUploadType },\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer,\n    fileUploadMethods: FileUploadApiMethods\n  ) => Promise<void>;\n}\n\nexport type FileUploadApiMethods = {\n  postDirect: (fileData: FormData) => Promise<void>;\n  renewFileUploadUrl: () => Promise<string>;\n  rollback: () => Promise<void>;\n};\n","import { MemoryStorageOptions, StorageOptions } from \"../models/domain/storage-options\";\n\nexport abstract class AbstractStorageService {\n  abstract get<T>(key: string, options?: StorageOptions): Promise<T>;\n  abstract has(key: string, options?: StorageOptions): Promise<boolean>;\n  abstract save<T>(key: string, obj: T, options?: StorageOptions): Promise<void>;\n  abstract remove(key: string, options?: StorageOptions): Promise<void>;\n}\n\nexport abstract class AbstractMemoryStorageService extends AbstractStorageService {\n  // Used to identify the service in the session sync decorator framework\n  static readonly TYPE = \"MemoryStorageService\";\n  readonly type = AbstractMemoryStorageService.TYPE;\n\n  abstract get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n  abstract getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n}\n","import { Account } from \"../models/domain/account\";\n\nexport class AccountFactory<T extends Account = Account> {\n  private accountConstructor: new (init: Partial<T>) => T;\n\n  constructor(accountConstructor: new (init: Partial<T>) => T) {\n    this.accountConstructor = accountConstructor;\n  }\n\n  create(args: Partial<T>) {\n    return new this.accountConstructor(args);\n  }\n}\n","import { GlobalState } from \"../models/domain/global-state\";\n\nexport class GlobalStateFactory<T extends GlobalState = GlobalState> {\n  private globalStateConstructor: new (init: Partial<T>) => T;\n\n  constructor(globalStateConstructor: new (init: Partial<T>) => T) {\n    this.globalStateConstructor = globalStateConstructor;\n  }\n\n  create(args?: Partial<T>) {\n    return new this.globalStateConstructor(args);\n  }\n}\n","import { Account } from \"../models/domain/account\";\nimport { GlobalState } from \"../models/domain/global-state\";\n\nimport { AccountFactory } from \"./account-factory\";\nimport { GlobalStateFactory } from \"./global-state-factory\";\n\nexport class StateFactory<\n  TGlobal extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  private globalStateFactory: GlobalStateFactory<TGlobal>;\n  private accountFactory: AccountFactory<TAccount>;\n\n  constructor(\n    globalStateConstructor: new (init: Partial<TGlobal>) => TGlobal,\n    accountConstructor: new (init: Partial<TAccount>) => TAccount\n  ) {\n    this.globalStateFactory = new GlobalStateFactory(globalStateConstructor);\n    this.accountFactory = new AccountFactory(accountConstructor);\n  }\n\n  createGlobal(args: Partial<TGlobal>): TGlobal {\n    return this.globalStateFactory.create(args);\n  }\n\n  createAccount(args: Partial<TAccount>): TAccount {\n    return this.accountFactory.create(args);\n  }\n}\n","export class WindowState {\n  width?: number;\n  height?: number;\n  isMaximized?: boolean;\n  // TODO: displayBounds is an Electron.Rectangle.\n  // We need to establish some kind of client-specific global state, similar to the way we already extend a base Account.\n  displayBounds: any;\n  x?: number;\n  y?: number;\n  zoomFactor?: number;\n}\n","import { EnvironmentUrls } from \"../../../auth/models/domain/environment-urls\";\nimport { ThemeType } from \"../../../enums\";\nimport { WindowState } from \"../../../models/domain/window-state\";\n\nexport class GlobalState {\n  enableAlwaysOnTop?: boolean;\n  installedVersion?: string;\n  locale?: string;\n  organizationInvitation?: any;\n  emergencyAccessInvitation?: any;\n  ssoCodeVerifier?: string;\n  ssoOrganizationIdentifier?: string;\n  ssoState?: string;\n  rememberedEmail?: string;\n  theme?: ThemeType = ThemeType.System;\n  window?: WindowState = new WindowState();\n  twoFactorToken?: string;\n  disableFavicon?: boolean;\n  biometricAwaitingAcceptance?: boolean;\n  biometricFingerprintValidated?: boolean;\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string;\n  loginRedirect?: any;\n  mainWindowSize?: number;\n  enableBiometrics?: boolean;\n  biometricText?: string;\n  noAutoPromptBiometricsText?: string;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  enableTray?: boolean;\n  enableMinimizeToTray?: boolean;\n  enableCloseToTray?: boolean;\n  enableStartToTray?: boolean;\n  openAtLogin?: boolean;\n  alwaysShowDock?: boolean;\n  enableBrowserIntegration?: boolean;\n  enableBrowserIntegrationFingerprint?: boolean;\n  enableDuckDuckGoBrowserIntegration?: boolean;\n  region?: string;\n}\n","import { HtmlStorageLocation } from \"../../enums\";\nimport { AppIdService as AppIdServiceAbstraction } from \"../abstractions/app-id.service\";\nimport { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { Utils } from \"../misc/utils\";\n\nexport class AppIdService implements AppIdServiceAbstraction {\n  constructor(private storageService: AbstractStorageService) {}\n\n  getAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"appId\");\n  }\n\n  getAnonymousAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"anonymousAppId\");\n  }\n\n  private async makeAndGetAppId(key: string) {\n    const existingId = await this.storageService.get<string>(key, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    if (existingId != null) {\n      return existingId;\n    }\n\n    const guid = Utils.newGuid();\n    await this.storageService.save(key, guid, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    return guid;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { Region } from \"../../abstractions/environment.service\";\n\nexport class ServerConfigResponse extends BaseResponse {\n  version: string;\n  gitHash: string;\n  server: ThirdPartyServerConfigResponse;\n  environment: EnvironmentServerConfigResponse;\n  featureStates: { [key: string]: string } = {};\n\n  constructor(response: any) {\n    super(response);\n\n    if (response == null) {\n      return;\n    }\n\n    this.version = this.getResponseProperty(\"Version\");\n    this.gitHash = this.getResponseProperty(\"GitHash\");\n    this.server = new ThirdPartyServerConfigResponse(this.getResponseProperty(\"Server\"));\n    this.environment = new EnvironmentServerConfigResponse(this.getResponseProperty(\"Environment\"));\n    this.featureStates = this.getResponseProperty(\"FeatureStates\");\n  }\n}\n\nexport class EnvironmentServerConfigResponse extends BaseResponse {\n  cloudRegion: Region;\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(data: any = null) {\n    super(data);\n\n    if (data == null) {\n      return;\n    }\n\n    this.cloudRegion = this.getResponseProperty(\"CloudRegion\");\n    this.vault = this.getResponseProperty(\"Vault\");\n    this.api = this.getResponseProperty(\"Api\");\n    this.identity = this.getResponseProperty(\"Identity\");\n    this.notifications = this.getResponseProperty(\"Notifications\");\n    this.sso = this.getResponseProperty(\"Sso\");\n  }\n}\n\nexport class ThirdPartyServerConfigResponse extends BaseResponse {\n  name: string;\n  url: string;\n\n  constructor(data: any = null) {\n    super(data);\n\n    if (data == null) {\n      return;\n    }\n\n    this.name = this.getResponseProperty(\"Name\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { AuthService } from \"../../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../../auth/enums/authentication-status\";\nimport { ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ServerConfigResponse } from \"../../models/response/server-config.response\";\n\nexport class ConfigApiService implements ConfigApiServiceAbstraction {\n  constructor(private apiService: ApiService, private authService: AuthService) {}\n\n  async get(): Promise<ServerConfigResponse> {\n    const authed: boolean =\n      (await this.authService.getAuthStatus()) !== AuthenticationStatus.LoggedOut;\n\n    const r = await this.apiService.send(\"GET\", \"/config\", null, authed, true);\n    return new ServerConfigResponse(r);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  ServerConfigData,\n  ThirdPartyServerConfigData,\n  EnvironmentServerConfigData,\n} from \"../../models/data/server-config.data\";\n\nconst dayInMilliseconds = 24 * 3600 * 1000;\nconst eighteenHoursInMilliseconds = 18 * 3600 * 1000;\n\nexport class ServerConfig {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: Date;\n  featureStates: { [key: string]: string } = {};\n\n  constructor(serverConfigData: ServerConfigData) {\n    this.version = serverConfigData.version;\n    this.gitHash = serverConfigData.gitHash;\n    this.server = serverConfigData.server;\n    this.utcDate = new Date(serverConfigData.utcDate);\n    this.environment = serverConfigData.environment;\n    this.featureStates = serverConfigData.featureStates;\n\n    if (this.server?.name == null && this.server?.url == null) {\n      this.server = null;\n    }\n  }\n\n  private getAgeInMilliseconds(): number {\n    return new Date().getTime() - this.utcDate?.getTime();\n  }\n\n  isValid(): boolean {\n    return this.getAgeInMilliseconds() <= dayInMilliseconds;\n  }\n\n  expiresSoon(): boolean {\n    return this.getAgeInMilliseconds() >= eighteenHoursInMilliseconds;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfig>): ServerConfig {\n    if (obj == null) {\n      return null;\n    }\n\n    return new ServerConfig(obj);\n  }\n}\n","import {\n  ReplaySubject,\n  Subject,\n  catchError,\n  concatMap,\n  defer,\n  delayWhen,\n  firstValueFrom,\n  map,\n  merge,\n  timer,\n} from \"rxjs\";\nimport { SemVer } from \"semver\";\n\nimport { AuthService } from \"../../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../../auth/enums/authentication-status\";\nimport { FeatureFlag, FeatureFlagValue } from \"../../../enums/feature-flag.enum\";\nimport { ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"../../abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"../../abstractions/config/server-config\";\nimport { EnvironmentService, Region } from \"../../abstractions/environment.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { ServerConfigData } from \"../../models/data/server-config.data\";\n\nconst ONE_HOUR_IN_MILLISECONDS = 1000 * 3600;\n\nexport class ConfigService implements ConfigServiceAbstraction {\n  private inited = false;\n\n  protected _serverConfig = new ReplaySubject<ServerConfig | null>(1);\n  serverConfig$ = this._serverConfig.asObservable();\n\n  private _forceFetchConfig = new Subject<void>();\n  protected refreshTimer$ = timer(ONE_HOUR_IN_MILLISECONDS, ONE_HOUR_IN_MILLISECONDS); // after 1 hour, then every hour\n\n  cloudRegion$ = this.serverConfig$.pipe(\n    map((config) => config?.environment?.cloudRegion ?? Region.US)\n  );\n\n  constructor(\n    private stateService: StateService,\n    private configApiService: ConfigApiServiceAbstraction,\n    private authService: AuthService,\n    private environmentService: EnvironmentService,\n    private logService: LogService,\n\n    // Used to avoid duplicate subscriptions, e.g. in browser between the background and popup\n    private subscribe = true\n  ) {}\n\n  init() {\n    if (!this.subscribe || this.inited) {\n      return;\n    }\n\n    const latestServerConfig$ = defer(() => this.configApiService.get()).pipe(\n      map((response) => new ServerConfigData(response)),\n      delayWhen((data) => this.saveConfig(data)),\n      catchError((e: unknown) => {\n        // fall back to stored ServerConfig (if any)\n        this.logService.error(\"Unable to fetch ServerConfig: \" + (e as Error)?.message);\n        return this.stateService.getServerConfig();\n      })\n    );\n\n    // If you need to fetch a new config when an event occurs, add an observable that emits on that event here\n    merge(\n      this.refreshTimer$, // an overridable interval\n      this.environmentService.urls, // when environment URLs change (including when app is started)\n      this._forceFetchConfig // manual\n    )\n      .pipe(\n        concatMap(() => latestServerConfig$),\n        map((data) => (data == null ? null : new ServerConfig(data)))\n      )\n      .subscribe((config) => this._serverConfig.next(config));\n\n    this.inited = true;\n  }\n\n  getFeatureFlag$<T extends FeatureFlagValue>(key: FeatureFlag, defaultValue?: T) {\n    return this.serverConfig$.pipe(\n      map((serverConfig) => {\n        if (serverConfig?.featureStates == null || serverConfig.featureStates[key] == null) {\n          return defaultValue;\n        }\n\n        return serverConfig.featureStates[key] as T;\n      })\n    );\n  }\n\n  async getFeatureFlag<T extends FeatureFlagValue>(key: FeatureFlag, defaultValue?: T) {\n    return await firstValueFrom(this.getFeatureFlag$(key, defaultValue));\n  }\n\n  triggerServerConfigFetch() {\n    this._forceFetchConfig.next();\n  }\n\n  private async saveConfig(data: ServerConfigData) {\n    if ((await this.authService.getAuthStatus()) === AuthenticationStatus.LoggedOut) {\n      return;\n    }\n\n    await this.stateService.setServerConfig(data);\n    this.environmentService.setCloudWebVaultUrl(data.environment?.cloudRegion);\n  }\n\n  /**\n   * Verifies whether the server version meets the minimum required version\n   * @param minimumRequiredServerVersion The minimum version required\n   * @returns True if the server version is greater than or equal to the minimum required version\n   */\n  checkServerMeetsVersionRequirement$(minimumRequiredServerVersion: SemVer) {\n    return this.serverConfig$.pipe(\n      map((serverConfig) => {\n        if (serverConfig == null) {\n          return false;\n        }\n        const serverVersion = new SemVer(serverConfig.version);\n        return serverVersion.compare(minimumRequiredServerVersion) >= 0;\n      })\n    );\n  }\n}\n","import { LogLevelType } from \"../../enums\";\nimport { LogService as LogServiceAbstraction } from \"../abstractions/log.service\";\n\nexport class ConsoleLogService implements LogServiceAbstraction {\n  protected timersMap: Map<string, [number, number]> = new Map();\n\n  constructor(\n    protected isDev: boolean,\n    protected filter: (level: LogLevelType) => boolean = null\n  ) {}\n\n  debug(message: string) {\n    if (!this.isDev) {\n      return;\n    }\n    this.write(LogLevelType.Debug, message);\n  }\n\n  info(message: string) {\n    this.write(LogLevelType.Info, message);\n  }\n\n  warning(message: string) {\n    this.write(LogLevelType.Warning, message);\n  }\n\n  error(message: string) {\n    this.write(LogLevelType.Error, message);\n  }\n\n  write(level: LogLevelType, message: string) {\n    if (this.filter != null && this.filter(level)) {\n      return;\n    }\n\n    switch (level) {\n      case LogLevelType.Debug:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Info:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Warning:\n        // eslint-disable-next-line\n        console.warn(message);\n        break;\n      case LogLevelType.Error:\n        // eslint-disable-next-line\n        console.error(message);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { EncryptedOrganizationKeyData } from \"../data/encrypted-organization-key.data\";\n\nexport abstract class BaseEncryptedOrganizationKey {\n  decrypt: (cryptoService: CryptoService) => Promise<SymmetricCryptoKey>;\n\n  static fromData(data: EncryptedOrganizationKeyData) {\n    switch (data.type) {\n      case \"organization\":\n        return new EncryptedOrganizationKey(data.key);\n\n      case \"provider\":\n        return new ProviderEncryptedOrganizationKey(data.key, data.providerId);\n\n      default:\n        return null;\n    }\n  }\n}\n\nexport class EncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const decValue = await cryptoService.rsaDecrypt(this.key);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"organization\",\n      key: this.key,\n    };\n  }\n}\n\nexport class ProviderEncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string, private providerId: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const providerKey = await cryptoService.getProviderKey(this.providerId);\n    const decValue = await cryptoService.decryptToBytes(new EncString(this.key), providerKey);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"provider\",\n      key: this.key,\n      providerId: this.providerId,\n    };\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will prevent multiple 'active' calls as the same time\n *\n * If a promise was returned from a previous call to this function, that hasn't yet resolved it will\n * be returned, instead of calling the original function again\n *\n * Results are not cached, once the promise has returned, the next call will result in a fresh call\n *\n * Read more at https://github.com/bitwarden/jslib/pull/7\n */\nexport function sequentialize(cacheKey: (args: any[]) => string) {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod: () => Promise<any> = descriptor.value;\n    const caches = new Map<any, Map<string, Promise<any>>>();\n\n    const getCache = (obj: any) => {\n      let cache = caches.get(obj);\n      if (cache != null) {\n        return cache;\n      }\n      cache = new Map<string, Promise<any>>();\n      caches.set(obj, cache);\n      return cache;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const cache = getCache(this);\n        const argsCacheKey = cacheKey(args);\n        let response = cache.get(argsCacheKey);\n        if (response != null) {\n          return response;\n        }\n\n        const onFinally = () => {\n          cache.delete(argsCacheKey);\n          if (cache.size === 0) {\n            caches.delete(this);\n          }\n        };\n        response = originalMethod\n          .apply(this, args)\n          .then((val: any) => {\n            onFinally();\n            return val;\n          })\n          .catch((err: any) => {\n            onFinally();\n            throw err;\n          });\n\n        cache.set(argsCacheKey, response);\n        return response;\n      },\n    };\n  };\n}\n","import * as bigInt from \"big-integer\";\n\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { BaseEncryptedOrganizationKey } from \"../../admin-console/models/domain/encrypted-organization-key\";\nimport { ProfileOrganizationResponse } from \"../../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../../admin-console/models/response/profile-provider.response\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport {\n  KeySuffixOptions,\n  HashPurpose,\n  KdfType,\n  DEFAULT_ARGON2_ITERATIONS,\n  DEFAULT_ARGON2_MEMORY,\n  DEFAULT_ARGON2_PARALLELISM,\n  EncryptionType,\n} from \"../../enums\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { CryptoFunctionService } from \"../abstractions/crypto-function.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { PlatformUtilsService } from \"../abstractions/platform-utils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { sequentialize } from \"../misc/sequentialize\";\nimport { EFFLongWordList } from \"../misc/wordlist\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport {\n  CipherKey,\n  MasterKey,\n  OrgKey,\n  PinKey,\n  ProviderKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nexport class CryptoService implements CryptoServiceAbstraction {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected encryptService: EncryptService,\n    protected platformUtilService: PlatformUtilsService,\n    protected logService: LogService,\n    protected stateService: StateService\n  ) {}\n\n  async setUserKey(key: UserKey, userId?: string): Promise<void> {\n    if (key != null) {\n      await this.stateService.setEverHadUserKey(true, { userId: userId });\n    }\n    await this.stateService.setUserKey(key, { userId: userId });\n    await this.storeAdditionalKeys(key, userId);\n  }\n\n  async getEverHadUserKey(userId?: string): Promise<boolean> {\n    return await this.stateService.getEverHadUserKey({ userId: userId });\n  }\n\n  async refreshAdditionalKeys(): Promise<void> {\n    const key = await this.getUserKey();\n    await this.setUserKey(key);\n  }\n\n  async getUserKey(userId?: string): Promise<UserKey> {\n    let userKey = await this.stateService.getUserKey({ userId: userId });\n    if (userKey) {\n      return userKey;\n    }\n\n    // If the user has set their vault timeout to 'Never', we can load the user key from storage\n    if (await this.hasUserKeyStored(KeySuffixOptions.Auto, userId)) {\n      userKey = await this.getKeyFromStorage(KeySuffixOptions.Auto, userId);\n      if (userKey) {\n        await this.setUserKey(userKey, userId);\n        return userKey;\n      }\n    }\n  }\n\n  async getUserKeyWithLegacySupport(userId?: string): Promise<UserKey> {\n    const userKey = await this.getUserKey(userId);\n    if (userKey) {\n      return userKey;\n    }\n\n    // Legacy support: encryption used to be done with the master key (derived from master password).\n    // Users who have not migrated will have a null user key and must use the master key instead.\n    return (await this.getMasterKey(userId)) as unknown as UserKey;\n  }\n\n  async getUserKeyFromStorage(keySuffix: KeySuffixOptions, userId?: string): Promise<UserKey> {\n    const userKey = await this.getKeyFromStorage(keySuffix, userId);\n    if (userKey) {\n      if (!(await this.validateUserKey(userKey))) {\n        this.logService.warning(\"Invalid key, throwing away stored keys\");\n        await this.clearAllStoredUserKeys(userId);\n      }\n      return userKey;\n    }\n  }\n\n  async hasUserKey(): Promise<boolean> {\n    return (\n      (await this.hasUserKeyInMemory()) || (await this.hasUserKeyStored(KeySuffixOptions.Auto))\n    );\n  }\n\n  async hasUserKeyInMemory(userId?: string): Promise<boolean> {\n    return (await this.stateService.getUserKey({ userId: userId })) != null;\n  }\n\n  async hasUserKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {\n    return (await this.getKeyFromStorage(keySuffix, userId)) != null;\n  }\n\n  async makeUserKey(masterKey: MasterKey): Promise<[UserKey, EncString]> {\n    masterKey ||= await this.getMasterKey();\n    if (masterKey == null) {\n      throw new Error(\"No Master Key found.\");\n    }\n\n    const newUserKey = await this.cryptoFunctionService.aesGenerateKey(512);\n    return this.buildProtectedSymmetricKey(masterKey, newUserKey);\n  }\n\n  async clearUserKey(clearStoredKeys = true, userId?: string): Promise<void> {\n    await this.stateService.setUserKey(null, { userId: userId });\n    if (clearStoredKeys) {\n      await this.clearAllStoredUserKeys(userId);\n    }\n  }\n\n  async clearStoredUserKey(keySuffix: KeySuffixOptions, userId?: string): Promise<void> {\n    if (keySuffix === KeySuffixOptions.Auto) {\n      this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n      this.clearDeprecatedKeys(KeySuffixOptions.Auto, userId);\n    }\n    if (keySuffix === KeySuffixOptions.Pin) {\n      this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n      this.clearDeprecatedKeys(KeySuffixOptions.Pin, userId);\n    }\n  }\n\n  async setMasterKeyEncryptedUserKey(userKeyMasterKey: string, userId?: string): Promise<void> {\n    await this.stateService.setMasterKeyEncryptedUserKey(userKeyMasterKey, { userId: userId });\n  }\n\n  async setMasterKey(key: MasterKey, userId?: string): Promise<void> {\n    await this.stateService.setMasterKey(key, { userId: userId });\n  }\n\n  async getMasterKey(userId?: string): Promise<MasterKey> {\n    let masterKey = await this.stateService.getMasterKey({ userId: userId });\n    if (!masterKey) {\n      masterKey = (await this.stateService.getCryptoMasterKey({ userId: userId })) as MasterKey;\n      await this.setMasterKey(masterKey, userId);\n    }\n    return masterKey;\n  }\n\n  async getOrDeriveMasterKey(password: string, userId?: string) {\n    let masterKey = await this.getMasterKey(userId);\n    return (masterKey ||= await this.makeMasterKey(\n      password,\n      await this.stateService.getEmail({ userId: userId }),\n      await this.stateService.getKdfType({ userId: userId }),\n      await this.stateService.getKdfConfig({ userId: userId })\n    ));\n  }\n\n  async makeMasterKey(\n    password: string,\n    email: string,\n    kdf: KdfType,\n    KdfConfig: KdfConfig\n  ): Promise<MasterKey> {\n    return (await this.makeKey(password, email, kdf, KdfConfig)) as MasterKey;\n  }\n\n  async clearMasterKey(userId?: string): Promise<void> {\n    await this.stateService.setMasterKey(null, { userId: userId });\n  }\n\n  async encryptUserKeyWithMasterKey(\n    masterKey: MasterKey,\n    userKey?: UserKey\n  ): Promise<[UserKey, EncString]> {\n    userKey ||= await this.getUserKey();\n    return await this.buildProtectedSymmetricKey(masterKey, userKey.key);\n  }\n\n  async decryptUserKeyWithMasterKey(\n    masterKey: MasterKey,\n    userKey?: EncString,\n    userId?: string\n  ): Promise<UserKey> {\n    masterKey ||= await this.getMasterKey(userId);\n    if (masterKey == null) {\n      throw new Error(\"No master key found.\");\n    }\n\n    if (!userKey) {\n      let masterKeyEncryptedUserKey = await this.stateService.getMasterKeyEncryptedUserKey({\n        userId: userId,\n      });\n\n      // Try one more way to get the user key if it still wasn't found.\n      if (masterKeyEncryptedUserKey == null) {\n        masterKeyEncryptedUserKey = await this.stateService.getEncryptedCryptoSymmetricKey({\n          userId: userId,\n        });\n      }\n\n      if (masterKeyEncryptedUserKey == null) {\n        throw new Error(\"No encrypted user key found.\");\n      }\n      userKey = new EncString(masterKeyEncryptedUserKey);\n    }\n\n    let decUserKey: Uint8Array;\n    if (userKey.encryptionType === EncryptionType.AesCbc256_B64) {\n      decUserKey = await this.encryptService.decryptToBytes(userKey, masterKey);\n    } else if (userKey.encryptionType === EncryptionType.AesCbc256_HmacSha256_B64) {\n      const newKey = await this.stretchKey(masterKey);\n      decUserKey = await this.encryptService.decryptToBytes(userKey, newKey);\n    } else {\n      throw new Error(\"Unsupported encryption type.\");\n    }\n    if (decUserKey == null) {\n      return null;\n    }\n\n    return new SymmetricCryptoKey(decUserKey) as UserKey;\n  }\n\n  async hashMasterKey(\n    password: string,\n    key: MasterKey,\n    hashPurpose?: HashPurpose\n  ): Promise<string> {\n    key ||= await this.getMasterKey();\n\n    if (password == null || key == null) {\n      throw new Error(\"Invalid parameters.\");\n    }\n\n    const iterations = hashPurpose === HashPurpose.LocalAuthorization ? 2 : 1;\n    const hash = await this.cryptoFunctionService.pbkdf2(key.key, password, \"sha256\", iterations);\n    return Utils.fromBufferToB64(hash);\n  }\n\n  async setMasterKeyHash(keyHash: string): Promise<void> {\n    await this.stateService.setKeyHash(keyHash);\n  }\n\n  async getMasterKeyHash(): Promise<string> {\n    return await this.stateService.getKeyHash();\n  }\n\n  async clearMasterKeyHash(userId?: string): Promise<void> {\n    return await this.stateService.setKeyHash(null, { userId: userId });\n  }\n\n  async compareAndUpdateKeyHash(masterPassword: string, masterKey: MasterKey): Promise<boolean> {\n    const storedPasswordHash = await this.getMasterKeyHash();\n    if (masterPassword != null && storedPasswordHash != null) {\n      const localKeyHash = await this.hashMasterKey(\n        masterPassword,\n        masterKey,\n        HashPurpose.LocalAuthorization\n      );\n      if (localKeyHash != null && storedPasswordHash === localKeyHash) {\n        return true;\n      }\n\n      // TODO: remove serverKeyHash check in 1-2 releases after everyone's keyHash has been updated\n      const serverKeyHash = await this.hashMasterKey(\n        masterPassword,\n        masterKey,\n        HashPurpose.ServerAuthorization\n      );\n      if (serverKeyHash != null && storedPasswordHash === serverKeyHash) {\n        await this.setMasterKeyHash(localKeyHash);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async setOrgKeys(\n    orgs: ProfileOrganizationResponse[] = [],\n    providerOrgs: ProfileProviderOrganizationResponse[] = []\n  ): Promise<void> {\n    const encOrgKeyData: { [orgId: string]: EncryptedOrganizationKeyData } = {};\n\n    orgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"organization\",\n        key: org.key,\n      };\n    });\n\n    providerOrgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"provider\",\n        providerId: org.providerId,\n        key: org.key,\n      };\n    });\n\n    await this.stateService.setDecryptedOrganizationKeys(null);\n    return await this.stateService.setEncryptedOrganizationKeys(encOrgKeyData);\n  }\n\n  async getOrgKey(orgId: string): Promise<OrgKey> {\n    if (orgId == null) {\n      return null;\n    }\n\n    const orgKeys = await this.getOrgKeys();\n    if (orgKeys == null || !orgKeys.has(orgId)) {\n      return null;\n    }\n\n    return orgKeys.get(orgId);\n  }\n\n  @sequentialize(() => \"getOrgKeys\")\n  async getOrgKeys(): Promise<Map<string, OrgKey>> {\n    const result: Map<string, OrgKey> = new Map<string, OrgKey>();\n    const decryptedOrganizationKeys = await this.stateService.getDecryptedOrganizationKeys();\n    if (decryptedOrganizationKeys != null && decryptedOrganizationKeys.size > 0) {\n      return decryptedOrganizationKeys as Map<string, OrgKey>;\n    }\n\n    const encOrgKeyData = await this.stateService.getEncryptedOrganizationKeys();\n    if (encOrgKeyData == null) {\n      return result;\n    }\n\n    let setKey = false;\n\n    for (const orgId of Object.keys(encOrgKeyData)) {\n      if (result.has(orgId)) {\n        continue;\n      }\n\n      const encOrgKey = BaseEncryptedOrganizationKey.fromData(encOrgKeyData[orgId]);\n      const decOrgKey = (await encOrgKey.decrypt(this)) as OrgKey;\n      result.set(orgId, decOrgKey);\n\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedOrganizationKeys(result);\n    }\n\n    return result;\n  }\n\n  async makeDataEncKey<T extends OrgKey | UserKey>(\n    key: T\n  ): Promise<[SymmetricCryptoKey, EncString]> {\n    if (key == null) {\n      throw new Error(\"No key provided\");\n    }\n\n    const newSymKey = await this.cryptoFunctionService.aesGenerateKey(512);\n    return this.buildProtectedSymmetricKey(key, newSymKey);\n  }\n\n  async clearOrgKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedOrganizationKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedOrganizationKeys(null, { userId: userId });\n    }\n  }\n\n  async setProviderKeys(providers: ProfileProviderResponse[]): Promise<void> {\n    const providerKeys: any = {};\n    providers.forEach((provider) => {\n      providerKeys[provider.id] = provider.key;\n    });\n\n    await this.stateService.setDecryptedProviderKeys(null);\n    return await this.stateService.setEncryptedProviderKeys(providerKeys);\n  }\n\n  async getProviderKey(providerId: string): Promise<ProviderKey> {\n    if (providerId == null) {\n      return null;\n    }\n\n    const providerKeys = await this.getProviderKeys();\n    if (providerKeys == null || !providerKeys.has(providerId)) {\n      return null;\n    }\n\n    return providerKeys.get(providerId);\n  }\n\n  @sequentialize(() => \"getProviderKeys\")\n  async getProviderKeys(): Promise<Map<string, ProviderKey>> {\n    const providerKeys: Map<string, ProviderKey> = new Map<string, ProviderKey>();\n    const decryptedProviderKeys = await this.stateService.getDecryptedProviderKeys();\n    if (decryptedProviderKeys != null && decryptedProviderKeys.size > 0) {\n      return decryptedProviderKeys as Map<string, ProviderKey>;\n    }\n\n    const encProviderKeys = await this.stateService.getEncryptedProviderKeys();\n    if (encProviderKeys == null) {\n      return null;\n    }\n\n    let setKey = false;\n\n    for (const orgId in encProviderKeys) {\n      // eslint-disable-next-line\n      if (!encProviderKeys.hasOwnProperty(orgId)) {\n        continue;\n      }\n\n      const decValue = await this.rsaDecrypt(encProviderKeys[orgId]);\n      providerKeys.set(orgId, new SymmetricCryptoKey(decValue) as ProviderKey);\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedProviderKeys(providerKeys);\n    }\n\n    return providerKeys;\n  }\n\n  async clearProviderKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedProviderKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedProviderKeys(null, { userId: userId });\n    }\n  }\n\n  async getPublicKey(): Promise<Uint8Array> {\n    const inMemoryPublicKey = await this.stateService.getPublicKey();\n    if (inMemoryPublicKey != null) {\n      return inMemoryPublicKey;\n    }\n\n    const privateKey = await this.getPrivateKey();\n    if (privateKey == null) {\n      return null;\n    }\n\n    const publicKey = await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    await this.stateService.setPublicKey(publicKey);\n    return publicKey;\n  }\n\n  async makeOrgKey<T extends OrgKey | ProviderKey>(): Promise<[EncString, T]> {\n    const shareKey = await this.cryptoFunctionService.aesGenerateKey(512);\n    const publicKey = await this.getPublicKey();\n    const encShareKey = await this.rsaEncrypt(shareKey, publicKey);\n    return [encShareKey, new SymmetricCryptoKey(shareKey) as T];\n  }\n\n  async setPrivateKey(encPrivateKey: string): Promise<void> {\n    if (encPrivateKey == null) {\n      return;\n    }\n\n    await this.stateService.setDecryptedPrivateKey(null);\n    await this.stateService.setEncryptedPrivateKey(encPrivateKey);\n  }\n\n  async getPrivateKey(): Promise<Uint8Array> {\n    const decryptedPrivateKey = await this.stateService.getDecryptedPrivateKey();\n    if (decryptedPrivateKey != null) {\n      return decryptedPrivateKey;\n    }\n\n    const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n    if (encPrivateKey == null) {\n      return null;\n    }\n\n    const privateKey = await this.encryptService.decryptToBytes(\n      new EncString(encPrivateKey),\n      await this.getUserKeyWithLegacySupport()\n    );\n    await this.stateService.setDecryptedPrivateKey(privateKey);\n    return privateKey;\n  }\n\n  async getFingerprint(fingerprintMaterial: string, publicKey?: Uint8Array): Promise<string[]> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey === null) {\n      throw new Error(\"No public key available.\");\n    }\n    const keyFingerprint = await this.cryptoFunctionService.hash(publicKey, \"sha256\");\n    const userFingerprint = await this.cryptoFunctionService.hkdfExpand(\n      keyFingerprint,\n      fingerprintMaterial,\n      32,\n      \"sha256\"\n    );\n    return this.hashPhrase(userFingerprint);\n  }\n\n  async makeKeyPair(key?: SymmetricCryptoKey): Promise<[string, EncString]> {\n    key ||= await this.getUserKey();\n\n    const keyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    const publicB64 = Utils.fromBufferToB64(keyPair[0]);\n    const privateEnc = await this.encryptService.encrypt(keyPair[1], key);\n    return [publicB64, privateEnc];\n  }\n\n  async clearKeyPair(memoryOnly?: boolean, userId?: string): Promise<void[]> {\n    const keysToClear: Promise<void>[] = [\n      this.stateService.setDecryptedPrivateKey(null, { userId: userId }),\n      this.stateService.setPublicKey(null, { userId: userId }),\n    ];\n    if (!memoryOnly) {\n      keysToClear.push(this.stateService.setEncryptedPrivateKey(null, { userId: userId }));\n    }\n    return Promise.all(keysToClear);\n  }\n\n  async makePinKey(pin: string, salt: string, kdf: KdfType, kdfConfig: KdfConfig): Promise<PinKey> {\n    const pinKey = await this.makeKey(pin, salt, kdf, kdfConfig);\n    return (await this.stretchKey(pinKey)) as PinKey;\n  }\n\n  async clearPinKeys(userId?: string): Promise<void> {\n    await this.stateService.setPinKeyEncryptedUserKey(null, { userId: userId });\n    await this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n    await this.stateService.setProtectedPin(null, { userId: userId });\n    await this.clearDeprecatedKeys(KeySuffixOptions.Pin, userId);\n  }\n\n  async decryptUserKeyWithPin(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    pinProtectedUserKey?: EncString\n  ): Promise<UserKey> {\n    pinProtectedUserKey ||= await this.stateService.getPinKeyEncryptedUserKey();\n    pinProtectedUserKey ||= await this.stateService.getPinKeyEncryptedUserKeyEphemeral();\n    if (!pinProtectedUserKey) {\n      throw new Error(\"No PIN protected key found.\");\n    }\n    const pinKey = await this.makePinKey(pin, salt, kdf, kdfConfig);\n    const userKey = await this.encryptService.decryptToBytes(pinProtectedUserKey, pinKey);\n    return new SymmetricCryptoKey(userKey) as UserKey;\n  }\n\n  // only for migration purposes\n  async decryptMasterKeyWithPin(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    pinProtectedMasterKey?: EncString\n  ): Promise<MasterKey> {\n    if (!pinProtectedMasterKey) {\n      const pinProtectedMasterKeyString = await this.stateService.getEncryptedPinProtected();\n      if (pinProtectedMasterKeyString == null) {\n        throw new Error(\"No PIN protected key found.\");\n      }\n      pinProtectedMasterKey = new EncString(pinProtectedMasterKeyString);\n    }\n    const pinKey = await this.makePinKey(pin, salt, kdf, kdfConfig);\n    const masterKey = await this.encryptService.decryptToBytes(pinProtectedMasterKey, pinKey);\n    return new SymmetricCryptoKey(masterKey) as MasterKey;\n  }\n\n  async makeSendKey(keyMaterial: Uint8Array): Promise<SymmetricCryptoKey> {\n    const sendKey = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-send\",\n      \"send\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(sendKey);\n  }\n\n  async makeCipherKey(): Promise<CipherKey> {\n    const randomBytes = await this.cryptoFunctionService.aesGenerateKey(512);\n    return new SymmetricCryptoKey(randomBytes) as CipherKey;\n  }\n\n  async clearKeys(userId?: string): Promise<any> {\n    await this.clearUserKey(true, userId);\n    await this.clearMasterKeyHash(userId);\n    await this.clearOrgKeys(false, userId);\n    await this.clearProviderKeys(false, userId);\n    await this.clearKeyPair(false, userId);\n    await this.clearPinKeys(userId);\n  }\n\n  async rsaEncrypt(data: Uint8Array, publicKey?: Uint8Array): Promise<EncString> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey == null) {\n      throw new Error(\"Public key unavailable.\");\n    }\n\n    const encBytes = await this.cryptoFunctionService.rsaEncrypt(data, publicKey, \"sha1\");\n    return new EncString(EncryptionType.Rsa2048_OaepSha1_B64, Utils.fromBufferToB64(encBytes));\n  }\n\n  async rsaDecrypt(encValue: string, privateKeyValue?: Uint8Array): Promise<Uint8Array> {\n    const headerPieces = encValue.split(\".\");\n    let encType: EncryptionType = null;\n    let encPieces: string[];\n\n    if (headerPieces.length === 1) {\n      encType = EncryptionType.Rsa2048_OaepSha256_B64;\n      encPieces = [headerPieces[0]];\n    } else if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64: // HmacSha256 types are deprecated\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    if (encPieces == null || encPieces.length <= 0) {\n      throw new Error(\"encPieces unavailable.\");\n    }\n\n    const data = Utils.fromB64ToArray(encPieces[0]);\n    const privateKey = privateKeyValue ?? (await this.getPrivateKey());\n    if (privateKey == null) {\n      throw new Error(\"No private key.\");\n    }\n\n    let alg: \"sha1\" | \"sha256\" = \"sha1\";\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:\n        alg = \"sha256\";\n        break;\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    return this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg);\n  }\n\n  // EFForg/OpenWireless\n  // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js\n  async randomNumber(min: number, max: number): Promise<number> {\n    let rval = 0;\n    const range = max - min + 1;\n    const bitsNeeded = Math.ceil(Math.log2(range));\n    if (bitsNeeded > 53) {\n      throw new Error(\"We cannot generate numbers larger than 53 bits.\");\n    }\n\n    const bytesNeeded = Math.ceil(bitsNeeded / 8);\n    const mask = Math.pow(2, bitsNeeded) - 1;\n    // 7776 -> (2^13 = 8192) -1 == 8191 or 0x00001111 11111111\n\n    // Fill a byte array with N random numbers\n    const byteArray = new Uint8Array(await this.cryptoFunctionService.randomBytes(bytesNeeded));\n\n    let p = (bytesNeeded - 1) * 8;\n    for (let i = 0; i < bytesNeeded; i++) {\n      rval += byteArray[i] * Math.pow(2, p);\n      p -= 8;\n    }\n\n    // Use & to apply the mask and reduce the number of recursive lookups\n    rval = rval & mask;\n\n    if (rval >= range) {\n      // Integer out of acceptable range\n      return this.randomNumber(min, max);\n    }\n\n    // Return an integer that falls within the range\n    return min + rval;\n  }\n\n  // ---HELPERS---\n  protected async validateUserKey(key: UserKey): Promise<boolean> {\n    if (!key) {\n      return false;\n    }\n\n    try {\n      const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n      if (encPrivateKey == null) {\n        return false;\n      }\n\n      const privateKey = await this.encryptService.decryptToBytes(\n        new EncString(encPrivateKey),\n        key\n      );\n      await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Initialize all necessary crypto keys needed for a new account.\n   * Warning! This completely replaces any existing keys!\n   */\n  async initAccount(): Promise<{\n    userKey: UserKey;\n    publicKey: string;\n    privateKey: EncString;\n  }> {\n    const rawKey = await this.cryptoFunctionService.aesGenerateKey(512);\n    const userKey = new SymmetricCryptoKey(rawKey) as UserKey;\n    const [publicKey, privateKey] = await this.makeKeyPair(userKey);\n    await this.setUserKey(userKey);\n    await this.stateService.setEncryptedPrivateKey(privateKey.encryptedString);\n\n    return {\n      userKey,\n      publicKey,\n      privateKey,\n    };\n  }\n\n  /**\n   * Generates any additional keys if needed. Additional keys are\n   * keys such as biometrics, auto, and pin keys.\n   * Useful to make sure other keys stay in sync when the user key\n   * has been rotated.\n   * @param key The user key\n   * @param userId The desired user\n   */\n  protected async storeAdditionalKeys(key: UserKey, userId?: string) {\n    const storeAuto = await this.shouldStoreKey(KeySuffixOptions.Auto, userId);\n    if (storeAuto) {\n      await this.stateService.setUserKeyAutoUnlock(key.keyB64, { userId: userId });\n    } else {\n      await this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n    }\n    await this.clearDeprecatedKeys(KeySuffixOptions.Auto, userId);\n\n    const storePin = await this.shouldStoreKey(KeySuffixOptions.Pin, userId);\n    if (storePin) {\n      await this.storePinKey(key, userId);\n      // We can't always clear deprecated keys because the pin is only\n      // migrated once used to unlock\n      await this.clearDeprecatedKeys(KeySuffixOptions.Pin, userId);\n    } else {\n      await this.stateService.setPinKeyEncryptedUserKey(null, { userId: userId });\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n    }\n  }\n\n  /**\n   * Stores the pin key if needed. If MP on Reset is enabled, stores the\n   * ephemeral version.\n   * @param key The user key\n   */\n  protected async storePinKey(key: UserKey, userId?: string) {\n    const pin = await this.encryptService.decryptToUtf8(\n      new EncString(await this.stateService.getProtectedPin({ userId: userId })),\n      key\n    );\n    const pinKey = await this.makePinKey(\n      pin,\n      await this.stateService.getEmail({ userId: userId }),\n      await this.stateService.getKdfType({ userId: userId }),\n      await this.stateService.getKdfConfig({ userId: userId })\n    );\n    const encPin = await this.encryptService.encrypt(key.key, pinKey);\n\n    if ((await this.stateService.getPinKeyEncryptedUserKey({ userId: userId })) != null) {\n      await this.stateService.setPinKeyEncryptedUserKey(encPin, { userId: userId });\n    } else {\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(encPin, { userId: userId });\n    }\n  }\n\n  protected async shouldStoreKey(keySuffix: KeySuffixOptions, userId?: string) {\n    let shouldStoreKey = false;\n    switch (keySuffix) {\n      case KeySuffixOptions.Auto: {\n        const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });\n        shouldStoreKey = vaultTimeout == null;\n        break;\n      }\n      case KeySuffixOptions.Pin: {\n        const protectedPin = await this.stateService.getProtectedPin({ userId: userId });\n        shouldStoreKey = !!protectedPin;\n        break;\n      }\n    }\n    return shouldStoreKey;\n  }\n\n  protected async getKeyFromStorage(\n    keySuffix: KeySuffixOptions,\n    userId?: string\n  ): Promise<UserKey> {\n    if (keySuffix === KeySuffixOptions.Auto) {\n      const userKey = await this.stateService.getUserKeyAutoUnlock({ userId: userId });\n      if (userKey) {\n        return new SymmetricCryptoKey(Utils.fromB64ToArray(userKey)) as UserKey;\n      }\n    }\n    return null;\n  }\n\n  protected async clearAllStoredUserKeys(userId?: string): Promise<void> {\n    await this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n    await this.stateService.setPinKeyEncryptedUserKeyEphemeral(null, { userId: userId });\n  }\n\n  private async stretchKey(key: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {\n    const newKey = new Uint8Array(64);\n    const encKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"enc\", 32, \"sha256\");\n    const macKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"mac\", 32, \"sha256\");\n    newKey.set(new Uint8Array(encKey));\n    newKey.set(new Uint8Array(macKey), 32);\n    return new SymmetricCryptoKey(newKey);\n  }\n\n  private async hashPhrase(hash: Uint8Array, minimumEntropy = 64) {\n    const entropyPerWord = Math.log(EFFLongWordList.length) / Math.log(2);\n    let numWords = Math.ceil(minimumEntropy / entropyPerWord);\n\n    const hashArr = Array.from(new Uint8Array(hash));\n    const entropyAvailable = hashArr.length * 4;\n    if (numWords * entropyPerWord > entropyAvailable) {\n      throw new Error(\"Output entropy of hash function is too small\");\n    }\n\n    const phrase: string[] = [];\n    let hashNumber = bigInt.fromArray(hashArr, 256);\n    while (numWords--) {\n      const remainder = hashNumber.mod(EFFLongWordList.length);\n      hashNumber = hashNumber.divide(EFFLongWordList.length);\n      phrase.push(EFFLongWordList[remainder as any]);\n    }\n    return phrase;\n  }\n\n  private async buildProtectedSymmetricKey<T extends SymmetricCryptoKey>(\n    encryptionKey: SymmetricCryptoKey,\n    newSymKey: Uint8Array\n  ): Promise<[T, EncString]> {\n    let protectedSymKey: EncString = null;\n    if (encryptionKey.key.byteLength === 32) {\n      const stretchedEncryptionKey = await this.stretchKey(encryptionKey);\n      protectedSymKey = await this.encryptService.encrypt(newSymKey, stretchedEncryptionKey);\n    } else if (encryptionKey.key.byteLength === 64) {\n      protectedSymKey = await this.encryptService.encrypt(newSymKey, encryptionKey);\n    } else {\n      throw new Error(\"Invalid key size.\");\n    }\n    return [new SymmetricCryptoKey(newSymKey) as T, protectedSymKey];\n  }\n\n  private async makeKey(\n    password: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ): Promise<SymmetricCryptoKey> {\n    let key: Uint8Array = null;\n    if (kdf == null || kdf === KdfType.PBKDF2_SHA256) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = 5000;\n      } else if (kdfConfig.iterations < 5000) {\n        throw new Error(\"PBKDF2 iteration minimum is 5000.\");\n      }\n      key = await this.cryptoFunctionService.pbkdf2(password, salt, \"sha256\", kdfConfig.iterations);\n    } else if (kdf == KdfType.Argon2id) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = DEFAULT_ARGON2_ITERATIONS;\n      } else if (kdfConfig.iterations < 2) {\n        throw new Error(\"Argon2 iteration minimum is 2.\");\n      }\n\n      if (kdfConfig.memory == null) {\n        kdfConfig.memory = DEFAULT_ARGON2_MEMORY;\n      } else if (kdfConfig.memory < 16) {\n        throw new Error(\"Argon2 memory minimum is 16 MB\");\n      } else if (kdfConfig.memory > 1024) {\n        throw new Error(\"Argon2 memory maximum is 1024 MB\");\n      }\n\n      if (kdfConfig.parallelism == null) {\n        kdfConfig.parallelism = DEFAULT_ARGON2_PARALLELISM;\n      } else if (kdfConfig.parallelism < 1) {\n        throw new Error(\"Argon2 parallelism minimum is 1.\");\n      }\n\n      const saltHash = await this.cryptoFunctionService.hash(salt, \"sha256\");\n      key = await this.cryptoFunctionService.argon2(\n        password,\n        saltHash,\n        kdfConfig.iterations,\n        kdfConfig.memory * 1024, // convert to KiB from MiB\n        kdfConfig.parallelism\n      );\n    } else {\n      throw new Error(\"Unknown Kdf.\");\n    }\n    return new SymmetricCryptoKey(key);\n  }\n\n  // --LEGACY METHODS--\n  // We previously used the master key for additional keys, but now we use the user key.\n  // These methods support migrating the old keys to the new ones.\n  // TODO: Remove after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3475)\n\n  async clearDeprecatedKeys(keySuffix: KeySuffixOptions, userId?: string) {\n    if (keySuffix === KeySuffixOptions.Auto) {\n      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n    } else if (keySuffix === KeySuffixOptions.Pin) {\n      await this.stateService.setEncryptedPinProtected(null, { userId: userId });\n      await this.stateService.setDecryptedPinProtected(null, { userId: userId });\n    }\n  }\n\n  async migrateAutoKeyIfNeeded(userId?: string) {\n    const oldAutoKey = await this.stateService.getCryptoMasterKeyAuto({ userId: userId });\n    if (oldAutoKey) {\n      // decrypt\n      const masterKey = new SymmetricCryptoKey(Utils.fromB64ToArray(oldAutoKey)) as MasterKey;\n      const encryptedUserKey = await this.stateService.getEncryptedCryptoSymmetricKey({\n        userId: userId,\n      });\n      const userKey = await this.decryptUserKeyWithMasterKey(\n        masterKey,\n        new EncString(encryptedUserKey),\n        userId\n      );\n      // migrate\n      await this.stateService.setUserKeyAutoUnlock(userKey.keyB64, { userId: userId });\n      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n      // set encrypted user key in case user immediately locks without syncing\n      await this.setMasterKeyEncryptedUserKey(encryptedUserKey);\n    }\n  }\n\n  async decryptAndMigrateOldPinKey(\n    masterPasswordOnRestart: boolean,\n    pin: string,\n    email: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    oldPinKey: EncString\n  ): Promise<UserKey> {\n    // Decrypt\n    const masterKey = await this.decryptMasterKeyWithPin(pin, email, kdf, kdfConfig, oldPinKey);\n    const encUserKey = await this.stateService.getEncryptedCryptoSymmetricKey();\n    const userKey = await this.decryptUserKeyWithMasterKey(masterKey, new EncString(encUserKey));\n    // Migrate\n    const pinKey = await this.makePinKey(pin, email, kdf, kdfConfig);\n    const pinProtectedKey = await this.encryptService.encrypt(userKey.key, pinKey);\n    if (masterPasswordOnRestart) {\n      await this.stateService.setDecryptedPinProtected(null);\n      await this.stateService.setPinKeyEncryptedUserKeyEphemeral(pinProtectedKey);\n    } else {\n      await this.stateService.setEncryptedPinProtected(null);\n      await this.stateService.setPinKeyEncryptedUserKey(pinProtectedKey);\n      // We previously only set the protected pin if MP on Restart was enabled\n      // now we set it regardless\n      const encPin = await this.encryptService.encrypt(pin, userKey);\n      await this.stateService.setProtectedPin(encPin.encryptedString);\n    }\n    // This also clears the old Biometrics key since the new Biometrics key will\n    // be created when the user key is set.\n    await this.stateService.setCryptoMasterKeyBiometric(null);\n    return userKey;\n  }\n\n  // --DEPRECATED METHODS--\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encrypt\n   */\n  async encrypt(plainValue: string | Uint8Array, key?: SymmetricCryptoKey): Promise<EncString> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return await this.encryptService.encrypt(plainValue, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encryptToBytes\n   */\n  async encryptToBytes(plainValue: Uint8Array, key?: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return this.encryptService.encryptToBytes(plainValue, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptToBytes(encString: EncString, key?: SymmetricCryptoKey): Promise<Uint8Array> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return this.encryptService.decryptToBytes(encString, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToUtf8\n   */\n  async decryptToUtf8(encString: EncString, key?: SymmetricCryptoKey): Promise<string> {\n    key ||= await this.getUserKeyWithLegacySupport();\n    return await this.encryptService.decryptToUtf8(encString, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptFromBytes(encBuffer: EncArrayBuffer, key: SymmetricCryptoKey): Promise<Uint8Array> {\n    if (encBuffer == null) {\n      throw new Error(\"No buffer provided for decryption.\");\n    }\n\n    key ||= await this.getUserKeyWithLegacySupport();\n\n    return this.encryptService.decryptToBytes(encBuffer, key);\n  }\n}\n","import { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\n\nexport class EncryptedObject {\n  iv: Uint8Array;\n  data: Uint8Array;\n  mac: Uint8Array;\n  key: SymmetricCryptoKey;\n}\n","import { EncryptionType } from \"../../../enums\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { CryptoFunctionService } from \"../../abstractions/crypto-function.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { Encrypted } from \"../../interfaces/encrypted\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { EncryptedObject } from \"../../models/domain/encrypted-object\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nexport class EncryptServiceImplementation implements EncryptService {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected logMacFailures: boolean\n  ) {}\n\n  async encrypt(plainValue: string | Uint8Array, key: SymmetricCryptoKey): Promise<EncString> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (plainValue == null) {\n      return Promise.resolve(null);\n    }\n\n    let plainBuf: Uint8Array;\n    if (typeof plainValue === \"string\") {\n      plainBuf = Utils.fromUtf8ToArray(plainValue);\n    } else {\n      plainBuf = plainValue;\n    }\n\n    const encObj = await this.aesEncrypt(plainBuf, key);\n    const iv = Utils.fromBufferToB64(encObj.iv);\n    const data = Utils.fromBufferToB64(encObj.data);\n    const mac = encObj.mac != null ? Utils.fromBufferToB64(encObj.mac) : null;\n    return new EncString(encObj.key.encType, data, iv, mac);\n  }\n\n  async encryptToBytes(plainValue: Uint8Array, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    const encValue = await this.aesEncrypt(plainValue, key);\n    let macLen = 0;\n    if (encValue.mac != null) {\n      macLen = encValue.mac.byteLength;\n    }\n\n    const encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);\n    encBytes.set([encValue.key.encType]);\n    encBytes.set(new Uint8Array(encValue.iv), 1);\n    if (encValue.mac != null) {\n      encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);\n    }\n\n    encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);\n    return new EncArrayBuffer(encBytes);\n  }\n\n  async decryptToUtf8(encString: EncString, key: SymmetricCryptoKey): Promise<string> {\n    if (key == null) {\n      throw new Error(\"No key provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encString);\n\n    if (key.macKey != null && encString?.mac == null) {\n      this.logService.error(\"mac required.\");\n      return null;\n    }\n\n    if (key.encType !== encString.encryptionType) {\n      this.logService.error(\"encType unavailable.\");\n      return null;\n    }\n\n    const fastParams = this.cryptoFunctionService.aesDecryptFastParameters(\n      encString.data,\n      encString.iv,\n      encString.mac,\n      key\n    );\n    if (fastParams.macKey != null && fastParams.mac != null) {\n      const computedMac = await this.cryptoFunctionService.hmacFast(\n        fastParams.macData,\n        fastParams.macKey,\n        \"sha256\"\n      );\n      const macsEqual = await this.cryptoFunctionService.compareFast(fastParams.mac, computedMac);\n      if (!macsEqual) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    return await this.cryptoFunctionService.aesDecryptFast(fastParams);\n  }\n\n  async decryptToBytes(encThing: Encrypted, key: SymmetricCryptoKey): Promise<Uint8Array> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (encThing == null) {\n      throw new Error(\"Nothing provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encThing);\n\n    if (key.macKey != null && encThing.macBytes == null) {\n      return null;\n    }\n\n    if (key.encType !== encThing.encryptionType) {\n      return null;\n    }\n\n    if (key.macKey != null && encThing.macBytes != null) {\n      const macData = new Uint8Array(encThing.ivBytes.byteLength + encThing.dataBytes.byteLength);\n      macData.set(new Uint8Array(encThing.ivBytes), 0);\n      macData.set(new Uint8Array(encThing.dataBytes), encThing.ivBytes.byteLength);\n      const computedMac = await this.cryptoFunctionService.hmac(macData, key.macKey, \"sha256\");\n      if (computedMac === null) {\n        return null;\n      }\n\n      const macsMatch = await this.cryptoFunctionService.compare(encThing.macBytes, computedMac);\n      if (!macsMatch) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    const result = await this.cryptoFunctionService.aesDecrypt(\n      encThing.dataBytes,\n      encThing.ivBytes,\n      key.encKey\n    );\n\n    return result ?? null;\n  }\n\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    return await Promise.all(items.map((item) => item.decrypt(key)));\n  }\n\n  private async aesEncrypt(data: Uint8Array, key: SymmetricCryptoKey): Promise<EncryptedObject> {\n    const obj = new EncryptedObject();\n    obj.key = key;\n    obj.iv = await this.cryptoFunctionService.randomBytes(16);\n    obj.data = await this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey);\n\n    if (obj.key.macKey != null) {\n      const macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);\n      macData.set(new Uint8Array(obj.iv), 0);\n      macData.set(new Uint8Array(obj.data), obj.iv.byteLength);\n      obj.mac = await this.cryptoFunctionService.hmac(macData, obj.key.macKey, \"sha256\");\n    }\n\n    return obj;\n  }\n\n  private logMacFailed(msg: string) {\n    if (this.logMacFailures) {\n      this.logService.error(msg);\n    }\n  }\n\n  /**\n   * Transform into new key for the old encrypt-then-mac scheme if required, otherwise return the current key unchanged\n   * @param encThing The encrypted object (e.g. encString or encArrayBuffer) that you want to decrypt\n   */\n  resolveLegacyKey(key: SymmetricCryptoKey, encThing: Encrypted): SymmetricCryptoKey {\n    if (\n      encThing.encryptionType === EncryptionType.AesCbc128_HmacSha256_B64 &&\n      key.encType === EncryptionType.AesCbc256_B64\n    ) {\n      return new SymmetricCryptoKey(key.key, EncryptionType.AesCbc128_HmacSha256_B64);\n    }\n\n    return key;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Cipher } from \"../../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../../vault/models/view/cipher.view\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\n\nimport { InitializerKey } from \"./initializer-key\";\n\n/**\n * Internal reference of classes so we can reconstruct objects properly.\n * Each entry should be keyed using the Decryptable.initializerKey property\n */\nconst classInitializers: Record<InitializerKey, (obj: any) => any> = {\n  [InitializerKey.Cipher]: Cipher.fromJSON,\n  [InitializerKey.CipherView]: CipherView.fromJSON,\n};\n\nexport function getClassInitializer<T extends InitializerMetadata>(\n  className: InitializerKey\n): (obj: Jsonify<T>) => T {\n  return classInitializers[className];\n}\n","import { defaultIfEmpty, filter, firstValueFrom, fromEvent, map, Subject, takeUntil } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nimport { EncryptServiceImplementation } from \"./encrypt.service.implementation\";\nimport { getClassInitializer } from \"./get-class-initializer\";\n\n// TTL (time to live) is not strictly required but avoids tying up memory resources if inactive\nconst workerTTL = 3 * 60000; // 3 minutes\n\nexport class MultithreadEncryptServiceImplementation extends EncryptServiceImplementation {\n  private worker: Worker;\n  private timeout: any;\n\n  private clear$ = new Subject<void>();\n\n  /**\n   * Sends items to a web worker to decrypt them.\n   * This utilises multithreading to decrypt items faster without interrupting other operations (e.g. updating UI).\n   */\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    this.logService.info(\"Starting decryption using multithreading\");\n\n    this.worker ??= new Worker(\n      new URL(\n        /* webpackChunkName: 'encrypt-worker' */\n        \"@bitwarden/common/platform/services/cryptography/encrypt.worker.ts\",\n        import.meta.url\n      )\n    );\n\n    this.restartTimeout();\n\n    const request = {\n      id: Utils.newGuid(),\n      items: items,\n      key: key,\n    };\n\n    this.worker.postMessage(JSON.stringify(request));\n\n    return await firstValueFrom(\n      fromEvent(this.worker, \"message\").pipe(\n        filter((response: MessageEvent) => response.data?.id === request.id),\n        map((response) => JSON.parse(response.data.items)),\n        map((items) =>\n          items.map((jsonItem: Jsonify<T>) => {\n            const initializer = getClassInitializer<T>(jsonItem.initializerKey);\n            return initializer(jsonItem);\n          })\n        ),\n        takeUntil(this.clear$),\n        defaultIfEmpty([])\n      )\n    );\n  }\n\n  private clear() {\n    this.clear$.next();\n    this.worker?.terminate();\n    this.worker = null;\n    this.clearTimeout();\n  }\n\n  private restartTimeout() {\n    this.clearTimeout();\n    this.timeout = setTimeout(() => this.clear(), workerTTL);\n  }\n\n  private clearTimeout() {\n    if (this.timeout != null) {\n      clearTimeout(this.timeout);\n    }\n  }\n}\n","import { LogService } from \"../../abstractions/log.service\";\nimport { Utils } from \"../../misc/utils\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\n\nconst MAX_SINGLE_BLOB_UPLOAD_SIZE = 256 * 1024 * 1024; // 256 MiB\nconst MAX_BLOCKS_PER_BLOB = 50000;\n\nexport class AzureFileUploadService {\n  constructor(private logService: LogService) {}\n\n  async upload(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {\n    if (data.buffer.byteLength <= MAX_SINGLE_BLOB_UPLOAD_SIZE) {\n      return await this.azureUploadBlob(url, data);\n    } else {\n      return await this.azureUploadBlocks(url, data, renewalCallback);\n    }\n  }\n  private async azureUploadBlob(url: string, data: EncArrayBuffer) {\n    const urlObject = Utils.getUrl(url);\n    const headers = new Headers({\n      \"x-ms-date\": new Date().toUTCString(),\n      \"x-ms-version\": urlObject.searchParams.get(\"sv\"),\n      \"Content-Length\": data.buffer.byteLength.toString(),\n      \"x-ms-blob-type\": \"BlockBlob\",\n    });\n\n    const request = new Request(url, {\n      body: data.buffer,\n      cache: \"no-store\",\n      method: \"PUT\",\n      headers: headers,\n    });\n\n    const blobResponse = await fetch(request);\n\n    if (blobResponse.status !== 201) {\n      throw new Error(`Failed to create Azure blob: ${blobResponse.status}`);\n    }\n  }\n  private async azureUploadBlocks(\n    url: string,\n    data: EncArrayBuffer,\n    renewalCallback: () => Promise<string>\n  ) {\n    const baseUrl = Utils.getUrl(url);\n    const blockSize = this.getMaxBlockSize(baseUrl.searchParams.get(\"sv\"));\n    let blockIndex = 0;\n    const numBlocks = Math.ceil(data.buffer.byteLength / blockSize);\n    const blocksStaged: string[] = [];\n\n    if (numBlocks > MAX_BLOCKS_PER_BLOB) {\n      throw new Error(\n        `Cannot upload file, exceeds maximum size of ${blockSize * MAX_BLOCKS_PER_BLOB}`\n      );\n    }\n\n    // eslint-disable-next-line\n    try {\n      while (blockIndex < numBlocks) {\n        url = await this.renewUrlIfNecessary(url, renewalCallback);\n        const blockUrl = Utils.getUrl(url);\n        const blockId = this.encodedBlockId(blockIndex);\n        blockUrl.searchParams.append(\"comp\", \"block\");\n        blockUrl.searchParams.append(\"blockid\", blockId);\n        const start = blockIndex * blockSize;\n        const blockData = data.buffer.slice(start, start + blockSize);\n        const blockHeaders = new Headers({\n          \"x-ms-date\": new Date().toUTCString(),\n          \"x-ms-version\": blockUrl.searchParams.get(\"sv\"),\n          \"Content-Length\": blockData.byteLength.toString(),\n        });\n\n        const blockRequest = new Request(blockUrl.toString(), {\n          body: blockData,\n          cache: \"no-store\",\n          method: \"PUT\",\n          headers: blockHeaders,\n        });\n\n        const blockResponse = await fetch(blockRequest);\n\n        if (blockResponse.status !== 201) {\n          const message = `Unsuccessful block PUT. Received status ${blockResponse.status}`;\n          this.logService.error(message + \"\\n\" + (await blockResponse.json()));\n          throw new Error(message);\n        }\n\n        blocksStaged.push(blockId);\n        blockIndex++;\n      }\n\n      url = await this.renewUrlIfNecessary(url, renewalCallback);\n      const blockListUrl = Utils.getUrl(url);\n      const blockListXml = this.blockListXml(blocksStaged);\n      blockListUrl.searchParams.append(\"comp\", \"blocklist\");\n      const headers = new Headers({\n        \"x-ms-date\": new Date().toUTCString(),\n        \"x-ms-version\": blockListUrl.searchParams.get(\"sv\"),\n        \"Content-Length\": blockListXml.length.toString(),\n      });\n\n      const request = new Request(blockListUrl.toString(), {\n        body: blockListXml,\n        cache: \"no-store\",\n        method: \"PUT\",\n        headers: headers,\n      });\n\n      const response = await fetch(request);\n\n      if (response.status !== 201) {\n        const message = `Unsuccessful block list PUT. Received status ${response.status}`;\n        this.logService.error(message + \"\\n\" + (await response.json()));\n        throw new Error(message);\n      }\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  private async renewUrlIfNecessary(\n    url: string,\n    renewalCallback: () => Promise<string>\n  ): Promise<string> {\n    const urlObject = Utils.getUrl(url);\n    const expiry = new Date(urlObject.searchParams.get(\"se\") ?? \"\");\n\n    if (isNaN(expiry.getTime())) {\n      expiry.setTime(Date.now() + 3600000);\n    }\n\n    if (expiry.getTime() < Date.now() + 1000) {\n      return await renewalCallback();\n    }\n    return url;\n  }\n\n  private encodedBlockId(blockIndex: number) {\n    // Encoded blockId max size is 64, so pre-encoding max size is 48\n    const utfBlockId = (\n      \"000000000000000000000000000000000000000000000000\" + blockIndex.toString()\n    ).slice(-48);\n    return Utils.fromUtf8ToB64(utfBlockId);\n  }\n\n  private blockListXml(blockIdList: string[]) {\n    let xml = '<?xml version=\"1.0\" encoding=\"utf-8\"?><BlockList>';\n    blockIdList.forEach((blockId) => {\n      xml += `<Latest>${blockId}</Latest>`;\n    });\n    xml += \"</BlockList>\";\n    return xml;\n  }\n\n  private getMaxBlockSize(version: string) {\n    if (Version.compare(version, \"2019-12-12\") >= 0) {\n      return 4000 * 1024 * 1024; // 4000 MiB\n    } else if (Version.compare(version, \"2016-05-31\") >= 0) {\n      return 100 * 1024 * 1024; // 100 MiB\n    } else {\n      return 4 * 1024 * 1024; // 4 MiB\n    }\n  }\n}\n\nclass Version {\n  /**\n   * Compares two Azure Versions against each other\n   * @param a Version to compare\n   * @param b Version to compare\n   * @returns a number less than zero if b is newer than a, 0 if equal,\n   * and greater than zero if a is newer than b\n   */\n  static compare(a: Required<Version> | string, b: Required<Version> | string) {\n    if (typeof a === \"string\") {\n      a = new Version(a);\n    }\n\n    if (typeof b === \"string\") {\n      b = new Version(b);\n    }\n\n    return a.year !== b.year\n      ? a.year - b.year\n      : a.month !== b.month\n      ? a.month - b.month\n      : a.day !== b.day\n      ? a.day - b.day\n      : 0;\n  }\n  year = 0;\n  month = 0;\n  day = 0;\n\n  constructor(version: string) {\n    try {\n      const parts = version.split(\"-\").map((v) => Number.parseInt(v, 10));\n      this.year = parts[0];\n      this.month = parts[1];\n      this.day = parts[2];\n    } catch {\n      // Ignore error\n    }\n  }\n  /**\n   * Compares two Azure Versions against each other\n   * @param compareTo Version to compare against\n   * @returns a number less than zero if compareTo is newer, 0 if equal,\n   * and greater than zero if this is greater than compareTo\n   */\n  compare(compareTo: Required<Version> | string) {\n    return Version.compare(this, compareTo);\n  }\n}\n","import { Utils } from \"../../misc/utils\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\n\nexport class BitwardenFileUploadService {\n  async upload(\n    encryptedFileName: string,\n    encryptedFileData: EncArrayBuffer,\n    apiCall: (fd: FormData) => Promise<any>\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encryptedFileData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"data\", blob, encryptedFileName);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\n          \"data\",\n          Buffer.from(encryptedFileData.buffer) as any,\n          {\n            filepath: encryptedFileName,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    await apiCall(fd);\n  }\n}\n","import { FileUploadType } from \"../../../enums\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService as FileUploadServiceAbstraction,\n} from \"../../abstractions/file-upload/file-upload.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\n\nimport { AzureFileUploadService } from \"./azure-file-upload.service\";\nimport { BitwardenFileUploadService } from \"./bitwarden-file-upload.service\";\n\nexport class FileUploadService implements FileUploadServiceAbstraction {\n  private azureFileUploadService: AzureFileUploadService;\n  private bitwardenFileUploadService: BitwardenFileUploadService;\n\n  constructor(protected logService: LogService) {\n    this.azureFileUploadService = new AzureFileUploadService(logService);\n    this.bitwardenFileUploadService = new BitwardenFileUploadService();\n  }\n\n  async upload(\n    uploadData: { url: string; fileUploadType: FileUploadType },\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer,\n    fileUploadMethods: FileUploadApiMethods\n  ) {\n    try {\n      switch (uploadData.fileUploadType) {\n        case FileUploadType.Direct:\n          await this.bitwardenFileUploadService.upload(\n            fileName.encryptedString,\n            encryptedFileData,\n            (fd) => fileUploadMethods.postDirect(fd)\n          );\n          break;\n        case FileUploadType.Azure: {\n          await this.azureFileUploadService.upload(\n            uploadData.url,\n            encryptedFileData,\n            fileUploadMethods.renewFileUploadUrl\n          );\n          break;\n        }\n        default:\n          throw new Error(\"Unknown file upload type\");\n      }\n    } catch (e) {\n      await fileUploadMethods.rollback();\n      throw e;\n    }\n  }\n}\n","import { ProviderUserStatusType, ProviderUserType } from \"../../enums\";\nimport { ProfileProviderResponse } from \"../response/profile-provider.response\";\n\nexport class ProviderData {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: ProfileProviderResponse) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.userId = response.userId;\n    this.useEvents = response.useEvents;\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport class EventData {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { MigrationHelper } from \"./migration-helper\";\nimport { Direction, Migrator, VersionFrom, VersionTo } from \"./migrator\";\n\nexport class MigrationBuilder<TCurrent extends number = 0> {\n  /** Create a new MigrationBuilder with an empty buffer of migrations to perform.\n   *\n   * Add migrations to the buffer with {@link with} and {@link rollback}.\n   * @returns A new MigrationBuilder.\n   */\n  static create(): MigrationBuilder<0> {\n    return new MigrationBuilder([]);\n  }\n\n  private constructor(\n    private migrations: readonly { migrator: Migrator<number, number>; direction: Direction }[]\n  ) {}\n\n  /** Add a migrator to the MigrationBuilder. Types are updated such that the chained MigrationBuilder must currently be\n   * at state version equal to the from version of the migrator. Return as MigrationBuilder<TTo> where TTo is the to\n   * version of the migrator, so that the next migrator can be chained.\n   *\n   * @param migrate A migrator class or a tuple of a migrator class, the from version, and the to version. A tuple is\n   * required to instantiate version numbers unless a default constructor is defined.\n   * @returns A new MigrationBuilder with the to version of the migrator as the current version.\n   */\n  with<\n    TMigrator extends Migrator<number, number>,\n    TFrom extends VersionFrom<TMigrator> & TCurrent,\n    TTo extends VersionTo<TMigrator>\n  >(\n    ...migrate: [new () => TMigrator] | [new (from: TFrom, to: TTo) => TMigrator, TFrom, TTo]\n  ): MigrationBuilder<TTo> {\n    return this.addMigrator(migrate, \"up\");\n  }\n\n  /** Add a migrator to rollback on the MigrationBuilder's list of migrations. As with {@link with}, types of\n   * MigrationBuilder and Migrator must align. However, this time the migration is reversed so TCurrent of the\n   * MigrationBuilder must be equal to the to version of the migrator. Return as MigrationBuilder<TFrom> where TFrom\n   * is the from version of the migrator, so that the next migrator can be chained.\n   *\n   * @param migrate A migrator class or a tuple of a migrator class, the from version, and the to version. A tuple is\n   * required to instantiate version numbers unless a default constructor is defined.\n   * @returns A new MigrationBuilder with the from version of the migrator as the current version.\n   */\n  rollback<\n    TMigrator extends Migrator<number, number>,\n    TFrom extends VersionFrom<TMigrator>,\n    TTo extends VersionTo<TMigrator> & TCurrent\n  >(\n    ...migrate: [new () => TMigrator] | [new (from: TFrom, to: TTo) => TMigrator, TTo, TFrom]\n  ): MigrationBuilder<TFrom> {\n    if (migrate.length === 3) {\n      migrate = [migrate[0], migrate[2], migrate[1]];\n    }\n    return this.addMigrator(migrate, \"down\");\n  }\n\n  /** Execute the migrations as defined in the MigrationBuilder's migrator buffer */\n  migrate(helper: MigrationHelper): Promise<void> {\n    return this.migrations.reduce(\n      (promise, migrator) =>\n        promise.then(async () => {\n          await this.runMigrator(migrator.migrator, helper, migrator.direction);\n        }),\n      Promise.resolve()\n    );\n  }\n\n  private addMigrator<\n    TMigrator extends Migrator<number, number>,\n    TFrom extends VersionFrom<TMigrator> & TCurrent,\n    TTo extends VersionTo<TMigrator>\n  >(\n    migrate: [new () => TMigrator] | [new (from: TFrom, to: TTo) => TMigrator, TFrom, TTo],\n    direction: Direction = \"up\"\n  ) {\n    const newMigration =\n      migrate.length === 1\n        ? { migrator: new migrate[0](), direction }\n        : { migrator: new migrate[0](migrate[1], migrate[2]), direction };\n\n    return new MigrationBuilder<TTo>([...this.migrations, newMigration]);\n  }\n\n  private async runMigrator(\n    migrator: Migrator<number, number>,\n    helper: MigrationHelper,\n    direction: Direction\n  ): Promise<void> {\n    const shouldMigrate = await migrator.shouldMigrate(helper, direction);\n    helper.info(\n      `Migrator ${migrator.constructor.name} (to version ${migrator.toVersion}) should migrate: ${shouldMigrate} - ${direction}`\n    );\n    if (shouldMigrate) {\n      const method = direction === \"up\" ? migrator.migrate : migrator.rollback;\n      await method(helper);\n      helper.info(\n        `Migrator ${migrator.constructor.name} (to version ${migrator.toVersion}) migrated - ${direction}`\n      );\n      await migrator.updateVersion(helper, direction);\n      helper.info(\n        `Migrator ${migrator.constructor.name} (to version ${migrator.toVersion}) updated version - ${direction}`\n      );\n    }\n  }\n}\n","// eslint-disable-next-line import/no-restricted-paths -- Needed to print log messages\nimport { LogService } from \"../platform/abstractions/log.service\";\n// eslint-disable-next-line import/no-restricted-paths -- Needed to interface with storage locations\nimport { AbstractStorageService } from \"../platform/abstractions/storage.service\";\n\nexport class MigrationHelper {\n  constructor(\n    public currentVersion: number,\n    private storageService: AbstractStorageService,\n    public logService: LogService\n  ) {}\n\n  get<T>(key: string): Promise<T> {\n    return this.storageService.get<T>(key);\n  }\n\n  set<T>(key: string, value: T): Promise<void> {\n    this.logService.info(`Setting ${key}`);\n    return this.storageService.save(key, value);\n  }\n\n  info(message: string): void {\n    this.logService.info(message);\n  }\n\n  async getAccounts<ExpectedAccountType>(): Promise<\n    { userId: string; account: ExpectedAccountType }[]\n  > {\n    const userIds = (await this.get<string[]>(\"authenticatedAccounts\")) ?? [];\n    return Promise.all(\n      userIds.map(async (userId) => ({\n        userId,\n        account: await this.get<ExpectedAccountType>(userId),\n      }))\n    );\n  }\n}\n","import { NonNegativeInteger } from \"type-fest\";\n\nimport { MigrationHelper } from \"./migration-helper\";\n\nexport const IRREVERSIBLE = new Error(\"Irreversible migration\");\n\nexport type VersionFrom<T> = T extends Migrator<infer TFrom, number>\n  ? TFrom extends NonNegativeInteger<TFrom>\n    ? TFrom\n    : never\n  : never;\nexport type VersionTo<T> = T extends Migrator<number, infer TTo>\n  ? TTo extends NonNegativeInteger<TTo>\n    ? TTo\n    : never\n  : never;\nexport type Direction = \"up\" | \"down\";\n\nexport abstract class Migrator<TFrom extends number, TTo extends number> {\n  constructor(public fromVersion: TFrom, public toVersion: TTo) {\n    if (fromVersion == null || toVersion == null) {\n      throw new Error(\"Invalid migration\");\n    }\n    if (fromVersion > toVersion) {\n      throw new Error(\"Invalid migration\");\n    }\n  }\n\n  shouldMigrate(helper: MigrationHelper, direction: Direction): Promise<boolean> {\n    const startVersion = direction === \"up\" ? this.fromVersion : this.toVersion;\n    return Promise.resolve(helper.currentVersion === startVersion);\n  }\n  abstract migrate(helper: MigrationHelper): Promise<void>;\n  abstract rollback(helper: MigrationHelper): Promise<void>;\n  async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    await helper.set(\"stateVersion\", endVersion);\n  }\n}\n","// eslint-disable-next-line import/no-restricted-paths -- Used for token decoding, which are valid for days. We want the latest\nimport { TokenService } from \"../../auth/services/token.service\";\nimport { MigrationHelper } from \"../migration-helper\";\nimport { Migrator, IRREVERSIBLE, Direction } from \"../migrator\";\n\ntype ExpectedAccountType = {\n  profile?: { hasPremiumPersonally?: boolean };\n  tokens?: { accessToken?: string };\n};\n\nexport class FixPremiumMigrator extends Migrator<2, 3> {\n  async migrate(helper: MigrationHelper): Promise<void> {\n    const accounts = await helper.getAccounts<ExpectedAccountType>();\n\n    async function fixPremium(userId: string, account: ExpectedAccountType) {\n      if (account?.profile?.hasPremiumPersonally === null && account.tokens?.accessToken != null) {\n        let decodedToken: { premium: boolean };\n        try {\n          decodedToken = await TokenService.decodeToken(account.tokens.accessToken);\n        } catch {\n          return;\n        }\n\n        if (decodedToken?.premium == null) {\n          return;\n        }\n\n        account.profile.hasPremiumPersonally = decodedToken?.premium;\n        return helper.set(userId, account);\n      }\n    }\n\n    await Promise.all(accounts.map(({ userId, account }) => fixPremium(userId, account)));\n  }\n\n  rollback(helper: MigrationHelper): Promise<void> {\n    throw IRREVERSIBLE;\n  }\n\n  // Override is necessary because default implementation assumes `stateVersion` at the root, but for this version\n  // it is nested inside a global object.\n  override async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    const global: Record<string, unknown> = (await helper.get(\"global\")) || {};\n    await helper.set(\"global\", { ...global, stateVersion: endVersion });\n  }\n}\n","import { MigrationHelper } from \"../migration-helper\";\nimport { Direction, IRREVERSIBLE, Migrator } from \"../migrator\";\n\ntype ExpectedAccountType = { profile?: { everBeenUnlocked?: boolean } };\n\nexport class RemoveEverBeenUnlockedMigrator extends Migrator<3, 4> {\n  async migrate(helper: MigrationHelper): Promise<void> {\n    const accounts = await helper.getAccounts<ExpectedAccountType>();\n\n    async function removeEverBeenUnlocked(userId: string, account: ExpectedAccountType) {\n      if (account?.profile?.everBeenUnlocked != null) {\n        delete account.profile.everBeenUnlocked;\n        return helper.set(userId, account);\n      }\n    }\n\n    Promise.all(accounts.map(({ userId, account }) => removeEverBeenUnlocked(userId, account)));\n  }\n\n  rollback(helper: MigrationHelper): Promise<void> {\n    throw IRREVERSIBLE;\n  }\n\n  // Override is necessary because default implementation assumes `stateVersion` at the root, but for this version\n  // it is nested inside a global object.\n  override async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    const global: { stateVersion: number } = (await helper.get(\"global\")) || ({} as any);\n    await helper.set(\"global\", { ...global, stateVersion: endVersion });\n  }\n}\n","import { MigrationHelper } from \"../migration-helper\";\nimport { Direction, Migrator } from \"../migrator\";\n\ntype ExpectedAccountType = { keys?: { organizationKeys?: { encrypted: Record<string, string> } } };\ntype NewAccountType = {\n  keys?: {\n    organizationKeys?: { encrypted: Record<string, { type: \"organization\"; key: string }> };\n  };\n};\n\nexport class AddKeyTypeToOrgKeysMigrator extends Migrator<4, 5> {\n  async migrate(helper: MigrationHelper): Promise<void> {\n    const accounts = await helper.getAccounts();\n\n    async function updateOrgKey(userId: string, account: ExpectedAccountType) {\n      const encryptedOrgKeys = account?.keys?.organizationKeys?.encrypted;\n      if (encryptedOrgKeys == null) {\n        return;\n      }\n\n      const newOrgKeys: Record<string, { type: \"organization\"; key: string }> = {};\n\n      Object.entries(encryptedOrgKeys).forEach(([orgId, encKey]) => {\n        newOrgKeys[orgId] = {\n          type: \"organization\",\n          key: encKey,\n        };\n      });\n      (account as any).keys.organizationKeys.encrypted = newOrgKeys;\n\n      await helper.set(userId, account);\n    }\n\n    Promise.all(accounts.map(({ userId, account }) => updateOrgKey(userId, account)));\n  }\n\n  async rollback(helper: MigrationHelper): Promise<void> {\n    const accounts = await helper.getAccounts();\n\n    async function updateOrgKey(userId: string, account: NewAccountType) {\n      const encryptedOrgKeys = account?.keys?.organizationKeys?.encrypted;\n      if (encryptedOrgKeys == null) {\n        return;\n      }\n\n      const newOrgKeys: Record<string, string> = {};\n\n      Object.entries(encryptedOrgKeys).forEach(([orgId, encKey]) => {\n        newOrgKeys[orgId] = encKey.key;\n      });\n      (account as any).keys.organizationKeys.encrypted = newOrgKeys;\n\n      await helper.set(userId, account);\n    }\n\n    Promise.all(accounts.map(async ({ userId, account }) => updateOrgKey(userId, account)));\n  }\n\n  // Override is necessary because default implementation assumes `stateVersion` at the root, but for this version\n  // it is nested inside a global object.\n  override async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    const global: { stateVersion: number } = (await helper.get(\"global\")) || ({} as any);\n    await helper.set(\"global\", { ...global, stateVersion: endVersion });\n  }\n}\n","import { MigrationHelper } from \"../migration-helper\";\nimport { Direction, IRREVERSIBLE, Migrator } from \"../migrator\";\n\ntype ExpectedAccountType = { keys?: { legacyEtmKey?: string } };\n\nexport class RemoveLegacyEtmKeyMigrator extends Migrator<5, 6> {\n  async migrate(helper: MigrationHelper): Promise<void> {\n    const accounts = await helper.getAccounts<ExpectedAccountType>();\n\n    async function updateAccount(userId: string, account: ExpectedAccountType) {\n      if (account?.keys?.legacyEtmKey) {\n        delete account.keys.legacyEtmKey;\n        await helper.set(userId, account);\n      }\n    }\n\n    await Promise.all(accounts.map(({ userId, account }) => updateAccount(userId, account)));\n  }\n\n  async rollback(helper: MigrationHelper): Promise<void> {\n    throw IRREVERSIBLE;\n  }\n\n  // Override is necessary because default implementation assumes `stateVersion` at the root, but for this version\n  // it is nested inside a global object.\n  override async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    const global: { stateVersion: number } = (await helper.get(\"global\")) || ({} as any);\n    await helper.set(\"global\", { ...global, stateVersion: endVersion });\n  }\n}\n","import { MigrationHelper } from \"../migration-helper\";\nimport { Direction, IRREVERSIBLE, Migrator } from \"../migrator\";\n\ntype ExpectedAccountType = { settings?: { disableAutoBiometricsPrompt?: boolean } };\n\nexport class MoveBiometricAutoPromptToAccount extends Migrator<6, 7> {\n  async migrate(helper: MigrationHelper): Promise<void> {\n    const global = await helper.get<{ noAutoPromptBiometrics?: boolean }>(\"global\");\n    const noAutoPromptBiometrics = global?.noAutoPromptBiometrics ?? false;\n\n    const accounts = await helper.getAccounts<ExpectedAccountType>();\n    async function updateAccount(userId: string, account: ExpectedAccountType) {\n      if (account == null) {\n        return;\n      }\n\n      if (noAutoPromptBiometrics) {\n        account.settings = Object.assign(account?.settings ?? {}, {\n          disableAutoBiometricsPrompt: true,\n        });\n        await helper.set(userId, account);\n      }\n    }\n\n    delete global.noAutoPromptBiometrics;\n\n    await Promise.all([\n      ...accounts.map(({ userId, account }) => updateAccount(userId, account)),\n      helper.set(\"global\", global),\n    ]);\n  }\n\n  async rollback(helper: MigrationHelper): Promise<void> {\n    throw IRREVERSIBLE;\n  }\n\n  // Override is necessary because default implementation assumes `stateVersion` at the root, but for this version\n  // it is nested inside a global object.\n  override async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    const global: { stateVersion: number } = (await helper.get(\"global\")) || ({} as any);\n    await helper.set(\"global\", { ...global, stateVersion: endVersion });\n  }\n}\n","import { JsonObject } from \"type-fest\";\n\nimport { MigrationHelper } from \"../migration-helper\";\nimport { Direction, Migrator } from \"../migrator\";\n\nexport class MoveStateVersionMigrator extends Migrator<7, 8> {\n  async migrate(helper: MigrationHelper): Promise<void> {\n    const global = await helper.get<{ stateVersion: number }>(\"global\");\n    if (global.stateVersion) {\n      await helper.set(\"stateVersion\", global.stateVersion);\n      delete global.stateVersion;\n      await helper.set(\"global\", global);\n    } else {\n      throw new Error(\"Migration failed, state version not found\");\n    }\n  }\n\n  async rollback(helper: MigrationHelper): Promise<void> {\n    const version = await helper.get<number>(\"stateVersion\");\n    const global = await helper.get<JsonObject>(\"global\");\n    await helper.set(\"global\", { ...global, stateVersion: version });\n    await helper.set(\"stateVersion\", undefined);\n  }\n\n  // Override is necessary because default implementation assumes `stateVersion` at the root, but this migration moves\n  // it from a `global` object to root.This makes for unique rollback versioning.\n  override async updateVersion(helper: MigrationHelper, direction: Direction): Promise<void> {\n    const endVersion = direction === \"up\" ? this.toVersion : this.fromVersion;\n    helper.currentVersion = endVersion;\n    if (direction === \"up\") {\n      await helper.set(\"stateVersion\", endVersion);\n    } else {\n      const global: { stateVersion: number } = (await helper.get(\"global\")) || ({} as any);\n      await helper.set(\"global\", { ...global, stateVersion: endVersion });\n    }\n  }\n}\n","import { MinVersion, MIN_VERSION } from \"../migrate\";\nimport { MigrationHelper } from \"../migration-helper\";\nimport { IRREVERSIBLE, Migrator } from \"../migrator\";\n\nexport function minVersionError(current: number) {\n  return `Your local data is too old to be migrated. Your current state version is ${current}, but minimum version is ${MIN_VERSION}.`;\n}\n\nexport class MinVersionMigrator extends Migrator<0, MinVersion> {\n  constructor() {\n    super(0, MIN_VERSION);\n  }\n\n  // Overrides the default implementation to catch any version that may be passed in.\n  override shouldMigrate(helper: MigrationHelper): Promise<boolean> {\n    return Promise.resolve(helper.currentVersion < MIN_VERSION);\n  }\n  async migrate(helper: MigrationHelper): Promise<void> {\n    if (helper.currentVersion < MIN_VERSION) {\n      throw new Error(minVersionError(helper.currentVersion));\n    }\n  }\n  async rollback(helper: MigrationHelper): Promise<void> {\n    throw IRREVERSIBLE;\n  }\n}\n","// eslint-disable-next-line import/no-restricted-paths -- Needed to print log messages\nimport { LogService } from \"../platform/abstractions/log.service\";\n// eslint-disable-next-line import/no-restricted-paths -- Needed to interface with storage locations\nimport { AbstractStorageService } from \"../platform/abstractions/storage.service\";\n\nimport { MigrationBuilder } from \"./migration-builder\";\nimport { MigrationHelper } from \"./migration-helper\";\nimport { FixPremiumMigrator } from \"./migrations/3-fix-premium\";\nimport { RemoveEverBeenUnlockedMigrator } from \"./migrations/4-remove-ever-been-unlocked\";\nimport { AddKeyTypeToOrgKeysMigrator } from \"./migrations/5-add-key-type-to-org-keys\";\nimport { RemoveLegacyEtmKeyMigrator } from \"./migrations/6-remove-legacy-etm-key\";\nimport { MoveBiometricAutoPromptToAccount } from \"./migrations/7-move-biometric-auto-prompt-to-account\";\nimport { MoveStateVersionMigrator } from \"./migrations/8-move-state-version\";\nimport { MinVersionMigrator } from \"./migrations/min-version\";\n\nexport const MIN_VERSION = 2;\nexport const CURRENT_VERSION = 8;\nexport type MinVersion = typeof MIN_VERSION;\n\nexport async function migrate(\n  storageService: AbstractStorageService,\n  logService: LogService\n): Promise<void> {\n  const migrationHelper = new MigrationHelper(\n    await currentVersion(storageService, logService),\n    storageService,\n    logService\n  );\n  if (migrationHelper.currentVersion < 0) {\n    // Cannot determine state, assuming empty so we don't repeatedly apply a migration.\n    await storageService.save(\"stateVersion\", CURRENT_VERSION);\n    return;\n  }\n  MigrationBuilder.create()\n    .with(MinVersionMigrator)\n    .with(FixPremiumMigrator, 2, 3)\n    .with(RemoveEverBeenUnlockedMigrator, 3, 4)\n    .with(AddKeyTypeToOrgKeysMigrator, 4, 5)\n    .with(RemoveLegacyEtmKeyMigrator, 5, 6)\n    .with(MoveBiometricAutoPromptToAccount, 6, 7)\n    .with(MoveStateVersionMigrator, 7, CURRENT_VERSION)\n    .migrate(migrationHelper);\n}\n\nexport async function currentVersion(\n  storageService: AbstractStorageService,\n  logService: LogService\n) {\n  let state = await storageService.get<number>(\"stateVersion\");\n  if (state == null) {\n    // Pre v8\n    state = (await storageService.get<{ stateVersion: number }>(\"global\"))?.stateVersion;\n  }\n  if (state == null) {\n    logService.info(\"No state version found, assuming empty state.\");\n    return -1;\n  }\n  logService.info(`State version: ${state}`);\n  return state;\n}\n","import { SendFileApi } from \"../api/send-file.api\";\n\nexport class SendFileData {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data?: SendFileApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.id = data.id;\n    this.fileName = data.fileName;\n    this.size = data.size;\n    this.sizeName = data.sizeName;\n  }\n}\n","import { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendTextData {\n  text: string;\n  hidden: boolean;\n\n  constructor(data?: SendTextApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.text = data.text;\n    this.hidden = data.hidden;\n  }\n}\n","import { SendType } from \"../../enums/send-type\";\nimport { SendResponse } from \"../response/send.response\";\n\nimport { SendFileData } from \"./send-file.data\";\nimport { SendTextData } from \"./send-text.data\";\n\nexport class SendData {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileData;\n  text: SendTextData;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(response?: SendResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.accessId = response.accessId;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.key = response.key;\n    this.maxAccessCount = response.maxAccessCount;\n    this.accessCount = response.accessCount;\n    this.revisionDate = response.revisionDate;\n    this.expirationDate = response.expirationDate;\n    this.deletionDate = response.deletionDate;\n    this.password = response.password;\n    this.disabled = response.disable;\n    this.hideEmail = response.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextData(response.text);\n        break;\n      case SendType.File:\n        this.file = new SendFileData(response.file);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { FolderResponse } from \"../response/folder.response\";\n\nexport class FolderData {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: FolderResponse) {\n    this.name = response.name;\n    this.id = response.id;\n    this.revisionDate = response.revisionDate;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Account } from \"./account\";\nimport { GlobalState } from \"./global-state\";\n\nexport class State<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  accounts: { [userId: string]: TAccount } = {};\n  globals: TGlobalState;\n  activeUserId: string;\n  authenticatedAccounts: string[] = [];\n  accountActivity: { [userId: string]: number } = {};\n\n  constructor(globals: TGlobalState) {\n    this.globals = globals;\n  }\n\n  // TODO, make Jsonify<State,TGlobalState,TAccount> work. It currently doesn't because Globals doesn't implement Jsonify.\n  static fromJSON<TGlobalState extends GlobalState, TAccount extends Account>(\n    obj: any,\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ): State<TGlobalState, TAccount> {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new State(null), obj, {\n      accounts: State.buildAccountMapFromJSON(obj?.accounts, accountDeserializer),\n    });\n  }\n\n  private static buildAccountMapFromJSON<TAccount extends Account>(\n    jsonAccounts: { [userId: string]: Jsonify<TAccount> },\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ) {\n    if (!jsonAccounts) {\n      return {};\n    }\n    const accounts: { [userId: string]: TAccount } = {};\n    for (const userId in jsonAccounts) {\n      accounts[userId] = accountDeserializer(jsonAccounts[userId]);\n    }\n    return accounts;\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\nimport { Jsonify, JsonValue } from \"type-fest\";\n\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../admin-console/models/domain/policy\";\nimport { AdminAuthRequestStorable } from \"../../auth/models/domain/admin-auth-req-storable\";\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../auth/models/domain/force-reset-password-reason\";\nimport { KdfConfig } from \"../../auth/models/domain/kdf-config\";\nimport { BiometricKey } from \"../../auth/types/biometric-key\";\nimport {\n  HtmlStorageLocation,\n  KdfType,\n  StorageLocation,\n  ThemeType,\n  UriMatchType,\n} from \"../../enums\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { WindowState } from \"../../models/domain/window-state\";\nimport { migrate } from \"../../state-migrations\";\nimport { GeneratorOptions } from \"../../tools/generator/generator-options\";\nimport { GeneratedPasswordHistory, PasswordGeneratorOptions } from \"../../tools/generator/password\";\nimport { UsernameGeneratorOptions } from \"../../tools/generator/username\";\nimport { SendData } from \"../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../tools/send/models/view/send.view\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { CollectionData } from \"../../vault/models/data/collection.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { LocalData } from \"../../vault/models/data/local.data\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { CollectionView } from \"../../vault/models/view/collection.view\";\nimport { AddEditCipherInfo } from \"../../vault/types/add-edit-cipher-info\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { StateService as StateServiceAbstraction } from \"../abstractions/state.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"../abstractions/storage.service\";\nimport { StateFactory } from \"../factories/state-factory\";\nimport { Utils } from \"../misc/utils\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport {\n  Account,\n  AccountData,\n  AccountDecryptionOptions,\n  AccountSettings,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { State } from \"../models/domain/state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport {\n  DeviceKey,\n  MasterKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../models/domain/symmetric-crypto-key\";\n\nconst keys = {\n  state: \"state\",\n  stateVersion: \"stateVersion\",\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  userAutoKey: \"_user_auto\",\n  userBiometricKey: \"_user_biometric\",\n\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nconst DDG_SHARED_KEY = \"DuckDuckGoSharedKey\";\n\nexport class StateService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> implements StateServiceAbstraction<TAccount>\n{\n  protected accountsSubject = new BehaviorSubject<{ [userId: string]: TAccount }>({});\n  accounts$ = this.accountsSubject.asObservable();\n\n  protected activeAccountSubject = new BehaviorSubject<string | null>(null);\n  activeAccount$ = this.activeAccountSubject.asObservable();\n\n  protected activeAccountUnlockedSubject = new BehaviorSubject<boolean>(false);\n  activeAccountUnlocked$ = this.activeAccountUnlockedSubject.asObservable();\n\n  private hasBeenInited = false;\n  private isRecoveredSession = false;\n\n  protected accountDiskCache = new BehaviorSubject<Record<string, TAccount>>({});\n\n  // default account serializer, must be overridden by child class\n  protected accountDeserializer = Account.fromJSON as (json: Jsonify<TAccount>) => TAccount;\n\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected memoryStorageService: AbstractMemoryStorageService,\n    protected logService: LogService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>,\n    protected useAccountCache: boolean = true\n  ) {\n    // If the account gets changed, verify the new account is unlocked\n    this.activeAccountSubject\n      .pipe(\n        concatMap(async (userId) => {\n          if (userId == null && this.activeAccountUnlockedSubject.getValue() == false) {\n            return;\n          } else if (userId == null) {\n            this.activeAccountUnlockedSubject.next(false);\n          }\n          // FIXME: This should be refactored into AuthService or a similar service,\n          //  as checking for the existence of the crypto key is a low level\n          //  implementation detail.\n          this.activeAccountUnlockedSubject.next((await this.getUserKey()) != null);\n        })\n      )\n      .subscribe();\n  }\n\n  async init(): Promise<void> {\n    if (this.hasBeenInited) {\n      return;\n    }\n\n    await migrate(this.storageService, this.logService);\n\n    await this.state().then(async (state) => {\n      if (state == null) {\n        await this.setState(new State<TGlobalState, TAccount>(this.createGlobals()));\n      } else {\n        this.isRecoveredSession = true;\n      }\n    });\n    await this.initAccountState();\n\n    this.hasBeenInited = true;\n  }\n\n  async initAccountState() {\n    if (this.isRecoveredSession) {\n      return;\n    }\n\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts =\n        (await this.storageService.get<string[]>(keys.authenticatedAccounts)) ?? [];\n      for (const i in state.authenticatedAccounts) {\n        if (i != null) {\n          await this.syncAccountFromDisk(state.authenticatedAccounts[i]);\n        }\n      }\n      const storedActiveUser = await this.storageService.get<string>(keys.activeUserId);\n      if (storedActiveUser != null) {\n        state.activeUserId = storedActiveUser;\n      }\n      await this.pushAccounts();\n      this.activeAccountSubject.next(state.activeUserId);\n\n      return state;\n    });\n  }\n\n  async syncAccountFromDisk(userId: string) {\n    if (userId == null) {\n      return;\n    }\n    await this.updateState(async (state) => {\n      if (state.accounts == null) {\n        state.accounts = {};\n      }\n      state.accounts[userId] = this.createAccount();\n      const diskAccount = await this.getAccountFromDisk({ userId: userId });\n      state.accounts[userId].profile = diskAccount.profile;\n      return state;\n    });\n  }\n\n  async addAccount(account: TAccount) {\n    account = await this.setAccountEnvironment(account);\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts.push(account.profile.userId);\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n      state.accounts[account.profile.userId] = account;\n      return state;\n    });\n    await this.scaffoldNewAccountStorage(account);\n    await this.setLastActive(new Date().getTime(), { userId: account.profile.userId });\n    await this.setActiveUser(account.profile.userId);\n    this.activeAccountSubject.next(account.profile.userId);\n  }\n\n  async setActiveUser(userId: string): Promise<void> {\n    this.clearDecryptedDataForActiveUser();\n    await this.updateState(async (state) => {\n      state.activeUserId = userId;\n      await this.storageService.save(keys.activeUserId, userId);\n      this.activeAccountSubject.next(state.activeUserId);\n      return state;\n    });\n\n    await this.pushAccounts();\n  }\n\n  async clean(options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultInMemoryOptions());\n    await this.deAuthenticateAccount(options.userId);\n    if (options.userId === (await this.state())?.activeUserId) {\n      await this.dynamicallySetActiveUser();\n    }\n\n    await this.removeAccountFromDisk(options?.userId);\n    this.removeAccountFromMemory(options?.userId);\n    await this.pushAccounts();\n  }\n\n  async getAccessToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.accessToken;\n  }\n\n  async setAccessToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.accessToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAddEditCipherInfo(options?: StorageOptions): Promise<AddEditCipherInfo> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.addEditCipherInfo;\n  }\n\n  async setAddEditCipherInfo(value: AddEditCipherInfo, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.addEditCipherInfo = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getAlwaysShowDock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.alwaysShowDock ?? false\n    );\n  }\n\n  async setAlwaysShowDock(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.alwaysShowDock = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getApiKeyClientId(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.profile?.apiKeyClientId;\n  }\n\n  async setApiKeyClientId(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.profile.apiKeyClientId = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getApiKeyClientSecret(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.keys?.apiKeyClientSecret;\n  }\n\n  async setApiKeyClientSecret(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.keys.apiKeyClientSecret = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAutoConfirmFingerPrints(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoConfirmFingerPrints ?? false\n    );\n  }\n\n  async setAutoConfirmFingerprints(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoConfirmFingerPrints = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getAutoFillOnPageLoadDefault(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoFillOnPageLoadDefault ?? true\n    );\n  }\n\n  async setAutoFillOnPageLoadDefault(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoFillOnPageLoadDefault = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricAwaitingAcceptance(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricAwaitingAcceptance ?? false\n    );\n  }\n\n  async setBiometricAwaitingAcceptance(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricAwaitingAcceptance = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricFingerprintValidated(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricFingerprintValidated ?? false\n    );\n  }\n\n  async setBiometricFingerprintValidated(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricFingerprintValidated = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.biometricText;\n  }\n\n  async setBiometricText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricUnlock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.biometricUnlock ?? false\n    );\n  }\n\n  async setBiometricUnlock(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.biometricUnlock = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getCanAccessPremium(options?: StorageOptions): Promise<boolean> {\n    if (!(await this.getIsAuthenticated(options))) {\n      return false;\n    }\n\n    return (\n      (await this.getHasPremiumPersonally(options)) ||\n      (await this.getHasPremiumFromOrganization(options))\n    );\n  }\n\n  async getHasPremiumPersonally(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.profile?.hasPremiumPersonally;\n  }\n\n  async setHasPremiumPersonally(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumPersonally = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getHasPremiumFromOrganization(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    if (account.profile?.hasPremiumFromOrganization) {\n      return true;\n    }\n\n    // TODO: older server versions won't send the hasPremiumFromOrganization flag, so we're keeping the old logic\n    // for backwards compatibility. It can be removed after everyone has upgraded.\n    const organizations = await this.getOrganizations(options);\n    if (organizations == null) {\n      return false;\n    }\n\n    for (const id of Object.keys(organizations)) {\n      const o = organizations[id];\n      if (o.enabled && o.usersGetPremium && !o.isProviderUser) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async setHasPremiumFromOrganization(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumFromOrganization = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getClearClipboard(options?: StorageOptions): Promise<number> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.clearClipboard ?? null\n    );\n  }\n\n  async setClearClipboard(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.clearClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getCollapsedGroupings(options?: StorageOptions): Promise<string[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.collapsedGroupings;\n  }\n\n  async setCollapsedGroupings(value: string[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.collapsedGroupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getConvertAccountToKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.convertAccountToKeyConnector;\n  }\n\n  async setConvertAccountToKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.convertAccountToKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  /**\n   * @deprecated Do not save the Master Key. Use the User Symmetric Key instead\n   */\n  async getCryptoMasterKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoMasterKey;\n  }\n\n  /**\n   * @deprecated Do not save the Master Key. Use the User Symmetric Key instead\n   */\n  async setCryptoMasterKey(value: SymmetricCryptoKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoMasterKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n\n    if (options.userId == this.activeAccountSubject.getValue()) {\n      const nextValue = value != null;\n\n      // Avoid emitting if we are already unlocked\n      if (this.activeAccountUnlockedSubject.getValue() != nextValue) {\n        this.activeAccountUnlockedSubject.next(nextValue);\n      }\n    }\n  }\n\n  /**\n   * user key used to encrypt/decrypt data\n   */\n  async getUserKey(options?: StorageOptions): Promise<UserKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.userKey as UserKey;\n  }\n\n  /**\n   * user key used to encrypt/decrypt data\n   */\n  async setUserKey(value: UserKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.userKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n\n    if (options?.userId == this.activeAccountSubject.getValue()) {\n      const nextValue = value != null;\n\n      // Avoid emitting if we are already unlocked\n      if (this.activeAccountUnlockedSubject.getValue() != nextValue) {\n        this.activeAccountUnlockedSubject.next(nextValue);\n      }\n    }\n  }\n\n  /**\n   * User's master key derived from MP, saved only if we decrypted with MP\n   */\n  async getMasterKey(options?: StorageOptions): Promise<MasterKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.masterKey;\n  }\n\n  /**\n   * User's master key derived from MP, saved only if we decrypted with MP\n   */\n  async setMasterKey(value: MasterKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.masterKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * The master key encrypted User symmetric key, saved on every auth\n   * so we can unlock with MP offline\n   */\n  async getMasterKeyEncryptedUserKey(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys.masterKeyEncryptedUserKey;\n  }\n\n  /**\n   * The master key encrypted User symmetric key, saved on every auth\n   * so we can unlock with MP offline\n   */\n  async setMasterKeyEncryptedUserKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.masterKeyEncryptedUserKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  /**\n   * user key when using the \"never\" option of vault timeout\n   */\n  async getUserKeyAutoUnlock(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.userAutoKey}`,\n      options\n    );\n  }\n\n  /**\n   * user key when using the \"never\" option of vault timeout\n   */\n  async setUserKeyAutoUnlock(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.userAutoKey, value, options);\n  }\n\n  /**\n   * User's encrypted symmetric key when using biometrics\n   */\n  async getUserKeyBiometric(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.userBiometricKey}`,\n      options\n    );\n  }\n\n  async hasUserKeyBiometric(options?: StorageOptions): Promise<boolean> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return false;\n    }\n    return await this.secureStorageService.has(\n      `${options.userId}${partialKeys.userBiometricKey}`,\n      options\n    );\n  }\n\n  async setUserKeyBiometric(value: BiometricKey, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.userBiometricKey, value, options);\n  }\n\n  async getPinKeyEncryptedUserKey(options?: StorageOptions): Promise<EncString> {\n    return EncString.fromJSON(\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.pinKeyEncryptedUserKey\n    );\n  }\n\n  async setPinKeyEncryptedUserKey(value: EncString, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.pinKeyEncryptedUserKey = value?.encryptedString;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPinKeyEncryptedUserKeyEphemeral(options?: StorageOptions): Promise<EncString> {\n    return EncString.fromJSON(\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.settings?.pinKeyEncryptedUserKeyEphemeral\n    );\n  }\n\n  async setPinKeyEncryptedUserKeyEphemeral(\n    value: EncString,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.settings.pinKeyEncryptedUserKeyEphemeral = value?.encryptedString;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyAuto instead\n   */\n  async getCryptoMasterKeyAuto(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.autoKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyAuto instead\n   */\n  async setCryptoMasterKeyAuto(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.autoKey, value, options);\n  }\n\n  /**\n   * @deprecated I don't see where this is even used\n   */\n  async getCryptoMasterKeyB64(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options?.userId}${partialKeys.masterKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated I don't see where this is even used\n   */\n  async setCryptoMasterKeyB64(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.masterKey, value, options);\n  }\n\n  /**\n   * @deprecated Use UserKeyBiometric instead\n   */\n  async getCryptoMasterKeyBiometric(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyBiometric instead\n   */\n  async hasCryptoMasterKeyBiometric(options?: StorageOptions): Promise<boolean> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return false;\n    }\n    return await this.secureStorageService.has(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  /**\n   * @deprecated Use UserKeyBiometric instead\n   */\n  async setCryptoMasterKeyBiometric(value: BiometricKey, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.biometricKey, value, options);\n  }\n\n  @withPrototypeForArrayMembers(CipherView, CipherView.fromJSON)\n  async getDecryptedCiphers(options?: StorageOptions): Promise<CipherView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.ciphers?.decrypted;\n  }\n\n  async setDecryptedCiphers(value: CipherView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.ciphers.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(CollectionView)\n  async getDecryptedCollections(options?: StorageOptions): Promise<CollectionView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.collections?.decrypted;\n  }\n\n  async setDecryptedCollections(value: CollectionView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.collections.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async getDecryptedCryptoSymmetricKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoSymmetricKey?.decrypted;\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async setDecryptedCryptoSymmetricKey(\n    value: SymmetricCryptoKey,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoSymmetricKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.organizationKeys?.decrypted);\n  }\n\n  async setDecryptedOrganizationKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.organizationKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getDecryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.passwordGenerationHistory?.decrypted;\n  }\n\n  async setDecryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.passwordGenerationHistory.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use getPinKeyEncryptedUserKeyEphemeral instead\n   */\n  async getDecryptedPinProtected(options?: StorageOptions): Promise<EncString> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.settings?.pinProtected?.decrypted;\n  }\n\n  /**\n   * @deprecated Use setPinKeyEncryptedUserKeyEphemeral instead\n   */\n  async setDecryptedPinProtected(value: EncString, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.settings.pinProtected.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(Policy)\n  async getDecryptedPolicies(options?: StorageOptions): Promise<Policy[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.policies?.decrypted;\n  }\n\n  async setDecryptedPolicies(value: Policy[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.policies.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedPrivateKey(options?: StorageOptions): Promise<Uint8Array> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys?.privateKey.decrypted;\n  }\n\n  async setDecryptedPrivateKey(value: Uint8Array, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.privateKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedProviderKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.providerKeys?.decrypted);\n  }\n\n  async setDecryptedProviderKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.providerKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(SendView)\n  async getDecryptedSends(options?: StorageOptions): Promise<SendView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.sends?.decrypted;\n  }\n\n  async setDecryptedSends(value: SendView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.sends.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDefaultUriMatch(options?: StorageOptions): Promise<UriMatchType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.defaultUriMatch;\n  }\n\n  async setDefaultUriMatch(value: UriMatchType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.defaultUriMatch = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAddLoginNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAddLoginNotification ?? false\n    );\n  }\n\n  async setDisableAddLoginNotification(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAddLoginNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoBiometricsPrompt(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoBiometricsPrompt ?? false\n    );\n  }\n\n  async setDisableAutoBiometricsPrompt(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoBiometricsPrompt = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoTotpCopy(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoTotpCopy ?? false\n    );\n  }\n\n  async setDisableAutoTotpCopy(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoTotpCopy = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableBadgeCounter(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableBadgeCounter ?? false\n    );\n  }\n\n  async setDisableBadgeCounter(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableBadgeCounter = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableChangedPasswordNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableChangedPasswordNotification ?? false\n    );\n  }\n\n  async setDisableChangedPasswordNotification(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableChangedPasswordNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableContextMenuItem(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableContextMenuItem ?? false\n    );\n  }\n\n  async setDisableContextMenuItem(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableContextMenuItem = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableFavicon(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getGlobals(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.disableFavicon ?? false\n    );\n  }\n\n  async setDisableFavicon(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.disableFavicon = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getDisableGa(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableGa ?? false\n    );\n  }\n\n  async setDisableGa(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableGa = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDismissedAutofillCallout(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dismissedAutoFillOnPageLoadCallout ?? false\n    );\n  }\n\n  async setDismissedAutofillCallout(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dismissedAutoFillOnPageLoadCallout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowCardsCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowCardsCurrentTab ?? false\n    );\n  }\n\n  async setDontShowCardsCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowCardsCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowIdentitiesCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowIdentitiesCurrentTab ?? false\n    );\n  }\n\n  async setDontShowIdentitiesCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowIdentitiesCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDuckDuckGoSharedKey(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(DDG_SHARED_KEY, options);\n  }\n\n  async setDuckDuckGoSharedKey(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    value == null\n      ? await this.secureStorageService.remove(DDG_SHARED_KEY, options)\n      : await this.secureStorageService.save(DDG_SHARED_KEY, value, options);\n  }\n\n  async getDeviceKey(options?: StorageOptions): Promise<DeviceKey | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    const existingDeviceKey = account?.keys?.deviceKey;\n\n    // Must manually instantiate the SymmetricCryptoKey class from the JSON object\n    if (existingDeviceKey != null) {\n      return SymmetricCryptoKey.fromJSON(existingDeviceKey) as DeviceKey;\n    } else {\n      return null;\n    }\n  }\n\n  async setDeviceKey(value: DeviceKey | null, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.keys.deviceKey = value?.toJSON() ?? null;\n\n    await this.saveAccount(account, options);\n  }\n\n  async getAdminAuthRequest(options?: StorageOptions): Promise<AdminAuthRequestStorable | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    return account?.adminAuthRequest\n      ? AdminAuthRequestStorable.fromJSON(account.adminAuthRequest)\n      : null;\n  }\n\n  async setAdminAuthRequest(\n    adminAuthRequest: AdminAuthRequestStorable,\n    options?: StorageOptions\n  ): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.adminAuthRequest = adminAuthRequest?.toJSON();\n\n    await this.saveAccount(account, options);\n  }\n\n  async getShouldTrustDevice(options?: StorageOptions): Promise<boolean | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    return account?.settings?.trustDeviceChoiceForDecryption ?? null;\n  }\n\n  async setShouldTrustDevice(value: boolean, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.settings.trustDeviceChoiceForDecryption = value;\n\n    await this.saveAccount(account, options);\n  }\n\n  async getAccountDecryptionOptions(\n    options?: StorageOptions\n  ): Promise<AccountDecryptionOptions | null> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return null;\n    }\n\n    const account = await this.getAccount(options);\n\n    return account?.decryptionOptions as AccountDecryptionOptions;\n  }\n\n  async setAccountDecryptionOptions(\n    value: AccountDecryptionOptions,\n    options?: StorageOptions\n  ): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskLocalOptions());\n\n    if (options?.userId == null) {\n      return;\n    }\n\n    const account = await this.getAccount(options);\n\n    account.decryptionOptions = value;\n\n    await this.saveAccount(account, options);\n  }\n\n  async getEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.profile?.email;\n  }\n\n  async setEmail(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.email = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getEmailVerified(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.profile.emailVerified ?? false\n    );\n  }\n\n  async setEmailVerified(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.emailVerified = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAlwaysOnTop(options?: StorageOptions): Promise<boolean> {\n    const accountPreference = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.enableAlwaysOnTop;\n    const globalPreference = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.enableAlwaysOnTop;\n    return accountPreference ?? globalPreference ?? false;\n  }\n\n  async setEnableAlwaysOnTop(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAlwaysOnTop = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableAlwaysOnTop = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAutoFillOnPageLoad(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.enableAutoFillOnPageLoad ?? false\n    );\n  }\n\n  async setEnableAutoFillOnPageLoad(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAutoFillOnPageLoad = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableBrowserIntegration(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegrationFingerprint(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegrationFingerprint ?? false\n    );\n  }\n\n  async setEnableBrowserIntegrationFingerprint(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegrationFingerprint = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableCloseToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableCloseToTray ?? false\n    );\n  }\n\n  async setEnableCloseToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableCloseToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableDuckDuckGoBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableDuckDuckGoBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableDuckDuckGoBrowserIntegration(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableDuckDuckGoBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableFullWidth(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.enableFullWidth ?? false\n    );\n  }\n\n  async setEnableFullWidth(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.enableFullWidth = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnableMinimizeToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableMinimizeToTray ?? false\n    );\n  }\n\n  async setEnableMinimizeToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableMinimizeToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableStartToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableStartToTray ?? false\n    );\n  }\n\n  async setEnableStartToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableStartToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableTray ?? false\n    );\n  }\n\n  async setEnableTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CipherData)\n  async getEncryptedCiphers(options?: StorageOptions): Promise<{ [id: string]: CipherData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.ciphers?.encrypted;\n  }\n\n  async setEncryptedCiphers(\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.ciphers.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CollectionData)\n  async getEncryptedCollections(\n    options?: StorageOptions\n  ): Promise<{ [id: string]: CollectionData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.collections?.encrypted;\n  }\n\n  async setEncryptedCollections(\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.collections.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async getEncryptedCryptoSymmetricKey(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys.cryptoSymmetricKey.encrypted;\n  }\n\n  /**\n   * @deprecated Use UserKey instead\n   */\n  async setEncryptedCryptoSymmetricKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.cryptoSymmetricKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(FolderData)\n  async getEncryptedFolders(options?: StorageOptions): Promise<{ [id: string]: FolderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.folders?.encrypted;\n  }\n\n  async setEncryptedFolders(\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.folders.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEncryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<{ [orgId: string]: EncryptedOrganizationKeyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.organizationKeys.encrypted;\n  }\n\n  async setEncryptedOrganizationKeys(\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.organizationKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getEncryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.passwordGenerationHistory?.encrypted;\n  }\n\n  async setEncryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.passwordGenerationHistory.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPinProtected(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.pinProtected?.encrypted;\n  }\n\n  async setEncryptedPinProtected(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.pinProtected.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(PolicyData)\n  async getEncryptedPolicies(options?: StorageOptions): Promise<{ [id: string]: PolicyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.policies?.encrypted;\n  }\n\n  async setEncryptedPolicies(\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.policies.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPrivateKey(options?: StorageOptions): Promise<string> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.keys?.privateKey?.encrypted;\n  }\n\n  async setEncryptedPrivateKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.privateKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedProviderKeys(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.providerKeys?.encrypted;\n  }\n\n  async setEncryptedProviderKeys(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.providerKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(SendData)\n  async getEncryptedSends(options?: StorageOptions): Promise<{ [id: string]: SendData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.sends.encrypted;\n  }\n\n  async setEncryptedSends(\n    value: { [id: string]: SendData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.sends.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEntityId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityId;\n  }\n\n  async setEntityId(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityId = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEntityType(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityType;\n  }\n\n  async setEntityType(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    if ((await this.state())?.activeUserId == null) {\n      return await this.getGlobalEnvironmentUrls(options);\n    }\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getAccount(options))?.settings?.environmentUrls ?? new EnvironmentUrls();\n  }\n\n  async setEnvironmentUrls(value: EnvironmentUrls, options?: StorageOptions): Promise<void> {\n    // Global values are set on each change and the current global settings are passed to any newly authed accounts.\n    // This is to allow setting environment values before an account is active, while still allowing individual accounts to have their own environments.\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.environmentUrls = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getRegion(options?: StorageOptions): Promise<string> {\n    if ((await this.state())?.activeUserId == null) {\n      options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n      return (await this.getGlobals(options)).region ?? null;\n    }\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getAccount(options))?.settings?.region ?? null;\n  }\n\n  async setRegion(value: string, options?: StorageOptions): Promise<void> {\n    // Global values are set on each change and the current global settings are passed to any newly authed accounts.\n    // This is to allow setting region values before an account is active, while still allowing individual accounts to have their own region.\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.region = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEquivalentDomains(options?: StorageOptions): Promise<string[][]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.equivalentDomains;\n  }\n\n  async setEquivalentDomains(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.equivalentDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(EventData)\n  async getEventCollection(options?: StorageOptions): Promise<EventData[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.eventCollection;\n  }\n\n  async setEventCollection(value: EventData[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.eventCollection = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEverHadUserKey(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.profile?.everHadUserKey ?? false\n    );\n  }\n\n  async setEverHadUserKey(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.everHadUserKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEverBeenUnlocked(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.profile?.everBeenUnlocked ?? false\n    );\n  }\n\n  async setEverBeenUnlocked(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.everBeenUnlocked = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getForcePasswordResetReason(options?: StorageOptions): Promise<ForceResetPasswordReason> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n        )\n      )?.profile?.forcePasswordResetReason ?? ForceResetPasswordReason.None\n    );\n  }\n\n  async setForcePasswordResetReason(\n    value: ForceResetPasswordReason,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.forcePasswordResetReason = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getInstalledVersion(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.installedVersion;\n  }\n\n  async setInstalledVersion(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.installedVersion = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    return (await this.getAccessToken(options)) != null && (await this.getUserId(options)) != null;\n  }\n\n  async getKdfConfig(options?: StorageOptions): Promise<KdfConfig> {\n    const iterations = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfIterations;\n    const memory = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfMemory;\n    const parallelism = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfParallelism;\n    return new KdfConfig(iterations, memory, parallelism);\n  }\n\n  async setKdfConfig(config: KdfConfig, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfIterations = config.iterations;\n    account.profile.kdfMemory = config.memory;\n    account.profile.kdfParallelism = config.parallelism;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKdfType(options?: StorageOptions): Promise<KdfType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfType;\n  }\n\n  async setKdfType(value: KdfType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKeyHash(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.keyHash;\n  }\n\n  async setKeyHash(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.keyHash = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getLastActive(options?: StorageOptions): Promise<number> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n\n    const accountActivity = await this.storageService.get<{ [userId: string]: number }>(\n      keys.accountActivity,\n      options\n    );\n\n    if (accountActivity == null || Object.keys(accountActivity).length < 1) {\n      return null;\n    }\n\n    return accountActivity[options.userId];\n  }\n\n  async setLastActive(value: number, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    if (options.userId == null) {\n      return;\n    }\n    const accountActivity =\n      (await this.storageService.get<{ [userId: string]: number }>(\n        keys.accountActivity,\n        options\n      )) ?? {};\n    accountActivity[options.userId] = value;\n    await this.storageService.save(keys.accountActivity, accountActivity, options);\n  }\n\n  async getLastSync(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.profile?.lastSync;\n  }\n\n  async setLastSync(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.lastSync = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getLocalData(options?: StorageOptions): Promise<{ [cipherId: string]: LocalData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.data?.localData;\n  }\n\n  async setLocalData(\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.data.localData = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getLocale(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.locale;\n  }\n\n  async setLocale(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.locale = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getMainWindowSize(options?: StorageOptions): Promise<number> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.mainWindowSize;\n  }\n\n  async setMainWindowSize(value: number, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.mainWindowSize = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getMinimizeOnCopyToClipboard(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.minimizeOnCopyToClipboard ?? false\n    );\n  }\n\n  async setMinimizeOnCopyToClipboard(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.minimizeOnCopyToClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNeverDomains(options?: StorageOptions): Promise<{ [id: string]: any }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.neverDomains;\n  }\n\n  async setNeverDomains(value: { [id: string]: any }, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.neverDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNoAutoPromptBiometricsText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.noAutoPromptBiometricsText;\n  }\n\n  async setNoAutoPromptBiometricsText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.noAutoPromptBiometricsText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOpenAtLogin(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.openAtLogin ?? false\n    );\n  }\n\n  async setOpenAtLogin(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.openAtLogin = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOrganizationInvitation(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.organizationInvitation;\n  }\n\n  async setOrganizationInvitation(value: any, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.organizationInvitation = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getEmergencyAccessInvitation(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.emergencyAccessInvitation;\n  }\n\n  async setEmergencyAccessInvitation(value: any, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.emergencyAccessInvitation = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async getOrganizations(options?: StorageOptions): Promise<{ [id: string]: OrganizationData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.organizations;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async setOrganizations(\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.organizations = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPasswordGenerationOptions(options?: StorageOptions): Promise<PasswordGeneratorOptions> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.passwordGenerationOptions;\n  }\n\n  async setPasswordGenerationOptions(\n    value: PasswordGeneratorOptions,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.passwordGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUsernameGenerationOptions(options?: StorageOptions): Promise<UsernameGeneratorOptions> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.usernameGenerationOptions;\n  }\n\n  async setUsernameGenerationOptions(\n    value: UsernameGeneratorOptions,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.usernameGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getGeneratorOptions(options?: StorageOptions): Promise<GeneratorOptions> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.generatorOptions;\n  }\n\n  async setGeneratorOptions(value: GeneratorOptions, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.generatorOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getProtectedPin(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.protectedPin;\n  }\n\n  async setProtectedPin(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.protectedPin = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(ProviderData)\n  async getProviders(options?: StorageOptions): Promise<{ [id: string]: ProviderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.providers;\n  }\n\n  async setProviders(\n    value: { [id: string]: ProviderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.providers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPublicKey(options?: StorageOptions): Promise<Uint8Array> {\n    const keys = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys;\n    return keys?.publicKey;\n  }\n\n  async setPublicKey(value: Uint8Array, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.publicKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getRefreshToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.refreshToken;\n  }\n\n  async setRefreshToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.refreshToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getRememberedEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.rememberedEmail;\n  }\n\n  async setRememberedEmail(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.rememberedEmail = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSecurityStamp(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.tokens?.securityStamp;\n  }\n\n  async setSecurityStamp(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.tokens.securityStamp = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getSettings(options?: StorageOptions): Promise<AccountSettingsSettings> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.settings?.settings;\n  }\n\n  async setSettings(value: AccountSettingsSettings, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.settings.settings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getSsoCodeVerifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoCodeVerifier;\n  }\n\n  async setSsoCodeVerifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoCodeVerifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getSsoOrgIdentifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.ssoOrganizationIdentifier;\n  }\n\n  async setSsoOrganizationIdentifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.ssoOrganizationIdentifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSsoState(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoState;\n  }\n\n  async setSsoState(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoState = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getUserSsoOrganizationIdentifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.loginState?.ssoOrganizationIdentifier;\n  }\n\n  async setUserSsoOrganizationIdentifier(\n    value: string | null,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.loginState.ssoOrganizationIdentifier = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getTheme(options?: StorageOptions): Promise<ThemeType> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.theme;\n  }\n\n  async setTheme(value: ThemeType, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.theme = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getTwoFactorToken(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.twoFactorToken;\n  }\n\n  async setTwoFactorToken(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.twoFactorToken = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUserId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.userId;\n  }\n\n  async getUsesKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.usesKeyConnector;\n  }\n\n  async setUsesKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.usesKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getVaultTimeout(options?: StorageOptions): Promise<number> {\n    const accountVaultTimeout = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeout;\n    return accountVaultTimeout;\n  }\n\n  async setVaultTimeout(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getVaultTimeoutAction(options?: StorageOptions): Promise<string> {\n    const accountVaultTimeoutAction = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeoutAction;\n    const globalVaultTimeoutAction = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.vaultTimeoutAction;\n    return accountVaultTimeoutAction ?? globalVaultTimeoutAction;\n  }\n\n  async setVaultTimeoutAction(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeoutAction = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getApproveLoginRequests(options?: StorageOptions): Promise<boolean> {\n    const approveLoginRequests = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.approveLoginRequests;\n    return approveLoginRequests;\n  }\n\n  async setApproveLoginRequests(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.approveLoginRequests = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getWindow(): Promise<WindowState> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    return globals?.window != null && Object.keys(globals.window).length > 0\n      ? globals.window\n      : new WindowState();\n  }\n\n  async setWindow(value: WindowState, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.window = value;\n    return await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async setServerConfig(value: ServerConfigData, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.serverConfig = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getServerConfig(options: StorageOptions): Promise<ServerConfigData> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.serverConfig;\n  }\n\n  async getAvatarColor(options?: StorageOptions): Promise<string | null | undefined> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.avatarColor;\n  }\n\n  async setAvatarColor(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.avatarColor = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getActivateAutoFillOnPageLoadFromPolicy(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.activateAutoFillOnPageLoadFromPolicy;\n  }\n\n  async setActivateAutoFillOnPageLoadFromPolicy(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.activateAutoFillOnPageLoadFromPolicy = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSMOnboardingTasks(\n    options?: StorageOptions\n  ): Promise<Record<string, Record<string, boolean>>> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.smOnboardingTasks;\n  }\n\n  async setSMOnboardingTasks(\n    value: Record<string, Record<string, boolean>>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.smOnboardingTasks = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async getGlobals(options: StorageOptions): Promise<TGlobalState> {\n    let globals: TGlobalState;\n    if (this.useMemory(options.storageLocation)) {\n      globals = await this.getGlobalsFromMemory();\n    }\n\n    if (this.useDisk && globals == null) {\n      globals = await this.getGlobalsFromDisk(options);\n    }\n\n    if (globals == null) {\n      globals = this.createGlobals();\n    }\n\n    return globals;\n  }\n\n  protected async saveGlobals(globals: TGlobalState, options: StorageOptions) {\n    return this.useMemory(options.storageLocation)\n      ? this.saveGlobalsToMemory(globals)\n      : await this.saveGlobalsToDisk(globals, options);\n  }\n\n  protected async getGlobalsFromMemory(): Promise<TGlobalState> {\n    return (await this.state()).globals;\n  }\n\n  protected async getGlobalsFromDisk(options: StorageOptions): Promise<TGlobalState> {\n    return await this.storageService.get<TGlobalState>(keys.global, options);\n  }\n\n  protected async saveGlobalsToMemory(globals: TGlobalState): Promise<void> {\n    await this.updateState(async (state) => {\n      state.globals = globals;\n      return state;\n    });\n  }\n\n  protected async saveGlobalsToDisk(globals: TGlobalState, options: StorageOptions): Promise<void> {\n    if (options.useSecureStorage) {\n      await this.secureStorageService.save(keys.global, globals, options);\n    } else {\n      await this.storageService.save(keys.global, globals, options);\n    }\n  }\n\n  protected async getAccount(options: StorageOptions): Promise<TAccount> {\n    try {\n      let account: TAccount;\n      if (this.useMemory(options.storageLocation)) {\n        account = await this.getAccountFromMemory(options);\n      }\n\n      if (this.useDisk(options.storageLocation) && account == null) {\n        account = await this.getAccountFromDisk(options);\n      }\n\n      return account;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected async getAccountFromMemory(options: StorageOptions): Promise<TAccount> {\n    return await this.state().then(async (state) => {\n      if (state.accounts == null) {\n        return null;\n      }\n      return state.accounts[await this.getUserIdFromMemory(options)];\n    });\n  }\n\n  protected async getUserIdFromMemory(options: StorageOptions): Promise<string> {\n    return await this.state().then((state) => {\n      return options?.userId != null\n        ? state.accounts[options.userId]?.profile?.userId\n        : state.activeUserId;\n    });\n  }\n\n  protected async getAccountFromDisk(options: StorageOptions): Promise<TAccount> {\n    if (options?.userId == null && (await this.state())?.activeUserId == null) {\n      return null;\n    }\n\n    if (this.useAccountCache) {\n      const cachedAccount = this.accountDiskCache.value[options.userId];\n      if (cachedAccount != null) {\n        return cachedAccount;\n      }\n    }\n\n    const account = options?.useSecureStorage\n      ? (await this.secureStorageService.get<TAccount>(options.userId, options)) ??\n        (await this.storageService.get<TAccount>(\n          options.userId,\n          this.reconcileOptions(options, { htmlStorageLocation: HtmlStorageLocation.Local })\n        ))\n      : await this.storageService.get<TAccount>(options.userId, options);\n\n    this.setDiskCache(options.userId, account);\n    return account;\n  }\n\n  protected useMemory(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Memory || storageLocation === StorageLocation.Both;\n  }\n\n  protected useDisk(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Disk || storageLocation === StorageLocation.Both;\n  }\n\n  protected async saveAccount(\n    account: TAccount,\n    options: StorageOptions = {\n      storageLocation: StorageLocation.Both,\n      useSecureStorage: false,\n    }\n  ) {\n    return this.useMemory(options.storageLocation)\n      ? await this.saveAccountToMemory(account)\n      : await this.saveAccountToDisk(account, options);\n  }\n\n  protected async saveAccountToDisk(account: TAccount, options: StorageOptions): Promise<void> {\n    const storageLocation = options.useSecureStorage\n      ? this.secureStorageService\n      : this.storageService;\n\n    await storageLocation.save(`${options.userId}`, account, options);\n\n    this.deleteDiskCache(options.userId);\n  }\n\n  protected async saveAccountToMemory(account: TAccount): Promise<void> {\n    if (this.getAccountFromMemory({ userId: account.profile.userId }) !== null) {\n      await this.updateState((state) => {\n        return new Promise((resolve) => {\n          state.accounts[account.profile.userId] = account;\n          resolve(state);\n        });\n      });\n    }\n    await this.pushAccounts();\n  }\n\n  protected async scaffoldNewAccountStorage(account: TAccount): Promise<void> {\n    // We don't want to manipulate the referenced in memory account\n    const deepClone = JSON.parse(JSON.stringify(account));\n    await this.scaffoldNewAccountLocalStorage(deepClone);\n    await this.scaffoldNewAccountSessionStorage(deepClone);\n    await this.scaffoldNewAccountMemoryStorage(deepClone);\n  }\n\n  // TODO: There is a tech debt item for splitting up these methods - only Web uses multiple storage locations in its storageService.\n  // For now these methods exist with some redundancy to facilitate this special web requirement.\n  protected async scaffoldNewAccountLocalStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n    // EnvironmentUrls and region are set before authenticating and should override whatever is stored from any previous session\n    const environmentUrls = account.settings.environmentUrls;\n    const region = account.settings.region;\n    if (storedAccount?.settings != null) {\n      account.settings = storedAccount.settings;\n    } else if (await this.storageService.has(keys.tempAccountSettings)) {\n      account.settings = await this.storageService.get<AccountSettings>(keys.tempAccountSettings);\n      await this.storageService.remove(keys.tempAccountSettings);\n    }\n    account.settings.environmentUrls = environmentUrls;\n    account.settings.region = region;\n\n    if (\n      account.settings.vaultTimeoutAction === VaultTimeoutAction.LogOut &&\n      account.settings.vaultTimeout != null\n    ) {\n      account.tokens.accessToken = null;\n      account.tokens.refreshToken = null;\n      account.profile.apiKeyClientId = null;\n      account.keys.apiKeyClientSecret = null;\n    }\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountMemoryStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      storedAccount.settings.region = account.settings.region;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountSessionStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      storedAccount.settings.region = account.settings.region;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n  }\n  //\n\n  protected async pushAccounts(): Promise<void> {\n    await this.pruneInMemoryAccounts();\n    await this.state().then((state) => {\n      if (state.accounts == null || Object.keys(state.accounts).length < 1) {\n        this.accountsSubject.next({});\n        return;\n      }\n\n      this.accountsSubject.next(state.accounts);\n    });\n  }\n\n  protected reconcileOptions(\n    requestedOptions: StorageOptions,\n    defaultOptions: StorageOptions\n  ): StorageOptions {\n    if (requestedOptions == null) {\n      return defaultOptions;\n    }\n    requestedOptions.userId = requestedOptions?.userId ?? defaultOptions.userId;\n    requestedOptions.storageLocation =\n      requestedOptions?.storageLocation ?? defaultOptions.storageLocation;\n    requestedOptions.useSecureStorage =\n      requestedOptions?.useSecureStorage ?? defaultOptions.useSecureStorage;\n    requestedOptions.htmlStorageLocation =\n      requestedOptions?.htmlStorageLocation ?? defaultOptions.htmlStorageLocation;\n    requestedOptions.keySuffix = requestedOptions?.keySuffix ?? defaultOptions.keySuffix;\n    return requestedOptions;\n  }\n\n  protected async defaultInMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Memory,\n      userId: (await this.state()).activeUserId,\n    };\n  }\n\n  protected async defaultOnDiskOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Session,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskLocalOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Local,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Memory,\n      userId: (await this.state())?.activeUserId ?? (await this.getUserId()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultSecureStorageOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      useSecureStorage: true,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n    };\n  }\n\n  protected async getActiveUserIdFromStorage(): Promise<string> {\n    return await this.storageService.get<string>(keys.activeUserId);\n  }\n\n  protected async removeAccountFromLocalStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async removeAccountFromSessionStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n  }\n\n  protected async removeAccountFromSecureStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    await this.setUserKeyAutoUnlock(null, { userId: userId });\n    await this.setUserKeyBiometric(null, { userId: userId });\n    await this.setCryptoMasterKeyAuto(null, { userId: userId });\n    await this.setCryptoMasterKeyBiometric(null, { userId: userId });\n    await this.setCryptoMasterKeyB64(null, { userId: userId });\n  }\n\n  protected async removeAccountFromMemory(userId: string = null): Promise<void> {\n    await this.updateState(async (state) => {\n      userId = userId ?? state.activeUserId;\n      delete state.accounts[userId];\n\n      this.deleteDiskCache(userId);\n\n      return state;\n    });\n  }\n\n  protected async pruneInMemoryAccounts() {\n    // We preserve settings for logged out accounts, but we don't want to consider them when thinking about active account state\n    for (const userId in (await this.state())?.accounts) {\n      if (!(await this.getIsAuthenticated({ userId: userId }))) {\n        await this.removeAccountFromMemory(userId);\n      }\n    }\n  }\n\n  // settings persist even on reset, and are not affected by this method\n  protected resetAccount(account: TAccount) {\n    const persistentAccountInformation = {\n      settings: account.settings,\n      keys: { deviceKey: account.keys.deviceKey },\n      adminAuthRequest: account.adminAuthRequest,\n    };\n    return Object.assign(this.createAccount(), persistentAccountInformation);\n  }\n\n  // The environment urls and region are selected before login and are transferred here to an authenticated account\n  protected async setAccountEnvironment(account: TAccount): Promise<TAccount> {\n    account.settings.region = await this.getGlobalRegion();\n    account.settings.environmentUrls = await this.getGlobalEnvironmentUrls();\n    return account;\n  }\n\n  protected async getGlobalEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getGlobals(options)).environmentUrls ?? new EnvironmentUrls();\n  }\n\n  protected async getGlobalRegion(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getGlobals(options)).region ?? null;\n  }\n\n  protected async clearDecryptedDataForActiveUser(): Promise<void> {\n    await this.updateState(async (state) => {\n      const userId = state?.activeUserId;\n      if (userId != null && state?.accounts[userId]?.data != null) {\n        state.accounts[userId].data = new AccountData();\n      }\n\n      return state;\n    });\n  }\n\n  protected createAccount(init: Partial<TAccount> = null): TAccount {\n    return this.stateFactory.createAccount(init);\n  }\n\n  protected createGlobals(init: Partial<TGlobalState> = null): TGlobalState {\n    return this.stateFactory.createGlobal(init);\n  }\n\n  protected async deAuthenticateAccount(userId: string): Promise<void> {\n    await this.setAccessToken(null, { userId: userId });\n    await this.setLastActive(null, { userId: userId });\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts = state.authenticatedAccounts.filter((id) => id !== userId);\n\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n\n      return state;\n    });\n  }\n\n  protected async removeAccountFromDisk(userId: string) {\n    await this.removeAccountFromSessionStorage(userId);\n    await this.removeAccountFromLocalStorage(userId);\n    await this.removeAccountFromSecureStorage(userId);\n  }\n\n  protected async dynamicallySetActiveUser() {\n    const accounts = (await this.state())?.accounts;\n    if (accounts == null || Object.keys(accounts).length < 1) {\n      await this.setActiveUser(null);\n      return;\n    }\n    for (const userId in accounts) {\n      if (userId == null) {\n        continue;\n      }\n      if (await this.getIsAuthenticated({ userId: userId })) {\n        await this.setActiveUser(userId);\n        break;\n      }\n      await this.setActiveUser(null);\n    }\n  }\n\n  private async getTimeoutBasedStorageOptions(options?: StorageOptions): Promise<StorageOptions> {\n    const timeoutAction = await this.getVaultTimeoutAction({ userId: options?.userId });\n    const timeout = await this.getVaultTimeout({ userId: options?.userId });\n    const defaultOptions =\n      timeoutAction === VaultTimeoutAction.LogOut && timeout != null\n        ? await this.defaultInMemoryOptions()\n        : await this.defaultOnDiskOptions();\n    return this.reconcileOptions(options, defaultOptions);\n  }\n\n  protected async saveSecureStorageKey<T extends JsonValue>(\n    key: string,\n    value: T,\n    options?: StorageOptions\n  ) {\n    return value == null\n      ? await this.secureStorageService.remove(`${options.userId}${key}`, options)\n      : await this.secureStorageService.save(`${options.userId}${key}`, value, options);\n  }\n\n  protected async state(): Promise<State<TGlobalState, TAccount>> {\n    const state = await this.memoryStorageService.get<State<TGlobalState, TAccount>>(keys.state, {\n      deserializer: (s) => State.fromJSON(s, this.accountDeserializer),\n    });\n    return state;\n  }\n\n  private async setState(state: State<TGlobalState, TAccount>): Promise<void> {\n    await this.memoryStorageService.save(keys.state, state);\n  }\n\n  protected async updateState(\n    stateUpdater: (state: State<TGlobalState, TAccount>) => Promise<State<TGlobalState, TAccount>>\n  ) {\n    await this.state().then(async (state) => {\n      const updatedState = await stateUpdater(state);\n      if (updatedState == null) {\n        throw new Error(\"Attempted to update state to null value\");\n      }\n\n      await this.setState(updatedState);\n    });\n  }\n\n  private setDiskCache(key: string, value: TAccount, options?: StorageOptions) {\n    if (this.useAccountCache) {\n      this.accountDiskCache.value[key] = value;\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n\n  protected deleteDiskCache(key: string) {\n    if (this.useAccountCache) {\n      delete this.accountDiskCache.value[key];\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n}\n\nfunction withPrototypeForArrayMembers<T>(\n  memberConstructor: new (...args: any[]) => T,\n  memberConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<T[]> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<any[]> = originalMethod.apply(this, args);\n\n        if (!Utils.isPromise(originalResult)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else if (!(result instanceof Array)) {\n            throw new Error(\n              `Attempted to retrieve non array type from state as an array for method ${String(\n                propertyKey\n              )}`\n            );\n          } else {\n            return result.map((r) => {\n              return r == null ||\n                r.constructor.name === memberConstructor.prototype.constructor.name\n                ? r\n                : memberConverter(\n                    Object.create(memberConstructor.prototype, Object.getOwnPropertyDescriptors(r))\n                  );\n            });\n          }\n        });\n      },\n    };\n  };\n}\n\nfunction withPrototypeForObjectValues<T>(\n  valuesConstructor: new (...args: any[]) => T,\n  valuesConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<{ [key: string]: T }> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<{ [key: string]: T }> = originalMethod.apply(this, args);\n\n        if (!Utils.isPromise(originalResult)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else {\n            for (const [key, val] of Object.entries(result)) {\n              result[key] =\n                val == null || val.constructor.name === valuesConstructor.prototype.constructor.name\n                  ? valuesConverter(val)\n                  : valuesConverter(\n                      Object.create(\n                        valuesConstructor.prototype,\n                        Object.getOwnPropertyDescriptors(val)\n                      )\n                    );\n            }\n\n            return result as { [key: string]: T };\n          }\n        });\n      },\n    };\n  };\n}\n","export class DecryptParameters<T> {\n  encKey: T;\n  data: T;\n  iv: T;\n  macKey: T;\n  mac: T;\n  macData: T;\n}\n","import * as argon2 from \"argon2-browser\";\nimport * as forge from \"node-forge\";\n\nimport { Utils } from \"../../platform/misc/utils\";\nimport { CsprngArray } from \"../../types/csprng\";\nimport { CryptoFunctionService } from \"../abstractions/crypto-function.service\";\nimport { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport class WebCryptoFunctionService implements CryptoFunctionService {\n  private crypto: Crypto;\n  private subtle: SubtleCrypto;\n  private wasmSupported: boolean;\n\n  constructor(win: Window | typeof global) {\n    this.crypto = typeof win.crypto !== \"undefined\" ? win.crypto : null;\n    this.subtle =\n      !!this.crypto && typeof win.crypto.subtle !== \"undefined\" ? win.crypto.subtle : null;\n    this.wasmSupported = this.checkIfWasmSupported();\n  }\n\n  async pbkdf2(\n    password: string | Uint8Array,\n    salt: string | Uint8Array,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ): Promise<Uint8Array> {\n    const wcLen = algorithm === \"sha256\" ? 256 : 512;\n    const passwordBuf = this.toBuf(password);\n    const saltBuf = this.toBuf(salt);\n\n    const pbkdf2Params: Pbkdf2Params = {\n      name: \"PBKDF2\",\n      salt: saltBuf,\n      iterations: iterations,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\n      \"raw\",\n      passwordBuf,\n      { name: \"PBKDF2\" } as any,\n      false,\n      [\"deriveBits\"]\n    );\n    const buffer = await this.subtle.deriveBits(pbkdf2Params as any, impKey, wcLen);\n    return new Uint8Array(buffer);\n  }\n\n  async argon2(\n    password: string | Uint8Array,\n    salt: string | Uint8Array,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ): Promise<Uint8Array> {\n    if (!this.wasmSupported) {\n      throw \"Webassembly support is required for the Argon2 KDF feature.\";\n    }\n\n    const passwordArr = new Uint8Array(this.toBuf(password));\n    const saltArr = new Uint8Array(this.toBuf(salt));\n\n    const result = await argon2.hash({\n      pass: passwordArr,\n      salt: saltArr,\n      time: iterations,\n      mem: memory,\n      parallelism: parallelism,\n      hashLen: 32,\n      type: argon2.ArgonType.Argon2id,\n    });\n    argon2.unloadRuntime();\n    return result.hash;\n  }\n\n  async hkdf(\n    ikm: Uint8Array,\n    salt: string | Uint8Array,\n    info: string | Uint8Array,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<Uint8Array> {\n    const saltBuf = this.toBuf(salt);\n    const infoBuf = this.toBuf(info);\n\n    const hkdfParams: HkdfParams = {\n      name: \"HKDF\",\n      salt: saltBuf,\n      info: infoBuf,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", ikm, { name: \"HKDF\" } as any, false, [\n      \"deriveBits\",\n    ]);\n    const buffer = await this.subtle.deriveBits(hkdfParams as any, impKey, outputByteSize * 8);\n    return new Uint8Array(buffer);\n  }\n\n  // ref: https://tools.ietf.org/html/rfc5869\n  async hkdfExpand(\n    prk: Uint8Array,\n    info: string | Uint8Array,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<Uint8Array> {\n    const hashLen = algorithm === \"sha256\" ? 32 : 64;\n    if (outputByteSize > 255 * hashLen) {\n      throw new Error(\"outputByteSize is too large.\");\n    }\n    const prkArr = new Uint8Array(prk);\n    if (prkArr.length < hashLen) {\n      throw new Error(\"prk is too small.\");\n    }\n    const infoBuf = this.toBuf(info);\n    const infoArr = new Uint8Array(infoBuf);\n    let runningOkmLength = 0;\n    let previousT = new Uint8Array(0);\n    const n = Math.ceil(outputByteSize / hashLen);\n    const okm = new Uint8Array(n * hashLen);\n    for (let i = 0; i < n; i++) {\n      const t = new Uint8Array(previousT.length + infoArr.length + 1);\n      t.set(previousT);\n      t.set(infoArr, previousT.length);\n      t.set([i + 1], t.length - 1);\n      previousT = new Uint8Array(await this.hmac(t, prk, algorithm));\n      okm.set(previousT, runningOkmLength);\n      runningOkmLength += previousT.length;\n      if (runningOkmLength >= outputByteSize) {\n        break;\n      }\n    }\n    return okm.slice(0, outputByteSize);\n  }\n\n  async hash(\n    value: string | Uint8Array,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ): Promise<Uint8Array> {\n    if (algorithm === \"md5\") {\n      const md = algorithm === \"md5\" ? forge.md.md5.create() : forge.md.sha1.create();\n      const valueBytes = this.toByteString(value);\n      md.update(valueBytes, \"raw\");\n      return Utils.fromByteStringToArray(md.digest().data);\n    }\n\n    const valueBuf = this.toBuf(value);\n    const buffer = await this.subtle.digest(\n      { name: this.toWebCryptoAlgorithm(algorithm) },\n      valueBuf\n    );\n    return new Uint8Array(buffer);\n  }\n\n  async hmac(\n    value: Uint8Array,\n    key: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ): Promise<Uint8Array> {\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", key, signingAlgorithm, false, [\"sign\"]);\n    const buffer = await this.subtle.sign(signingAlgorithm, impKey, value);\n    return new Uint8Array(buffer);\n  }\n\n  // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).\n  // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/\n  // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy\n  async compare(a: Uint8Array, b: Uint8Array): Promise<boolean> {\n    const macKey = await this.randomBytes(32);\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: \"SHA-256\" },\n    };\n    const impKey = await this.subtle.importKey(\"raw\", macKey, signingAlgorithm, false, [\"sign\"]);\n    const mac1 = await this.subtle.sign(signingAlgorithm, impKey, a);\n    const mac2 = await this.subtle.sign(signingAlgorithm, impKey, b);\n\n    if (mac1.byteLength !== mac2.byteLength) {\n      return false;\n    }\n\n    const arr1 = new Uint8Array(mac1);\n    const arr2 = new Uint8Array(mac2);\n    for (let i = 0; i < arr2.length; i++) {\n      if (arr1[i] !== arr2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  hmacFast(value: string, key: string, algorithm: \"sha1\" | \"sha256\" | \"sha512\"): Promise<string> {\n    const hmac = forge.hmac.create();\n    hmac.start(algorithm, key);\n    hmac.update(value);\n    const bytes = hmac.digest().getBytes();\n    return Promise.resolve(bytes);\n  }\n\n  async compareFast(a: string, b: string): Promise<boolean> {\n    const rand = await this.randomBytes(32);\n    const bytes = new Uint32Array(rand);\n    const buffer = forge.util.createBuffer();\n    for (let i = 0; i < bytes.length; i++) {\n      buffer.putInt32(bytes[i]);\n    }\n    const macKey = buffer.getBytes();\n\n    const hmac = forge.hmac.create();\n    hmac.start(\"sha256\", macKey);\n    hmac.update(a);\n    const mac1 = hmac.digest().getBytes();\n\n    hmac.start(null, null);\n    hmac.update(b);\n    const mac2 = hmac.digest().getBytes();\n\n    const equals = mac1 === mac2;\n    return equals;\n  }\n\n  async aesEncrypt(data: Uint8Array, iv: Uint8Array, key: Uint8Array): Promise<Uint8Array> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"encrypt\",\n    ]);\n    const buffer = await this.subtle.encrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  aesDecryptFastParameters(\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ): DecryptParameters<string> {\n    const p = new DecryptParameters<string>();\n    if (key.meta != null) {\n      p.encKey = key.meta.encKeyByteString;\n      p.macKey = key.meta.macKeyByteString;\n    }\n\n    if (p.encKey == null) {\n      p.encKey = forge.util.decode64(key.encKeyB64);\n    }\n    p.data = forge.util.decode64(data);\n    p.iv = forge.util.decode64(iv);\n    p.macData = p.iv + p.data;\n    if (p.macKey == null && key.macKeyB64 != null) {\n      p.macKey = forge.util.decode64(key.macKeyB64);\n    }\n    if (mac != null) {\n      p.mac = forge.util.decode64(mac);\n    }\n\n    // cache byte string keys for later\n    if (key.meta == null) {\n      key.meta = {};\n    }\n    if (key.meta.encKeyByteString == null) {\n      key.meta.encKeyByteString = p.encKey;\n    }\n    if (p.macKey != null && key.meta.macKeyByteString == null) {\n      key.meta.macKeyByteString = p.macKey;\n    }\n\n    return p;\n  }\n\n  aesDecryptFast(parameters: DecryptParameters<string>): Promise<string> {\n    const dataBuffer = forge.util.createBuffer(parameters.data);\n    const decipher = forge.cipher.createDecipher(\"AES-CBC\", parameters.encKey);\n    decipher.start({ iv: parameters.iv });\n    decipher.update(dataBuffer);\n    decipher.finish();\n    const val = decipher.output.toString();\n    return Promise.resolve(val);\n  }\n\n  async aesDecrypt(data: Uint8Array, iv: Uint8Array, key: Uint8Array): Promise<Uint8Array> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"decrypt\",\n    ]);\n    const buffer = await this.subtle.decrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaEncrypt(\n    data: Uint8Array,\n    publicKey: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<Uint8Array> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"spki\", publicKey, rsaParams, false, [\"encrypt\"]);\n    const buffer = await this.subtle.encrypt(rsaParams, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaDecrypt(\n    data: Uint8Array,\n    privateKey: Uint8Array,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<Uint8Array> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, false, [\"decrypt\"]);\n    const buffer = await this.subtle.decrypt(rsaParams, impKey, data);\n    return new Uint8Array(buffer);\n  }\n\n  async rsaExtractPublicKey(privateKey: Uint8Array): Promise<Uint8Array> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const impPrivateKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, true, [\n      \"decrypt\",\n    ]);\n    const jwkPrivateKey = await this.subtle.exportKey(\"jwk\", impPrivateKey);\n    const jwkPublicKeyParams = {\n      kty: \"RSA\",\n      e: jwkPrivateKey.e,\n      n: jwkPrivateKey.n,\n      alg: \"RSA-OAEP\",\n      ext: true,\n    };\n    const impPublicKey = await this.subtle.importKey(\"jwk\", jwkPublicKeyParams, rsaParams, true, [\n      \"encrypt\",\n    ]);\n    const buffer = await this.subtle.exportKey(\"spki\", impPublicKey);\n    return new Uint8Array(buffer);\n  }\n\n  async aesGenerateKey(bitLength = 128 | 192 | 256 | 512): Promise<CsprngArray> {\n    if (bitLength === 512) {\n      // 512 bit keys are not supported in WebCrypto, so we concat two 256 bit keys\n      const key1 = await this.aesGenerateKey(256);\n      const key2 = await this.aesGenerateKey(256);\n      return new Uint8Array([...key1, ...key2]) as CsprngArray;\n    }\n    const aesParams = {\n      name: \"AES-CBC\",\n      length: bitLength,\n    };\n\n    const key = await this.subtle.generateKey(aesParams, true, [\"encrypt\", \"decrypt\"]);\n    const rawKey = await this.subtle.exportKey(\"raw\", key);\n    return new Uint8Array(rawKey) as CsprngArray;\n  }\n\n  async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[Uint8Array, Uint8Array]> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      modulusLength: length,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]), // 65537\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const keyPair = await this.subtle.generateKey(rsaParams, true, [\"encrypt\", \"decrypt\"]);\n    const publicKey = await this.subtle.exportKey(\"spki\", keyPair.publicKey);\n    const privateKey = await this.subtle.exportKey(\"pkcs8\", keyPair.privateKey);\n    return [new Uint8Array(publicKey), new Uint8Array(privateKey)];\n  }\n\n  randomBytes(length: number): Promise<CsprngArray> {\n    const arr = new Uint8Array(length);\n    this.crypto.getRandomValues(arr);\n    return Promise.resolve(arr as CsprngArray);\n  }\n\n  private toBuf(value: string | Uint8Array): Uint8Array {\n    let buf: Uint8Array;\n    if (typeof value === \"string\") {\n      buf = Utils.fromUtf8ToArray(value);\n    } else {\n      buf = value;\n    }\n    return buf;\n  }\n\n  private toByteString(value: string | Uint8Array): string {\n    let bytes: string;\n    if (typeof value === \"string\") {\n      bytes = forge.util.encodeUtf8(value);\n    } else {\n      bytes = Utils.fromBufferToByteString(value);\n    }\n    return bytes;\n  }\n\n  private toWebCryptoAlgorithm(algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"): string {\n    if (algorithm === \"md5\") {\n      throw new Error(\"MD5 is not supported in WebCrypto.\");\n    }\n    return algorithm === \"sha1\" ? \"SHA-1\" : algorithm === \"sha256\" ? \"SHA-256\" : \"SHA-512\";\n  }\n\n  // ref: https://stackoverflow.com/a/47880734/1090359\n  private checkIfWasmSupported(): boolean {\n    try {\n      if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n        const module = new WebAssembly.Module(\n          Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00)\n        );\n        if (module instanceof WebAssembly.Module) {\n          return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n      }\n    } catch {\n      return false;\n    }\n    return false;\n  }\n}\n","export class UpdateAvatarRequest {\n  avatarColor: string;\n\n  constructor(avatarColor: string) {\n    this.avatarColor = avatarColor;\n  }\n}\n","import { BehaviorSubject, Observable } from \"rxjs\";\n\nimport { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"../../abstractions/account/avatar-update.service\";\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { UpdateAvatarRequest } from \"../../models/request/update-avatar.request\";\nimport { ProfileResponse } from \"../../models/response/profile.response\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\n\nexport class AvatarUpdateService implements AvatarUpdateServiceAbstraction {\n  private _avatarUpdate$ = new BehaviorSubject<string | null>(null);\n  avatarUpdate$: Observable<string | null> = this._avatarUpdate$.asObservable();\n\n  constructor(private apiService: ApiService, private stateService: StateService) {\n    this.loadColorFromState();\n  }\n\n  loadColorFromState(): Promise<string | null> {\n    return this.stateService.getAvatarColor().then((color) => {\n      this._avatarUpdate$.next(color);\n      return color;\n    });\n  }\n\n  pushUpdate(color: string | null): Promise<ProfileResponse | void> {\n    return this.apiService.putAvatar(new UpdateAvatarRequest(color)).then((response) => {\n      this.stateService.setAvatarColor(response.avatarColor);\n      this._avatarUpdate$.next(response.avatarColor);\n    });\n  }\n}\n","import { NotificationType } from \"../../enums\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class NotificationResponse extends BaseResponse {\n  contextId: string;\n  type: NotificationType;\n  payload: any;\n\n  constructor(response: any) {\n    super(response);\n    this.contextId = this.getResponseProperty(\"ContextId\");\n    this.type = this.getResponseProperty(\"Type\");\n\n    const payload = this.getResponseProperty(\"Payload\");\n    switch (this.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncCipherUpdate:\n      case NotificationType.SyncLoginDelete:\n        this.payload = new SyncCipherNotification(payload);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderDelete:\n      case NotificationType.SyncFolderUpdate:\n        this.payload = new SyncFolderNotification(payload);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncOrgKeys:\n      case NotificationType.SyncSettings:\n      case NotificationType.LogOut:\n        this.payload = new UserNotification(payload);\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n      case NotificationType.SyncSendDelete:\n        this.payload = new SyncSendNotification(payload);\n        break;\n      case NotificationType.AuthRequest:\n      case NotificationType.AuthRequestResponse:\n        this.payload = new AuthRequestPushNotification(payload);\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport class SyncCipherNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  organizationId: string;\n  collectionIds: string[];\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class SyncFolderNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class UserNotification extends BaseResponse {\n  userId: string;\n  date: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.date = new Date(this.getResponseProperty(\"Date\"));\n  }\n}\n\nexport class SyncSendNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class AuthRequestPushNotification extends BaseResponse {\n  id: string;\n  userId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n  }\n}\n","import { BillingSyncConfigApi } from \"../../../billing/models/api/billing-sync-config.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationConnectionType } from \"../../enums\";\nimport { ScimConfigApi } from \"../api/scim-config.api\";\n\n/**API response config types for OrganizationConnectionResponse */\nexport type OrganizationConnectionConfigApis = BillingSyncConfigApi | ScimConfigApi;\n\nexport class OrganizationConnectionResponse<\n  TConfig extends OrganizationConnectionConfigApis\n> extends BaseResponse {\n  id: string;\n  type: OrganizationConnectionType;\n  organizationId: string;\n  enabled: boolean;\n  config: TConfig;\n\n  constructor(response: any, configType: { new (response: any): TConfig }) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const rawConfig = this.getResponseProperty(\"Config\");\n    this.config = rawConfig == null ? null : new configType(rawConfig);\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class CardApi extends BaseResponse {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.cardholderName = this.getResponseProperty(\"CardholderName\");\n    this.brand = this.getResponseProperty(\"Brand\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.expMonth = this.getResponseProperty(\"ExpMonth\");\n    this.expYear = this.getResponseProperty(\"ExpYear\");\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class FieldApi extends BaseResponse {\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.value = this.getResponseProperty(\"Value\");\n    this.linkedId = this.getResponseProperty(\"linkedId\");\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class IdentityApi extends BaseResponse {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.title = this.getResponseProperty(\"Title\");\n    this.firstName = this.getResponseProperty(\"FirstName\");\n    this.middleName = this.getResponseProperty(\"MiddleName\");\n    this.lastName = this.getResponseProperty(\"LastName\");\n    this.address1 = this.getResponseProperty(\"Address1\");\n    this.address2 = this.getResponseProperty(\"Address2\");\n    this.address3 = this.getResponseProperty(\"Address3\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.company = this.getResponseProperty(\"Company\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.phone = this.getResponseProperty(\"Phone\");\n    this.ssn = this.getResponseProperty(\"SSN\");\n    this.username = this.getResponseProperty(\"Username\");\n    this.passportNumber = this.getResponseProperty(\"PassportNumber\");\n    this.licenseNumber = this.getResponseProperty(\"LicenseNumber\");\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class LoginUriApi extends BaseResponse {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.uri = this.getResponseProperty(\"Uri\");\n    const match = this.getResponseProperty(\"Match\");\n    this.match = match != null ? match : null;\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nimport { LoginUriApi } from \"./login-uri.api\";\n\nexport class LoginApi extends BaseResponse {\n  uris: LoginUriApi[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.username = this.getResponseProperty(\"Username\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.passwordRevisionDate = this.getResponseProperty(\"PasswordRevisionDate\");\n    this.totp = this.getResponseProperty(\"Totp\");\n    this.autofillOnPageLoad = this.getResponseProperty(\"AutofillOnPageLoad\");\n\n    const uris = this.getResponseProperty(\"Uris\");\n    if (uris != null) {\n      this.uris = uris.map((u: any) => new LoginUriApi(u));\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class SecureNoteApi extends BaseResponse {\n  type: SecureNoteType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class AttachmentResponse extends BaseResponse {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PasswordHistoryResponse extends BaseResponse {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.password = this.getResponseProperty(\"Password\");\n    this.lastUsedDate = this.getResponseProperty(\"LastUsedDate\");\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\n\nimport { AttachmentResponse } from \"./attachment.response\";\nimport { PasswordHistoryResponse } from \"./password-history.response\";\n\nexport class CipherResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  type: number;\n  name: string;\n  notes: string;\n  fields: FieldApi[];\n  login: LoginApi;\n  card: CardApi;\n  identity: IdentityApi;\n  secureNote: SecureNoteApi;\n  favorite: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  revisionDate: string;\n  attachments: AttachmentResponse[];\n  passwordHistory: PasswordHistoryResponse[];\n  collectionIds: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.folderId = this.getResponseProperty(\"FolderId\") || null;\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.favorite = this.getResponseProperty(\"Favorite\") || false;\n    this.edit = !!this.getResponseProperty(\"Edit\");\n    if (this.getResponseProperty(\"ViewPassword\") == null) {\n      this.viewPassword = true;\n    } else {\n      this.viewPassword = this.getResponseProperty(\"ViewPassword\");\n    }\n    this.organizationUseTotp = this.getResponseProperty(\"OrganizationUseTotp\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.deletedDate = this.getResponseProperty(\"DeletedDate\");\n\n    const login = this.getResponseProperty(\"Login\");\n    if (login != null) {\n      this.login = new LoginApi(login);\n    }\n\n    const card = this.getResponseProperty(\"Card\");\n    if (card != null) {\n      this.card = new CardApi(card);\n    }\n\n    const identity = this.getResponseProperty(\"Identity\");\n    if (identity != null) {\n      this.identity = new IdentityApi(identity);\n    }\n\n    const secureNote = this.getResponseProperty(\"SecureNote\");\n    if (secureNote != null) {\n      this.secureNote = new SecureNoteApi(secureNote);\n    }\n\n    const fields = this.getResponseProperty(\"Fields\");\n    if (fields != null) {\n      this.fields = fields.map((f: any) => new FieldApi(f));\n    }\n\n    const attachments = this.getResponseProperty(\"Attachments\");\n    if (attachments != null) {\n      this.attachments = attachments.map((a: any) => new AttachmentResponse(a));\n    }\n\n    const passwordHistory = this.getResponseProperty(\"PasswordHistory\");\n    if (passwordHistory != null) {\n      this.passwordHistory = passwordHistory.map((h: any) => new PasswordHistoryResponse(h));\n    }\n\n    this.reprompt = this.getResponseProperty(\"Reprompt\") || CipherRepromptType.None;\n    this.key = this.getResponseProperty(\"Key\") || null;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SelectionReadOnlyResponse extends BaseResponse {\n  id: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.readOnly = this.getResponseProperty(\"ReadOnly\");\n    this.hidePasswords = this.getResponseProperty(\"HidePasswords\");\n  }\n}\n","import { SelectionReadOnlyResponse } from \"../../../admin-console/models/response/selection-read-only.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class CollectionResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n  }\n}\n\nexport class CollectionDetailsResponse extends CollectionResponse {\n  readOnly: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.readOnly = this.getResponseProperty(\"ReadOnly\") || false;\n  }\n}\n\nexport class CollectionAccessDetailsResponse extends CollectionResponse {\n  groups: SelectionReadOnlyResponse[] = [];\n  users: SelectionReadOnlyResponse[] = [];\n\n  /**\n   * Flag indicating the user has been explicitly assigned to this Collection\n   */\n  assigned: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.assigned = this.getResponseProperty(\"Assigned\") || false;\n\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n\n    const users = this.getResponseProperty(\"Users\");\n    if (users != null) {\n      this.users = users.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { CollectionResponse } from \"../../../vault/models/response/collection.response\";\n\nexport class OrganizationExportResponse extends BaseResponse {\n  collections: CollectionResponse[];\n  ciphers: CipherResponse[];\n\n  constructor(response: any) {\n    super(response);\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionResponse(c));\n    }\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationSponsorshipSyncStatusResponse extends BaseResponse {\n  lastSyncDate?: Date;\n\n  constructor(response: any) {\n    super(response);\n    const lastSyncDate = this.getResponseProperty(\"LastSyncDate\");\n    if (lastSyncDate) {\n      this.lastSyncDate = new Date(lastSyncDate);\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderOrganizationResponse extends BaseResponse {\n  id: string;\n  providerId: string;\n  organizationId: string;\n  key: string;\n  settings: string;\n  creationDate: string;\n  revisionDate: string;\n  userCount: number;\n  seats?: number;\n  plan?: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.settings = this.getResponseProperty(\"Settings\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.userCount = this.getResponseProperty(\"UserCount\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.plan = this.getResponseProperty(\"Plan\");\n  }\n}\n\nexport class ProviderOrganizationOrganizationDetailsResponse extends ProviderOrganizationResponse {\n  organizationName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.organizationName = this.getResponseProperty(\"OrganizationName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkPublicKeyResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { OrganizationUserBulkPublicKeyResponse } from \"../../../../abstractions/organization-user/responses\";\n\nexport class ProviderUserBulkPublicKeyResponse extends OrganizationUserBulkPublicKeyResponse {}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { ProviderUserStatusType, ProviderUserType } from \"../../../enums\";\nimport { PermissionsApi } from \"../../api/permissions.api\";\n\nexport class ProviderUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: ProviderUserType;\n  status: ProviderUserStatusType;\n  permissions: PermissionsApi;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n  }\n}\n\nexport class ProviderUserUserDetailsResponse extends ProviderUserResponse {\n  name: string;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  businessName: string;\n  billingEmail: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n  }\n}\n","import { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nconst RequestTimeOut = 60000 * 15; //15 Minutes\n\nexport class AuthRequestResponse extends BaseResponse {\n  id: string;\n  publicKey: string;\n  requestDeviceType: DeviceType;\n  requestIpAddress: string;\n  key: string;\n  masterPasswordHash: string;\n  creationDate: string;\n  requestApproved?: boolean;\n  responseDate?: string;\n  isAnswered: boolean;\n  isExpired: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n    this.requestDeviceType = this.getResponseProperty(\"RequestDeviceType\");\n    this.requestIpAddress = this.getResponseProperty(\"RequestIpAddress\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.masterPasswordHash = this.getResponseProperty(\"MasterPasswordHash\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.requestApproved = this.getResponseProperty(\"RequestApproved\");\n    this.responseDate = this.getResponseProperty(\"ResponseDate\");\n\n    const requestDate = new Date(this.creationDate);\n    const requestDateUTC = Date.UTC(\n      requestDate.getUTCFullYear(),\n      requestDate.getUTCMonth(),\n      requestDate.getDate(),\n      requestDate.getUTCHours(),\n      requestDate.getUTCMinutes(),\n      requestDate.getUTCSeconds(),\n      requestDate.getUTCMilliseconds()\n    );\n\n    const dateNow = new Date(Date.now());\n    const dateNowUTC = Date.UTC(\n      dateNow.getUTCFullYear(),\n      dateNow.getUTCMonth(),\n      dateNow.getDate(),\n      dateNow.getUTCHours(),\n      dateNow.getUTCMinutes(),\n      dateNow.getUTCSeconds(),\n      dateNow.getUTCMilliseconds()\n    );\n\n    this.isExpired = dateNowUTC - requestDateUTC >= RequestTimeOut;\n    this.isAnswered = this.requestApproved != null && this.responseDate != null;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class DeviceVerificationResponse extends BaseResponse {\n  isDeviceVerificationSectionEnabled: boolean;\n  unknownDeviceVerificationEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.isDeviceVerificationSectionEnabled = this.getResponseProperty(\n      \"IsDeviceVerificationSectionEnabled\"\n    );\n    this.unknownDeviceVerificationEnabled = this.getResponseProperty(\n      \"UnknownDeviceVerificationEnabled\"\n    );\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { EmergencyAccessStatusType } from \"../../enums/emergency-access-status-type\";\nimport { EmergencyAccessType } from \"../../enums/emergency-access-type\";\n\nexport class EmergencyAccessGranteeDetailsResponse extends BaseResponse {\n  id: string;\n  granteeId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.granteeId = this.getResponseProperty(\"GranteeId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessGrantorDetailsResponse extends BaseResponse {\n  id: string;\n  grantorId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.grantorId = this.getResponseProperty(\"GrantorId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessTakeoverResponse extends BaseResponse {\n  keyEncrypted: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n\nexport class EmergencyAccessViewResponse extends BaseResponse {\n  keyEncrypted: string;\n  ciphers: CipherResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class KeyConnectorUserKeyResponse extends BaseResponse {\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PreloginResponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { ICaptchaProtectedResponse } from \"./captcha-protected.response\";\n\nexport class RegisterResponse extends BaseResponse implements ICaptchaProtectedResponse {\n  captchaBypassToken: string;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaBypassToken = this.getResponseProperty(\"CaptchaBypassToken\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SsoPreValidateResponse extends BaseResponse {\n  token: string;\n\n  constructor(response: any) {\n    super(response);\n    this.token = this.getResponseProperty(\"Token\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorAuthenticatorResponse extends BaseResponse {\n  enabled: boolean;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorDuoResponse extends BaseResponse {\n  enabled: boolean;\n  host: string;\n  secretKey: string;\n  integrationKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.host = this.getResponseProperty(\"Host\");\n    this.secretKey = this.getResponseProperty(\"SecretKey\");\n    this.integrationKey = this.getResponseProperty(\"IntegrationKey\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorEmailResponse extends BaseResponse {\n  enabled: boolean;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nexport class TwoFactorProviderResponse extends BaseResponse {\n  enabled: boolean;\n  type: TwoFactorProviderType;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorRecoverResponse extends BaseResponse {\n  code: string;\n\n  constructor(response: any) {\n    super(response);\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { Utils } from \"../../../platform/misc/utils\";\n\nexport class TwoFactorWebAuthnResponse extends BaseResponse {\n  enabled: boolean;\n  keys: KeyResponse[];\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const keys = this.getResponseProperty(\"Keys\");\n    this.keys = keys == null ? null : keys.map((k: any) => new KeyResponse(k));\n  }\n}\n\nexport class KeyResponse extends BaseResponse {\n  name: string;\n  id: number;\n  migrated: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.id = this.getResponseProperty(\"Id\");\n    this.migrated = this.getResponseProperty(\"Migrated\");\n  }\n}\n\nexport class ChallengeResponse extends BaseResponse implements PublicKeyCredentialCreationOptions {\n  attestation?: AttestationConveyancePreference;\n  authenticatorSelection?: AuthenticatorSelectionCriteria;\n  challenge: BufferSource;\n  excludeCredentials?: PublicKeyCredentialDescriptor[];\n  extensions?: AuthenticationExtensionsClientInputs;\n  pubKeyCredParams: PublicKeyCredentialParameters[];\n  rp: PublicKeyCredentialRpEntity;\n  timeout?: number;\n  user: PublicKeyCredentialUserEntity;\n\n  constructor(response: any) {\n    super(response);\n    this.attestation = this.getResponseProperty(\"attestation\");\n    this.authenticatorSelection = this.getResponseProperty(\"authenticatorSelection\");\n    this.challenge = Utils.fromUrlB64ToArray(this.getResponseProperty(\"challenge\"));\n    this.excludeCredentials = this.getResponseProperty(\"excludeCredentials\").map((c: any) => {\n      c.id = Utils.fromUrlB64ToArray(c.id).buffer;\n      return c;\n    });\n    this.extensions = this.getResponseProperty(\"extensions\");\n    this.pubKeyCredParams = this.getResponseProperty(\"pubKeyCredParams\");\n    this.rp = this.getResponseProperty(\"rp\");\n    this.timeout = this.getResponseProperty(\"timeout\");\n\n    const user = this.getResponseProperty(\"user\");\n    user.id = Utils.fromUrlB64ToArray(user.id);\n\n    this.user = user;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorYubiKeyResponse extends BaseResponse {\n  enabled: boolean;\n  key1: string;\n  key2: string;\n  key3: string;\n  key4: string;\n  key5: string;\n  nfc: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key1 = this.getResponseProperty(\"Key1\");\n    this.key2 = this.getResponseProperty(\"Key2\");\n    this.key3 = this.getResponseProperty(\"Key3\");\n    this.key4 = this.getResponseProperty(\"Key4\");\n    this.key5 = this.getResponseProperty(\"Key5\");\n    this.nfc = this.getResponseProperty(\"Nfc\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { BillingInvoiceResponse, BillingTransactionResponse } from \"./billing.response\";\n\nexport class BillingHistoryResponse extends BaseResponse {\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { BillingSourceResponse } from \"./billing.response\";\n\nexport class BillingPaymentResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TaxRateResponse extends BaseResponse {\n  id: string;\n  country: string;\n  state: string;\n  postalCode: string;\n  rate: number;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.rate = this.getResponseProperty(\"Rate\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class BreachAccountResponse extends BaseResponse {\n  addedDate: string;\n  breachDate: string;\n  dataClasses: string[];\n  description: string;\n  domain: string;\n  isActive: boolean;\n  isVerified: boolean;\n  logoPath: string;\n  modifiedDate: string;\n  name: string;\n  pwnCount: number;\n  title: string;\n\n  constructor(response: any) {\n    super(response);\n    this.addedDate = this.getResponseProperty(\"AddedDate\");\n    this.breachDate = this.getResponseProperty(\"BreachDate\");\n    this.dataClasses = this.getResponseProperty(\"DataClasses\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.domain = this.getResponseProperty(\"Domain\");\n    this.isActive = this.getResponseProperty(\"IsActive\");\n    this.isVerified = this.getResponseProperty(\"IsVerified\");\n    this.logoPath = this.getResponseProperty(\"LogoPath\");\n    this.modifiedDate = this.getResponseProperty(\"ModifiedDate\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.pwnCount = this.getResponseProperty(\"PwnCount\");\n    this.title = this.getResponseProperty(\"Title\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class GlobalDomainResponse extends BaseResponse {\n  type: number;\n  domains: string[];\n  excluded: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.domains = this.getResponseProperty(\"Domains\");\n    this.excluded = this.getResponseProperty(\"Excluded\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { GlobalDomainResponse } from \"./global-domain.response\";\n\nexport class DomainsResponse extends BaseResponse {\n  equivalentDomains: string[][];\n  globalEquivalentDomains: GlobalDomainResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.equivalentDomains = this.getResponseProperty(\"EquivalentDomains\");\n    const globalEquivalentDomains = this.getResponseProperty(\"GlobalEquivalentDomains\");\n    if (globalEquivalentDomains != null) {\n      this.globalEquivalentDomains = globalEquivalentDomains.map(\n        (d: any) => new GlobalDomainResponse(d)\n      );\n    } else {\n      this.globalEquivalentDomains = [];\n    }\n  }\n}\n","import { DeviceType, EventSystemUser, EventType } from \"../../enums\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class EventResponse extends BaseResponse {\n  type: EventType;\n  userId: string;\n  organizationId: string;\n  providerId: string;\n  cipherId: string;\n  collectionId: string;\n  groupId: string;\n  policyId: string;\n  organizationUserId: string;\n  providerUserId: string;\n  providerOrganizationId: string;\n  actingUserId: string;\n  date: string;\n  deviceType: DeviceType;\n  ipAddress: string;\n  installationId: string;\n  systemUser: EventSystemUser;\n  domainName: string;\n  secretId: string;\n  serviceAccountId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.cipherId = this.getResponseProperty(\"CipherId\");\n    this.collectionId = this.getResponseProperty(\"CollectionId\");\n    this.groupId = this.getResponseProperty(\"GroupId\");\n    this.policyId = this.getResponseProperty(\"PolicyId\");\n    this.organizationUserId = this.getResponseProperty(\"OrganizationUserId\");\n    this.providerUserId = this.getResponseProperty(\"ProviderUserId\");\n    this.providerOrganizationId = this.getResponseProperty(\"ProviderOrganizationId\");\n    this.actingUserId = this.getResponseProperty(\"ActingUserId\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.deviceType = this.getResponseProperty(\"DeviceType\");\n    this.ipAddress = this.getResponseProperty(\"IpAddress\");\n    this.installationId = this.getResponseProperty(\"InstallationId\");\n    this.systemUser = this.getResponseProperty(\"SystemUser\");\n    this.domainName = this.getResponseProperty(\"DomainName\");\n    this.secretId = this.getResponseProperty(\"SecretId\");\n    this.serviceAccountId = this.getResponseProperty(\"ServiceAccountId\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class UserKeyResponse extends BaseResponse {\n  userId: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { FileUploadType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\n\nexport class AttachmentUploadDataResponse extends BaseResponse {\n  attachmentId: string;\n  fileUploadType: FileUploadType;\n  cipherResponse: CipherResponse;\n  cipherMiniResponse: CipherResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.attachmentId = this.getResponseProperty(\"AttachmentId\");\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const cipherResponse = this.getResponseProperty(\"CipherResponse\");\n    const cipherMiniResponse = this.getResponseProperty(\"CipherMiniResponse\");\n    this.cipherResponse = cipherResponse == null ? null : new CipherResponse(cipherResponse);\n    this.cipherMiniResponse =\n      cipherMiniResponse == null ? null : new CipherResponse(cipherMiniResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendFileApi extends BaseResponse {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.id = this.getResponseProperty(\"Id\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendTextApi extends BaseResponse {\n  text: string;\n  hidden: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.text = this.getResponseProperty(\"Text\");\n    this.hidden = this.getResponseProperty(\"Hidden\") || false;\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendResponse extends BaseResponse {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disable: boolean;\n  hideEmail: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.accessId = this.getResponseProperty(\"AccessId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.maxAccessCount = this.getResponseProperty(\"MaxAccessCount\");\n    this.accessCount = this.getResponseProperty(\"AccessCount\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.deletionDate = this.getResponseProperty(\"DeletionDate\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.disable = this.getResponseProperty(\"Disabled\") || false;\n    this.hideEmail = this.getResponseProperty(\"HideEmail\") || false;\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class FolderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n  }\n}\n","import { PolicyResponse } from \"../../../admin-console/models/response/policy.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { SendResponse } from \"../../../tools/send/models/response/send.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\nimport { CollectionDetailsResponse } from \"./collection.response\";\nimport { FolderResponse } from \"./folder.response\";\n\nexport class SyncResponse extends BaseResponse {\n  profile?: ProfileResponse;\n  folders: FolderResponse[] = [];\n  collections: CollectionDetailsResponse[] = [];\n  ciphers: CipherResponse[] = [];\n  domains?: DomainsResponse;\n  policies?: PolicyResponse[] = [];\n  sends: SendResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    const profile = this.getResponseProperty(\"Profile\");\n    if (profile != null) {\n      this.profile = new ProfileResponse(profile);\n    }\n\n    const folders = this.getResponseProperty(\"Folders\");\n    if (folders != null) {\n      this.folders = folders.map((f: any) => new FolderResponse(f));\n    }\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionDetailsResponse(c));\n    }\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n\n    const domains = this.getResponseProperty(\"Domains\");\n    if (domains != null) {\n      this.domains = new DomainsResponse(domains);\n    }\n\n    const policies = this.getResponseProperty(\"Policies\");\n    if (policies != null) {\n      this.policies = policies.map((p: any) => new PolicyResponse(p));\n    }\n\n    const sends = this.getResponseProperty(\"Sends\");\n    if (sends != null) {\n      this.sends = sends.map((s: any) => new SendResponse(s));\n    }\n  }\n}\n","import { ApiService as ApiServiceAbstraction } from \"../abstractions/api.service\";\nimport { OrganizationConnectionType } from \"../admin-console/enums\";\nimport { OrganizationSponsorshipCreateRequest } from \"../admin-console/models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../admin-console/models/request/organization/organization-sponsorship-redeem.request\";\nimport { OrganizationConnectionRequest } from \"../admin-console/models/request/organization-connection.request\";\nimport { ProviderAddOrganizationRequest } from \"../admin-console/models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../admin-console/models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../admin-console/models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../admin-console/models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../admin-console/models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../admin-console/models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../admin-console/models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../admin-console/models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../admin-console/models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../admin-console/models/request/provider/provider-user-update.request\";\nimport { SelectionReadOnlyRequest } from \"../admin-console/models/request/selection-read-only.request\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../admin-console/models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../admin-console/models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../admin-console/models/response/organization-sponsorship-sync-status.response\";\nimport { PolicyResponse } from \"../admin-console/models/response/policy.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../admin-console/models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../admin-console/models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../admin-console/models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../admin-console/models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../admin-console/models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../admin-console/models/response/selection-read-only.response\";\nimport { TokenService } from \"../auth/abstractions/token.service\";\nimport { DeviceVerificationRequest } from \"../auth/models/request/device-verification.request\";\nimport { EmailTokenRequest } from \"../auth/models/request/email-token.request\";\nimport { EmailRequest } from \"../auth/models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../auth/models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../auth/models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../auth/models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../auth/models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../auth/models/request/emergency-access-update.request\";\nimport { DeviceRequest } from \"../auth/models/request/identity-token/device.request\";\nimport { PasswordTokenRequest } from \"../auth/models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../auth/models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../auth/models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../auth/models/request/identity-token/user-api-token.request\";\nimport { KeyConnectorUserKeyRequest } from \"../auth/models/request/key-connector-user-key.request\";\nimport { PasswordHintRequest } from \"../auth/models/request/password-hint.request\";\nimport { PasswordRequest } from \"../auth/models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../auth/models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../auth/models/request/passwordless-create-auth.request\";\nimport { SecretVerificationRequest } from \"../auth/models/request/secret-verification.request\";\nimport { SetKeyConnectorKeyRequest } from \"../auth/models/request/set-key-connector-key.request\";\nimport { SetPasswordRequest } from \"../auth/models/request/set-password.request\";\nimport { TwoFactorEmailRequest } from \"../auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../auth/models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../auth/models/request/two-factor-recovery.request\";\nimport { UpdateProfileRequest } from \"../auth/models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../auth/models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../auth/models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../auth/models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../auth/models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../auth/models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../auth/models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../auth/models/request/update-two-factor-yubio-otp.request\";\nimport { ApiKeyResponse } from \"../auth/models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../auth/models/response/auth-request.response\";\nimport { DeviceVerificationResponse } from \"../auth/models/response/device-verification.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../auth/models/response/emergency-access.response\";\nimport { IdentityCaptchaResponse } from \"../auth/models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../auth/models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../auth/models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../auth/models/response/key-connector-user-key.response\";\nimport { MasterPasswordPolicyResponse } from \"../auth/models/response/master-password-policy.response\";\nimport { PreloginResponse } from \"../auth/models/response/prelogin.response\";\nimport { RegisterResponse } from \"../auth/models/response/register.response\";\nimport { SsoPreValidateResponse } from \"../auth/models/response/sso-pre-validate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../auth/models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../auth/models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../auth/models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../auth/models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../auth/models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../auth/models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../auth/models/response/two-factor-yubi-key.response\";\nimport { BitPayInvoiceRequest } from \"../billing/models/request/bit-pay-invoice.request\";\nimport { PaymentRequest } from \"../billing/models/request/payment.request\";\nimport { TaxInfoUpdateRequest } from \"../billing/models/request/tax-info-update.request\";\nimport { BillingHistoryResponse } from \"../billing/models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../billing/models/response/billing-payment.response\";\nimport { PaymentResponse } from \"../billing/models/response/payment.response\";\nimport { PlanResponse } from \"../billing/models/response/plan.response\";\nimport { SubscriptionResponse } from \"../billing/models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../billing/models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../billing/models/response/tax-rate.response\";\nimport { DeviceType } from \"../enums\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { AppIdService } from \"../platform/abstractions/app-id.service\";\nimport { EnvironmentService } from \"../platform/abstractions/environment.service\";\nimport { PlatformUtilsService } from \"../platform/abstractions/platform-utils.service\";\nimport { Utils } from \"../platform/misc/utils\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../vault/models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { CollectionRequest } from \"../vault/models/request/collection.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../vault/models/response/collection.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport class ApiService implements ApiServiceAbstraction {\n  private device: DeviceType;\n  private deviceType: string;\n  private isWebClient = false;\n  private isDesktopClient = false;\n\n  constructor(\n    private tokenService: TokenService,\n    private platformUtilsService: PlatformUtilsService,\n    private environmentService: EnvironmentService,\n    private appIdService: AppIdService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private customUserAgent: string = null\n  ) {\n    this.device = platformUtilsService.getDevice();\n    this.deviceType = this.device.toString();\n    this.isWebClient =\n      this.device === DeviceType.IEBrowser ||\n      this.device === DeviceType.ChromeBrowser ||\n      this.device === DeviceType.EdgeBrowser ||\n      this.device === DeviceType.FirefoxBrowser ||\n      this.device === DeviceType.OperaBrowser ||\n      this.device === DeviceType.SafariBrowser ||\n      this.device === DeviceType.UnknownBrowser ||\n      this.device === DeviceType.VivaldiBrowser;\n    this.isDesktopClient =\n      this.device === DeviceType.WindowsDesktop ||\n      this.device === DeviceType.MacOsDesktop ||\n      this.device === DeviceType.LinuxDesktop;\n  }\n\n  // Auth APIs\n\n  async postIdentityToken(\n    request: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest\n  ): Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse> {\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    request.alterIdentityTokenHeaders(headers);\n\n    const identityToken =\n      request instanceof UserApiTokenRequest\n        ? request.toIdentityToken()\n        : request.toIdentityToken(this.platformUtilsService.getClientType());\n\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify(identityToken),\n        credentials: this.getCredentials(),\n        cache: \"no-store\",\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    }\n\n    if (responseJson != null) {\n      if (response.status === 200) {\n        return new IdentityTokenResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.TwoFactorProviders2 &&\n        Object.keys(responseJson.TwoFactorProviders2).length\n      ) {\n        await this.tokenService.clearTwoFactorToken();\n        return new IdentityTwoFactorResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.HCaptcha_SiteKey &&\n        Object.keys(responseJson.HCaptcha_SiteKey).length\n      ) {\n        return new IdentityCaptchaResponse(responseJson);\n      }\n    }\n\n    return Promise.reject(new ErrorResponse(responseJson, response.status, true));\n  }\n\n  async refreshIdentityToken(): Promise<any> {\n    try {\n      await this.doAuthRefresh();\n    } catch (e) {\n      return Promise.reject(null);\n    }\n  }\n\n  // TODO: PM-3519: Create and move to AuthRequest Api service\n  async postAuthRequest(request: PasswordlessCreateAuthRequest): Promise<AuthRequestResponse> {\n    const r = await this.send(\"POST\", \"/auth-requests/\", request, false, true);\n    return new AuthRequestResponse(r);\n  }\n  async postAdminAuthRequest(request: PasswordlessCreateAuthRequest): Promise<AuthRequestResponse> {\n    const r = await this.send(\"POST\", \"/auth-requests/admin-request\", request, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthResponse(id: string, accessCode: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}/response?code=${accessCode}`;\n    const r = await this.send(\"GET\", path, null, false, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequest(id: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async putAuthRequest(id: string, request: PasswordlessAuthRequest): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"PUT\", path, request, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequests(): Promise<ListResponse<AuthRequestResponse>> {\n    const path = `/auth-requests/`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new ListResponse(r, AuthRequestResponse);\n  }\n\n  async getLastAuthRequest(): Promise<AuthRequestResponse> {\n    const requests = await this.getAuthRequests();\n    const activeRequests = requests.data.filter((m) => !m.isAnswered && !m.isExpired);\n    const lastRequest = activeRequests.sort((a: AuthRequestResponse, b: AuthRequestResponse) =>\n      a.creationDate.localeCompare(b.creationDate)\n    )[activeRequests.length - 1];\n    return lastRequest;\n  }\n\n  // Account APIs\n\n  async getProfile(): Promise<ProfileResponse> {\n    const r = await this.send(\"GET\", \"/accounts/profile\", null, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async getUserSubscription(): Promise<SubscriptionResponse> {\n    const r = await this.send(\"GET\", \"/accounts/subscription\", null, true, true);\n    return new SubscriptionResponse(r);\n  }\n\n  async getTaxInfo(): Promise<TaxInfoResponse> {\n    const r = await this.send(\"GET\", \"/accounts/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async putProfile(request: UpdateProfileRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/profile\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async putAvatar(request: UpdateAvatarRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/avatar\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  putTaxInfo(request: TaxInfoUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/tax\", request, true, false);\n  }\n\n  async postPrelogin(request: PreloginRequest): Promise<PreloginResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/prelogin\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new PreloginResponse(r);\n  }\n\n  postEmailToken(request: EmailTokenRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email-token\", request, true, false);\n  }\n\n  postEmail(request: EmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email\", request, true, false);\n  }\n\n  postPassword(request: PasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password\", request, true, false);\n  }\n\n  setPassword(request: SetPasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-password\", request, true, false);\n  }\n\n  postSetKeyConnectorKey(request: SetKeyConnectorKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-key-connector-key\", request, true, false);\n  }\n\n  postSecurityStamp(request: SecretVerificationRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/security-stamp\", request, true, false);\n  }\n\n  async getAccountRevisionDate(): Promise<number> {\n    const r = await this.send(\"GET\", \"/accounts/revision-date\", null, true, true);\n    return r as number;\n  }\n\n  postPasswordHint(request: PasswordHintRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password-hint\", request, false, false);\n  }\n\n  async postRegister(request: RegisterRequest): Promise<RegisterResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/register\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new RegisterResponse(r);\n  }\n\n  async postPremium(data: FormData): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/premium\", data, true, true);\n    return new PaymentResponse(r);\n  }\n\n  async postIapCheck(request: IapCheckRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/iap-check\", request, true, false);\n  }\n\n  postReinstatePremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/reinstate-premium\", null, true, false);\n  }\n\n  postCancelPremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/cancel-premium\", null, true, false);\n  }\n\n  async postAccountStorage(request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/storage\", request, true, true);\n    return new PaymentResponse(r);\n  }\n\n  postAccountPayment(request: PaymentRequest): Promise<void> {\n    return this.send(\"POST\", \"/accounts/payment\", request, true, false);\n  }\n\n  postAccountLicense(data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/accounts/license\", data, true, false);\n  }\n\n  postAccountKeys(request: KeysRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/keys\", request, true, false);\n  }\n\n  postAccountKey(request: UpdateKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/key\", request, true, false);\n  }\n\n  postAccountVerifyEmail(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email\", null, true, false);\n  }\n\n  postAccountVerifyEmailToken(request: VerifyEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email-token\", request, false, false);\n  }\n\n  postAccountVerifyPassword(\n    request: SecretVerificationRequest\n  ): Promise<MasterPasswordPolicyResponse> {\n    return this.send(\"POST\", \"/accounts/verify-password\", request, true, true);\n  }\n\n  postAccountRecoverDelete(request: DeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover\", request, false, false);\n  }\n\n  postAccountRecoverDeleteToken(request: VerifyDeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover-token\", request, false, false);\n  }\n\n  postAccountKdf(request: KdfRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/kdf\", request, true, false);\n  }\n\n  async deleteSsoUser(organizationId: string): Promise<void> {\n    return this.send(\"DELETE\", \"/accounts/sso/\" + organizationId, null, true, false);\n  }\n\n  async getSsoUserIdentifier(): Promise<string> {\n    return this.send(\"GET\", \"/accounts/sso/user-identifier\", null, true, true);\n  }\n\n  async postUserApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  async postUserRotateApiKey(\n    id: string,\n    request: SecretVerificationRequest\n  ): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/rotate-api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  putUpdateTempPassword(request: UpdateTempPasswordRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/update-temp-password\", request, true, false);\n  }\n\n  postConvertToKeyConnector(): Promise<void> {\n    return this.send(\"POST\", \"/accounts/convert-to-key-connector\", null, true, false);\n  }\n\n  // Account Billing APIs\n\n  async getUserBillingHistory(): Promise<BillingHistoryResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/history\", null, true, true);\n    return new BillingHistoryResponse(r);\n  }\n\n  async getUserBillingPayment(): Promise<BillingPaymentResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/payment-method\", null, true, true);\n    return new BillingPaymentResponse(r);\n  }\n\n  // Cipher APIs\n\n  async getCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id, null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getFullCipherDetails(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/details\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCiphersOrganization(organizationId: string): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/organization-details?organizationId=\" + organizationId,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CipherResponse);\n  }\n\n  async postCipher(request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherCreate(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/create\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherAdmin(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipher(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id, request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putPartialCipher(id: string, request: CipherPartialRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/partial\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipherAdmin(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipher(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id, null, true, false);\n  }\n\n  deleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/admin\", null, true, false);\n  }\n\n  deleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers\", request, true, false);\n  }\n\n  deleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/admin\", request, true, false);\n  }\n\n  putMoveCiphers(request: CipherBulkMoveRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/move\", request, true, false);\n  }\n\n  async putShareCipher(id: string, request: CipherShareRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/share\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  putShareCiphers(request: CipherBulkShareRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/share\", request, true, false);\n  }\n\n  putCipherCollections(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections\", request, true, false);\n  }\n\n  putCipherCollectionsAdmin(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections-admin\", request, true, false);\n  }\n\n  postPurgeCiphers(\n    request: SecretVerificationRequest,\n    organizationId: string = null\n  ): Promise<any> {\n    let path = \"/ciphers/purge\";\n    if (organizationId != null) {\n      path += \"?organizationId=\" + organizationId;\n    }\n    return this.send(\"POST\", path, request, true, false);\n  }\n\n  putDeleteCipher(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete\", null, true, false);\n  }\n\n  putDeleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete-admin\", null, true, false);\n  }\n\n  putDeleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete\", request, true, false);\n  }\n\n  putDeleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete-admin\", request, true, false);\n  }\n\n  async putRestoreCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore-admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreManyCiphers(\n    request: CipherBulkRestoreRequest\n  ): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\"PUT\", \"/ciphers/restore\", request, true, true);\n    return new ListResponse<CipherResponse>(r, CipherResponse);\n  }\n\n  async putRestoreManyCiphersAdmin(\n    request: CipherBulkRestoreRequest\n  ): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\"PUT\", \"/ciphers/restore-admin\", request, true, true);\n    return new ListResponse<CipherResponse>(r, CipherResponse);\n  }\n\n  // Attachments APIs\n\n  async getAttachmentData(\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ): Promise<AttachmentResponse> {\n    const path =\n      (emergencyAccessId != null ? \"/emergency-access/\" + emergencyAccessId + \"/\" : \"/ciphers/\") +\n      cipherId +\n      \"/attachment/\" +\n      attachmentId;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AttachmentResponse(r);\n  }\n\n  async postCipherAttachment(\n    id: string,\n    request: AttachmentRequest\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/v2\", request, true, true);\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentAdminLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment-admin\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipherAttachment(id: string, attachmentId: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, null, true, false);\n  }\n\n  deleteCipherAttachmentAdmin(id: string, attachmentId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/admin\",\n      null,\n      true,\n      false\n    );\n  }\n\n  postShareCipherAttachment(\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/share?organizationId=\" + organizationId,\n      data,\n      true,\n      false\n    );\n  }\n\n  async renewAttachmentUploadUrl(\n    id: string,\n    attachmentId: string\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/renew\",\n      null,\n      true,\n      true\n    );\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  postAttachmentFile(id: string, attachmentId: string, data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, data, true, false);\n  }\n\n  // Collections APIs\n\n  async getCollectionAccessDetails(\n    organizationId: string,\n    id: string\n  ): Promise<CollectionAccessDetailsResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/details\",\n      null,\n      true,\n      true\n    );\n    return new CollectionAccessDetailsResponse(r);\n  }\n\n  async getUserCollections(): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\"GET\", \"/collections\", null, true, true);\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getCollections(organizationId: string): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getManyCollectionsWithAccessDetails(\n    organizationId: string\n  ): Promise<ListResponse<CollectionAccessDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/details\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionAccessDetailsResponse);\n  }\n\n  async getCollectionUsers(\n    organizationId: string,\n    id: string\n  ): Promise<SelectionReadOnlyResponse[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r.map((dr: any) => new SelectionReadOnlyResponse(dr));\n  }\n\n  async postCollection(\n    organizationId: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollection(\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollectionUsers(\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollection(organizationId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  deleteManyCollections(request: CollectionBulkDeleteRequest): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + request.organizationId + \"/collections\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollectionUser(\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Groups APIs\n\n  async getGroupUsers(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async putGroupUsers(organizationId: string, id: string, request: string[]): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteGroupUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Plan APIs\n\n  async getPlans(): Promise<ListResponse<PlanResponse>> {\n    const r = await this.send(\"GET\", \"/plans/all\", null, false, true);\n    return new ListResponse(r, PlanResponse);\n  }\n\n  async postPublicImportDirectory(request: OrganizationImportRequest): Promise<any> {\n    return this.send(\"POST\", \"/public/organization/import\", request, true, false);\n  }\n\n  async getTaxRates(): Promise<ListResponse<TaxRateResponse>> {\n    const r = await this.send(\"GET\", \"/plans/sales-tax-rates/\", null, true, true);\n    return new ListResponse(r, TaxRateResponse);\n  }\n\n  // Settings APIs\n\n  async getSettingsDomains(): Promise<DomainsResponse> {\n    const r = await this.send(\"GET\", \"/settings/domains\", null, true, true);\n    return new DomainsResponse(r);\n  }\n\n  async putSettingsDomains(request: UpdateDomainsRequest): Promise<DomainsResponse> {\n    const r = await this.send(\"PUT\", \"/settings/domains\", request, true, true);\n    return new DomainsResponse(r);\n  }\n\n  // Sync APIs\n\n  async getSync(): Promise<SyncResponse> {\n    const path = this.isDesktopClient || this.isWebClient ? \"/sync?excludeDomains=true\" : \"/sync\";\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new SyncResponse(r);\n  }\n\n  // Two-factor APIs\n\n  async getTwoFactorProviders(): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\"GET\", \"/two-factor\", null, true, true);\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorOrganizationProviders(\n    organizationId: string\n  ): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/two-factor\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorAuthenticator(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async getTwoFactorEmail(request: SecretVerificationRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async getTwoFactorDuo(request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/two-factor/get-duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorYubiKey(request: SecretVerificationRequest): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async getTwoFactorWebAuthn(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async getTwoFactorWebAuthnChallenge(\n    request: SecretVerificationRequest\n  ): Promise<ChallengeResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn-challenge\", request, true, true);\n    return new ChallengeResponse(r);\n  }\n\n  async getTwoFactorRecover(request: SecretVerificationRequest): Promise<TwoFactorRecoverResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-recover\", request, true, true);\n    return new TwoFactorRecoverResponse(r);\n  }\n\n  async putTwoFactorAuthenticator(\n    request: UpdateTwoFactorAuthenticatorRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async putTwoFactorEmail(request: UpdateTwoFactorEmailRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async putTwoFactorDuo(request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorYubiKey(\n    request: UpdateTwoFactorYubioOtpRequest\n  ): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async putTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const response = request.deviceResponse.response as AuthenticatorAttestationResponse;\n    const data: any = Object.assign({}, request);\n\n    data.deviceResponse = {\n      id: request.deviceResponse.id,\n      rawId: btoa(request.deviceResponse.id),\n      type: request.deviceResponse.type,\n      extensions: request.deviceResponse.getClientExtensionResults(),\n      response: {\n        AttestationObject: Utils.fromBufferToB64(response.attestationObject),\n        clientDataJson: Utils.fromBufferToB64(response.clientDataJSON),\n      },\n    };\n\n    const r = await this.send(\"PUT\", \"/two-factor/webauthn\", data, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async deleteTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"DELETE\", \"/two-factor/webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async putTwoFactorDisable(request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/disable\", request, true, true);\n    return new TwoFactorProviderResponse(r);\n  }\n\n  async putTwoFactorOrganizationDisable(\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/disable\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorProviderResponse(r);\n  }\n\n  postTwoFactorRecover(request: TwoFactorRecoveryRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/recover\", request, false, false);\n  }\n\n  postTwoFactorEmailSetup(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email\", request, true, false);\n  }\n\n  postTwoFactorEmail(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email-login\", request, false, false);\n  }\n\n  async getDeviceVerificationSettings(): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/two-factor/get-device-verification-settings\",\n      null,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  async putDeviceVerificationSettings(\n    request: DeviceVerificationRequest\n  ): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/two-factor/device-verification-settings\",\n      request,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  // Emergency Access APIs\n\n  async getEmergencyAccessTrusted(): Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/trusted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGranteeDetailsResponse);\n  }\n\n  async getEmergencyAccessGranted(): Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/granted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGrantorDetailsResponse);\n  }\n\n  async getEmergencyAccess(id: string): Promise<EmergencyAccessGranteeDetailsResponse> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id, null, true, true);\n    return new EmergencyAccessGranteeDetailsResponse(r);\n  }\n\n  async getEmergencyGrantorPolicies(id: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id + \"/policies\", null, true, true);\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  putEmergencyAccess(id: string, request: EmergencyAccessUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/emergency-access/\" + id, request, true, false);\n  }\n\n  deleteEmergencyAccess(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/emergency-access/\" + id, null, true, false);\n  }\n\n  postEmergencyAccessInvite(request: EmergencyAccessInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/invite\", request, true, false);\n  }\n\n  postEmergencyAccessReinvite(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reinvite\", null, true, false);\n  }\n\n  postEmergencyAccessAccept(id: string, request: EmergencyAccessAcceptRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/accept\", request, true, false);\n  }\n\n  postEmergencyAccessConfirm(id: string, request: EmergencyAccessConfirmRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/confirm\", request, true, false);\n  }\n\n  postEmergencyAccessInitiate(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/initiate\", null, true, false);\n  }\n\n  postEmergencyAccessApprove(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/approve\", null, true, false);\n  }\n\n  postEmergencyAccessReject(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reject\", null, true, false);\n  }\n\n  async postEmergencyAccessTakeover(id: string): Promise<EmergencyAccessTakeoverResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/takeover\", null, true, true);\n    return new EmergencyAccessTakeoverResponse(r);\n  }\n\n  async postEmergencyAccessPassword(\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ): Promise<any> {\n    await this.send(\"POST\", \"/emergency-access/\" + id + \"/password\", request, true, true);\n  }\n\n  async postEmergencyAccessView(id: string): Promise<EmergencyAccessViewResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/view\", null, true, true);\n    return new EmergencyAccessViewResponse(r);\n  }\n\n  // Organization APIs\n\n  async getCloudCommunicationsEnabled(): Promise<boolean> {\n    const r = await this.send(\"GET\", \"/organizations/connections/enabled\", null, true, true);\n    return r as boolean;\n  }\n\n  async getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"GET\", `/organizations/connections/${id}/${type}`, null, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"POST\", \"/organizations/connections/\", request, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId?: string\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/connections/\" + organizationConnectionId,\n      request,\n      true,\n      true\n    );\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async deleteOrganizationConnection(id: string): Promise<void> {\n    return this.send(\"DELETE\", \"/organizations/connections/\" + id, null, true, false);\n  }\n\n  // Provider APIs\n\n  async postProviderSetup(id: string, request: ProviderSetupRequest) {\n    const r = await this.send(\"POST\", \"/providers/\" + id + \"/setup\", request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async getProvider(id: string) {\n    const r = await this.send(\"GET\", \"/providers/\" + id, null, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async putProvider(id: string, request: ProviderUpdateRequest) {\n    const r = await this.send(\"PUT\", \"/providers/\" + id, request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  // Provider User APIs\n\n  async getProviderUsers(\n    providerId: string\n  ): Promise<ListResponse<ProviderUserUserDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users\", null, true, true);\n    return new ListResponse(r, ProviderUserUserDetailsResponse);\n  }\n\n  async getProviderUser(providerId: string, id: string): Promise<ProviderUserResponse> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users/\" + id, null, true, true);\n    return new ProviderUserResponse(r);\n  }\n\n  postProviderUserInvite(providerId: string, request: ProviderUserInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/providers/\" + providerId + \"/users/invite\", request, true, false);\n  }\n\n  postProviderUserReinvite(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyProviderUserReinvite(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/reinvite\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async postProviderUserBulkConfirm(\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async deleteManyProviderUsers(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\"DELETE\", \"/providers/\" + providerId + \"/users\", request, true, true);\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  postProviderUserAccept(\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postProviderUserConfirm(\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderUsersPublicKey(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkPublicKeyResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/public-keys\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkPublicKeyResponse);\n  }\n\n  putProviderUser(\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ): Promise<any> {\n    return this.send(\"PUT\", \"/providers/\" + providerId + \"/users/\" + id, request, true, false);\n  }\n\n  deleteProviderUser(providerId: string, id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/providers/\" + providerId + \"/users/\" + id, null, true, false);\n  }\n\n  // Provider Organization APIs\n\n  async getProviderClients(\n    providerId: string\n  ): Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/providers/\" + providerId + \"/organizations\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderOrganizationOrganizationDetailsResponse);\n  }\n\n  postProviderAddOrganization(\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations/add\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderCreateOrganization(\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ): Promise<ProviderOrganizationResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations\",\n      request,\n      true,\n      true\n    );\n    return new ProviderOrganizationResponse(r);\n  }\n\n  deleteProviderOrganization(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/providers/\" + providerId + \"/organizations/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Event APIs\n\n  async getEvents(start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsCipher(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/ciphers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganization(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/organizations/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganizationUser(\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/organizations/\" + organizationId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProvider(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/providers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProviderUser(\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/providers/\" + providerId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async postEventsCollect(request: EventRequest[]): Promise<any> {\n    const authHeader = await this.getActiveBearerToken();\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n      Authorization: \"Bearer \" + authHeader,\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    const response = await this.fetch(\n      new Request(this.environmentService.getEventsUrl() + \"/collect\", {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        method: \"POST\",\n        body: JSON.stringify(request),\n        headers: headers,\n      })\n    );\n    if (response.status !== 200) {\n      return Promise.reject(\"Event post failed.\");\n    }\n  }\n\n  // User APIs\n\n  async getUserPublicKey(id: string): Promise<UserKeyResponse> {\n    const r = await this.send(\"GET\", \"/users/\" + id + \"/public-key\", null, true, true);\n    return new UserKeyResponse(r);\n  }\n\n  // HIBP APIs\n\n  async getHibpBreach(username: string): Promise<BreachAccountResponse[]> {\n    const r = await this.send(\"GET\", \"/hibp/breach?username=\" + username, null, true, true);\n    return r.map((a: any) => new BreachAccountResponse(a));\n  }\n\n  // Misc\n\n  async postBitPayInvoice(request: BitPayInvoiceRequest): Promise<string> {\n    const r = await this.send(\"POST\", \"/bitpay-invoice\", request, true, true);\n    return r as string;\n  }\n\n  async postSetupPayment(): Promise<string> {\n    const r = await this.send(\"POST\", \"/setup-payment\", null, true, true);\n    return r as string;\n  }\n\n  // Key Connector\n\n  async getMasterKeyFromKeyConnector(\n    keyConnectorUrl: string\n  ): Promise<KeyConnectorUserKeyResponse> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n\n    return new KeyConnectorUserKeyResponse(await response.json());\n  }\n\n  async postUserKeyToKeyConnector(\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ): Promise<void> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"POST\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n        body: JSON.stringify(request),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getKeyConnectorAlive(keyConnectorUrl: string) {\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/alive\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getOrganizationExport(organizationId: string): Promise<OrganizationExportResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/export\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationExportResponse(r);\n  }\n\n  // Helpers\n\n  async getActiveBearerToken(): Promise<string> {\n    let accessToken = await this.tokenService.getToken();\n    if (await this.tokenService.tokenNeedsRefresh()) {\n      await this.doAuthRefresh();\n      accessToken = await this.tokenService.getToken();\n    }\n    return accessToken;\n  }\n\n  async fetch(request: Request): Promise<Response> {\n    if (request.method === \"GET\") {\n      request.headers.set(\"Cache-Control\", \"no-store\");\n      request.headers.set(\"Pragma\", \"no-cache\");\n    }\n    request.headers.set(\"Bitwarden-Client-Name\", this.platformUtilsService.getClientType());\n    request.headers.set(\n      \"Bitwarden-Client-Version\",\n      await this.platformUtilsService.getApplicationVersionNumber()\n    );\n    return this.nativeFetch(request);\n  }\n\n  nativeFetch(request: Request): Promise<Response> {\n    return fetch(request);\n  }\n\n  async preValidateSso(identifier: string): Promise<SsoPreValidateResponse> {\n    if (identifier == null || identifier === \"\") {\n      throw new Error(\"Organization Identifier was not provided.\");\n    }\n    const headers = new Headers({\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const path = `/account/prevalidate?domainHint=${encodeURIComponent(identifier)}`;\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + path, {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"GET\",\n      })\n    );\n\n    if (response.status === 200) {\n      const body = await response.json();\n      return new SsoPreValidateResponse(body);\n    } else {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async postCreateSponsorship(\n    sponsoredOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoredOrgId +\n        \"/families-for-enterprise\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getSponsorshipSyncStatus(\n    sponsoredOrgId: string\n  ): Promise<OrganizationSponsorshipSyncStatusResponse> {\n    const response = await this.send(\n      \"GET\",\n      \"/organization/sponsorship/\" + sponsoredOrgId + \"/sync-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSponsorshipSyncStatusResponse(response);\n  }\n\n  async deleteRevokeSponsorship(sponsoringOrganizationId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoringOrganizationId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteRemoveSponsorship(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/sponsored/\" + sponsoringOrgId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async postPreValidateSponsorshipToken(sponsorshipToken: string): Promise<boolean> {\n    const r = await this.send(\n      \"POST\",\n      \"/organization/sponsorship/validate-token?sponsorshipToken=\" +\n        encodeURIComponent(sponsorshipToken),\n      null,\n      true,\n      true\n    );\n    return r as boolean;\n  }\n\n  async postRedeemSponsorship(\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/redeem?sponsorshipToken=\" + encodeURIComponent(sponsorshipToken),\n      request,\n      true,\n      false\n    );\n  }\n\n  async postResendSponsorshipOffer(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" + sponsoringOrgId + \"/families-for-enterprise/resend\",\n      null,\n      true,\n      false\n    );\n  }\n\n  protected async doAuthRefresh(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken != null && refreshToken !== \"\") {\n      return this.doRefreshToken();\n    }\n\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n    if (!Utils.isNullOrWhitespace(clientId) && !Utils.isNullOrWhitespace(clientSecret)) {\n      return this.doApiTokenRefresh();\n    }\n\n    throw new Error(\"Cannot refresh token, no refresh token or api keys are stored\");\n  }\n\n  protected async doRefreshToken(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken == null || refreshToken === \"\") {\n      throw new Error();\n    }\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const decodedToken = await this.tokenService.decodeToken();\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify({\n          grant_type: \"refresh_token\",\n          client_id: decodedToken.client_id,\n          refresh_token: refreshToken,\n        }),\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    if (response.status === 200) {\n      const responseJson = await response.json();\n      const tokenResponse = new IdentityTokenResponse(responseJson);\n      await this.tokenService.setTokens(\n        tokenResponse.accessToken,\n        tokenResponse.refreshToken,\n        null\n      );\n    } else {\n      const error = await this.handleError(response, true, true);\n      return Promise.reject(error);\n    }\n  }\n\n  protected async doApiTokenRefresh(): Promise<void> {\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const appId = await this.appIdService.getAppId();\n    const deviceRequest = new DeviceRequest(appId, this.platformUtilsService);\n    const tokenRequest = new UserApiTokenRequest(\n      clientId,\n      clientSecret,\n      new TokenTwoFactorRequest(),\n      deviceRequest\n    );\n\n    const response = await this.postIdentityToken(tokenRequest);\n    if (!(response instanceof IdentityTokenResponse)) {\n      throw new Error(\"Invalid response received when refreshing api token\");\n    }\n\n    await this.tokenService.setToken(response.accessToken);\n  }\n\n  async send(\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ): Promise<any> {\n    apiUrl = Utils.isNullOrWhitespace(apiUrl) ? this.environmentService.getApiUrl() : apiUrl;\n\n    // Prevent directory traversal from malicious paths\n    const pathParts = path.split(\"?\");\n    const requestUrl =\n      apiUrl + Utils.normalizePath(pathParts[0]) + (pathParts.length > 1 ? `?${pathParts[1]}` : \"\");\n\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      credentials: this.getCredentials(),\n      method: method,\n    };\n\n    if (authed) {\n      const authHeader = await this.getActiveBearerToken();\n      headers.set(\"Authorization\", \"Bearer \" + authHeader);\n    }\n    if (body != null) {\n      if (typeof body === \"string\") {\n        requestInit.body = body;\n        headers.set(\"Content-Type\", \"application/x-www-form-urlencoded; charset=utf-8\");\n      } else if (typeof body === \"object\") {\n        if (body instanceof FormData) {\n          requestInit.body = body;\n        } else {\n          headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n          requestInit.body = JSON.stringify(body);\n        }\n      }\n    }\n    if (hasResponse) {\n      headers.set(\"Accept\", \"application/json\");\n    }\n    if (alterHeaders != null) {\n      alterHeaders(headers);\n    }\n\n    requestInit.headers = headers;\n    const response = await this.fetch(new Request(requestUrl, requestInit));\n\n    const responseType = response.headers.get(\"content-type\");\n    const responseIsJson = responseType != null && responseType.indexOf(\"application/json\") !== -1;\n    if (hasResponse && response.status === 200 && responseIsJson) {\n      const responseJson = await response.json();\n      return responseJson;\n    } else if (response.status !== 200) {\n      const error = await this.handleError(response, false, authed);\n      return Promise.reject(error);\n    }\n  }\n\n  private async handleError(\n    response: Response,\n    tokenError: boolean,\n    authed: boolean\n  ): Promise<ErrorResponse> {\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    } else if (this.isTextResponse(response)) {\n      responseJson = { Message: await response.text() };\n    }\n\n    if (authed) {\n      if (\n        response.status === 401 ||\n        response.status === 403 ||\n        (tokenError &&\n          response.status === 400 &&\n          responseJson != null &&\n          responseJson.error === \"invalid_grant\")\n      ) {\n        await this.logoutCallback(true);\n        return null;\n      }\n    }\n\n    return new ErrorResponse(responseJson, response.status, tokenError);\n  }\n\n  private qsStringify(params: any): string {\n    return Object.keys(params)\n      .map((key) => {\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\n      })\n      .join(\"&\");\n  }\n\n  private getCredentials(): RequestCredentials {\n    if (!this.isWebClient || this.environmentService.hasBaseUrl()) {\n      return \"include\";\n    }\n    return undefined;\n  }\n\n  private addEventParameters(base: string, start: string, end: string, token: string) {\n    if (start != null) {\n      base += \"?start=\" + start;\n    }\n    if (end != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"end=\" + end;\n    }\n    if (token != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"continuationToken=\" + token;\n    }\n    return base;\n  }\n\n  private isJsonResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"application/json\") > -1;\n  }\n\n  private isTextResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"text\") > -1;\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"../abstractions/audit.service\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { CryptoFunctionService } from \"../platform/abstractions/crypto-function.service\";\nimport { throttle } from \"../platform/misc/throttle\";\nimport { Utils } from \"../platform/misc/utils\";\n\nconst PwnedPasswordsApi = \"https://api.pwnedpasswords.com/range/\";\n\nexport class AuditService implements AuditServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private apiService: ApiService\n  ) {}\n\n  @throttle(100, () => \"passwordLeaked\")\n  async passwordLeaked(password: string): Promise<number> {\n    const hashBytes = await this.cryptoFunctionService.hash(password, \"sha1\");\n    const hash = Utils.fromBufferToHex(hashBytes).toUpperCase();\n    const hashStart = hash.substr(0, 5);\n    const hashEnding = hash.substr(5);\n\n    const response = await this.apiService.nativeFetch(new Request(PwnedPasswordsApi + hashStart));\n    const leakedHashes = await response.text();\n    const match = leakedHashes.split(/\\r?\\n/).find((v) => {\n      return v.split(\":\")[0] === hashEnding;\n    });\n\n    return match != null ? parseInt(match.split(\":\")[1], 10) : 0;\n  }\n\n  async breachedAccounts(username: string): Promise<BreachAccountResponse[]> {\n    try {\n      return await this.apiService.getHibpBreach(username);\n    } catch (e) {\n      const error = e as ErrorResponse;\n      if (error.statusCode === 404) {\n        return [];\n      }\n      throw new Error();\n    }\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will limit how many times the function can be\n * in-flight at a time.\n *\n * Calls beyond the limit will be queued, and run when one of the active calls finishes\n */\nexport function throttle(limit: number, throttleKey: (args: any[]) => string) {\n  return <T>(\n    target: any,\n    propertyKey: string | symbol,\n    descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<T>>\n  ) => {\n    const originalMethod: () => Promise<T> = descriptor.value;\n    const allThrottles = new Map<any, Map<string, (() => void)[]>>();\n\n    const getThrottles = (obj: any) => {\n      let throttles = allThrottles.get(obj);\n      if (throttles != null) {\n        return throttles;\n      }\n      throttles = new Map<string, (() => void)[]>();\n      allThrottles.set(obj, throttles);\n      return throttles;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const throttles = getThrottles(this);\n        const argsThrottleKey = throttleKey(args);\n        let queue = throttles.get(argsThrottleKey);\n        if (queue == null) {\n          queue = [];\n          throttles.set(argsThrottleKey, queue);\n        }\n\n        return new Promise<T>((resolve, reject) => {\n          const exec = () => {\n            const onFinally = () => {\n              queue.splice(queue.indexOf(exec), 1);\n              if (queue.length >= limit) {\n                queue[limit - 1]();\n              } else if (queue.length === 0) {\n                throttles.delete(argsThrottleKey);\n                if (throttles.size === 0) {\n                  allThrottles.delete(this);\n                }\n              }\n            };\n            originalMethod\n              .apply(this, args)\n              .then((val: any) => {\n                onFinally();\n                return val;\n              })\n              .catch((err: any) => {\n                onFinally();\n                throw err;\n              })\n              .then(resolve, reject);\n          };\n          queue.push(exec);\n          if (queue.length <= limit) {\n            exec();\n          }\n        });\n      },\n    };\n  };\n}\n","import { DeviceType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { DeviceResponse } from \"../responses/device.response\";\n\nexport class DeviceView implements View {\n  id: string;\n  userId: string;\n  name: string;\n  identifier: string;\n  type: DeviceType;\n  creationDate: string;\n  revisionDate: string;\n\n  constructor(deviceResponse: DeviceResponse) {\n    Object.assign(this, deviceResponse);\n  }\n}\n","import { Observable, defer, map } from \"rxjs\";\n\nimport { DevicesServiceAbstraction } from \"../../abstractions/devices/devices.service.abstraction\";\nimport { DeviceResponse } from \"../../abstractions/devices/responses/device.response\";\nimport { DeviceView } from \"../../abstractions/devices/views/device.view\";\nimport { DevicesApiServiceAbstraction } from \"../../auth/abstractions/devices-api.service.abstraction\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\n/**\n * @class DevicesServiceImplementation\n * @implements {DevicesServiceAbstraction}\n * @description Observable based data store service for Devices.\n * note: defer is used to convert the promises to observables and to ensure\n * that observables are created for each subscription\n * (i.e., promsise --> observables are cold until subscribed to)\n */\nexport class DevicesServiceImplementation implements DevicesServiceAbstraction {\n  constructor(private devicesApiService: DevicesApiServiceAbstraction) {}\n\n  /**\n   * @description Gets the list of all devices.\n   */\n  getDevices$(): Observable<Array<DeviceView>> {\n    return defer(() => this.devicesApiService.getDevices()).pipe(\n      map((deviceResponses: ListResponse<DeviceResponse>) => {\n        return deviceResponses.data.map((deviceResponse: DeviceResponse) => {\n          return new DeviceView(deviceResponse);\n        });\n      })\n    );\n  }\n\n  /**\n   * @description Gets the device with the specified identifier.\n   */\n  getDeviceByIdentifier$(deviceIdentifier: string): Observable<DeviceView> {\n    return defer(() => this.devicesApiService.getDeviceByIdentifier(deviceIdentifier)).pipe(\n      map((deviceResponse: DeviceResponse) => new DeviceView(deviceResponse))\n    );\n  }\n\n  /**\n   * @description Checks if a device is known for a user by user's email and device's identifier.\n   */\n  isDeviceKnownForUser$(email: string, deviceIdentifier: string): Observable<boolean> {\n    return defer(() => this.devicesApiService.getKnownDevice(email, deviceIdentifier));\n  }\n\n  /**\n   * @description Updates the keys for the specified device.\n   */\n\n  updateTrustedDeviceKeys$(\n    deviceIdentifier: string,\n    devicePublicKeyEncryptedUserKey: string,\n    userKeyEncryptedDevicePublicKey: string,\n    deviceKeyEncryptedDevicePrivateKey: string\n  ): Observable<DeviceView> {\n    return defer(() =>\n      this.devicesApiService.updateTrustedDeviceKeys(\n        deviceIdentifier,\n        devicePublicKeyEncryptedUserKey,\n        userKeyEncryptedDevicePublicKey,\n        deviceKeyEncryptedDevicePrivateKey\n      )\n    ).pipe(map((deviceResponse: DeviceResponse) => new DeviceView(deviceResponse)));\n  }\n}\n","import { EventCollectionService as EventCollectionServiceAbstraction } from \"../../abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"../../abstractions/event/event-upload.service\";\nimport { OrganizationService } from \"../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { EventType } from \"../../enums\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\n\nexport class EventCollectionService implements EventCollectionServiceAbstraction {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: StateService,\n    private organizationService: OrganizationService,\n    private eventUploadService: EventUploadService\n  ) {}\n\n  async collect(\n    eventType: EventType,\n    cipherId: string = null,\n    uploadImmediately = false,\n    organizationId: string = null\n  ): Promise<any> {\n    const authed = await this.stateService.getIsAuthenticated();\n    if (!authed) {\n      return;\n    }\n    const organizations = await this.organizationService.getAll();\n    if (organizations == null) {\n      return;\n    }\n    const orgIds = new Set<string>(organizations.filter((o) => o.useEvents).map((o) => o.id));\n    if (orgIds.size === 0) {\n      return;\n    }\n    if (cipherId != null) {\n      const cipher = await this.cipherService.get(cipherId);\n      if (cipher == null || cipher.organizationId == null || !orgIds.has(cipher.organizationId)) {\n        return;\n      }\n    }\n    if (organizationId != null) {\n      if (!orgIds.has(organizationId)) {\n        return;\n      }\n    }\n    let eventCollection = await this.stateService.getEventCollection();\n    if (eventCollection == null) {\n      eventCollection = [];\n    }\n    const event = new EventData();\n    event.type = eventType;\n    event.cipherId = cipherId;\n    event.date = new Date().toISOString();\n    event.organizationId = organizationId;\n    eventCollection.push(event);\n    await this.stateService.setEventCollection(eventCollection);\n    if (uploadImmediately) {\n      await this.eventUploadService.uploadEvents();\n    }\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport class EventRequest {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"../../abstractions/event/event-upload.service\";\nimport { EventRequest } from \"../../models/request/event.request\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\n\nexport class EventUploadService implements EventUploadServiceAbstraction {\n  private inited = false;\n  constructor(\n    private apiService: ApiService,\n    private stateService: StateService,\n    private logService: LogService\n  ) {}\n\n  init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.uploadEvents();\n      setInterval(() => this.uploadEvents(), 60 * 1000); // check every 60 seconds\n    }\n  }\n\n  async uploadEvents(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n    const eventCollection = await this.stateService.getEventCollection({ userId: userId });\n    if (eventCollection == null || eventCollection.length === 0) {\n      return;\n    }\n    const request = eventCollection.map((e) => {\n      const req = new EventRequest();\n      req.type = e.type;\n      req.cipherId = e.cipherId;\n      req.date = e.date;\n      req.organizationId = e.organizationId;\n      return req;\n    });\n    try {\n      await this.apiService.postEventsCollect(request);\n      this.clearEvents(userId);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  private async clearEvents(userId?: string): Promise<any> {\n    await this.stateService.setEventCollection(null, { userId: userId });\n  }\n}\n","import * as signalR from \"@microsoft/signalr\";\nimport * as signalRMsgPack from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"../abstractions/notifications.service\";\nimport { AuthService } from \"../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../auth/enums/authentication-status\";\nimport { NotificationType } from \"../enums\";\nimport {\n  NotificationResponse,\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../models/response/notification.response\";\nimport { AppIdService } from \"../platform/abstractions/app-id.service\";\nimport { EnvironmentService } from \"../platform/abstractions/environment.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\nimport { MessagingService } from \"../platform/abstractions/messaging.service\";\nimport { StateService } from \"../platform/abstractions/state.service\";\nimport { SyncService } from \"../vault/abstractions/sync/sync.service.abstraction\";\n\nexport class NotificationsService implements NotificationsServiceAbstraction {\n  private signalrConnection: signalR.HubConnection;\n  private url: string;\n  private connected = false;\n  private inited = false;\n  private inactive = false;\n  private reconnectTimer: any = null;\n\n  constructor(\n    private syncService: SyncService,\n    private appIdService: AppIdService,\n    private apiService: ApiService,\n    private environmentService: EnvironmentService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private logService: LogService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private messagingService: MessagingService\n  ) {\n    this.environmentService.urls.subscribe(() => {\n      if (!this.inited) {\n        return;\n      }\n\n      this.init();\n    });\n  }\n\n  async init(): Promise<void> {\n    this.inited = false;\n    this.url = this.environmentService.getNotificationsUrl();\n\n    // Set notifications server URL to `https://-` to effectively disable communication\n    // with the notifications server from the client app\n    if (this.url === \"https://-\") {\n      return;\n    }\n\n    if (this.signalrConnection != null) {\n      this.signalrConnection.off(\"ReceiveMessage\");\n      this.signalrConnection.off(\"Heartbeat\");\n      await this.signalrConnection.stop();\n      this.connected = false;\n      this.signalrConnection = null;\n    }\n\n    this.signalrConnection = new signalR.HubConnectionBuilder()\n      .withUrl(this.url + \"/hub\", {\n        accessTokenFactory: () => this.apiService.getActiveBearerToken(),\n        skipNegotiation: true,\n        transport: signalR.HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new signalRMsgPack.MessagePackHubProtocol() as signalR.IHubProtocol)\n      // .configureLogging(signalR.LogLevel.Trace)\n      .build();\n\n    this.signalrConnection.on(\"ReceiveMessage\", (data: any) =>\n      this.processNotification(new NotificationResponse(data))\n    );\n    // eslint-disable-next-line\n    this.signalrConnection.on(\"Heartbeat\", (data: any) => {\n      /*console.log('Heartbeat!');*/\n    });\n    this.signalrConnection.onclose(() => {\n      this.connected = false;\n      this.reconnect(true);\n    });\n    this.inited = true;\n    if (await this.isAuthedAndUnlocked()) {\n      await this.reconnect(false);\n    }\n  }\n\n  async updateConnection(sync = false): Promise<void> {\n    if (!this.inited) {\n      return;\n    }\n    try {\n      if (await this.isAuthedAndUnlocked()) {\n        await this.reconnect(sync);\n      } else {\n        await this.signalrConnection.stop();\n      }\n    } catch (e) {\n      this.logService.error(e.toString());\n    }\n  }\n\n  async reconnectFromActivity(): Promise<void> {\n    this.inactive = false;\n    if (this.inited && !this.connected) {\n      await this.reconnect(true);\n    }\n  }\n\n  async disconnectFromInactivity(): Promise<void> {\n    this.inactive = true;\n    if (this.inited && this.connected) {\n      await this.signalrConnection.stop();\n    }\n  }\n\n  private async processNotification(notification: NotificationResponse) {\n    const appId = await this.appIdService.getAppId();\n    if (notification == null || notification.contextId === appId) {\n      return;\n    }\n\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    const payloadUserId = notification.payload.userId || notification.payload.UserId;\n    const myUserId = await this.stateService.getUserId();\n    if (isAuthenticated && payloadUserId != null && payloadUserId !== myUserId) {\n      return;\n    }\n\n    switch (notification.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherUpdate:\n        await this.syncService.syncUpsertCipher(\n          notification.payload as SyncCipherNotification,\n          notification.type === NotificationType.SyncCipherUpdate\n        );\n        break;\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncLoginDelete:\n        await this.syncService.syncDeleteCipher(notification.payload as SyncCipherNotification);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderUpdate:\n        await this.syncService.syncUpsertFolder(\n          notification.payload as SyncFolderNotification,\n          notification.type === NotificationType.SyncFolderUpdate\n        );\n        break;\n      case NotificationType.SyncFolderDelete:\n        await this.syncService.syncDeleteFolder(notification.payload as SyncFolderNotification);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncSettings:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(false);\n        }\n        break;\n      case NotificationType.SyncOrgKeys:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(true);\n          // Stop so a reconnect can be made\n          await this.signalrConnection.stop();\n        }\n        break;\n      case NotificationType.LogOut:\n        if (isAuthenticated) {\n          this.logoutCallback(true);\n        }\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n        await this.syncService.syncUpsertSend(\n          notification.payload as SyncSendNotification,\n          notification.type === NotificationType.SyncSendUpdate\n        );\n        break;\n      case NotificationType.SyncSendDelete:\n        await this.syncService.syncDeleteSend(notification.payload as SyncSendNotification);\n        break;\n      case NotificationType.AuthRequest:\n        if (await this.stateService.getApproveLoginRequests()) {\n          this.messagingService.send(\"openLoginApproval\", {\n            notificationId: notification.payload.id,\n          });\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async reconnect(sync: boolean) {\n    if (this.reconnectTimer != null) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    if (this.connected || !this.inited || this.inactive) {\n      return;\n    }\n    const authedAndUnlocked = await this.isAuthedAndUnlocked();\n    if (!authedAndUnlocked) {\n      return;\n    }\n\n    try {\n      await this.signalrConnection.start();\n      this.connected = true;\n      if (sync) {\n        await this.syncService.fullSync(false);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    if (!this.connected) {\n      this.reconnectTimer = setTimeout(() => this.reconnect(sync), this.random(120000, 300000));\n    }\n  }\n\n  private async isAuthedAndUnlocked() {\n    const authStatus = await this.authService.getAuthStatus();\n    return authStatus >= AuthenticationStatus.Unlocked;\n  }\n\n  private random(min: number, max: number) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationDomainSsoDetailsResponse extends BaseResponse {\n  id: string;\n  organizationIdentifier: string;\n  ssoAvailable: boolean;\n  domainName: string;\n  verifiedDate?: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"id\");\n    this.organizationIdentifier = this.getResponseProperty(\"organizationIdentifier\");\n    this.ssoAvailable = this.getResponseProperty(\"ssoAvailable\");\n    this.domainName = this.getResponseProperty(\"domainName\");\n    this.verifiedDate = this.getResponseProperty(\"verifiedDate\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationDomainResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  txt: string;\n  domainName: string;\n  creationDate: string;\n  nextRunDate: string;\n  jobRunCount: number;\n  verifiedDate?: string;\n  lastCheckedDate?: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"id\");\n    this.organizationId = this.getResponseProperty(\"organizationId\");\n    this.txt = this.getResponseProperty(\"txt\");\n    this.domainName = this.getResponseProperty(\"domainName\");\n    this.creationDate = this.getResponseProperty(\"creationDate\");\n    this.nextRunDate = this.getResponseProperty(\"nextRunDate\");\n    this.jobRunCount = this.getResponseProperty(\"jobRunCount\");\n    this.verifiedDate = this.getResponseProperty(\"verifiedDate\");\n    this.lastCheckedDate = this.getResponseProperty(\"lastCheckedDate\");\n  }\n}\n","export class OrganizationDomainSsoDetailsRequest {\n  constructor(public email: string) {}\n}\n","import { OrganizationUserStatusType, OrganizationUserType } from \"../../../admin-console/enums\";\nimport { PermissionsApi } from \"../../../admin-console/models/api/permissions.api\";\nimport { SelectionReadOnlyResponse } from \"../../../admin-console/models/response/selection-read-only.response\";\nimport { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: OrganizationUserType;\n  status: OrganizationUserStatusType;\n  externalId: string;\n  accessAll: boolean;\n  accessSecretsManager: boolean;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  hasMasterPassword: boolean;\n  collections: SelectionReadOnlyResponse[] = [];\n  groups: string[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n    this.accessAll = this.getResponseProperty(\"AccessAll\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n    this.hasMasterPassword = this.getResponseProperty(\"HasMasterPassword\");\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));\n    }\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups;\n    }\n  }\n}\n\nexport class OrganizationUserUserDetailsResponse extends OrganizationUserResponse {\n  name: string;\n  email: string;\n  avatarColor: string;\n  twoFactorEnabled: boolean;\n  usesKeyConnector: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n  }\n}\n\nexport class OrganizationUserDetailsResponse extends OrganizationUserResponse {\n  constructor(response: any) {\n    super(response);\n  }\n}\n\nexport class OrganizationUserResetPasswordDetailsResponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  resetPasswordKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.resetPasswordKey = this.getResponseProperty(\"ResetPasswordKey\");\n    this.encryptedPrivateKey = this.getResponseProperty(\"EncryptedPrivateKey\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","export class OrganizationUserBulkRequest {\n  ids: string[];\n\n  constructor(ids: string[]) {\n    this.ids = ids == null ? [] : ids;\n  }\n}\n","import * as lunr from \"lunr\";\n\nimport { SearchService as SearchServiceAbstraction } from \"../abstractions/search.service\";\nimport { FieldType, UriMatchType } from \"../enums\";\nimport { I18nService } from \"../platform/abstractions/i18n.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\nimport { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherType } from \"../vault/enums/cipher-type\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport class SearchService implements SearchServiceAbstraction {\n  private static registeredPipeline = false;\n\n  indexedEntityId?: string = null;\n  private indexing = false;\n  private index: lunr.Index = null;\n  private readonly immediateSearchLocales: string[] = [\"zh-CN\", \"zh-TW\", \"ja\", \"ko\", \"vi\"];\n  private readonly defaultSearchableMinLength: number = 2;\n  private searchableMinLength: number = this.defaultSearchableMinLength;\n\n  constructor(private logService: LogService, private i18nService: I18nService) {\n    this.i18nService.locale$.subscribe((locale) => {\n      if (this.immediateSearchLocales.indexOf(locale) !== -1) {\n        this.searchableMinLength = 1;\n      } else {\n        this.searchableMinLength = this.defaultSearchableMinLength;\n      }\n    });\n\n    // Currently have to ensure this is only done a single time. Lunr allows you to register a function\n    // multiple times but they will add a warning message to the console. The way they do that breaks when ran on a service worker.\n    if (!SearchService.registeredPipeline) {\n      SearchService.registeredPipeline = true;\n      //register lunr pipeline function\n      lunr.Pipeline.registerFunction(this.normalizeAccentsPipelineFunction, \"normalizeAccents\");\n    }\n  }\n\n  clearIndex(): void {\n    this.indexedEntityId = null;\n    this.index = null;\n  }\n\n  isSearchable(query: string): boolean {\n    query = SearchService.normalizeSearchQuery(query);\n    const notSearchable =\n      query == null ||\n      (this.index == null && query.length < this.searchableMinLength) ||\n      (this.index != null && query.length < this.searchableMinLength && query.indexOf(\">\") !== 0);\n    return !notSearchable;\n  }\n\n  indexCiphers(ciphers: CipherView[], indexedEntityId?: string): void {\n    if (this.indexing) {\n      return;\n    }\n\n    this.indexing = true;\n    this.indexedEntityId = indexedEntityId;\n    this.index = null;\n    const builder = new lunr.Builder();\n    builder.pipeline.add(this.normalizeAccentsPipelineFunction);\n    builder.ref(\"id\");\n    builder.field(\"shortid\", { boost: 100, extractor: (c: CipherView) => c.id.substr(0, 8) });\n    builder.field(\"name\", {\n      boost: 10,\n    });\n    builder.field(\"subtitle\", {\n      boost: 5,\n      extractor: (c: CipherView) => {\n        if (c.subTitle != null && c.type === CipherType.Card) {\n          return c.subTitle.replace(/\\*/g, \"\");\n        }\n        return c.subTitle;\n      },\n    });\n    builder.field(\"notes\");\n    builder.field(\"login.username\", {\n      extractor: (c: CipherView) =>\n        c.type === CipherType.Login && c.login != null ? c.login.username : null,\n    });\n    builder.field(\"login.uris\", { boost: 2, extractor: (c: CipherView) => this.uriExtractor(c) });\n    builder.field(\"fields\", { extractor: (c: CipherView) => this.fieldExtractor(c, false) });\n    builder.field(\"fields_joined\", { extractor: (c: CipherView) => this.fieldExtractor(c, true) });\n    builder.field(\"attachments\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, false),\n    });\n    builder.field(\"attachments_joined\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, true),\n    });\n    builder.field(\"organizationid\", { extractor: (c: CipherView) => c.organizationId });\n    ciphers = ciphers || [];\n    ciphers.forEach((c) => builder.add(c));\n    this.index = builder.build();\n\n    this.indexing = false;\n\n    this.logService.info(\"Finished search indexing\");\n  }\n\n  async searchCiphers(\n    query: string,\n    filter: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[] = null,\n    ciphers: CipherView[]\n  ): Promise<CipherView[]> {\n    const results: CipherView[] = [];\n    if (query != null) {\n      query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    }\n    if (query === \"\") {\n      query = null;\n    }\n\n    if (ciphers == null) {\n      ciphers = [];\n    }\n\n    if (filter != null && Array.isArray(filter) && filter.length > 0) {\n      ciphers = ciphers.filter((c) => filter.every((f) => f == null || f(c)));\n    } else if (filter != null) {\n      ciphers = ciphers.filter(filter as (cipher: CipherView) => boolean);\n    }\n\n    if (!this.isSearchable(query)) {\n      return ciphers;\n    }\n\n    if (this.indexing) {\n      await new Promise((r) => setTimeout(r, 250));\n      if (this.indexing) {\n        await new Promise((r) => setTimeout(r, 500));\n      }\n    }\n\n    const index = this.getIndexForSearch();\n    if (index == null) {\n      // Fall back to basic search if index is not available\n      return this.searchCiphersBasic(ciphers, query);\n    }\n\n    const ciphersMap = new Map<string, CipherView>();\n    ciphers.forEach((c) => ciphersMap.set(c.id, c));\n\n    let searchResults: lunr.Index.Result[] = null;\n    const isQueryString = query != null && query.length > 1 && query.indexOf(\">\") === 0;\n    if (isQueryString) {\n      try {\n        searchResults = index.search(query.substr(1).trim());\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else {\n      const soWild = lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING;\n      searchResults = index.query((q) => {\n        lunr.tokenizer(query).forEach((token) => {\n          const t = token.toString();\n          q.term(t, { fields: [\"name\"], wildcard: soWild });\n          q.term(t, { fields: [\"subtitle\"], wildcard: soWild });\n          q.term(t, { fields: [\"login.uris\"], wildcard: soWild });\n          q.term(t, {});\n        });\n      });\n    }\n\n    if (searchResults != null) {\n      searchResults.forEach((r) => {\n        if (ciphersMap.has(r.ref)) {\n          results.push(ciphersMap.get(r.ref));\n        }\n      });\n    }\n    return results;\n  }\n\n  searchCiphersBasic(ciphers: CipherView[], query: string, deleted = false) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    return ciphers.filter((c) => {\n      if (deleted !== c.isDeleted) {\n        return false;\n      }\n      if (c.name != null && c.name.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (query.length >= 8 && c.id.startsWith(query)) {\n        return true;\n      }\n      if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (\n        c.login &&\n        c.login.hasUris &&\n        c.login.uris.some((loginUri) => loginUri?.uri?.toLowerCase().indexOf(query) > -1)\n      ) {\n        return true;\n      }\n      return false;\n    });\n  }\n\n  searchSends(sends: SendView[], query: string) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLocaleLowerCase());\n    if (query === null) {\n      return sends;\n    }\n    const sendsMatched: SendView[] = [];\n    const lowPriorityMatched: SendView[] = [];\n    sends.forEach((s) => {\n      if (s.name != null && s.name.toLowerCase().indexOf(query) > -1) {\n        sendsMatched.push(s);\n      } else if (\n        query.length >= 8 &&\n        (s.id.startsWith(query) ||\n          s.accessId.toLocaleLowerCase().startsWith(query) ||\n          (s.file?.id != null && s.file.id.startsWith(query)))\n      ) {\n        lowPriorityMatched.push(s);\n      } else if (s.notes != null && s.notes.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.text?.text != null && s.text.text.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.file?.fileName != null && s.file.fileName.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      }\n    });\n    return sendsMatched.concat(lowPriorityMatched);\n  }\n\n  getIndexForSearch(): lunr.Index {\n    return this.index;\n  }\n\n  private fieldExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasFields) {\n      return null;\n    }\n    let fields: string[] = [];\n    c.fields.forEach((f) => {\n      if (f.name != null) {\n        fields.push(f.name);\n      }\n      if (f.type === FieldType.Text && f.value != null) {\n        fields.push(f.value);\n      }\n    });\n    fields = fields.filter((f) => f.trim() !== \"\");\n    if (fields.length === 0) {\n      return null;\n    }\n    return joined ? fields.join(\" \") : fields;\n  }\n\n  private attachmentExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasAttachments) {\n      return null;\n    }\n    let attachments: string[] = [];\n    c.attachments.forEach((a) => {\n      if (a != null && a.fileName != null) {\n        if (joined && a.fileName.indexOf(\".\") > -1) {\n          attachments.push(a.fileName.substr(0, a.fileName.lastIndexOf(\".\")));\n        } else {\n          attachments.push(a.fileName);\n        }\n      }\n    });\n    attachments = attachments.filter((f) => f.trim() !== \"\");\n    if (attachments.length === 0) {\n      return null;\n    }\n    return joined ? attachments.join(\" \") : attachments;\n  }\n\n  private uriExtractor(c: CipherView) {\n    if (c.type !== CipherType.Login || c.login == null || !c.login.hasUris) {\n      return null;\n    }\n    const uris: string[] = [];\n    c.login.uris.forEach((u) => {\n      if (u.uri == null || u.uri === \"\") {\n        return;\n      }\n      if (u.hostname != null) {\n        uris.push(u.hostname);\n        return;\n      }\n      let uri = u.uri;\n      if (u.match !== UriMatchType.RegularExpression) {\n        const protocolIndex = uri.indexOf(\"://\");\n        if (protocolIndex > -1) {\n          uri = uri.substr(protocolIndex + 3);\n        }\n        const queryIndex = uri.search(/\\?|&|#/);\n        if (queryIndex > -1) {\n          uri = uri.substring(0, queryIndex);\n        }\n      }\n      uris.push(uri);\n    });\n    return uris.length > 0 ? uris : null;\n  }\n\n  private normalizeAccentsPipelineFunction(token: lunr.Token): any {\n    const searchableFields = [\"name\", \"login.username\", \"subtitle\", \"notes\"];\n    const fields = (token as any).metadata[\"fields\"];\n    const checkFields = fields.every((i: any) => searchableFields.includes(i));\n\n    if (checkFields) {\n      return SearchService.normalizeSearchQuery(token.toString());\n    }\n\n    return token;\n  }\n\n  // Remove accents/diacritics characters from text. This regex is equivalent to the Diacritic unicode property escape, i.e. it will match all diacritic characters.\n  static normalizeSearchQuery(query: string): string {\n    return query?.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { SettingsService as SettingsServiceAbstraction } from \"../abstractions/settings.service\";\nimport { StateService } from \"../platform/abstractions/state.service\";\nimport { Utils } from \"../platform/misc/utils\";\nimport { AccountSettingsSettings } from \"../platform/models/domain/account\";\n\nexport class SettingsService implements SettingsServiceAbstraction {\n  protected _settings: BehaviorSubject<AccountSettingsSettings> = new BehaviorSubject({});\n  protected _disableFavicon = new BehaviorSubject<boolean>(null);\n\n  settings$ = this._settings.asObservable();\n  disableFavicon$ = this._disableFavicon.asObservable();\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._settings.next({});\n            return;\n          }\n\n          const data = await this.stateService.getSettings();\n          const disableFavicon = await this.stateService.getDisableFavicon();\n\n          this._settings.next(data);\n          this._disableFavicon.next(disableFavicon);\n        })\n      )\n      .subscribe();\n  }\n\n  async setEquivalentDomains(equivalentDomains: string[][]): Promise<void> {\n    const settings = this._settings.getValue() ?? {};\n\n    settings.equivalentDomains = equivalentDomains;\n\n    this._settings.next(settings);\n    await this.stateService.setSettings(settings);\n  }\n\n  getEquivalentDomains(url: string): Set<string> {\n    const domain = Utils.getDomain(url);\n    if (domain == null) {\n      return new Set();\n    }\n\n    const settings = this._settings.getValue();\n\n    let result: string[] = [];\n\n    if (settings?.equivalentDomains != null) {\n      settings.equivalentDomains\n        .filter((ed) => ed.length > 0 && ed.includes(domain))\n        .forEach((ed) => {\n          result = result.concat(ed);\n        });\n    }\n\n    return new Set(result);\n  }\n\n  async setDisableFavicon(value: boolean) {\n    this._disableFavicon.next(value);\n    await this.stateService.setDisableFavicon(value);\n  }\n\n  getDisableFavicon(): boolean {\n    return this._disableFavicon.getValue();\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._settings.next({});\n    }\n\n    await this.stateService.setSettings(null, { userId: userId });\n  }\n}\n","import { TotpService as TotpServiceAbstraction } from \"../abstractions/totp.service\";\nimport { CryptoFunctionService } from \"../platform/abstractions/crypto-function.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\nimport { Utils } from \"../platform/misc/utils\";\n\nconst B32Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\nconst SteamChars = \"23456789BCDFGHJKMNPQRTVWXY\";\n\nexport class TotpService implements TotpServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private logService: LogService\n  ) {}\n\n  async getCode(key: string): Promise<string> {\n    if (key == null) {\n      return null;\n    }\n    let period = 30;\n    let alg: \"sha1\" | \"sha256\" | \"sha512\" = \"sha1\";\n    let digits = 6;\n    let keyB32 = key;\n    const isOtpAuth = key.toLowerCase().indexOf(\"otpauth://\") === 0;\n    const isSteamAuth = !isOtpAuth && key.toLowerCase().indexOf(\"steam://\") === 0;\n    if (isOtpAuth) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"digits\") && params.get(\"digits\") != null) {\n        try {\n          const digitParams = parseInt(params.get(\"digits\").trim(), null);\n          if (digitParams > 10) {\n            digits = 10;\n          } else if (digitParams > 0) {\n            digits = digitParams;\n          }\n        } catch {\n          this.logService.error(\"Invalid digits param.\");\n        }\n      }\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          const periodParam = parseInt(params.get(\"period\").trim(), null);\n          if (periodParam > 0) {\n            period = periodParam;\n          }\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n      if (params.has(\"secret\") && params.get(\"secret\") != null) {\n        keyB32 = params.get(\"secret\");\n      }\n      if (params.has(\"algorithm\") && params.get(\"algorithm\") != null) {\n        const algParam = params.get(\"algorithm\").toLowerCase();\n        if (algParam === \"sha1\" || algParam === \"sha256\" || algParam === \"sha512\") {\n          alg = algParam;\n        }\n      }\n    } else if (isSteamAuth) {\n      keyB32 = key.substr(\"steam://\".length);\n      digits = 5;\n    }\n\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const timeHex = this.leftPad(this.decToHex(Math.floor(epoch / period)), 16, \"0\");\n    const timeBytes = Utils.fromHexToArray(timeHex);\n    const keyBytes = this.b32ToBytes(keyB32);\n\n    if (!keyBytes.length || !timeBytes.length) {\n      return null;\n    }\n\n    const hash = await this.sign(keyBytes, timeBytes, alg);\n    if (hash.length === 0) {\n      return null;\n    }\n\n    const offset = hash[hash.length - 1] & 0xf;\n    const binary =\n      ((hash[offset] & 0x7f) << 24) |\n      ((hash[offset + 1] & 0xff) << 16) |\n      ((hash[offset + 2] & 0xff) << 8) |\n      (hash[offset + 3] & 0xff);\n\n    let otp = \"\";\n    if (isSteamAuth) {\n      let fullCode = binary & 0x7fffffff;\n      for (let i = 0; i < digits; i++) {\n        otp += SteamChars[fullCode % SteamChars.length];\n        fullCode = Math.trunc(fullCode / SteamChars.length);\n      }\n    } else {\n      otp = (binary % Math.pow(10, digits)).toString();\n      otp = this.leftPad(otp, digits, \"0\");\n    }\n\n    return otp;\n  }\n\n  getTimeInterval(key: string): number {\n    let period = 30;\n    if (key != null && key.toLowerCase().indexOf(\"otpauth://\") === 0) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          period = parseInt(params.get(\"period\").trim(), null);\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n    }\n    return period;\n  }\n\n  // Helpers\n\n  private leftPad(s: string, l: number, p: string): string {\n    if (l + 1 >= s.length) {\n      s = Array(l + 1 - s.length).join(p) + s;\n    }\n    return s;\n  }\n\n  private decToHex(d: number): string {\n    return (d < 15.5 ? \"0\" : \"\") + Math.round(d).toString(16);\n  }\n\n  private b32ToHex(s: string): string {\n    s = s.toUpperCase();\n    let cleanedInput = \"\";\n\n    for (let i = 0; i < s.length; i++) {\n      if (B32Chars.indexOf(s[i]) < 0) {\n        continue;\n      }\n\n      cleanedInput += s[i];\n    }\n    s = cleanedInput;\n\n    let bits = \"\";\n    let hex = \"\";\n    for (let i = 0; i < s.length; i++) {\n      const byteIndex = B32Chars.indexOf(s.charAt(i));\n      if (byteIndex < 0) {\n        continue;\n      }\n      bits += this.leftPad(byteIndex.toString(2), 5, \"0\");\n    }\n    for (let i = 0; i + 4 <= bits.length; i += 4) {\n      const chunk = bits.substr(i, 4);\n      hex = hex + parseInt(chunk, 2).toString(16);\n    }\n    return hex;\n  }\n\n  private b32ToBytes(s: string): Uint8Array {\n    return Utils.fromHexToArray(this.b32ToHex(s));\n  }\n\n  private async sign(\n    keyBytes: Uint8Array,\n    timeBytes: Uint8Array,\n    alg: \"sha1\" | \"sha256\" | \"sha512\"\n  ) {\n    const signature = await this.cryptoFunctionService.hmac(timeBytes, keyBytes, alg);\n    return new Uint8Array(signature);\n  }\n}\n","import { defer } from \"rxjs\";\n\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"../../abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../admin-console/enums\";\nimport { TokenService } from \"../../auth/abstractions/token.service\";\nimport { UserVerificationService } from \"../../auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\n\n/**\n * - DISABLED: No Pin set\n * - PERSISTENT: Pin is set and survives client reset\n * - TRANSIENT: Pin is set and requires password unlock after client reset\n */\nexport type PinLockType = \"DISABLED\" | \"PERSISTANT\" | \"TRANSIENT\";\n\nexport class VaultTimeoutSettingsService implements VaultTimeoutSettingsServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private tokenService: TokenService,\n    private policyService: PolicyService,\n    private stateService: StateService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  async setVaultTimeoutOptions(timeout: number, action: VaultTimeoutAction): Promise<void> {\n    await this.stateService.setVaultTimeout(timeout);\n\n    // We swap these tokens from being on disk for lock actions, and in memory for logout actions\n    // Get them here to set them to their new location after changing the timeout action and clearing if needed\n    const token = await this.tokenService.getToken();\n    const refreshToken = await this.tokenService.getRefreshToken();\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const currentAction = await this.stateService.getVaultTimeoutAction();\n    if (\n      (timeout != null || timeout === 0) &&\n      action === VaultTimeoutAction.LogOut &&\n      action !== currentAction\n    ) {\n      // if we have a vault timeout and the action is log out, reset tokens\n      await this.tokenService.clearToken();\n    }\n\n    await this.stateService.setVaultTimeoutAction(action);\n\n    await this.tokenService.setToken(token);\n    await this.tokenService.setRefreshToken(refreshToken);\n    await this.tokenService.setClientId(clientId);\n    await this.tokenService.setClientSecret(clientSecret);\n\n    await this.cryptoService.refreshAdditionalKeys();\n  }\n\n  availableVaultTimeoutActions$(userId?: string) {\n    return defer(() => this.getAvailableVaultTimeoutActions(userId));\n  }\n\n  async isPinLockSet(userId?: string): Promise<PinLockType> {\n    // we can't check the protected pin for both because old accounts only\n    // used it for MP on Restart\n    const pinIsEnabled = !!(await this.stateService.getProtectedPin({ userId }));\n    const aUserKeyPinIsSet = !!(await this.stateService.getPinKeyEncryptedUserKey({ userId }));\n    const anOldUserKeyPinIsSet = !!(await this.stateService.getEncryptedPinProtected({ userId }));\n\n    if (aUserKeyPinIsSet || anOldUserKeyPinIsSet) {\n      return \"PERSISTANT\";\n    } else if (pinIsEnabled && !aUserKeyPinIsSet && !anOldUserKeyPinIsSet) {\n      return \"TRANSIENT\";\n    } else {\n      return \"DISABLED\";\n    }\n  }\n\n  async isBiometricLockSet(userId?: string): Promise<boolean> {\n    return await this.stateService.getBiometricUnlock({ userId });\n  }\n\n  async getVaultTimeout(userId?: string): Promise<number> {\n    const vaultTimeout = await this.stateService.getVaultTimeout({ userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      // Remove negative values, and ensure it's smaller than maximum allowed value according to policy\n      let timeout = Math.min(vaultTimeout, policy[0].data.minutes);\n\n      if (vaultTimeout == null || timeout < 0) {\n        timeout = policy[0].data.minutes;\n      }\n\n      // TODO @jlf0dev: Can we move this somwhere else? Maybe add it to the initialization process?\n      // ( Apparently I'm the one that reviewed the original PR that added this :) )\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      if (vaultTimeout !== timeout) {\n        await this.stateService.setVaultTimeout(timeout, { userId });\n      }\n\n      return timeout;\n    }\n\n    return vaultTimeout;\n  }\n\n  vaultTimeoutAction$(userId?: string) {\n    return defer(() => this.getVaultTimeoutAction(userId));\n  }\n\n  async getVaultTimeoutAction(userId?: string): Promise<VaultTimeoutAction> {\n    const availableActions = await this.getAvailableVaultTimeoutActions();\n    if (availableActions.length === 1) {\n      return availableActions[0];\n    }\n\n    const vaultTimeoutAction = await this.stateService.getVaultTimeoutAction({ userId: userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      const action = policy[0].data.action;\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      if (action && vaultTimeoutAction !== action) {\n        await this.stateService.setVaultTimeoutAction(action, { userId: userId });\n      }\n      if (action && availableActions.includes(action)) {\n        return action;\n      }\n    }\n\n    if (vaultTimeoutAction == null) {\n      // Depends on whether or not the user has a master password\n      const defaultValue = (await this.userVerificationService.hasMasterPassword())\n        ? VaultTimeoutAction.Lock\n        : VaultTimeoutAction.LogOut;\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      await this.stateService.setVaultTimeoutAction(defaultValue, { userId: userId });\n      return defaultValue;\n    }\n\n    return vaultTimeoutAction === VaultTimeoutAction.LogOut\n      ? VaultTimeoutAction.LogOut\n      : VaultTimeoutAction.Lock;\n  }\n\n  private async getAvailableVaultTimeoutActions(userId?: string): Promise<VaultTimeoutAction[]> {\n    const availableActions = [VaultTimeoutAction.LogOut];\n\n    const canLock =\n      (await this.userVerificationService.hasMasterPassword(userId)) ||\n      (await this.isPinLockSet(userId)) !== \"DISABLED\" ||\n      (await this.isBiometricLockSet(userId));\n\n    if (canLock) {\n      availableActions.push(VaultTimeoutAction.Lock);\n    }\n\n    return availableActions;\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEverBeenUnlocked(false, { userId: userId });\n    await this.cryptoService.clearPinKeys(userId);\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { VaultTimeoutSettingsService } from \"../../abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"../../abstractions/vault-timeout/vault-timeout.service\";\nimport { AuthService } from \"../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../auth/enums/authentication-status\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\nimport { CollectionService } from \"../../vault/abstractions/collection.service\";\nimport { FolderService } from \"../../vault/abstractions/folder/folder.service.abstraction\";\n\nexport class VaultTimeoutService implements VaultTimeoutServiceAbstraction {\n  private inited = false;\n\n  constructor(\n    private cipherService: CipherService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    private messagingService: MessagingService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    private lockedCallback: (userId?: string) => Promise<void> = null,\n    private loggedOutCallback: (expired: boolean, userId?: string) => Promise<void> = null\n  ) {}\n\n  async init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n    // TODO: Remove after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3483)\n    await this.migrateKeyForNeverLockIfNeeded();\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.startCheck();\n    }\n  }\n\n  startCheck() {\n    this.checkVaultTimeout();\n    setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n  }\n\n  async checkVaultTimeout(): Promise<void> {\n    if (await this.platformUtilsService.isViewOpen()) {\n      return;\n    }\n\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    for (const userId in accounts) {\n      if (userId != null && (await this.shouldLock(userId))) {\n        await this.executeTimeoutAction(userId);\n      }\n    }\n  }\n\n  async lock(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n\n    const availableActions = await firstValueFrom(\n      this.vaultTimeoutSettingsService.availableVaultTimeoutActions$()\n    );\n    const supportsLock = availableActions.includes(VaultTimeoutAction.Lock);\n    if (!supportsLock) {\n      await this.logOut(userId);\n    }\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      await this.folderService.clearCache();\n    }\n\n    await this.stateService.setEverBeenUnlocked(true, { userId: userId });\n    await this.stateService.setUserKeyAutoUnlock(null, { userId: userId });\n    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n\n    await this.cryptoService.clearUserKey(false, userId);\n    await this.cryptoService.clearMasterKey(userId);\n    await this.cryptoService.clearOrgKeys(true, userId);\n    await this.cryptoService.clearKeyPair(true, userId);\n\n    await this.cipherService.clearCache(userId);\n    await this.collectionService.clearCache(userId);\n\n    this.messagingService.send(\"locked\", { userId: userId });\n\n    if (this.lockedCallback != null) {\n      await this.lockedCallback(userId);\n    }\n  }\n\n  async logOut(userId?: string): Promise<void> {\n    if (this.loggedOutCallback != null) {\n      await this.loggedOutCallback(false, userId);\n    }\n  }\n\n  private async shouldLock(userId: string): Promise<boolean> {\n    const authStatus = await this.authService.getAuthStatus(userId);\n    if (\n      authStatus === AuthenticationStatus.Locked ||\n      authStatus === AuthenticationStatus.LoggedOut\n    ) {\n      return false;\n    }\n\n    const vaultTimeout = await this.vaultTimeoutSettingsService.getVaultTimeout(userId);\n    if (vaultTimeout == null || vaultTimeout < 0) {\n      return false;\n    }\n\n    const lastActive = await this.stateService.getLastActive({ userId: userId });\n    if (lastActive == null) {\n      return false;\n    }\n\n    const vaultTimeoutSeconds = vaultTimeout * 60;\n    const diffSeconds = (new Date().getTime() - lastActive) / 1000;\n    return diffSeconds >= vaultTimeoutSeconds;\n  }\n\n  private async executeTimeoutAction(userId: string): Promise<void> {\n    const timeoutAction = await firstValueFrom(\n      this.vaultTimeoutSettingsService.vaultTimeoutAction$(userId)\n    );\n    timeoutAction === VaultTimeoutAction.LogOut\n      ? await this.logOut(userId)\n      : await this.lock(userId);\n  }\n\n  private async migrateKeyForNeverLockIfNeeded(): Promise<void> {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    for (const userId in accounts) {\n      if (userId != null) {\n        await this.cryptoService.migrateAutoKeyIfNeeded(userId);\n      }\n    }\n  }\n}\n","import { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\nimport { Send } from \"../domain/send\";\n\nexport class SendRequest {\n  type: SendType;\n  fileLength?: number;\n  name: string;\n  notes: string;\n  key: string;\n  maxAccessCount?: number;\n  expirationDate: string;\n  deletionDate: string;\n  text: SendTextApi;\n  file: SendFileApi;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(send: Send, fileLength?: number) {\n    this.type = send.type;\n    this.fileLength = fileLength;\n    this.name = send.name ? send.name.encryptedString : null;\n    this.notes = send.notes ? send.notes.encryptedString : null;\n    this.maxAccessCount = send.maxAccessCount;\n    this.expirationDate = send.expirationDate != null ? send.expirationDate.toISOString() : null;\n    this.deletionDate = send.deletionDate != null ? send.deletionDate.toISOString() : null;\n    this.key = send.key != null ? send.key.encryptedString : null;\n    this.password = send.password;\n    this.disabled = send.disabled;\n    this.hideEmail = send.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextApi();\n        this.text.text = send.text.text != null ? send.text.text.encryptedString : null;\n        this.text.hidden = send.text.hidden;\n        break;\n      case SendType.File:\n        this.file = new SendFileApi();\n        this.file.fileName = send.file.fileName != null ? send.file.fileName.encryptedString : null;\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendAccessResponse extends BaseResponse {\n  id: string;\n  type: SendType;\n  name: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  expirationDate: Date;\n  creatorIdentifier: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.creatorIdentifier = this.getResponseProperty(\"CreatorIdentifier\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendFileDownloadDataResponse extends BaseResponse {\n  id: string = null;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { FileUploadType } from \"../../../../enums\";\nimport { BaseResponse } from \"../../../../models/response/base.response\";\n\nimport { SendResponse } from \"./send.response\";\n\nexport class SendFileUploadDataResponse extends BaseResponse {\n  fileUploadType: FileUploadType;\n  sendResponse: SendResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const sendResponse = this.getResponseProperty(\"SendResponse\");\n    this.sendResponse = sendResponse == null ? null : new SendResponse(sendResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { ErrorResponse } from \"../../../models/response/error.response\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService,\n} from \"../../../platform/abstractions/file-upload/file-upload.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { SendType } from \"../enums/send-type\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\n\nimport { SendApiService as SendApiServiceAbstraction } from \"./send-api.service.abstraction\";\nimport { InternalSendService } from \"./send.service.abstraction\";\n\nexport class SendApiService implements SendApiServiceAbstraction {\n  constructor(\n    private apiService: ApiService,\n    private fileUploadService: FileUploadService,\n    private sendService: InternalSendService\n  ) {}\n\n  async getSend(id: string): Promise<SendResponse> {\n    const r = await this.apiService.send(\"GET\", \"/sends/\" + id, null, true, true);\n    return new SendResponse(r);\n  }\n\n  async postSendAccess(\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendAccessResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", id);\n    };\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/sends/access/\" + id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendAccessResponse(r);\n  }\n\n  async getSendFileDownloadData(\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendFileDownloadDataResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", send.id);\n    };\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/sends/\" + send.id + \"/access/file/\" + send.file.id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendFileDownloadDataResponse(r);\n  }\n\n  async getSends(): Promise<ListResponse<SendResponse>> {\n    const r = await this.apiService.send(\"GET\", \"/sends\", null, true, true);\n    return new ListResponse(r, SendResponse);\n  }\n\n  async postSend(request: SendRequest): Promise<SendResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends\", request, true, true);\n    return new SendResponse(r);\n  }\n\n  async postFileTypeSend(request: SendRequest): Promise<SendFileUploadDataResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends/file/v2\", request, true, true);\n    return new SendFileUploadDataResponse(r);\n  }\n\n  async renewSendFileUploadUrl(\n    sendId: string,\n    fileId: string\n  ): Promise<SendFileUploadDataResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/sends/\" + sendId + \"/file/\" + fileId,\n      null,\n      true,\n      true\n    );\n    return new SendFileUploadDataResponse(r);\n  }\n\n  postSendFile(sendId: string, fileId: string, data: FormData): Promise<any> {\n    return this.apiService.send(\"POST\", \"/sends/\" + sendId + \"/file/\" + fileId, data, true, false);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postSendFileLegacy(data: FormData): Promise<SendResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends/file\", data, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSend(id: string, request: SendRequest): Promise<SendResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/sends/\" + id, request, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSendRemovePassword(id: string): Promise<SendResponse> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/sends/\" + id + \"/remove-password\",\n      null,\n      true,\n      true\n    );\n    return new SendResponse(r);\n  }\n\n  deleteSend(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/sends/\" + id, null, true, false);\n  }\n\n  async save(sendData: [Send, EncArrayBuffer]): Promise<any> {\n    const response = await this.upload(sendData);\n\n    const data = new SendData(response);\n    await this.sendService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteSend(id);\n    await this.sendService.delete(id);\n  }\n\n  async removePassword(id: string): Promise<any> {\n    const response = await this.putSendRemovePassword(id);\n    const data = new SendData(response);\n    await this.sendService.upsert(data);\n  }\n\n  // Send File Upload methods\n\n  private async upload(sendData: [Send, EncArrayBuffer]): Promise<SendResponse> {\n    const request = new SendRequest(sendData[0], sendData[1]?.buffer.byteLength);\n    let response: SendResponse;\n    if (sendData[0].id == null) {\n      if (sendData[0].type === SendType.Text) {\n        response = await this.postSend(request);\n      } else {\n        try {\n          const uploadDataResponse = await this.postFileTypeSend(request);\n          response = uploadDataResponse.sendResponse;\n          await this.fileUploadService.upload(\n            uploadDataResponse,\n            sendData[0].file.fileName,\n            sendData[1],\n            this.generateMethods(uploadDataResponse, response)\n          );\n        } catch (e) {\n          if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n            response = await this.legacyServerSendFileUpload(sendData, request);\n          } else if (e instanceof ErrorResponse) {\n            throw new Error((e as ErrorResponse).getSingleMessage());\n          } else {\n            throw e;\n          }\n        }\n      }\n      sendData[0].id = response.id;\n      sendData[0].accessId = response.accessId;\n    } else {\n      response = await this.putSend(sendData[0].id, request);\n    }\n    return response;\n  }\n\n  private generateMethods(\n    uploadData: SendFileUploadDataResponse,\n    response: SendResponse\n  ): FileUploadApiMethods {\n    return {\n      postDirect: this.generatePostDirectCallback(response),\n      renewFileUploadUrl: this.generateRenewFileUploadUrlCallback(response.id, response.file.id),\n      rollback: this.generateRollbackCallback(response.id),\n    };\n  }\n\n  private generatePostDirectCallback(sendResponse: SendResponse) {\n    return (data: FormData) => {\n      return this.postSendFile(sendResponse.id, sendResponse.file.id, data);\n    };\n  }\n\n  private generateRenewFileUploadUrlCallback(sendId: string, fileId: string) {\n    return async () => {\n      const renewResponse = await this.renewSendFileUploadUrl(sendId, fileId);\n      return renewResponse?.url;\n    };\n  }\n\n  private generateRollbackCallback(sendId: string) {\n    return () => {\n      return this.deleteSend(sendId);\n    };\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerSendFileUpload(\n    sendData: [Send, EncArrayBuffer],\n    request: SendRequest\n  ): Promise<SendResponse> {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([sendData[1].buffer], { type: \"application/octet-stream\" });\n      fd.append(\"model\", JSON.stringify(request));\n      fd.append(\"data\", blob, sendData[0].file.fileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"model\", JSON.stringify(request));\n        fd.append(\n          \"data\",\n          Buffer.from(sendData[1].buffer) as any,\n          {\n            filepath: sendData[0].file.fileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n    return await this.postSendFileLegacy(fd);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendFileData } from \"../data/send-file.data\";\nimport { SendFileView } from \"../view/send-file.view\";\n\nexport class SendFile extends Domain {\n  id: string;\n  size: string;\n  sizeName: string;\n  fileName: EncString;\n\n  constructor(obj?: SendFileData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        sizeName: null,\n        fileName: null,\n      },\n      [\"id\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(key: SymmetricCryptoKey): Promise<SendFileView> {\n    const view = await this.decryptObj(\n      new SendFileView(this),\n      {\n        fileName: null,\n      },\n      null,\n      key\n    );\n    return view;\n  }\n\n  static fromJSON(obj: Jsonify<SendFile>) {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFile(), obj, {\n      fileName: EncString.fromJSON(obj.fileName),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendTextData } from \"../data/send-text.data\";\nimport { SendTextView } from \"../view/send-text.view\";\n\nexport class SendText extends Domain {\n  text: EncString;\n  hidden: boolean;\n\n  constructor(obj?: SendTextData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.hidden = obj.hidden;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        text: null,\n      },\n      []\n    );\n  }\n\n  decrypt(key: SymmetricCryptoKey): Promise<SendTextView> {\n    return this.decryptObj(\n      new SendTextView(this),\n      {\n        text: null,\n      },\n      null,\n      key\n    );\n  }\n\n  static fromJSON(obj: Jsonify<SendText>) {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SendText(), obj, {\n      text: EncString.fromJSON(obj.text),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../../platform/misc/utils\";\nimport Domain from \"../../../../platform/models/domain/domain-base\";\nimport { EncString } from \"../../../../platform/models/domain/enc-string\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendData } from \"../data/send.data\";\nimport { SendView } from \"../view/send.view\";\n\nimport { SendFile } from \"./send-file\";\nimport { SendText } from \"./send-text\";\n\nexport class Send extends Domain {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: EncString;\n  notes: EncString;\n  file: SendFile;\n  text: SendText;\n  key: EncString;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: Date;\n  expirationDate: Date;\n  deletionDate: Date;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(obj?: SendData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        accessId: null,\n        name: null,\n        notes: null,\n        key: null,\n      },\n      [\"id\", \"accessId\"]\n    );\n\n    this.type = obj.type;\n    this.maxAccessCount = obj.maxAccessCount;\n    this.accessCount = obj.accessCount;\n    this.password = obj.password;\n    this.disabled = obj.disabled;\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.deletionDate = obj.deletionDate != null ? new Date(obj.deletionDate) : null;\n    this.expirationDate = obj.expirationDate != null ? new Date(obj.expirationDate) : null;\n    this.hideEmail = obj.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendText(obj.text);\n        break;\n      case SendType.File:\n        this.file = new SendFile(obj.file);\n        break;\n      default:\n        break;\n    }\n  }\n\n  async decrypt(): Promise<SendView> {\n    const model = new SendView(this);\n\n    const cryptoService = Utils.getContainerService().getCryptoService();\n\n    try {\n      model.key = await cryptoService.decryptToBytes(this.key, null);\n      model.cryptoKey = await cryptoService.makeSendKey(model.key);\n    } catch (e) {\n      // TODO: error?\n    }\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      null,\n      model.cryptoKey\n    );\n\n    switch (this.type) {\n      case SendType.File:\n        model.file = await this.file.decrypt(model.cryptoKey);\n        break;\n      case SendType.Text:\n        model.text = await this.text.decrypt(model.cryptoKey);\n        break;\n      default:\n        break;\n    }\n\n    return model;\n  }\n\n  static fromJSON(obj: Jsonify<Send>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const expirationDate = obj.expirationDate == null ? null : new Date(obj.expirationDate);\n    const deletionDate = obj.deletionDate == null ? null : new Date(obj.deletionDate);\n\n    return Object.assign(new Send(), obj, {\n      key: EncString.fromJSON(obj.key),\n      name: EncString.fromJSON(obj.name),\n      notes: EncString.fromJSON(obj.notes),\n      text: SendText.fromJSON(obj.text),\n      file: SendFile.fromJSON(obj.file),\n      revisionDate,\n      expirationDate,\n      deletionDate,\n    });\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { SEND_KDF_ITERATIONS } from \"../../../enums\";\nimport { CryptoFunctionService } from \"../../../platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { SendType } from \"../enums/send-type\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendFile } from \"../models/domain/send-file\";\nimport { SendText } from \"../models/domain/send-text\";\nimport { SendView } from \"../models/view/send.view\";\n\nimport { InternalSendService as InternalSendServiceAbstraction } from \"./send.service.abstraction\";\n\nexport class SendService implements InternalSendServiceAbstraction {\n  protected _sends: BehaviorSubject<Send[]> = new BehaviorSubject([]);\n  protected _sendViews: BehaviorSubject<SendView[]> = new BehaviorSubject([]);\n\n  sends$ = this._sends.asObservable();\n  sendViews$ = this._sendViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._sends.next([]);\n            this._sendViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedSends();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    await this._sendViews.next([]);\n  }\n\n  async encrypt(\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ): Promise<[Send, EncArrayBuffer]> {\n    let fileData: EncArrayBuffer = null;\n    const send = new Send();\n    send.id = model.id;\n    send.type = model.type;\n    send.disabled = model.disabled;\n    send.hideEmail = model.hideEmail;\n    send.maxAccessCount = model.maxAccessCount;\n    if (model.key == null) {\n      model.key = await this.cryptoFunctionService.aesGenerateKey(128);\n      model.cryptoKey = await this.cryptoService.makeSendKey(model.key);\n    }\n    if (password != null) {\n      const passwordHash = await this.cryptoFunctionService.pbkdf2(\n        password,\n        model.key,\n        \"sha256\",\n        SEND_KDF_ITERATIONS\n      );\n      send.password = Utils.fromBufferToB64(passwordHash);\n    }\n    send.key = await this.cryptoService.encrypt(model.key, key);\n    send.name = await this.cryptoService.encrypt(model.name, model.cryptoKey);\n    send.notes = await this.cryptoService.encrypt(model.notes, model.cryptoKey);\n    if (send.type === SendType.Text) {\n      send.text = new SendText();\n      send.text.text = await this.cryptoService.encrypt(model.text.text, model.cryptoKey);\n      send.text.hidden = model.text.hidden;\n    } else if (send.type === SendType.File) {\n      send.file = new SendFile();\n      if (file != null) {\n        if (file instanceof ArrayBuffer) {\n          const [name, data] = await this.encryptFileData(\n            model.file.fileName,\n            file,\n            model.cryptoKey\n          );\n          send.file.fileName = name;\n          fileData = data;\n        } else {\n          fileData = await this.parseFile(send, file, model.cryptoKey);\n        }\n      }\n    }\n\n    return [send, fileData];\n  }\n\n  get(id: string): Send {\n    const sends = this._sends.getValue();\n    return sends.find((send) => send.id === id);\n  }\n\n  async getFromState(id: string): Promise<Send> {\n    const sends = await this.stateService.getEncryptedSends();\n    // eslint-disable-next-line\n    if (sends == null || !sends.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Send(sends[id]);\n  }\n\n  async getAll(): Promise<Send[]> {\n    const sends = await this.stateService.getEncryptedSends();\n    const response: Send[] = [];\n    for (const id in sends) {\n      // eslint-disable-next-line\n      if (sends.hasOwnProperty(id)) {\n        response.push(new Send(sends[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecryptedFromState(): Promise<SendView[]> {\n    let decSends = await this.stateService.getDecryptedSends();\n    if (decSends != null) {\n      return decSends;\n    }\n\n    decSends = [];\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      throw new Error(\"No user key found.\");\n    }\n\n    const promises: Promise<any>[] = [];\n    const sends = await this.getAll();\n    sends.forEach((send) => {\n      promises.push(send.decrypt().then((f) => decSends.push(f)));\n    });\n\n    await Promise.all(promises);\n    decSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    await this.stateService.setDecryptedSends(decSends);\n    return decSends;\n  }\n\n  async upsert(send: SendData | SendData[]): Promise<any> {\n    let sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      sends = {};\n    }\n    if (send instanceof SendData) {\n      const s = send as SendData;\n      sends[s.id] = s;\n    } else {\n      (send as SendData[]).forEach((s) => {\n        sends[s.id] = s;\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._sends.next([]);\n      this._sendViews.next([]);\n    }\n    await this.stateService.setDecryptedSends(null, { userId: userId });\n    await this.stateService.setEncryptedSends(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (sends[id] == null) {\n        return;\n      }\n      delete sends[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete sends[i];\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async replace(sends: { [id: string]: SendData }): Promise<any> {\n    await this.updateObservables(sends);\n    await this.stateService.setEncryptedSends(sends);\n  }\n\n  private parseFile(send: Send, file: File, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n      reader.onload = async (evt) => {\n        try {\n          const [name, data] = await this.encryptFileData(\n            file.name,\n            evt.target.result as ArrayBuffer,\n            key\n          );\n          send.file.fileName = name;\n          resolve(data);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  private async encryptFileData(\n    fileName: string,\n    data: ArrayBuffer,\n    key: SymmetricCryptoKey\n  ): Promise<[EncString, EncArrayBuffer]> {\n    const encFileName = await this.cryptoService.encrypt(fileName, key);\n    const encFileData = await this.cryptoService.encryptToBytes(new Uint8Array(data), key);\n    return [encFileName, encFileData];\n  }\n\n  private async updateObservables(sendsMap: { [id: string]: SendData }) {\n    const sends = Object.values(sendsMap || {}).map((f) => new Send(f));\n    this._sends.next(sends);\n\n    if (await this.cryptoService.hasUserKey()) {\n      this._sendViews.next(await this.decryptSends(sends));\n    }\n  }\n\n  private async decryptSends(sends: Send[]) {\n    const decryptSendPromises = sends.map((s) => s.decrypt());\n    const decryptedSends = await Promise.all(decryptSendPromises);\n\n    decryptedSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n    return decryptedSends;\n  }\n}\n","import { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { Cipher } from \"../../models/domain/cipher\";\nimport { CipherResponse } from \"../../models/response/cipher.response\";\n\nexport abstract class CipherFileUploadService {\n  upload: (\n    cipher: Cipher,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    admin: boolean,\n    dataEncKey: [SymmetricCryptoKey, EncString]\n  ) => Promise<CipherResponse>;\n}\n","import { CipherView } from \"../view/cipher.view\";\n\nconst CacheTTL = 3000;\n\nexport class SortedCiphersCache {\n  private readonly sortedCiphersByUrl: Map<string, Ciphers> = new Map<string, Ciphers>();\n  private readonly timeouts: Map<string, any> = new Map<string, any>();\n\n  constructor(private readonly comparator: (a: CipherView, b: CipherView) => number) {}\n\n  isCached(url: string) {\n    return this.sortedCiphersByUrl.has(url);\n  }\n\n  addCiphers(url: string, ciphers: CipherView[]) {\n    ciphers.sort(this.comparator);\n    this.sortedCiphersByUrl.set(url, new Ciphers(ciphers));\n    this.resetTimer(url);\n  }\n\n  getLastUsed(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastUsed() : null;\n  }\n\n  getLastLaunched(url: string) {\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastLaunched() : null;\n  }\n\n  getNext(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getNext() : null;\n  }\n\n  updateLastUsedIndex(url: string) {\n    if (this.isCached(url)) {\n      this.sortedCiphersByUrl.get(url).updateLastUsedIndex();\n    }\n  }\n\n  clear() {\n    this.sortedCiphersByUrl.clear();\n    this.timeouts.clear();\n  }\n\n  private resetTimer(url: string) {\n    clearTimeout(this.timeouts.get(url));\n    this.timeouts.set(\n      url,\n      setTimeout(() => {\n        this.sortedCiphersByUrl.delete(url);\n        this.timeouts.delete(url);\n      }, CacheTTL)\n    );\n  }\n}\n\nclass Ciphers {\n  lastUsedIndex = -1;\n\n  constructor(private readonly ciphers: CipherView[]) {}\n\n  getLastUsed() {\n    this.lastUsedIndex = Math.max(this.lastUsedIndex, 0);\n    return this.ciphers[this.lastUsedIndex];\n  }\n\n  getLastLaunched() {\n    const usedCiphers = this.ciphers.filter((cipher) => cipher.localData?.lastLaunched);\n    const sortedCiphers = usedCiphers.sort(\n      (x, y) => y.localData.lastLaunched.valueOf() - x.localData.lastLaunched.valueOf()\n    );\n    return sortedCiphers[0];\n  }\n\n  getNextIndex() {\n    return (this.lastUsedIndex + 1) % this.ciphers.length;\n  }\n\n  getNext() {\n    return this.ciphers[this.getNextIndex()];\n  }\n\n  updateLastUsedIndex() {\n    this.lastUsedIndex = this.getNextIndex();\n  }\n}\n","export class CipherBulkDeleteRequest {\n  ids: string[];\n  organizationId: string;\n\n  constructor(ids: string[], organizationId?: string) {\n    this.ids = ids == null ? [] : ids;\n    this.organizationId = organizationId;\n  }\n}\n","export class CipherBulkMoveRequest {\n  ids: string[];\n  folderId: string;\n\n  constructor(ids: string[], folderId: string) {\n    this.ids = ids == null ? [] : ids;\n    this.folderId = folderId;\n  }\n}\n","export class CipherBulkRestoreRequest {\n  ids: string[];\n  organizationId: string;\n\n  constructor(ids: string[], organizationId?: string) {\n    this.ids = ids == null ? [] : ids;\n    this.organizationId = organizationId;\n  }\n}\n","export class AttachmentRequest {\n  fileName: string;\n  key: string;\n  fileSize: number;\n  adminRequest: boolean;\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentRequest } from \"./attachment.request\";\nimport { PasswordHistoryRequest } from \"./password-history.request\";\n\nexport class CipherRequest {\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  name: string;\n  notes: string;\n  favorite: boolean;\n  login: LoginApi;\n  secureNote: SecureNoteApi;\n  card: CardApi;\n  identity: IdentityApi;\n  fields: FieldApi[];\n  passwordHistory: PasswordHistoryRequest[];\n  // Deprecated, remove at some point and rename attachments2 to attachments\n  attachments: { [id: string]: string };\n  attachments2: { [id: string]: AttachmentRequest };\n  lastKnownRevisionDate: Date;\n  reprompt: CipherRepromptType;\n  key: string;\n\n  constructor(cipher: Cipher) {\n    this.type = cipher.type;\n    this.folderId = cipher.folderId;\n    this.organizationId = cipher.organizationId;\n    this.name = cipher.name ? cipher.name.encryptedString : null;\n    this.notes = cipher.notes ? cipher.notes.encryptedString : null;\n    this.favorite = cipher.favorite;\n    this.lastKnownRevisionDate = cipher.revisionDate;\n    this.reprompt = cipher.reprompt;\n    this.key = cipher.key?.encryptedString;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginApi();\n        this.login.uris = null;\n        this.login.username = cipher.login.username ? cipher.login.username.encryptedString : null;\n        this.login.password = cipher.login.password ? cipher.login.password.encryptedString : null;\n        this.login.passwordRevisionDate =\n          cipher.login.passwordRevisionDate != null\n            ? cipher.login.passwordRevisionDate.toISOString()\n            : null;\n        this.login.totp = cipher.login.totp ? cipher.login.totp.encryptedString : null;\n        this.login.autofillOnPageLoad = cipher.login.autofillOnPageLoad;\n\n        if (cipher.login.uris != null) {\n          this.login.uris = cipher.login.uris.map((u) => {\n            const uri = new LoginUriApi();\n            uri.uri = u.uri != null ? u.uri.encryptedString : null;\n            uri.match = u.match != null ? u.match : null;\n            return uri;\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteApi();\n        this.secureNote.type = cipher.secureNote.type;\n        break;\n      case CipherType.Card:\n        this.card = new CardApi();\n        this.card.cardholderName =\n          cipher.card.cardholderName != null ? cipher.card.cardholderName.encryptedString : null;\n        this.card.brand = cipher.card.brand != null ? cipher.card.brand.encryptedString : null;\n        this.card.number = cipher.card.number != null ? cipher.card.number.encryptedString : null;\n        this.card.expMonth =\n          cipher.card.expMonth != null ? cipher.card.expMonth.encryptedString : null;\n        this.card.expYear =\n          cipher.card.expYear != null ? cipher.card.expYear.encryptedString : null;\n        this.card.code = cipher.card.code != null ? cipher.card.code.encryptedString : null;\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityApi();\n        this.identity.title =\n          cipher.identity.title != null ? cipher.identity.title.encryptedString : null;\n        this.identity.firstName =\n          cipher.identity.firstName != null ? cipher.identity.firstName.encryptedString : null;\n        this.identity.middleName =\n          cipher.identity.middleName != null ? cipher.identity.middleName.encryptedString : null;\n        this.identity.lastName =\n          cipher.identity.lastName != null ? cipher.identity.lastName.encryptedString : null;\n        this.identity.address1 =\n          cipher.identity.address1 != null ? cipher.identity.address1.encryptedString : null;\n        this.identity.address2 =\n          cipher.identity.address2 != null ? cipher.identity.address2.encryptedString : null;\n        this.identity.address3 =\n          cipher.identity.address3 != null ? cipher.identity.address3.encryptedString : null;\n        this.identity.city =\n          cipher.identity.city != null ? cipher.identity.city.encryptedString : null;\n        this.identity.state =\n          cipher.identity.state != null ? cipher.identity.state.encryptedString : null;\n        this.identity.postalCode =\n          cipher.identity.postalCode != null ? cipher.identity.postalCode.encryptedString : null;\n        this.identity.country =\n          cipher.identity.country != null ? cipher.identity.country.encryptedString : null;\n        this.identity.company =\n          cipher.identity.company != null ? cipher.identity.company.encryptedString : null;\n        this.identity.email =\n          cipher.identity.email != null ? cipher.identity.email.encryptedString : null;\n        this.identity.phone =\n          cipher.identity.phone != null ? cipher.identity.phone.encryptedString : null;\n        this.identity.ssn =\n          cipher.identity.ssn != null ? cipher.identity.ssn.encryptedString : null;\n        this.identity.username =\n          cipher.identity.username != null ? cipher.identity.username.encryptedString : null;\n        this.identity.passportNumber =\n          cipher.identity.passportNumber != null\n            ? cipher.identity.passportNumber.encryptedString\n            : null;\n        this.identity.licenseNumber =\n          cipher.identity.licenseNumber != null\n            ? cipher.identity.licenseNumber.encryptedString\n            : null;\n        break;\n      default:\n        break;\n    }\n\n    if (cipher.fields != null) {\n      this.fields = cipher.fields.map((f) => {\n        const field = new FieldApi();\n        field.type = f.type;\n        field.name = f.name ? f.name.encryptedString : null;\n        field.value = f.value ? f.value.encryptedString : null;\n        field.linkedId = f.linkedId;\n        return field;\n      });\n    }\n\n    if (cipher.passwordHistory != null) {\n      this.passwordHistory = [];\n      cipher.passwordHistory.forEach((ph) => {\n        this.passwordHistory.push({\n          lastUsedDate: ph.lastUsedDate,\n          password: ph.password ? ph.password.encryptedString : null,\n        });\n      });\n    }\n\n    if (cipher.attachments != null) {\n      this.attachments = {};\n      this.attachments2 = {};\n      cipher.attachments.forEach((attachment) => {\n        const fileName = attachment.fileName ? attachment.fileName.encryptedString : null;\n        this.attachments[attachment.id] = fileName;\n        const attachmentRequest = new AttachmentRequest();\n        attachmentRequest.fileName = fileName;\n        if (attachment.key != null) {\n          attachmentRequest.key = attachment.key.encryptedString;\n        }\n        this.attachments2[attachment.id] = attachmentRequest;\n      });\n    }\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherWithIdRequest extends CipherRequest {\n  id: string;\n\n  constructor(cipher: Cipher) {\n    super(cipher);\n    this.id = cipher.id;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherWithIdRequest } from \"./cipher-with-id.request\";\n\nexport class CipherBulkShareRequest {\n  ciphers: CipherWithIdRequest[];\n  collectionIds: string[];\n\n  constructor(ciphers: Cipher[], collectionIds: string[]) {\n    if (ciphers != null) {\n      this.ciphers = [];\n      ciphers.forEach((c) => {\n        this.ciphers.push(new CipherWithIdRequest(c));\n      });\n    }\n    this.collectionIds = collectionIds;\n  }\n}\n","export class CipherCollectionsRequest {\n  collectionIds: string[];\n\n  constructor(collectionIds: string[]) {\n    this.collectionIds = collectionIds == null ? [] : collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherCreateRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nexport class CipherPartialRequest {\n  folderId: string;\n  favorite: boolean;\n\n  constructor(cipher: Cipher) {\n    this.folderId = cipher.folderId;\n    this.favorite = cipher.favorite;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherShareRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\nimport { SemVer } from \"semver\";\n\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { SettingsService } from \"../../abstractions/settings.service\";\nimport { FieldType, UriMatchType } from \"../../enums\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { View } from \"../../models/view/view\";\nimport { ConfigServiceAbstraction } from \"../../platform/abstractions/config/config.service.abstraction\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { EncryptService } from \"../../platform/abstractions/encrypt.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { flagEnabled } from \"../../platform/misc/flags\";\nimport { sequentialize } from \"../../platform/misc/sequentialize\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport Domain from \"../../platform/models/domain/domain-base\";\nimport { EncArrayBuffer } from \"../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../platform/models/domain/enc-string\";\nimport {\n  OrgKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherService as CipherServiceAbstraction } from \"../abstractions/cipher.service\";\nimport { CipherFileUploadService } from \"../abstractions/file-upload/cipher-file-upload.service\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Attachment } from \"../models/domain/attachment\";\nimport { Card } from \"../models/domain/card\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { Identity } from \"../models/domain/identity\";\nimport { Login } from \"../models/domain/login\";\nimport { LoginUri } from \"../models/domain/login-uri\";\nimport { Password } from \"../models/domain/password\";\nimport { SecureNote } from \"../models/domain/secure-note\";\nimport { SortedCiphersCache } from \"../models/domain/sorted-ciphers-cache\";\nimport { CipherBulkDeleteRequest } from \"../models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../models/request/cipher-share.request\";\nimport { CipherRequest } from \"../models/request/cipher.request\";\nimport { CipherResponse } from \"../models/response/cipher.response\";\nimport { AttachmentView } from \"../models/view/attachment.view\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\nimport { PasswordHistoryView } from \"../models/view/password-history.view\";\n\nconst CIPHER_KEY_ENC_MIN_SERVER_VER = new SemVer(\"2023.9.1\");\n\nexport class CipherService implements CipherServiceAbstraction {\n  private sortedCiphersCache: SortedCiphersCache = new SortedCiphersCache(\n    this.sortCiphersByLastUsed\n  );\n\n  constructor(\n    private cryptoService: CryptoService,\n    private settingsService: SettingsService,\n    private apiService: ApiService,\n    private i18nService: I18nService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private encryptService: EncryptService,\n    private cipherFileUploadService: CipherFileUploadService,\n    private configService: ConfigServiceAbstraction\n  ) {}\n\n  async getDecryptedCipherCache(): Promise<CipherView[]> {\n    const decryptedCiphers = await this.stateService.getDecryptedCiphers();\n    return decryptedCiphers;\n  }\n\n  async setDecryptedCipherCache(value: CipherView[]) {\n    await this.stateService.setDecryptedCiphers(value);\n    if (this.searchService != null) {\n      if (value == null) {\n        this.searchService.clearIndex();\n      } else {\n        this.searchService.indexCiphers(value);\n      }\n    }\n  }\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.clearDecryptedCiphersState(userId);\n  }\n\n  async encrypt(\n    model: CipherView,\n    keyForEncryption?: SymmetricCryptoKey,\n    keyForCipherKeyDecryption?: SymmetricCryptoKey,\n    originalCipher: Cipher = null\n  ): Promise<Cipher> {\n    if (model.id != null) {\n      if (originalCipher == null) {\n        originalCipher = await this.get(model.id);\n      }\n      if (originalCipher != null) {\n        await this.updateModelfromExistingCipher(model, originalCipher);\n      }\n      this.adjustPasswordHistoryLength(model);\n    }\n\n    const cipher = new Cipher();\n    cipher.id = model.id;\n    cipher.folderId = model.folderId;\n    cipher.favorite = model.favorite;\n    cipher.organizationId = model.organizationId;\n    cipher.type = model.type;\n    cipher.collectionIds = model.collectionIds;\n    cipher.revisionDate = model.revisionDate;\n    cipher.reprompt = model.reprompt;\n    cipher.edit = model.edit;\n\n    if (await this.getCipherKeyEncryptionEnabled()) {\n      cipher.key = originalCipher?.key ?? null;\n      const userOrOrgKey = await this.getKeyForCipherKeyDecryption(cipher);\n      // The keyForEncryption is only used for encrypting the cipher key, not the cipher itself, since cipher key encryption is enabled.\n      // If the caller has provided a key for cipher key encryption, use it. Otherwise, use the user or org key.\n      keyForEncryption ||= userOrOrgKey;\n      // If the caller has provided a key for cipher key decryption, use it. Otherwise, use the user or org key.\n      keyForCipherKeyDecryption ||= userOrOrgKey;\n      return this.encryptCipherWithCipherKey(\n        model,\n        cipher,\n        keyForEncryption,\n        keyForCipherKeyDecryption\n      );\n    } else {\n      if (keyForEncryption == null && cipher.organizationId != null) {\n        keyForEncryption = await this.cryptoService.getOrgKey(cipher.organizationId);\n        if (keyForEncryption == null) {\n          throw new Error(\"Cannot encrypt cipher for organization. No key.\");\n        }\n      }\n      // We want to ensure that the cipher key is null if cipher key encryption is disabled\n      // so that decryption uses the proper key.\n      cipher.key = null;\n      return this.encryptCipher(model, cipher, keyForEncryption);\n    }\n  }\n\n  async encryptAttachments(\n    attachmentsModel: AttachmentView[],\n    key: SymmetricCryptoKey\n  ): Promise<Attachment[]> {\n    if (attachmentsModel == null || attachmentsModel.length === 0) {\n      return null;\n    }\n\n    const promises: Promise<any>[] = [];\n    const encAttachments: Attachment[] = [];\n    attachmentsModel.forEach(async (model) => {\n      const attachment = new Attachment();\n      attachment.id = model.id;\n      attachment.size = model.size;\n      attachment.sizeName = model.sizeName;\n      attachment.url = model.url;\n      const promise = this.encryptObjProperty(\n        model,\n        attachment,\n        {\n          fileName: null,\n        },\n        key\n      ).then(async () => {\n        if (model.key != null) {\n          attachment.key = await this.cryptoService.encrypt(model.key.key, key);\n        }\n        encAttachments.push(attachment);\n      });\n      promises.push(promise);\n    });\n\n    await Promise.all(promises);\n    return encAttachments;\n  }\n\n  async encryptFields(fieldsModel: FieldView[], key: SymmetricCryptoKey): Promise<Field[]> {\n    if (!fieldsModel || !fieldsModel.length) {\n      return null;\n    }\n\n    const self = this;\n    const encFields: Field[] = [];\n    await fieldsModel.reduce(async (promise, field) => {\n      await promise;\n      const encField = await self.encryptField(field, key);\n      encFields.push(encField);\n    }, Promise.resolve());\n\n    return encFields;\n  }\n\n  async encryptField(fieldModel: FieldView, key: SymmetricCryptoKey): Promise<Field> {\n    const field = new Field();\n    field.type = fieldModel.type;\n    field.linkedId = fieldModel.linkedId;\n    // normalize boolean type field values\n    if (fieldModel.type === FieldType.Boolean && fieldModel.value !== \"true\") {\n      fieldModel.value = \"false\";\n    }\n\n    await this.encryptObjProperty(\n      fieldModel,\n      field,\n      {\n        name: null,\n        value: null,\n      },\n      key\n    );\n\n    return field;\n  }\n\n  async encryptPasswordHistories(\n    phModels: PasswordHistoryView[],\n    key: SymmetricCryptoKey\n  ): Promise<Password[]> {\n    if (!phModels || !phModels.length) {\n      return null;\n    }\n\n    const self = this;\n    const encPhs: Password[] = [];\n    await phModels.reduce(async (promise, ph) => {\n      await promise;\n      const encPh = await self.encryptPasswordHistory(ph, key);\n      encPhs.push(encPh);\n    }, Promise.resolve());\n\n    return encPhs;\n  }\n\n  async encryptPasswordHistory(\n    phModel: PasswordHistoryView,\n    key: SymmetricCryptoKey\n  ): Promise<Password> {\n    const ph = new Password();\n    ph.lastUsedDate = phModel.lastUsedDate;\n\n    await this.encryptObjProperty(\n      phModel,\n      ph,\n      {\n        password: null,\n      },\n      key\n    );\n\n    return ph;\n  }\n\n  async get(id: string): Promise<Cipher> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    const localData = await this.stateService.getLocalData();\n    return new Cipher(ciphers[id], localData ? localData[id] : null);\n  }\n\n  async getAll(): Promise<Cipher[]> {\n    const localData = await this.stateService.getLocalData();\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    const response: Cipher[] = [];\n    for (const id in ciphers) {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        response.push(new Cipher(ciphers[id], localData ? localData[id] : null));\n      }\n    }\n    return response;\n  }\n\n  @sequentialize(() => \"getAllDecrypted\")\n  async getAllDecrypted(): Promise<CipherView[]> {\n    if ((await this.getDecryptedCipherCache()) != null) {\n      await this.reindexCiphers();\n      return await this.getDecryptedCipherCache();\n    }\n\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      throw new Error(\"No user key found.\");\n    }\n\n    const ciphers = await this.getAll();\n    const orgKeys = await this.cryptoService.getOrgKeys();\n    const userKey = await this.cryptoService.getUserKeyWithLegacySupport();\n\n    // Group ciphers by orgId or under 'null' for the user's ciphers\n    const grouped = ciphers.reduce((agg, c) => {\n      agg[c.organizationId] ??= [];\n      agg[c.organizationId].push(c);\n      return agg;\n    }, {} as Record<string, Cipher[]>);\n\n    const decCiphers = (\n      await Promise.all(\n        Object.entries(grouped).map(([orgId, groupedCiphers]) =>\n          this.encryptService.decryptItems(groupedCiphers, orgKeys.get(orgId) ?? userKey)\n        )\n      )\n    )\n      .flat()\n      .sort(this.getLocaleSortingFunction());\n\n    await this.setDecryptedCipherCache(decCiphers);\n    return decCiphers;\n  }\n\n  private async reindexCiphers() {\n    const userId = await this.stateService.getUserId();\n    const reindexRequired =\n      this.searchService != null && (this.searchService.indexedEntityId ?? userId) !== userId;\n    if (reindexRequired) {\n      this.searchService.indexCiphers(await this.getDecryptedCipherCache(), userId);\n    }\n  }\n\n  async getAllDecryptedForGrouping(groupingId: string, folder = true): Promise<CipherView[]> {\n    const ciphers = await this.getAllDecrypted();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.isDeleted) {\n        return false;\n      }\n      if (folder && cipher.folderId === groupingId) {\n        return true;\n      } else if (\n        !folder &&\n        cipher.collectionIds != null &&\n        cipher.collectionIds.indexOf(groupingId) > -1\n      ) {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  async getAllDecryptedForUrl(\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch: UriMatchType = null\n  ): Promise<CipherView[]> {\n    if (url == null && includeOtherTypes == null) {\n      return Promise.resolve([]);\n    }\n\n    const equivalentDomains = this.settingsService.getEquivalentDomains(url);\n    const ciphers = await this.getAllDecrypted();\n    defaultMatch ??= await this.stateService.getDefaultUriMatch();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.deletedDate != null) {\n        return false;\n      }\n      if (includeOtherTypes != null && includeOtherTypes.indexOf(cipher.type) > -1) {\n        return true;\n      }\n\n      if (cipher.type === CipherType.Login && cipher.login !== null) {\n        return cipher.login.matchesUri(url, equivalentDomains, defaultMatch);\n      }\n\n      return false;\n    });\n  }\n\n  async getAllFromApiForOrganization(organizationId: string): Promise<CipherView[]> {\n    const response = await this.apiService.getCiphersOrganization(organizationId);\n    if (response?.data == null || response.data.length < 1) {\n      return [];\n    }\n\n    const ciphers = response.data.map((cr) => new Cipher(new CipherData(cr)));\n    const key = await this.cryptoService.getOrgKey(organizationId);\n    const decCiphers = await this.encryptService.decryptItems(ciphers, key);\n\n    decCiphers.sort(this.getLocaleSortingFunction());\n    return decCiphers;\n  }\n\n  async getLastUsedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, true, false, autofillOnPageLoad);\n  }\n\n  async getLastLaunchedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, true, autofillOnPageLoad);\n  }\n\n  async getNextCipherForUrl(url: string): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, false, false);\n  }\n\n  updateLastUsedIndexForUrl(url: string) {\n    this.sortedCiphersCache.updateLastUsedIndex(url);\n  }\n\n  async updateLastUsedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastUsedDate = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async updateLastLaunchedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastLaunched = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async saveNeverDomain(domain: string): Promise<void> {\n    if (domain == null) {\n      return;\n    }\n\n    let domains = await this.stateService.getNeverDomains();\n    if (!domains) {\n      domains = {};\n    }\n    domains[domain] = null;\n    await this.stateService.setNeverDomains(domains);\n  }\n\n  async createWithServer(cipher: Cipher, orgAdmin?: boolean): Promise<any> {\n    let response: CipherResponse;\n    if (orgAdmin && cipher.organizationId != null) {\n      const request = new CipherCreateRequest(cipher);\n      response = await this.apiService.postCipherAdmin(request);\n    } else if (cipher.collectionIds != null) {\n      const request = new CipherCreateRequest(cipher);\n      response = await this.apiService.postCipherCreate(request);\n    } else {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.postCipher(request);\n    }\n    cipher.id = response.id;\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async updateWithServer(cipher: Cipher, orgAdmin?: boolean, isNotClone?: boolean): Promise<any> {\n    let response: CipherResponse;\n    if (orgAdmin && isNotClone) {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.putCipherAdmin(cipher.id, request);\n    } else if (cipher.edit) {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.putCipher(cipher.id, request);\n    } else {\n      const request = new CipherPartialRequest(cipher);\n      response = await this.apiService.putPartialCipher(cipher.id, request);\n    }\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareWithServer(\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const attachmentPromises: Promise<any>[] = [];\n    if (cipher.attachments != null) {\n      cipher.attachments.forEach((attachment) => {\n        if (attachment.key == null) {\n          attachmentPromises.push(\n            this.shareAttachmentWithServer(attachment, cipher.id, organizationId)\n          );\n        }\n      });\n    }\n    await Promise.all(attachmentPromises);\n\n    cipher.organizationId = organizationId;\n    cipher.collectionIds = collectionIds;\n    const encCipher = await this.encryptSharedCipher(cipher);\n    const request = new CipherShareRequest(encCipher);\n    const response = await this.apiService.putShareCipher(cipher.id, request);\n    const data = new CipherData(response, collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareManyWithServer(\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const promises: Promise<any>[] = [];\n    const encCiphers: Cipher[] = [];\n    for (const cipher of ciphers) {\n      cipher.organizationId = organizationId;\n      cipher.collectionIds = collectionIds;\n      promises.push(\n        this.encryptSharedCipher(cipher).then((c) => {\n          encCiphers.push(c);\n        })\n      );\n    }\n    await Promise.all(promises);\n    const request = new CipherBulkShareRequest(encCiphers, collectionIds);\n    try {\n      await this.apiService.putShareCiphers(request);\n    } catch (e) {\n      for (const cipher of ciphers) {\n        cipher.organizationId = null;\n        cipher.collectionIds = null;\n      }\n      throw e;\n    }\n    await this.upsert(encCiphers.map((c) => c.toCipherData()));\n  }\n\n  saveAttachmentWithServer(cipher: Cipher, unencryptedFile: any, admin = false): Promise<Cipher> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(unencryptedFile);\n      reader.onload = async (evt: any) => {\n        try {\n          const cData = await this.saveAttachmentRawWithServer(\n            cipher,\n            unencryptedFile.name,\n            evt.target.result,\n            admin\n          );\n          resolve(cData);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  async saveAttachmentRawWithServer(\n    cipher: Cipher,\n    filename: string,\n    data: Uint8Array,\n    admin = false\n  ): Promise<Cipher> {\n    const encKey = await this.getKeyForCipherKeyDecryption(cipher);\n    const cipherKeyEncryptionEnabled = await this.getCipherKeyEncryptionEnabled();\n\n    const cipherEncKey =\n      cipherKeyEncryptionEnabled && cipher.key != null\n        ? (new SymmetricCryptoKey(\n            await this.encryptService.decryptToBytes(cipher.key, encKey)\n          ) as UserKey)\n        : encKey;\n\n    //if cipher key encryption is disabled but the item has an individual key,\n    //then we rollback to using the user key as the main key of encryption of the item\n    //in order to keep item and it's attachments with the same encryption level\n    if (cipher.key != null && !cipherKeyEncryptionEnabled) {\n      const model = await cipher.decrypt(await this.getKeyForCipherKeyDecryption(cipher));\n      cipher = await this.encrypt(model);\n      await this.updateWithServer(cipher);\n    }\n\n    const encFileName = await this.encryptService.encrypt(filename, cipherEncKey);\n\n    const dataEncKey = await this.cryptoService.makeDataEncKey(cipherEncKey);\n    const encData = await this.encryptService.encryptToBytes(new Uint8Array(data), dataEncKey[0]);\n\n    const response = await this.cipherFileUploadService.upload(\n      cipher,\n      encFileName,\n      encData,\n      admin,\n      dataEncKey\n    );\n\n    const cData = new CipherData(response, cipher.collectionIds);\n    if (!admin) {\n      await this.upsert(cData);\n    }\n    return new Cipher(cData);\n  }\n\n  async saveCollectionsWithServer(cipher: Cipher): Promise<any> {\n    const request = new CipherCollectionsRequest(cipher.collectionIds);\n    await this.apiService.putCipherCollections(cipher.id, request);\n    const data = cipher.toCipherData();\n    await this.upsert(data);\n  }\n\n  async upsert(cipher: CipherData | CipherData[]): Promise<any> {\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    if (cipher instanceof CipherData) {\n      const c = cipher as CipherData;\n      ciphers[c.id] = c;\n    } else {\n      (cipher as CipherData[]).forEach((c) => {\n        ciphers[c.id] = c;\n      });\n    }\n\n    await this.replace(ciphers);\n  }\n\n  async replace(ciphers: { [id: string]: CipherData }): Promise<any> {\n    await this.clearDecryptedCiphersState();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearEncryptedCiphersState(userId);\n    await this.clearCache(userId);\n  }\n\n  async moveManyWithServer(ids: string[], folderId: string): Promise<any> {\n    await this.apiService.putMoveCiphers(new CipherBulkMoveRequest(ids, folderId));\n\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    ids.forEach((id) => {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        ciphers[id].folderId = folderId;\n      }\n    });\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (ciphers[id] == null) {\n        return;\n      }\n      delete ciphers[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete ciphers[i];\n      });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteWithServer(id: string, asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.deleteCipherAdmin(id);\n    } else {\n      await this.apiService.deleteCipher(id);\n    }\n\n    await this.delete(id);\n  }\n\n  async deleteManyWithServer(ids: string[], asAdmin = false): Promise<any> {\n    const request = new CipherBulkDeleteRequest(ids);\n    if (asAdmin) {\n      await this.apiService.deleteManyCiphersAdmin(request);\n    } else {\n      await this.apiService.deleteManyCiphers(request);\n    }\n    await this.delete(ids);\n  }\n\n  async deleteAttachment(id: string, attachmentId: string): Promise<void> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {\n      return;\n    }\n\n    for (let i = 0; i < ciphers[id].attachments.length; i++) {\n      if (ciphers[id].attachments[i].id === attachmentId) {\n        ciphers[id].attachments.splice(i, 1);\n      }\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteAttachmentWithServer(id: string, attachmentId: string): Promise<void> {\n    try {\n      await this.apiService.deleteCipherAttachment(id, attachmentId);\n    } catch (e) {\n      return Promise.reject((e as ErrorResponse).getSingleMessage());\n    }\n    await this.deleteAttachment(id, attachmentId);\n  }\n\n  sortCiphersByLastUsed(a: CipherView, b: CipherView): number {\n    const aLastUsed =\n      a.localData && a.localData.lastUsedDate ? (a.localData.lastUsedDate as number) : null;\n    const bLastUsed =\n      b.localData && b.localData.lastUsedDate ? (b.localData.lastUsedDate as number) : null;\n\n    const bothNotNull = aLastUsed != null && bLastUsed != null;\n    if (bothNotNull && aLastUsed < bLastUsed) {\n      return 1;\n    }\n    if (aLastUsed != null && bLastUsed == null) {\n      return -1;\n    }\n\n    if (bothNotNull && aLastUsed > bLastUsed) {\n      return -1;\n    }\n    if (bLastUsed != null && aLastUsed == null) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  sortCiphersByLastUsedThenName(a: CipherView, b: CipherView): number {\n    const result = this.sortCiphersByLastUsed(a, b);\n    if (result !== 0) {\n      return result;\n    }\n\n    return this.getLocaleSortingFunction()(a, b);\n  }\n\n  getLocaleSortingFunction(): (a: CipherView, b: CipherView) => number {\n    return (a, b) => {\n      let aName = a.name;\n      let bName = b.name;\n\n      if (aName == null && bName != null) {\n        return -1;\n      }\n      if (aName != null && bName == null) {\n        return 1;\n      }\n      if (aName == null && bName == null) {\n        return 0;\n      }\n\n      const result = this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n\n      if (result !== 0 || a.type !== CipherType.Login || b.type !== CipherType.Login) {\n        return result;\n      }\n\n      if (a.login.username != null) {\n        aName += a.login.username;\n      }\n\n      if (b.login.username != null) {\n        bName += b.login.username;\n      }\n\n      return this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n    };\n  }\n\n  async softDelete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const setDeletedDate = (cipherId: string) => {\n      if (ciphers[cipherId] == null) {\n        return;\n      }\n      ciphers[cipherId].deletedDate = new Date().toISOString();\n    };\n\n    if (typeof id === \"string\") {\n      setDeletedDate(id);\n    } else {\n      (id as string[]).forEach(setDeletedDate);\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async softDeleteWithServer(id: string, asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.putDeleteCipherAdmin(id);\n    } else {\n      await this.apiService.putDeleteCipher(id);\n    }\n\n    await this.softDelete(id);\n  }\n\n  async softDeleteManyWithServer(ids: string[], asAdmin = false): Promise<any> {\n    const request = new CipherBulkDeleteRequest(ids);\n    if (asAdmin) {\n      await this.apiService.putDeleteManyCiphersAdmin(request);\n    } else {\n      await this.apiService.putDeleteManyCiphers(request);\n    }\n\n    await this.softDelete(ids);\n  }\n\n  async restore(\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const clearDeletedDate = (c: { id: string; revisionDate: string }) => {\n      if (ciphers[c.id] == null) {\n        return;\n      }\n      ciphers[c.id].deletedDate = null;\n      ciphers[c.id].revisionDate = c.revisionDate;\n    };\n\n    if (cipher.constructor.name === Array.name) {\n      (cipher as { id: string; revisionDate: string }[]).forEach(clearDeletedDate);\n    } else {\n      clearDeletedDate(cipher as { id: string; revisionDate: string });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async restoreWithServer(id: string, asAdmin = false): Promise<any> {\n    let response;\n    if (asAdmin) {\n      response = await this.apiService.putRestoreCipherAdmin(id);\n    } else {\n      response = await this.apiService.putRestoreCipher(id);\n    }\n\n    await this.restore({ id: id, revisionDate: response.revisionDate });\n  }\n\n  async restoreManyWithServer(\n    ids: string[],\n    organizationId: string = null,\n    asAdmin = false\n  ): Promise<void> {\n    let response;\n    if (asAdmin) {\n      const request = new CipherBulkRestoreRequest(ids, organizationId);\n      response = await this.apiService.putRestoreManyCiphersAdmin(request);\n    } else {\n      const request = new CipherBulkRestoreRequest(ids);\n      response = await this.apiService.putRestoreManyCiphers(request);\n    }\n\n    const restores: { id: string; revisionDate: string }[] = [];\n    for (const cipher of response.data) {\n      restores.push({ id: cipher.id, revisionDate: cipher.revisionDate });\n    }\n    await this.restore(restores);\n  }\n\n  async getKeyForCipherKeyDecryption(cipher: Cipher): Promise<UserKey | OrgKey> {\n    return (\n      (await this.cryptoService.getOrgKey(cipher.organizationId)) ||\n      ((await this.cryptoService.getUserKeyWithLegacySupport()) as UserKey)\n    );\n  }\n\n  // Helpers\n\n  // In the case of a cipher that is being shared with an organization, we want to decrypt the\n  // cipher key with the user's key and then re-encrypt it with the organization's key.\n  private async encryptSharedCipher(model: CipherView): Promise<Cipher> {\n    const keyForCipherKeyDecryption = await this.cryptoService.getUserKeyWithLegacySupport();\n    return await this.encrypt(model, null, keyForCipherKeyDecryption);\n  }\n\n  private async updateModelfromExistingCipher(\n    model: CipherView,\n    originalCipher: Cipher\n  ): Promise<void> {\n    const existingCipher = await originalCipher.decrypt(\n      await this.getKeyForCipherKeyDecryption(originalCipher)\n    );\n    model.passwordHistory = existingCipher.passwordHistory || [];\n    if (model.type === CipherType.Login && existingCipher.type === CipherType.Login) {\n      if (\n        existingCipher.login.password != null &&\n        existingCipher.login.password !== \"\" &&\n        existingCipher.login.password !== model.login.password\n      ) {\n        const ph = new PasswordHistoryView();\n        ph.password = existingCipher.login.password;\n        ph.lastUsedDate = model.login.passwordRevisionDate = new Date();\n        model.passwordHistory.splice(0, 0, ph);\n      } else {\n        model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;\n      }\n    }\n    if (existingCipher.hasFields) {\n      const existingHiddenFields = existingCipher.fields.filter(\n        (f) =>\n          f.type === FieldType.Hidden &&\n          f.name != null &&\n          f.name !== \"\" &&\n          f.value != null &&\n          f.value !== \"\"\n      );\n      const hiddenFields =\n        model.fields == null\n          ? []\n          : model.fields.filter(\n              (f) => f.type === FieldType.Hidden && f.name != null && f.name !== \"\"\n            );\n      existingHiddenFields.forEach((ef) => {\n        const matchedField = hiddenFields.find((f) => f.name === ef.name);\n        if (matchedField == null || matchedField.value !== ef.value) {\n          const ph = new PasswordHistoryView();\n          ph.password = ef.name + \": \" + ef.value;\n          ph.lastUsedDate = new Date();\n          model.passwordHistory.splice(0, 0, ph);\n        }\n      });\n    }\n  }\n\n  private adjustPasswordHistoryLength(model: CipherView) {\n    if (model.passwordHistory != null && model.passwordHistory.length === 0) {\n      model.passwordHistory = null;\n    } else if (model.passwordHistory != null && model.passwordHistory.length > 5) {\n      // only save last 5 history\n      model.passwordHistory = model.passwordHistory.slice(0, 5);\n    }\n  }\n\n  private async shareAttachmentWithServer(\n    attachmentView: AttachmentView,\n    cipherId: string,\n    organizationId: string\n  ): Promise<any> {\n    const attachmentResponse = await this.apiService.nativeFetch(\n      new Request(attachmentView.url, { cache: \"no-store\" })\n    );\n    if (attachmentResponse.status !== 200) {\n      throw Error(\"Failed to download attachment: \" + attachmentResponse.status.toString());\n    }\n\n    const encBuf = await EncArrayBuffer.fromResponse(attachmentResponse);\n    const decBuf = await this.cryptoService.decryptFromBytes(encBuf, null);\n\n    let encKey: UserKey | OrgKey;\n    encKey = await this.cryptoService.getOrgKey(organizationId);\n    encKey ||= (await this.cryptoService.getUserKeyWithLegacySupport()) as UserKey;\n\n    const dataEncKey = await this.cryptoService.makeDataEncKey(encKey);\n\n    const encFileName = await this.encryptService.encrypt(attachmentView.fileName, encKey);\n    const encData = await this.encryptService.encryptToBytes(new Uint8Array(decBuf), dataEncKey[0]);\n\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", dataEncKey[1].encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", dataEncKey[1].encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    try {\n      await this.apiService.postShareCipherAttachment(\n        cipherId,\n        attachmentView.id,\n        fd,\n        organizationId\n      );\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n  }\n\n  private async encryptObjProperty<V extends View, D extends Domain>(\n    model: V,\n    obj: D,\n    map: any,\n    key: SymmetricCryptoKey\n  ): Promise<void> {\n    const promises = [];\n    const self = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp, theObj) {\n        const p = Promise.resolve()\n          .then(() => {\n            const modelProp = (model as any)[map[theProp] || theProp];\n            if (modelProp && modelProp !== \"\") {\n              return self.cryptoService.encrypt(modelProp, key);\n            }\n            return null;\n          })\n          .then((val: EncString) => {\n            (theObj as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop, obj);\n    }\n\n    await Promise.all(promises);\n  }\n\n  private async encryptCipherData(cipher: Cipher, model: CipherView, key: SymmetricCryptoKey) {\n    switch (cipher.type) {\n      case CipherType.Login:\n        cipher.login = new Login();\n        cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;\n        cipher.login.autofillOnPageLoad = model.login.autofillOnPageLoad;\n        await this.encryptObjProperty(\n          model.login,\n          cipher.login,\n          {\n            username: null,\n            password: null,\n            totp: null,\n          },\n          key\n        );\n\n        if (model.login.uris != null) {\n          cipher.login.uris = [];\n          for (let i = 0; i < model.login.uris.length; i++) {\n            const loginUri = new LoginUri();\n            loginUri.match = model.login.uris[i].match;\n            await this.encryptObjProperty(\n              model.login.uris[i],\n              loginUri,\n              {\n                uri: null,\n              },\n              key\n            );\n            cipher.login.uris.push(loginUri);\n          }\n        }\n        return;\n      case CipherType.SecureNote:\n        cipher.secureNote = new SecureNote();\n        cipher.secureNote.type = model.secureNote.type;\n        return;\n      case CipherType.Card:\n        cipher.card = new Card();\n        await this.encryptObjProperty(\n          model.card,\n          cipher.card,\n          {\n            cardholderName: null,\n            brand: null,\n            number: null,\n            expMonth: null,\n            expYear: null,\n            code: null,\n          },\n          key\n        );\n        return;\n      case CipherType.Identity:\n        cipher.identity = new Identity();\n        await this.encryptObjProperty(\n          model.identity,\n          cipher.identity,\n          {\n            title: null,\n            firstName: null,\n            middleName: null,\n            lastName: null,\n            address1: null,\n            address2: null,\n            address3: null,\n            city: null,\n            state: null,\n            postalCode: null,\n            country: null,\n            company: null,\n            email: null,\n            phone: null,\n            ssn: null,\n            username: null,\n            passportNumber: null,\n            licenseNumber: null,\n          },\n          key\n        );\n        return;\n      default:\n        throw new Error(\"Unknown cipher type.\");\n    }\n  }\n\n  private async getCipherForUrl(\n    url: string,\n    lastUsed: boolean,\n    lastLaunched: boolean,\n    autofillOnPageLoad: boolean\n  ): Promise<CipherView> {\n    const cacheKey = autofillOnPageLoad ? \"autofillOnPageLoad-\" + url : url;\n\n    if (!this.sortedCiphersCache.isCached(cacheKey)) {\n      let ciphers = await this.getAllDecryptedForUrl(url);\n      if (!ciphers) {\n        return null;\n      }\n\n      if (autofillOnPageLoad) {\n        const autofillOnPageLoadDefault = await this.stateService.getAutoFillOnPageLoadDefault();\n        ciphers = ciphers.filter(\n          (cipher) =>\n            cipher.login.autofillOnPageLoad ||\n            (cipher.login.autofillOnPageLoad == null && autofillOnPageLoadDefault !== false)\n        );\n        if (ciphers.length === 0) {\n          return null;\n        }\n      }\n\n      this.sortedCiphersCache.addCiphers(cacheKey, ciphers);\n    }\n\n    if (lastLaunched) {\n      return this.sortedCiphersCache.getLastLaunched(cacheKey);\n    } else if (lastUsed) {\n      return this.sortedCiphersCache.getLastUsed(cacheKey);\n    } else {\n      return this.sortedCiphersCache.getNext(cacheKey);\n    }\n  }\n\n  private async clearEncryptedCiphersState(userId?: string) {\n    await this.stateService.setEncryptedCiphers(null, { userId: userId });\n  }\n\n  private async clearDecryptedCiphersState(userId?: string) {\n    await this.stateService.setDecryptedCiphers(null, { userId: userId });\n    this.clearSortedCiphers();\n  }\n\n  private clearSortedCiphers() {\n    this.sortedCiphersCache.clear();\n  }\n\n  private async encryptCipher(\n    model: CipherView,\n    cipher: Cipher,\n    key: SymmetricCryptoKey\n  ): Promise<Cipher> {\n    await Promise.all([\n      this.encryptObjProperty(\n        model,\n        cipher,\n        {\n          name: null,\n          notes: null,\n        },\n        key\n      ),\n      this.encryptCipherData(cipher, model, key),\n      this.encryptFields(model.fields, key).then((fields) => {\n        cipher.fields = fields;\n      }),\n      this.encryptPasswordHistories(model.passwordHistory, key).then((ph) => {\n        cipher.passwordHistory = ph;\n      }),\n      this.encryptAttachments(model.attachments, key).then((attachments) => {\n        cipher.attachments = attachments;\n      }),\n    ]);\n\n    return cipher;\n  }\n\n  private async encryptCipherWithCipherKey(\n    model: CipherView,\n    cipher: Cipher,\n    keyForCipherKeyEncryption: SymmetricCryptoKey,\n    keyForCipherKeyDecryption: SymmetricCryptoKey\n  ): Promise<Cipher> {\n    // First, we get the key for cipher key encryption, in its decrypted form\n    let decryptedCipherKey: SymmetricCryptoKey;\n    if (cipher.key == null) {\n      decryptedCipherKey = await this.cryptoService.makeCipherKey();\n    } else {\n      decryptedCipherKey = new SymmetricCryptoKey(\n        await this.encryptService.decryptToBytes(cipher.key, keyForCipherKeyDecryption)\n      );\n    }\n\n    // Then, we have to encrypt the cipher key with the proper key.\n    cipher.key = await this.encryptService.encrypt(\n      decryptedCipherKey.key,\n      keyForCipherKeyEncryption\n    );\n\n    // Finally, we can encrypt the cipher with the decrypted cipher key.\n    return this.encryptCipher(model, cipher, decryptedCipherKey);\n  }\n\n  private async getCipherKeyEncryptionEnabled(): Promise<boolean> {\n    return (\n      flagEnabled(\"enableCipherKeyEncryption\") &&\n      (await firstValueFrom(\n        this.configService.checkServerMeetsVersionRequirement$(CIPHER_KEY_ENC_MIN_SERVER_VER)\n      ))\n    );\n  }\n}\n","import { ServiceUtils } from \"../../misc/serviceUtils\";\nimport { TreeNode } from \"../../models/domain/tree-node\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { CollectionService as CollectionServiceAbstraction } from \"../../vault/abstractions/collection.service\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nconst NestingDelimiter = \"/\";\n\nexport class CollectionService implements CollectionServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private stateService: StateService\n  ) {}\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.stateService.setDecryptedCollections(null, { userId: userId });\n  }\n\n  async encrypt(model: CollectionView): Promise<Collection> {\n    if (model.organizationId == null) {\n      throw new Error(\"Collection has no organization id.\");\n    }\n    const key = await this.cryptoService.getOrgKey(model.organizationId);\n    if (key == null) {\n      throw new Error(\"No key for this collection's organization.\");\n    }\n    const collection = new Collection();\n    collection.id = model.id;\n    collection.organizationId = model.organizationId;\n    collection.readOnly = model.readOnly;\n    collection.name = await this.cryptoService.encrypt(model.name, key);\n    return collection;\n  }\n\n  async decryptMany(collections: Collection[]): Promise<CollectionView[]> {\n    if (collections == null) {\n      return [];\n    }\n    const decCollections: CollectionView[] = [];\n    const promises: Promise<any>[] = [];\n    collections.forEach((collection) => {\n      promises.push(collection.decrypt().then((c) => decCollections.push(c)));\n    });\n    await Promise.all(promises);\n    return decCollections.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  async get(id: string): Promise<Collection> {\n    const collections = await this.stateService.getEncryptedCollections();\n    // eslint-disable-next-line\n    if (collections == null || !collections.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Collection(collections[id]);\n  }\n\n  async getAll(): Promise<Collection[]> {\n    const collections = await this.stateService.getEncryptedCollections();\n    const response: Collection[] = [];\n    for (const id in collections) {\n      // eslint-disable-next-line\n      if (collections.hasOwnProperty(id)) {\n        response.push(new Collection(collections[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecrypted(): Promise<CollectionView[]> {\n    let decryptedCollections = await this.stateService.getDecryptedCollections();\n    if (decryptedCollections != null) {\n      return decryptedCollections;\n    }\n\n    const hasKey = await this.cryptoService.hasUserKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const collections = await this.getAll();\n    decryptedCollections = await this.decryptMany(collections);\n\n    await this.stateService.setDecryptedCollections(decryptedCollections);\n    return decryptedCollections;\n  }\n\n  async getAllNested(collections: CollectionView[] = null): Promise<TreeNode<CollectionView>[]> {\n    if (collections == null) {\n      collections = await this.getAllDecrypted();\n    }\n    const nodes: TreeNode<CollectionView>[] = [];\n    collections.forEach((c) => {\n      const collectionCopy = new CollectionView();\n      collectionCopy.id = c.id;\n      collectionCopy.organizationId = c.organizationId;\n      const parts = c.name != null ? c.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, collectionCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  /**\n   * @deprecated August 30 2022: Moved to new Vault Filter Service\n   * Remove when Desktop and Browser are updated\n   */\n  async getNested(id: string): Promise<TreeNode<CollectionView>> {\n    const collections = await this.getAllNested();\n    return ServiceUtils.getTreeNodeObjectFromList(collections, id) as TreeNode<CollectionView>;\n  }\n\n  async upsert(collection: CollectionData | CollectionData[]): Promise<any> {\n    let collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      collections = {};\n    }\n\n    if (collection instanceof CollectionData) {\n      const c = collection as CollectionData;\n      collections[c.id] = c;\n    } else {\n      (collection as CollectionData[]).forEach((c) => {\n        collections[c.id] = c;\n      });\n    }\n\n    await this.replace(collections);\n  }\n\n  async replace(collections: { [id: string]: CollectionData }): Promise<any> {\n    await this.clearCache();\n    await this.stateService.setEncryptedCollections(collections);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearCache(userId);\n    await this.stateService.setEncryptedCollections(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      delete collections[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete collections[i];\n      });\n    }\n\n    await this.replace(collections);\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { ErrorResponse } from \"../../../models/response/error.response\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService,\n} from \"../../../platform/abstractions/file-upload/file-upload.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { EncArrayBuffer } from \"../../../platform/models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../platform/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"../../abstractions/file-upload/cipher-file-upload.service\";\nimport { Cipher } from \"../../models/domain/cipher\";\nimport { AttachmentRequest } from \"../../models/request/attachment.request\";\nimport { AttachmentUploadDataResponse } from \"../../models/response/attachment-upload-data.response\";\nimport { CipherResponse } from \"../../models/response/cipher.response\";\n\nexport class CipherFileUploadService implements CipherFileUploadServiceAbstraction {\n  constructor(private apiService: ApiService, private fileUploadService: FileUploadService) {}\n\n  async upload(\n    cipher: Cipher,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    admin: boolean,\n    dataEncKey: [SymmetricCryptoKey, EncString]\n  ): Promise<CipherResponse> {\n    const request: AttachmentRequest = {\n      key: dataEncKey[1].encryptedString,\n      fileName: encFileName.encryptedString,\n      fileSize: encData.buffer.byteLength,\n      adminRequest: admin,\n    };\n\n    let response: CipherResponse;\n    try {\n      const uploadDataResponse = await this.apiService.postCipherAttachment(cipher.id, request);\n      response = admin ? uploadDataResponse.cipherMiniResponse : uploadDataResponse.cipherResponse;\n      await this.fileUploadService.upload(\n        uploadDataResponse,\n        encFileName,\n        encData,\n        this.generateMethods(uploadDataResponse, response, request.adminRequest)\n      );\n    } catch (e) {\n      if (\n        (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) ||\n        (e as ErrorResponse).statusCode === 405\n      ) {\n        response = await this.legacyServerAttachmentFileUpload(\n          request.adminRequest,\n          cipher.id,\n          encFileName,\n          encData,\n          dataEncKey[1]\n        );\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n    return response;\n  }\n\n  private generateMethods(\n    uploadData: AttachmentUploadDataResponse,\n    response: CipherResponse,\n    isAdmin: boolean\n  ): FileUploadApiMethods {\n    return {\n      postDirect: this.generatePostDirectCallback(uploadData, isAdmin),\n      renewFileUploadUrl: this.generateRenewFileUploadUrlCallback(uploadData, response, isAdmin),\n      rollback: this.generateRollbackCallback(response, uploadData, isAdmin),\n    };\n  }\n\n  private generatePostDirectCallback(uploadData: AttachmentUploadDataResponse, isAdmin: boolean) {\n    return (data: FormData) => {\n      const response = isAdmin ? uploadData.cipherMiniResponse : uploadData.cipherResponse;\n      return this.apiService.postAttachmentFile(response.id, uploadData.attachmentId, data);\n    };\n  }\n\n  private generateRenewFileUploadUrlCallback(\n    uploadData: AttachmentUploadDataResponse,\n    response: CipherResponse,\n    isAdmin: boolean\n  ) {\n    return async () => {\n      const renewResponse = await this.apiService.renewAttachmentUploadUrl(\n        response.id,\n        uploadData.attachmentId\n      );\n      return renewResponse?.url;\n    };\n  }\n\n  private generateRollbackCallback(\n    response: CipherResponse,\n    uploadData: AttachmentUploadDataResponse,\n    isAdmin: boolean\n  ) {\n    return () => {\n      if (isAdmin) {\n        return this.apiService.deleteCipherAttachmentAdmin(response.id, uploadData.attachmentId);\n      } else {\n        return this.apiService.deleteCipherAttachment(response.id, uploadData.attachmentId);\n      }\n    };\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerAttachmentFileUpload(\n    admin: boolean,\n    cipherId: string,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    key: EncString\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", key.encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", key.encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    let response: CipherResponse;\n    try {\n      if (admin) {\n        response = await this.apiService.postCipherAttachmentAdminLegacy(cipherId, fd);\n      } else {\n        response = await this.apiService.postCipherAttachmentLegacy(cipherId, fd);\n      }\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n\n    return response;\n  }\n}\n","import { Folder } from \"../domain/folder\";\n\nexport class FolderRequest {\n  name: string;\n\n  constructor(folder: Folder) {\n    this.name = folder.name ? folder.name.encryptedString : null;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderRequest } from \"../../../vault/models/request/folder.request\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\n\nexport class FolderApiService implements FolderApiServiceAbstraction {\n  constructor(private folderService: InternalFolderService, private apiService: ApiService) {}\n\n  async save(folder: Folder): Promise<any> {\n    const request = new FolderRequest(folder);\n\n    let response: FolderResponse;\n    if (folder.id == null) {\n      response = await this.postFolder(request);\n      folder.id = response.id;\n    } else {\n      response = await this.putFolder(folder.id, request);\n    }\n\n    const data = new FolderData(response);\n    await this.folderService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteFolder(id);\n    await this.folderService.delete(id);\n  }\n\n  async get(id: string): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"GET\", \"/folders/\" + id, null, true, true);\n    return new FolderResponse(r);\n  }\n\n  private async postFolder(request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"POST\", \"/folders\", request, true, true);\n    return new FolderResponse(r);\n  }\n\n  async putFolder(id: string, request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/folders/\" + id, request, true, true);\n    return new FolderResponse(r);\n  }\n\n  private deleteFolder(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/folders/\" + id, null, true, false);\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { Utils } from \"../../../platform/misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../platform/models/domain/symmetric-crypto-key\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderView } from \"../../../vault/models/view/folder.view\";\n\nexport class FolderService implements InternalFolderServiceAbstraction {\n  protected _folders: BehaviorSubject<Folder[]> = new BehaviorSubject([]);\n  protected _folderViews: BehaviorSubject<FolderView[]> = new BehaviorSubject([]);\n\n  folders$ = this._folders.asObservable();\n  folderViews$ = this._folderViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cipherService: CipherService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._folders.next([]);\n            this._folderViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedFolders();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    this._folderViews.next([]);\n  }\n\n  // TODO: This should be moved to EncryptService or something\n  async encrypt(model: FolderView, key?: SymmetricCryptoKey): Promise<Folder> {\n    const folder = new Folder();\n    folder.id = model.id;\n    folder.name = await this.cryptoService.encrypt(model.name, key);\n    return folder;\n  }\n\n  async get(id: string): Promise<Folder> {\n    const folders = this._folders.getValue();\n\n    return folders.find((folder) => folder.id === id);\n  }\n\n  async getAllFromState(): Promise<Folder[]> {\n    const folders = await this.stateService.getEncryptedFolders();\n    const response: Folder[] = [];\n    for (const id in folders) {\n      // eslint-disable-next-line\n      if (folders.hasOwnProperty(id)) {\n        response.push(new Folder(folders[id]));\n      }\n    }\n    return response;\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the folder\n   */\n  async getFromState(id: string): Promise<Folder> {\n    const foldersMap = await this.stateService.getEncryptedFolders();\n    const folder = foldersMap[id];\n    if (folder == null) {\n      return null;\n    }\n\n    return new Folder(folder);\n  }\n\n  /**\n   * @deprecated Only use in CLI!\n   */\n  async getAllDecryptedFromState(): Promise<FolderView[]> {\n    const data = await this.stateService.getEncryptedFolders();\n    const folders = Object.values(data || {}).map((f) => new Folder(f));\n\n    return this.decryptFolders(folders);\n  }\n\n  async upsert(folder: FolderData | FolderData[]): Promise<void> {\n    let folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      folders = {};\n    }\n\n    if (folder instanceof FolderData) {\n      const f = folder as FolderData;\n      folders[f.id] = f;\n    } else {\n      (folder as FolderData[]).forEach((f) => {\n        folders[f.id] = f;\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async replace(folders: { [id: string]: FolderData }): Promise<void> {\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._folders.next([]);\n      this._folderViews.next([]);\n    }\n    await this.stateService.setEncryptedFolders(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (folders[id] == null) {\n        return;\n      }\n      delete folders[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete folders[i];\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n\n    // Items in a deleted folder are re-assigned to \"No Folder\"\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers != null) {\n      const updates: CipherData[] = [];\n      for (const cId in ciphers) {\n        if (ciphers[cId].folderId === id) {\n          ciphers[cId].folderId = null;\n          updates.push(ciphers[cId]);\n        }\n      }\n      if (updates.length > 0) {\n        this.cipherService.upsert(updates);\n      }\n    }\n  }\n\n  private async updateObservables(foldersMap: { [id: string]: FolderData }) {\n    const folders = Object.values(foldersMap || {}).map((f) => new Folder(f));\n\n    this._folders.next(folders);\n\n    if (await this.cryptoService.hasUserKey()) {\n      this._folderViews.next(await this.decryptFolders(folders));\n    }\n  }\n\n  private async decryptFolders(folders: Folder[]) {\n    const decryptFolderPromises = folders.map((f) => f.decrypt());\n    const decryptedFolders = await Promise.all(decryptFolderPromises);\n\n    decryptedFolders.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    const noneFolder = new FolderView();\n    noneFolder.name = this.i18nService.t(\"noneFolder\");\n    decryptedFolders.push(noneFolder);\n\n    return decryptedFolders;\n  }\n}\n","import { Subject } from \"rxjs\";\n\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"../../abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\n/**\n * This class should most likely have 0 dependencies because it will hopefully\n * be rolled into SyncService once upon a time.\n */\nexport class SyncNotifierService implements SyncNotifierServiceAbstraction {\n  private _sync = new Subject<SyncEventArgs>();\n\n  sync$ = this._sync.asObservable();\n\n  next(event: SyncEventArgs): void {\n    this._sync.next(event);\n  }\n}\n","import { ProductType, ProviderType } from \"../../../enums\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { ProfileOrganizationResponse } from \"../response/profile-organization.response\";\n\nexport class OrganizationData {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  usePasswordManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  isProviderUser: boolean;\n  isMember: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(\n    response: ProfileOrganizationResponse,\n    options: {\n      isMember: boolean;\n      isProviderUser: boolean;\n    }\n  ) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.usePolicies = response.usePolicies;\n    this.useGroups = response.useGroups;\n    this.useDirectory = response.useDirectory;\n    this.useEvents = response.useEvents;\n    this.useTotp = response.useTotp;\n    this.use2fa = response.use2fa;\n    this.useApi = response.useApi;\n    this.useSso = response.useSso;\n    this.useKeyConnector = response.useKeyConnector;\n    this.useScim = response.useScim;\n    this.useCustomPermissions = response.useCustomPermissions;\n    this.useResetPassword = response.useResetPassword;\n    this.useSecretsManager = response.useSecretsManager;\n    this.usePasswordManager = response.usePasswordManager;\n    this.useActivateAutofillPolicy = response.useActivateAutofillPolicy;\n    this.selfHost = response.selfHost;\n    this.usersGetPremium = response.usersGetPremium;\n    this.seats = response.seats;\n    this.maxCollections = response.maxCollections;\n    this.maxStorageGb = response.maxStorageGb;\n    this.ssoBound = response.ssoBound;\n    this.identifier = response.identifier;\n    this.permissions = response.permissions;\n    this.resetPasswordEnrolled = response.resetPasswordEnrolled;\n    this.userId = response.userId;\n    this.hasPublicAndPrivateKeys = response.hasPublicAndPrivateKeys;\n    this.providerId = response.providerId;\n    this.providerName = response.providerName;\n    this.providerType = response.providerType;\n    this.familySponsorshipFriendlyName = response.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = response.familySponsorshipAvailable;\n    this.planProductType = response.planProductType;\n    this.keyConnectorEnabled = response.keyConnectorEnabled;\n    this.keyConnectorUrl = response.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = response.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = response.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = response.familySponsorshipToDelete;\n    this.accessSecretsManager = response.accessSecretsManager;\n\n    this.isMember = options.isMember;\n    this.isProviderUser = options.isProviderUser;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { SettingsService } from \"../../../abstractions/settings.service\";\nimport { InternalOrganizationServiceAbstraction } from \"../../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService } from \"../../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"../../../admin-console/abstractions/provider.service\";\nimport { OrganizationData } from \"../../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../../admin-console/models/data/provider.data\";\nimport { PolicyResponse } from \"../../../admin-console/models/response/policy.response\";\nimport { KeyConnectorService } from \"../../../auth/abstractions/key-connector.service\";\nimport { ForceResetPasswordReason } from \"../../../auth/models/domain/force-reset-password-reason\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { CryptoService } from \"../../../platform/abstractions/crypto.service\";\nimport { LogService } from \"../../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../../platform/abstractions/messaging.service\";\nimport { StateService } from \"../../../platform/abstractions/state.service\";\nimport { sequentialize } from \"../../../platform/misc/sequentialize\";\nimport { SendData } from \"../../../tools/send/models/data/send.data\";\nimport { SendResponse } from \"../../../tools/send/models/response/send.response\";\nimport { SendApiService } from \"../../../tools/send/services/send-api.service.abstraction\";\nimport { InternalSendService } from \"../../../tools/send/services/send.service.abstraction\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"../../../vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\nimport { CollectionService } from \"../../abstractions/collection.service\";\nimport { CollectionData } from \"../../models/data/collection.data\";\nimport { CollectionDetailsResponse } from \"../../models/response/collection.response\";\n\nexport class SyncService implements SyncServiceAbstraction {\n  syncInProgress = false;\n\n  constructor(\n    private apiService: ApiService,\n    private settingsService: SettingsService,\n    private folderService: InternalFolderService,\n    private cipherService: CipherService,\n    private cryptoService: CryptoService,\n    private collectionService: CollectionService,\n    private messagingService: MessagingService,\n    private policyService: InternalPolicyService,\n    private sendService: InternalSendService,\n    private logService: LogService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService,\n    private providerService: ProviderService,\n    private folderApiService: FolderApiServiceAbstraction,\n    private organizationService: InternalOrganizationServiceAbstraction,\n    private sendApiService: SendApiService,\n    private logoutCallback: (expired: boolean) => Promise<void>\n  ) {}\n\n  async getLastSync(): Promise<Date> {\n    if ((await this.stateService.getUserId()) == null) {\n      return null;\n    }\n\n    const lastSync = await this.stateService.getLastSync();\n    if (lastSync) {\n      return new Date(lastSync);\n    }\n\n    return null;\n  }\n\n  async setLastSync(date: Date, userId?: string): Promise<any> {\n    await this.stateService.setLastSync(date.toJSON(), { userId: userId });\n  }\n\n  @sequentialize(() => \"fullSync\")\n  async fullSync(forceSync: boolean, allowThrowOnError = false): Promise<boolean> {\n    this.syncStarted();\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    if (!isAuthenticated) {\n      return this.syncCompleted(false);\n    }\n\n    const now = new Date();\n    let needsSync = false;\n    try {\n      needsSync = await this.needsSyncing(forceSync);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      }\n    }\n\n    if (!needsSync) {\n      await this.setLastSync(now);\n      return this.syncCompleted(false);\n    }\n\n    try {\n      await this.apiService.refreshIdentityToken();\n      const response = await this.apiService.getSync();\n\n      await this.syncProfile(response.profile);\n      await this.syncFolders(response.folders);\n      await this.syncCollections(response.collections);\n      await this.syncCiphers(response.ciphers);\n      await this.syncSends(response.sends);\n      await this.syncSettings(response.domains);\n      await this.syncPolicies(response.policies);\n\n      await this.setLastSync(now);\n      return this.syncCompleted(true);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      } else {\n        return this.syncCompleted(false);\n      }\n    }\n  }\n\n  async syncUpsertFolder(notification: SyncFolderNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localFolder = await this.folderService.get(notification.id);\n        if (\n          (!isEdit && localFolder == null) ||\n          (isEdit && localFolder != null && localFolder.revisionDate < notification.revisionDate)\n        ) {\n          const remoteFolder = await this.folderApiService.get(notification.id);\n          if (remoteFolder != null) {\n            await this.folderService.upsert(new FolderData(remoteFolder));\n            this.messagingService.send(\"syncedUpsertedFolder\", { folderId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteFolder(notification: SyncFolderNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.folderService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedFolder\", { folderId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertCipher(notification: SyncCipherNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        let shouldUpdate = true;\n        const localCipher = await this.cipherService.get(notification.id);\n        if (localCipher != null && localCipher.revisionDate >= notification.revisionDate) {\n          shouldUpdate = false;\n        }\n\n        let checkCollections = false;\n        if (shouldUpdate) {\n          if (isEdit) {\n            shouldUpdate = localCipher != null;\n            checkCollections = true;\n          } else {\n            if (notification.collectionIds == null || notification.organizationId == null) {\n              shouldUpdate = localCipher == null;\n            } else {\n              shouldUpdate = false;\n              checkCollections = true;\n            }\n          }\n        }\n\n        if (\n          !shouldUpdate &&\n          checkCollections &&\n          notification.organizationId != null &&\n          notification.collectionIds != null &&\n          notification.collectionIds.length > 0\n        ) {\n          const collections = await this.collectionService.getAll();\n          if (collections != null) {\n            for (let i = 0; i < collections.length; i++) {\n              if (notification.collectionIds.indexOf(collections[i].id) > -1) {\n                shouldUpdate = true;\n                break;\n              }\n            }\n          }\n        }\n\n        if (shouldUpdate) {\n          const remoteCipher = await this.apiService.getFullCipherDetails(notification.id);\n          if (remoteCipher != null) {\n            await this.cipherService.upsert(new CipherData(remoteCipher));\n            this.messagingService.send(\"syncedUpsertedCipher\", { cipherId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        if (e != null && e.statusCode === 404 && isEdit) {\n          await this.cipherService.delete(notification.id);\n          this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n          return this.syncCompleted(true);\n        }\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteCipher(notification: SyncCipherNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.cipherService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n      return this.syncCompleted(true);\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertSend(notification: SyncSendNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localSend = this.sendService.get(notification.id);\n        if (\n          (!isEdit && localSend == null) ||\n          (isEdit && localSend != null && localSend.revisionDate < notification.revisionDate)\n        ) {\n          const remoteSend = await this.sendApiService.getSend(notification.id);\n          if (remoteSend != null) {\n            await this.sendService.upsert(new SendData(remoteSend));\n            this.messagingService.send(\"syncedUpsertedSend\", { sendId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteSend(notification: SyncSendNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.sendService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedSend\", { sendId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  // Helpers\n\n  private syncStarted() {\n    this.syncInProgress = true;\n    this.messagingService.send(\"syncStarted\");\n  }\n\n  private syncCompleted(successfully: boolean): boolean {\n    this.syncInProgress = false;\n    this.messagingService.send(\"syncCompleted\", { successfully: successfully });\n    return successfully;\n  }\n\n  private async needsSyncing(forceSync: boolean) {\n    if (forceSync) {\n      return true;\n    }\n\n    const lastSync = await this.getLastSync();\n    if (lastSync == null || lastSync.getTime() === 0) {\n      return true;\n    }\n\n    const response = await this.apiService.getAccountRevisionDate();\n    if (new Date(response) <= lastSync) {\n      return false;\n    }\n    return true;\n  }\n\n  private async syncProfile(response: ProfileResponse) {\n    const stamp = await this.stateService.getSecurityStamp();\n    if (stamp != null && stamp !== response.securityStamp) {\n      if (this.logoutCallback != null) {\n        await this.logoutCallback(true);\n      }\n\n      throw new Error(\"Stamp has changed\");\n    }\n\n    await this.cryptoService.setMasterKeyEncryptedUserKey(response.key);\n    await this.cryptoService.setPrivateKey(response.privateKey);\n    await this.cryptoService.setProviderKeys(response.providers);\n    await this.cryptoService.setOrgKeys(response.organizations, response.providerOrganizations);\n    await this.stateService.setAvatarColor(response.avatarColor);\n    await this.stateService.setSecurityStamp(response.securityStamp);\n    await this.stateService.setEmailVerified(response.emailVerified);\n    await this.stateService.setHasPremiumPersonally(response.premiumPersonally);\n    await this.stateService.setHasPremiumFromOrganization(response.premiumFromOrganization);\n    await this.keyConnectorService.setUsesKeyConnector(response.usesKeyConnector);\n\n    // The `forcePasswordReset` flag indicates an admin has reset the user's password and must be updated\n    if (response.forcePasswordReset) {\n      await this.stateService.setForcePasswordResetReason(\n        ForceResetPasswordReason.AdminForcePasswordReset\n      );\n    }\n\n    await this.syncProfileOrganizations(response);\n\n    const providers: { [id: string]: ProviderData } = {};\n    response.providers.forEach((p) => {\n      providers[p.id] = new ProviderData(p);\n    });\n\n    await this.providerService.save(providers);\n\n    if (await this.keyConnectorService.userNeedsMigration()) {\n      await this.keyConnectorService.setConvertAccountRequired(true);\n      this.messagingService.send(\"convertAccountToKeyConnector\");\n    } else {\n      this.keyConnectorService.removeConvertAccountRequired();\n    }\n  }\n\n  private async syncProfileOrganizations(response: ProfileResponse) {\n    const organizations: { [id: string]: OrganizationData } = {};\n    response.organizations.forEach((o) => {\n      organizations[o.id] = new OrganizationData(o, {\n        isMember: true,\n        isProviderUser: false,\n      });\n    });\n\n    response.providerOrganizations.forEach((o) => {\n      if (organizations[o.id] == null) {\n        organizations[o.id] = new OrganizationData(o, {\n          isMember: false,\n          isProviderUser: true,\n        });\n      } else {\n        organizations[o.id].isProviderUser = true;\n      }\n    });\n\n    await this.organizationService.replace(organizations);\n  }\n\n  private async syncFolders(response: FolderResponse[]) {\n    const folders: { [id: string]: FolderData } = {};\n    response.forEach((f) => {\n      folders[f.id] = new FolderData(f);\n    });\n    return await this.folderService.replace(folders);\n  }\n\n  private async syncCollections(response: CollectionDetailsResponse[]) {\n    const collections: { [id: string]: CollectionData } = {};\n    response.forEach((c) => {\n      collections[c.id] = new CollectionData(c);\n    });\n    return await this.collectionService.replace(collections);\n  }\n\n  private async syncCiphers(response: CipherResponse[]) {\n    const ciphers: { [id: string]: CipherData } = {};\n    response.forEach((c) => {\n      ciphers[c.id] = new CipherData(c);\n    });\n    return await this.cipherService.replace(ciphers);\n  }\n\n  private async syncSends(response: SendResponse[]) {\n    const sends: { [id: string]: SendData } = {};\n    response.forEach((s) => {\n      sends[s.id] = new SendData(s);\n    });\n    return await this.sendService.replace(sends);\n  }\n\n  private async syncSettings(response: DomainsResponse) {\n    let eqDomains: string[][] = [];\n    if (response != null && response.equivalentDomains != null) {\n      eqDomains = eqDomains.concat(response.equivalentDomains);\n    }\n\n    if (response != null && response.globalEquivalentDomains != null) {\n      response.globalEquivalentDomains.forEach((global) => {\n        if (global.domains.length > 0) {\n          eqDomains.push(global.domains);\n        }\n      });\n    }\n\n    return this.settingsService.setEquivalentDomains(eqDomains);\n  }\n\n  private async syncPolicies(response: PolicyResponse[]) {\n    const policies: { [id: string]: PolicyData } = {};\n    if (response != null) {\n      response.forEach((p) => {\n        policies[p.id] = new PolicyData(p);\n      });\n    }\n    return await this.policyService.replace(policies);\n  }\n}\n","import {\n  BroadcasterService as BroadcasterServiceAbstraction,\n  MessageBase,\n} from \"../abstractions/broadcaster.service\";\n\nexport class BroadcasterService implements BroadcasterServiceAbstraction {\n  subscribers: Map<string, (message: MessageBase) => void> = new Map<\n    string,\n    (message: MessageBase) => void\n  >();\n\n  send(message: MessageBase, id?: string) {\n    if (id != null) {\n      if (this.subscribers.has(id)) {\n        this.subscribers.get(id)(message);\n      }\n      return;\n    }\n\n    this.subscribers.forEach((value) => {\n      value(message);\n    });\n  }\n\n  subscribe(id: string, messageCallback: (message: MessageBase) => void) {\n    this.subscribers.set(id, messageCallback);\n  }\n\n  unsubscribe(id: string) {\n    if (this.subscribers.has(id)) {\n      this.subscribers.delete(id);\n    }\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { BroadcasterService as BaseBroadcasterService } from \"@bitwarden/common/platform/services/broadcaster.service\";\n\n@Injectable()\nexport class BroadcasterService extends BaseBroadcasterService {}\n","import { Directive } from \"@angular/core\";\n\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { ModalRef } from \"../../components/modal/modal.ref\";\n\n/**\n * Used to verify the user's Master Password for the \"Master Password Re-prompt\" feature only.\n * See UserVerificationComponent for any other situation where you need to verify the user's identity.\n */\n@Directive()\nexport class PasswordRepromptComponent {\n  showPassword = false;\n  masterPassword = \"\";\n\n  constructor(\n    private modalRef: ModalRef,\n    private cryptoService: CryptoService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  async submit() {\n    const storedMasterKey = await this.cryptoService.getOrDeriveMasterKey(this.masterPassword);\n    if (!(await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, storedMasterKey))) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidMasterPassword\")\n      );\n      return;\n    }\n\n    this.modalRef.close(true);\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\n\nimport { ModalService } from \"../../services/modal.service\";\nimport { PasswordRepromptComponent } from \"../components/password-reprompt.component\";\n\n/**\n * Used to verify the user's Master Password for the \"Master Password Re-prompt\" feature only.\n * See UserVerificationService for any other situation where you need to verify the user's identity.\n */\n@Injectable()\nexport class PasswordRepromptService implements PasswordRepromptServiceAbstraction {\n  protected component = PasswordRepromptComponent;\n\n  constructor(\n    private modalService: ModalService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  protectedFields() {\n    return [\"TOTP\", \"Password\", \"H_Field\", \"Card Number\", \"Security Code\"];\n  }\n\n  async showPasswordPrompt() {\n    if (!(await this.enabled())) {\n      return true;\n    }\n\n    const ref = this.modalService.open(this.component, { allowMultipleModals: true });\n\n    if (ref == null) {\n      return false;\n    }\n\n    const result = await ref.onClosedPromise();\n    return result === true;\n  }\n\n  async enabled() {\n    return await this.userVerificationService.hasMasterPasswordAndMasterKeyHash();\n  }\n}\n","import { ThemeType } from \"@bitwarden/common/enums\";\n\nimport { Theme } from \"./theme\";\n\nexport class ThemeBuilder implements Theme {\n  get effectiveTheme(): ThemeType {\n    return this.configuredTheme != ThemeType.System ? this.configuredTheme : this.systemTheme;\n  }\n\n  constructor(readonly configuredTheme: ThemeType, readonly systemTheme: ThemeType) {}\n\n  updateSystemTheme(systemTheme: ThemeType): ThemeBuilder {\n    return new ThemeBuilder(this.configuredTheme, systemTheme);\n  }\n\n  updateConfiguredTheme(configuredTheme: ThemeType): ThemeBuilder {\n    return new ThemeBuilder(configuredTheme, this.systemTheme);\n  }\n}\n","import { DOCUMENT } from \"@angular/common\";\nimport { Inject, Injectable } from \"@angular/core\";\nimport { BehaviorSubject, filter, fromEvent, Observable } from \"rxjs\";\n\nimport { ThemeType } from \"@bitwarden/common/enums\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { WINDOW } from \"../injection-tokens\";\n\nimport { Theme } from \"./theme\";\nimport { ThemeBuilder } from \"./themeBuilder\";\nimport { AbstractThemingService } from \"./theming.service.abstraction\";\n\n@Injectable()\nexport class ThemingService implements AbstractThemingService {\n  private _theme = new BehaviorSubject<ThemeBuilder | null>(null);\n  theme$: Observable<Theme> = this._theme.pipe(filter((x) => x !== null));\n\n  constructor(\n    private stateService: StateService,\n    @Inject(WINDOW) private window: Window,\n    @Inject(DOCUMENT) private document: Document\n  ) {\n    this.monitorThemeChanges();\n  }\n\n  async monitorThemeChanges(): Promise<void> {\n    this._theme.next(\n      new ThemeBuilder(await this.stateService.getTheme(), await this.getSystemTheme())\n    );\n    this.monitorConfiguredThemeChanges();\n    this.monitorSystemThemeChanges();\n  }\n\n  updateSystemTheme(systemTheme: ThemeType): void {\n    this._theme.next(this._theme.getValue().updateSystemTheme(systemTheme));\n  }\n\n  async updateConfiguredTheme(theme: ThemeType): Promise<void> {\n    await this.stateService.setTheme(theme);\n    this._theme.next(this._theme.getValue().updateConfiguredTheme(theme));\n  }\n\n  protected monitorConfiguredThemeChanges(): void {\n    this.theme$.subscribe((theme: Theme) => {\n      this.document.documentElement.classList.remove(\n        \"theme_\" + ThemeType.Light,\n        \"theme_\" + ThemeType.Dark,\n        \"theme_\" + ThemeType.Nord,\n        \"theme_\" + ThemeType.SolarizedDark\n      );\n      this.document.documentElement.classList.add(\"theme_\" + theme.effectiveTheme);\n    });\n  }\n\n  // We use a media match query for monitoring the system theme on web and browser, but this doesn't work for electron apps on Linux.\n  // In desktop we override these methods to track systemTheme with the electron renderer instead, which works for all OSs.\n  protected async getSystemTheme(): Promise<ThemeType> {\n    return this.window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  protected monitorSystemThemeChanges(): void {\n    fromEvent<MediaQueryListEvent>(\n      window.matchMedia(\"(prefers-color-scheme: dark)\"),\n      \"change\"\n    ).subscribe((event) => {\n      this.updateSystemTheme(event.matches ? ThemeType.Dark : ThemeType.Light);\n    });\n  }\n}\n","import { LOCALE_ID, NgModule } from \"@angular/core\";\n\nimport { AvatarUpdateService as AccountUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { AnonymousHubService as AnonymousHubServiceAbstraction } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { DevicesServiceAbstraction } from \"@bitwarden/common/abstractions/devices/devices.service.abstraction\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { OrgDomainApiServiceAbstraction } from \"@bitwarden/common/abstractions/organization-domain/org-domain-api.service.abstraction\";\nimport {\n  OrgDomainInternalServiceAbstraction,\n  OrgDomainServiceAbstraction,\n} from \"@bitwarden/common/abstractions/organization-domain/org-domain.service.abstraction\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  InternalOrganizationServiceAbstraction,\n  OrganizationService as OrganizationServiceAbstraction,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport {\n  InternalPolicyService,\n  PolicyService as PolicyServiceAbstraction,\n} from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { OrganizationApiService } from \"@bitwarden/common/admin-console/services/organization/organization-api.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/services/organization/organization.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/services/policy/policy.service\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/services/provider.service\";\nimport { AccountApiService as AccountApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/account-api.service\";\nimport {\n  AccountService as AccountServiceAbstraction,\n  InternalAccountService,\n} from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { LoginService as LoginServiceAbstraction } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { PasswordResetEnrollmentServiceAbstraction } from \"@bitwarden/common/auth/abstractions/password-reset-enrollment.service.abstraction\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AccountApiServiceImplementation } from \"@bitwarden/common/auth/services/account-api.service\";\nimport { AccountServiceImplementation } from \"@bitwarden/common/auth/services/account.service\";\nimport { AuthRequestCryptoServiceImplementation } from \"@bitwarden/common/auth/services/auth-request-crypto.service.implementation\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { DeviceTrustCryptoService } from \"@bitwarden/common/auth/services/device-trust-crypto.service.implementation\";\nimport { DevicesApiServiceImplementation } from \"@bitwarden/common/auth/services/devices-api.service.implementation\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\nimport { LoginService } from \"@bitwarden/common/auth/services/login.service\";\nimport { PasswordResetEnrollmentServiceImplementation } from \"@bitwarden/common/auth/services/password-reset-enrollment.service.implementation\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { BroadcasterService as BroadcasterServiceAbstraction } from \"@bitwarden/common/platform/abstractions/broadcaster.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { EnvironmentService as EnvironmentServiceAbstraction } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/platform/abstractions/file-upload/file-upload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService as StateServiceAbstraction } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { AbstractStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { ValidationService as ValidationServiceAbstraction } from \"@bitwarden/common/platform/abstractions/validation.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { flagEnabled } from \"@bitwarden/common/platform/misc/flags\";\nimport { Account } from \"@bitwarden/common/platform/models/domain/account\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { AppIdService } from \"@bitwarden/common/platform/services/app-id.service\";\nimport { ConfigApiService } from \"@bitwarden/common/platform/services/config/config-api.service\";\nimport { ConfigService } from \"@bitwarden/common/platform/services/config/config.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/services/crypto.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/multithread-encrypt.service.implementation\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/services/environment.service\";\nimport { FileUploadService } from \"@bitwarden/common/platform/services/file-upload/file-upload.service\";\nimport { StateService } from \"@bitwarden/common/platform/services/state.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/services/validation.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/platform/services/web-crypto-function.service\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { AnonymousHubService } from \"@bitwarden/common/services/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { DevicesServiceImplementation } from \"@bitwarden/common/services/devices/devices.service.implementation\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { OrgDomainApiService } from \"@bitwarden/common/services/organization-domain/org-domain-api.service\";\nimport { OrgDomainService } from \"@bitwarden/common/services/organization-domain/org-domain.service\";\nimport { OrganizationUserServiceImplementation } from \"@bitwarden/common/services/organization-user/organization-user.service.implementation\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/services/vault-timeout/vault-timeout.service\";\nimport {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\nimport {\n  UsernameGenerationService,\n  UsernameGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/username\";\nimport {\n  PasswordStrengthService,\n  PasswordStrengthServiceAbstraction,\n} from \"@bitwarden/common/tools/password-strength\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service\";\nimport { SendService as SendServiceAbstraction } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport {\n  FolderService as FolderServiceAbstraction,\n  InternalFolderService,\n} from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/services/collection.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { FolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\nimport {\n  VaultExportService,\n  VaultExportServiceAbstraction,\n} from \"@bitwarden/exporter/vault-export\";\n\nimport { AuthGuard } from \"../auth/guards/auth.guard\";\nimport { UnauthGuard } from \"../auth/guards/unauth.guard\";\nimport { FormValidationErrorsService as FormValidationErrorsServiceAbstraction } from \"../platform/abstractions/form-validation-errors.service\";\nimport { BroadcasterService } from \"../platform/services/broadcaster.service\";\nimport { FormValidationErrorsService } from \"../platform/services/form-validation-errors.service\";\nimport { PasswordRepromptService } from \"../vault/services/password-reprompt.service\";\n\nimport {\n  LOCALES_DIRECTORY,\n  LOCKED_CALLBACK,\n  LOG_MAC_FAILURES,\n  LOGOUT_CALLBACK,\n  MEMORY_STORAGE,\n  SECURE_STORAGE,\n  STATE_FACTORY,\n  STATE_SERVICE_USE_CACHE,\n  SYSTEM_LANGUAGE,\n  WINDOW,\n} from \"./injection-tokens\";\nimport { ModalService } from \"./modal.service\";\nimport { ThemingService } from \"./theming/theming.service\";\nimport { AbstractThemingService } from \"./theming/theming.service.abstraction\";\n\n@NgModule({\n  declarations: [],\n  providers: [\n    AuthGuard,\n    UnauthGuard,\n    ModalService,\n    { provide: WINDOW, useValue: window },\n    {\n      provide: LOCALE_ID,\n      useFactory: (i18nService: I18nServiceAbstraction) => i18nService.translationLocale,\n      deps: [I18nServiceAbstraction],\n    },\n    {\n      provide: LOCALES_DIRECTORY,\n      useValue: \"./locales\",\n    },\n    {\n      provide: SYSTEM_LANGUAGE,\n      useFactory: (window: Window) => window.navigator.language,\n      deps: [WINDOW],\n    },\n    {\n      provide: STATE_FACTORY,\n      useValue: new StateFactory(GlobalState, Account),\n    },\n    {\n      provide: STATE_SERVICE_USE_CACHE,\n      useValue: true,\n    },\n    {\n      provide: LOGOUT_CALLBACK,\n      useFactory:\n        (messagingService: MessagingServiceAbstraction) => (expired: boolean, userId?: string) =>\n          messagingService.send(\"logout\", { expired: expired, userId: userId }),\n      deps: [MessagingServiceAbstraction],\n    },\n    {\n      provide: LOCKED_CALLBACK,\n      useValue: null,\n    },\n    {\n      provide: LOG_MAC_FAILURES,\n      useValue: true,\n    },\n    {\n      provide: AppIdServiceAbstraction,\n      useClass: AppIdService,\n      deps: [AbstractStorageService],\n    },\n    {\n      provide: AuditServiceAbstraction,\n      useClass: AuditService,\n      deps: [CryptoFunctionServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: AuthServiceAbstraction,\n      useClass: AuthService,\n      deps: [\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        TokenServiceAbstraction,\n        AppIdServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        MessagingServiceAbstraction,\n        LogService,\n        KeyConnectorServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        StateServiceAbstraction,\n        TwoFactorServiceAbstraction,\n        I18nServiceAbstraction,\n        EncryptService,\n        PasswordStrengthServiceAbstraction,\n        PolicyServiceAbstraction,\n        DeviceTrustCryptoServiceAbstraction,\n        AuthRequestCryptoServiceAbstraction,\n      ],\n    },\n    {\n      provide: FileUploadServiceAbstraction,\n      useClass: FileUploadService,\n      deps: [LoginServiceAbstraction],\n    },\n    {\n      provide: CipherFileUploadServiceAbstraction,\n      useClass: CipherFileUploadService,\n      deps: [ApiServiceAbstraction, FileUploadServiceAbstraction],\n    },\n    {\n      provide: CipherServiceAbstraction,\n      useFactory: (\n        cryptoService: CryptoServiceAbstraction,\n        settingsService: SettingsServiceAbstraction,\n        apiService: ApiServiceAbstraction,\n        i18nService: I18nServiceAbstraction,\n        searchService: SearchServiceAbstraction,\n        stateService: StateServiceAbstraction,\n        encryptService: EncryptService,\n        fileUploadService: CipherFileUploadServiceAbstraction,\n        configService: ConfigServiceAbstraction\n      ) =>\n        new CipherService(\n          cryptoService,\n          settingsService,\n          apiService,\n          i18nService,\n          searchService,\n          stateService,\n          encryptService,\n          fileUploadService,\n          configService\n        ),\n      deps: [\n        CryptoServiceAbstraction,\n        SettingsServiceAbstraction,\n        ApiServiceAbstraction,\n        I18nServiceAbstraction,\n        SearchServiceAbstraction,\n        StateServiceAbstraction,\n        EncryptService,\n        CipherFileUploadServiceAbstraction,\n        ConfigServiceAbstraction,\n      ],\n    },\n    {\n      provide: FolderServiceAbstraction,\n      useClass: FolderService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        CipherServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: InternalFolderService,\n      useExisting: FolderServiceAbstraction,\n    },\n    {\n      provide: FolderApiServiceAbstraction,\n      useClass: FolderApiService,\n      deps: [FolderServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: AccountApiServiceAbstraction,\n      useClass: AccountApiServiceImplementation,\n      deps: [\n        ApiServiceAbstraction,\n        UserVerificationServiceAbstraction,\n        LogService,\n        InternalAccountService,\n      ],\n    },\n    {\n      provide: AccountServiceAbstraction,\n      useClass: AccountServiceImplementation,\n      deps: [MessagingServiceAbstraction, LogService],\n    },\n    {\n      provide: InternalAccountService,\n      useExisting: AccountServiceAbstraction,\n    },\n    {\n      provide: AccountUpdateServiceAbstraction,\n      useClass: AvatarUpdateService,\n      deps: [ApiServiceAbstraction, StateServiceAbstraction],\n    },\n    { provide: LogService, useFactory: () => new ConsoleLogService(false) },\n    {\n      provide: CollectionServiceAbstraction,\n      useClass: CollectionService,\n      deps: [CryptoServiceAbstraction, I18nServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: EnvironmentServiceAbstraction,\n      useClass: EnvironmentService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: TotpServiceAbstraction,\n      useClass: TotpService,\n      deps: [CryptoFunctionServiceAbstraction, LogService, StateServiceAbstraction],\n    },\n    { provide: TokenServiceAbstraction, useClass: TokenService, deps: [StateServiceAbstraction] },\n    {\n      provide: CryptoServiceAbstraction,\n      useClass: CryptoService,\n      deps: [\n        CryptoFunctionServiceAbstraction,\n        EncryptService,\n        PlatformUtilsServiceAbstraction,\n        LogService,\n        StateServiceAbstraction,\n        AppIdServiceAbstraction,\n        DevicesApiServiceAbstraction,\n      ],\n    },\n    {\n      provide: PasswordStrengthServiceAbstraction,\n      useClass: PasswordStrengthService,\n      deps: [],\n    },\n    {\n      provide: PasswordGenerationServiceAbstraction,\n      useClass: PasswordGenerationService,\n      deps: [CryptoServiceAbstraction, PolicyServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: UsernameGenerationServiceAbstraction,\n      useClass: UsernameGenerationService,\n      deps: [CryptoServiceAbstraction, StateServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: ApiServiceAbstraction,\n      useClass: ApiService,\n      deps: [\n        TokenServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        AppIdServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: SendServiceAbstraction,\n      useClass: SendService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: SendApiServiceAbstraction,\n      useClass: SendApiService,\n      deps: [ApiServiceAbstraction, FileUploadServiceAbstraction, SendServiceAbstraction],\n    },\n    {\n      provide: SyncServiceAbstraction,\n      useClass: SyncService,\n      deps: [\n        ApiServiceAbstraction,\n        SettingsServiceAbstraction,\n        FolderServiceAbstraction,\n        CipherServiceAbstraction,\n        CryptoServiceAbstraction,\n        CollectionServiceAbstraction,\n        MessagingServiceAbstraction,\n        PolicyServiceAbstraction,\n        SendServiceAbstraction,\n        LogService,\n        KeyConnectorServiceAbstraction,\n        StateServiceAbstraction,\n        ProviderServiceAbstraction,\n        FolderApiServiceAbstraction,\n        OrganizationServiceAbstraction,\n        SendApiServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    { provide: BroadcasterServiceAbstraction, useClass: BroadcasterService },\n    {\n      provide: SettingsServiceAbstraction,\n      useClass: SettingsService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: VaultTimeoutSettingsServiceAbstraction,\n      useClass: VaultTimeoutSettingsService,\n      deps: [\n        CryptoServiceAbstraction,\n        TokenServiceAbstraction,\n        PolicyServiceAbstraction,\n        StateServiceAbstraction,\n        UserVerificationServiceAbstraction,\n      ],\n    },\n    {\n      provide: VaultTimeoutService,\n      useClass: VaultTimeoutService,\n      deps: [\n        CipherServiceAbstraction,\n        FolderServiceAbstraction,\n        CollectionServiceAbstraction,\n        CryptoServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        MessagingServiceAbstraction,\n        SearchServiceAbstraction,\n        StateServiceAbstraction,\n        AuthServiceAbstraction,\n        VaultTimeoutSettingsServiceAbstraction,\n        LOCKED_CALLBACK,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: VaultTimeoutServiceAbstraction,\n      useExisting: VaultTimeoutService,\n    },\n    {\n      provide: StateServiceAbstraction,\n      useClass: StateService,\n      deps: [\n        AbstractStorageService,\n        SECURE_STORAGE,\n        MEMORY_STORAGE,\n        LogService,\n        STATE_FACTORY,\n        STATE_SERVICE_USE_CACHE,\n      ],\n    },\n    {\n      provide: VaultExportServiceAbstraction,\n      useClass: VaultExportService,\n      deps: [\n        FolderServiceAbstraction,\n        CipherServiceAbstraction,\n        ApiServiceAbstraction,\n        CryptoServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: SearchServiceAbstraction,\n      useClass: SearchService,\n      deps: [LogService, I18nServiceAbstraction],\n    },\n    {\n      provide: NotificationsServiceAbstraction,\n      useClass: NotificationsService,\n      deps: [\n        SyncServiceAbstraction,\n        AppIdServiceAbstraction,\n        ApiServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        LOGOUT_CALLBACK,\n        LogService,\n        StateServiceAbstraction,\n        AuthServiceAbstraction,\n        MessagingServiceAbstraction,\n      ],\n    },\n    {\n      provide: CryptoFunctionServiceAbstraction,\n      useClass: WebCryptoFunctionService,\n      deps: [WINDOW],\n    },\n    {\n      provide: EncryptService,\n      useFactory: encryptServiceFactory,\n      deps: [CryptoFunctionServiceAbstraction, LogService, LOG_MAC_FAILURES],\n    },\n    {\n      provide: EventUploadServiceAbstraction,\n      useClass: EventUploadService,\n      deps: [ApiServiceAbstraction, StateServiceAbstraction, LogService],\n    },\n    {\n      provide: EventCollectionServiceAbstraction,\n      useClass: EventCollectionService,\n      deps: [\n        CipherServiceAbstraction,\n        StateServiceAbstraction,\n        OrganizationServiceAbstraction,\n        EventUploadServiceAbstraction,\n      ],\n    },\n    {\n      provide: PolicyServiceAbstraction,\n      useClass: PolicyService,\n      deps: [StateServiceAbstraction, OrganizationServiceAbstraction],\n    },\n    {\n      provide: InternalPolicyService,\n      useExisting: PolicyServiceAbstraction,\n    },\n    {\n      provide: PolicyApiServiceAbstraction,\n      useClass: PolicyApiService,\n      deps: [PolicyServiceAbstraction, ApiServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: KeyConnectorServiceAbstraction,\n      useClass: KeyConnectorService,\n      deps: [\n        StateServiceAbstraction,\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        TokenServiceAbstraction,\n        LogService,\n        OrganizationServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: UserVerificationServiceAbstraction,\n      useClass: UserVerificationService,\n      deps: [\n        StateServiceAbstraction,\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        UserVerificationApiServiceAbstraction,\n      ],\n    },\n    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },\n    {\n      provide: OrganizationServiceAbstraction,\n      useClass: OrganizationService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: InternalOrganizationServiceAbstraction,\n      useExisting: OrganizationServiceAbstraction,\n    },\n    {\n      provide: OrganizationUserService,\n      useClass: OrganizationUserServiceImplementation,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: PasswordResetEnrollmentServiceAbstraction,\n      useClass: PasswordResetEnrollmentServiceImplementation,\n      deps: [\n        OrganizationApiServiceAbstraction,\n        StateServiceAbstraction,\n        CryptoServiceAbstraction,\n        OrganizationUserService,\n        I18nServiceAbstraction,\n      ],\n    },\n    {\n      provide: ProviderServiceAbstraction,\n      useClass: ProviderService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: TwoFactorServiceAbstraction,\n      useClass: TwoFactorService,\n      deps: [I18nServiceAbstraction, PlatformUtilsServiceAbstraction],\n    },\n    {\n      provide: AbstractThemingService,\n      useClass: ThemingService,\n    },\n    {\n      provide: FormValidationErrorsServiceAbstraction,\n      useClass: FormValidationErrorsService,\n    },\n    {\n      provide: UserVerificationApiServiceAbstraction,\n      useClass: UserVerificationApiService,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: OrganizationApiServiceAbstraction,\n      useClass: OrganizationApiService,\n      // This is a slightly odd dependency tree for a specialized api service\n      // it depends on SyncService so that new data can be retrieved through the sync\n      // rather than updating the OrganizationService directly. Instead OrganizationService\n      // subscribes to sync notifications and will update itself based on that.\n      deps: [ApiServiceAbstraction, SyncServiceAbstraction],\n    },\n    {\n      provide: SyncNotifierServiceAbstraction,\n      useClass: SyncNotifierService,\n    },\n    {\n      provide: ConfigService,\n      useClass: ConfigService,\n      deps: [\n        StateServiceAbstraction,\n        ConfigApiServiceAbstraction,\n        AuthServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        LogService,\n      ],\n    },\n    {\n      provide: ConfigServiceAbstraction,\n      useExisting: ConfigService,\n    },\n    {\n      provide: ConfigApiServiceAbstraction,\n      useClass: ConfigApiService,\n      deps: [ApiServiceAbstraction, AuthServiceAbstraction],\n    },\n    {\n      provide: AnonymousHubServiceAbstraction,\n      useClass: AnonymousHubService,\n      deps: [EnvironmentServiceAbstraction, AuthServiceAbstraction, LogService],\n    },\n    {\n      provide: ValidationServiceAbstraction,\n      useClass: ValidationService,\n      deps: [I18nServiceAbstraction, PlatformUtilsServiceAbstraction],\n    },\n    {\n      provide: LoginServiceAbstraction,\n      useClass: LoginService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: OrgDomainServiceAbstraction,\n      useClass: OrgDomainService,\n      deps: [PlatformUtilsServiceAbstraction, I18nServiceAbstraction],\n    },\n    {\n      provide: OrgDomainInternalServiceAbstraction,\n      useExisting: OrgDomainServiceAbstraction,\n    },\n    {\n      provide: OrgDomainApiServiceAbstraction,\n      useClass: OrgDomainApiService,\n      deps: [OrgDomainServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: DevicesApiServiceAbstraction,\n      useClass: DevicesApiServiceImplementation,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: DevicesServiceAbstraction,\n      useClass: DevicesServiceImplementation,\n      deps: [DevicesApiServiceAbstraction],\n    },\n    {\n      provide: DeviceTrustCryptoServiceAbstraction,\n      useClass: DeviceTrustCryptoService,\n      deps: [\n        CryptoFunctionServiceAbstraction,\n        CryptoServiceAbstraction,\n        EncryptService,\n        StateServiceAbstraction,\n        AppIdServiceAbstraction,\n        DevicesApiServiceAbstraction,\n        I18nServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n      ],\n    },\n    {\n      provide: AuthRequestCryptoServiceAbstraction,\n      useClass: AuthRequestCryptoServiceImplementation,\n      deps: [CryptoServiceAbstraction],\n    },\n  ],\n})\nexport class JslibServicesModule {}\n\nfunction encryptServiceFactory(\n  cryptoFunctionservice: CryptoFunctionServiceAbstraction,\n  logService: LogService,\n  logMacFailures: boolean\n): EncryptService {\n  return flagEnabled(\"multithreadDecryption\")\n    ? new MultithreadEncryptServiceImplementation(cryptoFunctionservice, logService, logMacFailures)\n    : new EncryptServiceImplementation(cryptoFunctionservice, logService, logMacFailures);\n}\n","import { Verification } from \"../../types/verification\";\n\nexport abstract class AccountApiService {\n  abstract deleteAccount(verification: Verification): Promise<void>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { Verification } from \"../../types/verification\";\nimport { AccountApiService } from \"../abstractions/account-api.service\";\nimport { InternalAccountService } from \"../abstractions/account.service\";\nimport { UserVerificationService } from \"../abstractions/user-verification/user-verification.service.abstraction\";\n\nexport class AccountApiServiceImplementation implements AccountApiService {\n  constructor(\n    private apiService: ApiService,\n    private userVerificationService: UserVerificationService,\n    private logService: LogService,\n    private accountService: InternalAccountService\n  ) {}\n\n  async deleteAccount(verification: Verification): Promise<void> {\n    try {\n      const verificationRequest = await this.userVerificationService.buildRequest(verification);\n      await this.apiService.send(\"DELETE\", \"/accounts\", verificationRequest, true, false);\n      this.accountService.delete();\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  }\n}\n","import { InternalAccountService } from \"../../auth/abstractions/account.service\";\nimport { LogService } from \"../../platform/abstractions/log.service\";\nimport { MessagingService } from \"../../platform/abstractions/messaging.service\";\n\nexport class AccountServiceImplementation implements InternalAccountService {\n  constructor(private messagingService: MessagingService, private logService: LogService) {}\n\n  async delete(): Promise<void> {\n    try {\n      this.messagingService.send(\"logout\");\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { ProfileResponse } from \"../../models/response/profile.response\";\nexport abstract class AvatarUpdateService {\n  avatarUpdate$ = new Observable<string | null>();\n  abstract pushUpdate(color: string): Promise<ProfileResponse | void>;\n  abstract loadColorFromState(): Promise<string | null>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrganizationUserService } from \"../../abstractions/organization-user/organization-user.service\";\nimport {\n  OrganizationUserAcceptInitRequest,\n  OrganizationUserAcceptRequest,\n  OrganizationUserBulkConfirmRequest,\n  OrganizationUserConfirmRequest,\n  OrganizationUserInviteRequest,\n  OrganizationUserResetPasswordEnrollmentRequest,\n  OrganizationUserResetPasswordRequest,\n  OrganizationUserUpdateGroupsRequest,\n  OrganizationUserUpdateRequest,\n} from \"../../abstractions/organization-user/requests\";\nimport {\n  OrganizationUserBulkPublicKeyResponse,\n  OrganizationUserBulkResponse,\n  OrganizationUserDetailsResponse,\n  OrganizationUserResetPasswordDetailsResponse,\n  OrganizationUserUserDetailsResponse,\n} from \"../../abstractions/organization-user/responses\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\nimport { OrganizationUserBulkRequest } from \"./requests\";\n\nexport class OrganizationUserServiceImplementation implements OrganizationUserService {\n  constructor(private apiService: ApiService) {}\n\n  async getOrganizationUser(\n    organizationId: string,\n    id: string,\n    options?: {\n      includeGroups?: boolean;\n    }\n  ): Promise<OrganizationUserDetailsResponse> {\n    const params = new URLSearchParams();\n\n    if (options?.includeGroups) {\n      params.set(\"includeGroups\", \"true\");\n    }\n\n    const r = await this.apiService.send(\n      \"GET\",\n      `/organizations/${organizationId}/users/${id}?${params.toString()}`,\n      null,\n      true,\n      true\n    );\n    return new OrganizationUserDetailsResponse(r);\n  }\n\n  async getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/groups\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async getAllUsers(\n    organizationId: string,\n    options?: {\n      includeCollections?: boolean;\n      includeGroups?: boolean;\n    }\n  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>> {\n    const params = new URLSearchParams();\n\n    if (options?.includeCollections) {\n      params.set(\"includeCollections\", \"true\");\n    }\n    if (options?.includeGroups) {\n      params.set(\"includeGroups\", \"true\");\n    }\n\n    const r = await this.apiService.send(\n      \"GET\",\n      `/organizations/${organizationId}/users?${params.toString()}`,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserUserDetailsResponse);\n  }\n\n  async getOrganizationUserResetPasswordDetails(\n    organizationId: string,\n    id: string\n  ): Promise<OrganizationUserResetPasswordDetailsResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reset-password-details\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationUserResetPasswordDetailsResponse(r);\n  }\n\n  postOrganizationUserInvite(\n    organizationId: string,\n    request: OrganizationUserInviteRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/invite\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserReinvite(organizationId: string, id: string): Promise<any> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyOrganizationUserReinvite(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/reinvite\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  postOrganizationUserAcceptInit(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptInitRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/accept-init\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserAccept(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserConfirm(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserConfirmRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postOrganizationUsersPublicKey(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/public-keys\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkPublicKeyResponse);\n  }\n\n  async postOrganizationUserBulkConfirm(\n    organizationId: string,\n    request: OrganizationUserBulkConfirmRequest\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  async putOrganizationUserBulkEnableSecretsManager(\n    organizationId: string,\n    ids: string[]\n  ): Promise<void> {\n    await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/enable-secrets-manager\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      false\n    );\n  }\n\n  putOrganizationUser(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id,\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserGroups(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateGroupsRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/groups\",\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserResetPasswordEnrollment(\n    organizationId: string,\n    userId: string,\n    request: OrganizationUserResetPasswordEnrollmentRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + userId + \"/reset-password-enrollment\",\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserResetPassword(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserResetPasswordRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reset-password\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteOrganizationUser(organizationId: string, id: string): Promise<any> {\n    return this.apiService.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/users/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/users\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  revokeOrganizationUser(organizationId: string, id: string): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/revoke\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async revokeManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/revoke\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  restoreOrganizationUser(organizationId: string, id: string): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/restore\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async restoreManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/restore\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n}\n","import { OrganizationUserService } from \"../../abstractions/organization-user/organization-user.service\";\nimport { OrganizationUserResetPasswordEnrollmentRequest } from \"../../abstractions/organization-user/requests\";\nimport { OrganizationApiServiceAbstraction } from \"../../admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { CryptoService } from \"../../platform/abstractions/crypto.service\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { StateService } from \"../../platform/abstractions/state.service\";\nimport { Utils } from \"../../platform/misc/utils\";\nimport { UserKey } from \"../../platform/models/domain/symmetric-crypto-key\";\nimport { PasswordResetEnrollmentServiceAbstraction } from \"../abstractions/password-reset-enrollment.service.abstraction\";\n\nexport class PasswordResetEnrollmentServiceImplementation\n  implements PasswordResetEnrollmentServiceAbstraction\n{\n  constructor(\n    protected organizationApiService: OrganizationApiServiceAbstraction,\n    protected stateService: StateService,\n    protected cryptoService: CryptoService,\n    protected organizationUserService: OrganizationUserService,\n    protected i18nService: I18nService\n  ) {}\n\n  async enrollIfRequired(organizationSsoIdentifier: string): Promise<void> {\n    const orgAutoEnrollStatusResponse = await this.organizationApiService.getAutoEnrollStatus(\n      organizationSsoIdentifier\n    );\n\n    if (!orgAutoEnrollStatusResponse.resetPasswordEnabled) {\n      await this.enroll(orgAutoEnrollStatusResponse.id, null, null);\n    }\n  }\n\n  async enroll(organizationId: string): Promise<void>;\n  async enroll(organizationId: string, userId: string, userKey: UserKey): Promise<void>;\n  async enroll(organizationId: string, userId?: string, userKey?: UserKey): Promise<void> {\n    const orgKeyResponse = await this.organizationApiService.getKeys(organizationId);\n    if (orgKeyResponse == null) {\n      throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));\n    }\n\n    const orgPublicKey = Utils.fromB64ToArray(orgKeyResponse.publicKey);\n\n    userId = userId ?? (await this.stateService.getUserId());\n    userKey = userKey ?? (await this.cryptoService.getUserKey(userId));\n    // RSA Encrypt user's userKey.key with organization public key\n    const encryptedKey = await this.cryptoService.rsaEncrypt(userKey.key, orgPublicKey);\n\n    const resetRequest = new OrganizationUserResetPasswordEnrollmentRequest();\n    resetRequest.resetPasswordKey = encryptedKey.encryptedString;\n\n    await this.organizationUserService.putOrganizationUserResetPasswordEnrollment(\n      organizationId,\n      userId,\n      resetRequest\n    );\n  }\n}\n","import { UntypedFormGroup, ValidationErrors } from \"@angular/forms\";\n\nimport {\n  FormGroupControls,\n  FormValidationErrorsService as FormValidationErrorsAbstraction,\n  AllValidationErrors,\n} from \"../abstractions/form-validation-errors.service\";\n\nexport class FormValidationErrorsService implements FormValidationErrorsAbstraction {\n  getFormValidationErrors(controls: FormGroupControls): AllValidationErrors[] {\n    let errors: AllValidationErrors[] = [];\n    Object.keys(controls).forEach((key) => {\n      const control = controls[key];\n      if (control instanceof UntypedFormGroup) {\n        errors = errors.concat(this.getFormValidationErrors(control.controls));\n      }\n\n      const controlErrors: ValidationErrors = controls[key].errors;\n      if (controlErrors !== null) {\n        Object.keys(controlErrors).forEach((keyError) => {\n          errors.push({\n            controlName: key,\n            errorName: keyError,\n          });\n        });\n      }\n    });\n\n    return errors;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { OrganizationApiKeyRequest } from \"../../../admin-console/models/request/organization-api-key.request\";\nimport { OrganizationSsoRequest } from \"../../../auth/models/request/organization-sso.request\";\nimport { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\nimport { ApiKeyResponse } from \"../../../auth/models/response/api-key.response\";\nimport { OrganizationSsoResponse } from \"../../../auth/models/response/organization-sso.response\";\nimport { OrganizationSmSubscriptionUpdateRequest } from \"../../../billing/models/request/organization-sm-subscription-update.request\";\nimport { OrganizationSubscriptionUpdateRequest } from \"../../../billing/models/request/organization-subscription-update.request\";\nimport { OrganizationTaxInfoUpdateRequest } from \"../../../billing/models/request/organization-tax-info-update.request\";\nimport { PaymentRequest } from \"../../../billing/models/request/payment.request\";\nimport { SecretsManagerSubscribeRequest } from \"../../../billing/models/request/sm-subscribe.request\";\nimport { BillingResponse } from \"../../../billing/models/response/billing.response\";\nimport { OrganizationSubscriptionResponse } from \"../../../billing/models/response/organization-subscription.response\";\nimport { PaymentResponse } from \"../../../billing/models/response/payment.response\";\nimport { TaxInfoResponse } from \"../../../billing/models/response/tax-info.response\";\nimport { ImportDirectoryRequest } from \"../../../models/request/import-directory.request\";\nimport { SeatRequest } from \"../../../models/request/seat.request\";\nimport { StorageRequest } from \"../../../models/request/storage.request\";\nimport { VerifyBankRequest } from \"../../../models/request/verify-bank.request\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { SyncService } from \"../../../vault/abstractions/sync/sync.service.abstraction\";\nimport { OrganizationApiServiceAbstraction } from \"../../abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationApiKeyType } from \"../../enums\";\nimport { OrganizationCreateRequest } from \"../../models/request/organization-create.request\";\nimport { OrganizationKeysRequest } from \"../../models/request/organization-keys.request\";\nimport { OrganizationUpdateRequest } from \"../../models/request/organization-update.request\";\nimport { OrganizationUpgradeRequest } from \"../../models/request/organization-upgrade.request\";\nimport { OrganizationApiKeyInformationResponse } from \"../../models/response/organization-api-key-information.response\";\nimport { OrganizationAutoEnrollStatusResponse } from \"../../models/response/organization-auto-enroll-status.response\";\nimport { OrganizationKeysResponse } from \"../../models/response/organization-keys.response\";\nimport { OrganizationResponse } from \"../../models/response/organization.response\";\nimport { ProfileOrganizationResponse } from \"../../models/response/profile-organization.response\";\n\nexport class OrganizationApiService implements OrganizationApiServiceAbstraction {\n  constructor(private apiService: ApiService, private syncService: SyncService) {}\n\n  async get(id: string): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id, null, true, true);\n    return new OrganizationResponse(r);\n  }\n\n  async getBilling(id: string): Promise<BillingResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/billing\",\n      null,\n      true,\n      true\n    );\n    return new BillingResponse(r);\n  }\n\n  async getSubscription(id: string): Promise<OrganizationSubscriptionResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/subscription\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSubscriptionResponse(r);\n  }\n\n  async getLicense(id: string, installationId: string): Promise<unknown> {\n    return this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/license?installationId=\" + installationId,\n      null,\n      true,\n      true\n    );\n  }\n\n  async getAutoEnrollStatus(identifier: string): Promise<OrganizationAutoEnrollStatusResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + identifier + \"/auto-enroll-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationAutoEnrollStatusResponse(r);\n  }\n\n  async create(request: OrganizationCreateRequest): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"POST\", \"/organizations\", request, true, true);\n    // Forcing a sync will notify organization service that they need to repull\n    await this.syncService.fullSync(true);\n    return new OrganizationResponse(r);\n  }\n\n  async createLicense(data: FormData): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted\",\n      data,\n      true,\n      true\n    );\n    return new OrganizationResponse(r);\n  }\n\n  async save(id: string, request: OrganizationUpdateRequest): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/organizations/\" + id, request, true, true);\n    const data = new OrganizationResponse(r);\n    await this.syncService.fullSync(true);\n    return data;\n  }\n\n  async updatePayment(id: string, request: PaymentRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/payment\", request, true, false);\n  }\n\n  async upgrade(id: string, request: OrganizationUpgradeRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/upgrade\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async updatePasswordManagerSeats(\n    id: string,\n    request: OrganizationSubscriptionUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/subscription\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async updateSecretsManagerSubscription(\n    id: string,\n    request: OrganizationSmSubscriptionUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/sm-subscription\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async updateSeats(id: string, request: SeatRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/seat\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async updateStorage(id: string, request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/storage\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async verifyBank(id: string, request: VerifyBankRequest): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/verify-bank\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async cancel(id: string): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/cancel\", null, true, false);\n  }\n\n  async reinstate(id: string): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/reinstate\", null, true, false);\n  }\n\n  async leave(id: string): Promise<void> {\n    await this.apiService.send(\"POST\", \"/organizations/\" + id + \"/leave\", null, true, false);\n    await this.syncService.fullSync(true);\n  }\n\n  async delete(id: string, request: SecretVerificationRequest): Promise<void> {\n    await this.apiService.send(\"DELETE\", \"/organizations/\" + id, request, true, false);\n    await this.syncService.fullSync(true);\n  }\n\n  async updateLicense(id: string, data: FormData): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted/\" + id,\n      data,\n      true,\n      false\n    );\n  }\n\n  async importDirectory(organizationId: string, request: ImportDirectoryRequest): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/import\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getOrCreateApiKey(id: string, request: OrganizationApiKeyRequest): Promise<ApiKeyResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/api-key\",\n      request,\n      true,\n      true\n    );\n    return new ApiKeyResponse(r);\n  }\n\n  async getApiKeyInformation(\n    id: string,\n    organizationApiKeyType: OrganizationApiKeyType = null\n  ): Promise<ListResponse<OrganizationApiKeyInformationResponse>> {\n    const uri =\n      organizationApiKeyType === null\n        ? \"/organizations/\" + id + \"/api-key-information\"\n        : \"/organizations/\" + id + \"/api-key-information/\" + organizationApiKeyType;\n    const r = await this.apiService.send(\"GET\", uri, null, true, true);\n    return new ListResponse(r, OrganizationApiKeyInformationResponse);\n  }\n\n  async rotateApiKey(id: string, request: OrganizationApiKeyRequest): Promise<ApiKeyResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/rotate-api-key\",\n      request,\n      true,\n      true\n    );\n    return new ApiKeyResponse(r);\n  }\n\n  async getTaxInfo(id: string): Promise<TaxInfoResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async updateTaxInfo(id: string, request: OrganizationTaxInfoUpdateRequest): Promise<void> {\n    // Can't broadcast anything because the response doesn't have content\n    return this.apiService.send(\"PUT\", \"/organizations/\" + id + \"/tax\", request, true, false);\n  }\n\n  async getKeys(id: string): Promise<OrganizationKeysResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/keys\", null, true, true);\n    return new OrganizationKeysResponse(r);\n  }\n\n  async updateKeys(\n    id: string,\n    request: OrganizationKeysRequest\n  ): Promise<OrganizationKeysResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/keys\",\n      request,\n      true,\n      true\n    );\n    // Not broadcasting anything because data on this response doesn't correspond to `Organization`\n    return new OrganizationKeysResponse(r);\n  }\n\n  async getSso(id: string): Promise<OrganizationSsoResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/sso\", null, true, true);\n    return new OrganizationSsoResponse(r);\n  }\n\n  async updateSso(id: string, request: OrganizationSsoRequest): Promise<OrganizationSsoResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/sso\",\n      request,\n      true,\n      true\n    );\n    // Not broadcasting anything because data on this response doesn't correspond to `Organization`\n    return new OrganizationSsoResponse(r);\n  }\n\n  async selfHostedSyncLicense(id: string) {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted/\" + id + \"/sync/\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async subscribeToSecretsManager(\n    id: string,\n    request: SecretsManagerSubscribeRequest\n  ): Promise<ProfileOrganizationResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/subscribe-secrets-manager\",\n      request,\n      true,\n      true\n    );\n    return new ProfileOrganizationResponse(r);\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\nexport abstract class SyncNotifierService {\n  sync$: Observable<SyncEventArgs>;\n  next: (event: SyncEventArgs) => void;\n}\n","import {\n  HttpTransportType,\n  HubConnection,\n  HubConnectionBuilder,\n  IHubProtocol,\n} from \"@microsoft/signalr\";\nimport { MessagePackHubProtocol } from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { AnonymousHubService as AnonymousHubServiceAbstraction } from \"../abstractions/anonymousHub.service\";\nimport { AuthService } from \"../auth/abstractions/auth.service\";\nimport { EnvironmentService } from \"../platform/abstractions/environment.service\";\nimport { LogService } from \"../platform/abstractions/log.service\";\n\nimport {\n  AuthRequestPushNotification,\n  NotificationResponse,\n} from \"./../models/response/notification.response\";\n\nexport class AnonymousHubService implements AnonymousHubServiceAbstraction {\n  private anonHubConnection: HubConnection;\n  private url: string;\n\n  constructor(\n    private environmentService: EnvironmentService,\n    private authService: AuthService,\n    private logService: LogService\n  ) {}\n\n  async createHubConnection(token: string) {\n    this.url = this.environmentService.getNotificationsUrl();\n\n    this.anonHubConnection = new HubConnectionBuilder()\n      .withUrl(this.url + \"/anonymous-hub?Token=\" + token, {\n        skipNegotiation: true,\n        transport: HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new MessagePackHubProtocol() as IHubProtocol)\n      .build();\n\n    this.anonHubConnection.start().catch((error) => this.logService.error(error));\n\n    this.anonHubConnection.on(\"AuthRequestResponseRecieved\", (data: any) => {\n      this.ProcessNotification(new NotificationResponse(data));\n    });\n  }\n\n  stopHubConnection() {\n    if (this.anonHubConnection) {\n      this.anonHubConnection.stop();\n    }\n  }\n\n  private async ProcessNotification(notification: NotificationResponse) {\n    await this.authService.authResponsePushNotification(\n      notification.payload as AuthRequestPushNotification\n    );\n  }\n}\n","import { ErrorResponse } from \"../../models/response/error.response\";\nimport { I18nService } from \"../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../abstractions/platform-utils.service\";\nimport { ValidationService as ValidationServiceAbstraction } from \"../abstractions/validation.service\";\n\nexport class ValidationService implements ValidationServiceAbstraction {\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  showError(data: any): string[] {\n    const defaultErrorMessage = this.i18nService.t(\"unexpectedError\");\n    let errors: string[] = [];\n\n    if (data != null && typeof data === \"string\") {\n      errors.push(data);\n    } else if (data == null || typeof data !== \"object\") {\n      errors.push(defaultErrorMessage);\n    } else if (data.validationErrors != null) {\n      errors = errors.concat((data as ErrorResponse).getAllMessages());\n    } else {\n      errors.push(data.message ? data.message : defaultErrorMessage);\n    }\n\n    if (errors.length === 1) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errors[0]);\n    } else if (errors.length > 1) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errors, {\n        timeout: 5000 * errors.length,\n      });\n    }\n\n    return errors;\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { OrgDomainInternalServiceAbstraction } from \"../../abstractions/organization-domain/org-domain.service.abstraction\";\nimport { OrganizationDomainResponse } from \"../../abstractions/organization-domain/responses/organization-domain.response\";\nimport { I18nService } from \"../../platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../../platform/abstractions/platform-utils.service\";\n\nexport class OrgDomainService implements OrgDomainInternalServiceAbstraction {\n  protected _orgDomains$: BehaviorSubject<OrganizationDomainResponse[]> = new BehaviorSubject([]);\n\n  orgDomains$ = this._orgDomains$.asObservable();\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  get(orgDomainId: string): OrganizationDomainResponse {\n    const orgDomains: OrganizationDomainResponse[] = this._orgDomains$.getValue();\n\n    return orgDomains.find((orgDomain) => orgDomain.id === orgDomainId);\n  }\n\n  copyDnsTxt(dnsTxt: string): void {\n    this.platformUtilsService.copyToClipboard(dnsTxt);\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"dnsTxtRecord\"))\n    );\n  }\n\n  upsert(orgDomains: OrganizationDomainResponse[]): void {\n    const existingOrgDomains: OrganizationDomainResponse[] = this._orgDomains$.getValue();\n\n    orgDomains.forEach((orgDomain: OrganizationDomainResponse) => {\n      // Determine if passed in orgDomain exists in existing array:\n      const index = existingOrgDomains.findIndex(\n        (existingOrgDomain) => existingOrgDomain.id === orgDomain.id\n      );\n      if (index !== -1) {\n        existingOrgDomains[index] = orgDomain;\n      } else {\n        existingOrgDomains.push(orgDomain);\n      }\n    });\n\n    this._orgDomains$.next(existingOrgDomains);\n  }\n\n  replace(orgDomains: OrganizationDomainResponse[]): void {\n    this._orgDomains$.next(orgDomains);\n  }\n\n  clearCache(): void {\n    this._orgDomains$.next([]);\n  }\n\n  delete(orgDomainIds: string[]): void {\n    const existingOrgDomains: OrganizationDomainResponse[] = this._orgDomains$.getValue();\n\n    orgDomainIds.forEach((orgDomainId: string) => {\n      const index = existingOrgDomains.findIndex(\n        (existingOrgDomain) => existingOrgDomain.id === orgDomainId\n      );\n      if (index !== -1) {\n        existingOrgDomains.splice(index, 1);\n      }\n    });\n\n    this._orgDomains$.next(existingOrgDomains);\n  }\n}\n","import { OrganizationDomainRequest } from \"../../services/organization-domain/requests/organization-domain.request\";\n\nimport { OrganizationDomainSsoDetailsResponse } from \"./responses/organization-domain-sso-details.response\";\nimport { OrganizationDomainResponse } from \"./responses/organization-domain.response\";\n\nexport abstract class OrgDomainApiServiceAbstraction {\n  getAllByOrgId: (orgId: string) => Promise<Array<OrganizationDomainResponse>>;\n  getByOrgIdAndOrgDomainId: (\n    orgId: string,\n    orgDomainId: string\n  ) => Promise<OrganizationDomainResponse>;\n  post: (\n    orgId: string,\n    orgDomain: OrganizationDomainRequest\n  ) => Promise<OrganizationDomainResponse>;\n  verify: (orgId: string, orgDomainId: string) => Promise<OrganizationDomainResponse>;\n  delete: (orgId: string, orgDomainId: string) => Promise<any>;\n  getClaimedOrgDomainByEmail: (email: string) => Promise<OrganizationDomainSsoDetailsResponse>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrgDomainApiServiceAbstraction } from \"../../abstractions/organization-domain/org-domain-api.service.abstraction\";\nimport { OrgDomainInternalServiceAbstraction } from \"../../abstractions/organization-domain/org-domain.service.abstraction\";\nimport { OrganizationDomainSsoDetailsResponse } from \"../../abstractions/organization-domain/responses/organization-domain-sso-details.response\";\nimport { OrganizationDomainResponse } from \"../../abstractions/organization-domain/responses/organization-domain.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\nimport { OrganizationDomainSsoDetailsRequest } from \"./requests/organization-domain-sso-details.request\";\nimport { OrganizationDomainRequest } from \"./requests/organization-domain.request\";\n\nexport class OrgDomainApiService implements OrgDomainApiServiceAbstraction {\n  constructor(\n    private orgDomainService: OrgDomainInternalServiceAbstraction,\n    private apiService: ApiService\n  ) {}\n\n  async getAllByOrgId(orgId: string): Promise<Array<OrganizationDomainResponse>> {\n    const listResponse: ListResponse<any> = await this.apiService.send(\n      \"GET\",\n      `/organizations/${orgId}/domain`,\n      null,\n      true,\n      true\n    );\n\n    const orgDomains = listResponse.data.map(\n      (resultOrgDomain: any) => new OrganizationDomainResponse(resultOrgDomain)\n    );\n\n    this.orgDomainService.replace(orgDomains);\n\n    return orgDomains;\n  }\n\n  async getByOrgIdAndOrgDomainId(\n    orgId: string,\n    orgDomainId: string\n  ): Promise<OrganizationDomainResponse> {\n    const result = await this.apiService.send(\n      \"GET\",\n      `/organizations/${orgId}/domain/${orgDomainId}`,\n      null,\n      true,\n      true\n    );\n\n    const response = new OrganizationDomainResponse(result);\n\n    this.orgDomainService.upsert([response]);\n\n    return response;\n  }\n\n  async post(\n    orgId: string,\n    orgDomainReq: OrganizationDomainRequest\n  ): Promise<OrganizationDomainResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/organizations/${orgId}/domain`,\n      orgDomainReq,\n      true,\n      true\n    );\n\n    const response = new OrganizationDomainResponse(result);\n\n    this.orgDomainService.upsert([response]);\n\n    return response;\n  }\n\n  async verify(orgId: string, orgDomainId: string): Promise<OrganizationDomainResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/organizations/${orgId}/domain/${orgDomainId}/verify`,\n      null,\n      true,\n      true\n    );\n\n    const response = new OrganizationDomainResponse(result);\n\n    this.orgDomainService.upsert([response]);\n\n    return response;\n  }\n\n  async delete(orgId: string, orgDomainId: string): Promise<any> {\n    await this.apiService.send(\n      \"DELETE\",\n      `/organizations/${orgId}/domain/${orgDomainId}`,\n      null,\n      true,\n      false\n    );\n    this.orgDomainService.delete([orgDomainId]);\n  }\n\n  async getClaimedOrgDomainByEmail(email: string): Promise<OrganizationDomainSsoDetailsResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/organizations/domain/sso/details`,\n      new OrganizationDomainSsoDetailsRequest(email),\n      false, // anonymous\n      true\n    );\n    const response = new OrganizationDomainSsoDetailsResponse(result);\n\n    return response;\n  }\n}\n","import { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\n\nexport class ContainerService {\n  constructor(private cryptoService: CryptoService, private encryptService: EncryptService) {}\n\n  attachToGlobal(global: any) {\n    if (!global.bitwardenContainerService) {\n      global.bitwardenContainerService = this;\n    }\n  }\n\n  /**\n   * @throws Will throw if CryptoService was not instantiated and provided to the ContainerService constructor\n   */\n  getCryptoService(): CryptoService {\n    if (this.cryptoService == null) {\n      throw new Error(\"ContainerService.cryptoService not initialized.\");\n    }\n    return this.cryptoService;\n  }\n\n  /**\n   * @throws Will throw if EncryptService was not instantiated and provided to the ContainerService constructor\n   */\n  getEncryptService(): EncryptService {\n    if (this.encryptService == null) {\n      throw new Error(\"ContainerService.encryptService not initialized.\");\n    }\n    return this.encryptService;\n  }\n}\n","export type InitializeOptions = \"array\" | \"record\" | \"object\";\n\nexport class SyncedItemMetadata {\n  propertyKey: string;\n  sessionKey: string;\n  initializer: (keyValuePair: any) => any;\n  initializeAs: InitializeOptions;\n\n  static builder(metadata: SyncedItemMetadata): (o: any) => any {\n    const itemBuilder = metadata.initializer;\n    if (metadata.initializeAs === \"array\") {\n      return (keyValuePair: any) => keyValuePair.map((o: any) => itemBuilder(o));\n    } else if (metadata.initializeAs === \"record\") {\n      return (keyValuePair: any) => {\n        const record: Record<any, any> = {};\n        for (const key in keyValuePair) {\n          record[key] = itemBuilder(keyValuePair[key]);\n        }\n        return record;\n      };\n    } else {\n      return (keyValuePair: any) => itemBuilder(keyValuePair);\n    }\n  }\n}\n","import { BehaviorSubject, concatMap, ReplaySubject, skip, Subject, Subscription } from \"rxjs\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { BrowserApi } from \"../../browser/browser-api\";\n\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\nexport class SessionSyncer {\n  subscription: Subscription;\n  id = Utils.newGuid();\n\n  // ignore initial values\n  private ignoreNUpdates = 0;\n\n  constructor(\n    private subject: Subject<any>,\n    private memoryStorageService: AbstractMemoryStorageService,\n    private metaData: SyncedItemMetadata\n  ) {\n    if (!(subject instanceof Subject)) {\n      throw new Error(\"subject must inherit from Subject\");\n    }\n\n    if (metaData.initializer == null) {\n      throw new Error(\"initializer must be provided\");\n    }\n  }\n\n  async init() {\n    switch (this.subject.constructor) {\n      case ReplaySubject:\n        // ignore all updates currently in the buffer\n        this.ignoreNUpdates = (this.subject as any)._buffer.length;\n        break;\n      case BehaviorSubject:\n        this.ignoreNUpdates = 1;\n        break;\n      default:\n        break;\n    }\n\n    await this.observe();\n    // must be synchronous\n    const hasInSessionMemory = await this.memoryStorageService.has(this.metaData.sessionKey);\n    if (hasInSessionMemory) {\n      await this.updateFromMemory();\n    }\n\n    this.listenForUpdates();\n  }\n\n  private async observe() {\n    const stream = this.subject.pipe(skip(this.ignoreNUpdates));\n    this.ignoreNUpdates = 0;\n\n    // This may be a memory leak.\n    // There is no good time to unsubscribe from this observable. Hopefully Manifest V3 clears memory from temporary\n    // contexts. If so, this is handled by destruction of the context.\n    this.subscription = stream\n      .pipe(\n        concatMap(async (next) => {\n          if (this.ignoreNUpdates > 0) {\n            this.ignoreNUpdates -= 1;\n            return;\n          }\n          await this.updateSession(next);\n        })\n      )\n      .subscribe();\n  }\n\n  private listenForUpdates() {\n    // This is an unawaited promise, but it will be executed asynchronously in the background.\n    BrowserApi.messageListener(\n      this.updateMessageCommand,\n      async (message) => await this.updateFromMessage(message)\n    );\n  }\n\n  async updateFromMessage(message: any) {\n    if (message.command != this.updateMessageCommand || message.id === this.id) {\n      return;\n    }\n    await this.update(message.serializedValue);\n  }\n\n  async updateFromMemory() {\n    const value = await this.memoryStorageService.getBypassCache(this.metaData.sessionKey);\n    await this.update(value);\n  }\n\n  async update(serializedValue: any) {\n    const unBuiltValue = JSON.parse(serializedValue);\n    if (BrowserApi.manifestVersion !== 3 && BrowserApi.isBackgroundPage(self)) {\n      await this.memoryStorageService.save(this.metaData.sessionKey, serializedValue);\n    }\n    const builder = SyncedItemMetadata.builder(this.metaData);\n    const value = builder(unBuiltValue);\n    this.ignoreNUpdates = 1;\n    this.subject.next(value);\n  }\n\n  private async updateSession(value: any) {\n    const serializedValue = JSON.stringify(value);\n    if (BrowserApi.manifestVersion === 3 || BrowserApi.isBackgroundPage(self)) {\n      await this.memoryStorageService.save(this.metaData.sessionKey, serializedValue);\n    }\n    await BrowserApi.sendMessage(this.updateMessageCommand, { id: this.id, serializedValue });\n  }\n\n  private get updateMessageCommand() {\n    return `${this.metaData.sessionKey}_update`;\n  }\n}\n","import { Constructor } from \"type-fest\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { SessionSyncer } from \"./session-syncer\";\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\n/**\n * Mark the class as syncing state across the browser session. This decorator finds rxjs BehaviorSubject properties\n * marked with @sessionSync and syncs these values across the browser session.\n *\n * @param constructor\n * @returns A new constructor that extends the original one to add session syncing.\n */\nexport function browserSession<TCtor extends Constructor<any>>(constructor: TCtor) {\n  return class extends constructor implements SessionStorable {\n    __syncedItemMetadata: SyncedItemMetadata[];\n    __sessionSyncers: SessionSyncer[];\n\n    constructor(...args: any[]) {\n      super(...args);\n\n      // Require state service to be injected\n      const storageService: AbstractMemoryStorageService = this.findStorageService(\n        [this as any].concat(args)\n      );\n\n      if (this.__syncedItemMetadata == null || !(this.__syncedItemMetadata instanceof Array)) {\n        return;\n      }\n\n      this.__sessionSyncers = this.__syncedItemMetadata.map((metadata) =>\n        this.buildSyncer(metadata, storageService)\n      );\n    }\n\n    buildSyncer(metadata: SyncedItemMetadata, storageSerice: AbstractMemoryStorageService) {\n      const syncer = new SessionSyncer(\n        (this as any)[metadata.propertyKey],\n        storageSerice,\n        metadata\n      );\n      syncer.init();\n      return syncer;\n    }\n\n    findStorageService(args: any[]): AbstractMemoryStorageService {\n      const storageService = args.find(this.isMemoryStorageService);\n\n      if (storageService) {\n        return storageService;\n      }\n\n      const stateService = args.find(\n        (arg) =>\n          arg?.memoryStorageService != null && this.isMemoryStorageService(arg.memoryStorageService)\n      );\n      if (stateService) {\n        return stateService.memoryStorageService;\n      }\n\n      throw new Error(\n        `Cannot decorate ${constructor.name} with browserSession, Browser's AbstractMemoryStorageService must be accessible through the observed classes parameters`\n      );\n    }\n\n    isMemoryStorageService(arg: any): arg is AbstractMemoryStorageService {\n      return arg.type != null && arg.type === AbstractMemoryStorageService.TYPE;\n    }\n  };\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { InitializeOptions } from \"./sync-item-metadata\";\n\nclass BuildOptions<T, TJson = Jsonify<T>> {\n  initializer?: (keyValuePair: TJson) => T;\n  initializeAs?: InitializeOptions;\n}\n\n// Used to ensure uniqueness for each synced observable\nlet index = 0;\n\n/**\n * A decorator used to indicate the BehaviorSubject should be synced for this browser session across all contexts.\n *\n * >**Note** This decorator does nothing if the enclosing class is not decorated with @browserSession.\n *\n * >**Note** The Behavior subject must be initialized with a default or in the constructor of the class. If it is not, an error will be thrown.\n *\n * >**!!Warning!!** If the property is overwritten at any time, the new value will not be synced across the browser session.\n *\n * @param buildOptions\n * Builders for the value, requires either a constructor (ctor) for your BehaviorSubject type or an\n * initializer function that takes a key value pair representation of the BehaviorSubject data\n * and returns your instantiated BehaviorSubject value. `initializeAs can optionally be used to indicate\n * the provided initializer function should be used to build an array of values. For example,\n * ```ts\n * \\@sessionSync({ initializer: Foo.fromJSON, initializeAs: 'array' })\n * ```\n * is equivalent to\n * ```\n * \\@sessionSync({ initializer: (obj: any[]) => obj.map((f) => Foo.fromJSON })\n * ```\n *\n * @returns decorator function\n */\nexport function sessionSync<T>(buildOptions: BuildOptions<T>) {\n  return (prototype: unknown, propertyKey: string) => {\n    // Force prototype into SessionStorable and implement it.\n    const p = prototype as SessionStorable;\n\n    if (p.__syncedItemMetadata == null) {\n      p.__syncedItemMetadata = [];\n    }\n\n    p.__syncedItemMetadata.push({\n      propertyKey,\n      sessionKey: `${propertyKey}_${index++}`,\n      initializer: buildOptions.initializer,\n      initializeAs: buildOptions.initializeAs ?? \"object\",\n    });\n  };\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/services/organization/organization.service\";\n\nimport { browserSession, sessionSync } from \"../../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserOrganizationService extends OrganizationService {\n  @sessionSync({ initializer: Organization.fromJSON, initializeAs: \"array\" })\n  protected _organizations: BehaviorSubject<Organization[]>;\n}\n","import { BehaviorSubject, filter, map, Observable, switchMap, tap } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Policy } from \"@bitwarden/common/admin-console/models/domain/policy\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/services/policy/policy.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { browserSession, sessionSync } from \"../../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserPolicyService extends PolicyService {\n  @sessionSync({\n    initializer: (obj: Jsonify<Policy>) => Object.assign(new Policy(), obj),\n    initializeAs: \"array\",\n  })\n  protected _policies: BehaviorSubject<Policy[]>;\n\n  constructor(stateService: StateService, organizationService: OrganizationService) {\n    super(stateService, organizationService);\n    this._policies.pipe(this.handleActivateAutofillPolicy.bind(this)).subscribe();\n  }\n\n  /**\n   * If the ActivateAutofill policy is enabled, save a flag indicating if we need to\n   * enable Autofill on page load.\n   */\n  private handleActivateAutofillPolicy(policies$: Observable<Policy[]>) {\n    return policies$.pipe(\n      map((policies) => policies.find((p) => p.type == PolicyType.ActivateAutofill && p.enabled)),\n      filter((p) => p != null),\n      switchMap(async (_) => [\n        await this.stateService.getActivateAutoFillOnPageLoadFromPolicy(),\n        await this.stateService.getEnableAutoFillOnPageLoad(),\n      ]),\n      tap(([activated, autofillEnabled]) => {\n        if (activated === undefined) {\n          this.stateService.setActivateAutoFillOnPageLoadFromPolicy(!autofillEnabled);\n        }\n      })\n    );\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { UnauthGuard as BaseUnauthGuardService } from \"@bitwarden/angular/auth/guards\";\n\n@Injectable()\nexport class UnauthGuardService extends BaseUnauthGuardService {\n  protected homepage = \"tabs/current\";\n}\n","import { AbstractMemoryStorageService } from \"../abstractions/storage.service\";\n\nexport class MemoryStorageService extends AbstractMemoryStorageService {\n  private store = new Map<string, any>();\n\n  get<T>(key: string): Promise<T> {\n    if (this.store.has(key)) {\n      const obj = this.store.get(key);\n      return Promise.resolve(obj as T);\n    }\n    return Promise.resolve(null);\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  save(key: string, obj: any): Promise<any> {\n    if (obj == null) {\n      return this.remove(key);\n    }\n    this.store.set(key, obj);\n    return Promise.resolve();\n  }\n\n  remove(key: string): Promise<any> {\n    this.store.delete(key);\n    return Promise.resolve();\n  }\n\n  getBypassCache<T>(key: string): Promise<T> {\n    return this.get<T>(key);\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { AuthService } from \"../../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../../auth/enums/authentication-status\";\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../abstractions/platform-utils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { SystemService as SystemServiceAbstraction } from \"../abstractions/system.service\";\nimport { Utils } from \"../misc/utils\";\n\nexport class SystemService implements SystemServiceAbstraction {\n  private reloadInterval: any = null;\n  private clearClipboardTimeout: any = null;\n  private clearClipboardTimeoutFunction: () => Promise<any> = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private platformUtilsService: PlatformUtilsService,\n    private reloadCallback: () => Promise<void> = null,\n    private stateService: StateService\n  ) {}\n\n  async startProcessReload(authService: AuthService): Promise<void> {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    if (accounts != null) {\n      const keys = Object.keys(accounts);\n      if (keys.length > 0) {\n        for (const userId of keys) {\n          if ((await authService.getAuthStatus(userId)) === AuthenticationStatus.Unlocked) {\n            return;\n          }\n        }\n      }\n    }\n\n    // A reloadInterval has already been set and is executing\n    if (this.reloadInterval != null) {\n      return;\n    }\n\n    // User has set a PIN, with ask for master password on restart, to protect their vault\n    const ephemeralPin = await this.stateService.getPinKeyEncryptedUserKeyEphemeral();\n    if (ephemeralPin != null) {\n      return;\n    }\n\n    this.cancelProcessReload();\n    await this.executeProcessReload();\n  }\n\n  private async executeProcessReload() {\n    const biometricLockedFingerprintValidated =\n      await this.stateService.getBiometricFingerprintValidated();\n    if (!biometricLockedFingerprintValidated) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n      this.messagingService.send(\"reloadProcess\");\n      if (this.reloadCallback != null) {\n        await this.reloadCallback();\n      }\n      return;\n    }\n    if (this.reloadInterval == null) {\n      this.reloadInterval = setInterval(async () => await this.executeProcessReload(), 1000);\n    }\n  }\n\n  cancelProcessReload(): void {\n    if (this.reloadInterval != null) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n    }\n  }\n\n  async clearClipboard(clipboardValue: string, timeoutMs: number = null): Promise<void> {\n    if (this.clearClipboardTimeout != null) {\n      clearTimeout(this.clearClipboardTimeout);\n      this.clearClipboardTimeout = null;\n    }\n    if (Utils.isNullOrWhitespace(clipboardValue)) {\n      return;\n    }\n    await this.stateService.getClearClipboard().then((clearSeconds) => {\n      if (clearSeconds == null) {\n        return;\n      }\n      if (timeoutMs == null) {\n        timeoutMs = clearSeconds * 1000;\n      }\n      this.clearClipboardTimeoutFunction = async () => {\n        const clipboardValueNow = await this.platformUtilsService.readFromClipboard();\n        if (clipboardValue === clipboardValueNow) {\n          this.platformUtilsService.copyToClipboard(\"\", { clearing: true });\n        }\n      };\n      this.clearClipboardTimeout = setTimeout(async () => {\n        await this.clearPendingClipboard();\n      }, timeoutMs);\n    });\n  }\n\n  async clearPendingClipboard() {\n    if (this.clearClipboardTimeoutFunction != null) {\n      await this.clearClipboardTimeoutFunction();\n      this.clearClipboardTimeoutFunction = null;\n    }\n  }\n}\n","export enum NotificationQueueMessageType {\n  AddLogin = 0,\n  ChangePassword = 1,\n  UnlockVault = 2,\n}\n","import LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { ContextMenuClickedHandler } from \"../browser/context-menu-clicked-handler\";\n\nexport default class ContextMenusBackground {\n  private contextMenus: typeof chrome.contextMenus;\n\n  constructor(private contextMenuClickedHandler: ContextMenuClickedHandler) {\n    this.contextMenus = chrome.contextMenus;\n  }\n\n  init() {\n    if (!this.contextMenus) {\n      return;\n    }\n\n    this.contextMenus.onClicked.addListener((info, tab) =>\n      this.contextMenuClickedHandler.run(info, tab)\n    );\n\n    BrowserApi.messageListener(\n      \"contextmenus.background\",\n      async (\n        msg: { command: string; data: LockedVaultPendingNotificationsItem },\n        sender: chrome.runtime.MessageSender,\n        sendResponse: any\n      ) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"contextmenus.background\") {\n          await this.contextMenuClickedHandler.cipherAction(\n            msg.data.commandToRetry.msg.data,\n            msg.data.commandToRetry.sender.tab\n          );\n          await BrowserApi.tabSendMessageData(sender.tab, \"closeNotificationBar\");\n        }\n      }\n    );\n  }\n}\n","import { NotificationQueueMessageType } from \"./notificationQueueMessageType\";\n\nexport default class NotificationQueueMessage {\n  type: NotificationQueueMessageType;\n  domain: string;\n  tabId: number;\n  expires: Date;\n  wasVaultLocked: boolean;\n}\n","import { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\n\nimport NotificationQueueMessage from \"./notificationQueueMessage\";\nimport { NotificationQueueMessageType } from \"./notificationQueueMessageType\";\n\nexport default class AddLoginQueueMessage extends NotificationQueueMessage {\n  type: NotificationQueueMessageType.AddLogin;\n  username: string;\n  password: string;\n  uri: string;\n\n  static toCipherView(message: AddLoginQueueMessage, folderId?: string): CipherView {\n    const uriView = new LoginUriView();\n    uriView.uri = message.uri;\n\n    const loginView = new LoginView();\n    loginView.uris = [uriView];\n    loginView.username = message.username;\n    loginView.password = message.password;\n\n    const cipherView = new CipherView();\n    cipherView.name = (Utils.getHostname(message.uri) || message.domain).replace(/^www\\./, \"\");\n    cipherView.folderId = folderId;\n    cipherView.type = CipherType.Login;\n    cipherView.login = loginView;\n\n    return cipherView;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { ThemeType } from \"@bitwarden/common/enums\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AddUnlockVaultQueueMessage from \"../../background/models/add-unlock-vault-queue-message\";\nimport AddChangePasswordQueueMessage from \"../../background/models/addChangePasswordQueueMessage\";\nimport AddLoginQueueMessage from \"../../background/models/addLoginQueueMessage\";\nimport AddLoginRuntimeMessage from \"../../background/models/addLoginRuntimeMessage\";\nimport ChangePasswordRuntimeMessage from \"../../background/models/changePasswordRuntimeMessage\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { NotificationQueueMessageType } from \"../../background/models/notificationQueueMessageType\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport default class NotificationBackground {\n  private notificationQueue: (\n    | AddLoginQueueMessage\n    | AddChangePasswordQueueMessage\n    | AddUnlockVaultQueueMessage\n  )[] = [];\n\n  constructor(\n    private autofillService: AutofillService,\n    private cipherService: CipherService,\n    private authService: AuthService,\n    private policyService: PolicyService,\n    private folderService: FolderService,\n    private stateService: BrowserStateService,\n    private environmentService: EnvironmentService\n  ) {}\n\n  async init() {\n    if (chrome.runtime == null) {\n      return;\n    }\n\n    BrowserApi.messageListener(\n      \"notification.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender) => {\n        await this.processMessage(msg, sender);\n      }\n    );\n\n    this.cleanupNotificationQueue();\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender) {\n    switch (msg.command) {\n      case \"unlockCompleted\":\n        await this.handleUnlockCompleted(msg.data, sender);\n        break;\n      case \"bgGetDataForTab\":\n        await this.getDataForTab(sender.tab, msg.responseCommand);\n        break;\n      case \"bgCloseNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"closeNotificationBar\");\n        break;\n      case \"bgAdjustNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"adjustNotificationBar\", msg.data);\n        break;\n      case \"bgAddLogin\":\n        await this.addLogin(msg.login, sender.tab);\n        break;\n      case \"bgChangedPassword\":\n        await this.changedPassword(msg.data, sender.tab);\n        break;\n      case \"bgAddClose\":\n      case \"bgChangeClose\":\n        this.removeTabFromNotificationQueue(sender.tab);\n        break;\n      case \"bgAddSave\":\n      case \"bgChangeSave\":\n        if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n          const retryMessage: LockedVaultPendingNotificationsItem = {\n            commandToRetry: {\n              msg: {\n                command: msg,\n              },\n              sender: sender,\n            },\n            target: \"notification.background\",\n          };\n          await BrowserApi.tabSendMessageData(\n            sender.tab,\n            \"addToLockedVaultPendingNotifications\",\n            retryMessage\n          );\n          await BrowserApi.tabSendMessageData(sender.tab, \"promptForLogin\");\n          return;\n        }\n        await this.saveOrUpdateCredentials(sender.tab, msg.edit, msg.folder);\n        break;\n      case \"bgNeverSave\":\n        await this.saveNever(sender.tab);\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"notificationBar\": {\n            const forms = this.autofillService.getFormsWithPasswordFields(msg.details);\n            await BrowserApi.tabSendMessageData(msg.tab, \"notificationBarPageDetails\", {\n              details: msg.details,\n              forms: forms,\n            });\n            break;\n          }\n          default:\n            break;\n        }\n        break;\n      case \"promptForLogin\":\n        await this.unlockVault(sender.tab);\n        break;\n      default:\n        break;\n    }\n  }\n\n  async checkNotificationQueue(tab: chrome.tabs.Tab = null): Promise<void> {\n    if (this.notificationQueue.length === 0) {\n      return;\n    }\n\n    if (tab != null) {\n      await this.doNotificationQueueCheck(tab);\n      return;\n    }\n\n    const currentTab = await BrowserApi.getTabFromCurrentWindow();\n    if (currentTab != null) {\n      await this.doNotificationQueueCheck(currentTab);\n    }\n  }\n\n  private cleanupNotificationQueue() {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].expires < new Date()) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n    setTimeout(() => this.cleanupNotificationQueue(), 2 * 60 * 1000); // check every 2 minutes\n  }\n\n  private async doNotificationQueueCheck(tab: chrome.tabs.Tab): Promise<void> {\n    if (tab == null) {\n      return;\n    }\n\n    const tabDomain = Utils.getDomain(tab.url);\n    if (tabDomain == null) {\n      return;\n    }\n\n    for (let i = 0; i < this.notificationQueue.length; i++) {\n      if (\n        this.notificationQueue[i].tabId !== tab.id ||\n        this.notificationQueue[i].domain !== tabDomain\n      ) {\n        continue;\n      }\n\n      if (this.notificationQueue[i].type === NotificationQueueMessageType.AddLogin) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"add\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n            removeIndividualVault: await this.removeIndividualVault(),\n            webVaultURL: await this.environmentService.getWebVaultUrl(),\n          },\n        });\n      } else if (this.notificationQueue[i].type === NotificationQueueMessageType.ChangePassword) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"change\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n            webVaultURL: await this.environmentService.getWebVaultUrl(),\n          },\n        });\n      } else if (this.notificationQueue[i].type === NotificationQueueMessageType.UnlockVault) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"unlock\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n          },\n        });\n      }\n      break;\n    }\n  }\n\n  private async getCurrentTheme() {\n    const theme = await this.stateService.getTheme();\n\n    if (theme !== ThemeType.System) {\n      return theme;\n    }\n\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  private removeTabFromNotificationQueue(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].tabId === tab.id) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n  }\n\n  private async addLogin(loginInfo: AddLoginRuntimeMessage, tab: chrome.tabs.Tab) {\n    const authStatus = await this.authService.getAuthStatus();\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return;\n    }\n\n    const loginDomain = Utils.getDomain(loginInfo.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    let normalizedUsername = loginInfo.username;\n    if (normalizedUsername != null) {\n      normalizedUsername = normalizedUsername.toLowerCase();\n    }\n\n    const disabledAddLogin = await this.stateService.getDisableAddLoginNotification();\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab, true);\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(loginInfo.url);\n    const usernameMatches = ciphers.filter(\n      (c) => c.login.username != null && c.login.username.toLowerCase() === normalizedUsername\n    );\n    if (usernameMatches.length === 0) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab);\n    } else if (\n      usernameMatches.length === 1 &&\n      usernameMatches[0].login.password !== loginInfo.password\n    ) {\n      const disabledChangePassword =\n        await this.stateService.getDisableChangedPasswordNotification();\n      if (disabledChangePassword) {\n        return;\n      }\n      this.pushChangePasswordToQueue(usernameMatches[0].id, loginDomain, loginInfo.password, tab);\n    }\n  }\n\n  private async pushAddLoginToQueue(\n    loginDomain: string,\n    loginInfo: AddLoginRuntimeMessage,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddLoginQueueMessage = {\n      type: NotificationQueueMessageType.AddLogin,\n      username: loginInfo.username,\n      password: loginInfo.password,\n      domain: loginDomain,\n      uri: loginInfo.url,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async changedPassword(changeData: ChangePasswordRuntimeMessage, tab: chrome.tabs.Tab) {\n    const loginDomain = Utils.getDomain(changeData.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      this.pushChangePasswordToQueue(null, loginDomain, changeData.newPassword, tab, true);\n      return;\n    }\n\n    let id: string = null;\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(changeData.url);\n    if (changeData.currentPassword != null) {\n      const passwordMatches = ciphers.filter(\n        (c) => c.login.password === changeData.currentPassword\n      );\n      if (passwordMatches.length === 1) {\n        id = passwordMatches[0].id;\n      }\n    } else if (ciphers.length === 1) {\n      id = ciphers[0].id;\n    }\n    if (id != null) {\n      this.pushChangePasswordToQueue(id, loginDomain, changeData.newPassword, tab);\n    }\n  }\n\n  private async unlockVault(tab: chrome.tabs.Tab) {\n    const currentAuthStatus = await this.authService.getAuthStatus();\n    if (currentAuthStatus !== AuthenticationStatus.Locked || this.notificationQueue.length) {\n      return;\n    }\n\n    const loginDomain = Utils.getDomain(tab.url);\n    if (!loginDomain) {\n      return;\n    }\n\n    this.pushUnlockVaultToQueue(loginDomain, tab);\n  }\n\n  private async pushChangePasswordToQueue(\n    cipherId: string,\n    loginDomain: string,\n    newPassword: string,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddChangePasswordQueueMessage = {\n      type: NotificationQueueMessageType.ChangePassword,\n      cipherId: cipherId,\n      newPassword: newPassword,\n      domain: loginDomain,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async pushUnlockVaultToQueue(loginDomain: string, tab: chrome.tabs.Tab) {\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddUnlockVaultQueueMessage = {\n      type: NotificationQueueMessageType.UnlockVault,\n      domain: loginDomain,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 0.5 * 60000), // 30 seconds\n      wasVaultLocked: true,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n    this.removeTabFromNotificationQueue(tab);\n  }\n\n  private async saveOrUpdateCredentials(tab: chrome.tabs.Tab, edit: boolean, folderId?: string) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (queueMessage.tabId !== tab.id || !(queueMessage.type in NotificationQueueMessageType)) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      if (queueMessage.type === NotificationQueueMessageType.ChangePassword) {\n        const cipherView = await this.getDecryptedCipherById(queueMessage.cipherId);\n        await this.updatePassword(cipherView, queueMessage.newPassword, edit, tab);\n        return;\n      }\n\n      if (queueMessage.type === NotificationQueueMessageType.AddLogin) {\n        // If the vault was locked, check if a cipher needs updating instead of creating a new one\n        if (queueMessage.wasVaultLocked) {\n          const allCiphers = await this.cipherService.getAllDecryptedForUrl(queueMessage.uri);\n          const existingCipher = allCiphers.find(\n            (c) =>\n              c.login.username != null && c.login.username.toLowerCase() === queueMessage.username\n          );\n\n          if (existingCipher != null) {\n            await this.updatePassword(existingCipher, queueMessage.password, edit, tab);\n            return;\n          }\n        }\n\n        folderId = (await this.folderExists(folderId)) ? folderId : null;\n        const newCipher = AddLoginQueueMessage.toCipherView(queueMessage, folderId);\n\n        if (edit) {\n          await this.editItem(newCipher, tab);\n          return;\n        }\n\n        const cipher = await this.cipherService.encrypt(newCipher);\n        await this.cipherService.createWithServer(cipher);\n        BrowserApi.tabSendMessageData(tab, \"addedCipher\");\n      }\n    }\n  }\n\n  private async updatePassword(\n    cipherView: CipherView,\n    newPassword: string,\n    edit: boolean,\n    tab: chrome.tabs.Tab\n  ) {\n    cipherView.login.password = newPassword;\n\n    if (edit) {\n      await this.editItem(cipherView, tab);\n      BrowserApi.tabSendMessage(tab, \"editedCipher\");\n      return;\n    }\n\n    const cipher = await this.cipherService.encrypt(cipherView);\n    await this.cipherService.updateWithServer(cipher);\n    // We've only updated the password, no need to broadcast editedCipher message\n    return;\n  }\n\n  private async editItem(cipherView: CipherView, senderTab: chrome.tabs.Tab) {\n    await this.stateService.setAddEditCipherInfo({\n      cipher: cipherView,\n      collectionIds: cipherView.collectionIds,\n    });\n\n    await BrowserApi.tabSendMessageData(senderTab, \"openAddEditCipher\", {\n      cipherId: cipherView.id,\n    });\n  }\n\n  private async folderExists(folderId: string) {\n    if (Utils.isNullOrWhitespace(folderId) || folderId === \"null\") {\n      return false;\n    }\n\n    const folders = await firstValueFrom(this.folderService.folderViews$);\n    return folders.some((x) => x.id === folderId);\n  }\n\n  private async getDecryptedCipherById(cipherId: string) {\n    const cipher = await this.cipherService.get(cipherId);\n    if (cipher != null && cipher.type === CipherType.Login) {\n      return await cipher.decrypt(await this.cipherService.getKeyForCipherKeyDecryption(cipher));\n    }\n    return null;\n  }\n\n  private async saveNever(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (\n        queueMessage.tabId !== tab.id ||\n        queueMessage.type !== NotificationQueueMessageType.AddLogin\n      ) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      const hostname = Utils.getHostname(tab.url);\n      await this.cipherService.saveNeverDomain(hostname);\n    }\n  }\n\n  private async getDataForTab(tab: chrome.tabs.Tab, responseCommand: string) {\n    const responseData: any = {};\n    if (responseCommand === \"notificationBarGetFoldersList\") {\n      responseData.folders = await firstValueFrom(this.folderService.folderViews$);\n    }\n\n    await BrowserApi.tabSendMessageData(tab, responseCommand, responseData);\n  }\n\n  private async removeIndividualVault(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n\n  private async handleUnlockCompleted(\n    messageData: LockedVaultPendingNotificationsItem,\n    sender: chrome.runtime.MessageSender\n  ): Promise<void> {\n    if (messageData.commandToRetry.msg.command === \"autofill_login\") {\n      await BrowserApi.tabSendMessageData(sender.tab, \"closeNotificationBar\");\n    }\n\n    if (messageData.target !== \"notification.background\") {\n      return;\n    }\n\n    await this.processMessage(\n      messageData.commandToRetry.msg.command,\n      messageData.commandToRetry.sender\n    );\n  }\n}\n","import MainBackground from \"../../background/main.background\";\n\nimport NotificationBackground from \"./notification.background\";\n\nexport default class TabsBackground {\n  constructor(\n    private main: MainBackground,\n    private notificationBackground: NotificationBackground\n  ) {}\n\n  private focusedWindowId: number;\n\n  async init() {\n    if (!chrome.tabs || !chrome.windows) {\n      return;\n    }\n\n    chrome.windows.onFocusChanged.addListener(async (windowId: number) => {\n      if (windowId === null || windowId < 0) {\n        return;\n      }\n\n      this.focusedWindowId = windowId;\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"windowChanged\");\n    });\n\n    chrome.tabs.onActivated.addListener(async (activeInfo: chrome.tabs.TabActiveInfo) => {\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onReplaced.addListener(async (addedTabId: number, removedTabId: number) => {\n      if (this.main.onReplacedRan) {\n        return;\n      }\n      this.main.onReplacedRan = true;\n\n      await this.notificationBackground.checkNotificationQueue();\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onUpdated.addListener(\n      async (tabId: number, changeInfo: chrome.tabs.TabChangeInfo, tab: chrome.tabs.Tab) => {\n        if (this.focusedWindowId > 0 && tab.windowId != this.focusedWindowId) {\n          return;\n        }\n\n        if (!tab.active) {\n          return;\n        }\n\n        if (this.main.onUpdatedRan) {\n          return;\n        }\n        this.main.onUpdatedRan = true;\n\n        await this.notificationBackground.checkNotificationQueue(tab);\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        this.main.messagingService.send(\"tabChanged\");\n      }\n    );\n  }\n}\n","export type CachedServices = Record<string, unknown>;\n\nexport type FactoryOptions = {\n  alwaysInitializeNewService?: boolean;\n  doNotStoreInitializedService?: boolean;\n  [optionsKey: string]: unknown;\n};\n\nexport async function factory<\n  TCache extends CachedServices,\n  TName extends keyof TCache,\n  TOpts extends FactoryOptions\n>(\n  cachedServices: TCache,\n  name: TName,\n  opts: TOpts,\n  factory: () => TCache[TName] | Promise<TCache[TName]>\n): Promise<TCache[TName]> {\n  let instance = cachedServices[name];\n  if (opts.alwaysInitializeNewService || !instance) {\n    const instanceOrPromise = factory();\n    instance = instanceOrPromise instanceof Promise ? await instanceOrPromise : instanceOrPromise;\n  }\n\n  if (!opts.doNotStoreInitializedService) {\n    cachedServices[name] = instance;\n  }\n\n  return instance as TCache[TName];\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  Account as BaseAccount,\n  AccountSettings as BaseAccountSettings,\n} from \"@bitwarden/common/platform/models/domain/account\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"./browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"./browserSendComponentState\";\n\nexport class AccountSettings extends BaseAccountSettings {\n  vaultTimeout = -1; // On Restart\n\n  static fromJSON(json: Jsonify<AccountSettings>): AccountSettings {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), json, super.fromJSON(json));\n  }\n}\n\nexport class Account extends BaseAccount {\n  settings?: AccountSettings = new AccountSettings();\n  groupings?: BrowserGroupingsComponentState;\n  send?: BrowserSendComponentState;\n  ciphers?: BrowserComponentState;\n  sendType?: BrowserComponentState;\n\n  constructor(init: Partial<Account>) {\n    super(init);\n    Object.assign(this.settings, {\n      ...new AccountSettings(),\n      ...this.settings,\n    });\n    this.groupings = init?.groupings ?? new BrowserGroupingsComponentState();\n    this.send = init?.send ?? new BrowserSendComponentState();\n    this.ciphers = init?.ciphers ?? new BrowserComponentState();\n    this.sendType = init?.sendType ?? new BrowserComponentState();\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, super.fromJSON(json), {\n      settings: AccountSettings.fromJSON(json.settings),\n      groupings: BrowserGroupingsComponentState.fromJSON(json.groupings),\n      send: BrowserSendComponentState.fromJSON(json.send),\n      ciphers: BrowserComponentState.fromJSON(json.ciphers),\n      sendType: BrowserComponentState.fromJSON(json.sendType),\n    });\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport {\n  AbstractStorageService,\n  AbstractMemoryStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { StorageOptions } from \"@bitwarden/common/platform/models/domain/storage-options\";\nimport { StateService as BaseStateService } from \"@bitwarden/common/platform/services/state.service\";\n\nimport { Account } from \"../../models/account\";\nimport { BrowserComponentState } from \"../../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../../models/browserSendComponentState\";\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"./abstractions/browser-state.service\";\n\n@browserSession\nexport class BrowserStateService\n  extends BaseStateService<GlobalState, Account>\n  implements StateServiceAbstraction\n{\n  @sessionSync({\n    initializer: Account.fromJSON as any, // TODO: Remove this any when all any types are removed from Account\n    initializeAs: \"record\",\n  })\n  protected accountsSubject: BehaviorSubject<{ [userId: string]: Account }>;\n  @sessionSync({ initializer: (s: string) => s })\n  protected activeAccountSubject: BehaviorSubject<string>;\n  @sessionSync({ initializer: (b: boolean) => b })\n  protected activeAccountUnlockedSubject: BehaviorSubject<boolean>;\n\n  protected accountDeserializer = Account.fromJSON;\n\n  constructor(\n    storageService: AbstractStorageService,\n    secureStorageService: AbstractStorageService,\n    memoryStorageService: AbstractMemoryStorageService,\n    logService: LogService,\n    stateFactory: StateFactory<GlobalState, Account>,\n    useAccountCache = true\n  ) {\n    super(\n      storageService,\n      secureStorageService,\n      memoryStorageService,\n      logService,\n      stateFactory,\n      useAccountCache\n    );\n\n    // TODO: This is a hack to fix having a disk cache on both the popup and\n    // the background page that can get out of sync. We need to work out the\n    // best way to handle caching with multiple instances of the state service.\n    if (useAccountCache) {\n      chrome.storage.onChanged.addListener((changes, namespace) => {\n        if (namespace === \"local\") {\n          for (const key of Object.keys(changes)) {\n            if (key !== \"accountActivity\" && this.accountDiskCache.value[key]) {\n              this.deleteDiskCache(key);\n            }\n          }\n        }\n      });\n    }\n  }\n\n  async addAccount(account: Account) {\n    // Apply browser overrides to default account values\n    account = new Account(account);\n    await super.addAccount(account);\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    // Firefox Private Mode can clash with non-Private Mode because they both read from the same onDiskOptions\n    // Check that there is an account in memory before considering the user authenticated\n    return (\n      (await super.getIsAuthenticated(options)) &&\n      (await this.getAccount(await this.defaultInMemoryOptions())) != null\n    );\n  }\n\n  async getBrowserGroupingComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserGroupingsComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.groupings;\n  }\n\n  async setBrowserGroupingComponentState(\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.groupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserVaultItemsComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.ciphers;\n  }\n\n  async setBrowserVaultItemsComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.ciphers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendComponentState(options?: StorageOptions): Promise<BrowserSendComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.send;\n  }\n\n  async setBrowserSendComponentState(\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.send = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendTypeComponentState(options?: StorageOptions): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.sendType;\n  }\n\n  async setBrowserSendTypeComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.sendType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  // Overriding the base class to prevent deleting the cache on save. We register a storage listener\n  // to delete the cache in the constructor above.\n  protected override async saveAccountToDisk(\n    account: Account,\n    options: StorageOptions\n  ): Promise<void> {\n    const storageLocation = options.useSecureStorage\n      ? this.secureStorageService\n      : this.storageService;\n\n    await storageLocation.save(`${options.userId}`, account, options);\n  }\n}\n","import { LogLevelType } from \"@bitwarden/common/enums\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype LogServiceFactoryOptions = FactoryOptions & {\n  logServiceOptions: {\n    isDev: boolean;\n    filter?: (level: LogLevelType) => boolean;\n  };\n};\n\nexport type LogServiceInitOptions = LogServiceFactoryOptions;\n\nexport function logServiceFactory(\n  cache: { logService?: LogService } & CachedServices,\n  opts: LogServiceInitOptions\n): Promise<LogService> {\n  return factory(\n    cache,\n    \"logService\",\n    opts,\n    () => new ConsoleLogService(opts.logServiceOptions.isDev, opts.logServiceOptions.filter)\n  );\n}\n","import { AbstractStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\n\nexport default abstract class AbstractChromeStorageService implements AbstractStorageService {\n  protected abstract chromeStorageApi: chrome.storage.StorageArea;\n\n  async get<T>(key: string): Promise<T> {\n    return new Promise((resolve) => {\n      this.chromeStorageApi.get(key, (obj: any) => {\n        if (obj != null && obj[key] != null) {\n          resolve(obj[key] as T);\n          return;\n        }\n        resolve(null);\n      });\n    });\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save(key: string, obj: any): Promise<void> {\n    if (obj == null) {\n      // Fix safari not liking null in set\n      return new Promise<void>((resolve) => {\n        this.chromeStorageApi.remove(key, () => {\n          resolve();\n        });\n      });\n    }\n\n    if (obj instanceof Set) {\n      obj = Array.from(obj);\n    }\n\n    const keyedObj = { [key]: obj };\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.set(keyedObj, () => {\n        resolve();\n      });\n    });\n  }\n\n  async remove(key: string): Promise<void> {\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.remove(key, () => {\n        resolve();\n      });\n    });\n  }\n}\n","import AbstractChromeStorageService from \"./abstractions/abstract-chrome-storage-api.service\";\n\nexport default class BrowserLocalStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.local;\n}\n","import AbstractChromeStorageService from \"./abstractions/abstract-chrome-storage-api.service\";\n\nexport default class BrowserMemoryStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.session;\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport { MemoryStorageOptions } from \"@bitwarden/common/platform/models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\n\nimport { devFlag } from \"../decorators/dev-flag.decorator\";\nimport { devFlagEnabled } from \"../flags\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstract-key-generation.service\";\nimport BrowserLocalStorageService from \"./browser-local-storage.service\";\nimport BrowserMemoryStorageService from \"./browser-memory-storage.service\";\n\nconst keys = {\n  encKey: \"localEncryptionKey\",\n  sessionKey: \"session\",\n};\n\nexport class LocalBackedSessionStorageService extends AbstractMemoryStorageService {\n  private cache = new Map<string, unknown>();\n  private localStorage = new BrowserLocalStorageService();\n  private sessionStorage = new BrowserMemoryStorageService();\n\n  constructor(\n    private encryptService: EncryptService,\n    private keyGenerationService: AbstractKeyGenerationService\n  ) {\n    super();\n  }\n\n  async get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    if (this.cache.has(key)) {\n      return this.cache.get(key) as T;\n    }\n\n    return await this.getBypassCache(key, options);\n  }\n\n  async getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    const session = await this.getLocalSession(await this.getSessionEncKey());\n    if (session == null || !Object.keys(session).includes(key)) {\n      return null;\n    }\n\n    let value = session[key];\n    if (options?.deserializer != null) {\n      value = options.deserializer(value as Jsonify<T>);\n    }\n\n    this.cache.set(key, value);\n    return this.cache.get(key) as T;\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save<T>(key: string, obj: T): Promise<void> {\n    if (obj == null) {\n      this.cache.delete(key);\n    } else {\n      this.cache.set(key, obj);\n    }\n\n    const sessionEncKey = await this.getSessionEncKey();\n    const localSession = (await this.getLocalSession(sessionEncKey)) ?? {};\n    localSession[key] = obj;\n    await this.setLocalSession(localSession, sessionEncKey);\n  }\n\n  async remove(key: string): Promise<void> {\n    await this.save(key, null);\n  }\n\n  async getLocalSession(encKey: SymmetricCryptoKey): Promise<Record<string, unknown>> {\n    const local = await this.localStorage.get<string>(keys.sessionKey);\n\n    if (local == null) {\n      return null;\n    }\n\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      return local as any as Record<string, unknown>;\n    }\n\n    const sessionJson = await this.encryptService.decryptToUtf8(new EncString(local), encKey);\n    if (sessionJson == null) {\n      // Error with decryption -- session is lost, delete state and key and start over\n      await this.setSessionEncKey(null);\n      await this.localStorage.remove(keys.sessionKey);\n      return null;\n    }\n    return JSON.parse(sessionJson);\n  }\n\n  async setLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      await this.setDecryptedLocalSession(session);\n    } else {\n      await this.setEncryptedLocalSession(session, key);\n    }\n  }\n\n  @devFlag(\"storeSessionDecrypted\")\n  async setDecryptedLocalSession(session: Record<string, unknown>): Promise<void> {\n    // Make sure we're storing the jsonified version of the session\n    const jsonSession = JSON.parse(JSON.stringify(session));\n    if (session == null) {\n      await this.localStorage.remove(keys.sessionKey);\n    } else {\n      await this.localStorage.save(keys.sessionKey, jsonSession);\n    }\n  }\n\n  async setEncryptedLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    const jsonSession = JSON.stringify(session);\n    const encSession = await this.encryptService.encrypt(jsonSession, key);\n\n    if (encSession == null) {\n      return await this.localStorage.remove(keys.sessionKey);\n    }\n    await this.localStorage.save(keys.sessionKey, encSession.encryptedString);\n  }\n\n  async getSessionEncKey(): Promise<SymmetricCryptoKey> {\n    let storedKey = await this.sessionStorage.get<SymmetricCryptoKey>(keys.encKey);\n    if (storedKey == null || Object.keys(storedKey).length == 0) {\n      storedKey = await this.keyGenerationService.makeEphemeralKey();\n      await this.setSessionEncKey(storedKey);\n    }\n    return SymmetricCryptoKey.fromJSON(storedKey);\n  }\n\n  async setSessionEncKey(input: SymmetricCryptoKey): Promise<void> {\n    if (input == null) {\n      await this.sessionStorage.remove(keys.encKey);\n    } else {\n      await this.sessionStorage.save(keys.encKey, input);\n    }\n  }\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/platform/services/web-crypto-function.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype CryptoFunctionServiceFactoryOptions = FactoryOptions & {\n  cryptoFunctionServiceOptions: {\n    win: Window | typeof globalThis;\n  };\n};\n\nexport type CryptoFunctionServiceInitOptions = CryptoFunctionServiceFactoryOptions;\n\nexport function cryptoFunctionServiceFactory(\n  cache: { cryptoFunctionService?: CryptoFunctionService } & CachedServices,\n  opts: CryptoFunctionServiceFactoryOptions\n): Promise<CryptoFunctionService> {\n  return factory(\n    cache,\n    \"cryptoFunctionService\",\n    opts,\n    () => new WebCryptoFunctionService(opts.cryptoFunctionServiceOptions.win)\n  );\n}\n","import { devFlagEnabled, DevFlags } from \"../flags\";\n\nexport function devFlag(flag: keyof DevFlags) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    descriptor.value = function (...args: any[]) {\n      if (!devFlagEnabled(flag)) {\n        throw new Error(\n          `This method should not be called, it is protected by a disabled dev flag.`\n        );\n      }\n      return originalMethod.apply(this, args);\n    };\n  };\n}\n","import { EncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/encrypt.service.implementation\";\n\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../background/service-factories/log-service.factory\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype EncryptServiceFactoryOptions = FactoryOptions & {\n  encryptServiceOptions: {\n    logMacFailures: boolean;\n  };\n};\n\nexport type EncryptServiceInitOptions = EncryptServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function encryptServiceFactory(\n  cache: { encryptService?: EncryptServiceImplementation } & CachedServices,\n  opts: EncryptServiceInitOptions\n): Promise<EncryptServiceImplementation> {\n  return factory(\n    cache,\n    \"encryptService\",\n    opts,\n    async () =>\n      new EncryptServiceImplementation(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        opts.encryptServiceOptions.logMacFailures\n      )\n  );\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstract-key-generation.service\";\n\nexport class KeyGenerationService implements AbstractKeyGenerationService {\n  constructor(private cryptoFunctionService: CryptoFunctionService) {}\n\n  async makeEphemeralKey(numBytes = 16): Promise<SymmetricCryptoKey> {\n    const keyMaterial = await this.cryptoFunctionService.randomBytes(numBytes);\n    const key = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-ephemeral\",\n      \"ephemeral\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(key);\n  }\n}\n","import {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/platform/services/memory-storage.service\";\n\nimport { BrowserApi } from \"../../browser/browser-api\";\nimport BrowserLocalStorageService from \"../../services/browser-local-storage.service\";\nimport { LocalBackedSessionStorageService } from \"../../services/local-backed-session-storage.service\";\n\nimport { EncryptServiceInitOptions, encryptServiceFactory } from \"./encrypt-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  KeyGenerationServiceInitOptions,\n  keyGenerationServiceFactory,\n} from \"./key-generation-service.factory\";\n\ntype StorageServiceFactoryOptions = FactoryOptions;\n\nexport type DiskStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type SecureStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type MemoryStorageServiceInitOptions = StorageServiceFactoryOptions &\n  EncryptServiceInitOptions &\n  KeyGenerationServiceInitOptions;\n\nexport function diskStorageServiceFactory(\n  cache: { diskStorageService?: AbstractStorageService } & CachedServices,\n  opts: DiskStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"diskStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function secureStorageServiceFactory(\n  cache: { secureStorageService?: AbstractStorageService } & CachedServices,\n  opts: SecureStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"secureStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function memoryStorageServiceFactory(\n  cache: { memoryStorageService?: AbstractMemoryStorageService } & CachedServices,\n  opts: MemoryStorageServiceInitOptions\n): Promise<AbstractMemoryStorageService> {\n  return factory(cache, \"memoryStorageService\", opts, async () => {\n    if (BrowserApi.manifestVersion === 3) {\n      return new LocalBackedSessionStorageService(\n        await encryptServiceFactory(cache, opts),\n        await keyGenerationServiceFactory(cache, opts)\n      );\n    }\n    return new MemoryStorageService();\n  });\n}\n","import { KeyGenerationService } from \"../../services/key-generation.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype KeyGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type KeyGenerationServiceInitOptions = KeyGenerationServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyGenerationServiceFactory(\n  cache: { keyGenerationService?: KeyGenerationService } & CachedServices,\n  opts: KeyGenerationServiceInitOptions\n): Promise<KeyGenerationService> {\n  return factory(\n    cache,\n    \"keyGenerationService\",\n    opts,\n    async () => new KeyGenerationService(await cryptoFunctionServiceFactory(cache, opts))\n  );\n}\n","import { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\n\nimport { Account } from \"../../../models/account\";\nimport { BrowserStateService } from \"../../services/browser-state.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  diskStorageServiceFactory,\n  secureStorageServiceFactory,\n  memoryStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  SecureStorageServiceInitOptions,\n  MemoryStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateServiceFactoryOptions = FactoryOptions & {\n  stateServiceOptions: {\n    useAccountCache?: boolean;\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateServiceInitOptions = StateServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions &\n  MemoryStorageServiceInitOptions &\n  LogServiceInitOptions;\n\nexport async function stateServiceFactory(\n  cache: { stateService?: BrowserStateService } & CachedServices,\n  opts: StateServiceInitOptions\n): Promise<BrowserStateService> {\n  const service = await factory(\n    cache,\n    \"stateService\",\n    opts,\n    async () =>\n      await new BrowserStateService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        await memoryStorageServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        opts.stateServiceOptions.stateFactory,\n        opts.stateServiceOptions.useAccountCache\n      )\n  );\n  service.init();\n  return service;\n}\n","import { OrganizationService as AbstractOrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport { BrowserOrganizationService } from \"../../services/browser-organization.service\";\n\ntype OrganizationServiceFactoryOptions = FactoryOptions;\n\nexport type OrganizationServiceInitOptions = OrganizationServiceFactoryOptions &\n  StateServiceInitOptions;\n\nexport function organizationServiceFactory(\n  cache: { organizationService?: AbstractOrganizationService } & CachedServices,\n  opts: OrganizationServiceInitOptions\n): Promise<AbstractOrganizationService> {\n  return factory(\n    cache,\n    \"organizationService\",\n    opts,\n    async () => new BrowserOrganizationService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { PolicyService as AbstractPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport { BrowserPolicyService } from \"../../services/browser-policy.service\";\n\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"./organization-service.factory\";\n\ntype PolicyServiceFactoryOptions = FactoryOptions;\n\nexport type PolicyServiceInitOptions = PolicyServiceFactoryOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions;\n\nexport function policyServiceFactory(\n  cache: { policyService?: AbstractPolicyService } & CachedServices,\n  opts: PolicyServiceInitOptions\n): Promise<AbstractPolicyService> {\n  return factory(\n    cache,\n    \"policyService\",\n    opts,\n    async () =>\n      new BrowserPolicyService(\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TokenService as AbstractTokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype TokenServiceFactoryOptions = FactoryOptions;\n\nexport type TokenServiceInitOptions = TokenServiceFactoryOptions & StateServiceInitOptions;\n\nexport function tokenServiceFactory(\n  cache: { tokenService?: AbstractTokenService } & CachedServices,\n  opts: TokenServiceInitOptions\n): Promise<AbstractTokenService> {\n  return factory(\n    cache,\n    \"tokenService\",\n    opts,\n    async () => new TokenService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { DiskStorageOptions } from \"@koa/multer\";\n\nimport { AppIdService as AbstractAppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { AppIdService } from \"@bitwarden/common/platform/services/app-id.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { diskStorageServiceFactory } from \"./storage-service.factory\";\n\ntype AppIdServiceFactoryOptions = FactoryOptions;\n\nexport type AppIdServiceInitOptions = AppIdServiceFactoryOptions & DiskStorageOptions;\n\nexport function appIdServiceFactory(\n  cache: { appIdService?: AbstractAppIdService } & CachedServices,\n  opts: AppIdServiceInitOptions\n): Promise<AbstractAppIdService> {\n  return factory(\n    cache,\n    \"appIdService\",\n    opts,\n    async () => new AppIdService(await diskStorageServiceFactory(cache, opts))\n  );\n}\n","import { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"./state-service.factory\";\n\ntype EnvironmentServiceFactoryOptions = FactoryOptions;\n\nexport type EnvironmentServiceInitOptions = EnvironmentServiceFactoryOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function environmentServiceFactory(\n  cache: { environmentService?: BrowserEnvironmentService } & CachedServices,\n  opts: EnvironmentServiceInitOptions\n): Promise<BrowserEnvironmentService> {\n  return factory(\n    cache,\n    \"environmentService\",\n    opts,\n    async () =>\n      new BrowserEnvironmentService(\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport default class BrowserMessagingService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    return BrowserApi.sendMessage(subscriber, arg);\n  }\n}\n","import { MessagingService as AbstractMessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../background/service-factories/factory-options\";\nimport BrowserMessagingService from \"../../services/browser-messaging.service\";\n\ntype MessagingServiceFactoryOptions = FactoryOptions;\n\nexport type MessagingServiceInitOptions = MessagingServiceFactoryOptions;\n\nexport function messagingServiceFactory(\n  cache: { messagingService?: AbstractMessagingService } & CachedServices,\n  opts: MessagingServiceInitOptions\n): Promise<AbstractMessagingService> {\n  return factory(cache, \"messagingService\", opts, () => new BrowserMessagingService());\n}\n","import { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport BrowserPlatformUtilsService from \"../../services/browser-platform-utils.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { MessagingServiceInitOptions, messagingServiceFactory } from \"./messaging-service.factory\";\n\ntype PlatformUtilsServiceFactoryOptions = FactoryOptions & {\n  platformUtilsServiceOptions: {\n    clipboardWriteCallback: (clipboardValue: string, clearMs: number) => Promise<void>;\n    biometricCallback: () => Promise<boolean>;\n    win: Window & typeof globalThis;\n  };\n};\n\nexport type PlatformUtilsServiceInitOptions = PlatformUtilsServiceFactoryOptions &\n  MessagingServiceInitOptions;\n\nexport function platformUtilsServiceFactory(\n  cache: { platformUtilsService?: PlatformUtilsService } & CachedServices,\n  opts: PlatformUtilsServiceInitOptions\n): Promise<PlatformUtilsService> {\n  return factory(\n    cache,\n    \"platformUtilsService\",\n    opts,\n    async () =>\n      new BrowserPlatformUtilsService(\n        await messagingServiceFactory(cache, opts),\n        opts.platformUtilsServiceOptions.clipboardWriteCallback,\n        opts.platformUtilsServiceOptions.biometricCallback,\n        opts.platformUtilsServiceOptions.win\n      )\n  );\n}\n","import { ApiService as AbstractApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\n\nimport {\n  tokenServiceFactory,\n  TokenServiceInitOptions,\n} from \"../../../auth/background/service-factories/token-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../background/service-factories/factory-options\";\n\nimport { AppIdServiceInitOptions, appIdServiceFactory } from \"./app-id-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"./environment-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\n\ntype ApiServiceFactoryOptions = FactoryOptions & {\n  apiServiceOptions: {\n    logoutCallback: (expired: boolean) => Promise<void>;\n    customUserAgent?: string;\n  };\n};\n\nexport type ApiServiceInitOptions = ApiServiceFactoryOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  AppIdServiceInitOptions;\n\nexport function apiServiceFactory(\n  cache: { apiService?: AbstractApiService } & CachedServices,\n  opts: ApiServiceInitOptions\n): Promise<AbstractApiService> {\n  return factory(\n    cache,\n    \"apiService\",\n    opts,\n    async () =>\n      new ApiService(\n        await tokenServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        opts.apiServiceOptions.logoutCallback,\n        opts.apiServiceOptions.customUserAgent\n      )\n  );\n}\n","import { KeySuffixOptions } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport {\n  SymmetricCryptoKey,\n  UserKey,\n} from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { CryptoService } from \"@bitwarden/common/platform/services/crypto.service\";\n\nexport class BrowserCryptoService extends CryptoService {\n  override async hasUserKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {\n    if (keySuffix === KeySuffixOptions.Biometric) {\n      return await this.stateService.getBiometricUnlock({ userId: userId });\n    }\n    return super.hasUserKeyStored(keySuffix, userId);\n  }\n\n  /**\n   * Browser doesn't store biometric keys, so we retrieve them from the desktop and return\n   * if we successfully saved it into memory as the User Key\n   */\n  protected override async getKeyFromStorage(keySuffix: KeySuffixOptions): Promise<UserKey> {\n    if (keySuffix === KeySuffixOptions.Biometric) {\n      await this.platformUtilService.authenticateBiometric();\n      const userKey = await this.stateService.getUserKey();\n      if (userKey) {\n        return new SymmetricCryptoKey(Utils.fromB64ToArray(userKey.keyB64)) as UserKey;\n      }\n    }\n\n    return await super.getKeyFromStorage(keySuffix);\n  }\n}\n","import { CryptoService as AbstractCryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\n\nimport {\n  StateServiceInitOptions,\n  stateServiceFactory,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../background/service-factories/log-service.factory\";\nimport { BrowserCryptoService } from \"../../services/browser-crypto.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { encryptServiceFactory, EncryptServiceInitOptions } from \"./encrypt-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\n\ntype CryptoServiceFactoryOptions = FactoryOptions;\n\nexport type CryptoServiceInitOptions = CryptoServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  EncryptServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  LogServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function cryptoServiceFactory(\n  cache: { cryptoService?: AbstractCryptoService } & CachedServices,\n  opts: CryptoServiceInitOptions\n): Promise<AbstractCryptoService> {\n  return factory(\n    cache,\n    \"cryptoService\",\n    opts,\n    async () =>\n      new BrowserCryptoService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TranslationService as TranslationServiceAbstraction } from \"../abstractions/translation.service\";\n\nexport abstract class TranslationService implements TranslationServiceAbstraction {\n  // First locale is the default (English)\n  supportedTranslationLocales: string[] = [\"en\"];\n  defaultLocale = \"en\";\n  abstract translationLocale: string;\n  collator: Intl.Collator;\n  localeNames = new Map<string, string>([\n    [\"af\", \"Afrikaans\"],\n    [\"ar\", \" \"],\n    [\"az\", \"Azrbaycanca\"],\n    [\"be\", \"\"],\n    [\"bg\", \"\"],\n    [\"bn\", \"\"],\n    [\"bs\", \"bosanski jezik\"],\n    [\"ca\", \"catal\"],\n    [\"cs\", \"etina\"],\n    [\"da\", \"dansk\"],\n    [\"de\", \"Deutsch\"],\n    [\"el\", \"\"],\n    [\"en\", \"English\"],\n    [\"en-GB\", \"English (British)\"],\n    [\"en-IN\", \"English (India)\"],\n    [\"eo\", \"Esperanto\"],\n    [\"es\", \"espaol\"],\n    [\"et\", \"eesti\"],\n    [\"eu\", \"euskara\"],\n    [\"fa\", \"\"],\n    [\"fi\", \"suomi\"],\n    [\"fil\", \"Wikang Filipino\"],\n    [\"fr\", \"franais\"],\n    [\"he\", \"\"],\n    [\"hi\", \"\"],\n    [\"hr\", \"hrvatski\"],\n    [\"hu\", \"magyar\"],\n    [\"id\", \"Bahasa Indonesia\"],\n    [\"it\", \"italiano\"],\n    [\"ja\", \"\"],\n    [\"ka\", \"\"],\n    [\"km\", \", , \"],\n    [\"kn\", \"\"],\n    [\"ko\", \"\"],\n    [\"lt\", \"lietuvi kalba\"],\n    [\"lv\", \"Latvietis\"],\n    [\"me\", \"\"],\n    [\"ml\", \"\"],\n    [\"nb\", \"norsk (bokml)\"],\n    [\"nl\", \"Nederlands\"],\n    [\"nn\", \"Norsk Nynorsk\"],\n    [\"pl\", \"polski\"],\n    [\"pt-BR\", \"portugus do Brasil\"],\n    [\"pt-PT\", \"portugus\"],\n    [\"ro\", \"romn\"],\n    [\"ru\", \"\"],\n    [\"si\", \"\"],\n    [\"sk\", \"slovenina\"],\n    [\"sl\", \"Slovenski jezik, Slovenina\"],\n    [\"sr\", \"\"],\n    [\"sv\", \"svenska\"],\n    [\"th\", \"\"],\n    [\"tr\", \"Trke\"],\n    [\"uk\", \"\"],\n    [\"vi\", \"Ting Vit\"],\n    [\"zh-CN\", \"\"],\n    [\"zh-TW\", \"\"],\n  ]);\n\n  protected inited: boolean;\n  protected defaultMessages: any = {};\n  protected localeMessages: any = {};\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    this.systemLanguage = systemLanguage.replace(\"_\", \"-\");\n  }\n\n  async init(locale?: string) {\n    if (this.inited) {\n      throw new Error(\"i18n already initialized.\");\n    }\n    if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {\n      throw new Error(\"supportedTranslationLocales not set.\");\n    }\n\n    this.inited = true;\n    this.translationLocale = locale != null ? locale : this.systemLanguage;\n\n    try {\n      this.collator = new Intl.Collator(this.translationLocale, {\n        numeric: true,\n        sensitivity: \"base\",\n      });\n    } catch {\n      this.collator = null;\n    }\n\n    if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n      this.translationLocale = this.translationLocale.slice(0, 2);\n\n      if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n        this.translationLocale = this.defaultLocale;\n      }\n    }\n\n    if (this.localesDirectory != null) {\n      await this.loadMessages(this.translationLocale, this.localeMessages);\n      if (this.translationLocale !== this.defaultLocale) {\n        await this.loadMessages(this.defaultLocale, this.defaultMessages);\n      }\n    }\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    let result: string;\n    // eslint-disable-next-line\n    if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {\n      result = this.localeMessages[id];\n      // eslint-disable-next-line\n    } else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {\n      result = this.defaultMessages[id];\n    } else {\n      result = \"\";\n    }\n\n    if (result !== \"\") {\n      if (p1 != null) {\n        result = result.split(\"__$1__\").join(p1.toString());\n      }\n      if (p2 != null) {\n        result = result.split(\"__$2__\").join(p2.toString());\n      }\n      if (p3 != null) {\n        result = result.split(\"__$3__\").join(p3.toString());\n      }\n    }\n\n    return result;\n  }\n\n  protected async loadMessages(locale: string, messagesObj: any): Promise<any> {\n    const formattedLocale = locale.replace(\"-\", \"_\");\n    const locales = await this.getLocalesJson(formattedLocale);\n    for (const prop in locales) {\n      // eslint-disable-next-line\n      if (!locales.hasOwnProperty(prop)) {\n        continue;\n      }\n      messagesObj[prop] = locales[prop].message;\n\n      if (locales[prop].placeholders) {\n        for (const placeProp in locales[prop].placeholders) {\n          if (\n            !locales[prop].placeholders.hasOwnProperty(placeProp) || // eslint-disable-line\n            !locales[prop].placeholders[placeProp].content\n          ) {\n            continue;\n          }\n\n          const replaceToken = \"\\\\$\" + placeProp.toUpperCase() + \"\\\\$\";\n          let replaceContent = locales[prop].placeholders[placeProp].content;\n          if (replaceContent === \"$1\" || replaceContent === \"$2\" || replaceContent === \"$3\") {\n            replaceContent = \"__$\" + replaceContent + \"__\";\n          }\n          messagesObj[prop] = messagesObj[prop].replace(\n            new RegExp(replaceToken, \"g\"),\n            replaceContent\n          );\n        }\n      }\n    }\n  }\n}\n","import { Observable, ReplaySubject } from \"rxjs\";\n\nimport { I18nService as I18nServiceAbstraction } from \"../abstractions/i18n.service\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport class I18nService extends TranslationService implements I18nServiceAbstraction {\n  protected _locale = new ReplaySubject<string>(1);\n  private _translationLocale: string;\n  locale$: Observable<string> = this._locale.asObservable();\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    super(systemLanguage, localesDirectory, getLocalesJson);\n  }\n\n  get translationLocale(): string {\n    return this._translationLocale;\n  }\n\n  set translationLocale(locale: string) {\n    this._translationLocale = locale;\n    this._locale.next(locale);\n  }\n}\n","import { I18nService as BaseI18nService } from \"@bitwarden/common/platform/services/i18n.service\";\n\nexport default class I18nService extends BaseI18nService {\n  constructor(systemLanguage: string) {\n    super(systemLanguage, null, async (formattedLocale: string) => {\n      // Deprecated\n      const file = await fetch(this.localesDirectory + formattedLocale + \"/messages.json\");\n      return await file.json();\n    });\n\n    // Please leave 'en' where it is, as it's our fallback language in case no translation can be found\n    this.supportedTranslationLocales = [\n      \"en\",\n      \"ar\",\n      \"az\",\n      \"be\",\n      \"bg\",\n      \"bn\",\n      \"bs\",\n      \"ca\",\n      \"cs\",\n      \"da\",\n      \"de\",\n      \"el\",\n      \"en-GB\",\n      \"en-IN\",\n      \"es\",\n      \"et\",\n      \"eu\",\n      \"fa\",\n      \"fi\",\n      \"fil\",\n      \"fr\",\n      \"he\",\n      \"hi\",\n      \"hr\",\n      \"hu\",\n      \"id\",\n      \"it\",\n      \"ja\",\n      \"ka\",\n      \"km\",\n      \"kn\",\n      \"ko\",\n      \"lt\",\n      \"lv\",\n      \"ml\",\n      \"nb\",\n      \"nl\",\n      \"nn\",\n      \"pl\",\n      \"pt-BR\",\n      \"pt-PT\",\n      \"ro\",\n      \"ru\",\n      \"si\",\n      \"sk\",\n      \"sl\",\n      \"sr\",\n      \"sv\",\n      \"th\",\n      \"tr\",\n      \"uk\",\n      \"vi\",\n      \"zh-CN\",\n      \"zh-TW\",\n    ];\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string, p2?: string, p3?: string): string {\n    if (this.localesDirectory == null) {\n      const placeholders: string[] = [];\n      if (p1 != null) {\n        placeholders.push(p1);\n      }\n      if (p2 != null) {\n        placeholders.push(p2);\n      }\n      if (p3 != null) {\n        placeholders.push(p3);\n      }\n\n      if (placeholders.length) {\n        return chrome.i18n.getMessage(id, placeholders);\n      } else {\n        return chrome.i18n.getMessage(id);\n      }\n    }\n\n    return super.translate(id, p1, p2, p3);\n  }\n}\n","import { I18nService as AbstractI18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { I18nService as BaseI18nService } from \"@bitwarden/common/platform/services/i18n.service\";\n\nimport I18nService from \"../../services/i18n.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype I18nServiceFactoryOptions = FactoryOptions & {\n  i18nServiceOptions: {\n    systemLanguage: string;\n  };\n};\n\nexport type I18nServiceInitOptions = I18nServiceFactoryOptions;\n\nexport async function i18nServiceFactory(\n  cache: { i18nService?: AbstractI18nService } & CachedServices,\n  opts: I18nServiceInitOptions\n): Promise<AbstractI18nService> {\n  const service = await factory(\n    cache,\n    \"i18nService\",\n    opts,\n    () => new I18nService(opts.i18nServiceOptions.systemLanguage)\n  );\n  if (!(service as BaseI18nService as any).inited) {\n    await (service as BaseI18nService).init();\n  }\n  return service;\n}\n","import { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { DeviceTrustCryptoService } from \"@bitwarden/common/auth/services/device-trust-crypto.service.implementation\";\n\nimport {\n  DevicesApiServiceInitOptions,\n  devicesApiServiceFactory,\n} from \"../../../background/service-factories/devices-api-service.factory\";\nimport {\n  AppIdServiceInitOptions,\n  appIdServiceFactory,\n} from \"../../../platform/background/service-factories/app-id-service.factory\";\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-function-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  EncryptServiceInitOptions,\n  encryptServiceFactory,\n} from \"../../../platform/background/service-factories/encrypt-service.factory\";\nimport {\n  CachedServices,\n  FactoryOptions,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"../../../platform/background/service-factories/platform-utils-service.factory\";\nimport {\n  StateServiceInitOptions,\n  stateServiceFactory,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype DeviceTrustCryptoServiceFactoryOptions = FactoryOptions;\n\nexport type DeviceTrustCryptoServiceInitOptions = DeviceTrustCryptoServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  CryptoServiceInitOptions &\n  EncryptServiceInitOptions &\n  StateServiceInitOptions &\n  AppIdServiceInitOptions &\n  DevicesApiServiceInitOptions &\n  I18nServiceInitOptions &\n  PlatformUtilsServiceInitOptions;\n\nexport function deviceTrustCryptoServiceFactory(\n  cache: { deviceTrustCryptoService?: DeviceTrustCryptoServiceAbstraction } & CachedServices,\n  opts: DeviceTrustCryptoServiceInitOptions\n): Promise<DeviceTrustCryptoServiceAbstraction> {\n  return factory(\n    cache,\n    \"deviceTrustCryptoService\",\n    opts,\n    async () =>\n      new DeviceTrustCryptoService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        await devicesApiServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts)\n      )\n  );\n}\n","import { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { DevicesApiServiceImplementation } from \"@bitwarden/common/auth/services/devices-api.service.implementation\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\n\ntype DevicesApiServiceFactoryOptions = FactoryOptions;\n\nexport type DevicesApiServiceInitOptions = DevicesApiServiceFactoryOptions & ApiServiceInitOptions;\n\nexport function devicesApiServiceFactory(\n  cache: { devicesApiService?: DevicesApiServiceAbstraction } & CachedServices,\n  opts: DevicesApiServiceInitOptions\n): Promise<DevicesApiServiceAbstraction> {\n  return factory(\n    cache,\n    \"devicesApiService\",\n    opts,\n    async () => new DevicesApiServiceImplementation(await apiServiceFactory(cache, opts))\n  );\n}\n","import { AuthService as AbstractAuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\n\nimport {\n  policyServiceFactory,\n  PolicyServiceInitOptions,\n} from \"../../../admin-console/background/service-factories/policy-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport { appIdServiceFactory } from \"../../../platform/background/service-factories/app-id-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  EncryptServiceInitOptions,\n  encryptServiceFactory,\n} from \"../../../platform/background/service-factories/encrypt-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"../../../platform/background/service-factories/environment-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../platform/background/service-factories/log-service.factory\";\nimport {\n  messagingServiceFactory,\n  MessagingServiceInitOptions,\n} from \"../../../platform/background/service-factories/messaging-service.factory\";\nimport {\n  platformUtilsServiceFactory,\n  PlatformUtilsServiceInitOptions,\n} from \"../../../platform/background/service-factories/platform-utils-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport {\n  passwordStrengthServiceFactory,\n  PasswordStrengthServiceInitOptions,\n} from \"../../../tools/background/service_factories/password-strength-service.factory\";\n\nimport {\n  authRequestCryptoServiceFactory,\n  AuthRequestCryptoServiceInitOptions,\n} from \"./auth-request-crypto-service.factory\";\nimport {\n  deviceTrustCryptoServiceFactory,\n  DeviceTrustCryptoServiceInitOptions,\n} from \"./device-trust-crypto-service.factory\";\nimport {\n  keyConnectorServiceFactory,\n  KeyConnectorServiceInitOptions,\n} from \"./key-connector-service.factory\";\nimport { tokenServiceFactory, TokenServiceInitOptions } from \"./token-service.factory\";\nimport { twoFactorServiceFactory, TwoFactorServiceInitOptions } from \"./two-factor-service.factory\";\n\ntype AuthServiceFactoyOptions = FactoryOptions;\n\nexport type AuthServiceInitOptions = AuthServiceFactoyOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  MessagingServiceInitOptions &\n  LogServiceInitOptions &\n  KeyConnectorServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  StateServiceInitOptions &\n  TwoFactorServiceInitOptions &\n  I18nServiceInitOptions &\n  EncryptServiceInitOptions &\n  PolicyServiceInitOptions &\n  PasswordStrengthServiceInitOptions &\n  DeviceTrustCryptoServiceInitOptions &\n  AuthRequestCryptoServiceInitOptions;\n\nexport function authServiceFactory(\n  cache: { authService?: AbstractAuthService } & CachedServices,\n  opts: AuthServiceInitOptions\n): Promise<AbstractAuthService> {\n  return factory(\n    cache,\n    \"authService\",\n    opts,\n    async () =>\n      new AuthService(\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await messagingServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await keyConnectorServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await twoFactorServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await passwordStrengthServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts),\n        await deviceTrustCryptoServiceFactory(cache, opts),\n        await authRequestCryptoServiceFactory(cache, opts)\n      )\n  );\n}\n","import { KeyConnectorService as AbstractKeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\n\nimport {\n  OrganizationServiceInitOptions,\n  organizationServiceFactory,\n} from \"../../../admin-console/background/service-factories/organization-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-function-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\nimport { TokenServiceInitOptions, tokenServiceFactory } from \"./token-service.factory\";\n\ntype KeyConnectorServiceFactoryOptions = FactoryOptions & {\n  keyConnectorServiceOptions: {\n    logoutCallback: (expired: boolean, userId?: string) => Promise<void>;\n  };\n};\n\nexport type KeyConnectorServiceInitOptions = KeyConnectorServiceFactoryOptions &\n  StateServiceInitOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  LogServiceInitOptions &\n  OrganizationServiceInitOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyConnectorServiceFactory(\n  cache: { keyConnectorService?: AbstractKeyConnectorService } & CachedServices,\n  opts: KeyConnectorServiceInitOptions\n): Promise<AbstractKeyConnectorService> {\n  return factory(\n    cache,\n    \"keyConnectorService\",\n    opts,\n    async () =>\n      new KeyConnectorService(\n        await stateServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await cryptoFunctionServiceFactory(cache, opts),\n        opts.keyConnectorServiceOptions.logoutCallback\n      )\n  );\n}\n","import { TwoFactorService as AbstractTwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"../../../platform/background/service-factories/platform-utils-service.factory\";\n\ntype TwoFactorServiceFactoryOptions = FactoryOptions;\n\nexport type TwoFactorServiceInitOptions = TwoFactorServiceFactoryOptions &\n  I18nServiceInitOptions &\n  PlatformUtilsServiceInitOptions;\n\nexport async function twoFactorServiceFactory(\n  cache: { twoFactorService?: AbstractTwoFactorService } & CachedServices,\n  opts: TwoFactorServiceInitOptions\n): Promise<AbstractTwoFactorService> {\n  const service = await factory(\n    cache,\n    \"twoFactorService\",\n    opts,\n    async () =>\n      new TwoFactorService(\n        await i18nServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts)\n      )\n  );\n  service.init();\n  return service;\n}\n","import {\n  PasswordStrengthService,\n  PasswordStrengthServiceAbstraction,\n} from \"@bitwarden/common/tools/password-strength\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\n\ntype PasswordStrengthServiceFactoryOptions = FactoryOptions;\n\nexport type PasswordStrengthServiceInitOptions = PasswordStrengthServiceFactoryOptions;\n\nexport function passwordStrengthServiceFactory(\n  cache: {\n    passwordStrengthService?: PasswordStrengthServiceAbstraction;\n  } & CachedServices,\n  opts: PasswordStrengthServiceInitOptions\n): Promise<PasswordStrengthServiceAbstraction> {\n  return factory(cache, \"passwordStrengthService\", opts, async () => new PasswordStrengthService());\n}\n","import { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthRequestCryptoServiceImplementation } from \"@bitwarden/common/auth/services/auth-request-crypto.service.implementation\";\n\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  CachedServices,\n  FactoryOptions,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\n\ntype AuthRequestCryptoServiceFactoryOptions = FactoryOptions;\n\nexport type AuthRequestCryptoServiceInitOptions = AuthRequestCryptoServiceFactoryOptions &\n  CryptoServiceInitOptions;\n\nexport function authRequestCryptoServiceFactory(\n  cache: { authRequestCryptoService?: AuthRequestCryptoServiceAbstraction } & CachedServices,\n  opts: AuthRequestCryptoServiceInitOptions\n): Promise<AuthRequestCryptoServiceAbstraction> {\n  return factory(\n    cache,\n    \"authRequestCryptoService\",\n    opts,\n    async () => new AuthRequestCryptoServiceImplementation(await cryptoServiceFactory(cache, opts))\n  );\n}\n","import { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  FileUploadServiceInitOptions,\n  fileUploadServiceFactory,\n} from \"../../platform/background/service-factories/file-upload-service.factory\";\n\ntype CipherFileUploadServiceFactoyOptions = FactoryOptions;\n\nexport type CipherFileUploadServiceInitOptions = CipherFileUploadServiceFactoyOptions &\n  ApiServiceInitOptions &\n  FileUploadServiceInitOptions;\n\nexport function cipherFileUploadServiceFactory(\n  cache: { cipherFileUploadService?: CipherFileUploadServiceAbstraction } & CachedServices,\n  opts: CipherFileUploadServiceInitOptions\n): Promise<CipherFileUploadServiceAbstraction> {\n  return factory(\n    cache,\n    \"cipherFileUploadService\",\n    opts,\n    async () =>\n      new CipherFileUploadService(\n        await apiServiceFactory(cache, opts),\n        await fileUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/platform/abstractions/file-upload/file-upload.service\";\nimport { FileUploadService } from \"@bitwarden/common/platform/services/file-upload/file-upload.service\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../background/service-factories/factory-options\";\n\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype FileUploadServiceFactoryOptions = FactoryOptions;\n\nexport type FileUploadServiceInitOptions = FileUploadServiceFactoryOptions & LogServiceInitOptions;\n\nexport function fileUploadServiceFactory(\n  cache: { fileUploadService?: FileUploadServiceAbstraction } & CachedServices,\n  opts: FileUploadServiceInitOptions\n): Promise<FileUploadServiceAbstraction> {\n  return factory(\n    cache,\n    \"fileUploadService\",\n    opts,\n    async () => new FileUploadService(await logServiceFactory(cache, opts))\n  );\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"@bitwarden/common/platform/models/domain/account\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\n\nimport { browserSession, sessionSync } from \"../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserSettingsService extends SettingsService {\n  @sessionSync({ initializer: (obj: string[][]) => obj })\n  protected _settings: BehaviorSubject<AccountSettingsSettings>;\n\n  @sessionSync({ initializer: (b: boolean) => b })\n  protected _disableFavicon: BehaviorSubject<boolean>;\n}\n","import { SettingsService as AbstractSettingsService } from \"@bitwarden/common/abstractions/settings.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\n\ntype SettingsServiceFactoryOptions = FactoryOptions;\n\nexport type SettingsServiceInitOptions = SettingsServiceFactoryOptions & StateServiceInitOptions;\n\nexport function settingsServiceFactory(\n  cache: { settingsService?: AbstractSettingsService } & CachedServices,\n  opts: SettingsServiceInitOptions\n): Promise<AbstractSettingsService> {\n  return factory(\n    cache,\n    \"settingsService\",\n    opts,\n    async () => new BrowserSettingsService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { ConfigService } from \"@bitwarden/common/platform/services/config/config.service\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../../auth/background/service-factories/auth-service.factory\";\n\nimport { configApiServiceFactory, ConfigApiServiceInitOptions } from \"./config-api.service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"./environment-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype ConfigServiceFactoryOptions = FactoryOptions & {\n  configServiceOptions?: {\n    subscribe?: boolean;\n  };\n};\n\nexport type ConfigServiceInitOptions = ConfigServiceFactoryOptions &\n  StateServiceInitOptions &\n  ConfigApiServiceInitOptions &\n  AuthServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function configServiceFactory(\n  cache: { configService?: ConfigServiceAbstraction } & CachedServices,\n  opts: ConfigServiceInitOptions\n): Promise<ConfigServiceAbstraction> {\n  return factory(\n    cache,\n    \"configService\",\n    opts,\n    async () =>\n      new ConfigService(\n        await stateServiceFactory(cache, opts),\n        await configApiServiceFactory(cache, opts),\n        await authServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        opts.configServiceOptions?.subscribe ?? true\n      )\n  );\n}\n","import { ConfigApiServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config-api.service.abstraction\";\nimport { ConfigApiService } from \"@bitwarden/common/platform/services/config/config-api.service\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../../auth/background/service-factories/auth-service.factory\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype ConfigApiServiceFactoyOptions = FactoryOptions;\n\nexport type ConfigApiServiceInitOptions = ConfigApiServiceFactoyOptions &\n  ApiServiceInitOptions &\n  AuthServiceInitOptions;\n\nexport function configApiServiceFactory(\n  cache: { configApiService?: ConfigApiServiceAbstraction } & CachedServices,\n  opts: ConfigApiServiceInitOptions\n): Promise<ConfigApiServiceAbstraction> {\n  return factory(\n    cache,\n    \"configApiService\",\n    opts,\n    async () =>\n      new ConfigApiService(\n        await apiServiceFactory(cache, opts),\n        await authServiceFactory(cache, opts)\n      )\n  );\n}\n","import { CipherService as AbstractCipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\n\nimport {\n  CipherFileUploadServiceInitOptions,\n  cipherFileUploadServiceFactory,\n} from \"../../../background/service-factories/cipher-file-upload-service.factory\";\nimport {\n  searchServiceFactory,\n  SearchServiceInitOptions,\n} from \"../../../background/service-factories/search-service.factory\";\nimport {\n  SettingsServiceInitOptions,\n  settingsServiceFactory,\n} from \"../../../background/service-factories/settings-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport {\n  configServiceFactory,\n  ConfigServiceInitOptions,\n} from \"../../../platform/background/service-factories/config-service.factory\";\nimport {\n  cryptoServiceFactory,\n  CryptoServiceInitOptions,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  EncryptServiceInitOptions,\n  encryptServiceFactory,\n} from \"../../../platform/background/service-factories/encrypt-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype CipherServiceFactoryOptions = FactoryOptions;\n\nexport type CipherServiceInitOptions = CipherServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  SettingsServiceInitOptions &\n  ApiServiceInitOptions &\n  CipherFileUploadServiceInitOptions &\n  I18nServiceInitOptions &\n  SearchServiceInitOptions &\n  StateServiceInitOptions &\n  EncryptServiceInitOptions &\n  ConfigServiceInitOptions;\n\nexport function cipherServiceFactory(\n  cache: { cipherService?: AbstractCipherService } & CachedServices,\n  opts: CipherServiceInitOptions\n): Promise<AbstractCipherService> {\n  return factory(\n    cache,\n    \"cipherService\",\n    opts,\n    async () =>\n      new CipherService(\n        await cryptoServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await searchServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await cipherFileUploadServiceFactory(cache, opts),\n        await configServiceFactory(cache, opts)\n      )\n  );\n}\n","import { SearchService as AbstractSearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../platform/background/service-factories/log-service.factory\";\n\ntype SearchServiceFactoryOptions = FactoryOptions;\n\nexport type SearchServiceInitOptions = SearchServiceFactoryOptions &\n  LogServiceInitOptions &\n  I18nServiceInitOptions;\n\nexport function searchServiceFactory(\n  cache: { searchService?: AbstractSearchService } & CachedServices,\n  opts: SearchServiceInitOptions\n): Promise<AbstractSearchService> {\n  return factory(\n    cache,\n    \"searchService\",\n    opts,\n    async () =>\n      new SearchService(await logServiceFactory(cache, opts), await i18nServiceFactory(cache, opts))\n  );\n}\n","import { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { Account } from \"../../models/account\";\nimport { CachedServices } from \"../../platform/background/service-factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\n\nexport const ROOT_ID = \"root\";\n\nexport const AUTOFILL_ID = \"autofill\";\nexport const COPY_USERNAME_ID = \"copy-username\";\nexport const COPY_PASSWORD_ID = \"copy-password\";\nexport const COPY_VERIFICATIONCODE_ID = \"copy-totp\";\nexport const COPY_IDENTIFIER_ID = \"copy-identifier\";\n\nconst SEPARATOR_ID = \"separator\";\nexport const GENERATE_PASSWORD_ID = \"generate-password\";\n\nexport const NOOP_COMMAND_SUFFIX = \"noop\";\n\nexport class MainContextMenuHandler {\n  //\n  private initRunning = false;\n\n  create: (options: chrome.contextMenus.CreateProperties) => Promise<void>;\n\n  constructor(\n    private stateService: BrowserStateService,\n    private i18nService: I18nService,\n    private logService: LogService\n  ) {\n    if (chrome.contextMenus) {\n      this.create = (options) => {\n        return new Promise<void>((resolve, reject) => {\n          chrome.contextMenus.create(options, () => {\n            if (chrome.runtime.lastError) {\n              reject(chrome.runtime.lastError);\n              return;\n            }\n            resolve();\n          });\n        });\n      };\n    } else {\n      this.create = (_options) => Promise.resolve();\n    }\n  }\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: StateServiceInitOptions & I18nServiceInitOptions & LogServiceInitOptions =\n      {\n        cryptoFunctionServiceOptions: {\n          win: self,\n        },\n        encryptServiceOptions: {\n          logMacFailures: false,\n        },\n        i18nServiceOptions: {\n          systemLanguage: chrome.i18n.getUILanguage(),\n        },\n        logServiceOptions: {\n          isDev: false,\n        },\n        stateServiceOptions: {\n          stateFactory: stateFactory,\n        },\n      };\n\n    return new MainContextMenuHandler(\n      await stateServiceFactory(cachedServices, serviceOptions),\n      await i18nServiceFactory(cachedServices, serviceOptions),\n      await logServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  /**\n   *\n   * @returns a boolean showing whether or not items were created\n   */\n  async init(): Promise<boolean> {\n    const menuDisabled = await this.stateService.getDisableContextMenuItem();\n    if (menuDisabled) {\n      await MainContextMenuHandler.removeAll();\n      return false;\n    }\n\n    if (this.initRunning) {\n      return true;\n    }\n    this.initRunning = true;\n\n    try {\n      const create = async (options: Omit<chrome.contextMenus.CreateProperties, \"contexts\">) => {\n        await this.create({ ...options, contexts: [\"all\"] });\n      };\n\n      await create({\n        id: ROOT_ID,\n        title: \"Bitwarden\",\n      });\n\n      await create({\n        id: AUTOFILL_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"autoFill\"),\n      });\n\n      await create({\n        id: COPY_USERNAME_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyUsername\"),\n      });\n\n      await create({\n        id: COPY_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyPassword\"),\n      });\n\n      if (await this.stateService.getCanAccessPremium()) {\n        await create({\n          id: COPY_VERIFICATIONCODE_ID,\n          parentId: ROOT_ID,\n          title: this.i18nService.t(\"copyVerificationCode\"),\n        });\n      }\n\n      await create({\n        id: SEPARATOR_ID,\n        type: \"separator\",\n        parentId: ROOT_ID,\n      });\n\n      await create({\n        id: GENERATE_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"generatePasswordCopied\"),\n      });\n\n      await create({\n        id: COPY_IDENTIFIER_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyElementIdentifier\"),\n      });\n    } catch (error) {\n      this.logService.warning(error.message);\n    } finally {\n      this.initRunning = false;\n    }\n    return true;\n  }\n\n  static async removeAll() {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.removeAll(() => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  static remove(menuItemId: string) {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.remove(menuItemId, () => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  async loadOptions(title: string, id: string, url: string, cipher?: CipherView | undefined) {\n    if (cipher != null && cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    try {\n      const sanitizedTitle = MainContextMenuHandler.sanitizeContextMenuTitle(title);\n\n      const createChildItem = async (parent: string) => {\n        const menuItemId = `${parent}_${id}`;\n        return await this.create({\n          type: \"normal\",\n          id: menuItemId,\n          parentId: parent,\n          title: sanitizedTitle,\n          contexts: [\"all\"],\n        });\n      };\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.password)) {\n        await createChildItem(AUTOFILL_ID);\n        if (cipher?.viewPassword ?? true) {\n          await createChildItem(COPY_PASSWORD_ID);\n        }\n      }\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.username)) {\n        await createChildItem(COPY_USERNAME_ID);\n      }\n\n      const canAccessPremium = await this.stateService.getCanAccessPremium();\n      if (canAccessPremium && (cipher == null || !Utils.isNullOrEmpty(cipher.login.totp))) {\n        await createChildItem(COPY_VERIFICATIONCODE_ID);\n      }\n    } catch (error) {\n      this.logService.warning(error.message);\n    }\n  }\n\n  static sanitizeContextMenuTitle(title: string): string {\n    return title.replace(/&/g, \"&&\");\n  }\n\n  async noAccess() {\n    if (await this.init()) {\n      const authed = await this.stateService.getIsAuthenticated();\n      await this.loadOptions(\n        this.i18nService.t(authed ? \"unlockVaultMenu\" : \"loginToVaultMenu\"),\n        NOOP_COMMAND_SUFFIX,\n        \"<all_urls>\"\n      );\n    }\n  }\n\n  async noLogins(url: string) {\n    await this.loadOptions(this.i18nService.t(\"noMatchingLogins\"), NOOP_COMMAND_SUFFIX, url);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../auth/background/service-factories/auth-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { CachedServices } from \"../../platform/background/service-factories/factory-options\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport { MainContextMenuHandler } from \"./main-context-menu-handler\";\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) => Promise.resolve();\n\nconst LISTENED_TO_COMMANDS = [\n  \"loggedIn\",\n  \"unlocked\",\n  \"syncCompleted\",\n  \"bgUpdateContextMenu\",\n  \"editedCipher\",\n  \"addedCipher\",\n  \"deletedCipher\",\n];\n\nexport class CipherContextMenuHandler {\n  constructor(\n    private mainContextMenuHandler: MainContextMenuHandler,\n    private authService: AuthService,\n    private cipherService: CipherService\n  ) {}\n\n  static async create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: () => Promise.resolve(false),\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n    return new CipherContextMenuHandler(\n      await MainContextMenuHandler.mv3Create(cachedServices),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async windowsOnFocusChangedListener(windowId: number, serviceCache: CachedServices) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    await cipherContextMenuHandler.update(tab?.url);\n  }\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(activeInfo.tabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(addedTabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: CachedServices\n  ) {\n    if (changeInfo.status !== \"complete\") {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async messageListener(\n    message: { command: string },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(cachedServices);\n    await cipherContextMenuHandler.messageListener(message);\n  }\n\n  private static shouldListen(message: { command: string }) {\n    return LISTENED_TO_COMMANDS.includes(message.command);\n  }\n\n  async messageListener(message: { command: string }, sender?: chrome.runtime.MessageSender) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    await this.update(activeTabs[0].url);\n  }\n\n  async update(url: string) {\n    const authStatus = await this.authService.getAuthStatus();\n    await MainContextMenuHandler.removeAll();\n    if (authStatus !== AuthenticationStatus.Unlocked) {\n      // Should I pass in the auth status or even have two separate methods for this\n      // on MainContextMenuHandler\n      await this.mainContextMenuHandler.noAccess();\n      return;\n    }\n\n    const menuEnabled = await this.mainContextMenuHandler.init();\n    if (!menuEnabled) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(url);\n    ciphers.sort((a, b) => this.cipherService.sortCiphersByLastUsedThenName(a, b));\n\n    if (ciphers.length === 0) {\n      await this.mainContextMenuHandler.noLogins(url);\n      return;\n    }\n\n    for (const cipher of ciphers) {\n      await this.updateForCipher(url, cipher);\n    }\n  }\n\n  private async updateForCipher(url: string, cipher: CipherView) {\n    if (cipher == null || cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    let title = cipher.name;\n    if (!Utils.isNullOrEmpty(title)) {\n      title += ` (${cipher.login.username})`;\n    }\n\n    await this.mainContextMenuHandler.loadOptions(title, cipher.id, url, cipher);\n  }\n}\n","import { TotpService as AbstractTotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\n\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-function-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../../platform/background/service-factories/log-service.factory\";\n\ntype TotpServiceOptions = FactoryOptions;\n\nexport type TotpServiceInitOptions = TotpServiceOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function totpServiceFactory(\n  cache: { totpService?: AbstractTotpService } & CachedServices,\n  opts: TotpServiceInitOptions\n): Promise<AbstractTotpService> {\n  return factory(\n    cache,\n    \"totpService\",\n    opts,\n    async () =>\n      new TotpService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { UserVerificationService as AbstractUserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\n\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../platform/background/service-factories/i18n-service.factory\";\nimport {\n  StateServiceInitOptions,\n  stateServiceFactory,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\nimport {\n  UserVerificationApiServiceInitOptions,\n  userVerificationApiServiceFactory,\n} from \"./user-verification-api-service.factory\";\n\ntype UserVerificationServiceFactoryOptions = FactoryOptions;\n\nexport type UserVerificationServiceInitOptions = UserVerificationServiceFactoryOptions &\n  StateServiceInitOptions &\n  CryptoServiceInitOptions &\n  I18nServiceInitOptions &\n  UserVerificationApiServiceInitOptions;\n\nexport function userVerificationServiceFactory(\n  cache: { userVerificationService?: AbstractUserVerificationService } & CachedServices,\n  opts: UserVerificationServiceInitOptions\n): Promise<AbstractUserVerificationService> {\n  return factory(\n    cache,\n    \"userVerificationService\",\n    opts,\n    async () =>\n      new UserVerificationService(\n        await stateServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await userVerificationApiServiceFactory(cache, opts)\n      )\n  );\n}\n","import { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../platform/background/service-factories/factory-options\";\n\ntype UserVerificationApiServiceFactoryOptions = FactoryOptions;\n\nexport type UserVerificationApiServiceInitOptions = UserVerificationApiServiceFactoryOptions &\n  ApiServiceInitOptions;\n\nexport function userVerificationApiServiceFactory(\n  cache: { userVerificationApiService?: UserVerificationApiServiceAbstraction } & CachedServices,\n  opts: UserVerificationApiServiceInitOptions\n): Promise<UserVerificationApiServiceAbstraction> {\n  return factory(\n    cache,\n    \"userVerificationApiService\",\n    opts,\n    async () => new UserVerificationApiService(await apiServiceFactory(cache, opts))\n  );\n}\n","import { EventCollectionService as AbstractEventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\n\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"../../admin-console/background/service-factories/organization-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport {\n  eventUploadServiceFactory,\n  EventUploadServiceInitOptions,\n} from \"./event-upload-service.factory\";\n\ntype EventCollectionServiceOptions = FactoryOptions;\n\nexport type EventCollectionServiceInitOptions = EventCollectionServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions &\n  EventUploadServiceInitOptions;\n\nexport function eventCollectionServiceFactory(\n  cache: { eventCollectionService?: AbstractEventCollectionService } & CachedServices,\n  opts: EventCollectionServiceInitOptions\n): Promise<AbstractEventCollectionService> {\n  return factory(\n    cache,\n    \"eventCollectionService\",\n    opts,\n    async () =>\n      new EventCollectionService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await eventUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { EventUploadService as AbstractEventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\n\nimport {\n  ApiServiceInitOptions,\n  apiServiceFactory,\n} from \"../../platform/background/service-factories/api-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../platform/background/service-factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../platform/background/service-factories/state-service.factory\";\n\ntype EventUploadServiceOptions = FactoryOptions;\n\nexport type EventUploadServiceInitOptions = EventUploadServiceOptions &\n  ApiServiceInitOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function eventUploadServiceFactory(\n  cache: { eventUploadService?: AbstractEventUploadService } & CachedServices,\n  opts: EventUploadServiceInitOptions\n): Promise<AbstractEventUploadService> {\n  return factory(\n    cache,\n    \"eventUploadService\",\n    opts,\n    async () =>\n      new EventUploadService(\n        await apiServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","// String values affect code flow in autofill.ts and must not be changed\nexport type FillScriptActions = \"click_on_opid\" | \"focus_by_opid\" | \"fill_by_opid\";\n\nexport type FillScript = [action: FillScriptActions, opid: string, value?: string];\n\nexport type AutofillScriptProperties = {\n  delay_between_operations?: number;\n};\n\nexport type AutofillInsertActions = {\n  fill_by_opid: ({ opid, value }: { opid: string; value: string }) => void;\n  click_on_opid: ({ opid }: { opid: string }) => void;\n  focus_by_opid: ({ opid }: { opid: string }) => void;\n};\n\nexport default class AutofillScript {\n  script: FillScript[] = [];\n  properties: AutofillScriptProperties = {};\n  metadata: any = {}; // Unused, not written or read\n  autosubmit: any = null; // Appears to be unused, read but not written\n  savedUrls: string[];\n  untrustedIframe: boolean;\n  itemType: string; // Appears to be unused, read but not written\n}\n","export class AutoFillConstants {\n  static readonly UsernameFieldNames: string[] = [\n    // English\n    \"username\",\n    \"user name\",\n    \"email\",\n    \"email address\",\n    \"e-mail\",\n    \"e-mail address\",\n    \"userid\",\n    \"user id\",\n    \"customer id\",\n    \"login id\",\n    // German\n    \"benutzername\",\n    \"benutzer name\",\n    \"email adresse\",\n    \"e-mail adresse\",\n    \"benutzerid\",\n    \"benutzer id\",\n  ];\n\n  static readonly TotpFieldNames: string[] = [\n    \"totp\",\n    \"2fa\",\n    \"mfa\",\n    \"totpcode\",\n    \"2facode\",\n    \"mfacode\",\n    \"twofactor\",\n    \"twofactorcode\",\n  ];\n\n  static readonly PasswordFieldIgnoreList: string[] = [\n    \"onetimepassword\",\n    \"captcha\",\n    \"findanything\",\n    \"forgot\",\n  ];\n\n  static readonly ExcludedAutofillTypes: string[] = [\n    \"radio\",\n    \"checkbox\",\n    \"hidden\",\n    \"file\",\n    \"button\",\n    \"image\",\n    \"reset\",\n    \"search\",\n  ];\n}\n\nexport class CreditCardAutoFillConstants {\n  static readonly CardAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly CardAttributesExtended: string[] = [\n    ...CreditCardAutoFillConstants.CardAttributes,\n    \"label-right\",\n  ];\n\n  static readonly CardHolderFieldNames: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"name\",\n    \"nom\",\n  ];\n\n  static readonly CardHolderFieldNameValues: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"tbName\",\n  ];\n\n  static readonly CardNumberFieldNames: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"number\",\n    \"cc\",\n    \"cc-no\",\n    \"card-no\",\n    \"credit-card\",\n    \"numero-carte\",\n    \"carte\",\n    \"carte-credit\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardNumberFieldNameValues: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"cc-no\",\n    \"card-no\",\n    \"numero-carte\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardExpiryFieldNames: string[] = [\n    \"cc-exp\",\n    \"card-exp\",\n    \"cc-expiration\",\n    \"card-expiration\",\n    \"cc-ex\",\n    \"card-ex\",\n    \"card-expire\",\n    \"card-expiry\",\n    \"validite\",\n    \"expiration\",\n    \"expiry\",\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n    \"payment-cc-date\",\n  ];\n\n  static readonly CardExpiryFieldNameValues: string[] = [\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n  ];\n\n  static readonly ExpiryMonthFieldNames: string[] = [\n    \"exp-month\",\n    \"cc-exp-month\",\n    \"cc-month\",\n    \"card-month\",\n    \"cc-mo\",\n    \"card-mo\",\n    \"exp-mo\",\n    \"card-exp-mo\",\n    \"cc-exp-mo\",\n    \"card-expiration-month\",\n    \"expiration-month\",\n    \"cc-mm\",\n    \"cc-m\",\n    \"card-mm\",\n    \"card-m\",\n    \"card-exp-mm\",\n    \"cc-exp-mm\",\n    \"exp-mm\",\n    \"exp-m\",\n    \"expire-month\",\n    \"expire-mo\",\n    \"expiry-month\",\n    \"expiry-mo\",\n    \"card-expire-month\",\n    \"card-expire-mo\",\n    \"card-expiry-month\",\n    \"card-expiry-mo\",\n    \"mois-validite\",\n    \"mois-expiration\",\n    \"m-validite\",\n    \"m-expiration\",\n    \"expiry-date-field-month\",\n    \"expiration-date-month\",\n    \"expiration-date-mm\",\n    \"exp-mon\",\n    \"validity-mo\",\n    \"exp-date-mo\",\n    \"cb-date-mois\",\n    \"date-m\",\n  ];\n\n  static readonly ExpiryYearFieldNames: string[] = [\n    \"exp-year\",\n    \"cc-exp-year\",\n    \"cc-year\",\n    \"card-year\",\n    \"cc-yr\",\n    \"card-yr\",\n    \"exp-yr\",\n    \"card-exp-yr\",\n    \"cc-exp-yr\",\n    \"card-expiration-year\",\n    \"expiration-year\",\n    \"cc-yy\",\n    \"cc-y\",\n    \"card-yy\",\n    \"card-y\",\n    \"card-exp-yy\",\n    \"cc-exp-yy\",\n    \"exp-yy\",\n    \"exp-y\",\n    \"cc-yyyy\",\n    \"card-yyyy\",\n    \"card-exp-yyyy\",\n    \"cc-exp-yyyy\",\n    \"expire-year\",\n    \"expire-yr\",\n    \"expiry-year\",\n    \"expiry-yr\",\n    \"card-expire-year\",\n    \"card-expire-yr\",\n    \"card-expiry-year\",\n    \"card-expiry-yr\",\n    \"an-validite\",\n    \"an-expiration\",\n    \"annee-validite\",\n    \"annee-expiration\",\n    \"expiry-date-field-year\",\n    \"expiration-date-year\",\n    \"cb-date-ann\",\n    \"expiration-date-yy\",\n    \"expiration-date-yyyy\",\n    \"validity-year\",\n    \"exp-date-year\",\n    \"date-y\",\n  ];\n\n  static readonly CVVFieldNames: string[] = [\n    \"cvv\",\n    \"cvc\",\n    \"cvv2\",\n    \"cc-csc\",\n    \"cc-cvv\",\n    \"card-csc\",\n    \"card-cvv\",\n    \"cvd\",\n    \"cid\",\n    \"cvc2\",\n    \"cnv\",\n    \"cvn2\",\n    \"cc-code\",\n    \"card-code\",\n    \"code-securite\",\n    \"security-code\",\n    \"crypto\",\n    \"card-verif\",\n    \"verification-code\",\n    \"csc\",\n    \"ccv\",\n  ];\n\n  static readonly CardBrandFieldNames: string[] = [\n    \"cc-type\",\n    \"card-type\",\n    \"card-brand\",\n    \"cc-brand\",\n    \"cb-type\",\n  ];\n\n  // Each index represents a language. These three arrays should all be the same length.\n  // 0: English, 1: Danish, 2: German/Dutch, 3: French/Spanish/Italian, 4: Russian, 5: Portuguese\n  static readonly MonthAbbr = [\"mm\", \"mm\", \"mm\", \"mm\", \"\", \"mm\"];\n  static readonly YearAbbrShort = [\"yy\", \"\", \"jj\", \"aa\", \"\", \"rr\"];\n  static readonly YearAbbrLong = [\"yyyy\", \"\", \"jjjj\", \"aa\", \"\", \"rrrr\"];\n}\n\nexport class IdentityAutoFillConstants {\n  static readonly IdentityAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly FullNameFieldNames: string[] = [\"name\", \"full-name\", \"your-name\"];\n\n  static readonly FullNameFieldNameValues: string[] = [\"full-name\", \"your-name\"];\n\n  static readonly TitleFieldNames: string[] = [\n    \"honorific-prefix\",\n    \"prefix\",\n    \"title\",\n    // German\n    \"anrede\",\n  ];\n\n  static readonly FirstnameFieldNames: string[] = [\n    // English\n    \"f-name\",\n    \"first-name\",\n    \"given-name\",\n    \"first-n\",\n    // German\n    \"vorname\",\n  ];\n\n  static readonly MiddlenameFieldNames: string[] = [\n    \"m-name\",\n    \"middle-name\",\n    \"additional-name\",\n    \"middle-initial\",\n    \"middle-n\",\n    \"middle-i\",\n  ];\n\n  static readonly LastnameFieldNames: string[] = [\n    // English\n    \"l-name\",\n    \"last-name\",\n    \"s-name\",\n    \"surname\",\n    \"family-name\",\n    \"family-n\",\n    \"last-n\",\n    // German\n    \"nachname\",\n    \"familienname\",\n  ];\n\n  static readonly EmailFieldNames: string[] = [\"e-mail\", \"email-address\"];\n\n  static readonly AddressFieldNames: string[] = [\n    \"address\",\n    \"street-address\",\n    \"addr\",\n    \"street\",\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n    // German\n    \"strasse\",\n    \"adresse\",\n  ];\n\n  static readonly AddressFieldNameValues: string[] = [\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n  ];\n\n  static readonly Address1FieldNames: string[] = [\n    \"address-1\",\n    \"address-line-1\",\n    \"addr-1\",\n    \"street-1\",\n  ];\n\n  static readonly Address2FieldNames: string[] = [\n    \"address-2\",\n    \"address-line-2\",\n    \"addr-2\",\n    \"street-2\",\n  ];\n\n  static readonly Address3FieldNames: string[] = [\n    \"address-3\",\n    \"address-line-3\",\n    \"addr-3\",\n    \"street-3\",\n  ];\n\n  static readonly PostalCodeFieldNames: string[] = [\n    \"postal\",\n    \"zip\",\n    \"zip2\",\n    \"zip-code\",\n    \"postal-code\",\n    \"post-code\",\n    \"address-zip\",\n    \"address-postal\",\n    \"address-code\",\n    \"address-postal-code\",\n    \"address-zip-code\",\n    // German\n    \"plz\",\n    \"postleitzahl\",\n  ];\n\n  static readonly CityFieldNames: string[] = [\n    \"city\",\n    \"town\",\n    \"address-level-2\",\n    \"address-city\",\n    \"address-town\",\n    // German\n    \"ort\",\n    \"stadt\",\n    \"wohnort\",\n  ];\n\n  static readonly StateFieldNames: string[] = [\n    \"state\",\n    \"province\",\n    \"provence\",\n    \"address-level-1\",\n    \"address-state\",\n    \"address-province\",\n    // German\n    \"bundesland\",\n  ];\n\n  static readonly CountryFieldNames: string[] = [\n    \"country\",\n    \"country-code\",\n    \"country-name\",\n    \"address-country\",\n    \"address-country-name\",\n    \"address-country-code\",\n    // German\n    \"land\",\n  ];\n\n  static readonly PhoneFieldNames: string[] = [\n    \"phone\",\n    \"mobile\",\n    \"mobile-phone\",\n    \"tel\",\n    \"telephone\",\n    \"phone-number\",\n    // German\n    \"telefon\",\n    \"telefonnummer\",\n    \"mobil\",\n    \"handy\",\n  ];\n\n  static readonly UserNameFieldNames: string[] = [\"user-name\", \"user-id\", \"screen-name\"];\n\n  static readonly CompanyFieldNames: string[] = [\n    \"company\",\n    \"company-name\",\n    \"organization\",\n    \"organization-name\",\n    // German\n    \"firma\",\n  ];\n\n  static readonly IsoCountries: { [id: string]: string } = {\n    afghanistan: \"AF\",\n    \"aland islands\": \"AX\",\n    albania: \"AL\",\n    algeria: \"DZ\",\n    \"american samoa\": \"AS\",\n    andorra: \"AD\",\n    angola: \"AO\",\n    anguilla: \"AI\",\n    antarctica: \"AQ\",\n    \"antigua and barbuda\": \"AG\",\n    argentina: \"AR\",\n    armenia: \"AM\",\n    aruba: \"AW\",\n    australia: \"AU\",\n    austria: \"AT\",\n    azerbaijan: \"AZ\",\n    bahamas: \"BS\",\n    bahrain: \"BH\",\n    bangladesh: \"BD\",\n    barbados: \"BB\",\n    belarus: \"BY\",\n    belgium: \"BE\",\n    belize: \"BZ\",\n    benin: \"BJ\",\n    bermuda: \"BM\",\n    bhutan: \"BT\",\n    bolivia: \"BO\",\n    \"bosnia and herzegovina\": \"BA\",\n    botswana: \"BW\",\n    \"bouvet island\": \"BV\",\n    brazil: \"BR\",\n    \"british indian ocean territory\": \"IO\",\n    \"brunei darussalam\": \"BN\",\n    bulgaria: \"BG\",\n    \"burkina faso\": \"BF\",\n    burundi: \"BI\",\n    cambodia: \"KH\",\n    cameroon: \"CM\",\n    canada: \"CA\",\n    \"cape verde\": \"CV\",\n    \"cayman islands\": \"KY\",\n    \"central african republic\": \"CF\",\n    chad: \"TD\",\n    chile: \"CL\",\n    china: \"CN\",\n    \"christmas island\": \"CX\",\n    \"cocos (keeling) islands\": \"CC\",\n    colombia: \"CO\",\n    comoros: \"KM\",\n    congo: \"CG\",\n    \"congo, democratic republic\": \"CD\",\n    \"cook islands\": \"CK\",\n    \"costa rica\": \"CR\",\n    \"cote d'ivoire\": \"CI\",\n    croatia: \"HR\",\n    cuba: \"CU\",\n    cyprus: \"CY\",\n    \"czech republic\": \"CZ\",\n    denmark: \"DK\",\n    djibouti: \"DJ\",\n    dominica: \"DM\",\n    \"dominican republic\": \"DO\",\n    ecuador: \"EC\",\n    egypt: \"EG\",\n    \"el salvador\": \"SV\",\n    \"equatorial guinea\": \"GQ\",\n    eritrea: \"ER\",\n    estonia: \"EE\",\n    ethiopia: \"ET\",\n    \"falkland islands\": \"FK\",\n    \"faroe islands\": \"FO\",\n    fiji: \"FJ\",\n    finland: \"FI\",\n    france: \"FR\",\n    \"french guiana\": \"GF\",\n    \"french polynesia\": \"PF\",\n    \"french southern territories\": \"TF\",\n    gabon: \"GA\",\n    gambia: \"GM\",\n    georgia: \"GE\",\n    germany: \"DE\",\n    ghana: \"GH\",\n    gibraltar: \"GI\",\n    greece: \"GR\",\n    greenland: \"GL\",\n    grenada: \"GD\",\n    guadeloupe: \"GP\",\n    guam: \"GU\",\n    guatemala: \"GT\",\n    guernsey: \"GG\",\n    guinea: \"GN\",\n    \"guinea-bissau\": \"GW\",\n    guyana: \"GY\",\n    haiti: \"HT\",\n    \"heard island & mcdonald islands\": \"HM\",\n    \"holy see (vatican city state)\": \"VA\",\n    honduras: \"HN\",\n    \"hong kong\": \"HK\",\n    hungary: \"HU\",\n    iceland: \"IS\",\n    india: \"IN\",\n    indonesia: \"ID\",\n    \"iran, islamic republic of\": \"IR\",\n    iraq: \"IQ\",\n    ireland: \"IE\",\n    \"isle of man\": \"IM\",\n    israel: \"IL\",\n    italy: \"IT\",\n    jamaica: \"JM\",\n    japan: \"JP\",\n    jersey: \"JE\",\n    jordan: \"JO\",\n    kazakhstan: \"KZ\",\n    kenya: \"KE\",\n    kiribati: \"KI\",\n    \"republic of korea\": \"KR\",\n    \"south korea\": \"KR\",\n    \"democratic people's republic of korea\": \"KP\",\n    \"north korea\": \"KP\",\n    kuwait: \"KW\",\n    kyrgyzstan: \"KG\",\n    \"lao people's democratic republic\": \"LA\",\n    latvia: \"LV\",\n    lebanon: \"LB\",\n    lesotho: \"LS\",\n    liberia: \"LR\",\n    \"libyan arab jamahiriya\": \"LY\",\n    liechtenstein: \"LI\",\n    lithuania: \"LT\",\n    luxembourg: \"LU\",\n    macao: \"MO\",\n    macedonia: \"MK\",\n    madagascar: \"MG\",\n    malawi: \"MW\",\n    malaysia: \"MY\",\n    maldives: \"MV\",\n    mali: \"ML\",\n    malta: \"MT\",\n    \"marshall islands\": \"MH\",\n    martinique: \"MQ\",\n    mauritania: \"MR\",\n    mauritius: \"MU\",\n    mayotte: \"YT\",\n    mexico: \"MX\",\n    \"micronesia, federated states of\": \"FM\",\n    moldova: \"MD\",\n    monaco: \"MC\",\n    mongolia: \"MN\",\n    montenegro: \"ME\",\n    montserrat: \"MS\",\n    morocco: \"MA\",\n    mozambique: \"MZ\",\n    myanmar: \"MM\",\n    namibia: \"NA\",\n    nauru: \"NR\",\n    nepal: \"NP\",\n    netherlands: \"NL\",\n    \"netherlands antilles\": \"AN\",\n    \"new caledonia\": \"NC\",\n    \"new zealand\": \"NZ\",\n    nicaragua: \"NI\",\n    niger: \"NE\",\n    nigeria: \"NG\",\n    niue: \"NU\",\n    \"norfolk island\": \"NF\",\n    \"northern mariana islands\": \"MP\",\n    norway: \"NO\",\n    oman: \"OM\",\n    pakistan: \"PK\",\n    palau: \"PW\",\n    \"palestinian territory, occupied\": \"PS\",\n    panama: \"PA\",\n    \"papua new guinea\": \"PG\",\n    paraguay: \"PY\",\n    peru: \"PE\",\n    philippines: \"PH\",\n    pitcairn: \"PN\",\n    poland: \"PL\",\n    portugal: \"PT\",\n    \"puerto rico\": \"PR\",\n    qatar: \"QA\",\n    reunion: \"RE\",\n    romania: \"RO\",\n    \"russian federation\": \"RU\",\n    rwanda: \"RW\",\n    \"saint barthelemy\": \"BL\",\n    \"saint helena\": \"SH\",\n    \"saint kitts and nevis\": \"KN\",\n    \"saint lucia\": \"LC\",\n    \"saint martin\": \"MF\",\n    \"saint pierre and miquelon\": \"PM\",\n    \"saint vincent and grenadines\": \"VC\",\n    samoa: \"WS\",\n    \"san marino\": \"SM\",\n    \"sao tome and principe\": \"ST\",\n    \"saudi arabia\": \"SA\",\n    senegal: \"SN\",\n    serbia: \"RS\",\n    seychelles: \"SC\",\n    \"sierra leone\": \"SL\",\n    singapore: \"SG\",\n    slovakia: \"SK\",\n    slovenia: \"SI\",\n    \"solomon islands\": \"SB\",\n    somalia: \"SO\",\n    \"south africa\": \"ZA\",\n    \"south georgia and sandwich isl.\": \"GS\",\n    spain: \"ES\",\n    \"sri lanka\": \"LK\",\n    sudan: \"SD\",\n    suriname: \"SR\",\n    \"svalbard and jan mayen\": \"SJ\",\n    swaziland: \"SZ\",\n    sweden: \"SE\",\n    switzerland: \"CH\",\n    \"syrian arab republic\": \"SY\",\n    taiwan: \"TW\",\n    tajikistan: \"TJ\",\n    tanzania: \"TZ\",\n    thailand: \"TH\",\n    \"timor-leste\": \"TL\",\n    togo: \"TG\",\n    tokelau: \"TK\",\n    tonga: \"TO\",\n    \"trinidad and tobago\": \"TT\",\n    tunisia: \"TN\",\n    turkey: \"TR\",\n    turkmenistan: \"TM\",\n    \"turks and caicos islands\": \"TC\",\n    tuvalu: \"TV\",\n    uganda: \"UG\",\n    ukraine: \"UA\",\n    \"united arab emirates\": \"AE\",\n    \"united kingdom\": \"GB\",\n    \"united states\": \"US\",\n    \"united states outlying islands\": \"UM\",\n    uruguay: \"UY\",\n    uzbekistan: \"UZ\",\n    vanuatu: \"VU\",\n    venezuela: \"VE\",\n    vietnam: \"VN\",\n    \"virgin islands, british\": \"VG\",\n    \"virgin islands, u.s.\": \"VI\",\n    \"wallis and futuna\": \"WF\",\n    \"western sahara\": \"EH\",\n    yemen: \"YE\",\n    zambia: \"ZM\",\n    zimbabwe: \"ZW\",\n  };\n\n  static readonly IsoStates: { [id: string]: string } = {\n    alabama: \"AL\",\n    alaska: \"AK\",\n    \"american samoa\": \"AS\",\n    arizona: \"AZ\",\n    arkansas: \"AR\",\n    california: \"CA\",\n    colorado: \"CO\",\n    connecticut: \"CT\",\n    delaware: \"DE\",\n    \"district of columbia\": \"DC\",\n    \"federated states of micronesia\": \"FM\",\n    florida: \"FL\",\n    georgia: \"GA\",\n    guam: \"GU\",\n    hawaii: \"HI\",\n    idaho: \"ID\",\n    illinois: \"IL\",\n    indiana: \"IN\",\n    iowa: \"IA\",\n    kansas: \"KS\",\n    kentucky: \"KY\",\n    louisiana: \"LA\",\n    maine: \"ME\",\n    \"marshall islands\": \"MH\",\n    maryland: \"MD\",\n    massachusetts: \"MA\",\n    michigan: \"MI\",\n    minnesota: \"MN\",\n    mississippi: \"MS\",\n    missouri: \"MO\",\n    montana: \"MT\",\n    nebraska: \"NE\",\n    nevada: \"NV\",\n    \"new hampshire\": \"NH\",\n    \"new jersey\": \"NJ\",\n    \"new mexico\": \"NM\",\n    \"new york\": \"NY\",\n    \"north carolina\": \"NC\",\n    \"north dakota\": \"ND\",\n    \"northern mariana islands\": \"MP\",\n    ohio: \"OH\",\n    oklahoma: \"OK\",\n    oregon: \"OR\",\n    palau: \"PW\",\n    pennsylvania: \"PA\",\n    \"puerto rico\": \"PR\",\n    \"rhode island\": \"RI\",\n    \"south carolina\": \"SC\",\n    \"south dakota\": \"SD\",\n    tennessee: \"TN\",\n    texas: \"TX\",\n    utah: \"UT\",\n    vermont: \"VT\",\n    \"virgin islands\": \"VI\",\n    virginia: \"VA\",\n    washington: \"WA\",\n    \"west virginia\": \"WV\",\n    wisconsin: \"WI\",\n    wyoming: \"WY\",\n  };\n\n  static readonly IsoProvinces: { [id: string]: string } = {\n    alberta: \"AB\",\n    \"british columbia\": \"BC\",\n    manitoba: \"MB\",\n    \"new brunswick\": \"NB\",\n    \"newfoundland and labrador\": \"NL\",\n    \"nova scotia\": \"NS\",\n    ontario: \"ON\",\n    \"prince edward island\": \"PE\",\n    quebec: \"QC\",\n    saskatchewan: \"SK\",\n  };\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { EventType, FieldType, UriMatchType } from \"@bitwarden/common/enums\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\nimport AutofillField from \"../models/autofill-field\";\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport AutofillScript from \"../models/autofill-script\";\n\nimport {\n  AutoFillOptions,\n  AutofillService as AutofillServiceInterface,\n  PageDetail,\n  FormData,\n  GenerateFillScriptOptions,\n} from \"./abstractions/autofill.service\";\nimport {\n  AutoFillConstants,\n  CreditCardAutoFillConstants,\n  IdentityAutoFillConstants,\n} from \"./autofill-constants\";\n\nexport default class AutofillService implements AutofillServiceInterface {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: BrowserStateService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService,\n    private logService: LogService,\n    private settingsService: SettingsService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  /**\n   * Injects the autofill scripts into the current tab and all frames\n   * found within the tab. Temporarily, will conditionally inject\n   * the refactor of the core autofill script if the feature flag\n   * is enabled.\n   * @param {chrome.runtime.MessageSender} sender\n   * @param {boolean} autofillV2\n   * @returns {Promise<void>}\n   */\n  async injectAutofillScripts(sender: chrome.runtime.MessageSender, autofillV2 = false) {\n    const mainAutofillScript = autofillV2 ? `autofill-init.js` : \"autofill.js\";\n\n    const injectedScripts = [\n      mainAutofillScript,\n      \"autofiller.js\",\n      \"notificationBar.js\",\n      \"contextMenuHandler.js\",\n    ];\n\n    for (const injectedScript of injectedScripts) {\n      await BrowserApi.executeScriptInTab(sender.tab.id, {\n        file: `content/${injectedScript}`,\n        frameId: sender.frameId,\n        runAt: \"document_start\",\n      });\n    }\n  }\n\n  /**\n   * Gets all forms with password fields and formats the data\n   * for both forms and password input elements.\n   * @param {AutofillPageDetails} pageDetails\n   * @returns {FormData[]}\n   */\n  getFormsWithPasswordFields(pageDetails: AutofillPageDetails): FormData[] {\n    const formData: FormData[] = [];\n\n    const passwordFields = AutofillService.loadPasswordFields(pageDetails, true, true, false, true);\n\n    // TODO: this logic prevents multi-step account creation forms (that just start with email)\n    // from being passed on to the notification bar content script - even if autofill.js found the form and email field.\n    // ex: https://signup.live.com/\n    if (passwordFields.length === 0) {\n      return formData;\n    }\n\n    // Back up check for cases where there are several password fields detected,\n    // but they are not all part of the form b/c of bad HTML\n\n    // gather password fields that don't have an enclosing form\n    const passwordFieldsWithoutForm = passwordFields.filter((pf) => pf.form === undefined);\n    const formKeys = Object.keys(pageDetails.forms);\n    const formCount = formKeys.length;\n\n    // if we have 3 password fields and only 1 form, and there are password fields that are not within a form\n    // but there is at least one password field within the form, then most likely this is a poorly built password change form\n    if (passwordFields.length === 3 && formCount == 1 && passwordFieldsWithoutForm.length > 0) {\n      // Only one form so get the singular form key\n      const soloFormKey = formKeys[0];\n\n      const atLeastOnePasswordFieldWithinSoloForm =\n        passwordFields.filter((pf) => pf.form !== null && pf.form === soloFormKey).length > 0;\n\n      if (atLeastOnePasswordFieldWithinSoloForm) {\n        // We have a form with at least one password field,\n        // so let's make an assumption that the password fields without a form are actually part of this form\n        passwordFieldsWithoutForm.forEach((pf) => {\n          pf.form = soloFormKey;\n        });\n      }\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      const formPasswordFields = passwordFields.filter((pf) => formKey === pf.form);\n      if (formPasswordFields.length > 0) {\n        let uf = this.findUsernameField(pageDetails, formPasswordFields[0], false, false, false);\n        if (uf == null) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          uf = this.findUsernameField(pageDetails, formPasswordFields[0], true, true, false);\n        }\n        formData.push({\n          form: pageDetails.forms[formKey],\n          password: formPasswordFields[0],\n          username: uf,\n          passwords: formPasswordFields,\n        });\n      }\n    }\n\n    return formData;\n  }\n\n  /**\n   * Autofill a given tab with a given login item\n   * @param {AutoFillOptions} options Instructions about the autofill operation, including tab and login item\n   * @returns {Promise<string | null>} The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFill(options: AutoFillOptions): Promise<string | null> {\n    const tab = options.tab;\n    if (!tab || !options.cipher || !options.pageDetails || !options.pageDetails.length) {\n      throw new Error(\"Nothing to auto-fill.\");\n    }\n\n    let totpPromise: Promise<string> = null;\n\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    const defaultUriMatch = (await this.stateService.getDefaultUriMatch()) ?? UriMatchType.Domain;\n\n    let didAutofill = false;\n    await Promise.all(\n      options.pageDetails.map(async (pd) => {\n        // make sure we're still on correct tab\n        if (pd.tab.id !== tab.id || pd.tab.url !== tab.url) {\n          return;\n        }\n\n        const fillScript = await this.generateFillScript(pd.details, {\n          skipUsernameOnlyFill: options.skipUsernameOnlyFill || false,\n          onlyEmptyFields: options.onlyEmptyFields || false,\n          onlyVisibleFields: options.onlyVisibleFields || false,\n          fillNewPassword: options.fillNewPassword || false,\n          allowTotpAutofill: options.allowTotpAutofill || false,\n          cipher: options.cipher,\n          tabUrl: tab.url,\n          defaultUriMatch: defaultUriMatch,\n        });\n\n        if (!fillScript || !fillScript.script || !fillScript.script.length) {\n          return;\n        }\n\n        if (\n          fillScript.untrustedIframe &&\n          options.allowUntrustedIframe != undefined &&\n          !options.allowUntrustedIframe\n        ) {\n          this.logService.info(\"Auto-fill on page load was blocked due to an untrusted iframe.\");\n          return;\n        }\n\n        // Add a small delay between operations\n        fillScript.properties.delay_between_operations = 20;\n\n        didAutofill = true;\n        if (!options.skipLastUsed) {\n          this.cipherService.updateLastUsedDate(options.cipher.id);\n        }\n\n        BrowserApi.tabSendMessage(\n          tab,\n          {\n            command: \"fillForm\",\n            fillScript: fillScript,\n            url: tab.url,\n          },\n          { frameId: pd.frameId }\n        );\n\n        if (\n          options.cipher.type !== CipherType.Login ||\n          totpPromise ||\n          !options.cipher.login.totp ||\n          (!canAccessPremium && !options.cipher.organizationUseTotp)\n        ) {\n          return;\n        }\n\n        totpPromise = this.stateService.getDisableAutoTotpCopy().then((disabled) => {\n          if (!disabled) {\n            return this.totpService.getCode(options.cipher.login.totp);\n          }\n          return null;\n        });\n      })\n    );\n\n    if (didAutofill) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientAutofilled, options.cipher.id);\n      if (totpPromise != null) {\n        return await totpPromise;\n      } else {\n        return null;\n      }\n    } else {\n      throw new Error(\"Did not auto-fill.\");\n    }\n  }\n\n  /**\n   * Autofill the specified tab with the next login item from the cache\n   * @param {PageDetail[]} pageDetails The data scraped from the page\n   * @param {chrome.tabs.Tab} tab The tab to be autofilled\n   * @param {boolean} fromCommand Whether the autofill is triggered by a keyboard shortcut (`true`) or autofill on page load (`false`)\n   * @returns {Promise<string | null>} The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFillOnTab(\n    pageDetails: PageDetail[],\n    tab: chrome.tabs.Tab,\n    fromCommand: boolean\n  ): Promise<string | null> {\n    let cipher: CipherView;\n    if (fromCommand) {\n      cipher = await this.cipherService.getNextCipherForUrl(tab.url);\n    } else {\n      const lastLaunchedCipher = await this.cipherService.getLastLaunchedForUrl(tab.url, true);\n      if (\n        lastLaunchedCipher &&\n        Date.now().valueOf() - lastLaunchedCipher.localData?.lastLaunched?.valueOf() < 30000\n      ) {\n        cipher = lastLaunchedCipher;\n      } else {\n        cipher = await this.cipherService.getLastUsedForUrl(tab.url, true);\n      }\n    }\n\n    if (cipher == null) {\n      return null;\n    }\n\n    if (\n      cipher.reprompt === CipherRepromptType.Password &&\n      // If the master password has is not available, reprompt will error\n      (await this.userVerificationService.hasMasterPasswordAndMasterKeyHash())\n    ) {\n      if (fromCommand) {\n        this.cipherService.updateLastUsedIndexForUrl(tab.url);\n      }\n\n      await BrowserApi.tabSendMessageData(tab, \"passwordReprompt\", {\n        cipherId: cipher.id,\n        action: \"autofill\",\n      });\n\n      return null;\n    }\n\n    const totpCode = await this.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: pageDetails,\n      skipLastUsed: !fromCommand,\n      skipUsernameOnlyFill: !fromCommand,\n      onlyEmptyFields: !fromCommand,\n      onlyVisibleFields: !fromCommand,\n      fillNewPassword: fromCommand,\n      allowUntrustedIframe: fromCommand,\n      allowTotpAutofill: fromCommand,\n    });\n\n    // Update last used index as autofill has succeeded\n    if (fromCommand) {\n      this.cipherService.updateLastUsedIndexForUrl(tab.url);\n    }\n\n    return totpCode;\n  }\n\n  /**\n   * Autofill the active tab with the next login item from the cache\n   * @param {PageDetail[]} pageDetails The data scraped from the page\n   * @param {boolean} fromCommand Whether the autofill is triggered by a keyboard shortcut (`true`) or autofill on page load (`false`)\n   * @returns {Promise<string | null>} The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFillActiveTab(\n    pageDetails: PageDetail[],\n    fromCommand: boolean\n  ): Promise<string | null> {\n    const tab = await this.getActiveTab();\n    if (!tab || !tab.url) {\n      return null;\n    }\n\n    return await this.doAutoFillOnTab(pageDetails, tab, fromCommand);\n  }\n\n  /**\n   * Gets the active tab from the current window.\n   * Throws an error if no tab is found.\n   * @returns {Promise<chrome.tabs.Tab>}\n   * @private\n   */\n  private async getActiveTab(): Promise<chrome.tabs.Tab> {\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (!tab) {\n      throw new Error(\"No tab found.\");\n    }\n\n    return tab;\n  }\n\n  /**\n   * Generates the autofill script for the specified page details and cipher.\n   * @param {AutofillPageDetails} pageDetails\n   * @param {GenerateFillScriptOptions} options\n   * @returns {Promise<AutofillScript | null>}\n   * @private\n   */\n  private async generateFillScript(\n    pageDetails: AutofillPageDetails,\n    options: GenerateFillScriptOptions\n  ): Promise<AutofillScript | null> {\n    if (!pageDetails || !options.cipher) {\n      return null;\n    }\n\n    let fillScript = new AutofillScript();\n    const filledFields: { [id: string]: AutofillField } = {};\n    const fields = options.cipher.fields;\n\n    if (fields && fields.length) {\n      const fieldNames: string[] = [];\n\n      fields.forEach((f) => {\n        if (AutofillService.hasValue(f.name)) {\n          fieldNames.push(f.name.toLowerCase());\n        }\n      });\n\n      pageDetails.fields.forEach((field) => {\n        // eslint-disable-next-line\n        if (filledFields.hasOwnProperty(field.opid)) {\n          return;\n        }\n\n        if (!field.viewable && field.tagName !== \"span\") {\n          return;\n        }\n\n        const matchingIndex = this.findMatchingFieldIndex(field, fieldNames);\n        if (matchingIndex > -1) {\n          const matchingField: FieldView = fields[matchingIndex];\n          let val: string;\n          if (matchingField.type === FieldType.Linked) {\n            // Assumption: Linked Field is not being used to autofill a boolean value\n            val = options.cipher.linkedFieldValue(matchingField.linkedId) as string;\n          } else {\n            val = matchingField.value;\n            if (val == null && matchingField.type === FieldType.Boolean) {\n              val = \"false\";\n            }\n          }\n\n          filledFields[field.opid] = field;\n          AutofillService.fillByOpid(fillScript, field, val);\n        }\n      });\n    }\n\n    switch (options.cipher.type) {\n      case CipherType.Login:\n        fillScript = await this.generateLoginFillScript(\n          fillScript,\n          pageDetails,\n          filledFields,\n          options\n        );\n        break;\n      case CipherType.Card:\n        fillScript = this.generateCardFillScript(fillScript, pageDetails, filledFields, options);\n        break;\n      case CipherType.Identity:\n        fillScript = this.generateIdentityFillScript(\n          fillScript,\n          pageDetails,\n          filledFields,\n          options\n        );\n        break;\n      default:\n        return null;\n    }\n\n    return fillScript;\n  }\n\n  /**\n   * Generates the autofill script for the specified page details and login cipher item.\n   * @param {AutofillScript} fillScript\n   * @param {AutofillPageDetails} pageDetails\n   * @param {{[p: string]: AutofillField}} filledFields\n   * @param {GenerateFillScriptOptions} options\n   * @returns {Promise<AutofillScript | null>}\n   * @private\n   */\n  private async generateLoginFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): Promise<AutofillScript | null> {\n    if (!options.cipher.login) {\n      return null;\n    }\n\n    const passwords: AutofillField[] = [];\n    const usernames: AutofillField[] = [];\n    const totps: AutofillField[] = [];\n    let pf: AutofillField = null;\n    let username: AutofillField = null;\n    let totp: AutofillField = null;\n    const login = options.cipher.login;\n    fillScript.savedUrls =\n      login?.uris?.filter((u) => u.match != UriMatchType.Never).map((u) => u.uri) ?? [];\n\n    fillScript.untrustedIframe = this.inUntrustedIframe(pageDetails.url, options);\n\n    let passwordFields = AutofillService.loadPasswordFields(\n      pageDetails,\n      false,\n      false,\n      options.onlyEmptyFields,\n      options.fillNewPassword\n    );\n    if (!passwordFields.length && !options.onlyVisibleFields) {\n      // not able to find any viewable password fields. maybe there are some \"hidden\" ones?\n      passwordFields = AutofillService.loadPasswordFields(\n        pageDetails,\n        true,\n        true,\n        options.onlyEmptyFields,\n        options.fillNewPassword\n      );\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      passwordFields.forEach((passField) => {\n        pf = passField;\n        passwords.push(pf);\n\n        if (login.username) {\n          username = this.findUsernameField(pageDetails, pf, false, false, false);\n\n          if (!username && !options.onlyVisibleFields) {\n            // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n            username = this.findUsernameField(pageDetails, pf, true, true, false);\n          }\n\n          if (username) {\n            usernames.push(username);\n          }\n        }\n\n        if (options.allowTotpAutofill && login.totp) {\n          totp = this.findTotpField(pageDetails, pf, false, false, false);\n\n          if (!totp && !options.onlyVisibleFields) {\n            // not able to find any viewable totp fields. maybe there are some \"hidden\" ones?\n            totp = this.findTotpField(pageDetails, pf, true, true, false);\n          }\n\n          if (totp) {\n            totps.push(totp);\n          }\n        }\n      });\n    }\n\n    if (passwordFields.length && !passwords.length) {\n      // The page does not have any forms with password fields. Use the first password field on the page and the\n      // input field just before it as the username.\n\n      pf = passwordFields[0];\n      passwords.push(pf);\n\n      if (login.username && pf.elementNumber > 0) {\n        username = this.findUsernameField(pageDetails, pf, false, false, true);\n\n        if (!username && !options.onlyVisibleFields) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          username = this.findUsernameField(pageDetails, pf, true, true, true);\n        }\n\n        if (username) {\n          usernames.push(username);\n        }\n      }\n\n      if (options.allowTotpAutofill && login.totp && pf.elementNumber > 0) {\n        totp = this.findTotpField(pageDetails, pf, false, false, true);\n\n        if (!totp && !options.onlyVisibleFields) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          totp = this.findTotpField(pageDetails, pf, true, true, true);\n        }\n\n        if (totp) {\n          totps.push(totp);\n        }\n      }\n    }\n\n    if (!passwordFields.length) {\n      // No password fields on this page. Let's try to just fuzzy fill the username.\n      pageDetails.fields.forEach((f) => {\n        if (\n          !options.skipUsernameOnlyFill &&\n          f.viewable &&\n          (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\") &&\n          AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.UsernameFieldNames)\n        ) {\n          usernames.push(f);\n        }\n\n        if (\n          options.allowTotpAutofill &&\n          f.viewable &&\n          (f.type === \"text\" || f.type === \"number\") &&\n          (AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.TotpFieldNames) ||\n            f.autoCompleteType === \"one-time-code\")\n        ) {\n          totps.push(f);\n        }\n      });\n    }\n\n    usernames.forEach((u) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(u.opid)) {\n        return;\n      }\n\n      filledFields[u.opid] = u;\n      AutofillService.fillByOpid(fillScript, u, login.username);\n    });\n\n    passwords.forEach((p) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(p.opid)) {\n        return;\n      }\n\n      filledFields[p.opid] = p;\n      AutofillService.fillByOpid(fillScript, p, login.password);\n    });\n\n    if (options.allowTotpAutofill) {\n      await Promise.all(\n        totps.map(async (t) => {\n          if (Object.prototype.hasOwnProperty.call(filledFields, t.opid)) {\n            return;\n          }\n\n          filledFields[t.opid] = t;\n          const totpValue = await this.totpService.getCode(login.totp);\n          AutofillService.fillByOpid(fillScript, t, totpValue);\n        })\n      );\n    }\n\n    fillScript = AutofillService.setFillScriptForFocus(filledFields, fillScript);\n    return fillScript;\n  }\n\n  /**\n   * Generates the autofill script for the specified page details and credit card cipher item.\n   * @param {AutofillScript} fillScript\n   * @param {AutofillPageDetails} pageDetails\n   * @param {{[p: string]: AutofillField}} filledFields\n   * @param {GenerateFillScriptOptions} options\n   * @returns {AutofillScript|null}\n   * @private\n   */\n  private generateCardFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript | null {\n    if (!options.cipher.card) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < CreditCardAutoFillConstants.CardAttributes.length; i++) {\n        const attr = CreditCardAutoFillConstants.CardAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.cardholderName &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardHolderFieldNames,\n            CreditCardAutoFillConstants.CardHolderFieldNameValues\n          )\n        ) {\n          fillFields.cardholderName = f;\n          break;\n        } else if (\n          !fillFields.number &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardNumberFieldNames,\n            CreditCardAutoFillConstants.CardNumberFieldNameValues\n          )\n        ) {\n          fillFields.number = f;\n          break;\n        } else if (\n          !fillFields.exp &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardExpiryFieldNames,\n            CreditCardAutoFillConstants.CardExpiryFieldNameValues\n          )\n        ) {\n          fillFields.exp = f;\n          break;\n        } else if (\n          !fillFields.expMonth &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryMonthFieldNames)\n        ) {\n          fillFields.expMonth = f;\n          break;\n        } else if (\n          !fillFields.expYear &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryYearFieldNames)\n        ) {\n          fillFields.expYear = f;\n          break;\n        } else if (\n          !fillFields.code &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CVVFieldNames)\n        ) {\n          fillFields.code = f;\n          break;\n        } else if (\n          !fillFields.brand &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CardBrandFieldNames)\n        ) {\n          fillFields.brand = f;\n          break;\n        }\n      }\n    });\n\n    const card = options.cipher.card;\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"cardholderName\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"number\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"code\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"brand\");\n\n    if (fillFields.expMonth && AutofillService.hasValue(card.expMonth)) {\n      let expMonth: string = card.expMonth;\n\n      if (fillFields.expMonth.selectInfo && fillFields.expMonth.selectInfo.options) {\n        let index: number = null;\n        const siOptions = fillFields.expMonth.selectInfo.options;\n        if (siOptions.length === 12) {\n          index = parseInt(card.expMonth, null) - 1;\n        } else if (siOptions.length === 13) {\n          if (\n            siOptions[0][0] != null &&\n            siOptions[0][0] !== \"\" &&\n            (siOptions[12][0] == null || siOptions[12][0] === \"\")\n          ) {\n            index = parseInt(card.expMonth, null) - 1;\n          } else {\n            index = parseInt(card.expMonth, null);\n          }\n        }\n\n        if (index != null) {\n          const option = siOptions[index];\n          if (option.length > 1) {\n            expMonth = option[1];\n          }\n        }\n      } else if (\n        (this.fieldAttrsContain(fillFields.expMonth, \"mm\") ||\n          fillFields.expMonth.maxLength === 2) &&\n        expMonth.length === 1\n      ) {\n        expMonth = \"0\" + expMonth;\n      }\n\n      filledFields[fillFields.expMonth.opid] = fillFields.expMonth;\n      AutofillService.fillByOpid(fillScript, fillFields.expMonth, expMonth);\n    }\n\n    if (fillFields.expYear && AutofillService.hasValue(card.expYear)) {\n      let expYear: string = card.expYear;\n      if (fillFields.expYear.selectInfo && fillFields.expYear.selectInfo.options) {\n        for (let i = 0; i < fillFields.expYear.selectInfo.options.length; i++) {\n          const o: [string, string] = fillFields.expYear.selectInfo.options[i];\n          if (o[0] === card.expYear || o[1] === card.expYear) {\n            expYear = o[1];\n            break;\n          }\n          if (\n            o[1].length === 2 &&\n            card.expYear.length === 4 &&\n            o[1] === card.expYear.substring(2)\n          ) {\n            expYear = o[1];\n            break;\n          }\n          const colonIndex = o[1].indexOf(\":\");\n          if (colonIndex > -1 && o[1].length > colonIndex + 1) {\n            const val = o[1].substring(colonIndex + 2);\n            if (val != null && val.trim() !== \"\" && val === card.expYear) {\n              expYear = o[1];\n              break;\n            }\n          }\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yyyy\") ||\n        fillFields.expYear.maxLength === 4\n      ) {\n        if (expYear.length === 2) {\n          expYear = \"20\" + expYear;\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yy\") ||\n        fillFields.expYear.maxLength === 2\n      ) {\n        if (expYear.length === 4) {\n          expYear = expYear.substr(2);\n        }\n      }\n\n      filledFields[fillFields.expYear.opid] = fillFields.expYear;\n      AutofillService.fillByOpid(fillScript, fillFields.expYear, expYear);\n    }\n\n    if (\n      fillFields.exp &&\n      AutofillService.hasValue(card.expMonth) &&\n      AutofillService.hasValue(card.expYear)\n    ) {\n      const fullMonth = (\"0\" + card.expMonth).slice(-2);\n\n      let fullYear: string = card.expYear;\n      let partYear: string = null;\n      if (fullYear.length === 2) {\n        partYear = fullYear;\n        fullYear = \"20\" + fullYear;\n      } else if (fullYear.length === 4) {\n        partYear = fullYear.substr(2, 2);\n      }\n\n      let exp: string = null;\n      for (let i = 0; i < CreditCardAutoFillConstants.MonthAbbr.length; i++) {\n        if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"/\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"/\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"-\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"-\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + partYear;\n        }\n\n        if (exp != null) {\n          break;\n        }\n      }\n\n      if (exp == null) {\n        exp = fullYear + \"-\" + fullMonth;\n      }\n\n      this.makeScriptActionWithValue(fillScript, exp, fillFields.exp, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  /**\n   * Determines whether an iframe is potentially dangerous (\"untrusted\") to autofill\n   * @param {string} pageUrl The url of the page/iframe, usually from AutofillPageDetails\n   * @param {GenerateFillScriptOptions} options The GenerateFillScript options\n   * @returns {boolean} `true` if the iframe is untrusted and a warning should be shown, `false` otherwise\n   * @private\n   */\n  private inUntrustedIframe(pageUrl: string, options: GenerateFillScriptOptions): boolean {\n    // If the pageUrl (from the content script) matches the tabUrl (from the sender tab), we are not in an iframe\n    // This also avoids a false positive if no URI is saved and the user triggers auto-fill anyway\n    if (pageUrl === options.tabUrl) {\n      return false;\n    }\n\n    // Check the pageUrl against cipher URIs using the configured match detection.\n    // Remember: if we are in this function, the tabUrl already matches a saved URI for the login.\n    // We need to verify the pageUrl also matches.\n    const equivalentDomains = this.settingsService.getEquivalentDomains(pageUrl);\n    const matchesUri = options.cipher.login.matchesUri(\n      pageUrl,\n      equivalentDomains,\n      options.defaultUriMatch\n    );\n    return !matchesUri;\n  }\n\n  /**\n   * Used when handling autofill on credit card fields. Determines whether\n   * the field has an attribute that matches the given value.\n   * @param {AutofillField} field\n   * @param {string} containsVal\n   * @returns {boolean}\n   * @private\n   */\n  private fieldAttrsContain(field: AutofillField, containsVal: string): boolean {\n    if (!field) {\n      return false;\n    }\n\n    let doesContain = false;\n    CreditCardAutoFillConstants.CardAttributesExtended.forEach((attr) => {\n      // eslint-disable-next-line\n      if (doesContain || !field.hasOwnProperty(attr) || !field[attr]) {\n        return;\n      }\n\n      let val = field[attr];\n      val = val.replace(/ /g, \"\").toLowerCase();\n      doesContain = val.indexOf(containsVal) > -1;\n    });\n\n    return doesContain;\n  }\n\n  /**\n   * Generates the autofill script for the specified page details and identify cipher item.\n   * @param {AutofillScript} fillScript\n   * @param {AutofillPageDetails} pageDetails\n   * @param {{[p: string]: AutofillField}} filledFields\n   * @param {GenerateFillScriptOptions} options\n   * @returns {AutofillScript}\n   * @private\n   */\n  private generateIdentityFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.identity) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < IdentityAutoFillConstants.IdentityAttributes.length; i++) {\n        const attr = IdentityAutoFillConstants.IdentityAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.name &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.FullNameFieldNames,\n            IdentityAutoFillConstants.FullNameFieldNameValues\n          )\n        ) {\n          fillFields.name = f;\n          break;\n        } else if (\n          !fillFields.firstName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.FirstnameFieldNames)\n        ) {\n          fillFields.firstName = f;\n          break;\n        } else if (\n          !fillFields.middleName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.MiddlenameFieldNames)\n        ) {\n          fillFields.middleName = f;\n          break;\n        } else if (\n          !fillFields.lastName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.LastnameFieldNames)\n        ) {\n          fillFields.lastName = f;\n          break;\n        } else if (\n          !fillFields.title &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.TitleFieldNames)\n        ) {\n          fillFields.title = f;\n          break;\n        } else if (\n          !fillFields.email &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.EmailFieldNames)\n        ) {\n          fillFields.email = f;\n          break;\n        } else if (\n          !fillFields.address &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.AddressFieldNames,\n            IdentityAutoFillConstants.AddressFieldNameValues\n          )\n        ) {\n          fillFields.address = f;\n          break;\n        } else if (\n          !fillFields.address1 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address1FieldNames)\n        ) {\n          fillFields.address1 = f;\n          break;\n        } else if (\n          !fillFields.address2 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address2FieldNames)\n        ) {\n          fillFields.address2 = f;\n          break;\n        } else if (\n          !fillFields.address3 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address3FieldNames)\n        ) {\n          fillFields.address3 = f;\n          break;\n        } else if (\n          !fillFields.postalCode &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PostalCodeFieldNames)\n        ) {\n          fillFields.postalCode = f;\n          break;\n        } else if (\n          !fillFields.city &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CityFieldNames)\n        ) {\n          fillFields.city = f;\n          break;\n        } else if (\n          !fillFields.state &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.StateFieldNames)\n        ) {\n          fillFields.state = f;\n          break;\n        } else if (\n          !fillFields.country &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CountryFieldNames)\n        ) {\n          fillFields.country = f;\n          break;\n        } else if (\n          !fillFields.phone &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PhoneFieldNames)\n        ) {\n          fillFields.phone = f;\n          break;\n        } else if (\n          !fillFields.username &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.UserNameFieldNames)\n        ) {\n          fillFields.username = f;\n          break;\n        } else if (\n          !fillFields.company &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CompanyFieldNames)\n        ) {\n          fillFields.company = f;\n          break;\n        }\n      }\n    });\n\n    const identity = options.cipher.identity;\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"title\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"firstName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"middleName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"lastName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address1\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address2\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address3\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"city\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"postalCode\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"company\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"email\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"phone\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"username\");\n\n    let filledState = false;\n    if (fillFields.state && identity.state && identity.state.length > 2) {\n      const stateLower = identity.state.toLowerCase();\n      const isoState =\n        IdentityAutoFillConstants.IsoStates[stateLower] ||\n        IdentityAutoFillConstants.IsoProvinces[stateLower];\n      if (isoState) {\n        filledState = true;\n        this.makeScriptActionWithValue(fillScript, isoState, fillFields.state, filledFields);\n      }\n    }\n\n    if (!filledState) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"state\");\n    }\n\n    let filledCountry = false;\n    if (fillFields.country && identity.country && identity.country.length > 2) {\n      const countryLower = identity.country.toLowerCase();\n      const isoCountry = IdentityAutoFillConstants.IsoCountries[countryLower];\n      if (isoCountry) {\n        filledCountry = true;\n        this.makeScriptActionWithValue(fillScript, isoCountry, fillFields.country, filledFields);\n      }\n    }\n\n    if (!filledCountry) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"country\");\n    }\n\n    if (fillFields.name && (identity.firstName || identity.lastName)) {\n      let fullName = \"\";\n      if (AutofillService.hasValue(identity.firstName)) {\n        fullName = identity.firstName;\n      }\n      if (AutofillService.hasValue(identity.middleName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.middleName;\n      }\n      if (AutofillService.hasValue(identity.lastName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.lastName;\n      }\n\n      this.makeScriptActionWithValue(fillScript, fullName, fillFields.name, filledFields);\n    }\n\n    if (fillFields.address && AutofillService.hasValue(identity.address1)) {\n      let address = \"\";\n      if (AutofillService.hasValue(identity.address1)) {\n        address = identity.address1;\n      }\n      if (AutofillService.hasValue(identity.address2)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address2;\n      }\n      if (AutofillService.hasValue(identity.address3)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address3;\n      }\n\n      this.makeScriptActionWithValue(fillScript, address, fillFields.address, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  /**\n   * Accepts an HTMLInputElement type value and a list of\n   * excluded types and returns true if the type is excluded.\n   * @param {string} type\n   * @param {string[]} excludedTypes\n   * @returns {boolean}\n   * @private\n   */\n  private isExcludedType(type: string, excludedTypes: string[]) {\n    return excludedTypes.indexOf(type) > -1;\n  }\n\n  /**\n   * Accepts the value of a field, a list of possible options that define if\n   * a field can be matched to a vault cipher, and a secondary optional list\n   * of options that define if a field can be matched to a vault cipher. Returns\n   * true if the field value matches one of the options.\n   * @param {string} value\n   * @param {string[]} options\n   * @param {string[]} containsOptions\n   * @returns {boolean}\n   * @private\n   */\n  private static isFieldMatch(\n    value: string,\n    options: string[],\n    containsOptions?: string[]\n  ): boolean {\n    value = value\n      .trim()\n      .toLowerCase()\n      .replace(/[^a-zA-Z0-9]+/g, \"\");\n    for (let i = 0; i < options.length; i++) {\n      let option = options[i];\n      const checkValueContains = containsOptions == null || containsOptions.indexOf(option) > -1;\n      option = option.toLowerCase().replace(/-/g, \"\");\n      if (value === option || (checkValueContains && value.indexOf(option) > -1)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Helper method used to create a script action for a field. Conditionally\n   * accepts a fieldProp value that will be used in place of the dataProp value.\n   * @param {AutofillScript} fillScript\n   * @param cipherData\n   * @param {{[p: string]: AutofillField}} fillFields\n   * @param {{[p: string]: AutofillField}} filledFields\n   * @param {string} dataProp\n   * @param {string} fieldProp\n   * @private\n   */\n  private makeScriptAction(\n    fillScript: AutofillScript,\n    cipherData: any,\n    fillFields: { [id: string]: AutofillField },\n    filledFields: { [id: string]: AutofillField },\n    dataProp: string,\n    fieldProp?: string\n  ) {\n    fieldProp = fieldProp || dataProp;\n    this.makeScriptActionWithValue(\n      fillScript,\n      cipherData[dataProp],\n      fillFields[fieldProp],\n      filledFields\n    );\n  }\n\n  /**\n   * Handles updating the list of filled fields and adding a script action\n   * to the fill script. If a select field is passed as part of the fill options,\n   * we iterate over the options to check if the passed value matches one of the\n   * options. If it does, we add a script action to select the option.\n   * @param {AutofillScript} fillScript\n   * @param dataValue\n   * @param {AutofillField} field\n   * @param {{[p: string]: AutofillField}} filledFields\n   * @private\n   */\n  private makeScriptActionWithValue(\n    fillScript: AutofillScript,\n    dataValue: any,\n    field: AutofillField,\n    filledFields: { [id: string]: AutofillField }\n  ) {\n    let doFill = false;\n    if (AutofillService.hasValue(dataValue) && field) {\n      if (field.type === \"select-one\" && field.selectInfo && field.selectInfo.options) {\n        for (let i = 0; i < field.selectInfo.options.length; i++) {\n          const option = field.selectInfo.options[i];\n          for (let j = 0; j < option.length; j++) {\n            if (\n              AutofillService.hasValue(option[j]) &&\n              option[j].toLowerCase() === dataValue.toLowerCase()\n            ) {\n              doFill = true;\n              if (option.length > 1) {\n                dataValue = option[1];\n              }\n              break;\n            }\n          }\n\n          if (doFill) {\n            break;\n          }\n        }\n      } else {\n        doFill = true;\n      }\n    }\n\n    if (doFill) {\n      filledFields[field.opid] = field;\n      AutofillService.fillByOpid(fillScript, field, dataValue);\n    }\n  }\n\n  /**\n   * Accepts a pageDetails object with a list of fields and returns a list of\n   * fields that are likely to be password fields.\n   * @param {AutofillPageDetails} pageDetails\n   * @param {boolean} canBeHidden\n   * @param {boolean} canBeReadOnly\n   * @param {boolean} mustBeEmpty\n   * @param {boolean} fillNewPassword\n   * @returns {AutofillField[]}\n   */\n  static loadPasswordFields(\n    pageDetails: AutofillPageDetails,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    mustBeEmpty: boolean,\n    fillNewPassword: boolean\n  ) {\n    const arr: AutofillField[] = [];\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      const isPassword = f.type === \"password\";\n      const valueIsLikePassword = (value: string) => {\n        if (value == null) {\n          return false;\n        }\n        // Removes all whitespace, _ and - characters\n        // eslint-disable-next-line\n        const cleanedValue = value.toLowerCase().replace(/[\\s_\\-]/g, \"\");\n\n        if (cleanedValue.indexOf(\"password\") < 0) {\n          return false;\n        }\n\n        if (AutoFillConstants.PasswordFieldIgnoreList.some((i) => cleanedValue.indexOf(i) > -1)) {\n          return false;\n        }\n\n        return true;\n      };\n      const isLikePassword = () => {\n        if (f.type !== \"text\") {\n          return false;\n        }\n        if (valueIsLikePassword(f.htmlID)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.htmlName)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.placeholder)) {\n          return true;\n        }\n        return false;\n      };\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (isPassword || isLikePassword()) &&\n        (canBeHidden || f.viewable) &&\n        (!mustBeEmpty || f.value == null || f.value.trim() === \"\") &&\n        (fillNewPassword || f.autoCompleteType !== \"new-password\")\n      ) {\n        arr.push(f);\n      }\n    });\n    return arr;\n  }\n\n  /**\n   * Accepts a pageDetails object with a list of fields and returns a list of\n   * fields that are likely to be username fields.\n   * @param {AutofillPageDetails} pageDetails\n   * @param {AutofillField} passwordField\n   * @param {boolean} canBeHidden\n   * @param {boolean} canBeReadOnly\n   * @param {boolean} withoutForm\n   * @returns {AutofillField}\n   * @private\n   */\n  private findUsernameField(\n    pageDetails: AutofillPageDetails,\n    passwordField: AutofillField,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    withoutForm: boolean\n  ): AutofillField | null {\n    let usernameField: AutofillField = null;\n    for (let i = 0; i < pageDetails.fields.length; i++) {\n      const f = pageDetails.fields[i];\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        continue;\n      }\n\n      if (f.elementNumber >= passwordField.elementNumber) {\n        break;\n      }\n\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (withoutForm || f.form === passwordField.form) &&\n        (canBeHidden || f.viewable) &&\n        (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\")\n      ) {\n        usernameField = f;\n\n        if (this.findMatchingFieldIndex(f, AutoFillConstants.UsernameFieldNames) > -1) {\n          // We found an exact match. No need to keep looking.\n          break;\n        }\n      }\n    }\n\n    return usernameField;\n  }\n\n  /**\n   * Accepts a pageDetails object with a list of fields and returns a list of\n   * fields that are likely to be TOTP fields.\n   * @param {AutofillPageDetails} pageDetails\n   * @param {AutofillField} passwordField\n   * @param {boolean} canBeHidden\n   * @param {boolean} canBeReadOnly\n   * @param {boolean} withoutForm\n   * @returns {AutofillField}\n   * @private\n   */\n  private findTotpField(\n    pageDetails: AutofillPageDetails,\n    passwordField: AutofillField,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    withoutForm: boolean\n  ): AutofillField | null {\n    let totpField: AutofillField = null;\n    for (let i = 0; i < pageDetails.fields.length; i++) {\n      const f = pageDetails.fields[i];\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        continue;\n      }\n\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (withoutForm || f.form === passwordField.form) &&\n        (canBeHidden || f.viewable) &&\n        (f.type === \"text\" || f.type === \"number\") &&\n        AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.TotpFieldNames)\n      ) {\n        totpField = f;\n\n        if (\n          this.findMatchingFieldIndex(f, AutoFillConstants.TotpFieldNames) > -1 ||\n          f.autoCompleteType === \"one-time-code\"\n        ) {\n          // We found an exact match. No need to keep looking.\n          break;\n        }\n      }\n    }\n\n    return totpField;\n  }\n\n  /**\n   * Accepts a field and returns the index of the first matching property\n   * present in a list of attribute names.\n   * @param {AutofillField} field\n   * @param {string[]} names\n   * @returns {number}\n   * @private\n   */\n  private findMatchingFieldIndex(field: AutofillField, names: string[]): number {\n    for (let i = 0; i < names.length; i++) {\n      if (names[i].indexOf(\"=\") > -1) {\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlID\", names[i], \"id\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlName\", names[i], \"name\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-left\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-right\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-tag\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-aria\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"placeholder\", names[i], \"placeholder\")) {\n          return i;\n        }\n      }\n\n      if (this.fieldPropertyIsMatch(field, \"htmlID\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"htmlName\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-left\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-right\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-tag\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-aria\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"placeholder\", names[i])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Accepts a field, property, name, and prefix and returns true if the field\n   * contains a value that matches the given prefixed property.\n   * @param field\n   * @param {string} property\n   * @param {string} name\n   * @param {string} prefix\n   * @param {string} separator\n   * @returns {boolean}\n   * @private\n   */\n  private fieldPropertyIsPrefixMatch(\n    field: any,\n    property: string,\n    name: string,\n    prefix: string,\n    separator = \"=\"\n  ): boolean {\n    if (name.indexOf(prefix + separator) === 0) {\n      const sepIndex = name.indexOf(separator);\n      const val = name.substring(sepIndex + 1);\n      return val != null && this.fieldPropertyIsMatch(field, property, val);\n    }\n    return false;\n  }\n\n  /**\n   * Identifies if a given property within a field matches the value\n   * of the passed \"name\" parameter. If the name starts with \"regex=\",\n   * the value is tested against a case-insensitive regular expression.\n   * If the name starts with \"csv=\", the value is treated as a\n   * comma-separated list of values to match.\n   * @param field\n   * @param {string} property\n   * @param {string} name\n   * @returns {boolean}\n   * @private\n   */\n  private fieldPropertyIsMatch(field: any, property: string, name: string): boolean {\n    let fieldVal = field[property] as string;\n    if (!AutofillService.hasValue(fieldVal)) {\n      return false;\n    }\n\n    fieldVal = fieldVal.trim().replace(/(?:\\r\\n|\\r|\\n)/g, \"\");\n    if (name.startsWith(\"regex=\")) {\n      try {\n        const regexParts = name.split(\"=\", 2);\n        if (regexParts.length === 2) {\n          const regex = new RegExp(regexParts[1], \"i\");\n          return regex.test(fieldVal);\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else if (name.startsWith(\"csv=\")) {\n      const csvParts = name.split(\"=\", 2);\n      if (csvParts.length === 2) {\n        const csvVals = csvParts[1].split(\",\");\n        for (let i = 0; i < csvVals.length; i++) {\n          const val = csvVals[i];\n          if (val != null && val.trim().toLowerCase() === fieldVal.toLowerCase()) {\n            return true;\n          }\n        }\n        return false;\n      }\n    }\n\n    return fieldVal.toLowerCase() === name;\n  }\n\n  /**\n   * Accepts a field and returns true if the field contains a\n   * value that matches any of the names in the provided list.\n   * @param {AutofillField} field\n   * @param {string[]} names\n   * @returns {boolean}\n   */\n  static fieldIsFuzzyMatch(field: AutofillField, names: string[]): boolean {\n    if (AutofillService.hasValue(field.htmlID) && this.fuzzyMatch(names, field.htmlID)) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.htmlName) && this.fuzzyMatch(names, field.htmlName)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-tag\"]) &&\n      this.fuzzyMatch(names, field[\"label-tag\"])\n    ) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.placeholder) && this.fuzzyMatch(names, field.placeholder)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-left\"]) &&\n      this.fuzzyMatch(names, field[\"label-left\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-top\"]) &&\n      this.fuzzyMatch(names, field[\"label-top\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-aria\"]) &&\n      this.fuzzyMatch(names, field[\"label-aria\"])\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Accepts a list of options and a value and returns\n   * true if the value matches any of the options.\n   * @param {string[]} options\n   * @param {string} value\n   * @returns {boolean}\n   * @private\n   */\n  private static fuzzyMatch(options: string[], value: string): boolean {\n    if (options == null || options.length === 0 || value == null || value === \"\") {\n      return false;\n    }\n\n    value = value\n      .replace(/(?:\\r\\n|\\r|\\n)/g, \"\")\n      .trim()\n      .toLowerCase();\n\n    for (let i = 0; i < options.length; i++) {\n      if (value.indexOf(options[i]) > -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Accepts a string and returns true if the\n   * string is not falsy and not empty.\n   * @param {string} str\n   * @returns {boolean}\n   */\n  static hasValue(str: string): boolean {\n    return Boolean(str && str !== \"\");\n  }\n\n  /**\n   * Sets the `focus_by_opid` autofill script\n   * action to the last field that was filled.\n   * @param {{[p: string]: AutofillField}} filledFields\n   * @param {AutofillScript} fillScript\n   * @returns {AutofillScript}\n   */\n  static setFillScriptForFocus(\n    filledFields: { [id: string]: AutofillField },\n    fillScript: AutofillScript\n  ): AutofillScript {\n    let lastField: AutofillField = null;\n    let lastPasswordField: AutofillField = null;\n\n    for (const opid in filledFields) {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(opid) && filledFields[opid].viewable) {\n        lastField = filledFields[opid];\n\n        if (filledFields[opid].type === \"password\") {\n          lastPasswordField = filledFields[opid];\n        }\n      }\n    }\n\n    // Prioritize password field over others.\n    if (lastPasswordField) {\n      fillScript.script.push([\"focus_by_opid\", lastPasswordField.opid]);\n    } else if (lastField) {\n      fillScript.script.push([\"focus_by_opid\", lastField.opid]);\n    }\n\n    return fillScript;\n  }\n\n  /**\n   * Updates a fill script to place the `cilck_on_opid`, `focus_on_opid`, and `fill_by_opid`\n   * fill script actions associated with the provided field.\n   * @param {AutofillScript} fillScript\n   * @param {AutofillField} field\n   * @param {string} value\n   */\n  static fillByOpid(fillScript: AutofillScript, field: AutofillField, value: string): void {\n    if (field.maxLength && value && value.length > field.maxLength) {\n      value = value.substr(0, value.length);\n    }\n    if (field.tagName !== \"span\") {\n      fillScript.script.push([\"click_on_opid\", field.opid]);\n      fillScript.script.push([\"focus_by_opid\", field.opid]);\n    }\n    fillScript.script.push([\"fill_by_opid\", field.opid, value]);\n  }\n\n  /**\n   * Identifies if the field is a custom field, a custom\n   * field is defined as a field that is a `span` element.\n   * @param {AutofillField} field\n   * @returns {boolean}\n   */\n  static forCustomFieldsOnly(field: AutofillField): boolean {\n    return field.tagName === \"span\";\n  }\n}\n","import { BrowserApi } from \"../../platform/browser/browser-api\";\n\nexport const clearClipboardAlarmName = \"clearClipboard\";\n\nexport class ClearClipboard {\n  /**\n    We currently rely on an active tab with an injected content script (`../content/misc-utils.ts`) to clear the clipboard via `window.navigator.clipboard.writeText(text)`\n    \n    With https://bugs.chromium.org/p/chromium/issues/detail?id=1160302 it was said that service workers,\n    would have access to the clipboard api and then we could migrate to a simpler solution\n    */\n  static async run() {\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    BrowserApi.sendTabsMessage(activeTabs[0].id, {\n      command: \"clearClipboard\",\n    });\n  }\n}\n","import { BrowserApi } from \"../../platform/browser/browser-api\";\n\n/**\n * Copies text to the clipboard in a MV3 safe way.\n * @param tab - The tab that the text will be sent to so that it can be copied to the users clipboard this needs to be an active tab or the DOM won't be able to be used to do the action. The tab sent in here should be from a user started action or queried for active tabs.\n * @param text - The text that you want added to the users clipboard.\n */\nexport const copyToClipboard = async (tab: chrome.tabs.Tab, text: string) => {\n  if (tab.id == null) {\n    throw new Error(\"Cannot copy text to clipboard with a tab that does not have an id.\");\n  }\n\n  BrowserApi.sendTabsMessage(tab.id, {\n    command: \"copyText\",\n    text: text,\n  });\n};\n","import { clearClipboardAlarmName } from \"../../autofill/clipboard\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\nexport const alarmKeys = [clearClipboardAlarmName] as const;\nexport type AlarmKeys = (typeof alarmKeys)[number];\n\ntype AlarmState = { [T in AlarmKeys]: number | undefined };\n\nconst alarmState: AlarmState = {\n  clearClipboard: null,\n  //TODO once implemented vaultTimeout: null;\n  //TODO once implemented checkNotifications: null;\n  //TODO once implemented (if necessary) processReload: null;\n};\n\n/**\n * Retrieves the set alarm time (planned execution) for a give an commandName {@link AlarmState}\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @returns {Promise<number>} null or Unix epoch timestamp when the alarm action is supposed to execute\n * @example\n * // getAlarmTime(clearClipboard)\n */\nexport async function getAlarmTime(commandName: AlarmKeys): Promise<number> {\n  let alarmTime: number;\n  if (BrowserApi.manifestVersion == 3) {\n    const fromSessionStore = await chrome.storage.session.get(commandName);\n    alarmTime = fromSessionStore[commandName];\n  } else {\n    alarmTime = alarmState[commandName];\n  }\n\n  return alarmTime;\n}\n\n/**\n * Registers an action that should execute after the given time has passed\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @param delay_ms The number of ms from now in which the command should execute from\n * @example\n * // setAlarmTime(clearClipboard, 5000) register the clearClipboard action which will execute when at least 5 seconds from now have passed\n */\nexport async function setAlarmTime(commandName: AlarmKeys, delay_ms: number): Promise<void> {\n  if (!delay_ms || delay_ms === 0) {\n    await this.clearAlarmTime(commandName);\n    return;\n  }\n\n  const time = Date.now() + delay_ms;\n  await setAlarmTimeInternal(commandName, time);\n}\n\n/**\n * Clears the time currently set for a given command\n * @param commandName A command that has been previously registered with {@link AlarmState}\n */\nexport async function clearAlarmTime(commandName: AlarmKeys): Promise<void> {\n  await setAlarmTimeInternal(commandName, null);\n}\n\nasync function setAlarmTimeInternal(commandName: AlarmKeys, time: number): Promise<void> {\n  if (BrowserApi.manifestVersion == 3) {\n    await chrome.storage.session.set({ [commandName]: time });\n  } else {\n    alarmState[commandName] = time;\n  }\n}\n","import { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { setAlarmTime } from \"../../platform/alarms/alarm-state\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\n\nimport { clearClipboardAlarmName } from \"./clear-clipboard\";\nimport { copyToClipboard } from \"./copy-to-clipboard-command\";\n\nexport class GeneratePasswordToClipboardCommand {\n  constructor(\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private stateService: BrowserStateService\n  ) {}\n\n  async generatePasswordToClipboard(tab: chrome.tabs.Tab) {\n    const [options] = await this.passwordGenerationService.getOptions();\n    const password = await this.passwordGenerationService.generatePassword(options);\n\n    copyToClipboard(tab, password);\n\n    const clearClipboard = await this.stateService.getClearClipboard();\n\n    if (clearClipboard != null) {\n      await setAlarmTime(clearClipboardAlarmName, clearClipboard * 1000);\n    }\n  }\n}\n","import { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport class AutofillTabCommand {\n  constructor(private autofillService: AutofillService) {}\n\n  async doAutofillTabCommand(tab: chrome.tabs.Tab) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFillOnTab(\n      [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      tab,\n      true\n    );\n  }\n\n  async doAutofillTabWithCipherCommand(tab: chrome.tabs.Tab, cipher: CipherView) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      skipLastUsed: false,\n      skipUsernameOnlyFill: false,\n      onlyEmptyFields: false,\n      onlyVisibleFields: false,\n      fillNewPassword: true,\n      allowTotpAutofill: true,\n    });\n  }\n\n  private async collectPageDetails(tabId: number): Promise<AutofillPageDetails> {\n    return new Promise((resolve, reject) => {\n      chrome.tabs.sendMessage(\n        tabId,\n        {\n          command: \"collectPageDetailsImmediately\",\n        },\n        (response: AutofillPageDetails) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { EventType } from \"@bitwarden/common/enums\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../auth/background/service-factories/auth-service.factory\";\nimport { totpServiceFactory } from \"../../auth/background/service-factories/totp-service.factory\";\nimport { userVerificationServiceFactory } from \"../../auth/background/service-factories/user-verification-service.factory\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { eventCollectionServiceFactory } from \"../../background/service-factories/event-collection-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { CachedServices } from \"../../platform/background/service-factories/factory-options\";\nimport { stateServiceFactory } from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { passwordGenerationServiceFactory } from \"../../tools/background/service_factories/password-generation-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\nimport { autofillServiceFactory } from \"../background/service_factories/autofill-service.factory\";\nimport { copyToClipboard, GeneratePasswordToClipboardCommand } from \"../clipboard\";\nimport { AutofillTabCommand } from \"../commands/autofill-tab-command\";\n\nimport {\n  AUTOFILL_ID,\n  COPY_IDENTIFIER_ID,\n  COPY_PASSWORD_ID,\n  COPY_USERNAME_ID,\n  COPY_VERIFICATIONCODE_ID,\n  GENERATE_PASSWORD_ID,\n  NOOP_COMMAND_SUFFIX,\n} from \"./main-context-menu-handler\";\n\nexport type CopyToClipboardOptions = { text: string; tab: chrome.tabs.Tab };\nexport type CopyToClipboardAction = (options: CopyToClipboardOptions) => void;\nexport type AutofillAction = (tab: chrome.tabs.Tab, cipher: CipherView) => Promise<void>;\n\nexport type GeneratePasswordToClipboardAction = (tab: chrome.tabs.Tab) => Promise<void>;\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) =>\n  Promise.reject<never>(\"This action is not implemented inside of a service worker context.\");\n\nexport class ContextMenuClickedHandler {\n  constructor(\n    private copyToClipboard: CopyToClipboardAction,\n    private generatePasswordToClipboard: GeneratePasswordToClipboardAction,\n    private autofillAction: AutofillAction,\n    private authService: AuthService,\n    private cipherService: CipherService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: NOT_IMPLEMENTED,\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n\n    const generatePasswordToClipboardCommand = new GeneratePasswordToClipboardCommand(\n      await passwordGenerationServiceFactory(cachedServices, serviceOptions),\n      await stateServiceFactory(cachedServices, serviceOptions)\n    );\n\n    const autofillCommand = new AutofillTabCommand(\n      await autofillServiceFactory(cachedServices, serviceOptions)\n    );\n\n    return new ContextMenuClickedHandler(\n      (options) => copyToClipboard(options.tab, options.text),\n      (tab) => generatePasswordToClipboardCommand.generatePasswordToClipboard(tab),\n      (tab, cipher) => autofillCommand.doAutofillTabWithCipherCommand(tab, cipher),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions),\n      await totpServiceFactory(cachedServices, serviceOptions),\n      await eventCollectionServiceFactory(cachedServices, serviceOptions),\n      await userVerificationServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async onClickedListener(\n    info: chrome.contextMenus.OnClickData,\n    tab?: chrome.tabs.Tab,\n    cachedServices: CachedServices = {}\n  ) {\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(info, tab);\n  }\n\n  static async messageListener(\n    message: { command: string; data: LockedVaultPendingNotificationsItem },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (\n      message.command !== \"unlockCompleted\" ||\n      message.data.target !== \"contextmenus.background\"\n    ) {\n      return;\n    }\n\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(\n      message.data.commandToRetry.msg.data,\n      message.data.commandToRetry.sender.tab\n    );\n  }\n\n  async run(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    switch (info.menuItemId) {\n      case GENERATE_PASSWORD_ID:\n        if (!tab) {\n          return;\n        }\n        await this.generatePasswordToClipboard(tab);\n        break;\n      case COPY_IDENTIFIER_ID:\n        if (!tab) {\n          return;\n        }\n        this.copyToClipboard({ text: await this.getIdentifier(tab, info), tab: tab });\n        break;\n      default:\n        await this.cipherAction(info, tab);\n    }\n  }\n\n  async cipherAction(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: NOOP_COMMAND_SUFFIX, data: info },\n          sender: { tab: tab },\n        },\n        target: \"contextmenus.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      await BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    // NOTE: We don't actually use the first part of this ID, we further switch based on the parentMenuItemId\n    // I would really love to not add it but that is a departure from how it currently works.\n    const id = (info.menuItemId as string).split(\"_\")[1]; // We create all the ids, we can guarantee they are strings\n    let cipher: CipherView | undefined;\n    if (id === NOOP_COMMAND_SUFFIX) {\n      // This NOOP item has come through which is generally only for no access state but since we got here\n      // we are actually unlocked we will do our best to find a good match of an item to autofill this is useful\n      // in scenarios like unlock on autofill\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(tab.url);\n      cipher = ciphers.find((c) => c.reprompt === CipherRepromptType.None);\n    } else {\n      const ciphers = await this.cipherService.getAllDecrypted();\n      cipher = ciphers.find((c) => c.id === id);\n    }\n\n    if (cipher == null) {\n      return;\n    }\n\n    switch (info.parentMenuItemId) {\n      case AUTOFILL_ID:\n        if (tab == null) {\n          return;\n        }\n\n        if (await this.isPasswordRepromptRequired(cipher)) {\n          await BrowserApi.tabSendMessageData(tab, \"passwordReprompt\", {\n            cipherId: cipher.id,\n            action: AUTOFILL_ID,\n          });\n        } else {\n          await this.autofillAction(tab, cipher);\n        }\n\n        break;\n      case COPY_USERNAME_ID:\n        this.copyToClipboard({ text: cipher.login.username, tab: tab });\n        break;\n      case COPY_PASSWORD_ID:\n        if (await this.isPasswordRepromptRequired(cipher)) {\n          await BrowserApi.tabSendMessageData(tab, \"passwordReprompt\", {\n            cipherId: cipher.id,\n            action: COPY_PASSWORD_ID,\n          });\n        } else {\n          this.copyToClipboard({ text: cipher.login.password, tab: tab });\n          this.eventCollectionService.collect(EventType.Cipher_ClientCopiedPassword, cipher.id);\n        }\n\n        break;\n      case COPY_VERIFICATIONCODE_ID:\n        if (await this.isPasswordRepromptRequired(cipher)) {\n          await BrowserApi.tabSendMessageData(tab, \"passwordReprompt\", {\n            cipherId: cipher.id,\n            action: COPY_VERIFICATIONCODE_ID,\n          });\n        } else {\n          this.copyToClipboard({\n            text: await this.totpService.getCode(cipher.login.totp),\n            tab: tab,\n          });\n        }\n\n        break;\n    }\n  }\n\n  private async isPasswordRepromptRequired(cipher: CipherView): Promise<boolean> {\n    return (\n      cipher.reprompt === CipherRepromptType.Password &&\n      (await this.userVerificationService.hasMasterPasswordAndMasterKeyHash())\n    );\n  }\n\n  private async getIdentifier(tab: chrome.tabs.Tab, info: chrome.contextMenus.OnClickData) {\n    return new Promise<string>((resolve, reject) => {\n      BrowserApi.sendTabsMessage(\n        tab.id,\n        { command: \"getClickedElement\" },\n        { frameId: info.frameId },\n        (identifier: string) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(identifier);\n        }\n      );\n    });\n  }\n}\n","import {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\n\nimport {\n  policyServiceFactory,\n  PolicyServiceInitOptions,\n} from \"../../../admin-console/background/service-factories/policy-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../platform/background/service-factories/crypto-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\n\ntype PasswordGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type PasswordGenerationServiceInitOptions = PasswordGenerationServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  PolicyServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function passwordGenerationServiceFactory(\n  cache: { passwordGenerationService?: PasswordGenerationServiceAbstraction } & CachedServices,\n  opts: PasswordGenerationServiceInitOptions\n): Promise<PasswordGenerationServiceAbstraction> {\n  return factory(\n    cache,\n    \"passwordGenerationService\",\n    opts,\n    async () =>\n      new PasswordGenerationService(\n        await cryptoServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import {\n  TotpServiceInitOptions,\n  totpServiceFactory,\n} from \"../../../auth/background/service-factories/totp-service.factory\";\nimport {\n  UserVerificationServiceInitOptions,\n  userVerificationServiceFactory,\n} from \"../../../auth/background/service-factories/user-verification-service.factory\";\nimport {\n  EventCollectionServiceInitOptions,\n  eventCollectionServiceFactory,\n} from \"../../../background/service-factories/event-collection-service.factory\";\nimport {\n  settingsServiceFactory,\n  SettingsServiceInitOptions,\n} from \"../../../background/service-factories/settings-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../platform/background/service-factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../platform/background/service-factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../platform/background/service-factories/state-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../../vault/background/service_factories/cipher-service.factory\";\nimport { AutofillService as AbstractAutoFillService } from \"../../services/abstractions/autofill.service\";\nimport AutofillService from \"../../services/autofill.service\";\n\ntype AutoFillServiceOptions = FactoryOptions;\n\nexport type AutoFillServiceInitOptions = AutoFillServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  TotpServiceInitOptions &\n  EventCollectionServiceInitOptions &\n  LogServiceInitOptions &\n  SettingsServiceInitOptions &\n  UserVerificationServiceInitOptions;\n\nexport function autofillServiceFactory(\n  cache: { autofillService?: AbstractAutoFillService } & CachedServices,\n  opts: AutoFillServiceInitOptions\n): Promise<AbstractAutoFillService> {\n  return factory(\n    cache,\n    \"autofillService\",\n    opts,\n    async () =>\n      new AutofillService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await totpServiceFactory(cache, opts),\n        await eventCollectionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts),\n        await userVerificationServiceFactory(cache, opts)\n      )\n  );\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { ContainerService } from \"@bitwarden/common/platform/services/container.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { authServiceFactory } from \"../../auth/background/service-factories/auth-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { stateServiceFactory } from \"../../platform/background/service-factories/state-service.factory\";\nimport { BrowserStateService } from \"../../platform/services/abstractions/browser-state.service\";\nimport IconDetails from \"../../vault/background/models/icon-details\";\nimport { cipherServiceFactory } from \"../../vault/background/service_factories/cipher-service.factory\";\nimport { BrowserApi } from \"../browser/browser-api\";\nimport BrowserPlatformUtilsService from \"../services/browser-platform-utils.service\";\n\nexport type BadgeOptions = {\n  tab?: chrome.tabs.Tab;\n  windowId?: number;\n};\n\nexport class UpdateBadge {\n  private authService: AuthService;\n  private stateService: BrowserStateService;\n  private cipherService: CipherService;\n  private badgeAction: typeof chrome.action | typeof chrome.browserAction;\n  private sidebarAction: OperaSidebarAction | FirefoxSidebarAction;\n  private inited = false;\n  private win: Window & typeof globalThis;\n\n  private static readonly listenedToCommands = [\n    \"updateBadge\",\n    \"loggedIn\",\n    \"unlocked\",\n    \"syncCompleted\",\n    \"bgUpdateContextMenu\",\n    \"editedCipher\",\n    \"addedCipher\",\n    \"deletedCipher\",\n  ];\n\n  static async windowsOnFocusChangedListener(\n    windowId: number,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({ windowId, existingServices: serviceCache });\n  }\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId: activeInfo.tabId,\n      existingServices: serviceCache,\n      windowId: activeInfo.windowId,\n    });\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({ tabId: addedTabId, existingServices: serviceCache });\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId,\n      existingServices: serviceCache,\n      windowId: tab.windowId,\n    });\n  }\n\n  static async messageListener(\n    message: { command: string; tabId: number },\n    serviceCache: Record<string, unknown>\n  ) {\n    if (!UpdateBadge.listenedToCommands.includes(message.command)) {\n      return;\n    }\n\n    await new UpdateBadge(self).run({ existingServices: serviceCache });\n  }\n\n  constructor(win: Window & typeof globalThis) {\n    this.badgeAction = BrowserApi.getBrowserAction();\n    this.sidebarAction = BrowserApi.getSidebarAction(self);\n    this.win = win;\n  }\n\n  async run(opts?: {\n    tabId?: number;\n    windowId?: number;\n    existingServices?: Record<string, unknown>;\n  }): Promise<void> {\n    await this.initServices(opts?.existingServices);\n\n    const authStatus = await this.authService.getAuthStatus();\n\n    await this.setBadgeBackgroundColor();\n\n    switch (authStatus) {\n      case AuthenticationStatus.LoggedOut: {\n        await this.setLoggedOut();\n        break;\n      }\n      case AuthenticationStatus.Locked: {\n        await this.setLocked();\n        break;\n      }\n      case AuthenticationStatus.Unlocked: {\n        const tab = await this.getTab(opts?.tabId, opts?.windowId);\n        await this.setUnlocked({ tab, windowId: tab?.windowId });\n        break;\n      }\n    }\n  }\n\n  async setLoggedOut(): Promise<void> {\n    await this.setBadgeIcon(\"_gray\");\n    await this.clearBadgeText();\n  }\n\n  async setLocked() {\n    await this.setBadgeIcon(\"_locked\");\n    await this.clearBadgeText();\n  }\n\n  private async clearBadgeText() {\n    const tabs = await BrowserApi.getActiveTabs();\n    if (tabs != null) {\n      tabs.forEach(async (tab) => {\n        if (tab.id != null) {\n          await this.setBadgeText(\"\", tab.id);\n        }\n      });\n    }\n  }\n\n  async setUnlocked(opts: BadgeOptions) {\n    await this.initServices();\n\n    await this.setBadgeIcon(\"\");\n\n    const disableBadgeCounter = await this.stateService.getDisableBadgeCounter();\n    if (disableBadgeCounter) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(opts?.tab?.url);\n    let countText = ciphers.length == 0 ? \"\" : ciphers.length.toString();\n    if (ciphers.length > 9) {\n      countText = \"9+\";\n    }\n    await this.setBadgeText(countText, opts?.tab?.id);\n  }\n\n  setBadgeBackgroundColor(color = \"#294e5f\") {\n    if (this.badgeAction?.setBadgeBackgroundColor) {\n      this.badgeAction.setBadgeBackgroundColor({ color });\n    }\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeBackgroundColor({ color });\n    }\n  }\n\n  setBadgeText(text: string, tabId?: number) {\n    this.setActionText(text, tabId);\n    this.setSideBarText(text, tabId);\n  }\n\n  async setBadgeIcon(iconSuffix: string, windowId?: number) {\n    const options: IconDetails = {\n      path: {\n        19: \"/images/icon19\" + iconSuffix + \".png\",\n        38: \"/images/icon38\" + iconSuffix + \".png\",\n      },\n    };\n    if (windowId && BrowserPlatformUtilsService.isFirefox()) {\n      options.windowId = windowId;\n    }\n\n    await this.setActionIcon(options);\n    await this.setSidebarActionIcon(options);\n  }\n\n  private setActionText(text: string, tabId?: number) {\n    if (this.badgeAction?.setBadgeText) {\n      this.badgeAction.setBadgeText({ text, tabId });\n    }\n  }\n\n  private setSideBarText(text: string, tabId?: number) {\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeText({ text, tabId });\n    } else if (this.sidebarAction) {\n      // Firefox\n      const title = `Bitwarden${Utils.isNullOrEmpty(text) ? \"\" : ` [${text}]`}`;\n      this.sidebarAction.setTitle({ title, tabId });\n    }\n  }\n\n  private async setActionIcon(options: IconDetails) {\n    if (!this.badgeAction?.setIcon) {\n      return;\n    }\n\n    if (this.useSyncApiCalls) {\n      this.badgeAction.setIcon(options);\n    } else {\n      await new Promise<void>((resolve) => this.badgeAction.setIcon(options, () => resolve()));\n    }\n  }\n\n  private async setSidebarActionIcon(options: IconDetails) {\n    if (!this.sidebarAction?.setIcon) {\n      return;\n    }\n\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      await new Promise<void>((resolve) =>\n        (this.sidebarAction as OperaSidebarAction).setIcon(options, () => resolve())\n      );\n    } else {\n      await this.sidebarAction.setIcon(options);\n    }\n  }\n\n  private async getTab(tabId?: number, windowId?: number) {\n    return (\n      (await BrowserApi.getTab(tabId)) ??\n      (windowId\n        ? await BrowserApi.tabsQueryFirst({ active: true, windowId })\n        : await BrowserApi.tabsQueryFirst({ active: true, currentWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true, lastFocusedWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true }))\n    );\n  }\n\n  private get useSyncApiCalls() {\n    return (\n      BrowserPlatformUtilsService.isFirefox() || BrowserPlatformUtilsService.isSafari(this.win)\n    );\n  }\n\n  private async initServices(existingServiceCache?: Record<string, unknown>): Promise<UpdateBadge> {\n    if (this.inited) {\n      return this;\n    }\n\n    const serviceCache: Record<string, unknown> = existingServiceCache || {};\n    const opts = {\n      cryptoFunctionServiceOptions: { win: self },\n      encryptServiceOptions: { logMacFailures: false },\n      logServiceOptions: { isDev: false },\n      platformUtilsServiceOptions: {\n        clipboardWriteCallback: (clipboardValue: string, clearMs: number) =>\n          Promise.reject(\"not implemented\"),\n        biometricCallback: () => Promise.reject(\"not implemented\"),\n        win: self,\n      },\n      stateServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      apiServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      i18nServiceOptions: {\n        systemLanguage: BrowserApi.getUILanguage(self),\n      },\n    };\n    this.stateService = await stateServiceFactory(serviceCache, opts);\n    this.authService = await authServiceFactory(serviceCache, opts);\n    this.cipherService = await cipherServiceFactory(serviceCache, opts);\n\n    // Needed for cipher decryption\n    if (!self.bitwardenContainerService) {\n      new ContainerService(\n        serviceCache.cryptoService as CryptoService,\n        serviceCache.encryptService as EncryptService\n      ).attachToGlobal(self);\n    }\n\n    this.inited = true;\n\n    return this;\n  }\n\n  private isOperaSidebar(\n    action: OperaSidebarAction | FirefoxSidebarAction\n  ): action is OperaSidebarAction {\n    return action != null && (action as OperaSidebarAction).setBadgeText != null;\n  }\n}\n","import { BrowserApi } from \"../browser/browser-api\";\n\nimport { BrowserPopoutWindowService as BrowserPopupWindowServiceInterface } from \"./abstractions/browser-popout-window.service\";\n\nclass BrowserPopoutWindowService implements BrowserPopupWindowServiceInterface {\n  private singleActionPopoutTabIds: Record<string, number> = {};\n  private defaultPopoutWindowOptions: chrome.windows.CreateData = {\n    type: \"normal\",\n    focused: true,\n    width: 500,\n    height: 800,\n  };\n\n  async openUnlockPrompt(senderWindowId: number) {\n    await this.openSingleActionPopout(\n      senderWindowId,\n      \"popup/index.html?uilocation=popout\",\n      \"unlockPrompt\"\n    );\n  }\n\n  async closeUnlockPrompt() {\n    await this.closeSingleActionPopout(\"unlockPrompt\");\n  }\n\n  async openPasswordRepromptPrompt(\n    senderWindowId: number,\n    {\n      cipherId,\n      senderTabId,\n      action,\n    }: {\n      cipherId: string;\n      senderTabId: number;\n      action: string;\n    }\n  ) {\n    const promptWindowPath =\n      \"popup/index.html#/view-cipher\" +\n      \"?uilocation=popout\" +\n      `&cipherId=${cipherId}` +\n      `&senderTabId=${senderTabId}` +\n      `&action=${action}`;\n\n    await this.openSingleActionPopout(senderWindowId, promptWindowPath, \"passwordReprompt\");\n  }\n\n  async closePasswordRepromptPrompt() {\n    await this.closeSingleActionPopout(\"passwordReprompt\");\n  }\n\n  private async openSingleActionPopout(\n    senderWindowId: number,\n    popupWindowURL: string,\n    singleActionPopoutKey: string\n  ) {\n    const senderWindow = senderWindowId && (await BrowserApi.getWindow(senderWindowId));\n    const url = chrome.extension.getURL(popupWindowURL);\n    const offsetRight = 15;\n    const offsetTop = 90;\n    const popupWidth = this.defaultPopoutWindowOptions.width;\n    const windowOptions = senderWindow\n      ? {\n          ...this.defaultPopoutWindowOptions,\n          url,\n          left: senderWindow.left + senderWindow.width - popupWidth - offsetRight,\n          top: senderWindow.top + offsetTop,\n        }\n      : { ...this.defaultPopoutWindowOptions, url };\n\n    const popupWindow = await BrowserApi.createWindow(windowOptions);\n\n    await this.closeSingleActionPopout(singleActionPopoutKey);\n    this.singleActionPopoutTabIds[singleActionPopoutKey] = popupWindow?.tabs[0].id;\n  }\n\n  private async closeSingleActionPopout(popoutKey: string) {\n    const tabId = this.singleActionPopoutTabIds[popoutKey];\n\n    if (tabId) {\n      await BrowserApi.removeTab(tabId);\n    }\n    this.singleActionPopoutTabIds[popoutKey] = null;\n  }\n}\n\nexport default BrowserPopoutWindowService;\n","import { ReplaySubject } from \"rxjs\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config-api.service.abstraction\";\nimport { ServerConfig } from \"@bitwarden/common/platform/abstractions/config/server-config\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { ConfigService } from \"@bitwarden/common/platform/services/config/config.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserConfigService extends ConfigService {\n  @sessionSync<ServerConfig>({ initializer: ServerConfig.fromJSON })\n  protected _serverConfig: ReplaySubject<ServerConfig | null>;\n\n  constructor(\n    stateService: StateService,\n    configApiService: ConfigApiServiceAbstraction,\n    authService: AuthService,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    subscribe = false\n  ) {\n    super(stateService, configApiService, authService, environmentService, logService, subscribe);\n  }\n}\n","import { ReplaySubject } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\nimport I18nService from \"./i18n.service\";\n\n@browserSession\nexport class BrowserI18nService extends I18nService {\n  @sessionSync({ initializer: (s: string) => s })\n  protected _locale: ReplaySubject<string>;\n\n  constructor(systemLanguage: string, private stateService: StateService) {\n    super(systemLanguage);\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModeBackgroundService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenPopupMainMessageListener(message);\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Send } from \"@bitwarden/common/tools/send/models/domain/send\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service\";\n\nimport { browserSession, sessionSync } from \"../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserSendService extends SendService {\n  @sessionSync({ initializer: Send.fromJSON, initializeAs: \"array\" })\n  protected _sends: BehaviorSubject<Send[]>;\n  @sessionSync({ initializer: SendView.fromJSON, initializeAs: \"array\" })\n  protected _sendViews: BehaviorSubject<SendView[]>;\n}\n","import { VaultTimeoutService as BaseVaultTimeoutService } from \"@bitwarden/common/services/vault-timeout/vault-timeout.service\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\n\nexport default class VaultTimeoutService extends BaseVaultTimeoutService {\n  startCheck() {\n    this.checkVaultTimeout();\n    if (this.platformUtilsService.isSafari()) {\n      this.checkSafari();\n    } else {\n      setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n    }\n  }\n\n  // This is a work-around to safari adding an arbitrary delay to setTimeout and\n  //  setIntervals. It works by calling the native extension which sleeps for 10s,\n  //  efficiently replicating setInterval.\n  async checkSafari() {\n    // eslint-disable-next-line\n    while (true) {\n      try {\n        await SafariApp.sendMessageToApp(\"sleep\");\n        this.checkVaultTimeout();\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log(\"Exception Safari VaultTimeout\", e);\n      }\n    }\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Folder } from \"@bitwarden/common/vault/models/domain/folder\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { FolderService as BaseFolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\n\nimport { browserSession, sessionSync } from \"../../platform/decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserFolderService extends BaseFolderService {\n  @sessionSync({ initializer: Folder.fromJSON, initializeAs: \"array\" })\n  protected _folders: BehaviorSubject<Folder[]>;\n  @sessionSync({ initializer: FolderView.fromJSON, initializeAs: \"array\" })\n  protected _folderViews: BehaviorSubject<FolderView[]>;\n}\n","import { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class CommandsBackground {\n  private isSafari: boolean;\n  private isVivaldi: boolean;\n\n  constructor(\n    private main: MainBackground,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private platformUtilsService: PlatformUtilsService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private authService: AuthService\n  ) {\n    this.isSafari = this.platformUtilsService.isSafari();\n    this.isVivaldi = this.platformUtilsService.isVivaldi();\n  }\n\n  async init() {\n    BrowserApi.messageListener(\n      \"commands.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"commands.background\") {\n          await this.processCommand(\n            msg.data.commandToRetry.msg.command,\n            msg.data.commandToRetry.sender\n          );\n        }\n      }\n    );\n\n    if (chrome && chrome.commands) {\n      chrome.commands.onCommand.addListener(async (command: string) => {\n        await this.processCommand(command);\n      });\n    }\n  }\n\n  private async processCommand(command: string, sender?: chrome.runtime.MessageSender) {\n    switch (command) {\n      case \"generate_password\":\n        await this.generatePasswordToClipboard();\n        break;\n      case \"autofill_login\":\n        await this.autoFillLogin(sender ? sender.tab : null);\n        break;\n      case \"open_popup\":\n        await this.openPopup();\n        break;\n      case \"lock_vault\":\n        await this.vaultTimeoutService.lock();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async generatePasswordToClipboard() {\n    const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n    const password = await this.passwordGenerationService.generatePassword(options);\n    this.platformUtilsService.copyToClipboard(password, { window: window });\n    this.passwordGenerationService.addHistory(password);\n  }\n\n  private async autoFillLogin(tab?: chrome.tabs.Tab) {\n    if (!tab) {\n      tab = await BrowserApi.getTabFromCurrentWindowId();\n    }\n\n    if (tab == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: \"autofill_login\" },\n          sender: { tab: tab },\n        },\n        target: \"commands.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    await this.main.collectPageDetailsForContentScript(tab, \"autofill_cmd\");\n  }\n\n  private async openPopup() {\n    // Chrome APIs cannot open popup\n    if (!this.isSafari) {\n      return;\n    }\n\n    this.main.openPopup();\n  }\n}\n","import { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\n\nimport { BrowserStateService } from \"../platform/services/abstractions/browser-state.service\";\n\nconst IdleInterval = 60 * 5; // 5 minutes\n\nexport default class IdleBackground {\n  private idle: any;\n  private idleTimer: number = null;\n  private idleState = \"active\";\n\n  constructor(\n    private vaultTimeoutService: VaultTimeoutService,\n    private stateService: BrowserStateService,\n    private notificationsService: NotificationsService\n  ) {\n    this.idle = chrome.idle || (browser != null ? browser.idle : null);\n  }\n\n  async init() {\n    if (!this.idle) {\n      return;\n    }\n\n    const idleHandler = (newState: string) => {\n      if (newState === \"active\") {\n        this.notificationsService.reconnectFromActivity();\n      } else {\n        this.notificationsService.disconnectFromInactivity();\n      }\n    };\n    if (this.idle.onStateChanged && this.idle.setDetectionInterval) {\n      this.idle.setDetectionInterval(IdleInterval);\n      this.idle.onStateChanged.addListener(idleHandler);\n    } else {\n      this.pollIdle(idleHandler);\n    }\n\n    if (this.idle.onStateChanged) {\n      this.idle.onStateChanged.addListener(async (newState: string) => {\n        if (newState === \"locked\") {\n          // If the screen is locked or the screensaver activates\n          const timeout = await this.stateService.getVaultTimeout();\n          if (timeout === -2) {\n            // On System Lock vault timeout option\n            const action = await this.stateService.getVaultTimeoutAction();\n            if (action === VaultTimeoutAction.LogOut) {\n              await this.vaultTimeoutService.logOut();\n            } else {\n              await this.vaultTimeoutService.lock();\n            }\n          }\n        }\n      });\n    }\n  }\n\n  private pollIdle(handler: (newState: string) => void) {\n    if (this.idleTimer != null) {\n      window.clearTimeout(this.idleTimer);\n      this.idleTimer = null;\n    }\n    this.idle.queryState(IdleInterval, (state: string) => {\n      if (state !== this.idleState) {\n        this.idleState = state;\n        handler(state);\n      }\n      this.idleTimer = window.setTimeout(() => this.pollIdle(handler), 5000);\n    });\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport {\n  MasterKey,\n  SymmetricCryptoKey,\n  UserKey,\n} from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\n\nimport RuntimeBackground from \"./runtime.background\";\n\nconst MessageValidTimeout = 10 * 1000;\nconst EncryptionAlgorithm = \"sha1\";\n\ntype Message = {\n  command: string;\n\n  // Filled in by this service\n  userId?: string;\n  timestamp?: number;\n\n  // Used for sharing secret\n  publicKey?: string;\n};\n\ntype OuterMessage = {\n  message: Message | EncString;\n  appId: string;\n};\n\ntype ReceiveMessage = {\n  timestamp: number;\n  command: string;\n  response?: any;\n\n  // Unlock key\n  keyB64?: string;\n  userKeyB64?: string;\n};\n\ntype ReceiveMessageOuter = {\n  command: string;\n  appId: string;\n\n  // Should only have one of these.\n  message?: EncString;\n  sharedSecret?: string;\n};\n\nexport class NativeMessagingBackground {\n  private connected = false;\n  private connecting: boolean;\n  private port: browser.runtime.Port | chrome.runtime.Port;\n\n  private resolver: any = null;\n  private privateKey: Uint8Array = null;\n  private publicKey: Uint8Array = null;\n  private secureSetupResolve: any = null;\n  private sharedSecret: SymmetricCryptoKey;\n  private appId: string;\n  private validatingFingerprint: boolean;\n\n  constructor(\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private runtimeBackground: RuntimeBackground,\n    private i18nService: I18nService,\n    private messagingService: MessagingService,\n    private appIdService: AppIdService,\n    private platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private logService: LogService,\n    private authService: AuthService\n  ) {\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    if (chrome?.permissions?.onAdded) {\n      // Reload extension to activate nativeMessaging\n      chrome.permissions.onAdded.addListener((permissions) => {\n        BrowserApi.reloadExtension(null);\n      });\n    }\n  }\n\n  async connect() {\n    this.appId = await this.appIdService.getAppId();\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    return new Promise<void>((resolve, reject) => {\n      this.port = BrowserApi.connectNative(\"com.8bit.bitwarden\");\n\n      this.connecting = true;\n\n      const connectedCallback = () => {\n        this.connected = true;\n        this.connecting = false;\n        resolve();\n      };\n\n      // Safari has a bundled native component which is always available, no need to\n      // check if the desktop app is running.\n      if (this.platformUtilsService.isSafari()) {\n        connectedCallback();\n      }\n\n      this.port.onMessage.addListener(async (message: ReceiveMessageOuter) => {\n        switch (message.command) {\n          case \"connected\":\n            connectedCallback();\n            break;\n          case \"disconnected\":\n            if (this.connecting) {\n              reject(\"startDesktop\");\n            }\n            this.connected = false;\n            this.port.disconnect();\n            break;\n          case \"setupEncryption\": {\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            const encrypted = Utils.fromB64ToArray(message.sharedSecret);\n            const decrypted = await this.cryptoFunctionService.rsaDecrypt(\n              encrypted,\n              this.privateKey,\n              EncryptionAlgorithm\n            );\n\n            if (this.validatingFingerprint) {\n              this.validatingFingerprint = false;\n              this.stateService.setBiometricFingerprintValidated(true);\n            }\n            this.sharedSecret = new SymmetricCryptoKey(decrypted);\n            this.secureSetupResolve();\n            break;\n          }\n          case \"invalidateEncryption\":\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            this.sharedSecret = null;\n            this.privateKey = null;\n            this.connected = false;\n\n            this.messagingService.send(\"showDialog\", {\n              title: { key: \"nativeMessagingInvalidEncryptionTitle\" },\n              content: { key: \"nativeMessagingInvalidEncryptionDesc\" },\n              acceptButtonText: { key: \"ok\" },\n              cancelButtonText: null,\n              type: \"danger\",\n            });\n            break;\n          case \"verifyFingerprint\": {\n            if (this.sharedSecret == null) {\n              this.validatingFingerprint = true;\n              this.showFingerprintDialog();\n            }\n            break;\n          }\n          case \"wrongUserId\":\n            this.showWrongUserDialog();\n            break;\n          default:\n            // Ignore since it belongs to another device\n            if (!this.platformUtilsService.isSafari() && message.appId !== this.appId) {\n              return;\n            }\n\n            this.onMessage(message.message);\n        }\n      });\n\n      this.port.onDisconnect.addListener((p: any) => {\n        let error;\n        if (BrowserApi.isWebExtensionsApi) {\n          error = p.error.message;\n        } else {\n          error = chrome.runtime.lastError.message;\n        }\n\n        this.sharedSecret = null;\n        this.privateKey = null;\n        this.connected = false;\n\n        const reason = error != null ? \"desktopIntegrationDisabled\" : null;\n        reject(reason);\n      });\n    });\n  }\n\n  showWrongUserDialog() {\n    this.messagingService.send(\"showDialog\", {\n      title: { key: \"nativeMessagingWrongUserTitle\" },\n      content: { key: \"nativeMessagingWrongUserDesc\" },\n      acceptButtonText: { key: \"ok\" },\n      cancelButtonText: null,\n      type: \"danger\",\n    });\n  }\n\n  async send(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.userId = await this.stateService.getUserId();\n    message.timestamp = Date.now();\n\n    if (this.platformUtilsService.isSafari()) {\n      this.postMessage(message as any);\n    } else {\n      this.postMessage({ appId: this.appId, message: await this.encryptMessage(message) });\n    }\n  }\n\n  async encryptMessage(message: Message) {\n    if (this.sharedSecret == null) {\n      await this.secureCommunication();\n    }\n\n    return await this.cryptoService.encrypt(JSON.stringify(message), this.sharedSecret);\n  }\n\n  getResponse(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.resolver = resolve;\n    });\n  }\n\n  private postMessage(message: OuterMessage) {\n    // Wrap in try-catch to when the port disconnected without triggering `onDisconnect`.\n    try {\n      const msg: any = message;\n      if (message.message instanceof EncString) {\n        // Alternative, backwards-compatible serialization of EncString\n        msg.message = {\n          encryptedString: message.message.encryptedString,\n          encryptionType: message.message.encryptionType,\n          data: message.message.data,\n          iv: message.message.iv,\n          mac: message.message.mac,\n        };\n      }\n      this.port.postMessage(msg);\n    } catch (e) {\n      this.logService.error(\"NativeMessaging port disconnected, disconnecting.\");\n\n      this.sharedSecret = null;\n      this.privateKey = null;\n      this.connected = false;\n\n      this.messagingService.send(\"showDialog\", {\n        title: { key: \"nativeMessagingInvalidEncryptionTitle\" },\n        content: { key: \"nativeMessagingInvalidEncryptionDesc\" },\n        acceptButtonText: { key: \"ok\" },\n        cancelButtonText: null,\n        type: \"danger\",\n      });\n    }\n  }\n\n  private async onMessage(rawMessage: ReceiveMessage | EncString) {\n    let message = rawMessage as ReceiveMessage;\n    if (!this.platformUtilsService.isSafari()) {\n      message = JSON.parse(\n        await this.cryptoService.decryptToUtf8(rawMessage as EncString, this.sharedSecret)\n      );\n    }\n\n    if (Math.abs(message.timestamp - Date.now()) > MessageValidTimeout) {\n      this.logService.error(\"NativeMessage is to old, ignoring.\");\n      return;\n    }\n\n    switch (message.command) {\n      case \"biometricUnlock\": {\n        await this.stateService.setBiometricAwaitingAcceptance(null);\n\n        if (message.response === \"not enabled\") {\n          this.messagingService.send(\"showDialog\", {\n            title: { key: \"biometricsNotEnabledTitle\" },\n            content: { key: \"biometricsNotEnabledDesc\" },\n            acceptButtonText: { key: \"ok\" },\n            cancelButtonText: null,\n            type: \"danger\",\n          });\n          break;\n        } else if (message.response === \"not supported\") {\n          this.messagingService.send(\"showDialog\", {\n            title: { key: \"biometricsNotSupportedTitle\" },\n            content: { key: \"biometricsNotSupportedDesc\" },\n            acceptButtonText: { key: \"ok\" },\n            cancelButtonText: null,\n            type: \"danger\",\n          });\n          break;\n        }\n\n        const enabled = await this.stateService.getBiometricUnlock();\n        if (enabled === null || enabled === false) {\n          if (message.response === \"unlocked\") {\n            await this.stateService.setBiometricUnlock(true);\n          }\n          break;\n        }\n\n        // Ignore unlock if already unlocked\n        if ((await this.authService.getAuthStatus()) === AuthenticationStatus.Unlocked) {\n          break;\n        }\n\n        if (message.response === \"unlocked\") {\n          try {\n            if (message.userKeyB64) {\n              const userKey = new SymmetricCryptoKey(\n                Utils.fromB64ToArray(message.userKeyB64)\n              ) as UserKey;\n              await this.cryptoService.setUserKey(userKey);\n            } else if (message.keyB64) {\n              // Backwards compatibility to support cases in which the user hasn't updated their desktop app\n              // TODO: Remove after 2023.10 release (https://bitwarden.atlassian.net/browse/PM-3472)\n              let encUserKey = await this.stateService.getEncryptedCryptoSymmetricKey();\n              encUserKey ||= await this.stateService.getMasterKeyEncryptedUserKey();\n              if (!encUserKey) {\n                throw new Error(\"No encrypted user key found\");\n              }\n              const masterKey = new SymmetricCryptoKey(\n                Utils.fromB64ToArray(message.keyB64)\n              ) as MasterKey;\n              const userKey = await this.cryptoService.decryptUserKeyWithMasterKey(\n                masterKey,\n                new EncString(encUserKey)\n              );\n              await this.cryptoService.setMasterKey(masterKey);\n              await this.cryptoService.setUserKey(userKey);\n            } else {\n              throw new Error(\"No key received\");\n            }\n          } catch (e) {\n            this.logService.error(\"Unable to set key: \" + e);\n            this.messagingService.send(\"showDialog\", {\n              title: { key: \"biometricsFailedTitle\" },\n              content: { key: \"biometricsFailedDesc\" },\n              acceptButtonText: { key: \"ok\" },\n              cancelButtonText: null,\n              type: \"danger\",\n            });\n\n            // Exit early\n            if (this.resolver) {\n              this.resolver(message);\n            }\n            return;\n          }\n\n          // Verify key is correct by attempting to decrypt a secret\n          try {\n            await this.cryptoService.getFingerprint(await this.stateService.getUserId());\n          } catch (e) {\n            this.logService.error(\"Unable to verify key: \" + e);\n            await this.cryptoService.clearKeys();\n            this.showWrongUserDialog();\n\n            // Exit early\n            if (this.resolver) {\n              this.resolver(message);\n            }\n            return;\n          }\n\n          this.runtimeBackground.processMessage({ command: \"unlocked\" }, null, null);\n        }\n        break;\n      }\n      default:\n        this.logService.error(\"NativeMessage, got unknown command: \" + message.command);\n        break;\n    }\n\n    if (this.resolver) {\n      this.resolver(message);\n    }\n  }\n\n  private async secureCommunication() {\n    const [publicKey, privateKey] = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    this.publicKey = publicKey;\n    this.privateKey = privateKey;\n\n    this.sendUnencrypted({\n      command: \"setupEncryption\",\n      publicKey: Utils.fromBufferToB64(publicKey),\n      userId: await this.stateService.getUserId(),\n    });\n\n    return new Promise((resolve, reject) => (this.secureSetupResolve = resolve));\n  }\n\n  private async sendUnencrypted(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.timestamp = Date.now();\n\n    this.postMessage({ appId: this.appId, message: message });\n  }\n\n  private async showFingerprintDialog() {\n    const fingerprint = await this.cryptoService.getFingerprint(\n      await this.stateService.getUserId(),\n      this.publicKey\n    );\n\n    this.messagingService.send(\"showNativeMessagingFinterprintDialog\", {\n      fingerprint: fingerprint,\n    });\n  }\n}\n","import { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { SystemService } from \"@bitwarden/common/platform/abstractions/system.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { AutofillService } from \"../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../platform/browser/browser-api\";\nimport { BrowserPopoutWindowService } from \"../platform/popup/abstractions/browser-popout-window.service\";\nimport { BrowserEnvironmentService } from \"../platform/services/browser-environment.service\";\nimport BrowserPlatformUtilsService from \"../platform/services/browser-platform-utils.service\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class RuntimeBackground {\n  private autofillTimeout: any;\n  private pageDetailsToAutoFill: any[] = [];\n  private onInstalledReason: string = null;\n  private lockedVaultPendingNotifications: LockedVaultPendingNotificationsItem[] = [];\n\n  constructor(\n    private main: MainBackground,\n    private autofillService: AutofillService,\n    private platformUtilsService: BrowserPlatformUtilsService,\n    private i18nService: I18nService,\n    private notificationsService: NotificationsService,\n    private systemService: SystemService,\n    private environmentService: BrowserEnvironmentService,\n    private messagingService: MessagingService,\n    private logService: LogService,\n    private configService: ConfigServiceAbstraction,\n    private browserPopoutWindowService: BrowserPopoutWindowService\n  ) {\n    // onInstalled listener must be wired up before anything else, so we do it in the ctor\n    chrome.runtime.onInstalled.addListener((details: any) => {\n      this.onInstalledReason = details.reason;\n    });\n  }\n\n  async init() {\n    if (!chrome.runtime) {\n      return;\n    }\n\n    await this.checkOnInstalled();\n    const backgroundMessageListener = async (\n      msg: any,\n      sender: chrome.runtime.MessageSender,\n      sendResponse: any\n    ) => {\n      await this.processMessage(msg, sender, sendResponse);\n    };\n\n    BrowserApi.messageListener(\"runtime.background\", backgroundMessageListener);\n    if (this.main.popupOnlyContext) {\n      (window as any).bitwardenBackgroundMessageListener = backgroundMessageListener;\n    }\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) {\n    const cipherId = msg.data?.cipherId;\n\n    switch (msg.command) {\n      case \"loggedIn\":\n      case \"unlocked\": {\n        let item: LockedVaultPendingNotificationsItem;\n\n        if (this.lockedVaultPendingNotifications?.length > 0) {\n          item = this.lockedVaultPendingNotifications.pop();\n          await this.browserPopoutWindowService.closeUnlockPrompt();\n        }\n\n        await this.main.refreshBadge();\n        await this.main.refreshMenu(false);\n        this.notificationsService.updateConnection(msg.command === \"unlocked\");\n        this.systemService.cancelProcessReload();\n\n        if (item) {\n          await BrowserApi.focusWindow(item.commandToRetry.sender.tab.windowId);\n          await BrowserApi.focusTab(item.commandToRetry.sender.tab.id);\n          await BrowserApi.tabSendMessageData(\n            item.commandToRetry.sender.tab,\n            \"unlockCompleted\",\n            item\n          );\n        }\n        break;\n      }\n      case \"addToLockedVaultPendingNotifications\":\n        this.lockedVaultPendingNotifications.push(msg.data);\n        break;\n      case \"logout\":\n        await this.main.logout(msg.expired, msg.userId);\n        break;\n      case \"syncCompleted\":\n        if (msg.successfully) {\n          setTimeout(async () => {\n            await this.main.refreshBadge();\n            await this.main.refreshMenu();\n          }, 2000);\n          this.main.avatarUpdateService.loadColorFromState();\n          this.configService.triggerServerConfigFetch();\n        }\n        break;\n      case \"openPopup\":\n        await this.main.openPopup();\n        break;\n      case \"promptForLogin\":\n      case \"bgReopenPromptForLogin\":\n        await this.browserPopoutWindowService.openUnlockPrompt(sender.tab?.windowId);\n        break;\n      case \"passwordReprompt\":\n        if (cipherId) {\n          await this.browserPopoutWindowService.openPasswordRepromptPrompt(sender.tab?.windowId, {\n            cipherId: cipherId,\n            senderTabId: sender.tab.id,\n            action: msg.data?.action,\n          });\n        }\n        break;\n      case \"openAddEditCipher\": {\n        const addEditCipherUrl =\n          cipherId == null\n            ? \"popup/index.html#/edit-cipher\"\n            : \"popup/index.html#/edit-cipher?cipherId=\" + cipherId;\n\n        BrowserApi.openBitwardenExtensionTab(addEditCipherUrl, true);\n        break;\n      }\n      case \"closeTab\":\n        setTimeout(() => {\n          BrowserApi.closeBitwardenExtensionTab();\n        }, msg.delay ?? 0);\n        break;\n      case \"triggerAutofillScriptInjection\":\n        await this.autofillService.injectAutofillScripts(\n          sender,\n          await this.configService.getFeatureFlag<boolean>(FeatureFlag.AutofillV2)\n        );\n        break;\n      case \"bgCollectPageDetails\":\n        await this.main.collectPageDetailsForContentScript(sender.tab, msg.sender, sender.frameId);\n        break;\n      case \"bgUpdateContextMenu\":\n      case \"editedCipher\":\n      case \"addedCipher\":\n      case \"deletedCipher\":\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        break;\n      case \"bgReseedStorage\":\n        await this.main.reseedStorage();\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"autofiller\":\n          case \"autofill_cmd\": {\n            const totpCode = await this.autofillService.doAutoFillActiveTab(\n              [\n                {\n                  frameId: sender.frameId,\n                  tab: msg.tab,\n                  details: msg.details,\n                },\n              ],\n              msg.sender === \"autofill_cmd\"\n            );\n            if (totpCode != null) {\n              this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n            }\n            break;\n          }\n          case \"contextMenu\":\n            clearTimeout(this.autofillTimeout);\n            this.pageDetailsToAutoFill.push({\n              frameId: sender.frameId,\n              tab: msg.tab,\n              details: msg.details,\n            });\n            this.autofillTimeout = setTimeout(async () => await this.autofillPage(msg.tab), 300);\n            break;\n          default:\n            break;\n        }\n        break;\n      case \"authResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        try {\n          BrowserApi.createNewTab(\n            \"popup/index.html?uilocation=popout#/sso?code=\" +\n              encodeURIComponent(msg.code) +\n              \"&state=\" +\n              encodeURIComponent(msg.state)\n          );\n        } catch {\n          this.logService.error(\"Unable to open sso popout tab\");\n        }\n        break;\n      }\n      case \"webAuthnResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        const params =\n          `webAuthnResponse=${encodeURIComponent(msg.data)};` +\n          `remember=${encodeURIComponent(msg.remember)}`;\n        BrowserApi.openBitwardenExtensionTab(`popup/index.html#/2fa;${params}`, false);\n        break;\n      }\n      case \"reloadPopup\":\n        this.messagingService.send(\"reloadPopup\");\n        break;\n      case \"emailVerificationRequired\":\n        this.messagingService.send(\"showDialog\", {\n          title: { key: \"emailVerificationRequired\" },\n          content: { key: \"emailVerificationRequiredDesc\" },\n          acceptButtonText: { key: \"ok\" },\n          cancelButtonText: null,\n          type: \"info\",\n        });\n        break;\n      case \"getClickedElementResponse\":\n        this.platformUtilsService.copyToClipboard(msg.identifier, { window: window });\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async autofillPage(tabToAutoFill: chrome.tabs.Tab) {\n    const totpCode = await this.autofillService.doAutoFill({\n      tab: tabToAutoFill,\n      cipher: this.main.loginToAutoFill,\n      pageDetails: this.pageDetailsToAutoFill,\n      fillNewPassword: true,\n      allowTotpAutofill: true,\n    });\n\n    if (totpCode != null) {\n      this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n    }\n\n    // reset\n    this.main.loginToAutoFill = null;\n    this.pageDetailsToAutoFill = [];\n  }\n\n  private async checkOnInstalled() {\n    setTimeout(async () => {\n      if (this.onInstalledReason != null) {\n        if (this.onInstalledReason === \"install\") {\n          BrowserApi.createNewTab(\"https://bitwarden.com/browser-start/\");\n\n          if (await this.environmentService.hasManagedEnvironment()) {\n            await this.environmentService.setUrlsToManagedEnvironment();\n          }\n        }\n\n        this.onInstalledReason = null;\n      }\n    }, 100);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { UriMatchType } from \"@bitwarden/common/enums\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { BrowserApi } from \"../platform/browser/browser-api\";\n\nexport default class WebRequestBackground {\n  private pendingAuthRequests: any[] = [];\n  private webRequest: any;\n  private isFirefox: boolean;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private authService: AuthService\n  ) {\n    if (BrowserApi.manifestVersion === 2) {\n      this.webRequest = (window as any).chrome.webRequest;\n    }\n    this.isFirefox = platformUtilsService.isFirefox();\n  }\n\n  async init() {\n    if (!this.webRequest || !this.webRequest.onAuthRequired) {\n      return;\n    }\n\n    this.webRequest.onAuthRequired.addListener(\n      async (details: any, callback: any) => {\n        if (!details.url || this.pendingAuthRequests.indexOf(details.requestId) !== -1) {\n          if (callback) {\n            callback();\n          }\n          return;\n        }\n\n        this.pendingAuthRequests.push(details.requestId);\n\n        if (this.isFirefox) {\n          // eslint-disable-next-line\n          return new Promise(async (resolve, reject) => {\n            await this.resolveAuthCredentials(details.url, resolve, reject);\n          });\n        } else {\n          await this.resolveAuthCredentials(details.url, callback, callback);\n        }\n      },\n      { urls: [\"http://*/*\", \"https://*/*\"] },\n      [this.isFirefox ? \"blocking\" : \"asyncBlocking\"]\n    );\n\n    this.webRequest.onCompleted.addListener((details: any) => this.completeAuthRequest(details), {\n      urls: [\"http://*/*\"],\n    });\n    this.webRequest.onErrorOccurred.addListener(\n      (details: any) => this.completeAuthRequest(details),\n      {\n        urls: [\"http://*/*\"],\n      }\n    );\n  }\n\n  // eslint-disable-next-line\n  private async resolveAuthCredentials(domain: string, success: Function, error: Function) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      error();\n      return;\n    }\n\n    try {\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(\n        domain,\n        null,\n        UriMatchType.Host\n      );\n      if (ciphers == null || ciphers.length !== 1) {\n        error();\n        return;\n      }\n\n      success({\n        authCredentials: {\n          username: ciphers[0].login.username,\n          password: ciphers[0].login.password,\n        },\n      });\n    } catch {\n      error();\n    }\n  }\n\n  private completeAuthRequest(details: any) {\n    const i = this.pendingAuthRequests.indexOf(details.requestId);\n    if (i > -1) {\n      this.pendingAuthRequests.splice(i, 1);\n    }\n  }\n}\n","import { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { DevicesServiceAbstraction } from \"@bitwarden/common/abstractions/devices/devices.service.abstraction\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { InternalOrganizationServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/services/provider.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { DevicesApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/devices-api.service.abstraction\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthRequestCryptoServiceImplementation } from \"@bitwarden/common/auth/services/auth-request-crypto.service.implementation\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { DeviceTrustCryptoService } from \"@bitwarden/common/auth/services/device-trust-crypto.service.implementation\";\nimport { DevicesApiServiceImplementation } from \"@bitwarden/common/auth/services/devices-api.service.implementation\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config-api.service.abstraction\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/platform/abstractions/file-upload/file-upload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { SystemService as SystemServiceAbstraction } from \"@bitwarden/common/platform/abstractions/system.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { AppIdService } from \"@bitwarden/common/platform/services/app-id.service\";\nimport { ConfigApiService } from \"@bitwarden/common/platform/services/config/config-api.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\nimport { ContainerService } from \"@bitwarden/common/platform/services/container.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/platform/services/cryptography/multithread-encrypt.service.implementation\";\nimport { FileUploadService } from \"@bitwarden/common/platform/services/file-upload/file-upload.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/platform/services/memory-storage.service\";\nimport { SystemService } from \"@bitwarden/common/platform/services/system.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/platform/services/web-crypto-function.service\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { DevicesServiceImplementation } from \"@bitwarden/common/services/devices/devices.service.implementation\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vault-timeout/vault-timeout-settings.service\";\nimport {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\nimport {\n  UsernameGenerationService,\n  UsernameGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/username\";\nimport {\n  PasswordStrengthService,\n  PasswordStrengthServiceAbstraction,\n} from \"@bitwarden/common/tools/password-strength\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { InternalSendService as InternalSendServiceAbstraction } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/services/collection.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\nimport {\n  VaultExportService,\n  VaultExportServiceAbstraction,\n} from \"@bitwarden/exporter/vault-export\";\n\nimport { BrowserOrganizationService } from \"../admin-console/services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../admin-console/services/browser-policy.service\";\nimport ContextMenusBackground from \"../autofill/background/context-menus.background\";\nimport NotificationBackground from \"../autofill/background/notification.background\";\nimport TabsBackground from \"../autofill/background/tabs.background\";\nimport { CipherContextMenuHandler } from \"../autofill/browser/cipher-context-menu-handler\";\nimport { ContextMenuClickedHandler } from \"../autofill/browser/context-menu-clicked-handler\";\nimport { MainContextMenuHandler } from \"../autofill/browser/main-context-menu-handler\";\nimport { AutofillService as AutofillServiceAbstraction } from \"../autofill/services/abstractions/autofill.service\";\nimport AutofillService from \"../autofill/services/autofill.service\";\nimport { SafariApp } from \"../browser/safariApp\";\nimport { Account } from \"../models/account\";\nimport { BrowserApi } from \"../platform/browser/browser-api\";\nimport { flagEnabled } from \"../platform/flags\";\nimport { UpdateBadge } from \"../platform/listeners/update-badge\";\nimport BrowserPopoutWindowService from \"../platform/popup/browser-popout-window.service\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../platform/services/abstractions/browser-state.service\";\nimport { BrowserConfigService } from \"../platform/services/browser-config.service\";\nimport { BrowserCryptoService } from \"../platform/services/browser-crypto.service\";\nimport { BrowserEnvironmentService } from \"../platform/services/browser-environment.service\";\nimport { BrowserI18nService } from \"../platform/services/browser-i18n.service\";\nimport BrowserLocalStorageService from \"../platform/services/browser-local-storage.service\";\nimport BrowserMessagingPrivateModeBackgroundService from \"../platform/services/browser-messaging-private-mode-background.service\";\nimport BrowserMessagingService from \"../platform/services/browser-messaging.service\";\nimport BrowserPlatformUtilsService from \"../platform/services/browser-platform-utils.service\";\nimport { BrowserStateService } from \"../platform/services/browser-state.service\";\nimport { KeyGenerationService } from \"../platform/services/key-generation.service\";\nimport { LocalBackedSessionStorageService } from \"../platform/services/local-backed-session-storage.service\";\nimport { BrowserSendService } from \"../services/browser-send.service\";\nimport { BrowserSettingsService } from \"../services/browser-settings.service\";\nimport VaultTimeoutService from \"../services/vault-timeout/vault-timeout.service\";\nimport { BrowserFolderService } from \"../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../vault/services/vault-filter.service\";\n\nimport CommandsBackground from \"./commands.background\";\nimport IdleBackground from \"./idle.background\";\nimport { NativeMessagingBackground } from \"./nativeMessaging.background\";\nimport RuntimeBackground from \"./runtime.background\";\nimport WebRequestBackground from \"./webRequest.background\";\n\nexport default class MainBackground {\n  messagingService: MessagingServiceAbstraction;\n  storageService: AbstractStorageService;\n  secureStorageService: AbstractStorageService;\n  memoryStorageService: AbstractMemoryStorageService;\n  i18nService: I18nServiceAbstraction;\n  platformUtilsService: PlatformUtilsServiceAbstraction;\n  logService: LogServiceAbstraction;\n  cryptoService: CryptoServiceAbstraction;\n  cryptoFunctionService: CryptoFunctionServiceAbstraction;\n  tokenService: TokenServiceAbstraction;\n  appIdService: AppIdServiceAbstraction;\n  apiService: ApiServiceAbstraction;\n  environmentService: BrowserEnvironmentService;\n  settingsService: SettingsServiceAbstraction;\n  cipherService: CipherServiceAbstraction;\n  folderService: InternalFolderServiceAbstraction;\n  collectionService: CollectionServiceAbstraction;\n  vaultTimeoutService: VaultTimeoutService;\n  vaultTimeoutSettingsService: VaultTimeoutSettingsServiceAbstraction;\n  syncService: SyncServiceAbstraction;\n  passwordGenerationService: PasswordGenerationServiceAbstraction;\n  passwordStrengthService: PasswordStrengthServiceAbstraction;\n  totpService: TotpServiceAbstraction;\n  autofillService: AutofillServiceAbstraction;\n  containerService: ContainerService;\n  auditService: AuditServiceAbstraction;\n  authService: AuthServiceAbstraction;\n  exportService: VaultExportServiceAbstraction;\n  searchService: SearchServiceAbstraction;\n  notificationsService: NotificationsServiceAbstraction;\n  stateService: StateServiceAbstraction;\n  systemService: SystemServiceAbstraction;\n  eventCollectionService: EventCollectionServiceAbstraction;\n  eventUploadService: EventUploadServiceAbstraction;\n  policyService: InternalPolicyServiceAbstraction;\n  sendService: InternalSendServiceAbstraction;\n  fileUploadService: FileUploadServiceAbstraction;\n  cipherFileUploadService: CipherFileUploadServiceAbstraction;\n  organizationService: InternalOrganizationServiceAbstraction;\n  providerService: ProviderServiceAbstraction;\n  keyConnectorService: KeyConnectorServiceAbstraction;\n  userVerificationService: UserVerificationServiceAbstraction;\n  twoFactorService: TwoFactorServiceAbstraction;\n  vaultFilterService: VaultFilterService;\n  usernameGenerationService: UsernameGenerationServiceAbstraction;\n  encryptService: EncryptService;\n  folderApiService: FolderApiServiceAbstraction;\n  policyApiService: PolicyApiServiceAbstraction;\n  sendApiService: SendApiServiceAbstraction;\n  userVerificationApiService: UserVerificationApiServiceAbstraction;\n  syncNotifierService: SyncNotifierServiceAbstraction;\n  avatarUpdateService: AvatarUpdateServiceAbstraction;\n  mainContextMenuHandler: MainContextMenuHandler;\n  cipherContextMenuHandler: CipherContextMenuHandler;\n  configService: BrowserConfigService;\n  configApiService: ConfigApiServiceAbstraction;\n  devicesApiService: DevicesApiServiceAbstraction;\n  devicesService: DevicesServiceAbstraction;\n  deviceTrustCryptoService: DeviceTrustCryptoServiceAbstraction;\n  authRequestCryptoService: AuthRequestCryptoServiceAbstraction;\n  browserPopoutWindowService: BrowserPopoutWindowService;\n\n  // Passed to the popup for Safari to workaround issues with theming, downloading, etc.\n  backgroundWindow = window;\n\n  onUpdatedRan: boolean;\n  onReplacedRan: boolean;\n  loginToAutoFill: CipherView = null;\n\n  private commandsBackground: CommandsBackground;\n  private contextMenusBackground: ContextMenusBackground;\n  private idleBackground: IdleBackground;\n  private notificationBackground: NotificationBackground;\n  private runtimeBackground: RuntimeBackground;\n  private tabsBackground: TabsBackground;\n  private webRequestBackground: WebRequestBackground;\n\n  private syncTimeout: any;\n  private isSafari: boolean;\n  private nativeMessagingBackground: NativeMessagingBackground;\n  popupOnlyContext: boolean;\n\n  constructor(public isPrivateMode: boolean = false) {\n    this.popupOnlyContext = isPrivateMode || BrowserApi.manifestVersion === 3;\n\n    // Services\n    const lockedCallback = async (userId?: string) => {\n      if (this.notificationsService != null) {\n        this.notificationsService.updateConnection(false);\n      }\n      await this.refreshBadge();\n      await this.refreshMenu(true);\n      if (this.systemService != null) {\n        await this.systemService.clearPendingClipboard();\n        await this.systemService.startProcessReload(this.authService);\n      }\n    };\n\n    const logoutCallback = async (expired: boolean, userId?: string) =>\n      await this.logout(expired, userId);\n\n    this.messagingService = this.popupOnlyContext\n      ? new BrowserMessagingPrivateModeBackgroundService()\n      : new BrowserMessagingService();\n    this.logService = new ConsoleLogService(false);\n    this.cryptoFunctionService = new WebCryptoFunctionService(window);\n    this.storageService = new BrowserLocalStorageService();\n    this.secureStorageService = new BrowserLocalStorageService();\n    this.memoryStorageService =\n      BrowserApi.manifestVersion === 3\n        ? new LocalBackedSessionStorageService(\n            new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, false),\n            new KeyGenerationService(this.cryptoFunctionService)\n          )\n        : new MemoryStorageService();\n    this.stateService = new BrowserStateService(\n      this.storageService,\n      this.secureStorageService,\n      this.memoryStorageService,\n      this.logService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.platformUtilsService = new BrowserPlatformUtilsService(\n      this.messagingService,\n      (clipboardValue, clearMs) => {\n        if (this.systemService != null) {\n          this.systemService.clearClipboard(clipboardValue, clearMs);\n        }\n      },\n      async () => {\n        if (this.nativeMessagingBackground != null) {\n          const promise = this.nativeMessagingBackground.getResponse();\n\n          try {\n            await this.nativeMessagingBackground.send({ command: \"biometricUnlock\" });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n\n          return promise.then((result) => result.response === \"unlocked\");\n        }\n      },\n      window\n    );\n    this.i18nService = new BrowserI18nService(BrowserApi.getUILanguage(window), this.stateService);\n    this.encryptService = flagEnabled(\"multithreadDecryption\")\n      ? new MultithreadEncryptServiceImplementation(\n          this.cryptoFunctionService,\n          this.logService,\n          true\n        )\n      : new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, true);\n    this.cryptoService = new BrowserCryptoService(\n      this.cryptoFunctionService,\n      this.encryptService,\n      this.platformUtilsService,\n      this.logService,\n      this.stateService\n    );\n    this.tokenService = new TokenService(this.stateService);\n    this.appIdService = new AppIdService(this.storageService);\n    this.environmentService = new BrowserEnvironmentService(this.stateService, this.logService);\n    this.apiService = new ApiService(\n      this.tokenService,\n      this.platformUtilsService,\n      this.environmentService,\n      this.appIdService,\n      (expired: boolean) => this.logout(expired)\n    );\n    this.settingsService = new BrowserSettingsService(this.stateService);\n    this.fileUploadService = new FileUploadService(this.logService);\n    this.cipherFileUploadService = new CipherFileUploadService(\n      this.apiService,\n      this.fileUploadService\n    );\n    this.searchService = new SearchService(this.logService, this.i18nService);\n\n    this.collectionService = new CollectionService(\n      this.cryptoService,\n      this.i18nService,\n      this.stateService\n    );\n    this.syncNotifierService = new SyncNotifierService();\n    this.organizationService = new BrowserOrganizationService(this.stateService);\n    this.policyService = new BrowserPolicyService(this.stateService, this.organizationService);\n    this.policyApiService = new PolicyApiService(\n      this.policyService,\n      this.apiService,\n      this.stateService\n    );\n    this.keyConnectorService = new KeyConnectorService(\n      this.stateService,\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.logService,\n      this.organizationService,\n      this.cryptoFunctionService,\n      logoutCallback\n    );\n\n    this.passwordStrengthService = new PasswordStrengthService();\n\n    this.passwordGenerationService = new PasswordGenerationService(\n      this.cryptoService,\n      this.policyService,\n      this.stateService\n    );\n\n    this.twoFactorService = new TwoFactorService(this.i18nService, this.platformUtilsService);\n\n    // eslint-disable-next-line\n    const that = this;\n    const backgroundMessagingService = new (class extends MessagingServiceAbstraction {\n      // AuthService should send the messages to the background not popup.\n      send = (subscriber: string, arg: any = {}) => {\n        const message = Object.assign({}, { command: subscriber }, arg);\n        that.runtimeBackground.processMessage(message, that as any, null);\n      };\n    })();\n\n    this.devicesApiService = new DevicesApiServiceImplementation(this.apiService);\n    this.deviceTrustCryptoService = new DeviceTrustCryptoService(\n      this.cryptoFunctionService,\n      this.cryptoService,\n      this.encryptService,\n      this.stateService,\n      this.appIdService,\n      this.devicesApiService,\n      this.i18nService,\n      this.platformUtilsService\n    );\n\n    this.devicesService = new DevicesServiceImplementation(this.devicesApiService);\n\n    this.authRequestCryptoService = new AuthRequestCryptoServiceImplementation(this.cryptoService);\n\n    this.authService = new AuthService(\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.appIdService,\n      this.platformUtilsService,\n      backgroundMessagingService,\n      this.logService,\n      this.keyConnectorService,\n      this.environmentService,\n      this.stateService,\n      this.twoFactorService,\n      this.i18nService,\n      this.encryptService,\n      this.passwordStrengthService,\n      this.policyService,\n      this.deviceTrustCryptoService,\n      this.authRequestCryptoService\n    );\n\n    this.userVerificationApiService = new UserVerificationApiService(this.apiService);\n\n    this.userVerificationService = new UserVerificationService(\n      this.stateService,\n      this.cryptoService,\n      this.i18nService,\n      this.userVerificationApiService\n    );\n\n    this.configApiService = new ConfigApiService(this.apiService, this.authService);\n\n    this.configService = new BrowserConfigService(\n      this.stateService,\n      this.configApiService,\n      this.authService,\n      this.environmentService,\n      this.logService,\n      true\n    );\n\n    this.cipherService = new CipherService(\n      this.cryptoService,\n      this.settingsService,\n      this.apiService,\n      this.i18nService,\n      this.searchService,\n      this.stateService,\n      this.encryptService,\n      this.cipherFileUploadService,\n      this.configService\n    );\n    this.folderService = new BrowserFolderService(\n      this.cryptoService,\n      this.i18nService,\n      this.cipherService,\n      this.stateService\n    );\n    this.folderApiService = new FolderApiService(this.folderService, this.apiService);\n\n    this.vaultTimeoutSettingsService = new VaultTimeoutSettingsService(\n      this.cryptoService,\n      this.tokenService,\n      this.policyService,\n      this.stateService,\n      this.userVerificationService\n    );\n\n    this.vaultFilterService = new VaultFilterService(\n      this.stateService,\n      this.organizationService,\n      this.folderService,\n      this.cipherService,\n      this.collectionService,\n      this.policyService\n    );\n\n    this.vaultTimeoutService = new VaultTimeoutService(\n      this.cipherService,\n      this.folderService,\n      this.collectionService,\n      this.cryptoService,\n      this.platformUtilsService,\n      this.messagingService,\n      this.searchService,\n      this.stateService,\n      this.authService,\n      this.vaultTimeoutSettingsService,\n      lockedCallback,\n      logoutCallback\n    );\n    this.containerService = new ContainerService(this.cryptoService, this.encryptService);\n    this.sendService = new BrowserSendService(\n      this.cryptoService,\n      this.i18nService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.sendApiService = new SendApiService(\n      this.apiService,\n      this.fileUploadService,\n      this.sendService\n    );\n    this.providerService = new ProviderService(this.stateService);\n    this.syncService = new SyncService(\n      this.apiService,\n      this.settingsService,\n      this.folderService,\n      this.cipherService,\n      this.cryptoService,\n      this.collectionService,\n      this.messagingService,\n      this.policyService,\n      this.sendService,\n      this.logService,\n      this.keyConnectorService,\n      this.stateService,\n      this.providerService,\n      this.folderApiService,\n      this.organizationService,\n      this.sendApiService,\n      logoutCallback\n    );\n    this.eventUploadService = new EventUploadService(\n      this.apiService,\n      this.stateService,\n      this.logService\n    );\n    this.eventCollectionService = new EventCollectionService(\n      this.cipherService,\n      this.stateService,\n      this.organizationService,\n      this.eventUploadService\n    );\n    this.totpService = new TotpService(this.cryptoFunctionService, this.logService);\n\n    this.autofillService = new AutofillService(\n      this.cipherService,\n      this.stateService,\n      this.totpService,\n      this.eventCollectionService,\n      this.logService,\n      this.settingsService,\n      this.userVerificationService\n    );\n    this.auditService = new AuditService(this.cryptoFunctionService, this.apiService);\n    this.exportService = new VaultExportService(\n      this.folderService,\n      this.cipherService,\n      this.apiService,\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.notificationsService = new NotificationsService(\n      this.syncService,\n      this.appIdService,\n      this.apiService,\n      this.environmentService,\n      logoutCallback,\n      this.logService,\n      this.stateService,\n      this.authService,\n      this.messagingService\n    );\n\n    this.browserPopoutWindowService = new BrowserPopoutWindowService();\n\n    const systemUtilsServiceReloadCallback = () => {\n      const forceWindowReload =\n        this.platformUtilsService.isSafari() ||\n        this.platformUtilsService.isFirefox() ||\n        this.platformUtilsService.isOpera();\n      BrowserApi.reloadExtension(forceWindowReload ? window : null);\n      return Promise.resolve();\n    };\n\n    this.systemService = new SystemService(\n      this.messagingService,\n      this.platformUtilsService,\n      systemUtilsServiceReloadCallback,\n      this.stateService\n    );\n\n    // Other fields\n    this.isSafari = this.platformUtilsService.isSafari();\n\n    // Background\n    this.runtimeBackground = new RuntimeBackground(\n      this,\n      this.autofillService,\n      this.platformUtilsService as BrowserPlatformUtilsService,\n      this.i18nService,\n      this.notificationsService,\n      this.systemService,\n      this.environmentService,\n      this.messagingService,\n      this.logService,\n      this.configService,\n      this.browserPopoutWindowService\n    );\n    this.nativeMessagingBackground = new NativeMessagingBackground(\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.runtimeBackground,\n      this.i18nService,\n      this.messagingService,\n      this.appIdService,\n      this.platformUtilsService,\n      this.stateService,\n      this.logService,\n      this.authService\n    );\n    this.commandsBackground = new CommandsBackground(\n      this,\n      this.passwordGenerationService,\n      this.platformUtilsService,\n      this.vaultTimeoutService,\n      this.authService\n    );\n    this.notificationBackground = new NotificationBackground(\n      this.autofillService,\n      this.cipherService,\n      this.authService,\n      this.policyService,\n      this.folderService,\n      this.stateService,\n      this.environmentService\n    );\n\n    this.tabsBackground = new TabsBackground(this, this.notificationBackground);\n    if (!this.popupOnlyContext) {\n      const contextMenuClickedHandler = new ContextMenuClickedHandler(\n        (options) => this.platformUtilsService.copyToClipboard(options.text, { window: self }),\n        async (_tab) => {\n          const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n          const password = await this.passwordGenerationService.generatePassword(options);\n          this.platformUtilsService.copyToClipboard(password, { window: window });\n          this.passwordGenerationService.addHistory(password);\n        },\n        async (tab, cipher) => {\n          this.loginToAutoFill = cipher;\n          if (tab == null) {\n            return;\n          }\n\n          BrowserApi.tabSendMessage(tab, {\n            command: \"collectPageDetails\",\n            tab: tab,\n            sender: \"contextMenu\",\n          });\n        },\n        this.authService,\n        this.cipherService,\n        this.totpService,\n        this.eventCollectionService,\n        this.userVerificationService\n      );\n\n      this.contextMenusBackground = new ContextMenusBackground(contextMenuClickedHandler);\n    }\n\n    this.idleBackground = new IdleBackground(\n      this.vaultTimeoutService,\n      this.stateService,\n      this.notificationsService\n    );\n    this.webRequestBackground = new WebRequestBackground(\n      this.platformUtilsService,\n      this.cipherService,\n      this.authService\n    );\n\n    this.usernameGenerationService = new UsernameGenerationService(\n      this.cryptoService,\n      this.stateService,\n      this.apiService\n    );\n\n    this.avatarUpdateService = new AvatarUpdateService(this.apiService, this.stateService);\n\n    if (!this.popupOnlyContext) {\n      this.mainContextMenuHandler = new MainContextMenuHandler(\n        this.stateService,\n        this.i18nService,\n        this.logService\n      );\n\n      this.cipherContextMenuHandler = new CipherContextMenuHandler(\n        this.mainContextMenuHandler,\n        this.authService,\n        this.cipherService\n      );\n    }\n  }\n\n  async bootstrap() {\n    this.containerService.attachToGlobal(window);\n\n    await this.stateService.init();\n\n    await this.vaultTimeoutService.init(true);\n    await (this.i18nService as BrowserI18nService).init();\n    await (this.eventUploadService as EventUploadService).init(true);\n    await this.runtimeBackground.init();\n    await this.notificationBackground.init();\n    await this.commandsBackground.init();\n\n    this.configService.init();\n    this.twoFactorService.init();\n\n    await this.tabsBackground.init();\n    if (!this.popupOnlyContext) {\n      this.contextMenusBackground?.init();\n    }\n    await this.idleBackground.init();\n    await this.webRequestBackground.init();\n\n    if (this.platformUtilsService.isFirefox() && !this.isPrivateMode) {\n      // Set Private Mode windows to the default icon - they do not share state with the background page\n      const privateWindows = await BrowserApi.getPrivateModeWindows();\n      privateWindows.forEach(async (win) => {\n        await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n      });\n\n      BrowserApi.onWindowCreated(async (win) => {\n        if (win.incognito) {\n          await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n        }\n      });\n    }\n\n    return new Promise<void>((resolve) => {\n      setTimeout(async () => {\n        await this.environmentService.setUrlsFromStorage();\n        // Workaround to ignore stateService.activeAccount until URLs are set\n        // TODO: Remove this when implementing ticket PM-2637\n        this.environmentService.initialized = true;\n        if (!this.isPrivateMode) {\n          await this.refreshBadge();\n        }\n        this.fullSync(true);\n        setTimeout(() => this.notificationsService.init(), 2500);\n        resolve();\n      }, 500);\n    });\n  }\n\n  async refreshBadge() {\n    await new UpdateBadge(self).run({ existingServices: this as any });\n  }\n\n  async refreshMenu(forLocked = false) {\n    if (!chrome.windows || !chrome.contextMenus) {\n      return;\n    }\n\n    await MainContextMenuHandler.removeAll();\n\n    if (forLocked) {\n      await this.mainContextMenuHandler?.noAccess();\n      this.onUpdatedRan = this.onReplacedRan = false;\n      return;\n    }\n\n    await this.mainContextMenuHandler?.init();\n\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (tab) {\n      await this.cipherContextMenuHandler?.update(tab.url);\n      this.onUpdatedRan = this.onReplacedRan = false;\n    }\n  }\n\n  async logout(expired: boolean, userId?: string) {\n    await this.eventUploadService.uploadEvents(userId);\n\n    await Promise.all([\n      this.syncService.setLastSync(new Date(0), userId),\n      this.cryptoService.clearKeys(userId),\n      this.settingsService.clear(userId),\n      this.cipherService.clear(userId),\n      this.folderService.clear(userId),\n      this.collectionService.clear(userId),\n      this.policyService.clear(userId),\n      this.passwordGenerationService.clear(userId),\n      this.vaultTimeoutSettingsService.clear(userId),\n      this.keyConnectorService.clear(),\n      this.vaultFilterService.clear(),\n    ]);\n\n    //Needs to be checked before state is cleaned\n    const needStorageReseed = await this.needsStorageReseed();\n\n    await this.stateService.clean({ userId: userId });\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      this.messagingService.send(\"doneLoggingOut\", { expired: expired, userId: userId });\n    }\n\n    if (needStorageReseed) {\n      await this.reseedStorage();\n    }\n\n    if (BrowserApi.manifestVersion === 3) {\n      BrowserApi.sendMessage(\"updateBadge\");\n    }\n    await this.refreshBadge();\n    await this.mainContextMenuHandler.noAccess();\n    this.notificationsService.updateConnection(false);\n    await this.systemService.clearPendingClipboard();\n    await this.systemService.startProcessReload(this.authService);\n  }\n\n  private async needsStorageReseed(): Promise<boolean> {\n    const currentVaultTimeout = await this.stateService.getVaultTimeout();\n    return currentVaultTimeout == null ? false : true;\n  }\n\n  async collectPageDetailsForContentScript(tab: any, sender: string, frameId: number = null) {\n    if (tab == null || !tab.id) {\n      return;\n    }\n\n    const options: any = {};\n    if (frameId != null) {\n      options.frameId = frameId;\n    }\n\n    BrowserApi.tabSendMessage(\n      tab,\n      {\n        command: \"collectPageDetails\",\n        tab: tab,\n        sender: sender,\n      },\n      options\n    );\n  }\n\n  async openPopup() {\n    // Chrome APIs cannot open popup\n\n    // TODO: Do we need to open this popup?\n    if (!this.isSafari) {\n      return;\n    }\n    await SafariApp.sendMessageToApp(\"showPopover\", null, true);\n  }\n\n  async reseedStorage() {\n    if (\n      !this.platformUtilsService.isChrome() &&\n      !this.platformUtilsService.isVivaldi() &&\n      !this.platformUtilsService.isOpera()\n    ) {\n      return;\n    }\n\n    const getStorage = (): Promise<any> =>\n      new Promise((resolve) => {\n        chrome.storage.local.get(null, (o: any) => resolve(o));\n      });\n\n    const clearStorage = (): Promise<void> =>\n      new Promise((resolve) => {\n        chrome.storage.local.clear(() => resolve());\n      });\n\n    const storage = await getStorage();\n    await clearStorage();\n\n    for (const key in storage) {\n      // eslint-disable-next-line\n      if (!storage.hasOwnProperty(key)) {\n        continue;\n      }\n      await this.storageService.save(key, storage[key]);\n    }\n  }\n\n  private async fullSync(override = false) {\n    const syncInternal = 6 * 60 * 60 * 1000; // 6 hours\n    const lastSync = await this.syncService.getLastSync();\n\n    let lastSyncAgo = syncInternal + 1;\n    if (lastSync != null) {\n      lastSyncAgo = new Date().getTime() - lastSync.getTime();\n    }\n\n    if (override || lastSyncAgo >= syncInternal) {\n      await this.syncService.fullSync(override);\n      this.scheduleNextSync();\n    } else {\n      this.scheduleNextSync();\n    }\n  }\n\n  private scheduleNextSync() {\n    if (this.syncTimeout) {\n      clearTimeout(this.syncTimeout);\n    }\n\n    this.syncTimeout = setTimeout(async () => await this.fullSync(), 5 * 60 * 1000); // check every 5 minutes\n  }\n}\n","import { FileDownloadRequest } from \"./file-download.request\";\n\nexport class FileDownloadBuilder {\n  get blobOptions(): any {\n    const options = this._request.blobOptions ?? {};\n    if (options.type == null) {\n      options.type = this.fileType;\n    }\n    return options;\n  }\n\n  get blob(): Blob {\n    if (this.blobOptions != null) {\n      return new Blob([this._request.blobData], this.blobOptions);\n    } else {\n      return new Blob([this._request.blobData]);\n    }\n  }\n\n  get downloadMethod(): \"save\" | \"open\" {\n    if (this._request.downloadMethod != null) {\n      return this._request.downloadMethod;\n    }\n    return this.fileType != \"application/pdf\" ? \"save\" : \"open\";\n  }\n\n  private get fileType() {\n    const fileNameLower = this._request.fileName.toLowerCase();\n    if (fileNameLower.endsWith(\".pdf\")) {\n      return \"application/pdf\";\n    } else if (fileNameLower.endsWith(\".xlsx\")) {\n      return \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\n    } else if (fileNameLower.endsWith(\".docx\")) {\n      return \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n    } else if (fileNameLower.endsWith(\".pptx\")) {\n      return \"application/vnd.openxmlformats-officedocument.presentationml.presentation\";\n    } else if (fileNameLower.endsWith(\".csv\")) {\n      return \"text/csv\";\n    } else if (fileNameLower.endsWith(\".png\")) {\n      return \"image/png\";\n    } else if (fileNameLower.endsWith(\".jpg\") || fileNameLower.endsWith(\".jpeg\")) {\n      return \"image/jpeg\";\n    } else if (fileNameLower.endsWith(\".gif\")) {\n      return \"image/gif\";\n    }\n    return null;\n  }\n\n  constructor(private readonly _request: FileDownloadRequest) {}\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { FileDownloadBuilder } from \"@bitwarden/common/platform/abstractions/file-download/file-download.builder\";\nimport { FileDownloadRequest } from \"@bitwarden/common/platform/abstractions/file-download/file-download.request\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\nimport { BrowserApi } from \"../browser/browser-api\";\n\n@Injectable()\nexport class BrowserFileDownloadService implements FileDownloadService {\n  download(request: FileDownloadRequest): void {\n    const builder = new FileDownloadBuilder(request);\n    if (BrowserApi.isSafariApi) {\n      let data: BlobPart = null;\n      if (builder.blobOptions.type === \"text/plain\" && typeof request.blobData === \"string\") {\n        data = request.blobData;\n      } else {\n        data = Utils.fromBufferToB64(request.blobData as ArrayBuffer);\n      }\n      SafariApp.sendMessageToApp(\n        \"downloadFile\",\n        JSON.stringify({\n          blobData: data,\n          blobOptions: request.blobOptions,\n          fileName: request.fileName,\n        }),\n        true\n      );\n    } else {\n      const a = window.document.createElement(\"a\");\n      a.href = URL.createObjectURL(builder.blob);\n      a.download = request.fileName;\n      window.document.body.appendChild(a);\n      a.click();\n      window.document.body.removeChild(a);\n    }\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModePopupService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenBackgroundMessageListener(message);\n  }\n}\n","import { Component } from \"@angular/core\";\n\nimport { PasswordRepromptComponent as BasePasswordRepromptComponent } from \"@bitwarden/angular/vault/components/password-reprompt.component\";\n\n@Component({\n  templateUrl: \"password-reprompt.component.html\",\n})\nexport class PasswordRepromptComponent extends BasePasswordRepromptComponent {}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\">\n      <div class=\"modal-body\">\n        <div class=\"box\">\n          <h1 class=\"box-header\">{{ \"passwordConfirmation\" | i18n }}</h1>\n          <div class=\"box-content\">\n            <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n              <div class=\"row-main\">\n                <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n                <input\n                  id=\"masterPassword\"\n                  type=\"{{ showPassword ? 'text' : 'password' }}\"\n                  name=\"MasterPassword\"\n                  aria-describedby=\"masterPasswordHelp\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPassword\"\n                  required\n                  appAutofocus\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword()\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div id=\"masterPasswordHelp\" class=\"box-footer\">\n            {{ \"passwordConfirmationDesc\" | i18n }}\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\">\n          <span>{{ \"ok\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Injectable } from \"@angular/core\";\n\nimport { PasswordRepromptService as BasePasswordRepromptService } from \"@bitwarden/angular/vault/services/password-reprompt.service\";\n\nimport { PasswordRepromptComponent } from \"../components/password-reprompt.component\";\n\n@Injectable()\nexport class PasswordRepromptService extends BasePasswordRepromptService {\n  component = PasswordRepromptComponent;\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { ConfigService } from \"@bitwarden/common/platform/services/config/config.service\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"../../platform/services/abstractions/browser-state.service\";\n\nimport { PopupUtilsService } from \"./popup-utils.service\";\n\n@Injectable()\nexport class InitService {\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private popupUtilsService: PopupUtilsService,\n    private stateService: StateServiceAbstraction,\n    private logService: LogServiceAbstraction,\n    private themingService: AbstractThemingService,\n    private configService: ConfigService\n  ) {}\n\n  init() {\n    return async () => {\n      await this.stateService.init();\n\n      if (!this.popupUtilsService.inPopup(window)) {\n        window.document.body.classList.add(\"body-full\");\n      } else if (window.screen.availHeight < 600) {\n        window.document.body.classList.add(\"body-xs\");\n      } else if (window.screen.availHeight <= 800) {\n        window.document.body.classList.add(\"body-sm\");\n      }\n\n      const htmlEl = window.document.documentElement;\n      await this.themingService.monitorThemeChanges();\n      htmlEl.classList.add(\"locale_\" + this.i18nService.translationLocale);\n\n      // Workaround for slow performance on external monitors on Chrome + MacOS\n      // See: https://bugs.chromium.org/p/chromium/issues/detail?id=971701#c64\n      if (\n        this.platformUtilsService.isChrome() &&\n        navigator.platform.indexOf(\"Mac\") > -1 &&\n        this.popupUtilsService.inPopup(window) &&\n        (window.screenLeft < 0 ||\n          window.screenTop < 0 ||\n          window.screenLeft > window.screen.width ||\n          window.screenTop > window.screen.height)\n      ) {\n        htmlEl.classList.add(\"force_redraw\");\n        this.logService.info(\"Force redraw is on\");\n      }\n\n      this.configService.init();\n    };\n  }\n}\n","import { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\n\nexport class PopupSearchService extends SearchService {\n  constructor(\n    private mainSearchService: SearchService,\n    consoleLogService: ConsoleLogService,\n    i18nService: I18nService\n  ) {\n    super(consoleLogService, i18nService);\n  }\n\n  clearIndex() {\n    throw new Error(\"Not available.\");\n  }\n\n  indexCiphers(): Promise<void> {\n    throw new Error(\"Not available.\");\n  }\n\n  getIndexForSearch() {\n    return this.mainSearchService.getIndexForSearch();\n  }\n}\n","import { APP_INITIALIZER, LOCALE_ID, NgModule } from \"@angular/core\";\n\nimport { UnauthGuard as BaseUnauthGuardService } from \"@bitwarden/angular/auth/guards\";\nimport { MEMORY_STORAGE, SECURE_STORAGE } from \"@bitwarden/angular/services/injection-tokens\";\nimport { JslibServicesModule } from \"@bitwarden/angular/services/jslib-services.module\";\nimport { ThemingService } from \"@bitwarden/angular/services/theming/theming.service\";\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { DevicesServiceAbstraction } from \"@bitwarden/common/abstractions/devices/devices.service.abstraction\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout-settings.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vault-timeout/vault-timeout.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport {\n  InternalPolicyService,\n  PolicyService,\n} from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { AuthRequestCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth-request-crypto.service.abstraction\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { DeviceTrustCryptoServiceAbstraction } from \"@bitwarden/common/auth/abstractions/device-trust-crypto.service.abstraction\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { LoginService as LoginServiceAbstraction } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/services/login.service\";\nimport { AppIdService } from \"@bitwarden/common/platform/abstractions/app-id.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config-api.service.abstraction\";\nimport { CryptoFunctionService } from \"@bitwarden/common/platform/abstractions/crypto-function.service\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/platform/abstractions/encrypt.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { FileUploadService } from \"@bitwarden/common/platform/abstractions/file-upload/file-upload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport {\n  LogService,\n  LogService as LogServiceAbstraction,\n} from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport {\n  StateService as BaseStateServiceAbstraction,\n  StateService,\n} from \"@bitwarden/common/platform/abstractions/state.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/platform/abstractions/storage.service\";\nimport { StateFactory } from \"@bitwarden/common/platform/factories/state-factory\";\nimport { GlobalState } from \"@bitwarden/common/platform/models/domain/global-state\";\nimport { ConfigService } from \"@bitwarden/common/platform/services/config/config.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/platform/services/console-log.service\";\nimport { ContainerService } from \"@bitwarden/common/platform/services/container.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { UsernameGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/username\";\nimport { PasswordStrengthServiceAbstraction } from \"@bitwarden/common/tools/password-strength\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport {\n  InternalSendService as InternalSendServiceAbstraction,\n  SendService,\n} from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport {\n  FolderService,\n  InternalFolderService,\n} from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { DialogService } from \"@bitwarden/components\";\nimport { VaultExportServiceAbstraction } from \"@bitwarden/exporter/vault-export\";\n\nimport { BrowserOrganizationService } from \"../../admin-console/services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../../admin-console/services/browser-policy.service\";\nimport { UnauthGuardService } from \"../../auth/popup/services\";\nimport { AutofillService } from \"../../autofill/services/abstractions/autofill.service\";\nimport MainBackground from \"../../background/main.background\";\nimport { Account } from \"../../models/account\";\nimport { BrowserApi } from \"../../platform/browser/browser-api\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../../platform/services/abstractions/browser-state.service\";\nimport { BrowserConfigService } from \"../../platform/services/browser-config.service\";\nimport { BrowserEnvironmentService } from \"../../platform/services/browser-environment.service\";\nimport { BrowserFileDownloadService } from \"../../platform/services/browser-file-download.service\";\nimport { BrowserI18nService } from \"../../platform/services/browser-i18n.service\";\nimport BrowserMessagingPrivateModePopupService from \"../../platform/services/browser-messaging-private-mode-popup.service\";\nimport BrowserMessagingService from \"../../platform/services/browser-messaging.service\";\nimport { BrowserStateService } from \"../../platform/services/browser-state.service\";\nimport { BrowserSendService } from \"../../services/browser-send.service\";\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\nimport { PasswordRepromptService } from \"../../vault/popup/services/password-reprompt.service\";\nimport { BrowserFolderService } from \"../../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../../vault/services/vault-filter.service\";\n\nimport { DebounceNavigationService } from \"./debounceNavigationService\";\nimport { InitService } from \"./init.service\";\nimport { PopupSearchService } from \"./popup-search.service\";\nimport { PopupUtilsService } from \"./popup-utils.service\";\n\nconst needsBackgroundInit = BrowserApi.getBackgroundPage() == null;\nconst isPrivateMode = needsBackgroundInit && BrowserApi.manifestVersion !== 3;\nconst mainBackground: MainBackground = needsBackgroundInit\n  ? createLocalBgService()\n  : BrowserApi.getBackgroundPage().bitwardenMain;\n\nfunction createLocalBgService() {\n  const localBgService = new MainBackground(isPrivateMode);\n  localBgService.bootstrap();\n  return localBgService;\n}\n\nfunction getBgService<T>(service: keyof MainBackground) {\n  return (): T => {\n    return mainBackground ? (mainBackground[service] as any as T) : null;\n  };\n}\n\n@NgModule({\n  imports: [JslibServicesModule],\n  declarations: [],\n  providers: [\n    InitService,\n    DebounceNavigationService,\n    DialogService,\n    {\n      provide: LOCALE_ID,\n      useFactory: () => getBgService<I18nServiceAbstraction>(\"i18nService\")().translationLocale,\n      deps: [],\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: (initService: InitService) => initService.init(),\n      deps: [InitService],\n      multi: true,\n    },\n    { provide: BaseUnauthGuardService, useClass: UnauthGuardService },\n    { provide: PopupUtilsService, useFactory: () => new PopupUtilsService(isPrivateMode) },\n    {\n      provide: MessagingService,\n      useFactory: () => {\n        return needsBackgroundInit\n          ? new BrowserMessagingPrivateModePopupService()\n          : new BrowserMessagingService();\n      },\n    },\n    {\n      provide: TwoFactorService,\n      useFactory: getBgService<TwoFactorService>(\"twoFactorService\"),\n      deps: [],\n    },\n    {\n      provide: AuthServiceAbstraction,\n      useFactory: getBgService<AuthService>(\"authService\"),\n      deps: [],\n    },\n    {\n      provide: SearchServiceAbstraction,\n      useFactory: (logService: ConsoleLogService, i18nService: I18nServiceAbstraction) => {\n        return new PopupSearchService(\n          getBgService<SearchService>(\"searchService\")(),\n          logService,\n          i18nService\n        );\n      },\n      deps: [LogServiceAbstraction, I18nServiceAbstraction],\n    },\n    { provide: AuditService, useFactory: getBgService<AuditService>(\"auditService\"), deps: [] },\n    {\n      provide: CipherFileUploadService,\n      useFactory: getBgService<CipherFileUploadService>(\"cipherFileUploadService\"),\n      deps: [],\n    },\n    { provide: CipherService, useFactory: getBgService<CipherService>(\"cipherService\"), deps: [] },\n    {\n      provide: CryptoFunctionService,\n      useFactory: getBgService<CryptoFunctionService>(\"cryptoFunctionService\"),\n      deps: [],\n    },\n    {\n      provide: FileUploadService,\n      useFactory: getBgService<FileUploadService>(\"fileUploadService\"),\n    },\n    {\n      provide: FolderService,\n      useFactory: (\n        cryptoService: CryptoService,\n        i18nService: I18nServiceAbstraction,\n        cipherService: CipherService,\n        stateService: StateServiceAbstraction\n      ) => {\n        return new BrowserFolderService(cryptoService, i18nService, cipherService, stateService);\n      },\n      deps: [CryptoService, I18nServiceAbstraction, CipherService, StateServiceAbstraction],\n    },\n    {\n      provide: InternalFolderService,\n      useExisting: FolderService,\n    },\n    {\n      provide: FolderApiServiceAbstraction,\n      useFactory: (folderService: InternalFolderService, apiService: ApiService) => {\n        return new FolderApiService(folderService, apiService);\n      },\n      deps: [InternalFolderService, ApiService],\n    },\n    {\n      provide: CollectionService,\n      useFactory: getBgService<CollectionService>(\"collectionService\"),\n      deps: [],\n    },\n    {\n      provide: LogServiceAbstraction,\n      useFactory: getBgService<ConsoleLogService>(\"logService\"),\n      deps: [],\n    },\n    {\n      provide: BrowserEnvironmentService,\n      useExisting: EnvironmentService,\n    },\n    {\n      provide: EnvironmentService,\n      useFactory: getBgService<EnvironmentService>(\"environmentService\"),\n      deps: [],\n    },\n    { provide: TotpService, useFactory: getBgService<TotpService>(\"totpService\"), deps: [] },\n    { provide: TokenService, useFactory: getBgService<TokenService>(\"tokenService\"), deps: [] },\n    {\n      provide: I18nServiceAbstraction,\n      useFactory: (stateService: BrowserStateService) => {\n        return new BrowserI18nService(BrowserApi.getUILanguage(window), stateService);\n      },\n      deps: [StateService],\n    },\n    {\n      provide: CryptoService,\n      useFactory: (encryptService: EncryptService) => {\n        const cryptoService = getBgService<CryptoService>(\"cryptoService\")();\n        new ContainerService(cryptoService, encryptService).attachToGlobal(self);\n        return cryptoService;\n      },\n      deps: [EncryptService],\n    },\n    {\n      provide: AuthRequestCryptoServiceAbstraction,\n      useFactory: getBgService<AuthRequestCryptoServiceAbstraction>(\"authRequestCryptoService\"),\n      deps: [],\n    },\n    {\n      provide: DeviceTrustCryptoServiceAbstraction,\n      useFactory: getBgService<DeviceTrustCryptoServiceAbstraction>(\"deviceTrustCryptoService\"),\n      deps: [],\n    },\n    {\n      provide: DevicesServiceAbstraction,\n      useFactory: getBgService<DevicesServiceAbstraction>(\"devicesService\"),\n      deps: [],\n    },\n    {\n      provide: EventUploadService,\n      useFactory: getBgService<EventUploadService>(\"eventUploadService\"),\n      deps: [],\n    },\n    {\n      provide: EventCollectionService,\n      useFactory: getBgService<EventCollectionService>(\"eventCollectionService\"),\n      deps: [],\n    },\n    {\n      provide: PolicyService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        organizationService: OrganizationService\n      ) => {\n        return new BrowserPolicyService(stateService, organizationService);\n      },\n      deps: [StateServiceAbstraction, OrganizationService],\n    },\n    {\n      provide: PolicyApiServiceAbstraction,\n      useFactory: (\n        policyService: InternalPolicyService,\n        apiService: ApiService,\n        stateService: StateService\n      ) => {\n        return new PolicyApiService(policyService, apiService, stateService);\n      },\n      deps: [InternalPolicyService, ApiService, StateService],\n    },\n    {\n      provide: PlatformUtilsService,\n      useFactory: getBgService<PlatformUtilsService>(\"platformUtilsService\"),\n      deps: [],\n    },\n    {\n      provide: PasswordStrengthServiceAbstraction,\n      useFactory: getBgService<PasswordStrengthServiceAbstraction>(\"passwordStrengthService\"),\n      deps: [],\n    },\n    {\n      provide: PasswordGenerationServiceAbstraction,\n      useFactory: getBgService<PasswordGenerationServiceAbstraction>(\"passwordGenerationService\"),\n      deps: [],\n    },\n    { provide: ApiService, useFactory: getBgService<ApiService>(\"apiService\"), deps: [] },\n    {\n      provide: SendService,\n      useFactory: (\n        cryptoService: CryptoService,\n        i18nService: I18nServiceAbstraction,\n        cryptoFunctionService: CryptoFunctionService,\n        stateServiceAbstraction: StateServiceAbstraction\n      ) => {\n        return new BrowserSendService(\n          cryptoService,\n          i18nService,\n          cryptoFunctionService,\n          stateServiceAbstraction\n        );\n      },\n      deps: [CryptoService, I18nServiceAbstraction, CryptoFunctionService, StateServiceAbstraction],\n    },\n    {\n      provide: InternalSendServiceAbstraction,\n      useExisting: SendService,\n    },\n    {\n      provide: SendApiServiceAbstraction,\n      useFactory: (\n        apiService: ApiService,\n        fileUploadService: FileUploadService,\n        sendService: InternalSendServiceAbstraction\n      ) => {\n        return new SendApiService(apiService, fileUploadService, sendService);\n      },\n      deps: [ApiService, FileUploadService, InternalSendServiceAbstraction],\n    },\n    { provide: SyncService, useFactory: getBgService<SyncService>(\"syncService\"), deps: [] },\n    {\n      provide: SettingsService,\n      useFactory: (stateService: StateServiceAbstraction) => {\n        return new BrowserSettingsService(stateService);\n      },\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: AbstractStorageService,\n      useFactory: getBgService<AbstractStorageService>(\"storageService\"),\n      deps: [],\n    },\n    { provide: AppIdService, useFactory: getBgService<AppIdService>(\"appIdService\"), deps: [] },\n    {\n      provide: AutofillService,\n      useFactory: getBgService<AutofillService>(\"autofillService\"),\n      deps: [],\n    },\n    {\n      provide: VaultExportServiceAbstraction,\n      useFactory: getBgService<VaultExportServiceAbstraction>(\"exportService\"),\n      deps: [],\n    },\n    {\n      provide: KeyConnectorService,\n      useFactory: getBgService<KeyConnectorService>(\"keyConnectorService\"),\n      deps: [],\n    },\n    {\n      provide: UserVerificationService,\n      useFactory: getBgService<UserVerificationService>(\"userVerificationService\"),\n      deps: [],\n    },\n    {\n      provide: VaultTimeoutSettingsService,\n      useFactory: getBgService<VaultTimeoutSettingsService>(\"vaultTimeoutSettingsService\"),\n      deps: [],\n    },\n    {\n      provide: VaultTimeoutService,\n      useFactory: getBgService<VaultTimeoutService>(\"vaultTimeoutService\"),\n      deps: [],\n    },\n    {\n      provide: NotificationsService,\n      useFactory: getBgService<NotificationsService>(\"notificationsService\"),\n      deps: [],\n    },\n    {\n      provide: LogServiceAbstraction,\n      useFactory: getBgService<ConsoleLogService>(\"logService\"),\n      deps: [],\n    },\n    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },\n    {\n      provide: OrganizationService,\n      useFactory: (stateService: StateServiceAbstraction) => {\n        return new BrowserOrganizationService(stateService);\n      },\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: VaultFilterService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        organizationService: OrganizationService,\n        folderService: FolderService,\n        policyService: PolicyService\n      ) => {\n        return new VaultFilterService(\n          stateService,\n          organizationService,\n          folderService,\n          getBgService<CipherService>(\"cipherService\")(),\n          getBgService<CollectionService>(\"collectionService\")(),\n          policyService\n        );\n      },\n      deps: [StateServiceAbstraction, OrganizationService, FolderService, PolicyService],\n    },\n    {\n      provide: ProviderService,\n      useFactory: getBgService<ProviderService>(\"providerService\"),\n      deps: [],\n    },\n    {\n      provide: SECURE_STORAGE,\n      useFactory: getBgService<AbstractStorageService>(\"secureStorageService\"),\n      deps: [],\n    },\n    {\n      provide: MEMORY_STORAGE,\n      useFactory: getBgService<AbstractStorageService>(\"memoryStorageService\"),\n    },\n    {\n      provide: StateServiceAbstraction,\n      useFactory: (\n        storageService: AbstractStorageService,\n        secureStorageService: AbstractStorageService,\n        memoryStorageService: AbstractMemoryStorageService,\n        logService: LogServiceAbstraction\n      ) => {\n        return new BrowserStateService(\n          storageService,\n          secureStorageService,\n          memoryStorageService,\n          logService,\n          new StateFactory(GlobalState, Account)\n        );\n      },\n      deps: [AbstractStorageService, SECURE_STORAGE, MEMORY_STORAGE, LogServiceAbstraction],\n    },\n    {\n      provide: UsernameGenerationServiceAbstraction,\n      useFactory: getBgService<UsernameGenerationServiceAbstraction>(\"usernameGenerationService\"),\n      deps: [],\n    },\n    {\n      provide: BaseStateServiceAbstraction,\n      useExisting: StateServiceAbstraction,\n      deps: [],\n    },\n    {\n      provide: FileDownloadService,\n      useClass: BrowserFileDownloadService,\n    },\n    {\n      provide: LoginServiceAbstraction,\n      useClass: LoginService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: AbstractThemingService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        platformUtilsService: PlatformUtilsService\n      ) => {\n        return new ThemingService(\n          stateService,\n          // Safari doesn't properly handle the (prefers-color-scheme) media query in the popup window, it always returns light.\n          // In Safari we have to use the background page instead, which comes with limitations like not dynamically changing the extension theme when the system theme is changed.\n          platformUtilsService.isSafari() ? getBgService<Window>(\"backgroundWindow\")() : window,\n          document\n        );\n      },\n      deps: [StateServiceAbstraction, PlatformUtilsService],\n    },\n    {\n      provide: ConfigService,\n      useClass: BrowserConfigService,\n      deps: [\n        StateServiceAbstraction,\n        ConfigApiServiceAbstraction,\n        AuthServiceAbstraction,\n        EnvironmentService,\n        LogService,\n      ],\n    },\n  ],\n})\nexport class ServicesModule {}\n","import { registerLocaleData } from \"@angular/common\";\nimport localeAr from \"@angular/common/locales/ar\";\nimport localeAz from \"@angular/common/locales/az\";\nimport localeBe from \"@angular/common/locales/be\";\nimport localeBg from \"@angular/common/locales/bg\";\nimport localeBn from \"@angular/common/locales/bn\";\nimport localeBs from \"@angular/common/locales/bs\";\nimport localeCa from \"@angular/common/locales/ca\";\nimport localeCs from \"@angular/common/locales/cs\";\nimport localeDa from \"@angular/common/locales/da\";\nimport localeDe from \"@angular/common/locales/de\";\nimport localeEl from \"@angular/common/locales/el\";\nimport localeEnGb from \"@angular/common/locales/en-GB\";\nimport localeEnIn from \"@angular/common/locales/en-IN\";\nimport localeEs from \"@angular/common/locales/es\";\nimport localeEt from \"@angular/common/locales/et\";\nimport localeEu from \"@angular/common/locales/eu\";\nimport localeFa from \"@angular/common/locales/fa\";\nimport localeFi from \"@angular/common/locales/fi\";\nimport localeFil from \"@angular/common/locales/fil\";\nimport localeFr from \"@angular/common/locales/fr\";\nimport localeHe from \"@angular/common/locales/he\";\nimport localeHi from \"@angular/common/locales/hi\";\nimport localeHr from \"@angular/common/locales/hr\";\nimport localeHu from \"@angular/common/locales/hu\";\nimport localeId from \"@angular/common/locales/id\";\nimport localeIt from \"@angular/common/locales/it\";\nimport localeJa from \"@angular/common/locales/ja\";\nimport localeKa from \"@angular/common/locales/ka\";\nimport localeKm from \"@angular/common/locales/km\";\nimport localeKn from \"@angular/common/locales/kn\";\nimport localeKo from \"@angular/common/locales/ko\";\nimport localeLt from \"@angular/common/locales/lt\";\nimport localeLv from \"@angular/common/locales/lv\";\nimport localeMl from \"@angular/common/locales/ml\";\nimport localeNb from \"@angular/common/locales/nb\";\nimport localeNl from \"@angular/common/locales/nl\";\nimport localeNn from \"@angular/common/locales/nn\";\nimport localePl from \"@angular/common/locales/pl\";\nimport localePtBr from \"@angular/common/locales/pt\";\nimport localePtPt from \"@angular/common/locales/pt-PT\";\nimport localeRo from \"@angular/common/locales/ro\";\nimport localeRu from \"@angular/common/locales/ru\";\nimport localeSi from \"@angular/common/locales/si\";\nimport localeSk from \"@angular/common/locales/sk\";\nimport localeSl from \"@angular/common/locales/sl\";\nimport localeSr from \"@angular/common/locales/sr\";\nimport localeSv from \"@angular/common/locales/sv\";\nimport localeTh from \"@angular/common/locales/th\";\nimport localeTr from \"@angular/common/locales/tr\";\nimport localeUk from \"@angular/common/locales/uk\";\nimport localeVi from \"@angular/common/locales/vi\";\nimport localeZhCn from \"@angular/common/locales/zh-Hans\";\nimport localeZhTw from \"@angular/common/locales/zh-Hant\";\n\nregisterLocaleData(localeAr, \"ar\");\nregisterLocaleData(localeAz, \"az\");\nregisterLocaleData(localeBe, \"be\");\nregisterLocaleData(localeBg, \"bg\");\nregisterLocaleData(localeBn, \"bn\");\nregisterLocaleData(localeBs, \"bs\");\nregisterLocaleData(localeCa, \"ca\");\nregisterLocaleData(localeCs, \"cs\");\nregisterLocaleData(localeDa, \"da\");\nregisterLocaleData(localeDe, \"de\");\nregisterLocaleData(localeEl, \"el\");\nregisterLocaleData(localeEnGb, \"en-GB\");\nregisterLocaleData(localeEnIn, \"en-IN\");\nregisterLocaleData(localeEs, \"es\");\nregisterLocaleData(localeEt, \"et\");\nregisterLocaleData(localeEu, \"eu\");\nregisterLocaleData(localeFa, \"fa\");\nregisterLocaleData(localeFi, \"fi\");\nregisterLocaleData(localeFil, \"fil\");\nregisterLocaleData(localeFr, \"fr\");\nregisterLocaleData(localeHe, \"he\");\nregisterLocaleData(localeHi, \"hi\");\nregisterLocaleData(localeHr, \"hr\");\nregisterLocaleData(localeHu, \"hu\");\nregisterLocaleData(localeId, \"id\");\nregisterLocaleData(localeIt, \"it\");\nregisterLocaleData(localeJa, \"ja\");\nregisterLocaleData(localeKa, \"ka\");\nregisterLocaleData(localeKm, \"km\");\nregisterLocaleData(localeKn, \"kn\");\nregisterLocaleData(localeKo, \"ko\");\nregisterLocaleData(localeLt, \"lt\");\nregisterLocaleData(localeLv, \"lv\");\nregisterLocaleData(localeMl, \"ml\");\nregisterLocaleData(localeNb, \"nb\");\nregisterLocaleData(localeNl, \"nl\");\nregisterLocaleData(localeNn, \"nn\");\nregisterLocaleData(localePl, \"pl\");\nregisterLocaleData(localePtBr, \"pt-BR\");\nregisterLocaleData(localePtPt, \"pt-PT\");\nregisterLocaleData(localeRo, \"ro\");\nregisterLocaleData(localeRu, \"ru\");\nregisterLocaleData(localeSi, \"si\");\nregisterLocaleData(localeSk, \"sk\");\nregisterLocaleData(localeSl, \"sl\");\nregisterLocaleData(localeSr, \"sr\");\nregisterLocaleData(localeSv, \"sv\");\nregisterLocaleData(localeTh, \"th\");\nregisterLocaleData(localeTr, \"tr\");\nregisterLocaleData(localeUk, \"uk\");\nregisterLocaleData(localeVi, \"vi\");\nregisterLocaleData(localeZhCn, \"zh-CN\");\nregisterLocaleData(localeZhTw, \"zh-TW\");\n","import { A11yModule } from \"@angular/cdk/a11y\";\nimport { DialogModule } from \"@angular/cdk/dialog\";\nimport { DragDropModule } from \"@angular/cdk/drag-drop\";\nimport { LayoutModule } from \"@angular/cdk/layout\";\nimport { OverlayModule } from \"@angular/cdk/overlay\";\nimport { ScrollingModule } from \"@angular/cdk/scrolling\";\nimport { CurrencyPipe, DatePipe } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\n\nimport { EnvironmentSelectorComponent } from \"@bitwarden/angular/auth/components/environment-selector.component\";\nimport { BitwardenToastModule } from \"@bitwarden/angular/components/toastr.component\";\nimport { JslibModule } from \"@bitwarden/angular/jslib.module\";\nimport { ColorPasswordCountPipe } from \"@bitwarden/angular/pipes/color-password-count.pipe\";\nimport { ColorPasswordPipe } from \"@bitwarden/angular/pipes/color-password.pipe\";\n\nimport { EnvironmentComponent } from \"../auth/popup/environment.component\";\nimport { HintComponent } from \"../auth/popup/hint.component\";\nimport { HomeComponent } from \"../auth/popup/home.component\";\nimport { LockComponent } from \"../auth/popup/lock.component\";\nimport { LoginDecryptionOptionsComponent } from \"../auth/popup/login-decryption-options/login-decryption-options.component\";\nimport { LoginWithDeviceComponent } from \"../auth/popup/login-with-device.component\";\nimport { LoginComponent } from \"../auth/popup/login.component\";\nimport { RegisterComponent } from \"../auth/popup/register.component\";\nimport { RemovePasswordComponent } from \"../auth/popup/remove-password.component\";\nimport { SetPasswordComponent } from \"../auth/popup/set-password.component\";\nimport { SsoComponent } from \"../auth/popup/sso.component\";\nimport { TwoFactorOptionsComponent } from \"../auth/popup/two-factor-options.component\";\nimport { TwoFactorComponent } from \"../auth/popup/two-factor.component\";\nimport { UpdateTempPasswordComponent } from \"../auth/popup/update-temp-password.component\";\nimport { GeneratorComponent } from \"../tools/popup/generator/generator.component\";\nimport { PasswordGeneratorHistoryComponent } from \"../tools/popup/generator/password-generator-history.component\";\nimport { SendListComponent } from \"../tools/popup/send/components/send-list.component\";\nimport { SendAddEditComponent } from \"../tools/popup/send/send-add-edit.component\";\nimport { SendGroupingsComponent } from \"../tools/popup/send/send-groupings.component\";\nimport { SendTypeComponent } from \"../tools/popup/send/send-type.component\";\nimport { ExportComponent } from \"../tools/popup/settings/export.component\";\nimport { ActionButtonsComponent } from \"../vault/popup/components/action-buttons.component\";\nimport { CipherRowComponent } from \"../vault/popup/components/cipher-row.component\";\nimport { PasswordRepromptComponent } from \"../vault/popup/components/password-reprompt.component\";\nimport { AddEditCustomFieldsComponent } from \"../vault/popup/components/vault/add-edit-custom-fields.component\";\nimport { AddEditComponent } from \"../vault/popup/components/vault/add-edit.component\";\nimport { AttachmentsComponent } from \"../vault/popup/components/vault/attachments.component\";\nimport { CollectionsComponent } from \"../vault/popup/components/vault/collections.component\";\nimport { CurrentTabComponent } from \"../vault/popup/components/vault/current-tab.component\";\nimport { PasswordHistoryComponent } from \"../vault/popup/components/vault/password-history.component\";\nimport { ShareComponent } from \"../vault/popup/components/vault/share.component\";\nimport { VaultFilterComponent } from \"../vault/popup/components/vault/vault-filter.component\";\nimport { VaultItemsComponent } from \"../vault/popup/components/vault/vault-items.component\";\nimport { VaultSelectComponent } from \"../vault/popup/components/vault/vault-select.component\";\nimport { ViewCustomFieldsComponent } from \"../vault/popup/components/vault/view-custom-fields.component\";\nimport { ViewComponent } from \"../vault/popup/components/vault/view.component\";\nimport { FolderAddEditComponent } from \"../vault/popup/settings/folder-add-edit.component\";\n\nimport { AppRoutingModule } from \"./app-routing.module\";\nimport { AppComponent } from \"./app.component\";\nimport { PopOutComponent } from \"./components/pop-out.component\";\nimport { PrivateModeWarningComponent } from \"./components/private-mode-warning.component\";\nimport { SetPinComponent } from \"./components/set-pin.component\";\nimport { UserVerificationComponent } from \"./components/user-verification.component\";\nimport { ServicesModule } from \"./services/services.module\";\nimport { AboutComponent } from \"./settings/about.component\";\nimport { AutofillComponent } from \"./settings/autofill.component\";\nimport { ExcludedDomainsComponent } from \"./settings/excluded-domains.component\";\nimport { FoldersComponent } from \"./settings/folders.component\";\nimport { HelpAndFeedbackComponent } from \"./settings/help-and-feedback.component\";\nimport { OptionsComponent } from \"./settings/options.component\";\nimport { PremiumComponent } from \"./settings/premium.component\";\nimport { SettingsComponent } from \"./settings/settings.component\";\nimport { SyncComponent } from \"./settings/sync.component\";\nimport { VaultTimeoutInputComponent } from \"./settings/vault-timeout-input.component\";\nimport { TabsComponent } from \"./tabs.component\";\n\n// Register the locales for the application\nimport \"../platform/popup/locales\";\n\n@NgModule({\n  imports: [\n    A11yModule,\n    AppRoutingModule,\n    BitwardenToastModule.forRoot({\n      maxOpened: 2,\n      autoDismiss: true,\n      closeButton: true,\n      positionClass: \"toast-bottom-full-width\",\n    }),\n    BrowserAnimationsModule,\n    BrowserModule,\n    DragDropModule,\n    FormsModule,\n    JslibModule,\n    LayoutModule,\n    OverlayModule,\n    ReactiveFormsModule,\n    ScrollingModule,\n    ServicesModule,\n    DialogModule,\n  ],\n  declarations: [\n    ActionButtonsComponent,\n    AddEditComponent,\n    AddEditCustomFieldsComponent,\n    AppComponent,\n    AttachmentsComponent,\n    CipherRowComponent,\n    VaultItemsComponent,\n    CollectionsComponent,\n    ColorPasswordPipe,\n    ColorPasswordCountPipe,\n    CurrentTabComponent,\n    EnvironmentComponent,\n    ExcludedDomainsComponent,\n    ExportComponent,\n    FolderAddEditComponent,\n    FoldersComponent,\n    VaultFilterComponent,\n    HintComponent,\n    HomeComponent,\n    LockComponent,\n    LoginComponent,\n    LoginWithDeviceComponent,\n    LoginDecryptionOptionsComponent,\n    OptionsComponent,\n    GeneratorComponent,\n    PasswordGeneratorHistoryComponent,\n    PasswordHistoryComponent,\n    PasswordRepromptComponent,\n    PopOutComponent,\n    PremiumComponent,\n    PrivateModeWarningComponent,\n    RegisterComponent,\n    SendAddEditComponent,\n    SendGroupingsComponent,\n    SendListComponent,\n    SendTypeComponent,\n    SetPasswordComponent,\n    SetPinComponent,\n    SettingsComponent,\n    ShareComponent,\n    SsoComponent,\n    SyncComponent,\n    TabsComponent,\n    TwoFactorComponent,\n    TwoFactorOptionsComponent,\n    UpdateTempPasswordComponent,\n    UserVerificationComponent,\n    VaultTimeoutInputComponent,\n    ViewComponent,\n    ViewCustomFieldsComponent,\n    RemovePasswordComponent,\n    VaultSelectComponent,\n    AboutComponent,\n    HelpAndFeedbackComponent,\n    AutofillComponent,\n    EnvironmentSelectorComponent,\n  ],\n  providers: [CurrencyPipe, DatePipe],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { enableProdMode } from \"@angular/core\";\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\n\nimport BrowserPlatformUtilsService from \"../platform/services/browser-platform-utils.service\";\n\nrequire(\"./scss/popup.scss\");\nrequire(\"./scss/tailwind.css\");\n\nimport { AppModule } from \"./app.module\";\n\n// We put this first to minimize the delay in window changing.\n// Should be removed once we deprecate support for Safari 16.0 and older. See Jira ticket [PM-1861]\nif (BrowserPlatformUtilsService.shouldApplySafariHeightFix(window)) {\n  document.documentElement.classList.add(\"safari_height_fix\");\n}\n\nif (process.env.ENV === \"production\") {\n  enableProdMode();\n}\n\nfunction init() {\n  platformBrowserDynamic().bootstrapModule(AppModule, { preserveWhitespaces: true });\n}\n\ninit();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"encrypt-worker\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t347: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_bitwarden_browser\"] = self[\"webpackChunk_bitwarden_browser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__.O(undefined, [286,902], () => (__webpack_require__(25510)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","ClientType","DeviceType","Set","Android","iOS","AndroidAmazon","WindowsDesktop","MacOsDesktop","LinuxDesktop","UWP","EncryptedExportType","EncryptionType","EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE","AesCbc256_B64","AesCbc128_HmacSha256_B64","AesCbc256_HmacSha256_B64","Rsa2048_OaepSha256_B64","Rsa2048_OaepSha1_B64","Rsa2048_OaepSha256_HmacSha256_B64","Rsa2048_OaepSha1_HmacSha256_B64","EventSystemUser","EventType","FieldType","FileUploadType","HashPurpose","HtmlStorageLocation","HttpStatusCode","KdfType","KdfConfig","constructor","iterations","memory","parallelism","this","DEFAULT_KDF_TYPE","PBKDF2_SHA256","DEFAULT_KDF_CONFIG","KeySuffixOptions","LoginLinkedId","CardLinkedId","IdentityLinkedId","LogLevelType","NativeMessagingVersion","NotificationType","ProductType","ProviderType","SecureNoteType","StorageLocation","ThemeType","UriMatchType","manifestVersion","chrome","runtime","getManifest","manifest_version","static","windowId","Promise","resolve","windows","get","populate","window","options","create","tabsQueryFirst","active","WINDOW_ID_CURRENT","tabId","tabs","tab","currentWindow","tabsQuery","query","length","command","data","obj","tabSendMessage","id","sendMessage","lastError","message","responseCallback","remove","browser","getAll","filter","win","incognito","callback","onCreated","addListener","extension","getBackgroundPage","version","getViews","type","url","update","focused","relativeUrl","includes","fullUrl","getURL","parsedUrl","URL","searchParams","set","toString","createdTab","createNewTab","focusWindow","title","windowType","tabToClose","removeTab","name","onMessage","isSafariApi","isBackgroundPage","registeredMessageListeners","push","onpagehide","removeListener","subscriber","arg","Object","assign","highlighted","isWebExtensionsApi","isFirefoxOnAndroid","finally","close","i18n","getUILanguage","location","reload","exemptCurrentHref","currentHref","href","w","forEach","application","connectNative","isChromeApi","permission","permissions","request","reject","getPlatformInfo","action","browserAction","deviceType","BrowserPlatformUtilsService","getDevice","FirefoxExtension","OperaExtension","opr","sidebarAction","details","scripting","executeScript","target","allFrames","frameIds","frameId","files","file","injectImmediately","runAt","result","navigator","userAgent","indexOf","SafariApp","resolveNow","messageId","Date","getTime","Math","floor","random","Number","MAX_SAFE_INTEGER","sendNativeMessage","responseData","response","messagingService","clipboardWriteCallback","biometricCallback","deviceCache","isFirefox","isOpera","isEdge","EdgeExtension","isVivaldi","VivaldiExtension","isChrome","ChromeExtension","isSafari","SafariExtension","getDeviceString","toLowerCase","replace","getClientType","Browser","addons","opera","match","safariVersion","parts","split","map","v","isIE","isMacAppStore","isViewOpen","isPopupOpen","lockTimeout","launchUri","uri","extensionPage","getApplicationVersion","getApplicationVersionNumber","RegExp","trim","supportsWebAuthn","PublicKeyCredential","supportsDuo","showToast","text","send","isDev","isSelfHost","copyToClipboard","doc","document","clearing","clearMs","sendMessageToApp","then","clipboard","writeText","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","e","console","warn","removeChild","readFromClipboard","readText","focus","value","supportsBiometric","os","authenticateBiometric","supportsSecureStorage","getAutofillKeyboardShortcut","autofillCommand","commands","find","c","shortcut","BitwardenToast","toastrService","toastPackage","super","opacity","BitwardenToastGlobalConfig","toastComponent","BitwardenToastModule","config","ngModule","providers","provide","useValue","default","numberFormats","Visa","cardLength","blocks","Mastercard","Maestro","Discover","JCB","UnionPay","Amex","Other","CreditCardNumberPipe","transform","creditCardNumber","brand","rules","matchingRule","r","chunks","total","slice","join","SearchPipe","items","searchText","prop1","prop2","prop3","i","propValue","UserNamePipe","user","email","OrganizationApiKeyType","OrganizationConnectionType","OrganizationUserStatusType","OrganizationUserType","PolicyType","ProviderUserStatusType","ProviderUserType","ScimProviderType","TranslationService","I18nService","UserTypePipe","i18nService","t","Owner","Admin","User","Manager","Custom","nodeURL","inited","isNode","process","release","isBrowser","isMobileBrowser","isMobile","isAppleMobileBrowser","isAppleMobile","global","g","self","str","Uint8Array","Buffer","from","binaryString","atob","bytes","charCodeAt","fromB64ToArray","fromUrlB64ToB64","parseInt","substr","strUtf8","unescape","encodeURIComponent","arr","buffer","binary","byteLength","String","fromCharCode","btoa","fromB64toUrlB64","fromBufferToB64","b64Str","encodedString","apply","decodeURIComponent","escape","Array","prototype","call","x","urlB64Str","output","Error","fromB64ToUtf8","utfStr","fromBufferToUrlB64","fromUtf8ToArray","test","uriString","isNullOrWhitespace","startsWith","hostname","validHosts","getUrl","host","parseResult","isIp","domain","search","Map","pair","prop","a","b","collator","compare","localeCompare","undefined","source","keys","k","isNaN","getUrlObject","s","charAt","toUpperCase","bgColor","threshold","svgTextFill","bgColorHexNums","substring","hash","color","bitwardenContainerService","fromEntries","record","entries","destination","denormalizedPath","mobile","vendor","ms","setTimeout","generator","of","pipe","switchMap","targetDate","diffTime","now","max","hasProtocol","regexpEmojiPresentation","originalMinimumPasswordLength","minimumPasswordLength","DomainMatchBlacklist","init","CryptoService","FingerprintPipe","cryptoService","publicKey","fingerprintMaterial","fingerprint","getFingerprint","I18nPipe","p1","p2","p3","JslibModule","forRoot","maxOpened","autoDismiss","closeButton","AuthenticationStatus","ForceResetPasswordReason","AuthService","MessagingService","KeyConnectorService","StateService","AuthGuard","authService","router","keyConnectorService","stateService","canActivate","route","routerState","authStatus","getAuthStatus","LoggedOut","Locked","createUrlTree","queryParams","promptBiometric","getConvertAccountRequired","getForcePasswordResetReason","None","DeviceTrustCryptoServiceAbstraction","UserVerificationService","defaultRoutes","loggedIn","loggedOut","locked","notDecrypted","UnauthGuard","homepage","ConfigServiceAbstraction","LogService","PlatformUtilsService","FeatureFlag","Region","RegionDomain","EnvironmentService","initialized","ModalRef","_onCreated","Subject","_onClose","_onClosed","_onShow","_onShown","asObservable","onClose","onClosed","onShow","onShown","show","next","shown","lastResult","closed","created","el","onClosedPromise","first","toPromise","DynamicModalComponent","modalService","cd","focusTrapFactory","modalRef","ngAfterViewInit","loadChildComponent","childComponentType","setComponentParameters","componentRef","instance","detectChanges","nativeElement","focusTrap","querySelector","focusFirstTabbableElementWhenReady","componentType","componentFactory","resolveComponentFactory","modalContentRef","clear","createComponent","ngOnDestroy","destroy","getFocus","autoFocusEl","ModalInjector","_parentInjector","_additionalTokens","token","notFoundValue","flags","ModalConfig","ModalService","componentFactoryResolver","applicationRef","injector","modalList","factoryResolvers","addEventListener","event","key","modalCount","topModal","openViewRef","viewContainerRef","modalComponentRef","openInternal","insert","hostView","open","replaceTopModal","allowMultipleModals","registerComponentFactoryResolver","has","closeAll","modal","attachToDom","createModalComponent","attachView","domElem","rootNodes","subscribe","detachView","pop","setupHandlers","backdrop","classList","add","modalEl","dialogEl","className","zIndex","prepend","stopPropagation","modals","querySelectorAll","closeElement","WeakMap","platformUtilsService","environmentService","onSaved","showCustom","urls","getUrls","selectedRegion","SelfHosted","baseUrl","base","webVaultUrl","webVault","apiUrl","api","identityUrl","identity","iconsUrl","icons","notificationsUrl","notifications","submit","resUrls","setUrls","saved","toggleCustom","emit","EnvironmentUrls","events","keyConnector","urlsSubject","ReplaySubject","scimUrl","usUrls","scim","euUrls","activeAccount$","concatMap","setUrlsFromStorage","hasBaseUrl","getNotificationsUrl","getWebVaultUrl","getCloudWebVaultUrl","cloudWebVaultUrl","setCloudWebVaultUrl","region","EU","US","getSendUrl","getIconsUrl","getApiUrl","getIdentityUrl","getEventsUrl","eventsUrl","getKeyConnectorUrl","keyConnectorUrl","getScimUrl","getRegion","savedUrls","getEnvironmentUrls","envUrls","setRegion","formatUrl","setEnvironmentUrls","cloudWebVault","isEmpty","setUrlsInternal","isCloud","getFlags","envFlags","JSON","parse","flagEnabled","flag","BrowserEnvironmentService","logService","hasManagedEnvironment","getManagedEnvironment","error","settingsHaveChanged","env","storage","managed","environment","setUrlsToManagedEnvironment","BoxRowDirective","elRef","ngOnInit","formEls","formEl","onClick","contains","tagName","inputEl","click","EncString","encryptedStringOrType","iv","mac","initFromData","initFromEncryptedString","ivBytes","macBytes","dataBytes","toJSON","encryptedString","encType","encryptionType","encPieces","parseEncryptedString","headerPieces","decrypt","orgId","decryptedValue","getKeyForDecryption","encryptService","getContainerService","getEncryptService","decryptToUtf8","getCryptoService","getOrgKey","getUserKeyWithLegacySupport","Domain","buildDomainModel","dataObj","notEncList","hasOwnProperty","objProp","buildDataModel","notEncStringList","decryptObj","viewModel","promises","theProp","p","mapProp","val","all","MasterPasswordPolicyOptions","minComplexity","minLength","requireUpper","requireLower","requireNumbers","requireSpecial","enforceOnLogin","policy","CalloutComponent","useAlertRole","calloutStyle","enforcedPolicyMessage","icon","getPasswordScoreAlertDisplay","enforcedPolicyOptions","InputVerbatimDirective","appInputVerbatim","condition","disableComplete","renderer","hasAttribute","setAttribute","StopClickDirective","$event","preventDefault","resetEnvironment","EnvironmentComponent","showEditedManagedSettings","navigate","PasswordHintRequest","ApiService","LoginService","apiService","loginService","successRoute","getEmail","formPromise","postPasswordHint","onSuccessfulSubmit","ValidationService","ApiActionDirective","validationService","ngOnChanges","changes","appApiAction","loading","captchaRequired","getSingleMessage","showError","AutofocusDirective","appAutofocus","autofocus","ngZone","isStable","onStable","take","HintComponent","toggle","EnvironmentSelectorComponent","configService","onOpenSelfHostedSettings","isOpen","showingModal","ServerEnvironmentType","overlayPosition","originX","originY","overlayX","overlayY","componentDestroyed$","serverConfig$","takeUntil","updateEnvironmentInfo","complete","option","selectedEnvironment","euServerFlagEnabled","getFeatureFlag","DisplayEuEnvironmentFlag","HomeComponent","formBuilder","destroyed$","loginInitiated","formGroup","group","required","rememberEmail","savedEmail","getRememberEmail","patchValue","getRememberedEmail","environmentSelector","setFormValues","markAllAsTouched","invalid","setEmail","setRememberEmail","selfHostedDomain","VaultTimeoutAction","SecretVerificationRequest","PasswordStrengthServiceAbstraction","PasswordStrengthService","getPasswordStrength","password","emailInput","userInputs","globalUserInputs","emailToUserInputs","finalUserInputs","atPosition","VaultTimeoutService","VaultTimeoutSettingsService","PolicyApiServiceAbstraction","PolicyService","InternalPolicyService","ButtonLikeAbstraction","functionToObservable","func","awaitable","throwError","isPromise","Observable","BitSubmitDirective","formGroupDirective","destroy$","_loading$","BehaviorSubject","_disabled$","allowDisabledFormSubmit","loading$","disabled$","ngSubmit","disabled","handler","catchError","err","statusChanges","BitActionDirective","buttonComponent","tap","finalize","BitFormButtonDirective","submitDirective","actionDirective","focusRing","buttonStyles","primary","secondary","danger","unstyled","ButtonComponent","_block","concat","block","buttonType","disabledAttr","setButtonType","useExisting","fadeIn","nextId","DialogTitleContainerDirective","dialogRef","simple","container","containerInstance","_ariaLabelledBy","IconDirective","SimpleDialogComponent","hasIcon","DEFAULT_ICON","success","info","warning","DEFAULT_COLOR","SimpleConfigurableDialogComponent","iconClasses","simpleDialogOpts","showCancelButton","cancelButtonText","accept","acceptAction","localizeText","translate","content","acceptButtonText","translation","defaultKey","placeholders","DialogService","_overlay","_injector","_defaultOptions","_parentDialog","_overlayContainer","scrollStrategy","_destroy$","backDropClasses","Unlocked","componentOrTemplateRef","backdropClass","openSimpleDialog","simpleDialogOptions","disableClose","firstValueFrom","openSimpleDialogRef","vaultTimeoutService","vaultTimeoutSettingsService","policyApiService","policyService","passwordStrengthService","dialogService","deviceTrustCryptoService","userVerificationService","masterPassword","pin","showPassword","pinEnabled","masterPasswordEnabled","webVaultHostname","forcePasswordResetRoute","invalidPinAttempts","enforcedMasterPasswordOptions","load","handlePinRequiredUnlock","handleMasterPasswordRequiredUnlock","logOut","unlockBiometric","biometricLock","userKey","getUserKeyFromStorage","Biometric","setUserKeyAndContinue","togglePassword","input","getElementById","doUnlockWithPin","failed","kdf","getKdfType","kdfConfig","getKdfConfig","userKeyPin","oldPinKey","pinStatus","getPinKeyEncryptedUserKey","oldEncryptedPinKey","getEncryptedPinProtected","getPinKeyEncryptedUserKeyEphemeral","getDecryptedPinProtected","decryptAndMigrateOldPinKey","decryptUserKeyWithPin","protectedPin","getProtectedPin","doUnlockWithMasterPassword","masterKey","makeMasterKey","passwordValid","getMasterKeyHash","compareAndUpdateKeyHash","serverKeyHash","hashMasterKey","ServerAuthorization","masterPasswordHash","postAccountVerifyPassword","fromResponse","localKeyHash","LocalAuthorization","setMasterKeyHash","decryptUserKeyWithMasterKey","setMasterKey","evaluatePasswordAfterUnlock","setUserKey","trustDeviceIfRequired","doContinue","setEverBeenUnlocked","masterPasswordPolicyOptions$","requirePasswordChange","setForcePasswordResetReason","WeakMasterPassword","availableVaultTimeoutActions$","Lock","isPinLockSet","ephemeralPinSet","hasMasterPassword","isBiometricLockSet","hasUserKeyStored","biometricText","getBiometricText","vaultUrl","getHostname","passwordStrength","score","evaluateMasterPassword","BiometricErrors","startDesktop","description","desktopIntegrationDisabled","A11yTitleDirective","appA11yTitle","PopupUtilsService","privateMode","inSidebar","inTab","inPopout","inPopup","inPrivateMode","getContentScrollY","scrollingContainer","getElementsByTagName","scrollTop","setContentScrollY","scrollY","popOut","hrefParts","bodyRect","getBoundingClientRect","width","round","height","closePopup","enableCloseTabWarning","disableCloseTabWarning","unloadSubscription","fromEvent","returnValue","unsubscribe","PrivateModeWarningComponent","popupUtilsService","showWarning","LockComponent","pendingBiometric","isInitialLockScreen","previousPopupUrl","disableAutoBiometricsPrompt","getDisableAutoBiometricsPrompt","biometricError","KeysRequest","encryptedPrivateKey","DevicesServiceAbstraction","TokenService","OrganizationApiServiceAbstraction","OrganizationUserService","PasswordResetEnrollmentServiceAbstraction","State","BaseLoginDecryptionOptionsComponent","rememberDevice","rememberDeviceForm","controls","devicesService","activatedRoute","tokenService","organizationApiService","organizationUserService","passwordResetEnrollmentService","setupRememberDeviceValueChanges","setRememberDeviceDefaultValue","accountDecryptionOptions","getAccountDecryptionOptions","trustedDeviceOption","hasAdminApproval","loadUntrustedDeviceData","loadNewUserData","rememberDeviceFromState","getShouldTrustDevice","setValue","valueChanges","defer","setShouldTrustDevice","autoEnrollStatus$","getUserSsoOrganizationIdentifier","organizationIdentifier","getAutoEnrollStatus","email$","autoEnrollStatus","state","NewUser","organizationId","userEmail","showApproveFromOtherDeviceBtn","hasLoginApprovingDevice","showReqAdminApprovalBtn","showApproveWithMasterPasswordBtn","ExistingUserUntrustedDevice","approveFromOtherDevice","requestAdminApproval","approveWithMasterPassword","createUser","privateKey","initAccount","keysRequest","postAccountKeys","enroll","trustDevice","AuthRequestType","LoginDecryptionOptionsComponent","AdminAuthRequestStorable","fromBufferToByteString","privateKeyBuffer","fromByteStringToArray","AuthenticationType","PasswordLogInCredentials","captchaToken","twoFactor","Password","SsoLogInCredentials","code","codeVerifier","redirectUrl","Sso","PasswordlessLogInCredentials","accessCode","authRequestId","decryptedUserKey","decryptedMasterKey","decryptedMasterKeyHash","Passwordless","PasswordlessCreateAuthRequest","deviceIdentifier","BaseResponse","getResponseProperty","propertyName","exactName","otherCasePropertyName","ErrorResponse","status","identityResponse","errorModel","responseErrorModel","validationErrors","captchaSiteKey","HCaptcha_SiteKey","statusCode","getAllMessages","messages","item","prefix","lastSep","lastIndexOf","PasswordGenerationServiceAbstraction","PasswordGeneratorPolicyOptions","defaultType","useUppercase","useLowercase","useNumbers","numberCount","useSpecial","specialCount","minNumberWords","capitalize","includeNumber","inEffect","EFFLongWordList","GeneratedPasswordHistory","date","DefaultOptions","ambiguous","number","minNumber","uppercase","minUppercase","lowercase","minLowercase","special","minSpecial","numWords","wordSeparator","PasswordGenerationService","generatePassword","o","generatePassphrase","sanitizePasswordLength","positions","shuffleArray","allCharSet","lowercaseCharSet","uppercaseCharSet","numberCharSet","specialCharSet","positionChars","randomCharIndex","randomNumber","listLength","wordList","wordIndex","appendRandomNumberToRandomWord","getOptions","getPasswordGenerationOptions","setPasswordGenerationOptions","enforcedOptions","enforcePasswordGeneratorPoliciesOnOptions","getPasswordGeneratorPolicyOptions","policies","PasswordGenerator","currentPolicy","enabled","useUpper","useLower","minNumbers","saveOptions","getHistory","hasUserKey","getDecryptedPasswordGenerationHistory","encrypted","getEncryptedPasswordGenerationHistory","decrypted","decryptHistory","setDecryptedPasswordGenerationHistory","passwordGenerationHistory","addHistory","currentHistory","matchesPrevious","unshift","newHistory","encryptHistory","setEncryptedPasswordGenerationHistory","userId","normalizeOptions","index","num","history","encrypt","array","j","forGeneration","minUppercaseCalc","minLowercaseCalc","minNumberCalc","minSpecialCalc","IFrameComponent","path","iframeId","successCallback","errorCallback","infoCallback","parseFunction","parseMessage","bind","connectorLink","stop","start","iframe","src","contentWindow","postMessage","base64Encode","cleanup","removeEventListener","createParams","URLSearchParams","stringify","parent","initComponent","params","validMessage","origin","CaptchaIFrame","parsedMessage","siteKey","locale","translationLocale","CaptchaProtectedComponent","setupCaptcha","captcha","showCaptcha","handleCaptchaRequired","CryptoFunctionService","AppIdService","AnonymousHubService","AuthRequestCryptoServiceAbstraction","cryptoFunctionService","appIdService","passwordGenerationService","anonymousHubService","authReqCryptoService","showResendNotification","adminApprovalRoute","StateEnum","StandardAuthRequest","twoFactorRoute","resendTimeout","getCurrentNavigation","getPushNotificationObs$","verifyAndHandleApprovedAuthReq","userAuthNStatus","isActive","paths","fragment","matrixParams","AdminAuthRequest","adminAuthReqStorable","getAdminAuthRequest","handleExistingAdminAuthRequest","startPasswordlessLogin","stopHubConnection","adminAuthReqResponse","getAuthRequest","NotFound","handleExistingAdminAuthReqDeletedOrDenied","derivedPublicKeyArrayBuffer","rsaExtractPublicKey","fingerprintPhrase","isAnswered","requestApproved","handleApprovedAdminAuthRequest","createHubConnection","setAdminAuthRequest","buildAuthRequest","authRequestType","authRequestKeyPairArray","rsaGenerateKeyPair","authRequestKeyPair","getAppId","passwordlessRequest","reqResponse","AdminApproval","postAdminAuthRequest","AuthenticateAndUnlock","postAuthRequest","requestId","authReqResponse","getAuthResponse","loginAuthResult","loginViaPasswordlessStrategy","handlePostLoginNavigation","errorRoute","setKeysAfterDecryptingSharedMasterKeyAndHash","setUserKeyAfterDecryptingSharedUserKey","handleSuccessfulLoginNavigation","buildPasswordlessLoginCredentials","masterKeyHash","decryptPubKeyEncryptedMasterKeyAndHash","decryptPubKeyEncryptedUserKey","credentials","logIn","loginResponse","requiresTwoFactor","onSuccessfulLoginTwoFactorNavigate","forcePasswordReset","onSuccessfulLoginForceResetNavigate","setRememberEmailValues","rememberedEmail","setRememberedEmail","clearValues","onSuccessfulLogin","onSuccessfulLoginNavigate","SyncService","back","LoginWithDeviceComponent","syncService","fullSync","DevicesApiServiceAbstraction","FormValidationErrorsService","loggedEmail","devicesApiService","formValidationErrorService","validatedEmail","paramEmailSet","queryParamsEmail","errorText","getErrorToastMessage","saveEmailSettings","clearValidators","updateValueAndValidity","valid","launchSsoBrowser","clientId","ssoRedirectUri","passwordOptions","numbers","ssoCodeVerifier","codeVerifierHash","codeChallenge","setSsoState","setSsoCodeVerifier","webUrl","validateEmail","markAsTouched","toggleValidateEmail","getLoginWithDevice","markAsUntouched","masterPasswordInput","reset","getFormValidationErrors","shift","errorName","errorTag","controlName","showLoginWithDevice","getKnownDevice","LoginComponent","showPasswordless","settings","redirectUri","RegisterRequest","masterPasswordHint","referenceData","captchaResponse","kdfIterations","kdfMemory","kdfParallelism","InputsFieldMatch","matchTo","errorMessage","control","inputsMatchError","inputsDoesntMatchError","field","fieldMatchTo","fieldCtrl","fieldMatchToCtrl","setErrors","AuditService","auditService","isInTrialFlow","createdAccount","showTerms","showErrorSummary","minimumLength","confirmMasterPassword","hint","validateInputsDoesntMatch","checkForBreaches","acceptPolicies","acceptPoliciesValidation","validator","validateFormInputsMatch","accountCreated","captchaBypassToken","characterMinimumMessage","registerResponse","registerAccount","buildRegisterRequest","successful","getStrengthResult","passwordStrengthResult","getPasswordScoreText","validateRegistration","hasError","isValid","passwordWeak","passwordLeak","passwordLeaked","newUserKey","makeUserKey","makeKeyPair","orgInvite","getOrganizationInvitation","organizationUserId","postRegister","PasswordStrengthComponent","updatePasswordStrength","masterPasswordScoreColor","masterPasswordScore","masterPasswordScoreText","showText","passwordScoreColor","scoreWidth","masterPasswordStrengthTimeout","setPasswordScoreText","clearTimeout","strengthResult","RegisterComponent","continuing","leaving","organization","getManagingOrganization","convert","actionPromise","migrateUser","removeConvertAccountRequired","leave","RemovePasswordComponent","OrganizationUserResetPasswordEnrollmentRequest","SetPasswordRequest","orgIdentifier","ChangePasswordComponent","enforcedPasswordPolicyOptions","strongPassword","setupSubmitActions","newMasterKey","newMasterKeyHash","newProtectedUserKey","getUserKey","encryptUserKeyWithMasterKey","performSubmitActions","masterPasswordRetype","weakPassword","leakedPassword","syncLoading","identifier","resetPasswordAutoEnroll","qParams","resetPasswordEnabled","getMasterPasswordPoliciesForInvitedUsers","newKeyPair","setPassword","onSetPasswordSuccess","getKeys","getUserId","encryptedUserKey","rsaEncrypt","resetRequest","resetPasswordKey","putOrganizationUserResetPasswordEnrollment","onSuccessfulChangePassword","confirmField","keyPair","setKdfType","setKdfConfig","setPrivateKey","localMasterKeyHash","SetPasswordComponent","loggingIn","trustedDeviceEncRoute","changePasswordRoute","getSsoCodeVerifier","getSsoState","checkState","ssoOrganizationIdentifier","getOrgIdentifierFromState","setUserSsoOrganizationIdentifier","returnUri","includeUserIdentifier","initiateSsoFormPromise","preValidateSso","authorizeUrl","buildAuthorizeUrl","sameWindow","userIdentifier","getSsoUserIdentifier","authResult","acctDecryptionOpts","handleTwoFactorRequired","isTrustedDeviceEncEnabled","handleTrustedDeviceEncryptionEnabled","keyConnectorOption","resetMasterPassword","handleChangePasswordRequired","handleForcePasswordReset","handleSuccessfulLogin","handleLoginError","TrustedDeviceEncryption","navigateViaCallbackOrRoute","sso","hasManageResetPasswordPermission","onSuccessfulLoginTde","onSuccessfulLoginTdeNavigate","onSuccessfulLoginChangePasswordNavigate","extras","stateSplit","checkStateSplit","WINDOW","MEMORY_STORAGE","SECURE_STORAGE","STATE_FACTORY","STATE_SERVICE_USE_CACHE","LOGOUT_CALLBACK","LOCKED_CALLBACK","LOCALES_DIRECTORY","SYSTEM_LANGUAGE","LOG_MAC_FAILURES","SsoComponent","reloadOpenWindows","TwoFactorService","twoFactorService","onProviderSelected","onRecoverSelected","getSupportedProviders","choose","recover","TwoFactorOptionsComponent","navigateTo2FA","setSelectedProvider","snapshot","queryParamMap","TwoFactorProviderType","TokenTwoFactorRequest","provider","remember","TwoFactorEmailRequest","TwoFactorProviders","Authenticator","priority","sort","premium","Yubikey","Duo","OrganizationDuo","Email","WebAuthn","selectedTwoFactorProviderType","twoFactorProvidersData","getDefaultProvider","webAuthnSupported","providerType","providerPriority","_value","clearSelectedProvider","setProviders","twoFactorProviders2","clearProviders","getProviders","WebAuthnIFrame","webAuthnNewTab","btnText","append","allow","webAuthnReady","selectedProviderType","webAuthn","twoFactorEmail","loginRoute","authing","needsLock","cleanupWebAuthn","providerData","authWebAuthn","Host","sig_request","Signature","submit_callback","f","sig","size","sendEmail","doSubmit","logInTwoFactor","handleLoginResponse","ssoTo2faFlowActive","trustedDeviceEncryptionFeatureActive","doToast","emailPromise","ssoEmail2FaSessionToken","authRequestAccessCode","postTwoFactorEmail","authingWithPassword","authingWithSso","authingWithUserApiKey","authingWithPasswordless","BroadcasterService","anotherMethod","TwoFactorComponent","broadcasterService","showNewWindowMessage","paramMap","isLinux","closeBitwardenExtensionTab","VerificationType","PasswordRequest","OrganizationUserResetPasswordRequest","UpdateTempPasswordRequest","requireCurrentPassword","reason","verification","MasterPassword","secret","masterPasswordWarningText","newPasswordHash","AdminForcePasswordReset","updateTempPassword","updatePassword","newMasterPasswordHash","putUpdateTempPassword","buildRequest","postPassword","UpdateTempPasswordComponent","UsernameGenerationServiceAbstraction","AnonAddyForwarder","generate","apiKey","anonaddy","requestInit","redirect","cache","method","headers","Headers","Authorization","website","Request","nativeFetch","json","DuckDuckGoForwarder","address","FastmailForwarder","accountId","getAccountId","using","methodCalls","emailPrefix","fastmail","methodResponses","notCreated","primaryAccounts","FirefoxRelayForwarder","generated_for","full_address","ForwarderOptions","FastmailForwarderOptions","AnonAddyForwarderOptions","forwardemail","ForwardEmailForwarderOptions","SimpleLoginForwarder","Authentication","note","alias","ForwardEmailForwarder","fromUtf8ToB64","labels","wordCapitalize","wordIncludeNumber","subaddressType","catchallType","forwardedService","forwardedAnonAddyDomain","forwardedForwardEmailDomain","UsernameGenerationService","generateUsername","generateCatchall","generateSubaddress","generateForwarded","generateWord","word","zeroPad","subaddressEmail","atIndex","emailBeginning","emailEnding","subaddressString","randomString","catchallDomain","startString","forwarder","forwarderOptions","forwardedSimpleLoginApiKey","forwardedAnonAddyApiToken","forwardedFirefoxApiToken","forwardedFastmailApiToken","forwardedDuckDuckGoToken","forwardedForwardEmailApiToken","getUsernameGenerationOptions","setUsernameGenerationOptions","charSet","usernameGenerationService","comingFromAddEdit","onSelected","usernameOptions","username","showOptions","avoidAmbiguous","usernameWebsite","typeOptions","passTypeOptions","usernameTypeOptions","desc","subaddressOptions","catchallOptions","initForwardOptions","passwordOptionsResponse","websiteOption","generatorOptions","getGeneratorOptions","regenerateWithoutButtonPress","regenerate","typeChanged","setGeneratorOptions","regeneratePassword","regenerateUsername","sliderChanged","savePasswordOptions","sliderInput","normalizePasswordOptions","saveUsernameOptions","usernameGeneratingPromise","copy","copyOptions","toggleOptions","checked","forwardOptions","validForSelfHosted","CopyTextDirective","onCopy","timeout","Desktop","copyText","expand","PopOutComponent","ColorPasswordPipe","generateTemplate","character","templateGenerator","passwordArray","colorizedPassword","isSpecial","GeneratorComponent","addEditCipherInfo","getAddEditCipherInfo","cipherState","cipher","login","hasUris","uris","setAddEditCipherInfo","SendType","PasswordGeneratorHistoryComponent","SendFileView","sizeName","fileName","fileSize","SendTextView","hidden","maskedText","SymmetricCryptoKey","encKey","macKey","keyB64","encKeyB64","macKeyB64","arrayBuffer","fromString","SendView","accessId","notes","maxAccessCount","accessCount","revisionDate","deletionDate","expirationDate","hideEmail","urlB64Key","maxAccessCountReached","expired","pendingDelete","merge","cryptoKey","fromJSON","SendService","InternalSendService","SendApiService","DatePreset","AddEditComponent","datePipe","sendService","sendApiService","onSavedSend","onDeletedSend","onCancelled","deletionDatePresets","OneHour","OneDay","TwoDays","ThreeDays","SevenDays","ThirtyDays","expirationDatePresets","Never","copyLink","disableSend","disableHideEmail","sendType","canAccessPremium","emailVerified","alertShown","componentName","textHidden","fileContents","link","defaultExpirationDateTime","defaultDeletionDateTime","selectedDeletionDatePreset","selectedExpirationDatePreset","File","Text","sendLinkBaseUrl","isDateTimeLocalSupported","policyAppliesToActiveUser$","DisableSend","policyAppliesToActiveUser","disable","SendOptions","enable","datePreset","editMode","sendId","getCanAccessPremium","getEmailVerified","loadSend","updateFormValues","setDate","getDate","hasPassword","encryptSend","encSend","uploadPromise","save","handleCopyLinkToClipboard","copyLinkToClipboard","delete","deletePromise","sendData","formattedDeletionDate","formattedExpirationDate","togglePasswordVisible","copySuccess","clearExpiration","milliseconds","setTime","BrowserStateService","popOutWindow","SendAddEditComponent","isUnsupportedMac","showFileSelector","showFilePopoutMessage","showFirefoxFileWarning","showSafariFileWarning","showChromiumFileWarning","appVersion","cancel","SearchService","indexedEntityId","SendComponent","filteredSends","_filteredSends","searchService","loaded","refreshing","sends","searchPending","hasSearched","sendViews$","onSuccessfulLoad","selectAll","refresh","applyFilter","searchTimeout","isSearchable","applyTextSearch","removePassword","onSuccessfulRemovePassword","onSuccessfulDelete","searchTextChanged","clearSelections","selectedAll","selectType","selectedType","searchSends","BrowserComponentState","BrowserSendComponentState","typeCounts","mapToRecord","recordToMap","StopPropDirective","selectSend","copySendLink","SendListComponent","disabledByPolicy","onCopySendLink","onRemovePassword","onDeleteSend","addSend","ComponentId","SendGroupingsComponent","popupUtils","changeDetectorRef","showLeftHeader","calculateTypeCounts","setBrowserSendTypeComponentState","restoredScopeState","restoreState","syncInProgress","loadedTimeout","run","saveState","showSearching","setBrowserSendComponentState","getBrowserSendComponentState","SendTypeComponent","applySavedState","getBrowserSendTypeComponentState","groupingTitle","successfully","refreshTimeout","routeDirection","VaultExportServiceAbstraction","CardData","cardholderName","expMonth","expYear","LinkedMetadata","propertyKey","_i18nKey","i18nKey","linkedFieldOption","linkedFieldOptions","ItemView","CipherRepromptType","CipherType","InitializerKey","CardView","_brand","_number","_subTitle","maskedCode","repeat","maskedNumber","subTitle","count","expiration","exp","formatYear","year","cardNum","re","CardholderName","ExpMonth","ExpYear","Code","Brand","Card","toCardData","CardExport","req","view","AttachmentData","FieldData","linkedId","IdentityData","firstName","middleName","lastName","address1","address2","address3","city","postalCode","country","company","phone","ssn","passportNumber","licenseNumber","LoginUriData","LoginData","passwordRevisionDate","totp","autofillOnPageLoad","u","PasswordHistoryData","lastUsedDate","SecureNoteData","CipherData","collectionIds","folderId","edit","viewPassword","organizationUseTotp","favorite","creationDate","deletedDate","reprompt","Login","SecureNote","secureNote","card","Identity","fields","attachments","passwordHistory","ph","AttachmentView","FieldView","newField","showValue","showCount","maskedValue","IdentityView","_firstName","_lastName","fullName","fullAddress","fullAddressPart2","addressPart2","Title","MiddleName","Address1","Address2","Address3","City","PostalCode","Country","Company","Phone","Ssn","Username","PassportNumber","LicenseNumber","FirstName","LastName","FullName","CanLaunchWhitelist","LoginUriView","_uri","_domain","_hostname","_host","_canLaunch","getDomain","RegularExpression","getHost","hostnameOrUri","hostOrUri","isWebsite","canLaunch","matchesUri","targetUri","equivalentDomains","defaultUriMatch","matchType","targetDomain","matchDomains","matchesDomain","urlHost","Exact","StartsWith","domainUrlHost","LoginView","l","maskedPassword","some","hasTotp","PasswordHistoryView","SecureNoteView","n","CipherView","initializerKey","localData","hasPasswordHistory","hasAttachments","hasOldAttachments","hasFields","passwordRevisionDisplayDate","isDeleted","linkedFieldValue","linkedFieldI18nKey","Attachment","decryptAttachmentKey","decValue","decryptToBytes","toAttachmentData","Field","toFieldData","toIdentityData","LoginUri","toLoginUriData","toLoginData","toISOString","toPasswordHistoryData","toSecureNoteData","Cipher","model","reduce","promise","attachment","decAttachment","decField","decPh","toCipherData","FieldExport","IdentityExport","LoginUriExport","LoginExport","toView","toDomain","PasswordHistoryExport","SecureNoteExport","Generic","CipherExport","values","build","CipherWithIdExport","CollectionView","externalId","readOnly","hidePasswords","Collection","CollectionExport","CollectionWithIdExport","FolderView","Folder","FolderExport","FolderWithIdExport","CollectionData","ExportHelper","getFullYear","padNumber","getMonth","getHours","getMinutes","getSeconds","padCharacter","numString","VaultExportService","folderService","cipherService","getExport","format","getOrganizationExport","getEncryptedExport","getDecryptedExport","getPasswordProtectedExport","clearText","kdfType","salt","randomBytes","makePinKey","encKeyValidation","newGuid","encText","jsonDoc","passwordProtected","encKeyValidation_DO_NOT_EDIT","getOrganizationEncryptedExport","getOrganizationDecryptedExport","getFileName","decFolders","decCiphers","getAllDecryptedFromState","folders","getAllDecrypted","ciphers","foldersMap","exportCiphers","folder","buildCommonCipher","getAllFromState","decCollections","exportData","exportPromises","collections","collection","decCol","getKeyForCipherKeyDecryption","decCipher","collectionsMap","getCollections","getCiphersOrganization","orgKey","login_uri","login_username","login_password","login_totp","EventCollectionService","FileDownloadService","_disabledByPolicy","exportService","eventCollectionService","fileDownloadService","exportForm","filePassword","confirmFilePassword","fileEncryptionType","AccountEncrypted","formatOptions","DisablePersonalVaultExport","startWith","adjustValidators","encryptedFormat","doExport","getExportData","downloadFile","collectEvent","warningDialog","verifyUser","FileEncrypted","collect","User_ClientExportedVault","csv","download","blobData","blobOptions","isMember","org","OrganizationService","ExportScopeCalloutComponent","organizationService","hasOrganizations","scopeConfig","scopeIdentifier","invalidSecret","_invalidSecret","invalidSecretChange","emitEvent","disableRequestOTP","sentCode","requestOTP","hasMasterPasswordAndMasterKeyHash","processChanges","writeValue","registerOnChange","fn","onChange","registerOnTouched","setDisabledState","isDisabled","OTP","UserVerificationComponent","multi","ExportComponent","CipherService","FolderService","InternalFolderService","CollectionService","PasswordRepromptService","collectionService","passwordRepromptService","cloneMode","onSavedCipher","onDeletedCipher","onRestoredCipher","onEditAttachments","onShareCipher","onEditCollections","onGeneratePassword","onGenerateUsername","showCardNumber","showCardCode","cipherType","ownershipOptions","currentDate","allowPersonal","canUseReprompt","cardBrandOptions","cardExpMonthOptions","identityTitleOptions","uriMatchOptions","autofillOnPageLoadOptions","writeableCollections","loadCollections","PersonalOwnership","personalOwnershipPolicyAppliesToActiveUser","myEmail","getSortFunction","Confirmed","defaultOwnerId","cipherId","loadedAddEditCipherInfo","loadAddEditCipherInfo","loadCipher","organizationChanged","folders$","folderViews$","previousCipherId","Cipher_ClientViewed","restore","encryptCipher","saveCipher","addUri","removeUri","splice","onCardNumberChange","getCardBrandByPatterns","getCardExpMonthDisplay","trackByFunction","share","editCollections","deleteCipher","restorePromise","restoreCipher","Cipher_ClientToggledPasswordVisible","toggleCardNumber","Cipher_ClientToggledCardNumberVisible","toggleCardCode","Cipher_ClientToggledCardCodeVisible","toggleUriOptions","loginUriMatchChanged","useTotp","checkPassword","checkPasswordPromise","matches","repromptChanged","isNotClone","orgAdmin","isAdmin","createWithServer","updateWithServer","asAdmin","canEditAnyCollection","deleteWithServer","softDeleteWithServer","restoreWithServer","loadedSavedInfo","addFieldType","fieldType","eventType","addFieldTypeOptions","Hidden","Boolean","addFieldLinkedTypeOption","Linked","thisCipherType","setLinkedFieldOptions","firstChange","resetCipherLinkedFields","addField","removeField","toggleFieldValue","Cipher_ClientToggledHiddenFieldVisible","drop","previousIndex","currentIndex","TrueFalseValueDirective","elementRef","trueValue","falseValue","propagateChange","_","onHostChange","ev","setProperty","AddEditCustomFieldsComponent","toggleUriInput","showAttachments","collectionId","selectedVault","openAttachmentsInPopup","currentUris","setFocus","showAutoFillOnPageLoadOptions","getEnableAutoFillOnPageLoad","delay","destinationUrl","currentBaseUrl","confirmed","saveCipherState","showCurrentUris","allowOwnershipOptions","EncArrayBuffer","encBytes","ENC_TYPE_LENGTH","throwDecryptionError","b64","onUploadedAttachment","onDeletedAttachment","onReuploadedAttachment","deletePromises","reuploadPromises","emergencyAccessId","hasUpdatedKey","fileEl","saveCipherAttachment","cipherDomain","deleteCipherAttachment","downloading","canAccessAttachments","getAttachmentData","fetch","encBuf","decBuf","decryptFromBytes","reuploadCipherAttachment","admin","saveAttachmentRawWithServer","foundAttachment","a2","saveAttachmentWithServer","attachmentId","deleteAttachmentWithServer","reupload","AttachmentsComponent","openedAttachmentsInPopup","allowSelectNone","onSavedCollections","loadCipherCollections","selectedCollectionIds","saveCollections","saveCollectionsWithServer","CollectionsComponent","VaultFilter","selectedCollection","selectedFolder","myVaultOnly","refreshCollectionsAndFolders","resetFilter","selectedCollectionId","selectedFolderId","resetOrganization","selectedOrganizationId","buildFilter","cipherPassesFilter","TreeNode","node","children","ServiceUtils","nodeTree","partIndex","delimiter","end","partName","nestedTraverse","newPartName","getTreeNodeObject","getTreeNodeObjectFromList","DynamicTreeNode","hasId","fullList","storeCollapsedFilterNodes","collapsedFilterNodes","setCollapsedGroupings","buildCollapsedFilterNodes","getCollapsedGroupings","buildOrganizations","organizations","buildNestedFolders","transformation","storedFolders","orgCiphers","oc","nestedFolders","getAllFoldersNested","nestedList","mergeMap","buildCollections","storedCollections","nestedCollections","getAllNested","checkForSingleOrganizationPolicy","SingleOrg","checkForPersonalOwnershipPolicy","nodes","folderCopy","getFolderNested","VaultFilterService","vaultFilter","allVaults","myVault","getVaultFilter","setVaultFilter","filterCipherForSelectedVault","AutofillService","SettingsService","FallbackSrcDirective","onError","appFallbackSrc","cardIcons","RuPay","IconComponent","cipher$","settingsService","data$","combineLatest","disableFavicon$","distinctUntilChanged","disableFavicon","imageEnabled","image","fallbackImage","hostnameUri","TotpService","launchCipher","ActionButtonsComponent","totpService","onView","launchEvent","showView","userHasPremiumAccess","typeI18nKey","aType","protectedFields","showPasswordPrompt","displayTotpCopyButton","getCode","Cipher_ClientCopiedPassword","Cipher_ClientCopiedHiddenField","Cipher_ClientCopiedCardCode","CipherRowComponent","selectCipher","viewCipher","openOverlay","selectMyVault","selectOrganization","selectAllVaults","VaultSelectComponent","shouldShow","enforcePersonalOwnership","vaultFilterService","overlay","onVaultSelectionChanged","_selectedVault","selectedVault$","_destroy","handleKeyboardEvent","organizations$","memberOrganizations$","orgs","firstOrganization","selectedOrganization","viewPortHeight","documentElement","clientHeight","innerHeight","positionStrategy","flexibleConnectedTo","buttonRef","withFlexibleDimensions","withPush","withViewportMargin","withGrowAfterOpen","withPositions","overlayRef","hasBackdrop","maxHeight","scrollStrategies","templatePortal","templateRef","attach","outsidePointerEvents","backdropClick","detachments","dispose","dismissCallout","goToSettings","fillCipher","addCipher","CurrentTabComponent","autofillService","pageDetails","searchTypeSearch","isLoading","showOrganizations","showHowToAutofill","search$","sender","webExtSender","setCallout","debounceTime","searchVault","getActivateAutoFillOnPageLoadFromPolicy","setEnableAutoFillOnPageLoad","setActivateAutoFillOnPageLoadFromPolicy","closePopupDelay","totpCode","totpTimeout","doAutoFill","fillNewPassword","allowTotpAutofill","closeOnEsc","getTabFromCurrentWindow","loginCiphers","otherTypes","dontShowCards","getDontShowCardsCurrentTab","dontShowIdentities","getDontShowIdentitiesCurrentTab","getAllDecryptedForUrl","cardCiphers","identityCiphers","sortCiphersByLastUsedThenName","setDismissedAutofillCallout","getDismissedAutofillCallout","setAutofillCalloutText","autofillCalloutText","PasswordHistoryComponent","isChecked","onSharedCipher","allCollections","filterCollections","cipherView","orgName","shareWithServer","canSave","ShareComponent","replaceUrl","BrowserGroupingsComponentState","collectionCounts","folderCounts","favoriteCiphers","noFolderCiphers","selectFolder","selectCollection","selectTrash","VaultFilterComponent","showNoFolderCiphers","noFolderListSize","folderCount","browserStateService","deletedCount","showCollections","preventSelected","hasLoadedAllCiphers","allCiphers","setBrowserVaultItemsComponentState","getBrowserGroupingComponentState","replaceState","selectedTimeout","updateSelectedOrg","loadCollectionsAndFolders","loadCiphers","getCounts","loadFolders","allFolders","filterDeleted","searchCiphers","deleted","updateLastLaunchedDate","vaultFilterChanged","colId","setBrowserGroupingComponentState","_searchText","activeCipherId","onCipherClicked","onCipherRightClicked","onAddCipher","onAddCipherOptions","searchPlaceholder","accessEvents","deletedFilter","indexedCiphers","doSearch","rightClickCipher","addCipherOptions","isSearching","changeVaultSelection","VaultItemsComponent","noneFolder","showVaultFilter","getBrowserVaultItemsComponentState","folderNode","collectionNode","getNested","showGroupings","onEditCipher","onCloneCipher","passwordReprompted","cleanUp","showPremiumRequiredTotp","totpUpdateCode","interval","getTimeInterval","totpTick","totpInterval","setInterval","promptPassword","clone","showPasswordCount","togglePasswordCount","launch","setTextDataOnDrag","dataTransfer","setData","downloadAttachment","clearInterval","half","totpCodeFormatted","intervalSeconds","mod","totpSec","totpDash","totpLow","toggleFieldCount","ColorPasswordCountPipe","colorizedPasswordCount","ViewCustomFieldsComponent","fillCipherAndSave","ViewComponent","loadAction","senderTabId","uilocation","loadPageDetailsTimeout","loadPageDetails","doAutofill","loginUri","focusTab","getTab","FolderApiServiceAbstraction","folderApiService","onSavedFolder","onDeletedFolder","FolderAddEditComponent","DebounceNavigationService","navigationStartSub","pairwise","lastNavigation","thisNavigation","navigationSuccessSub","lastNavigationSuccessId","navigationTrigger","AutofillComponent","enableAutoFillOnPageLoad","autoFillOnPageLoadDefault","autoFillOnPageLoadOptions","getAutoFillOnPageLoadDefault","getDefaultUriMatch","setAutofillKeyboardHelperText","updateAutoFillOnPageLoad","updateAutoFillOnPageLoadDefault","setAutoFillOnPageLoadDefault","saveDefaultUriMatch","setDefaultUriMatch","autofillKeyboardHelperText","commandSettings","ExcludedDomainsComponent","excludedDomains","existingExcludedDomains","savedDomains","getNeverDomains","loadCurrentUris","loadCurrentUrisTimeout","newExcludedDomains","getNewlyAddedDomains","validDomain","setNeverDomains","newDomain","oldDomain","uriSet","folderSelected","FoldersComponent","addFolder","HelpAndFeedbackComponent","launchHelp","launchContactForm","launchForums","AbstractThemingService","saveClearClipboard","updateAutoTotpCopy","updateAddLoginNotification","updateChangedPasswordNotification","updateContextMenuItem","updateShowCardsCurrentTab","updateShowIdentitiesCurrentTab","updateFavicon","updateBadgeCounter","saveTheme","OptionsComponent","themingService","enableFavicon","enableBadgeCounter","enableAutoTotpCopy","enableContextMenuItem","enableAddLoginNotification","enableChangedPasswordNotification","showCardsCurrentTab","showIdentitiesCurrentTab","showClearClipboard","showGeneral","showAutofill","showDisplay","themeOptions","System","Light","Dark","Nord","SolarizedDark","clearClipboardOptions","getDisableAddLoginNotification","getDisableChangedPasswordNotification","getDisableContextMenuItem","getDisableAutoTotpCopy","getDisableFavicon","getDisableBadgeCounter","theme","getTheme","clearClipboard","getClearClipboard","setDisableAddLoginNotification","setDisableChangedPasswordNotification","setDisableContextMenuItem","setDisableAutoTotpCopy","setDisableFavicon","setDisableBadgeCounter","setDontShowCardsCurrentTab","setDontShowIdentitiesCurrentTab","updateConfiguredTheme","setClearClipboard","isPremium","price","refreshPromise","refreshIdentityToken","purchase","manage","PremiumComponent","currencyPipe","thePrice","formattedPrice","priceString","goBack","ButtonModule","SharedModule","AsyncActionsModule","IconButtonModule","DialogModule","DialogCloseDirective","dialogResult","FingerprintDialogComponent","showPin","masterPassOnRestart","showMasterPassOnRestart","toggleVisibility","pinKey","pinProtectedKey","encPin","setProtectedPin","setPinKeyEncryptedUserKeyEphemeral","setPinKeyEncryptedUserKey","clearDeprecatedKeys","Pin","SetPinComponent","AboutComponent","AwaitDesktopDialogComponent","form","CUSTOM_VALUE","exceedsMinimumTimout","customTimeInMinutes","MIN_CUSTOM_MINUTES","vaultTimeout","custom","hours","minutes","get$","MaximumVaultTimeout","vaultTimeoutPolicy","applyVaultTimeoutPolicy","getVaultTimeout","current","canLockVault$","actions","vaultTimeoutOptions","every","onTouched","validate","policyError","minTimeoutError","registerOnValidatorChange","validatorChange","vaultTimeoutPolicyHours","vaultTimeoutPolicyMinutes","VaultTimeoutInputComponent","updateAutoBiometricsPrompt","lock","changePassword","RateUrls","SettingsComponent","availableVaultTimeoutActions","showChangeMasterPass","vaultTimeoutAction","biometric","enableAutoBiometricsPrompt","refreshTimeoutSettings$","maximumVaultTimeoutPolicy","vaultTimeoutPolicyCallout","showOnLocked","previousValue","newValue","saveVaultTimeout","saveVaultTimeoutAction","initialValues","vaultTimeoutAction$","updatePin","updateBiometric","availableActions","setVaultTimeoutOptions","LogOut","ref","granted","requestPermission","awaitDesktopDialogRef","awaitDesktopDialogClosed","setBiometricAwaitingAcceptance","refreshAdditionalKeys","race","catch","setBiometricUnlock","setBiometricFingerprintValidated","setDisableAutoBiometricsPrompt","twoStep","import","export","about","rate","SyncComponent","lastSync","setLastSync","sync","syncPromise","last","getLastSync","toLocaleDateString","toLocaleTimeString","TabsComponent","showCurrentTab","routes","pathMatch","overrides","tdeEnabled","supportsDeviceTrust","everHadUserKey","getEverHadUserKey","redirectGuard","redirectTo","component","activatedRouteSnapshot","routerStateSnapshot","lockGuard","tdeDecryptionRequiredGuard","featureFlag","requiredFlagValue","redirectUrlOnDisabled","canAccessFeature","runGuardsAndResolvers","NoRouteReuseStrategy","shouldDetach","store","handle","shouldAttach","retrieve","shouldReuseRoute","future","curr","AppRoutingModule","useClass","useHash","onSameUrlNavigation","queryShown","optional","queryChildRoute","speed","queryTranslate","direction","axis","to","boxShadow","queryTranslateX","queryTranslateY","inSlideLeft","outSlideRight","inSlideUp","outSlideDown","inSlideDown","routerTransition","fromState","toState","DesktopSyncVerificationDialogComponent","SsoType","MemberDecryptionType","OpenIdConnectRedirectBehavior","Saml2BindingType","Saml2NameIdFormat","Saml2SigningBehavior","AppComponent","sanitizer","lastActivity","clearComponentStates","activeUserId","activeAccountUnlocked$","unlocked","recordActivity","runOutsideAngular","onmousedown","ontouchstart","onclick","onscroll","onkeypress","bitwardenPopupMainMessageListener","msg","sendResponse","showDialog","showNativeMessagingFingerprintDialog","forceWindowReload","reloadExtension","messageListener","urlAfterRedirects","getState","outlet","activatedRouteData","setLastActive","sanitize","HTML","enableHtml","trustedHtml","timeOut","getIsAuthenticated","EventUploadService","NotificationsService","OrgDomainServiceAbstraction","ProviderService","ApiKeyResponse","SsoConfigApi","configType","memberDecryptionType","OpenIdConnect","authority","openId","clientSecret","metadataAddress","redirectBehavior","getClaimsFromUserInfoEndpoint","additionalScopes","additionalUserIdClaimTypes","additionalEmailClaimTypes","additionalNameClaimTypes","acrValues","expectedReturnAcrValue","Saml2","spNameIdFormat","saml","spOutboundSigningAlgorithm","spSigningBehavior","spMinIncomingSigningAlgorithm","spWantAssertionsSigned","spValidateCertificates","idpEntityId","idpBindingType","idpSingleSignOnServiceUrl","idpSingleLogoutServiceUrl","idpX509PublicCert","idpOutboundSigningAlgorithm","idpAllowUnsolicitedAuthnResponse","idpWantAuthnRequestsSigned","idpDisableOutboundLogoutRequests","idpAllowOutboundLogoutRequests","OrganizationSsoResponse","SsoUrls","callbackPath","signedOutCallbackPath","spEntityId","spMetadataUrl","spAcsUrl","BillingResponse","invoices","transactions","balance","paymentSource","BillingSourceResponse","BillingTransactionResponse","BillingInvoiceResponse","hasNoHistory","cardBrand","needsVerification","pdfUrl","paid","amount","createdDate","refunded","partiallyRefunded","refundedAmount","paymentMethodType","PlanResponse","product","isAnnual","nameLocalizationKey","descriptionLocalizationKey","canBeUsedByBusiness","baseSeats","baseStorageGb","maxCollections","maxUsers","hasAdditionalSeatsOption","maxAdditionalSeats","hasAdditionalStorageOption","maxAdditionalStorage","hasPremiumAccessOption","trialPeriodDays","hasSelfHost","hasPolicies","hasGroups","hasDirectory","hasEvents","has2fa","hasApi","hasSso","hasResetPassword","usersGetPremium","upgradeSortOrder","displaySortOrder","legacyYear","stripePlanId","stripeSeatPlanId","stripeStoragePlanId","stripePremiumAccessPlanId","basePrice","seatPrice","additionalStoragePricePerGb","premiumAccessOptionPrice","bitwardenProduct","additionalPricePerServiceAccount","baseServiceAccount","maxServiceAccount","hasAdditionalServiceAccountOption","maxProjects","maxAdditionalServiceAccounts","stripeServiceAccountPlanId","OrganizationResponse","businessName","businessAddress1","businessAddress2","businessAddress3","businessCountry","businessTaxNumber","billingEmail","plan","secretsManagerPlan","planType","seats","maxAutoscaleSeats","maxStorageGb","useGroups","useDirectory","useEvents","use2fa","useApi","useResetPassword","useSecretsManager","hasPublicAndPrivateKeys","usePasswordManager","smSeats","smServiceAccounts","maxAutoscaleSmSeats","maxAutoscaleSmServiceAccounts","SubscriptionResponse","storageName","storageGb","license","usingInAppPurchase","subscription","upcomingInvoice","BillingSubscriptionResponse","BillingSubscriptionUpcomingInvoiceResponse","trialEndDate","periodStartDate","periodEndDate","cancelledDate","cancelAtEndDate","cancelled","BillingSubscriptionItemResponse","quantity","sponsoredSubscriptionItem","addonSubscriptionItem","OrganizationSubscriptionResponse","expirationWithoutGracePeriod","secretsManagerBeta","PermissionsApi","accessEventLogs","accessImportExport","accessReports","createNewCollections","editAnyCollection","deleteAnyCollection","editAssignedCollections","deleteAssignedCollections","manageCiphers","manageGroups","manageSso","managePolicies","manageUsers","manageResetPassword","manageScim","ProfileOrganizationResponse","usePolicies","useSso","useKeyConnector","useScim","useCustomPermissions","useActivateAutofillPolicy","selfHost","ssoBound","resetPasswordEnrolled","providerId","providerName","familySponsorshipFriendlyName","familySponsorshipAvailable","planProductType","keyConnectorEnabled","familySponsorshipLastSyncDateString","familySponsorshipLastSyncDate","familySponsorshipValidUntilString","familySponsorshipValidUntil","familySponsorshipToDelete","accessSecretsManager","ProfileProviderOrganizationResponse","ProfileProviderResponse","ProfileResponse","providerOrganizations","premiumPersonally","premiumFromOrganization","culture","twoFactorEnabled","avatarColor","securityStamp","usesKeyConnector","PaymentResponse","userProfile","paymentIntentClientSecret","TaxInfoResponse","taxId","taxIdType","line1","line2","ListResponse","dr","continuationToken","OrganizationApiKeyInformationResponse","keyType","OrganizationAutoEnrollStatusResponse","KeysResponse","OrganizationKeysResponse","Organization","isProviderUser","canAccess","isOwner","isManager","canAccessEventLogs","canAccessImportExport","canAccessReports","canCreateNewCollections","canUseAdminCollections","canDeleteAnyCollection","canViewAllCollections","canEditAssignedCollections","canDeleteAssignedCollections","canViewAssignedCollections","canManageGroups","canManageSso","canManageDomainVerification","canManageScim","canManagePolicies","canManageUsers","canManageUsersPassword","canManageDeviceApprovals","isExemptFromPolicies","canViewSubscription","canEditSubscription","hasProvider","Msp","canEditPaymentMethods","canViewBillingHistory","canAccessSecretsManager","isFreeOrg","_organizations","getOrganizations","updateObservables","organizationsMap","canManageSponsorships","getValue","upsert","getFromState","getByIdentifier","setOrganizations","PolicyData","PolicyResponse","PolicyApiService","getPolicy","getPolicies","getPoliciesByToken","encodeRFC3986URIComponent","getPoliciesByInvitedUser","mapPoliciesFromToken","putPolicy","Policy","ResetPasswordPolicyOptions","autoEnrollEnabled","_policies","policies$","getEncryptedPolicies","policyType","policyFilter","checkPoliciesThatApplyToUser","decryptedPolicies","getDecryptedPolicies","diskPolicies","setDecryptedPolicies","obsPolicies","filteredPolicies","newPassword","toLocaleLowerCase","toLocaleUpperCase","getResetPasswordPolicyOptions","resetPasswordPolicyOptions","ResetPassword","policiesResponse","policyAppliesToUser","setEncryptedPolicies","policiesMap","policySet","Accepted","Provider","isProviderAdmin","canCreateOrganizations","ProviderAdmin","AccountService","InternalAccountService","UserVerificationApiServiceAbstraction","AuthRequestCryptoServiceImplementation","authReqPrivateKey","pubKeyEncryptedUserKey","decryptedUserKeyBytes","rsaDecrypt","pubKeyEncryptedMasterKey","pubKeyEncryptedMasterKeyHash","decryptedMasterKeyArrayBuffer","decryptedMasterKeyHashArrayBuffer","fromBufferToUtf8","PreloginRequest","TokenRequest","device","alterIdentityTokenHeaders","setTwoFactor","setPasswordlessAccessCode","passwordlessAuthRequest","toIdentityToken","scope","client_id","deviceName","authRequest","twoFactorToken","twoFactorProvider","twoFactorRemember","PasswordTokenRequest","grant_type","fromUtf8ToUrlB64","IdentityCaptchaResponse","KeyConnectorUserDecryptionOption","TrustedDeviceUserDecryptionOption","ServerConfigData","serverConfigResponse","featureStates","gitHash","server","ThirdPartyServerConfigData","utcDate","EnvironmentServerConfigData","cloudRegion","vault","EncryptionPair","ArrayBuffer","decryptedFromJson","encryptedFromJson","DataEncryptionPair","TemporaryDataEncryption","AccountData","AccountKeys","organizationKeys","providerKeys","cryptoSymmetricKey","deviceKey","cryptoMasterKey","initRecordEncryptionPairsFromJSON","decObj","AccountProfile","environmentUrls","pinProtected","serverConfig","AccountTokens","AccountDecryptionOptions","userDecryptionOptions","responseOptions","usingKeyConnector","LoginState","profile","tokens","decryptionOptions","loginState","adminAuthRequest","AuthResult","twoFactorProviders","requiresCaptcha","DeviceRequest","appId","pushToken","MasterPasswordPolicyResponse","KeyConnectorUserDecryptionOptionResponse","TrustedDeviceUserDecryptionOptionResponse","EncryptedPrivateKey","EncryptedUserKey","UserDecryptionOptionsResponse","TrustedDeviceOption","KeyConnectorOption","IdentityTokenResponse","accessToken","access_token","expiresIn","expires_in","refreshToken","refresh_token","tokenType","token_type","apiUseKeyConnector","masterPasswordPolicy","UserDecryptionOptions","IdentityTwoFactorResponse","ssoEmail2faSessionToken","LogInStrategy","tokenRequest","startLogIn","postIdentityToken","processTwoFactorResponse","processCaptchaResponse","processTokenResponse","buildDeviceRequest","buildTwoFactor","userProvidedTwoFactor","storedTwoFactorToken","getTwoFactorToken","Remember","saveAccountInformation","tokenResponse","accountInformation","decodeToken","sub","getDeviceKey","accountKeys","addAccount","hasPremiumPersonally","setTwoFactorToken","createKeyPairForOldAccount","PasswordLogInStrategy","forcePasswordResetReason","makePreloginKey","masterPasswordPolicyOptions","getMasterPasswordPolicyOptionsFromResponse","setMasterKeyEncryptedUserKey","getMasterKey","PasswordlessLogInStrategy","passwordlessCredentials","trySetUserKeyWithMasterKey","SsoTokenRequest","code_verifier","redirect_uri","SsoLogInStrategy","ssoAuthResult","shouldSetMasterKeyFromKeyConnector","convertNewSsoUserToKeyConnector","setMasterKeyFromUrl","userHasMasterPassword","masterKeyEncryptedUserKey","trySetUserKeyWithApprovedAdminRequestIfExists","trySetUserKeyWithDeviceKey","encDevicePrivateKey","encUserKey","decryptUserKeyWithDeviceKey","UserApiTokenRequest","client_secret","UserApiLogInStrategy","setApiKeyClientId","setApiKeyClientSecret","PasswordlessAuthRequest","logInStrategy","pushNotificationSubject","strategy","clearState","UserApi","hasUserKeyInMemory","Auto","getEverBeenUnlocked","preloginResponse","postPrelogin","authResponsePushNotification","notification","passwordlessLogin","pubKey","keyToEncrypt","encryptedMasterKeyHash","getKeyHash","encryptedKey","putAuthRequest","startSessionTimeout","clearSessionTimeout","sessionTimeout","UpdateDevicesTrustRequest","DeviceKeysUpdateRequest","DeviceTrustCryptoService","makeDeviceKey","devicePublicKey","devicePrivateKey","devicePublicKeyEncryptedUserKey","userKeyEncryptedDevicePublicKey","deviceKeyEncryptedDevicePrivateKey","deviceResponse","updateTrustedDeviceKeys","setDeviceKey","rotateDevicesTrust","oldUserKey","secretVerificationRequest","currentDeviceKeys","getDeviceKeys","decryptedDevicePublicKey","encryptedPublicKey","encryptedNewUserKey","encryptedDevicePublicKey","currentDeviceUpdateRequest","trustRequest","currentDevice","otherDevices","updateTrust","aesGenerateKey","encryptedDevicePrivateKey","DeviceResponse","TrustedDeviceKeysRequest","ProtectedDeviceResponse","DevicesApiServiceImplementation","getDeviceByIdentifier","getDevices","updateDevicesTrustRequestModel","KeyConnectorUserKeyRequest","SetKeyConnectorKeyRequest","logoutCallback","setUsesKeyConnector","getUsesKeyConnector","userNeedsMigration","loggedInUsingSso","getIsExternal","requiredByOrganization","userIsNotUsingKeyConnector","keyConnectorRequest","postUserKeyToKeyConnector","handleKeyConnectorError","postConvertToKeyConnector","masterKeyResponse","getMasterKeyFromKeyConnector","keyArr","legacyKeyConnectorUrl","privKey","setPasswordRequest","postSetKeyConnectorKey","setConvertAccountRequired","setConvertAccountToKeyConnector","getConvertAccountToKeyConnector","_email","_rememberEmail","decoded","fromUrlB64ToUtf8","setTokens","clientIdClientSecret","setToken","setRefreshToken","setClientId","setClientSecret","getClientId","getApiKeyClientId","getClientSecret","getApiKeyClientSecret","setAccessToken","getToken","getAccessToken","getRefreshToken","clearTwoFactorToken","clearToken","getTokenExpirationDate","d","setUTCSeconds","tokenSecondsRemaining","offsetSeconds","msRemaining","valueOf","tokenNeedsRefresh","email_verified","getName","getIssuer","iss","isArray","amr","UserVerificationApiService","postAccountVerifyOTP","postAccountRequestOTP","VerifyOTPRequest","userVerificationApiService","requestClass","alreadyHashed","validateInput","otp","ConfigApiServiceAbstraction","EncryptService","FileUploadService","AbstractStorageService","AbstractMemoryStorageService","TYPE","AccountFactory","accountConstructor","args","GlobalStateFactory","globalStateConstructor","StateFactory","globalStateFactory","accountFactory","createGlobal","createAccount","WindowState","GlobalState","storageService","makeAndGetAppId","getAnonymousAppId","existingId","htmlStorageLocation","Local","guid","ServerConfigResponse","ThirdPartyServerConfigResponse","EnvironmentServerConfigResponse","ConfigApiService","authed","ServerConfig","serverConfigData","getAgeInMilliseconds","expiresSoon","ONE_HOUR_IN_MILLISECONDS","ConfigService","configApiService","_serverConfig","_forceFetchConfig","refreshTimer$","timer","cloudRegion$","latestServerConfig$","delayWhen","saveConfig","getServerConfig","getFeatureFlag$","defaultValue","triggerServerConfigFetch","setServerConfig","checkServerMeetsVersionRequirement$","minimumRequiredServerVersion","SemVer","ConsoleLogService","timersMap","debug","write","Debug","Info","Warning","level","log","BaseEncryptedOrganizationKey","EncryptedOrganizationKey","ProviderEncryptedOrganizationKey","toData","providerKey","getProviderKey","sequentialize","cacheKey","descriptor","originalMethod","caches","getCache","argsCacheKey","onFinally","platformUtilService","setEverHadUserKey","storeAdditionalKeys","getKeyFromStorage","keySuffix","validateUserKey","clearAllStoredUserKeys","buildProtectedSymmetricKey","clearUserKey","clearStoredKeys","clearStoredUserKey","setUserKeyAutoUnlock","userKeyMasterKey","getCryptoMasterKey","getOrDeriveMasterKey","makeKey","clearMasterKey","getMasterKeyEncryptedUserKey","getEncryptedCryptoSymmetricKey","decUserKey","newKey","stretchKey","hashPurpose","pbkdf2","keyHash","setKeyHash","clearMasterKeyHash","storedPasswordHash","setOrgKeys","providerOrgs","encOrgKeyData","setDecryptedOrganizationKeys","setEncryptedOrganizationKeys","orgKeys","getOrgKeys","decryptedOrganizationKeys","getDecryptedOrganizationKeys","getEncryptedOrganizationKeys","setKey","encOrgKey","fromData","decOrgKey","makeDataEncKey","newSymKey","clearOrgKeys","memoryOnly","setProviderKeys","setDecryptedProviderKeys","setEncryptedProviderKeys","getProviderKeys","decryptedProviderKeys","getDecryptedProviderKeys","encProviderKeys","getEncryptedProviderKeys","clearProviderKeys","getPublicKey","inMemoryPublicKey","getPrivateKey","setPublicKey","makeOrgKey","shareKey","encPrivateKey","setDecryptedPrivateKey","setEncryptedPrivateKey","decryptedPrivateKey","getDecryptedPrivateKey","getEncryptedPrivateKey","keyFingerprint","userFingerprint","hkdfExpand","hashPhrase","clearKeyPair","keysToClear","clearPinKeys","pinProtectedUserKey","decryptMasterKeyWithPin","pinProtectedMasterKey","pinProtectedMasterKeyString","makeSendKey","keyMaterial","sendKey","hkdf","makeCipherKey","clearKeys","encValue","privateKeyValue","alg","min","rval","range","bitsNeeded","ceil","log2","bytesNeeded","mask","pow","byteArray","rawKey","shouldStoreKey","storePinKey","getUserKeyAutoUnlock","minimumEntropy","entropyPerWord","hashArr","phrase","hashNumber","remainder","divide","encryptionKey","protectedSymKey","stretchedEncryptionKey","Argon2id","saltHash","argon2","setCryptoMasterKeyAuto","setEncryptedPinProtected","setDecryptedPinProtected","migrateAutoKeyIfNeeded","oldAutoKey","getCryptoMasterKeyAuto","masterPasswordOnRestart","setCryptoMasterKeyBiometric","plainValue","encryptToBytes","encString","encBuffer","EncryptedObject","EncryptServiceImplementation","logMacFailures","plainBuf","encObj","aesEncrypt","macLen","resolveLegacyKey","fastParams","aesDecryptFastParameters","computedMac","hmacFast","macData","compareFast","logMacFailed","aesDecryptFast","encThing","hmac","aesDecrypt","decryptItems","classInitializers","MultithreadEncryptServiceImplementation","clear$","worker","Worker","restartTimeout","jsonItem","defaultIfEmpty","terminate","AzureFileUploadService","upload","renewalCallback","azureUploadBlob","azureUploadBlocks","urlObject","toUTCString","blobResponse","blockSize","getMaxBlockSize","blockIndex","numBlocks","blocksStaged","renewUrlIfNecessary","blockUrl","blockId","encodedBlockId","blockData","blockHeaders","blockRequest","blockResponse","blockListUrl","blockListXml","expiry","utfBlockId","blockIdList","xml","Version","month","day","compareTo","BitwardenFileUploadService","encryptedFileName","encryptedFileData","apiCall","fd","FormData","blob","Blob","filepath","contentType","azureFileUploadService","bitwardenFileUploadService","uploadData","fileUploadMethods","fileUploadType","Direct","postDirect","Azure","renewFileUploadUrl","rollback","ProviderData","EventData","MigrationBuilder","migrations","with","migrate","addMigrator","helper","migrator","runMigrator","newMigration","shouldMigrate","toVersion","updateVersion","MigrationHelper","currentVersion","getAccounts","userIds","account","IRREVERSIBLE","Migrator","fromVersion","startVersion","endVersion","FixPremiumMigrator","accounts","decodedToken","fixPremium","stateVersion","RemoveEverBeenUnlockedMigrator","everBeenUnlocked","removeEverBeenUnlocked","AddKeyTypeToOrgKeysMigrator","encryptedOrgKeys","newOrgKeys","updateOrgKey","RemoveLegacyEtmKeyMigrator","legacyEtmKey","updateAccount","MoveBiometricAutoPromptToAccount","noAutoPromptBiometrics","MoveStateVersionMigrator","MinVersionMigrator","MIN_VERSION","migrationHelper","SendFileData","SendTextData","SendData","FolderData","globals","authenticatedAccounts","accountActivity","accountDeserializer","buildAccountMapFromJSON","jsonAccounts","partialKeys","DDG_SHARED_KEY","secureStorageService","memoryStorageService","stateFactory","useAccountCache","accountsSubject","accounts$","activeAccountSubject","activeAccountUnlockedSubject","hasBeenInited","isRecoveredSession","accountDiskCache","setState","createGlobals","initAccountState","updateState","syncAccountFromDisk","storedActiveUser","pushAccounts","diskAccount","getAccountFromDisk","setAccountEnvironment","scaffoldNewAccountStorage","setActiveUser","clearDecryptedDataForActiveUser","clean","reconcileOptions","defaultInMemoryOptions","deAuthenticateAccount","dynamicallySetActiveUser","removeAccountFromDisk","removeAccountFromMemory","getTimeoutBasedStorageOptions","getAccount","saveAccount","getAlwaysShowDock","getGlobals","defaultOnDiskOptions","alwaysShowDock","setAlwaysShowDock","saveGlobals","apiKeyClientId","apiKeyClientSecret","getAutoConfirmFingerPrints","autoConfirmFingerPrints","setAutoConfirmFingerprints","getBiometricAwaitingAcceptance","biometricAwaitingAcceptance","getBiometricFingerprintValidated","biometricFingerprintValidated","setBiometricText","getBiometricUnlock","biometricUnlock","getHasPremiumPersonally","getHasPremiumFromOrganization","setHasPremiumPersonally","hasPremiumFromOrganization","setHasPremiumFromOrganization","defaultOnDiskLocalOptions","collapsedGroupings","convertAccountToKeyConnector","setCryptoMasterKey","nextValue","defaultSecureStorageOptions","saveSecureStorageKey","getUserKeyBiometric","hasUserKeyBiometric","setUserKeyBiometric","pinKeyEncryptedUserKey","pinKeyEncryptedUserKeyEphemeral","getCryptoMasterKeyB64","setCryptoMasterKeyB64","getCryptoMasterKeyBiometric","hasCryptoMasterKeyBiometric","getDecryptedCiphers","setDecryptedCiphers","getDecryptedCollections","setDecryptedCollections","getDecryptedCryptoSymmetricKey","setDecryptedCryptoSymmetricKey","getDecryptedSends","setDecryptedSends","disableAddLoginNotification","disableAutoTotpCopy","disableBadgeCounter","disableChangedPasswordNotification","disableContextMenuItem","getDisableGa","disableGa","setDisableGa","dismissedAutoFillOnPageLoadCallout","dontShowCardsCurrentTab","dontShowIdentitiesCurrentTab","getDuckDuckGoSharedKey","setDuckDuckGoSharedKey","existingDeviceKey","trustDeviceChoiceForDecryption","setAccountDecryptionOptions","setEmailVerified","getEnableAlwaysOnTop","accountPreference","enableAlwaysOnTop","globalPreference","setEnableAlwaysOnTop","getEnableBrowserIntegration","enableBrowserIntegration","setEnableBrowserIntegration","getEnableBrowserIntegrationFingerprint","enableBrowserIntegrationFingerprint","setEnableBrowserIntegrationFingerprint","getEnableCloseToTray","enableCloseToTray","setEnableCloseToTray","getEnableDuckDuckGoBrowserIntegration","enableDuckDuckGoBrowserIntegration","setEnableDuckDuckGoBrowserIntegration","getEnableFullWidth","enableFullWidth","setEnableFullWidth","getEnableMinimizeToTray","enableMinimizeToTray","setEnableMinimizeToTray","getEnableStartToTray","enableStartToTray","setEnableStartToTray","getEnableTray","enableTray","setEnableTray","getEncryptedCiphers","defaultOnDiskMemoryOptions","setEncryptedCiphers","getEncryptedCollections","setEncryptedCollections","setEncryptedCryptoSymmetricKey","getEncryptedFolders","setEncryptedFolders","getEncryptedSends","setEncryptedSends","getEntityId","entityId","setEntityId","getEntityType","entityType","setEntityType","getGlobalEnvironmentUrls","getEquivalentDomains","setEquivalentDomains","getEventCollection","eventCollection","setEventCollection","getInstalledVersion","installedVersion","setInstalledVersion","getLastActive","getLocalData","setLocalData","getLocale","setLocale","getMainWindowSize","mainWindowSize","setMainWindowSize","getMinimizeOnCopyToClipboard","minimizeOnCopyToClipboard","setMinimizeOnCopyToClipboard","neverDomains","getNoAutoPromptBiometricsText","noAutoPromptBiometricsText","setNoAutoPromptBiometricsText","getOpenAtLogin","openAtLogin","setOpenAtLogin","organizationInvitation","setOrganizationInvitation","getEmergencyAccessInvitation","emergencyAccessInvitation","setEmergencyAccessInvitation","passwordGenerationOptions","usernameGenerationOptions","getSecurityStamp","setSecurityStamp","getSettings","setSettings","getSsoOrgIdentifier","setSsoOrganizationIdentifier","ssoState","setTheme","setVaultTimeout","getVaultTimeoutAction","accountVaultTimeoutAction","globalVaultTimeoutAction","setVaultTimeoutAction","getApproveLoginRequests","approveLoginRequests","setApproveLoginRequests","getWindow","setWindow","getAvatarColor","setAvatarColor","activateAutoFillOnPageLoadFromPolicy","getSMOnboardingTasks","smOnboardingTasks","setSMOnboardingTasks","useMemory","storageLocation","getGlobalsFromMemory","useDisk","getGlobalsFromDisk","saveGlobalsToMemory","saveGlobalsToDisk","useSecureStorage","getAccountFromMemory","getUserIdFromMemory","cachedAccount","setDiskCache","Memory","Both","Disk","saveAccountToMemory","saveAccountToDisk","deleteDiskCache","deepClone","scaffoldNewAccountLocalStorage","scaffoldNewAccountSessionStorage","scaffoldNewAccountMemoryStorage","storedAccount","pruneInMemoryAccounts","requestedOptions","defaultOptions","Session","getActiveUserIdFromStorage","removeAccountFromLocalStorage","resetAccount","removeAccountFromSessionStorage","removeAccountFromSecureStorage","persistentAccountInformation","getGlobalRegion","timeoutAction","deserializer","stateUpdater","updatedState","withPrototypeForArrayMembers","memberConstructor","memberConverter","originalResult","getOwnPropertyDescriptors","withPrototypeForObjectValues","valuesConstructor","valuesConverter","DecryptParameters","WebCryptoFunctionService","crypto","subtle","wasmSupported","checkIfWasmSupported","algorithm","wcLen","passwordBuf","toBuf","pbkdf2Params","toWebCryptoAlgorithm","impKey","importKey","deriveBits","passwordArr","saltArr","pass","time","mem","hashLen","ArgonType","unloadRuntime","ikm","outputByteSize","hkdfParams","prk","infoBuf","infoArr","runningOkmLength","previousT","okm","md","md5","sha1","valueBytes","toByteString","digest","valueBuf","signingAlgorithm","sign","mac1","mac2","arr1","arr2","getBytes","rand","Uint32Array","createBuffer","putInt32","meta","encKeyByteString","macKeyByteString","decode64","parameters","dataBuffer","decipher","createDecipher","finish","rsaParams","impPrivateKey","jwkPrivateKey","exportKey","jwkPublicKeyParams","kty","ext","impPublicKey","bitLength","key1","key2","aesParams","generateKey","modulusLength","publicExponent","getRandomValues","buf","encodeUtf8","WebAssembly","instantiate","module","Module","Instance","UpdateAvatarRequest","_avatarUpdate$","avatarUpdate$","loadColorFromState","pushUpdate","putAvatar","NotificationResponse","contextId","payload","SyncCipherCreate","SyncCipherDelete","SyncCipherUpdate","SyncLoginDelete","SyncCipherNotification","SyncFolderCreate","SyncFolderDelete","SyncFolderUpdate","SyncFolderNotification","SyncVault","SyncCiphers","SyncOrgKeys","SyncSettings","UserNotification","SyncSendCreate","SyncSendUpdate","SyncSendDelete","SyncSendNotification","AuthRequest","AuthRequestResponse","AuthRequestPushNotification","OrganizationConnectionResponse","rawConfig","CardApi","FieldApi","IdentityApi","LoginUriApi","LoginApi","SecureNoteApi","AttachmentResponse","PasswordHistoryResponse","CipherResponse","h","SelectionReadOnlyResponse","CollectionResponse","CollectionDetailsResponse","CollectionAccessDetailsResponse","groups","users","assigned","OrganizationExportResponse","OrganizationSponsorshipSyncStatusResponse","lastSyncDate","ProviderOrganizationResponse","userCount","ProviderOrganizationOrganizationDetailsResponse","organizationName","OrganizationUserBulkPublicKeyResponse","ProviderUserBulkPublicKeyResponse","ProviderUserBulkResponse","ProviderUserResponse","ProviderUserUserDetailsResponse","ProviderResponse","requestDeviceType","requestIpAddress","responseDate","requestDate","requestDateUTC","UTC","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","dateNow","dateNowUTC","isExpired","DeviceVerificationResponse","isDeviceVerificationSectionEnabled","unknownDeviceVerificationEnabled","EmergencyAccessGranteeDetailsResponse","granteeId","waitTimeDays","EmergencyAccessGrantorDetailsResponse","grantorId","EmergencyAccessTakeoverResponse","keyEncrypted","EmergencyAccessViewResponse","KeyConnectorUserKeyResponse","PreloginResponse","RegisterResponse","SsoPreValidateResponse","TwoFactorAuthenticatorResponse","TwoFactorDuoResponse","secretKey","integrationKey","TwoFactorEmailResponse","TwoFactorProviderResponse","TwoFactorRecoverResponse","TwoFactorWebAuthnResponse","KeyResponse","migrated","ChallengeResponse","attestation","authenticatorSelection","challenge","fromUrlB64ToArray","excludeCredentials","extensions","pubKeyCredParams","rp","TwoFactorYubiKeyResponse","key3","key4","key5","nfc","BillingHistoryResponse","BillingPaymentResponse","TaxRateResponse","BreachAccountResponse","addedDate","breachDate","dataClasses","isVerified","logoPath","modifiedDate","pwnCount","GlobalDomainResponse","domains","excluded","DomainsResponse","globalEquivalentDomains","EventResponse","groupId","policyId","providerUserId","providerOrganizationId","actingUserId","ipAddress","installationId","systemUser","domainName","secretId","serviceAccountId","UserKeyResponse","AttachmentUploadDataResponse","cipherResponse","cipherMiniResponse","SendFileApi","SendTextApi","SendResponse","FolderResponse","SyncResponse","customUserAgent","isWebClient","isDesktopClient","IEBrowser","ChromeBrowser","EdgeBrowser","FirefoxBrowser","OperaBrowser","SafariBrowser","UnknownBrowser","VivaldiBrowser","Accept","identityToken","qsStringify","getCredentials","responseJson","isJsonResponse","TwoFactorProviders2","doAuthRefresh","getAuthRequests","getLastAuthRequest","activeRequests","m","getProfile","getUserSubscription","getTaxInfo","putProfile","putTaxInfo","postEmailToken","postEmail","postSecurityStamp","getAccountRevisionDate","postPremium","postIapCheck","postReinstatePremium","postCancelPremium","postAccountStorage","postAccountPayment","postAccountLicense","postAccountKey","postAccountVerifyEmail","postAccountVerifyEmailToken","postAccountRecoverDelete","postAccountRecoverDeleteToken","postAccountKdf","deleteSsoUser","postUserApiKey","postUserRotateApiKey","getUserBillingHistory","getUserBillingPayment","getCipher","getFullCipherDetails","getCipherAdmin","postCipher","postCipherCreate","postCipherAdmin","putCipher","putPartialCipher","putCipherAdmin","deleteCipherAdmin","deleteManyCiphers","deleteManyCiphersAdmin","putMoveCiphers","putShareCipher","putShareCiphers","putCipherCollections","putCipherCollectionsAdmin","postPurgeCiphers","putDeleteCipher","putDeleteCipherAdmin","putDeleteManyCiphers","putDeleteManyCiphersAdmin","putRestoreCipher","putRestoreCipherAdmin","putRestoreManyCiphers","putRestoreManyCiphersAdmin","postCipherAttachment","postCipherAttachmentLegacy","postCipherAttachmentAdminLegacy","deleteCipherAttachmentAdmin","postShareCipherAttachment","renewAttachmentUploadUrl","postAttachmentFile","getCollectionAccessDetails","getUserCollections","getManyCollectionsWithAccessDetails","getCollectionUsers","postCollection","putCollection","putCollectionUsers","deleteCollection","deleteManyCollections","deleteCollectionUser","getGroupUsers","putGroupUsers","deleteGroupUser","getPlans","postPublicImportDirectory","getTaxRates","getSettingsDomains","putSettingsDomains","getSync","getTwoFactorProviders","getTwoFactorOrganizationProviders","getTwoFactorAuthenticator","getTwoFactorEmail","getTwoFactorDuo","getTwoFactorOrganizationDuo","getTwoFactorYubiKey","getTwoFactorWebAuthn","getTwoFactorWebAuthnChallenge","getTwoFactorRecover","putTwoFactorAuthenticator","putTwoFactorEmail","putTwoFactorDuo","putTwoFactorOrganizationDuo","putTwoFactorYubiKey","putTwoFactorWebAuthn","rawId","getClientExtensionResults","AttestationObject","attestationObject","clientDataJson","clientDataJSON","deleteTwoFactorWebAuthn","putTwoFactorDisable","putTwoFactorOrganizationDisable","postTwoFactorRecover","postTwoFactorEmailSetup","getDeviceVerificationSettings","putDeviceVerificationSettings","getEmergencyAccessTrusted","getEmergencyAccessGranted","getEmergencyAccess","getEmergencyGrantorPolicies","putEmergencyAccess","deleteEmergencyAccess","postEmergencyAccessInvite","postEmergencyAccessReinvite","postEmergencyAccessAccept","postEmergencyAccessConfirm","postEmergencyAccessInitiate","postEmergencyAccessApprove","postEmergencyAccessReject","postEmergencyAccessTakeover","postEmergencyAccessPassword","postEmergencyAccessView","getCloudCommunicationsEnabled","getOrganizationConnection","createOrganizationConnection","updateOrganizationConnection","organizationConnectionId","deleteOrganizationConnection","postProviderSetup","getProvider","putProvider","getProviderUsers","getProviderUser","postProviderUserInvite","postProviderUserReinvite","postManyProviderUserReinvite","postProviderUserBulkConfirm","deleteManyProviderUsers","postProviderUserAccept","postProviderUserConfirm","postProviderUsersPublicKey","putProviderUser","deleteProviderUser","getProviderClients","postProviderAddOrganization","postProviderCreateOrganization","deleteProviderOrganization","getEvents","addEventParameters","getEventsCipher","getEventsOrganization","getEventsOrganizationUser","getEventsProvider","getEventsProviderUser","postEventsCollect","authHeader","getActiveBearerToken","getUserPublicKey","getHibpBreach","postBitPayInvoice","postSetupPayment","handleError","getKeyConnectorAlive","postCreateSponsorship","sponsoredOrgId","getSponsorshipSyncStatus","deleteRevokeSponsorship","sponsoringOrganizationId","deleteRemoveSponsorship","sponsoringOrgId","postPreValidateSponsorshipToken","sponsorshipToken","postRedeemSponsorship","postResendSponsorshipOffer","doRefreshToken","doApiTokenRefresh","deviceRequest","hasResponse","alterHeaders","pathParts","requestUrl","normalizePath","responseType","responseIsJson","tokenError","isTextResponse","Message","typeHeader","hashBytes","fromBufferToHex","hashStart","hashEnding","breachedAccounts","limit","throttleKey","allThrottles","throttles","getThrottles","argsThrottleKey","queue","exec","DeviceView","DevicesServiceImplementation","getDevices$","deviceResponses","getDeviceByIdentifier$","isDeviceKnownForUser$","updateTrustedDeviceKeys$","eventUploadService","uploadImmediately","orgIds","uploadEvents","EventRequest","checkOnInterval","clearEvents","connected","inactive","reconnectTimer","signalrConnection","off","withUrl","accessTokenFactory","skipNegotiation","transport","WebSockets","withHubProtocol","on","processNotification","onclose","reconnect","isAuthedAndUnlocked","updateConnection","reconnectFromActivity","disconnectFromInactivity","isAuthenticated","payloadUserId","UserId","myUserId","syncUpsertCipher","syncDeleteCipher","syncUpsertFolder","syncDeleteFolder","syncUpsertSend","syncDeleteSend","notificationId","OrganizationDomainSsoDetailsResponse","ssoAvailable","verifiedDate","OrganizationDomainResponse","txt","nextRunDate","jobRunCount","lastCheckedDate","OrganizationDomainSsoDetailsRequest","OrganizationUserResponse","accessAll","OrganizationUserUserDetailsResponse","OrganizationUserDetailsResponse","OrganizationUserResetPasswordDetailsResponse","OrganizationUserBulkResponse","OrganizationUserBulkRequest","ids","indexing","immediateSearchLocales","defaultSearchableMinLength","searchableMinLength","locale$","registeredPipeline","lunr","Pipeline","registerFunction","normalizeAccentsPipelineFunction","clearIndex","normalizeSearchQuery","indexCiphers","builder","Builder","pipeline","boost","extractor","uriExtractor","fieldExtractor","attachmentExtractor","results","getIndexForSearch","searchCiphersBasic","ciphersMap","searchResults","soWild","Query","wildcard","LEADING","TRAILING","q","tokenizer","term","sendsMatched","lowPriorityMatched","joined","protocolIndex","queryIndex","searchableFields","metadata","normalize","_settings","_disableFavicon","settings$","ed","B32Chars","SteamChars","period","digits","keyB32","isOtpAuth","isSteamAuth","getQueryParams","digitParams","periodParam","algParam","epoch","timeHex","leftPad","decToHex","timeBytes","fromHexToArray","keyBytes","b32ToBytes","offset","fullCode","trunc","b32ToHex","cleanedInput","bits","hex","byteIndex","chunk","signature","currentAction","getAvailableVaultTimeoutActions","pinIsEnabled","aUserKeyPinIsSet","anOldUserKeyPinIsSet","lockedCallback","loggedOutCallback","migrateKeyForNeverLockIfNeeded","startCheck","checkVaultTimeout","shouldLock","executeTimeoutAction","clearCache","lastActive","vaultTimeoutSeconds","SendRequest","fileLength","SendAccessResponse","creatorIdentifier","SendFileDownloadDataResponse","SendFileUploadDataResponse","fileUploadService","getSend","postSendAccess","getSendFileDownloadData","getSends","postSend","postFileTypeSend","renewSendFileUploadUrl","fileId","postSendFile","postSendFileLegacy","putSend","putSendRemovePassword","deleteSend","uploadDataResponse","generateMethods","legacyServerSendFileUpload","generatePostDirectCallback","generateRenewFileUploadUrlCallback","generateRollbackCallback","renewResponse","SendFile","SendText","Send","_sends","_sendViews","sends$","fileData","passwordHash","encryptFileData","parseFile","decSends","reader","FileReader","readAsArrayBuffer","onload","evt","onerror","sendsMap","decryptSends","decryptSendPromises","decryptedSends","CipherFileUploadService","SortedCiphersCache","comparator","sortedCiphersByUrl","timeouts","isCached","addCiphers","Ciphers","resetTimer","getLastUsed","getLastLaunched","getNext","updateLastUsedIndex","lastUsedIndex","lastLaunched","y","getNextIndex","CipherBulkDeleteRequest","CipherBulkMoveRequest","CipherBulkRestoreRequest","AttachmentRequest","CipherRequest","lastKnownRevisionDate","attachments2","attachmentRequest","CipherWithIdRequest","CipherBulkShareRequest","CipherCollectionsRequest","CipherCreateRequest","CipherPartialRequest","CipherShareRequest","CIPHER_KEY_ENC_MIN_SERVER_VER","cipherFileUploadService","sortedCiphersCache","sortCiphersByLastUsed","getDecryptedCipherCache","setDecryptedCipherCache","clearDecryptedCiphersState","keyForEncryption","keyForCipherKeyDecryption","originalCipher","updateModelfromExistingCipher","adjustPasswordHistoryLength","getCipherKeyEncryptionEnabled","userOrOrgKey","encryptCipherWithCipherKey","encryptAttachments","attachmentsModel","encAttachments","encryptObjProperty","encryptFields","fieldsModel","encFields","encField","encryptField","fieldModel","encryptPasswordHistories","phModels","encPhs","encPh","encryptPasswordHistory","phModel","reindexCiphers","grouped","agg","groupedCiphers","flat","getLocaleSortingFunction","getAllDecryptedForGrouping","groupingId","includeOtherTypes","defaultMatch","getAllFromApiForOrganization","cr","getLastUsedForUrl","getCipherForUrl","getLastLaunchedForUrl","getNextCipherForUrl","updateLastUsedIndexForUrl","updateLastUsedDate","ciphersLocalData","decryptedCipherCache","cached","saveNeverDomain","attachmentPromises","shareAttachmentWithServer","encCipher","encryptSharedCipher","shareManyWithServer","encCiphers","unencryptedFile","cData","filename","cipherKeyEncryptionEnabled","cipherEncKey","encFileName","dataEncKey","encData","clearEncryptedCiphersState","moveManyWithServer","deleteManyWithServer","deleteAttachment","aLastUsed","bLastUsed","bothNotNull","aName","bName","softDelete","setDeletedDate","softDeleteManyWithServer","clearDeletedDate","restoreManyWithServer","restores","existingCipher","existingHiddenFields","hiddenFields","ef","matchedField","attachmentView","attachmentResponse","theObj","modelProp","encryptCipherData","lastUsed","autofillOnPageLoadDefault","clearSortedCiphers","keyForCipherKeyEncryption","decryptedCipherKey","decryptMany","decryptedCollections","collectionCopy","adminRequest","legacyServerAttachmentFileUpload","FolderRequest","FolderApiService","postFolder","putFolder","deleteFolder","_folders","_folderViews","decryptFolders","updates","cId","decryptFolderPromises","decryptedFolders","_sync","sync$","OrganizationData","providerService","forceSync","allowThrowOnError","syncStarted","syncCompleted","needsSync","needsSyncing","syncProfile","syncFolders","syncCollections","syncCiphers","syncSends","syncSettings","syncPolicies","isEdit","localFolder","remoteFolder","shouldUpdate","localCipher","checkCollections","remoteCipher","localSend","remoteSend","stamp","syncProfileOrganizations","eqDomains","subscribers","messageCallback","storedMasterKey","ThemeBuilder","effectiveTheme","configuredTheme","systemTheme","updateSystemTheme","ThemingService","_theme","theme$","monitorThemeChanges","getSystemTheme","monitorConfiguredThemeChanges","monitorSystemThemeChanges","matchMedia","JslibServicesModule","useFactory","deps","language","accountService","deleteAccount","verificationRequest","cryptoFunctionservice","getOrganizationUser","includeGroups","getOrganizationUserGroups","getAllUsers","includeCollections","getOrganizationUserResetPasswordDetails","postOrganizationUserInvite","postOrganizationUserReinvite","postManyOrganizationUserReinvite","postOrganizationUserAcceptInit","postOrganizationUserAccept","postOrganizationUserConfirm","postOrganizationUsersPublicKey","postOrganizationUserBulkConfirm","putOrganizationUserBulkEnableSecretsManager","putOrganizationUser","putOrganizationUserGroups","putOrganizationUserResetPassword","deleteOrganizationUser","deleteManyOrganizationUsers","revokeOrganizationUser","revokeManyOrganizationUsers","restoreOrganizationUser","restoreManyOrganizationUsers","enrollIfRequired","organizationSsoIdentifier","orgAutoEnrollStatusResponse","orgKeyResponse","orgPublicKey","errors","controlErrors","keyError","getBilling","getSubscription","getLicense","createLicense","updatePayment","upgrade","updatePasswordManagerSeats","updateSecretsManagerSubscription","updateSeats","updateStorage","verifyBank","reinstate","updateLicense","importDirectory","getOrCreateApiKey","getApiKeyInformation","organizationApiKeyType","rotateApiKey","updateTaxInfo","updateKeys","getSso","updateSso","selfHostedSyncLicense","subscribeToSecretsManager","anonHubConnection","HubConnectionBuilder","MessagePackHubProtocol","ProcessNotification","defaultErrorMessage","_orgDomains$","orgDomains$","orgDomainId","orgDomain","copyDnsTxt","dnsTxt","orgDomains","existingOrgDomains","findIndex","existingOrgDomain","orgDomainIds","orgDomainService","getAllByOrgId","resultOrgDomain","getByOrgIdAndOrgDomainId","post","orgDomainReq","verify","getClaimedOrgDomainByEmail","ContainerService","attachToGlobal","SyncedItemMetadata","itemBuilder","initializer","initializeAs","keyValuePair","SessionSyncer","subject","metaData","ignoreNUpdates","_buffer","observe","sessionKey","updateFromMemory","listenForUpdates","stream","skip","updateSession","updateMessageCommand","updateFromMessage","serializedValue","getBypassCache","unBuiltValue","browserSession","findStorageService","__syncedItemMetadata","__sessionSyncers","buildSyncer","storageSerice","syncer","isMemoryStorageService","sessionSync","buildOptions","BrowserOrganizationService","BrowserPolicyService","handleActivateAutofillPolicy","ActivateAutofill","activated","autofillEnabled","UnauthGuardService","MemoryStorageService","SystemService","reloadCallback","reloadInterval","clearClipboardTimeout","clearClipboardTimeoutFunction","startProcessReload","cancelProcessReload","executeProcessReload","clipboardValue","timeoutMs","clearSeconds","clipboardValueNow","clearPendingClipboard","NotificationQueueMessageType","ContextMenusBackground","contextMenuClickedHandler","contextMenus","onClicked","cipherAction","commandToRetry","tabSendMessageData","NotificationQueueMessage","AddLoginQueueMessage","uriView","loginView","NotificationBackground","notificationQueue","processMessage","cleanupNotificationQueue","handleUnlockCompleted","getDataForTab","responseCommand","addLogin","changedPassword","removeTabFromNotificationQueue","retryMessage","saveOrUpdateCredentials","saveNever","forms","getFormsWithPasswordFields","unlockVault","checkNotificationQueue","doNotificationQueueCheck","currentTab","expires","tabDomain","AddLogin","typeData","isVaultLocked","wasVaultLocked","getCurrentTheme","removeIndividualVault","webVaultURL","ChangePassword","UnlockVault","loginInfo","loginDomain","normalizedUsername","disabledAddLogin","pushAddLoginToQueue","usernameMatches","pushChangePasswordToQueue","changeData","currentPassword","passwordMatches","pushUnlockVaultToQueue","queueMessage","getDecryptedCipherById","folderExists","newCipher","toCipherView","editItem","senderTab","messageData","TabsBackground","main","notificationBackground","onFocusChanged","focusedWindowId","refreshBadge","refreshMenu","onActivated","activeInfo","onReplaced","addedTabId","removedTabId","onReplacedRan","onUpdated","changeInfo","onUpdatedRan","factory","cachedServices","opts","alwaysInitializeNewService","instanceOrPromise","doNotStoreInitializedService","AccountSettings","Account","groupings","onChanged","namespace","logServiceFactory","logServiceOptions","AbstractChromeStorageService","chromeStorageApi","keyedObj","BrowserLocalStorageService","local","BrowserMemoryStorageService","session","LocalBackedSessionStorageService","keyGenerationService","localStorage","sessionStorage","getLocalSession","getSessionEncKey","sessionEncKey","localSession","setLocalSession","sessionJson","setSessionEncKey","setEncryptedLocalSession","setDecryptedLocalSession","jsonSession","encSession","storedKey","makeEphemeralKey","cryptoFunctionServiceFactory","cryptoFunctionServiceOptions","encryptServiceOptions","KeyGenerationService","numBytes","diskStorageServiceFactory","memoryStorageServiceFactory","keyGenerationServiceFactory","stateServiceFactory","service","secureStorageServiceFactory","stateServiceOptions","organizationServiceFactory","policyServiceFactory","tokenServiceFactory","appIdServiceFactory","environmentServiceFactory","BrowserMessagingService","messagingServiceFactory","platformUtilsServiceFactory","platformUtilsServiceOptions","apiServiceFactory","apiServiceOptions","BrowserCryptoService","cryptoServiceFactory","systemLanguage","localesDirectory","getLocalesJson","supportedTranslationLocales","defaultLocale","localeNames","defaultMessages","localeMessages","Intl","Collator","numeric","sensitivity","loadMessages","messagesObj","formattedLocale","locales","placeProp","replaceToken","replaceContent","_locale","_translationLocale","getMessage","i18nServiceFactory","i18nServiceOptions","deviceTrustCryptoServiceFactory","devicesApiServiceFactory","authServiceFactory","keyConnectorServiceOptions","keyConnectorServiceFactory","twoFactorServiceFactory","passwordStrengthServiceFactory","authRequestCryptoServiceFactory","cipherFileUploadServiceFactory","fileUploadServiceFactory","BrowserSettingsService","settingsServiceFactory","configServiceFactory","configApiServiceFactory","configServiceOptions","cipherServiceFactory","searchServiceFactory","ROOT_ID","COPY_IDENTIFIER_ID","GENERATE_PASSWORD_ID","NOOP_COMMAND_SUFFIX","MainContextMenuHandler","initRunning","_options","serviceOptions","removeAll","contexts","parentId","menuItemId","loadOptions","sanitizedTitle","sanitizeContextMenuTitle","createChildItem","isNullOrEmpty","noAccess","noLogins","NOT_IMPLEMENTED","_args","LISTENED_TO_COMMANDS","CipherContextMenuHandler","mainContextMenuHandler","mv3Create","serviceCache","cipherContextMenuHandler","shouldListen","activeTabs","getActiveTabs","updateForCipher","totpServiceFactory","userVerificationServiceFactory","userVerificationApiServiceFactory","eventCollectionServiceFactory","eventUploadServiceFactory","AutofillScript","script","properties","autosubmit","AutoFillConstants","UsernameFieldNames","TotpFieldNames","PasswordFieldIgnoreList","ExcludedAutofillTypes","CreditCardAutoFillConstants","CardAttributes","CardAttributesExtended","CardHolderFieldNames","CardHolderFieldNameValues","CardNumberFieldNames","CardNumberFieldNameValues","CardExpiryFieldNames","CardExpiryFieldNameValues","ExpiryMonthFieldNames","ExpiryYearFieldNames","CVVFieldNames","CardBrandFieldNames","MonthAbbr","YearAbbrShort","YearAbbrLong","IdentityAutoFillConstants","IdentityAttributes","FullNameFieldNames","FullNameFieldNameValues","TitleFieldNames","FirstnameFieldNames","MiddlenameFieldNames","LastnameFieldNames","EmailFieldNames","AddressFieldNames","AddressFieldNameValues","Address1FieldNames","Address2FieldNames","Address3FieldNames","PostalCodeFieldNames","CityFieldNames","StateFieldNames","CountryFieldNames","PhoneFieldNames","UserNameFieldNames","CompanyFieldNames","IsoCountries","afghanistan","albania","algeria","andorra","angola","anguilla","antarctica","argentina","armenia","aruba","australia","austria","azerbaijan","bahamas","bahrain","bangladesh","barbados","belarus","belgium","belize","benin","bermuda","bhutan","bolivia","botswana","brazil","bulgaria","burundi","cambodia","cameroon","canada","chad","chile","china","colombia","comoros","congo","croatia","cuba","cyprus","denmark","djibouti","dominica","ecuador","egypt","eritrea","estonia","ethiopia","fiji","finland","france","gabon","gambia","georgia","germany","ghana","gibraltar","greece","greenland","grenada","guadeloupe","guam","guatemala","guernsey","guinea","guyana","haiti","honduras","hungary","iceland","india","indonesia","iraq","ireland","israel","italy","jamaica","japan","jersey","jordan","kazakhstan","kenya","kiribati","kuwait","kyrgyzstan","latvia","lebanon","lesotho","liberia","liechtenstein","lithuania","luxembourg","macao","macedonia","madagascar","malawi","malaysia","maldives","mali","malta","martinique","mauritania","mauritius","mayotte","mexico","moldova","monaco","mongolia","montenegro","montserrat","morocco","mozambique","myanmar","namibia","nauru","nepal","netherlands","nicaragua","niger","nigeria","niue","norway","oman","pakistan","palau","panama","paraguay","peru","philippines","pitcairn","poland","portugal","qatar","reunion","romania","rwanda","samoa","senegal","serbia","seychelles","singapore","slovakia","slovenia","somalia","spain","sudan","suriname","swaziland","sweden","switzerland","taiwan","tajikistan","tanzania","thailand","togo","tokelau","tonga","tunisia","turkey","turkmenistan","tuvalu","uganda","ukraine","uruguay","uzbekistan","vanuatu","venezuela","vietnam","yemen","zambia","zimbabwe","IsoStates","alabama","alaska","arizona","arkansas","california","colorado","connecticut","delaware","florida","hawaii","idaho","illinois","indiana","iowa","kansas","kentucky","louisiana","maine","maryland","massachusetts","michigan","minnesota","mississippi","missouri","montana","nebraska","nevada","ohio","oklahoma","oregon","pennsylvania","tennessee","texas","utah","vermont","virginia","washington","wisconsin","wyoming","IsoProvinces","alberta","manitoba","ontario","quebec","saskatchewan","injectAutofillScripts","autofillV2","injectedScripts","injectedScript","executeScriptInTab","formData","passwordFields","loadPasswordFields","passwordFieldsWithoutForm","pf","formKeys","formCount","soloFormKey","formKey","formPasswordFields","uf","findUsernameField","passwords","totpPromise","didAutofill","pd","fillScript","generateFillScript","skipUsernameOnlyFill","onlyEmptyFields","onlyVisibleFields","tabUrl","untrustedIframe","allowUntrustedIframe","delay_between_operations","skipLastUsed","Cipher_ClientAutofilled","doAutoFillOnTab","fromCommand","lastLaunchedCipher","doAutoFillActiveTab","getActiveTab","filledFields","fieldNames","hasValue","opid","viewable","matchingIndex","findMatchingFieldIndex","matchingField","fillByOpid","generateLoginFillScript","generateCardFillScript","generateIdentityFillScript","usernames","totps","inUntrustedIframe","passField","findTotpField","elementNumber","fieldIsFuzzyMatch","autoCompleteType","totpValue","setFillScriptForFocus","fillFields","forCustomFieldsOnly","isExcludedType","attr","isFieldMatch","makeScriptAction","selectInfo","siOptions","fieldAttrsContain","maxLength","colonIndex","fullMonth","fullYear","partYear","makeScriptActionWithValue","pageUrl","containsVal","doesContain","filledState","stateLower","isoState","filledCountry","countryLower","isoCountry","excludedTypes","containsOptions","checkValueContains","cipherData","dataProp","fieldProp","dataValue","doFill","canBeHidden","canBeReadOnly","mustBeEmpty","isPassword","valueIsLikePassword","cleanedValue","readonly","htmlID","htmlName","placeholder","passwordField","withoutForm","usernameField","totpField","names","fieldPropertyIsPrefixMatch","fieldPropertyIsMatch","property","separator","sepIndex","fieldVal","regexParts","csvParts","csvVals","fuzzyMatch","lastField","lastPasswordField","clearClipboardAlarmName","sendTabsMessage","alarmState","setAlarmTimeInternal","commandName","GeneratePasswordToClipboardCommand","generatePasswordToClipboard","delay_ms","clearAlarmTime","setAlarmTime","AutofillTabCommand","doAutofillTabCommand","collectPageDetails","doAutofillTabWithCipherCommand","ContextMenuClickedHandler","autofillAction","generatePasswordToClipboardCommand","passwordGenerationServiceFactory","autofillServiceFactory","getIdentifier","parentMenuItemId","isPasswordRepromptRequired","UpdateBadge","existingServices","listenedToCommands","badgeAction","getBrowserAction","getSidebarAction","initServices","setBadgeBackgroundColor","setLoggedOut","setLocked","setUnlocked","setBadgeIcon","clearBadgeText","setBadgeText","countText","isOperaSidebar","setActionText","setSideBarText","iconSuffix","setActionIcon","setSidebarActionIcon","setTitle","setIcon","useSyncApiCalls","lastFocusedWindow","existingServiceCache","singleActionPopoutTabIds","defaultPopoutWindowOptions","openUnlockPrompt","senderWindowId","openSingleActionPopout","closeUnlockPrompt","closeSingleActionPopout","openPasswordRepromptPrompt","promptWindowPath","closePasswordRepromptPrompt","popupWindowURL","singleActionPopoutKey","senderWindow","popupWidth","windowOptions","left","top","popupWindow","createWindow","popoutKey","BrowserConfigService","BrowserI18nService","BrowserMessagingPrivateModeBackgroundService","BrowserSendService","checkSafari","BrowserFolderService","CommandsBackground","processCommand","onCommand","autoFillLogin","openPopup","getTabFromCurrentWindowId","collectPageDetailsForContentScript","IdleBackground","notificationsService","idleTimer","idleState","idle","idleHandler","newState","onStateChanged","setDetectionInterval","pollIdle","queryState","NativeMessagingBackground","runtimeBackground","resolver","secureSetupResolve","onAdded","connect","port","connecting","connectedCallback","disconnect","sharedSecret","validatingFingerprint","showFingerprintDialog","showWrongUserDialog","onDisconnect","timestamp","encryptMessage","secureCommunication","getResponse","rawMessage","abs","userKeyB64","sendUnencrypted","RuntimeBackground","systemService","browserPopoutWindowService","pageDetailsToAutoFill","onInstalledReason","lockedVaultPendingNotifications","onInstalled","checkOnInstalled","backgroundMessageListener","popupOnlyContext","bitwardenBackgroundMessageListener","logout","avatarUpdateService","addEditCipherUrl","openBitwardenExtensionTab","AutofillV2","reseedStorage","autofillTimeout","autofillPage","referrer","tabToAutoFill","loginToAutoFill","WebRequestBackground","pendingAuthRequests","webRequest","onAuthRequired","resolveAuthCredentials","onCompleted","completeAuthRequest","onErrorOccurred","authCredentials","MainBackground","isPrivateMode","backgroundWindow","nativeMessagingBackground","syncNotifierService","that","backgroundMessagingService","authRequestCryptoService","containerService","commandsBackground","tabsBackground","_tab","contextMenusBackground","idleBackground","webRequestBackground","bootstrap","getPrivateModeWindows","onWindowCreated","forLocked","needStorageReseed","needsStorageReseed","override","syncInternal","lastSyncAgo","scheduleNextSync","syncTimeout","FileDownloadBuilder","_request","fileType","downloadMethod","fileNameLower","endsWith","BrowserFileDownloadService","createObjectURL","BrowserMessagingPrivateModePopupService","PasswordRepromptComponent","InitService","screen","availHeight","htmlEl","platform","screenLeft","screenTop","PopupSearchService","mainSearchService","consoleLogService","needsBackgroundInit","mainBackground","localBgService","createLocalBgService","bitwardenMain","getBgService","ServicesModule","initService","stateServiceAbstraction","AppModule","positionClass","shouldApplySafariHeightFix","bootstrapModule","preserveWhitespaces","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","O","chunkIds","notFulfilled","Infinity","fulfilled","getPrototypeOf","mode","__esModule","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","chunkId","globalThis","Function","Symbol","toStringTag","nmd","scriptUrl","importScripts","currentScript","scripts","baseURI","installedChunks","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}