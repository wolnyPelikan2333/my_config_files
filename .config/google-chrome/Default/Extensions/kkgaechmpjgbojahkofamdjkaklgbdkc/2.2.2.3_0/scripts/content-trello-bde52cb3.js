(()=>{var e,t,r,i={36338:(e,t,r)=>{"use strict";r.d(t,{g:()=>getTheme});var i=r(62079),o=r.n(i),n=r(52020),a=r.n(n),s=r(73324),l=r.n(s),c=r(88546),d=r.n(c),p=r(99595),u=r.n(p),h=r(66775),m=r.n(h),f=r(2201),y=r.n(f),v=r(57445),g=r.n(v),_=r(26171),w=r(55827),b=r(54656),k=r(42429),C=r(50716),D=r(31631),T=r(59766),S=r(23291),E=r(74966),P=r(11493);const A={blue:{base:"#5787da"},orange:{base:"#da9b49"},yellow:{base:"#f0cd65"},lime:{base:"#b4c84e"},red:{base:"#c25550"},pink:{base:"#cc7eb5"},green:{base:"#7ab878"},sky:{base:"#6cacd7"},purple:{base:"#866ad9"},black:{base:"#9298ac"}},R=o()(A),I={getColorList:()=>R,getColorComponents:e=>e&&A[e]?A[e]:A.blue},x={red:{base:"#f44338",light:"#fddad7",dark:"#75201e"},pink:{base:"#e91e63",light:"#fbd2e0",dark:"#821137"},purple:{base:"#9c27b0",light:"#ecd4f0",dark:"#2b0b30"},"deep-purple":{base:"#673ab7",light:"#e1d8f1",dark:"#201238"},indigo:{base:"#7da9fa",light:"#ecf2fe",dark:"#264d94"},blue:{base:"#2196f3",light:"#d3eafd",dark:"#14568c"},"light-blue":{base:"#03a9f4",light:"#cdeefd",dark:"#015175"},cyan:{base:"#00bcd4",light:"#ccf2f7",dark:"#008ea1"},teal:{base:"#009688",light:"#cceae8",dark:"#00302c"},green:{base:"#4caf50",light:"#dcefdc",dark:"#204a21"},"light-green":{base:"#8bc34a",light:"#e8f3db",dark:"#2f4219"},lime:{base:"#cddc39",light:"#f5f8d8",dark:"#6d751e"},yellow:{base:"#ffeb3b",light:"#fffbd8",dark:"#998d23"},amber:{base:"#ffc107",light:"#fff3ce",dark:"#997405"},orange:{base:"#ff9800",light:"#ffebcc",dark:"#995c00"},"deep-orange":{base:"#ff5722",light:"#ffded3",dark:"#993314"},brown:{base:"#795548",light:"#e5dddb",dark:"#120c0b"},gray:{base:"#9e9e9e",light:"#ececec",dark:"#383838"},hoki:{base:"#607d8b",light:"#e0e5e8",dark:"#1a2226"},default:{base:"#bdbdbd",light:"#eeeeee",dark:"#3b3b3b"}},$=o()(x),z={getColorList:()=>$,getColorComponents:e=>e&&x[e]?x[e]:x.default};var O=r(37710),B=r(7493),j=r(414);function ownKeys(e,t){var r=o()(e);if(a()){var i=a()(e);t&&(i=l()(i).call(i,(function(t){return d()(e,t).enumerable}))),r.push.apply(r,i)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r,i,o=null!=arguments[t]?arguments[t]:{};t%2?u()(r=ownKeys(Object(o),!0)).call(r,(function(t){(0,_.Z)(e,t,o[t])})):m()?y()(e,m()(o)):u()(i=ownKeys(Object(o))).call(i,(function(t){g()(e,t,d()(o,t))}))}return e}const N={action:{hoverOpacity:.1},primary:{main:"#2979ff",contrastText:"#ffffff"},success:{main:"#26d395"},info:{main:"#2196f3"},neutral:{main:"#616161",light:"#9f9f9f",dark:"#444444",contrastText:"#ffffff"},scrollbar:{main:"#dddddd",light:"#bdbdbd",dark:"#9e9e9e"},collections:I,iCals:z,trelloBoards:O.Z.getAllColors(),trelloLabels:B.K.getAllColors(),trelloOrganizations:["linear-gradient(#0747a6, #008da6)","linear-gradient(#006644, #00875a)","linear-gradient(#403294, #0747a6)","linear-gradient(#b22865, #cd5a91)","linear-gradient(#cc4223, #cb7d25)"]},F={mode:"dark",action:{hoverOpacity:.1},primary:{main:"#90caf9",contrastText:"#000000"},success:{main:"#66bb6a"},info:{main:"#29b6f6"},neutral:{main:"#e0e0e0",light:"#f0f0f0",dark:"#666666",contrastText:"#ffffff"},background:{default:"#121212",paper:"#121212"},scrollbar:{main:"rgba(255, 255, 255, 0.08)",light:"rgba(255, 255, 255, 0.12)",dark:"rgba(255, 255, 255, 0.16)"},collections:I,iCals:z,trelloBoards:O.Z.getAllColors(),trelloLabels:B.K.getAllColors(),trelloOrganizations:["linear-gradient(#0747a6, #008da6)","linear-gradient(#006644, #00875a)","linear-gradient(#403294, #0747a6)","linear-gradient(#b22865, #cd5a91)","linear-gradient(#cc4223, #cb7d25)"]},getScrollbarStyles=e=>({"&::-webkit-scrollbar":{width:e.spacing(1.75),height:e.spacing(1.75),backgroundColor:"transparent","&-button":{"&end, &:start":{"&:increment, &:decrement":{display:"none"}}},"&-thumb":{minHeight:e.spacing(8.75),border:"4px solid transparent",backgroundClip:"padding-box",backgroundColor:e.palette.scrollbar.main,boxShadow:"none",borderRadius:e.spacing(1),"&:hover":{backgroundColor:e.palette.scrollbar.light},"&:active":{backgroundColor:e.palette.scrollbar.dark}},"&-corner":{backgroundColor:"transparent"}}}),M={components:{MuiButton:{defaultProps:{disableElevation:!0},styleOverrides:{root:{textTransform:"none"}}},MuiTextField:{styleOverrides:{root:{[`& .${w.Z.error}`]:{marginLeft:0}}}},MuiInputBase:{styleOverrides:{inputMultiline:e=>{let{theme:t}=e;return _objectSpread({},getScrollbarStyles(t))}}},MuiOutlinedInput:{styleOverrides:{root:{[`&.${b.Z.focused}`]:{[`& .${b.Z.notchedOutline}`]:{top:"-4px"}}},inputSizeSmall:{fontSize:"0.875rem",height:"1.643em"}}},MuiDialogActions:{styleOverrides:{spacing:e=>{let{theme:t}=e;return{gap:t.spacing(2),padding:t.spacing(0,3,3),".MuiButton-root":{marginLeft:0}}}}},MuiDialogContent:{styleOverrides:{root:e=>{let{theme:t}=e;return _objectSpread({paddingBottom:t.spacing(3)},getScrollbarStyles(t))}}},MuiDivider:{styleOverrides:{root:{backgroundColor:"transparent"}}},MuiMenu:{styleOverrides:{list:e=>{let{theme:t}=e;return _objectSpread({overflow:"auto"},getScrollbarStyles(t))}}},MuiMenuItem:{styleOverrides:{root:e=>{let{theme:t}=e;return{margin:t.spacing(0,1),paddingLeft:t.spacing(1),paddingRight:t.spacing(1),fontSize:"13px",borderRadius:t.shape.borderRadius,"&:hover":{backgroundColor:t.palette.action.hover},[`&.${k.Z.selected}`]:{backgroundColor:t.palette.action.selected}}}}},MuiFormControl:{defaultProps:{hiddenLabel:!0,size:"small"}},MuiSelect:{defaultProps:{IconComponent:j.ReactComponent,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{sx:{[`.${k.Z.root} .${C.Z.root}`]:{maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}}},styleOverrides:{root:e=>{let{theme:t}=e;return{fontSize:"0.875rem",borderRadius:t.shape.borderRadius}},outlined:{display:"flex",alignItems:"center",minHeight:"1.643em",lineHeight:"1.643"}}},MuiTypography:{styleOverrides:{root:e=>{let{theme:t}=e;return{color:t.palette.text.primary,userSelect:"none"}}}},MuiYearCalendar:{styleOverrides:{root:e=>{let{theme:t}=e;return _objectSpread({boxSizing:"border-box"},getScrollbarStyles(t))}}},MuiPickersDay:{styleOverrides:{root:e=>{let{theme:t}=e;return{[`&.${S.o.selected}`]:{"&:hover, &:focus":{backgroundColor:t.palette.primary.main}}}}}},MuiPickersMonth:{styleOverrides:{monthButton:e=>{let{theme:t}=e;return{[`&.${E.P.selected}`]:{"&:hover, &:focus":{backgroundColor:t.palette.primary.main}}}}}},MuiPickersYear:{styleOverrides:{yearButton:e=>{let{theme:t}=e;return{[`&.${P.f.selected}`]:{"&:hover, &:focus":{backgroundColor:t.palette.primary.main}}}}}}},typography:{body3:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"700",fontSize:"13px",lineHeight:"1.45",letterSpacing:"0.15px"},body4:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"400",fontSize:"13px",lineHeight:"1.45",letterSpacing:"0.15px"},body5:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"400",fontSize:"12px",lineHeight:"1.66"}}};function getTheme(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{darkMode:t=!1,themeOptions:r={}}=e;return(0,D.Z)(_objectSpread(_objectSpread({},(0,T.Z)(M,r)),{},{palette:t?F:N}))}},37710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(41266),o=r(86981),n=r.n(o),a=r(10349),s=r.n(a),l=r(62079),c=r.n(l);const d=["getAllColors"],p={default:{base:"#344563",background:"#dee3eb",selected:"#cad1db",primary:"#303243",secondary:"#454867"},blue:{base:"#0079bf",background:"#bde1f5",selected:"#a1d3ee",primary:"#2c446e",secondary:"#344c76"},orange:{base:"#d29034",background:"#fad7a5",selected:"#fbd196",primary:"#65471d",secondary:"#70532b"},green:{base:"#519839",background:"#caecc1",selected:"#bde4b2",primary:"#28522f",secondary:"#3a6441"},red:{base:"#b04632",background:"#f9c8c1",selected:"#f3aca2",primary:"#57201e",secondary:"#6c2b28"},purple:{base:"#89609e",background:"#edd2f9",selected:"#e6c3f4",primary:"#4e3e7a",secondary:"#614882"},pink:{base:"#cd5a91",background:"#ffdbef",selected:"#f8c5e1",primary:"#6a234c",secondary:"#7b294e"},lime:{base:"#40a35b",background:"#bbedcc",selected:"#a8e1bb",primary:"#1e5634",secondary:"#20653b"},sky:{base:"#05aecc",background:"#bceaf1",selected:"#a6e0e9",primary:"#10505b",secondary:"#155b67"},grey:{base:"#70777b",background:"#c5c5c5",selected:"#bababa",primary:"#303243",secondary:"#252843"},getAllColors(){const{getAllColors:e}=this;return(0,i.Z)(this,d)},getColor(e){var t;if(e&&n()(t=s()(c()(this.getAllColors()))).call(t,(t=>t===e)))return this[e];return this.default}}},7493:(e,t,r)=>{"use strict";r.d(t,{K:()=>p});var i=r(41266),o=r(86981),n=r.n(o),a=r(10349),s=r.n(a),l=r(62079),c=r.n(l);const d=["getAllColors"],p={default:{base:"#344563",background:"#dee3eb",selected:"#cad1db",primary:"#303243",secondary:"#454867"},green:{base:"#7bc86c",background:"#caecc1",selected:"#bde4b2",primary:"#28522f",secondary:"#3a6441"},green_light:{base:"#b7ddb0",background:"#e6f6e3",selected:"#d4ecd0",primary:"#28522f",secondary:"#3a6441"},green_dark:{base:"#5aac44",background:"#bce1b1",selected:"#a4d897",primary:"#28522f",secondary:"#3a6441"},orange:{base:"#ffaf3f",background:"#fad7a5",selected:"#fbd196",primary:"#65471d",secondary:"#70532b"},orange_light:{base:"#fad29c",background:"#ffebce",selected:"#f5dbb4",primary:"#65471d",secondary:"#70532b"},orange_dark:{base:"#e79217",background:"#fcce8d",selected:"#f8c67f",primary:"#65471d",secondary:"#70532b"},yellow:{base:"#f5dd29",background:"#ffeeab",selected:"#f4e299",primary:"#5f4d1a",secondary:"#645525"},yellow_light:{base:"#f5ea92",background:"#fff5d0",selected:"#f5e8b7",primary:"#5f4d1a",secondary:"#645525"},yellow_dark:{base:"#e6c60d",background:"#f5e18f",selected:"#f0d980",primary:"#5f4d1a",secondary:"#645525"},lime:{base:"#6deca9",background:"#bbedcc",selected:"#a8e1bb",primary:"#1e5634",secondary:"#20653b"},lime_light:{base:"#b3f1d0",background:"#d5f8e1",selected:"#bbeacb",primary:"#1e5634",secondary:"#20653b"},lime_dark:{base:"#4ed583",background:"#a4e2b9",selected:"#97ddaf",primary:"#1e5634",secondary:"#20653b"},red:{base:"#f07d6e",background:"#f9c8c1",selected:"#f3aca2",primary:"#57201e",secondary:"#6c2b28"},red_light:{base:"#efb3ab",background:"#ffddd9",selected:"#f3c7c2",primary:"#57201e",secondary:"#6c2b28"},red_dark:{base:"#cf513d",background:"#f4b1a6",selected:"#eb9e91",primary:"#57201e",secondary:"#6c2b28"},pink:{base:"#ff8ed4",background:"#ffdbef",selected:"#f8c5e1",primary:"#6a234c",secondary:"#7b294e"},pink_light:{base:"#f9c2e4",background:"#ffeaf7",selected:"#f8d5e9",primary:"#6a234c",secondary:"#7b294e"},pink_dark:{base:"#e568af",background:"#f5c5e0",selected:"#eeb1d3",primary:"#6a234c",secondary:"#7b294e"},blue:{base:"#5ba4cf",background:"#bde1f5",selected:"#a1d3ee",primary:"#2c446e",secondary:"#344c76"},blue_light:{base:"#8bbdd9",background:"#ddf1fc",selected:"#c5e6f9",primary:"#2c446e",secondary:"#344c76"},blue_dark:{base:"#026aa7",background:"#9fd3f1",selected:"#89c8ed",primary:"#2c446e",secondary:"#344c76"},sky:{base:"#29cce5",background:"#bceaf1",selected:"#a6e0e9",primary:"#10505b",secondary:"#155b67"},sky_light:{base:"#8fdfeb",background:"#d2f2f7",selected:"#bdebf2",primary:"#10505b",secondary:"#155b67"},sky_dark:{base:"#00aecc",background:"#a3dce5",selected:"#8ad3de",primary:"#10505b",secondary:"#155b67"},purple:{base:"#cd8de5",background:"#edd2f9",selected:"#e6c3f4",primary:"#4e3e7a",secondary:"#614882"},purple_light:{base:"#dfc0eb",background:"#efdef6",selected:"#e6d2ee",primary:"#4e3e7a",secondary:"#614882"},purple_dark:{base:"#a86cc1",background:"#e2bff1",selected:"#dbb1ec",primary:"#4e3e7a",secondary:"#614882"},black:{base:"#555555",background:"#c5c5c5",selected:"#bababa",primary:"#303243",secondary:"#252843"},black_light:{base:"#7e7e7e",background:"#d8d8d8",selected:"#d1d1d1",primary:"#303243",secondary:"#252843"},black_dark:{base:"#212121",background:"#b7b7b7",selected:"#afafaf",primary:"#303243",secondary:"#252843"},getAllColors(){const{getAllColors:e}=this;return(0,i.Z)(this,d)},getColor(e){var t;if(e&&n()(t=s()(c()(this.getAllColors()))).call(t,(t=>t===e)))return this[e];return this.default}}},29937:(e,t,r)=>{"use strict";var i=r(57647),o=r.n(i),n=r(45181),a=r.n(n),s=(r(21703),r(32120),r(52262),r(67635),r(77287),r(57658),r(90476),r(76459),r(99892),r(30541),r(35581),r(46314),r(92087),r(24506),r(20787),r(57442),r(48675),r(33105),r(63408),r(14590),r(3462),r(33824),r(1439),r(87585),r(55315),r(16586),r(19258),r(84811),r(34286),r(52550),r(1999),r(61886),r(59422),r(8e4),r(39890),r(46273),r(3087),r(23252),r(6461),r(32372),r(4763),r(66342),r(40787),r(1094),r(23647),r(68216),r(88449),r(31672),r(74326),r(15581),r(78631),r(48746),r(57640),r(25387),r(64211),r(12771),r(62962),r(71790),r(51568),r(26349),r(6391),r(57412),r(37343),r(45042),r(30800),r(41396),r(67427),r(32279),r(54537),r(13384),r(2490),r(85567),r(18359),r(5332),r(79433),r(59849),r(59461),r(82499),r(34514),r(26877),r(64994),r(9924),r(64411),r(72608),r(41874),r(66043),r(23748),r(71501),r(60855),r(43847),r(38564),r(10072),r(23042),r(99137),r(71957),r(96306),r(103),r(8582),r(90618),r(74592),r(88440),r(58276),r(35082),r(12813),r(18222),r(24838),r(38563),r(50336),r(7512),r(74442),r(87713),r(46603),r(70100),r(10490),r(13187),r(98098),r(60092),r(19041),r(30666),r(51638),r(62975),r(15728),r(46056),r(44299),r(5162),r(50292),r(29427),r(99964),r(75238),r(4987),r(43565),r(1025),r(77479),r(5794),r(34582),r(47896),r(12647),r(98558),r(84018),r(97507),r(61605),r(49076),r(34999),r(71969),r(88921),r(96248),r(27561),r(13599),r(37868),r(64362),r(15389),r(46006),r(3440),r(90401),r(66244),r(45164),r(89772),r(91238),r(88910),r(54837),r(87485),r(56767),r(69916),r(76651),r(61437),r(63252),r(35285),r(17454),r(39865),r(86035),r(50058),r(67501),r(85576),r(609),r(21568),r(44177),r(96431),r(53431),r(40050),r(54534),r(95090),r(34744),r(48824),r(44130),r(35954),r(16850),r(26182),r(8922),r(5835),r(8970),r(84444),r(78206),r(76478),r(79715),r(12714),r(5964),r(43561),r(32049),r(86020),r(56585),r(82801),r(84633),r(61295),r(7994),r(46229),r(17330),r(62062),r(66695),r(85395),r(69188),r(73696),r(2565),r(46078),r(28834),r(11843),r(38691),r(15134),r(31754),r(52483),r(18459),r(8004),r(56777)),l=r(49083),c=r(67270),d=r(88076),p=r(57207),u=r(25660),h=r(28211),m=r(40024),f=r.n(m),y=r(88946),v=r.n(y),g=r(99595),_=r.n(g),w=r(57445),b=r.n(w),k=r(51791),C=r.n(k),D=r(90143),T=r.n(D),S=r(56626),E=r.n(S),P=r(67552),A=r.n(P),R=r(86981),I=r.n(R),x=r(52020),$=r.n(x),z=r(73324),O=r.n(z),B=r(88546),j=r.n(B),N=r(66775),F=r.n(N),M=r(2201),H=r.n(M),L=r(26171),U=r(26881),K=r(62079),W=r.n(K),G=r(8937),q=r(29704),Z=r(13627);function ownKeys(e,t){var r=W()(e);if($()){var i=$()(e);t&&(i=O()(i).call(i,(function(t){return j()(e,t).enumerable}))),r.push.apply(r,i)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r,i,o=null!=arguments[t]?arguments[t]:{};t%2?_()(r=ownKeys(Object(o),!0)).call(r,(function(t){(0,L.Z)(e,t,o[t])})):F()?H()(e,F()(o)):_()(i=ownKeys(Object(o))).call(i,(function(t){b()(e,t,j()(o,t))}))}return e}function _getDecoratorsApi(){_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function _createElementDescriptor(e){var t,r=_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function _coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function _hasDecorators(e){return e.decorators&&e.decorators.length}function _isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let V=function _decorate(e,t,r,i){var o,n=_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function _coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(_isDataDescriptor(o.descriptor)||_isDataDescriptor(i.descriptor)){if(_hasDecorators(o)||_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(_hasDecorators(o)){if(_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([(0,q.SG)(["$injector","$rootScope","$window","$interval","$log","$timeout","$translate","dialogSrv","licenseSrv","notificationSrv","planywayIntegrationSrv","platformSrv","settingsSrv","telemetrySrv"])],(function(e,t){return{F:class ExtensionAppCommonService extends t{constructor(t,r,i,o,n,a,s,l,c,d,p,u,h,m){super(t,r,i,o,n,a,s,l,c,d,p,u,h,m),e(this)}},d:[{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"get",key:"_userSettings",value:function _userSettings(){return this._settingsSrv.user}},{kind:"method",key:"getExpandedLayoutPanel",value:function getExpandedLayoutPanel(){return G.sF.Scheduler}},{kind:"method",key:"isPlanywayShown",value:function isPlanywayShown(){var e,t;if(!this._planywayIntegrationSrv.isSignedIn())return!1;if(this._collectionSrv.isCurrentCollectionUnavailable)return!1;let r=this._trelloIntegrationSrv.getTrelloContext();return!(!r||!r.boardId)&&(0===W()(this._trelloUserSettings.global.boards).length?(this._trelloUserSettings.global.boards[r.boardId]={planywayShown:!0},!0):null!==(e=null===(t=this._trelloUserSettings.global.boards[r.boardId])||void 0===t?void 0:t.planywayShown)&&void 0!==e&&e)}},{kind:"method",key:"setPlanywayShown",value:function setPlanywayShown(e){let t=this._trelloIntegrationSrv.getTrelloContext();if(!t||!t.boardId)return;let r=this._trelloUserSettings.global.boards,i=r[t.boardId];delete r[t.boardId],r[t.boardId]=_objectSpread(_objectSpread({},i),{},{planywayShown:e}),this._userSettings.global.saveAsync()}},{kind:"method",key:"getPlanywayOrientation",value:function getPlanywayOrientation(){var e,t;if(!this._planywayIntegrationSrv.isSignedIn())return;if(this._collectionSrv.isCurrentCollectionUnavailable)return;let r=this._trelloIntegrationSrv.getTrelloContext();return r&&r.boardId?null!==(e=null===(t=this._trelloUserSettings.global.boards[r.boardId])||void 0===t?void 0:t.planywayOrientation)&&void 0!==e?e:G.U1.Left:void 0}},{kind:"method",key:"setPlanywayOrientation",value:function setPlanywayOrientation(e){let t=this._trelloIntegrationSrv.getTrelloContext();if(!t||!t.boardId)return;let r=this._trelloUserSettings.global.boards,i=r[t.boardId];delete r[t.boardId],r[t.boardId]=_objectSpread(_objectSpread({},i),{},{planywayOrientation:e}),this._userSettings.global.saveAsync()}},{kind:"get",key:"_trelloUserSettings",value:function _trelloUserSettings(){return{local:this._userSettings.local.settings.provider[G.lP.Trello],global:this._userSettings.global.settings.provider[G.lP.Trello]}}}]}}),Z.U);var Y=r(18486),X=r(3362),Q=r(54847),J=r.n(Q),ee=r(59863),te=r.n(ee),re=r(35820),ie=r.n(re),oe=r(77738),ne=r.n(oe),ae=r(82617),se=r(43386);function ExtensionPlatformService_ownKeys(e,t){var r=W()(e);if($()){var i=$()(e);t&&(i=O()(i).call(i,(function(t){return j()(e,t).enumerable}))),r.push.apply(r,i)}return r}function ExtensionPlatformService_objectSpread(e){for(var t=1;t<arguments.length;t++){var r,i,o=null!=arguments[t]?arguments[t]:{};t%2?_()(r=ExtensionPlatformService_ownKeys(Object(o),!0)).call(r,(function(t){(0,L.Z)(e,t,o[t])})):F()?H()(e,F()(o)):_()(i=ExtensionPlatformService_ownKeys(Object(o))).call(i,(function(t){b()(e,t,j()(o,t))}))}return e}function ExtensionPlatformService_getDecoratorsApi(){ExtensionPlatformService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!ExtensionPlatformService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ExtensionPlatformService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ExtensionPlatformService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ExtensionPlatformService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ExtensionPlatformService_createElementDescriptor(e){var t,r=ExtensionPlatformService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ExtensionPlatformService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ExtensionPlatformService_hasDecorators(e){return e.decorators&&e.decorators.length}function ExtensionPlatformService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ExtensionPlatformService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ExtensionPlatformService_toPropertyKey(e){var t=function ExtensionPlatformService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const le="planywayTrelloFireKeyRequested";let ce=function ExtensionPlatformService_decorate(e,t,r,i){var o,n=ExtensionPlatformService_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ExtensionPlatformService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(ExtensionPlatformService_isDataDescriptor(o.descriptor)||ExtensionPlatformService_isDataDescriptor(i.descriptor)){if(ExtensionPlatformService_hasDecorators(o)||ExtensionPlatformService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(ExtensionPlatformService_hasDecorators(o)){if(ExtensionPlatformService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}ExtensionPlatformService_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,ExtensionPlatformService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([(0,q.SG)(["$injector","$rootScope","$log","$window","$interval","$timeout","$translate","htmlHelperSrv","notificationSrv"])],(function(e,t){class ExtensionPlatformService extends t{constructor(t,r,i,o,n,a,s,l,c){super(t,r,i,o,n,a,s,l,c),e(this),this._onRetryCallbackMap=new(J()),this._onProgressCallbackMap=new(J());try{chrome.runtime.onMessage.addListener((e=>{var t,r;switch(e.type){case G.Nx.OnRetry:null===(t=this._onRetryCallbackMap.get(e.retryId))||void 0===t||t({response:e.response,retries:e.retries});break;case G.Nx.OnProgress:null===(r=this._onProgressCallbackMap.get(e.progressId))||void 0===r||r({direction:e.direction,percent:e.percent})}}))}catch{}this._htmlHelperSrv.injectScript((e=>{document.addEventListener(e,(e=>{try{e.detail&&document.dispatchEvent(new KeyboardEvent(e.detail.event,{key:e.detail.key}))}catch{}}))}),le)}}return{F:ExtensionPlatformService,d:[{kind:"get",key:"_appCommonSrv",value:function _appCommonSrv(){return this._appCommonSrvLazy||(this._appCommonSrvLazy=this._$injector.get("appCommonSrv")),this._appCommonSrvLazy}},{kind:"get",key:"_calendarCardsSrv",value:function _calendarCardsSrv(){return this._calendarCardsSrvLazy||(this._calendarCardsSrvLazy=this._$injector.get("calendarCardsSrv")),this._calendarCardsSrvLazy}},{kind:"get",key:"_collectionSrv",value:function _collectionSrv(){return this._collectionSrvLazy||(this._collectionSrvLazy=this._$injector.get("collectionSrv")),this._collectionSrvLazy}},{kind:"get",key:"_planywayIntegrationSrv",value:function _planywayIntegrationSrv(){return this._planywayIntegrationSrvLazy||(this._planywayIntegrationSrvLazy=this._$injector.get("planywayIntegrationSrv")),this._planywayIntegrationSrvLazy}},{kind:"get",key:"_settingsSrv",value:function _settingsSrv(){return this._settingsSrvLazy||(this._settingsSrvLazy=this._$injector.get("settingsSrv")),this._settingsSrvLazy}},{kind:"get",key:"_trelloIntegrationSrv",value:function _trelloIntegrationSrv(){return this._trelloIntegrationSrvLazy||(this._trelloIntegrationSrvLazy=this._$injector.get("trelloIntegrationSrv")),this._trelloIntegrationSrvLazy}},{kind:"method",key:"getPlatformUrl",value:function getPlatformUrl(e){if(e)return/^data:((?:\w+\/(?:(?!;).)+)?)((?:;[\w\W]*?[^;])*),(.+)$/.test(e)?e:chrome.runtime.getURL(e.replace(/^(\.){0,2}\\/,""))}},{kind:"method",key:"getAppPlatform",value:function getAppPlatform(){return ae.hx.Trello}},{kind:"method",key:"getAppType",value:function getAppType(){return ae.pR.Extension}},{kind:"method",key:"clearAppStorageAsync",value:async function clearAppStorageAsync(){}},{kind:"method",key:"closeAppAsync",value:async function closeAppAsync(){}},{kind:"method",key:"reloadAppAsync",value:async function reloadAppAsync(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{await this._requestBackgroundAsync(G.Nx.ReloadApp,{exceptCurrent:e})}catch(e){this._$log.error("Planyway failed to reload:"),this._$log.error(e)}}},{kind:"method",key:"getTelemetryDataAsync",value:async function getTelemetryDataAsync(){let e=`un_${ne()()}`,t=!1;try{let r=await this._requestBackgroundAsync(G.Nx.GetTelemetryData);r.unauthorizedId?e=r.unauthorizedId:await this._requestBackgroundAsync(G.Nx.SetTelemetryData,{unauthorizedId:e}),(async()=>{try{await this.exchangeSiteDataAsync(G.jj.SaveTelemetryData)}catch{}})(),t=r.isInstallSent}catch(e){this._$log.error("Planyway failed to get telemetry data:"),this._$log.error(e)}return{unauthorizedId:e,isInstallSent:t}}},{kind:"method",key:"setTelemetryDataAsync",value:async function setTelemetryDataAsync(e){try{await this._requestBackgroundAsync(G.Nx.SetTelemetryData,e)}catch(e){this._$log.error("Planyway failed to set telemetry data:"),this._$log.error(e)}}},{kind:"method",key:"getAppStorageDataAsync",value:async function getAppStorageDataAsync(){try{var e;let t=await this._requestBackgroundAsync(G.Nx.GetAppStorageData);return ExtensionPlatformService_objectSpread(ExtensionPlatformService_objectSpread({isLoginDialogShown:!1,doNotShowPushNotificationsBanner:!1},t.storageData),{},{flags:ExtensionPlatformService_objectSpread({telemetry:!0},null===(e=t.storageData)||void 0===e?void 0:te()(e))})}catch(e){this._$log.error("Planyway failed to get app storage data:"),this._$log.error(e)}return{isLoginDialogShown:!0,flags:{telemetry:!1}}}},{kind:"method",key:"setAppStorageDataAsync",value:async function setAppStorageDataAsync(e){try{await this._requestBackgroundAsync(G.Nx.SetAppStorageData,{storageData:e})}catch(e){this._$log.error("Planyway failed to set app storage data:"),this._$log.error(e)}}},{kind:"method",key:"getPushNotificationsSubscriptionAsync",value:async function getPushNotificationsSubscriptionAsync(){try{return await this.exchangeSiteDataAsync(G.jj.LoadPushNotificationsSubscription)}catch(e){this._$log.error("Planyway failed to get notifications subscriptions:"),this._$log.error(e)}}},{kind:"method",key:"setPushNotificationsSubscriptionAsync",value:function setPushNotificationsSubscriptionAsync(e){(async()=>{try{await this.exchangeSiteDataAsync(G.jj.SavePushNotificationsSubscription,e)}catch{}})()}},{kind:"method",key:"startAppNotificationsPollingAsync",value:async function startAppNotificationsPollingAsync(e){try{await this._requestBackgroundAsync(G.Nx.StartAppNotificationsPolling,e)}catch(e){this._$log.error("Planyway failed to start app notifications polling:"),this._$log.error(e)}}},{kind:"method",key:"setAppUnreadNotificationsCountAsync",value:async function setAppUnreadNotificationsCountAsync(e){try{await this._requestBackgroundAsync(G.Nx.SetAppUnreadNotificationsCount,{count:e})}catch(e){this._$log.error("Planyway failed to set app unread notifications count:"),this._$log.error(e)}}},{kind:"method",key:"restAsync",value:async function restAsync(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!chrome.runtime)return(0,Y.Z)((0,X.Z)(ExtensionPlatformService.prototype),"restAsync",this).call(this,e,t,r);r.onRetry&&(r.retryId=ne()(),this._onRetryCallbackMap.set(r.retryId,r.onRetry)),r.onProgress&&(r.progressId=ne()(),this._onProgressCallbackMap.set(r.progressId,r.onProgress));let i=await this._requestBackgroundAsync(G.Nx.Rest,{method:e,url:t,options:r});return r.onRetry&&this._onRetryCallbackMap.delete(r.retryId),r.onProgress&&this._onProgressCallbackMap.delete(r.progressId),i.response}},{kind:"method",key:"openOrCreateCollectionAsync",value:async function openOrCreateCollectionAsync(){let e=this._appCommonSrv.getCancellationToken("open-or-create-collection"),t=await this._getLastOpenedCollectionIdAsync();if(t)this.setCurrentCollectionId(t);else{let r=await this._trelloIntegrationSrv.getTrelloContextAsync();if(!r.boardId)return;if(this._appCommonSrv.isPlanywayShown()||(this._appCommonSrv.setSchedulerButtonBusy(!1),await this._$rootScope.$onceAsync(G.FK.PlanywayShowing),this._appCommonSrv.setSchedulerButtonBusy(!0)),e.isCanceled())return;t=(await this._collectionSrv.createCollectionAsync({name:r.boardName})).id;let i=this._planywayIntegrationSrv.getPrimaryAccount();this._collectionSettings.global.settings.calendar={[r.boardId]:{accountType:i.accountType,isConnected:!0,isSelected:!0}},this._collectionSettings.global.settings.provider[G.lP.Trello].contextBoardId=r.boardId,await this._collectionSettings.global.saveAsync(),this._userSettings.global.settings.collection[t].account[i.accountId]=[r.boardId],await this._userSettings.global.saveAsync()}}},{kind:"method",key:"canDeleteCollection",value:function canDeleteCollection(e){var t;let r=this._userSettings.global.settings.collection[e];return!r||!r.settings||r.settings.provider[G.lP.Trello].contextBoardId!==(null===(t=this._trelloIntegrationSrv.getTrelloContext())||void 0===t?void 0:t.boardId)}},{kind:"method",key:"extractCardOptionsAsync",value:async function extractCardOptionsAsync(e){let t=(0,Y.Z)((0,X.Z)(ExtensionPlatformService.prototype),"extractCardOptionsAsync",this).call(this,e);if(t)return t;let r=(t=>{let r=e.attr("href");if(r){let e=r.match(/^\/c\/(\w+)/);if(e)return e[1];if(e=r.match(/^\/card\/board\/-\/[0-9a-f]{24}\/([0-9a-f]{24})/),e)return e[1]}else if(e.attr("data-card-id"))return e.attr("data-card-id");let i=new Error("Unable to extract Trello IDs from card");throw i.card=null===(t=e[0])||void 0===t?void 0:t.outerHTML,i})();if(!r)return;let i=await this._trelloIntegrationSrv.getTrelloContextAsync();if(!i.accountId)return;let o=await this._calendarCardsSrv.getCalendarCardByIdAsync(i.accountId,ae.eT.TrelloCard,r);return o?{id:r,accountType:ae.Qm.Trello,accountId:i.accountId,calendarId:o.calendarId,cardType:o.cardType,cardRole:o.cardRole}:void 0}},{kind:"method",key:"fireKeydownEvent",value:function fireKeydownEvent(e){this._$window.document.dispatchEvent(new CustomEvent(le,{detail:{key:e,event:"keydown"}}))}},{kind:"get",key:"_userSettings",value:function _userSettings(){return this._settingsSrv.user}},{kind:"get",key:"_collectionSettings",value:function _collectionSettings(){return this._settingsSrv.collection}},{kind:"method",key:"_getLastOpenedCollectionIdAsync",value:async function _getLastOpenedCollectionIdAsync(){let e=this._collectionSrv.getCollections();if(0===e.length)return;let t,r,i=await this._trelloIntegrationSrv.getTrelloContextAsync();if(i.boardId){for(let o of e){let e=this._userSettings.global.settings.collection[o.id];e&&e.settings&&(e.settings.provider[G.lP.Trello].contextBoardId===i.boardId&&(!t||e.lastOpenDate>t)&&(t=e.lastOpenDate,r=o.id))}return r}}},{kind:"method",key:"_requestBackgroundAsync",value:function _requestBackgroundAsync(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;return function platformRetryAsync(){return new(ie())(((o,n)=>{chrome.runtime.sendMessage(ExtensionPlatformService_objectSpread({type:e},t),(async e=>{if(e)e.error?n(e.error):o(e);else if(i<r)try{i++;let e=await platformRetryAsync();o(e)}catch(e){n(e)}else n(new Error("Empty response"))}))}))}()}}]}}),se.m);var de=r(49425),pe=r(95877);function ExtensionTrelloIntegrationService_getDecoratorsApi(){ExtensionTrelloIntegrationService_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!ExtensionTrelloIntegrationService_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=ExtensionTrelloIntegrationService_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ExtensionTrelloIntegrationService_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=ExtensionTrelloIntegrationService_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function ExtensionTrelloIntegrationService_createElementDescriptor(e){var t,r=ExtensionTrelloIntegrationService_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function ExtensionTrelloIntegrationService_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function ExtensionTrelloIntegrationService_hasDecorators(e){return e.decorators&&e.decorators.length}function ExtensionTrelloIntegrationService_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ExtensionTrelloIntegrationService_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function ExtensionTrelloIntegrationService_toPropertyKey(e){var t=function ExtensionTrelloIntegrationService_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ue=function ExtensionTrelloIntegrationService_decorate(e,t,r,i){var o,n=ExtensionTrelloIntegrationService_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function ExtensionTrelloIntegrationService_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(ExtensionTrelloIntegrationService_isDataDescriptor(o.descriptor)||ExtensionTrelloIntegrationService_isDataDescriptor(i.descriptor)){if(ExtensionTrelloIntegrationService_hasDecorators(o)||ExtensionTrelloIntegrationService_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(ExtensionTrelloIntegrationService_hasDecorators(o)){if(ExtensionTrelloIntegrationService_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}ExtensionTrelloIntegrationService_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,ExtensionTrelloIntegrationService_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([(0,q.SG)(["$injector","$rootScope","$log","$window","$timeout","$interval","$translate","appCommonSrv","dialogSrv","notificationSrv","planywayIntegrationSrv","platformSrv","settingsSrv","telemetrySrv","collectionSrv"])],(function(e,t){return{F:class ExtensionTrelloIntegrationService extends t{constructor(t,r,i,o,n,a,s,l,c,d,p,u,h,m,f){super(t,r,i,o,n,a,s,l,c,d,p,u,h,m,f),e(this)}},d:[{kind:"method",key:"getTrelloContextAsync",value:async function getTrelloContextAsync(){return this._trelloContext=await(async e=>{let t=pe.Xb.unnamespaced().getString("idMe"),r=I()(e=this._planywayIntegrationSrv.getConnectedAccounts(ae.Qm.Trello)).call(e,(e=>e.trelloMemberId===t));if(!r)return{};let i,o,n,a=r.accountId;try{if(/^\/b\//.test(this._$window.location.pathname)){var s,l;let e=this._$window.location.pathname.match(/^\/b\/(\w+)/);if(!e||e.length<2)throw new Error(`Cannot extract current board id from location! Location: ${window.location.pathname}`);let t=e[1],r=null===(s=this._cache.get(a))||void 0===s?void 0:I()(l=s.boards).call(l,(e=>e.shortId===t));if(r)i=r.id,o=r.name;else{let e=await this.restAsync(a,G.Tu.Get,`/boards/${t}`,"Get Trello board by short ID",{fields:"name"});i=e.id,o=e.name}}else if(/^\/c\//.test(this._$window.location.pathname)){let e=this._$window.location.pathname.match(/^\/c\/(\w+)/);if(!e||e.length<2)throw new Error(`Cannot extract current card id from location! Location: ${window.location.pathname}`);let t,r=e[1];if(this._trelloCardsSrv.isCurrentCollectionInitialized&&(t=this._trelloCardsSrv.getCalendarCardById(a,r,{cardType:ae.eT.TrelloCard})),t)i=t.providerCard.boardId,n=t.id;else{let e=await this.restAsync(a,G.Tu.Get,`/cards/${r}`,"Get Trello card by short ID",{fields:"idBoard"});i=e.idBoard,n=e.id}}return{accountId:a,boardId:i,boardName:o,cardId:n,memberId:t}}catch(e){return this._$log.error("Trello get context error:"),this._$log.error(e),this._telemetrySrv.logError("Trello get context error",e,{class:this.constructor.name,method:this.getTrelloContextAsync.name}),{}}})(),this._trelloContext.accountId||await this._planywayIntegrationSrv.signOutAsync(),this._trelloContext}}]}}),de.P);var he=r(37023),me=r(68841),fe=r(66783),ye=r(19485),ve=r(82638),ge=r(20946),_e=r(47304),we=r(90566),be=r(18347),ke=r(21226),Ce=r(38044),De=r(5875),Te=r(87217),Se=r(97808),Ee=r(97175),Pe=r(37342),Ae=r(35002),Re=r(74951),Ie=r(77979),xe=r(76224),$e=r(63162),ze=r(38495),Oe=r(4205),Be=r(7473),je=r(91250),Ne=r(34988),Fe=r(12784),Me=r(69117),He=r(74874),Le=r(76029),Ue=r(41092),Ke=r(42940),We=r(46579),Ge=r(34144),qe=r(76463),Ze=r(98743),Ve=r(88093),Ye=r(33439),Xe=r(77159),Qe=r(81948),Je=r(12442),et=r(60610),tt=r(2682),rt=r(19755),it=r.n(rt);function RootResizerController_getDecoratorsApi(){RootResizerController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!RootResizerController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=RootResizerController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:RootResizerController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=RootResizerController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function RootResizerController_createElementDescriptor(e){var t,r=RootResizerController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function RootResizerController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function RootResizerController_hasDecorators(e){return e.decorators&&e.decorators.length}function RootResizerController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function RootResizerController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function RootResizerController_toPropertyKey(e){var t=function RootResizerController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ot=function RootResizerController_decorate(e,t,r,i){var o,n=RootResizerController_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function RootResizerController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(RootResizerController_isDataDescriptor(o.descriptor)||RootResizerController_isDataDescriptor(i.descriptor)){if(RootResizerController_hasDecorators(o)||RootResizerController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(RootResizerController_hasDecorators(o)){if(RootResizerController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}RootResizerController_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,RootResizerController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([(0,q.SG)(["$rootScope","$scope","appCommonSrv","settingsSrv","trelloIntegrationSrv"])],(function(e){return{F:class RootResizerController{constructor(t,r,i,o,n){e(this),this._$rootScope=t,this._$scope=r,this._appCommonSrv=i,this._settingsSrv=o,this._trelloIntegrationSrv=n,this._bodyWrapper=it()(".pw-body-wrapper")}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"rootResizerCtrl"}},{kind:"get",key:"resizerOptions",value:function resizerOptions(){switch(this._appCommonSrv.getPlanywayOrientation()){case G.U1.Top:return{resizableContent:"pw-root",contentPosition:"top",verticalMin:"203px",verticalMax:"-48px",forceVerticalMax:!1};case G.U1.Left:return{resizableContent:"pw-root",contentPosition:"left",horizontalMin:"680px",horizontalMax:"-700px"};case G.U1.Right:return{resizableContent:"pw-root",contentPosition:"right",horizontalMin:"680px",horizontalMax:"-700px"};case G.U1.Bottom:return{resizableContent:"#surface",contentPosition:"bottom",verticalMin:"88px",verticalMax:"-8px"}}}},{kind:"method",key:"onResizerSetup",value:function onResizerSetup(){this._appCommonSrv.getPlanywayOrientation()===G.U1.Top&&requestAnimationFrame((()=>this._bodyWrapper.scrollTop(-this._bodyWrapper[0].scrollHeight)))}},{kind:"method",key:"onResize",value:function onResize(e,t,r,i){if("vertical"===e&&"max"!==t){let e=i-r;e>0&&requestAnimationFrame((()=>this._bodyWrapper.scrollTop(this._bodyWrapper.scrollTop()-e)))}if(t)return;let o=this._trelloIntegrationSrv.getTrelloContext();if(!o||!o.boardId)return;let n=this._trelloUserSettings.global.boards,a=n[o.boardId];switch(this._appCommonSrv.getPlanywayOrientation()){case G.U1.Top:a.planywayHeight=it()("pw-root").outerHeight();break;case G.U1.Left:case G.U1.Right:a.planywayWidth=it()("pw-root").outerWidth();break;case G.U1.Bottom:a.boardHeight=it()("#surface").outerHeight()}delete n[o.boardId],n[o.boardId]=a,this._userSettings.global.saveAsync()}},{kind:"get",key:"initialBoardHeight",value:function initialBoardHeight(){var e;if(!this._initialBoardHeight){var t;let e=this._trelloIntegrationSrv.getTrelloContext();if(!e||!e.boardId)return;this._initialBoardHeight=null===(t=this._trelloUserSettings.global.boards[e.boardId])||void 0===t?void 0:t.boardHeight}return null!==(e=this._initialBoardHeight)&&void 0!==e?e:"60%"}},{kind:"set",key:"initialBoardHeight",value:function initialBoardHeight(e){this._initialBoardHeight=e}},{kind:"get",key:"initialPlanywayHeight",value:function initialPlanywayHeight(){var e;if(!this._initialPlanywayHeight){var t;let e=this._trelloIntegrationSrv.getTrelloContext();if(!e||!e.boardId)return;this._initialPlanywayHeight=null===(t=this._trelloUserSettings.global.boards[e.boardId])||void 0===t?void 0:t.planywayHeight}return null!==(e=this._initialPlanywayHeight)&&void 0!==e?e:"50%"}},{kind:"set",key:"initialPlanywayHeight",value:function initialPlanywayHeight(e){this._initialPlanywayHeight=e}},{kind:"get",key:"initialPlanywayWidth",value:function initialPlanywayWidth(){var e;if(!this._initialPlanywayWidth){var t;let e=this._trelloIntegrationSrv.getTrelloContext();if(!e||!e.boardId)return;this._initialPlanywayWidth=null===(t=this._trelloUserSettings.global.boards[e.boardId])||void 0===t?void 0:t.planywayWidth}return null!==(e=this._initialPlanywayWidth)&&void 0!==e?e:"55%"}},{kind:"set",key:"initialPlanywayWidth",value:function initialPlanywayWidth(e){this._initialPlanywayWidth=e}},{kind:"get",key:"initialHeight",value:function initialHeight(){return this._appCommonSrv.getPlanywayOrientation()===G.U1.Bottom?this.initialBoardHeight:this.initialPlanywayHeight}},{kind:"set",key:"initialHeight",value:function initialHeight(e){this._appCommonSrv.getPlanywayOrientation()===G.U1.Bottom?this.initialBoardHeight=e:this.initialPlanywayHeight=e}},{kind:"get",key:"initialWidth",value:function initialWidth(){return this.initialPlanywayWidth}},{kind:"set",key:"initialWidth",value:function initialWidth(e){this.initialPlanywayWidth=e}},{kind:"get",key:"_userSettings",value:function _userSettings(){return this._settingsSrv.user}},{kind:"get",key:"_trelloUserSettings",value:function _trelloUserSettings(){return{local:this._userSettings.local.settings.provider[G.lP.Trello],global:this._userSettings.global.settings.provider[G.lP.Trello]}}}]}}));var nt=r(7191),at=r(61629),st=r(41963),lt=r(6707),ct=r(59837),dt=r(68368),pt=r(88602);function TrelloButtonsController_getDecoratorsApi(){TrelloButtonsController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!TrelloButtonsController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloButtonsController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloButtonsController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloButtonsController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloButtonsController_createElementDescriptor(e){var t,r=TrelloButtonsController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloButtonsController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloButtonsController_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloButtonsController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloButtonsController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloButtonsController_toPropertyKey(e){var t=function TrelloButtonsController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ut=function TrelloButtonsController_decorate(e,t,r,i){var o,n=TrelloButtonsController_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloButtonsController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(TrelloButtonsController_isDataDescriptor(o.descriptor)||TrelloButtonsController_isDataDescriptor(i.descriptor)){if(TrelloButtonsController_hasDecorators(o)||TrelloButtonsController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(TrelloButtonsController_hasDecorators(o)){if(TrelloButtonsController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}TrelloButtonsController_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,TrelloButtonsController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([(0,q.SG)(["$rootScope","$scope","$translate","appCommonSrv","dialogSrv","onboardingSrv","planywayIntegrationSrv","settingsSrv","telemetrySrv"])],(function(e){return{F:class TrelloButtonsController{constructor(t,r,i,o,n,a,s,l,c){e(this),this._$rootScope=t,this._$scope=r,this._$translate=i,this._appCommonSrv=o,this._dialogSrv=n,this._onboardingSrv=a,this._planywayIntegrationSrv=s,this._settingsSrv=l,this._telemetrySrv=c,this._$scope.$on(G.FK.SwitchPlanywayShownRequested,((e,t)=>this.switchPlanywayShownAsync(null==t?void 0:t.isBy,null==t?void 0:t.onShown)))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"trelloButtonsCtrl"}},{kind:"get",key:"schedulerButtonTooltip",value:function schedulerButtonTooltip(){return this.isSchedulerButtonBusy?this._$translate.instant("TOOLTIPS.PLANYWAY_LOADING"):this._appCommonSrv.isPlanywayShown()?this._$translate.instant("TOOLTIPS.PLANYWAY_HIDE"):this._$translate.instant("TOOLTIPS.PLANYWAY_SHOW")}},{kind:"get",key:"isSchedulerButtonBusy",value:function isSchedulerButtonBusy(){return this._appCommonSrv.isSchedulerButtonBusy()}},{kind:"get",key:"isSchedulerButtonDisabled",value:function isSchedulerButtonDisabled(){return this.isSchedulerButtonBusy}},{kind:"method",key:"switchPlanywayShownAsync",value:async function switchPlanywayShownAsync(e,t){if(this.isSchedulerButtonDisabled)return;let r;if(t===G.lV.OpenNotificationCenter)r=!0;else r=!this._appCommonSrv.isPlanywayShown();if(r){if(pe.Xb.planywayOnboardingButtonPassed||this._$rootScope.$broadcast(G.FK.HideButtonOnboardingRequested),!this._planywayIntegrationSrv.isSignedIn()){if(this._telemetrySrv.logSingleEvent(G.cN.OnboardingEvents.LoginDialogOpened),!await this._dialogSrv.showLoginDialogAsync({canClose:!0}))return void this._telemetrySrv.logSingleEvent(G.cN.OnboardingEvents.LoginDialogClosed)}if(this._planywayIntegrationSrv.fatalErrorMessage)return void this._dialogSrv.showFatalErrorDialogAsync(this._planywayIntegrationSrv.fatalErrorMessage,{canClose:!0});this._$rootScope.$broadcast(G.FK.PlanywayShowing)}if(r!==this._appCommonSrv.isPlanywayShown()&&(this._planywayIntegrationSrv.isAppInitialized()||await this._$scope.$onceAsync(G.FK.AppInitialized),await this._onboardingSrv.showWelcomeSurveyDialogAsync(),this._$scope.$evalAsync((()=>this._appCommonSrv.setPlanywayShown(r))),this._telemetrySrv.logSingleEvent(r?G.cN.CalendarEvents.Shown:G.cN.CalendarEvents.Hidden,{isBy:e||G.Ch.Trello})),t===G.lV.OpenNotificationCenter)await this._planywayIntegrationSrv.initializeAppAsync(this._appCommonSrv.getCancellationToken("init-for-trello-buttons")),this._telemetrySrv.logSingleEvent(G.cN.NotificationEvents.CenterOpened,{by:G.Yd.BrowserButton}),this._dialogSrv.showNotificationCenterDialogAsync("content")}}]}}));var ht=r(68052),mt=r.n(ht),ft=r(35293),yt=r.n(ft),vt=r(76555),gt=r.n(vt),_t=r(20115),wt=(r(43611),r(80600)),bt=r.n(wt);function TrelloCardPopupController_ownKeys(e,t){var r=W()(e);if($()){var i=$()(e);t&&(i=O()(i).call(i,(function(t){return j()(e,t).enumerable}))),r.push.apply(r,i)}return r}function TrelloCardPopupController_objectSpread(e){for(var t=1;t<arguments.length;t++){var r,i,o=null!=arguments[t]?arguments[t]:{};t%2?_()(r=TrelloCardPopupController_ownKeys(Object(o),!0)).call(r,(function(t){(0,L.Z)(e,t,o[t])})):F()?H()(e,F()(o)):_()(i=TrelloCardPopupController_ownKeys(Object(o))).call(i,(function(t){b()(e,t,j()(o,t))}))}return e}function TrelloCardPopupController_getDecoratorsApi(){TrelloCardPopupController_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!TrelloCardPopupController_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupController_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupController_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupController_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupController_createElementDescriptor(e){var t,r=TrelloCardPopupController_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupController_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupController_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupController_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupController_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupController_toPropertyKey(e){var t=function TrelloCardPopupController_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let kt=function TrelloCardPopupController_decorate(e,t,r,i){var o,n=TrelloCardPopupController_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupController_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(TrelloCardPopupController_isDataDescriptor(o.descriptor)||TrelloCardPopupController_isDataDescriptor(i.descriptor)){if(TrelloCardPopupController_hasDecorators(o)||TrelloCardPopupController_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(TrelloCardPopupController_hasDecorators(o)){if(TrelloCardPopupController_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}TrelloCardPopupController_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,TrelloCardPopupController_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}([(0,q.SG)(["$element","$rootScope","$scope","$log","$timeout","$translate","appCommonSrv","calendarCardsSrv","collectionSrv","dialogSrv","htmlHelperSrv","licenseSrv","notificationSrv","planywayIntegrationSrv","planywayNotificationsSrv","platformSrv","settingsSrv","telemetrySrv","timeTrackingSrv","trelloIntegrationSrv"])],(function(e){return{F:class TrelloCardPopupController{constructor(t,r,i,o,n,a,s,l,c,d,p,u,h,m,f,y,v,g,_,w){e(this),this._$element=t,this._$rootScope=r,this._$scope=i,this._$log=o,this._$timeout=n,this._$translate=a,this._appCommonSrv=s,this._calendarCardsSrv=l,this._collectionSrv=c,this._dialogSrv=d,this._htmlHelperSrv=p,this._licenseSrv=u,this._notificationSrv=h,this._planywayIntegrationSrv=m,this._planywayNotificationsSrv=f,this._platformSrv=y,this._settingsSrv=v,this._telemetrySrv=g,this._timeTrackingSrv=_,this._trelloIntegrationSrv=w,this._nowDate=(0,q.$Y)(new Date),this._isCardPopupControlsHidden="true"===pe.Xb.planywayHideCardPopup,(async()=>{this._planywayIntegrationSrv.isAppInitialized()||await this._$rootScope.$onceAsync(G.FK.AppInitialized);let e=await this._trelloIntegrationSrv.getTrelloContextAsync();e.accountId&&e.boardId&&e.cardId&&await this.loadCalendarCardAsync(e.accountId,e.boardId,e.cardId)})(),this._onAddOrUpdateCard=e=>{e.providerCard.id===this._currentCardId&&this._addOrUpdateCard(e)},this._onDeleteCard=e=>{e.providerCard.id===this._currentCardId&&this._removeCard()},this._$scope.$on("$destroy",(()=>this._removeCalendarCardsListeners()))}},d:[{kind:"get",static:!0,key:"controllerName",value:function controllerName(){return"trelloCardPopupCtrl"}},{kind:"field",key:"_provider",value:()=>(0,s.VH)(G.lP.Trello)},{kind:"get",key:"isCardPopupControlsHidden",value:function isCardPopupControlsHidden(){return this._isCardPopupControlsHidden}},{kind:"set",key:"isCardPopupControlsHidden",value:function isCardPopupControlsHidden(e){this._isCardPopupControlsHidden=e,pe.Xb.planywayHideCardPopup=e,this._telemetrySrv.logSingleEvent(this._isCardPopupControlsHidden?G.cN.TrelloEvents.PopupControlsHidden:G.cN.TrelloEvents.PopupControlsShown)}},{kind:"get",key:"allowAccessAvailable",value:function allowAccessAvailable(){return!this._planywayIntegrationSrv.isSignedIn()}},{kind:"get",key:"allowAccessImageUrl",value:function allowAccessImageUrl(){return this._allowAccessImageUrl||(this._allowAccessImageUrl=this._platformSrv.getPlatformUrl(bt())),this._allowAccessImageUrl}},{kind:"method",key:"allowAccessAsync",value:async function allowAccessAsync(){this._telemetrySrv.logSingleEvent(G.cN.OnboardingEvents.AllowAccessBannerClicked),await this.switchPlanywayShownAsync(G.Ch.AllowAccessBanner)}},{kind:"get",key:"hasDates",value:function hasDates(){return!!this.calendarCard&&this.calendarCard.hasDates}},{kind:"get",key:"isSingleDate",value:function isSingleDate(){return!!this.calendarCard&&this.calendarCard.isSingleDate}},{kind:"get",key:"isAllDay",value:function isAllDay(){return this._isAllDay}},{kind:"get",key:"startDate",value:function startDate(){return this._startDate}},{kind:"get",key:"endDate",value:function endDate(){return this._endDate}},{kind:"get",key:"isOverdueCard",value:function isOverdueCard(){return(0,q.Ax)(this._nowDate,this.calendarCard.end)&&!this.calendarCard.providerCard.isCompleted}},{kind:"method",key:"changeDates",value:function changeDates(e,t,r){if(this.isAllDay===e&&(0,q.rs)(this.startDate,t)&&(0,q.rs)(this.endDate,r))return;let i,o,n,a;if(this.hasDates)if(this.isAllDay!==e)i=e?G.cN.CardEvents.IsAllDaySet:G.cN.CardEvents.IsAllDayUnset;else if((0,q.rs)(this.start,t)){if((0,q.rs)(this.end,r))return;i=G.cN.CardEvents.EndChanged}else i=G.cN.CardEvents.StartChanged;else i=G.cN.CardEvents.Scheduled,o={cardType:ae.eT.TrelloCard,cardRole:ae.D.Card,isAllDay:e,start:t,end:r,by:G.AH.SetDates};this._logCardEvent({event:i,data:o}),this.hasDates&&this.isAllDay===e||(n=this._planywayNotificationsSrv.getDefaultReminders(e),n.length>0&&(a=!0)),this._isAllDay=e,this._startDate=t,this._endDate=r,this._setCardPropertiesAsync({isAllDay:this.isAllDay,start:this.startDate,end:this.endDate,notifications:n,isSubscribed:a})}},{kind:"method",key:"removeDatesAsync",value:async function removeDatesAsync(){if(this.hasDates)try{this._logCardEvent({event:G.cN.CardEvents.DatesRemoved}),await this._calendarCardsSrv.removeCalendarCardAsync(this.calendarCard)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}}},{kind:"get",key:"estimationHours",value:function estimationHours(){return void 0!==this._dirtyEstimationHours?this._dirtyEstimationHours:this.calendarCard.providerCard.estimationHours}},{kind:"set",key:"estimationHours",value:function estimationHours(e){if(null!==e&&(e=(0,q.QV)((0,q.uZ)(e,this.minEstimationHours,this.maxEstimationHours),2)),this.estimationHours!==e){let t,r=null!==this.estimationHours&&void 0!==this.estimationHours,i=null!=e;if(i&&!this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!0))return;t=!r&&i?G.cN.CardEvents.EstimationAdded:r&&!i?G.cN.CardEvents.EstimationDeleted:G.cN.CardEvents.EstimationChanged,this._logCardEvent({event:t,data:{by:G.AH.TrelloPopup,estimationHours:e}}),this._dirtyEstimationHours=e,(async()=>{await this._setCardPropertiesAsync({estimationHours:e}),this._dirtyEstimationHours=void 0})()}}},{kind:"get",key:"minEstimationHours",value:function minEstimationHours(){return.01}},{kind:"get",key:"maxEstimationHours",value:function maxEstimationHours(){return 8760}},{kind:"method",key:"onEstimationKeydown",value:function onEstimationKeydown(e){switch(e.which){case G.VD.Enter:case G.VD.Enter2:it()(e.target).trigger("blur")}}},{kind:"method",key:"beginEstimatedHoursEditing",value:function beginEstimatedHoursEditing(){this.isReadOnly||(this.estimationHours||(this.estimationHours=1),this._htmlHelperSrv.elementAdded(this._$element,".pw-js-estimated-hours-input",(e=>{e.trigger("focus").trigger("select")}),!0))}},{kind:"method",key:"submitEstimatedHoursEditing",value:function submitEstimatedHoursEditing(e){var t;let r=mt()(null==e||null===(t=e.target)||void 0===t?void 0:t.value);this.estimationHours=yt()(r)?null:r}},{kind:"get",key:"cardBoard",value:function cardBoard(){return this._cardBoard||(this._cardBoard=this._trelloIntegrationSrv.getTrelloBoardById(this.calendarCard.accountId,this.calendarCard.providerCard.boardId),this._cardBoardMembers=null),this._cardBoard}},{kind:"get",key:"cardBoardMembers",value:function cardBoardMembers(){if(this.delayRender)return[];var e,t,r;this._cardBoardMembers||(this._cardBoardMembers=v()(e=gt()(t=O()(r=this._cardBoard.members).call(r,(e=>e.id!==_t.$d))).call(t,q.Yb)).call(e,(e=>TrelloCardPopupController_objectSpread(TrelloCardPopupController_objectSpread({},e),{},{isSelected:this.calendarCard.providerCard.memberIds.has(e.id)}))),this._cardMembers=null);return this._cardBoardMembers}},{kind:"get",key:"_currentMemberId",value:function _currentMemberId(){return this._planywayIntegrationSrv.getConnectedAccountById(this._accountId).trelloMemberId}},{kind:"get",key:"isTimeRecordsAvailable",value:function isTimeRecordsAvailable(){return this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1)}},{kind:"get",key:"maxDisplayedTimeRecords",value:function maxDisplayedTimeRecords(){return 5}},{kind:"get",key:"cardTotalTimeRecordDuration",value:function cardTotalTimeRecordDuration(){let e=this.calendarCard.providerCard.totalTimeRecordDurationHours;if(e)return`${kendo.toString(e)}h`}},{kind:"method",key:"isTimeRecordAdding",value:function isTimeRecordAdding(){return this._isTimeRecordAdding}},{kind:"method",key:"isTimeRecordEditing",value:function isTimeRecordEditing(){return this._isTimeRecordEditing}},{kind:"get",key:"editingTimeRecordId",value:function editingTimeRecordId(){var e;return null===(e=this._editingTimeRecord)||void 0===e?void 0:e.id}},{kind:"method",key:"beginTimeRecordAddingAsync",value:async function beginTimeRecordAddingAsync(){this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1)&&(this.isTimeRecordAdding()&&await this.submitTimeRecordAddingAsync(),this.isTimeRecordEditing()&&await this.submitTimeRecordEditingAsync(),this._tempTimeRecord||(this._tempTimeRecord={id:_t.$d,accountId:this.calendarCard.accountId,canBeUpdated:!0,canBeDeleted:!0,comment:"",isDuration:!1,to:(0,q.GG)(new Date,"minute"),durationMinutes:this._timeTrackingSrv.timeRecordDefaultDurationMinutes,memberId:this._currentMemberId},this._tempTimeRecord.from=(0,q.mH)(this._tempTimeRecord.to,-this._tempTimeRecord.durationMinutes)),this._$scope.$evalAsync((()=>{this._isTimeRecordAdding=!0,this._cardTimeRecords=null})),this._$timeout((()=>it()(`.pw-js-trello-card-popup-controls-time-records-item__name[data-time-record-id="${_t.$d}"]`).trigger("focus")),75,!1))}},{kind:"method",key:"rejectTimeRecordAdding",value:function rejectTimeRecordAdding(){this._$scope.$evalAsync((()=>{this._isTimeRecordAdding=!1,this._cardTimeRecords=null}))}},{kind:"method",key:"submitTimeRecordAddingAsync",value:async function submitTimeRecordAddingAsync(){if(!this.isTimeRecordAdding()||!this._tempTimeRecord)return;this._isTimeRecordBusy=!0;let e=this._tempTimeRecord;try{this._logCardEvent({event:G.cN.CardEvents.Scheduled,data:{cardType:ae.eT.TrelloTimeRecord,cardRole:ae.D.Card,isDuration:e.isDuration,durationMinutes:e.durationMinutes,by:G.AH.Manually}}),await this._calendarCardsSrv.createCalendarCardTimeRecordAsync(this.calendarCard,{comment:e.comment,isDuration:e.isDuration,from:e.from,to:e.to,durationMinutes:e.durationMinutes,memberId:e.memberId}),this._isTimeRecordAdding=!1}catch(t){this._tempTimeRecord=e,this._$log.error("Planyway card updating error:"),this._$log.error(t),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._$scope.$evalAsync((()=>{this._tempTimeRecord=null,this._isTimeRecordBusy=!1,this._cardTimeRecords=null}))}}},{kind:"method",key:"beginTimeRecordEditingAsync",value:async function beginTimeRecordEditingAsync(e,t){var r;this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1)&&(await this.submitTimeRecordAddingAsync(),t.id!==(null===(r=this._editingTimeRecord)||void 0===r?void 0:r.id)&&await this.submitTimeRecordEditingAsync(),this._editingTimeRecord||(this._editingTimeRecord=t,this._edititngTimeRecordBackup=TrelloCardPopupController_objectSpread({},t)),this._$scope.$evalAsync((()=>this._isTimeRecordEditing=!0)))}},{kind:"method",key:"rejectTimeRecordEditing",value:function rejectTimeRecordEditing(){this._isTimeRecordAdding=!1,this._editingTimeRecord.comment=this._edititngTimeRecordBackup.comment,this._editingTimeRecord=null}},{kind:"method",key:"submitTimeRecordEditingAsync",value:async function submitTimeRecordEditingAsync(){if(!this.isTimeRecordEditing()||!this._editingTimeRecord)return;if(this._editingTimeRecord.comment===this._edititngTimeRecordBackup.comment)return void this.rejectTimeRecordEditing();this._isTimeRecordBusy=!0;let e=this._editingTimeRecord;try{this._logCardEvent({event:G.cN.CardEvents.TimeRecordCommentChanged}),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.calendarCard,e.id,{comment:e.comment}),this._editingTimeRecord=null}catch(t){this._tempTimeRecord=e,this._$log.error("Planyway card updating error:"),this._$log.error(t),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._$scope.$evalAsync((()=>{this._isTimeRecordEditing=!1,this._isTimeRecordBusy=!1,this._cardTimeRecords=null}))}}},{kind:"get",key:"cardTimeRecords",value:function cardTimeRecords(){if(!this._cardTimeRecords&&this.calendarCard){var e;this._dirtyCardTimeRecordIsDuration||(this._dirtyCardTimeRecordIsDuration=new(J())),this._dirtyCardTimeRecordFrom||(this._dirtyCardTimeRecordFrom=new(J())),this._dirtyCardTimeRecordTo||(this._dirtyCardTimeRecordTo=new(J())),this._dirtyCardTimeRecordDurationMinutes||(this._dirtyCardTimeRecordDurationMinutes=new(J())),this._dirtyCardTimeRecordMembers||(this._dirtyCardTimeRecordMembers=new(J())),this._dirtyCardTimeRecordComment||(this._dirtyCardTimeRecordComment=new(J()));let t=this._calendarCardsSrv.getCalendarCardTimeRecords(this.calendarCard)||[];this._tempTimeRecord&&this.isTimeRecordAdding()&&(t=[...t,this._tempTimeRecord]),this._cardTimeRecords=gt()(e=v()(t).call(t,(e=>{let t=TrelloCardPopupController_objectSpread(TrelloCardPopupController_objectSpread({},e),{},{deleteAsync:async()=>{if(t.isTempRecord)return this.rejectTimeRecordAdding(),void(this._tempTimeRecord=null);if(await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.DELETE_TIME_RECORD_TITLE"),this._$translate.instant("DIALOGS.DELETE_TIME_RECORD_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.DELETE"),isPrimary:!0,isDangerous:!0,dialogResult:!0}]}))try{this._logCardEvent({event:G.cN.CardEvents.TimeRecordDeleted,data:{isDuration:t.isDuration,durationMinutes:t.durationMinutes}}),this._$scope.$evalAsync((()=>this._cardTimeRecords=null)),await this._calendarCardsSrv.deleteCalendarCardTimeRecordAsync(this.calendarCard,e.id)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}});return b()(t,"isTempRecord",{get:()=>e===this._tempTimeRecord}),b()(t,"isBusy",{get:()=>{var e;return this._isTimeRecordBusy&&(t.id===_t.$d||t.id===(null===(e=this._editingTimeRecord)||void 0===e?void 0:e.id))}}),b()(t,"isDuration",{get:()=>this._dirtyCardTimeRecordIsDuration.has(t.id)?this._dirtyCardTimeRecordIsDuration.get(t.id):e.isDuration,set:async r=>{if(t.isDuration!==r&&this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1))try{let i,o,n=t.durationMinutes;r?(i=(0,q.$Y)(t.from),o=i):(0,q.KC)(t.from,new Date)?(o=(0,q.GG)(new Date,"quarterHour"),i=(0,q.mH)(o,-n)):(i=(0,q.nT)(t.from),o=(0,q.mH)(i,n)),t._maxTo=null,t.isTempRecord?(e.isDuration=r,e.from=i,e.to=o):(this._logCardEvent({event:r?G.cN.CardEvents.TimeRecordTimeRemoved:G.cN.CardEvents.TimeRecordTimeAdded,data:{isDuration:r,durationMinutes:t.durationMinutes}}),this._dirtyCardTimeRecordIsDuration.set(t.id,r),this._dirtyCardTimeRecordFrom.set(t.id,i),this._dirtyCardTimeRecordTo.set(t.id,o),this._dirtyCardTimeRecordDurationMinutes.set(t.id,n),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.calendarCard,t.id,{isDuration:r,from:i,to:o,durationMinutes:n}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._dirtyCardTimeRecordIsDuration.delete(t.id),this._dirtyCardTimeRecordFrom.delete(t.id),this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),b()(t,"from",{get:()=>this._dirtyCardTimeRecordFrom.has(t.id)?this._dirtyCardTimeRecordFrom.get(t.id):e.from,set:async r=>{if(r&&!(0,q.rs)(t.from,r))if(this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1))try{let i;if(t.isDuration){let e=(0,q.i2)(t.from,t.to);i=(0,q.E4)(r,e)}else{let e=(0,q.CX)(t.from,t.to);i=(0,q.mH)(r,e)}t._maxTo=null,t.isTempRecord?(e.from=r,e.to=i):(this._logCardEvent({event:G.cN.CardEvents.TimeRecordFromChanged,data:{isDuration:t.isDuration,durationMinutes:t.durationMinutes}}),this._dirtyCardTimeRecordFrom.set(t.id,r),this._dirtyCardTimeRecordTo.set(t.id,i),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.calendarCard,t.id,{isDuration:t.isDuration,from:r,to:i}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._dirtyCardTimeRecordFrom.delete(t.id),this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}else this._$timeout((()=>e.from=new Date(e.from)))}}),b()(t,"to",{get:()=>this._dirtyCardTimeRecordTo.has(t.id)?this._dirtyCardTimeRecordTo.get(t.id):e.to,set:async r=>{if(r&&!(0,q.rs)(t.to,r))if(this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1))try{t.isTempRecord?(e.to=r,e.durationMinutes=(0,q.CX)(t.from,r)):(this._logCardEvent({event:G.cN.CardEvents.TimeRecordToChanged,data:{isDuration:t.isDuration,durationMinutes:(0,q.CX)(t.from,r)}}),this._dirtyCardTimeRecordTo.set(t.id,r),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.calendarCard,t.id,{isDuration:t.isDuration,to:r,durationMinutes:(0,q.CX)(t.from,r)}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}else this._$timeout((()=>e.to=new Date(e.to)))}}),b()(t,"maxTo",{get:()=>(t._maxTo||((0,q.KC)(t.from,new Date)&&(0,q.KC)(t.to,new Date)?t._maxTo=(0,q.h3)(t.from):t._maxTo=(0,q.v8)(t.from,this._timeTrackingSrv.timeRecordMaxDurationSeconds)),t._maxTo)}),b()(t,"date",{get:()=>{let e="Dm";return(0,q.FT)(t.from,new Date)&&(0,q.FT)(t.to,new Date)||(e="D"),kendo.toString(t.from,e)}}),b()(t,"durationMinutes",{get:()=>t.isDuration?this._dirtyCardTimeRecordDurationMinutes.has(t.id)?this._dirtyCardTimeRecordDurationMinutes.get(t.id):e.durationMinutes:(0,q.CX)(t.from,t.to),set:async r=>{if(t.durationMinutes!==r&&this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1))try{let i=t.to;t.isDuration||(i=(0,q.mH)(t.from,r)),t.isTempRecord?(e.to=i,e.durationMinutes=r):(this._logCardEvent({event:G.cN.CardEvents.TimeRecordDurationChanged,data:{isDuration:t.isDuration,durationMinutes:r}}),this._dirtyCardTimeRecordDurationMinutes.set(t.id,r),this._dirtyCardTimeRecordTo.set(t.id,i),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.calendarCard,t.id,{isDuration:t.isDuration,from:t.from,to:i,durationMinutes:r}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._dirtyCardTimeRecordDurationMinutes.delete(t.id),this._dirtyCardTimeRecordTo.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),b()(t,"isLastYear",{get:()=>!(0,q.FT)(t.from,new Date)||!(0,q.FT)(t.to,new Date)}),b()(t,"comment",{get:()=>this._dirtyCardTimeRecordComment.has(t.id)?this._dirtyCardTimeRecordComment.get(t.id):e.comment,set:r=>{t.comment!==r&&this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1)&&(t.isTempRecord?e.comment=r:this._dirtyCardTimeRecordComment.set(t.id,r))}}),b()(t,"member",{get:()=>this._dirtyCardTimeRecordMembers.has(t.id)?this._dirtyCardTimeRecordMembers.get(t.id):TrelloCardPopupController_objectSpread({},this._trelloIntegrationSrv.getTrelloMemberById(e.accountId,e.memberId)),set:async r=>{if(t.memberId!==r.id&&this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1))try{t.isTempRecord?e.memberId=r.id:(this._logCardEvent({event:G.cN.CardEvents.TimeRecordMemberChanged}),this._dirtyCardTimeRecordMembers.set(t.id,r),await this._calendarCardsSrv.updateCalendarCardTimeRecordAsync(this.calendarCard,t.id,{memberId:r.id}))}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}finally{this._dirtyCardTimeRecordMembers.delete(t.id),this._$scope.$evalAsync((()=>this._cardTimeRecords=null))}}}),t}))).call(e,q.EA)}return this._cardTimeRecords}},{kind:"get",key:"isCardTimerStarted",value:function isCardTimerStarted(){if(!this._timeTrackingSrv.isTimerStarted)return!1;if(this._timeTrackingSrv.timerAccountId!==this.calendarCard.accountId)return!1;switch(this.calendarCard.cardType){case ae.eT.TrelloCustomField:case ae.eT.TrelloCheckItem:return this._timeTrackingSrv.timerParentId===this.calendarCard.providerCard.parentId;default:return this._timeTrackingSrv.timerParentId===this.calendarCard.id}}},{kind:"method",key:"startTimerAsync",value:async function startTimerAsync(){if(this._timeTrackingSrv.isTimerBusy)return;if(!this._licenseSrv.checkPaidFeatureAvailable(G.ZV.TimeTracking,!1))return;if(this._telemetrySrv.logSessionEvent(G.cN.TimeTrackingEvents.TimerStartClicked,{where:G.Fb.Trello}),this._timeTrackingSrv.isTimerStarted){if(!await this._dialogSrv.showConfirmAsync(this._$translate.instant("DIALOGS.NOW_THE_TIMER_IS_ON_TITLE"),this._$translate.instant("DIALOGS.START_NEW_TIMER_AND_STOP_CURRENT_ONE_CONFIRM"),{buttons:[{text:this._$translate.instant("BUTTONS.START_NEW_TIMER"),isPrimary:!0,dialogResult:!0}]}))return;await this.stopTimerAsync(),this._telemetrySrv.logSessionEvent(G.cN.TimeTrackingEvents.TimerStopped,{where:G.Fb.Trello})}let e;switch(this.calendarCard.cardType){case ae.eT.TrelloCustomField:case ae.eT.TrelloCheckItem:e=this.calendarCard.providerCard.parentId;break;default:e=this.calendarCard.id}await this._timeTrackingSrv.startTimerAsync(this.calendarCard.accountId,{providerType:G.lP.Trello,calendarId:this.calendarCard.calendarId,parentId:e})&&this._telemetrySrv.logSessionEvent(G.cN.TimeTrackingEvents.TimerStarted,{where:G.Fb.Trello})}},{kind:"method",key:"stopTimerAsync",value:async function stopTimerAsync(){if(!this._timeTrackingSrv.isTimerBusy)try{let e=await this._timeTrackingSrv.stopTimerAsync();if(!e)return;this._telemetrySrv.logSessionEvent(G.cN.TimeTrackingEvents.TimerStopped,{where:G.Fb.Trello});let t=await this._calendarCardsSrv.getCalendarCardByIdAsync(this.calendarCard.accountId,ae.eT.TrelloCard,e.parentId);if(t){let r=(0,q.CX)(e.startDate,e.endDate);this._logCardEvent({event:G.cN.CardEvents.Scheduled,data:{cardType:ae.eT.TrelloTimeRecord,cardRole:ae.D.Card,isDuration:!1,durationMinutes:r,by:G.AH.Manually}});let i=await this._calendarCardsSrv.createCalendarCardTimeRecordAsync(t,{comment:e.comment,isDuration:!1,from:e.startDate,to:e.endDate,durationMinutes:r,memberId:this._currentMemberId});this._$scope.$evalAsync((()=>this._cardTimeRecords=null)),this._$timeout((()=>it()(`.pw-js-trello-card-popup-controls-time-records-item__name[data-time-record-id="${i.id}"]`).trigger("focus")),0,!1)}}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}}},{kind:"get",key:"timerTime",value:function timerTime(){if(this.isCardTimerStarted)return this._timeTrackingSrv.timerCounterText}},{kind:"method",key:"onSaveBtnClick",value:function onSaveBtnClick(){this.isTimeRecordAdding()?this.submitTimeRecordAddingAsync():this.isTimeRecordEditing()&&this.submitTimeRecordEditingAsync()}},{kind:"method",key:"onTimeRecordEditClick",value:function onTimeRecordEditClick(e){this._$timeout((()=>it()(`.pw-js-trello-card-popup-controls-time-records-item__name[data-time-record-id="${e.id}"]`).trigger("focus")),0,!1)}},{kind:"get",key:"recurrenceRule",value:function recurrenceRule(){return this._recurrenceRule}},{kind:"set",key:"recurrenceRule",value:function recurrenceRule(e){e&&!this._checkEditAvailable()||this._recurrenceRule!==e&&(this._recurrenceRule=e,this._logCardEvent({event:G.cN.CardEvents.RecurrenceRuleChanged,data:{recurrenceRule:e}}),this._setCardPropertiesAsync({recurrenceRule:e}))}},{kind:"get",key:"isRecurrentCard",value:function isRecurrentCard(){var e;return!!(this.recurrenceRule||null!==(e=this.calendarCard)&&void 0!==e&&e.recurrenceId)}},{kind:"get",key:"isRecurringAvailable",value:function isRecurringAvailable(){return this.calendarCard&&!this.calendarCard.recurrenceId}},{kind:"get",key:"calendarCard",value:function calendarCard(){return this._calendarCard}},{kind:"get",key:"isReadOnly",value:function isReadOnly(){return this.calendarCard&&(this.calendarCard.isReadOnly||this.calendarCard.providerCard.isArchived)}},{kind:"get",key:"isMilestone",value:function isMilestone(){return this.calendarCard.cardRole===ae.D.Milestone}},{kind:"get",key:"isCardPopupControlsAvailable",value:function isCardPopupControlsAvailable(){return this._trelloIntegrationSrv.isCurrentCollectionInitialized&&!!this.calendarCard}},{kind:"get",key:"showWeekNumbers",value:function showWeekNumbers(){return this._collectionSettings.global.settings.showWeekNumbers}},{kind:"get",key:"isProgressAllDayAvailable",value:function isProgressAllDayAvailable(){return!this.isMilestone&&!this.isRecurrentCard&&this.hasDates&&this.isAllDay}},{kind:"get",key:"progressAllDay",value:function progressAllDay(){return this.isProgressAllDayAvailable?this._nowDate<=this.startDate?0:this._nowDate>(0,q.E4)(this.endDate,1)?100:(this._nowDate-this.startDate)/((0,q.E4)(this.endDate,1)-this.startDate)*100:0}},{kind:"method",key:"loadCalendarCardAsync",value:async function loadCalendarCardAsync(e,t,r){if(this._accountId=e,this._currentCardId=r,await this._collectionSrv.waitCurrentCollectionConnectedAccountsReadyAsync()){this._addCalendarCardsListeners();let i=await this._calendarCardsSrv.waitCalendarCardAsync(e,t,ae.eT.TrelloCard,r);return i&&this._addOrUpdateCard(i),i}}},{kind:"method",key:"openCardInExtension",value:function openCardInExtension(){this.hasDates?this.viewOnTimelineAsync():this.planOnTimelineAsync()}},{kind:"method",key:"seeMoreTimeRecordsAsync",value:async function seeMoreTimeRecordsAsync(){this._logCardEvent({event:G.cN.CardEvents.TimeRecordSeeMoreClicked}),await this.switchPlanywayShownAsync(G.Ch.TimeRecordSeeMore),this.openCardEditDialog()}},{kind:"method",key:"planOnTimelineAsync",value:async function planOnTimelineAsync(){this._logCardEvent({event:G.cN.CardEvents.PlanOnTimelineClicked}),await this._scheduleCardAsync(),await this.switchPlanywayShownAsync(G.Ch.PlanOnTimeline),this._provider.scrollToCard(this.calendarCard,G.ud.Timeline)}},{kind:"method",key:"viewOnTimelineAsync",value:async function viewOnTimelineAsync(){this._logCardEvent({event:G.cN.CardEvents.ViewOnTimelineClicked}),await this.switchPlanywayShownAsync(G.Ch.ViewOnTimeline),this._provider.scrollToCard(this.calendarCard,G.ud.Timeline)}},{kind:"method",key:"switchPlanywayShownAsync",value:async function switchPlanywayShownAsync(e){var t;null===(t=it()(".js-close-window")[0])||void 0===t||t.click(),await(0,q.$U)(),this._appCommonSrv.isPlanywayShown()||(this._$rootScope.$broadcast(G.FK.SwitchPlanywayShownRequested,{isBy:e}),await this._$rootScope.$onceAsync(G.FK.PlanywayShown))}},{kind:"method",key:"openCardEditDialog",value:function openCardEditDialog(){this._$rootScope.$broadcast(G.FK.CardDialogOpenRequested,{calendarCard:this.calendarCard,onOpen:()=>{this._logCardEvent({event:G.cN.CardEvents.EditDialogOpened})},onClose:e=>{e||this._logCardEvent({event:G.cN.CardEvents.EditDialogClosed})}})}},{kind:"get",key:"_userSettings",value:function _userSettings(){return this._settingsSrv.user}},{kind:"get",key:"_collectionSettings",value:function _collectionSettings(){return this._settingsSrv.collection}},{kind:"method",key:"_checkEditAvailable",value:function _checkEditAvailable(){return!(this.isMilestone&&!this._licenseSrv.checkPaidFeatureAvailable(G.ZV.Milestones,!0))&&!(this.recurrenceRule&&!this._licenseSrv.checkPaidFeatureAvailable(G.ZV.RecurringCards,!0))}},{kind:"method",key:"_addCalendarCardsListeners",value:function _addCalendarCardsListeners(){this._serviceEventsListenersAdded||(this._serviceEventsListenersAdded=!0,this._calendarCardsSrv.addCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.addCalendarCardEventListener("deleted",this._onDeleteCard))}},{kind:"method",key:"_removeCalendarCardsListeners",value:function _removeCalendarCardsListeners(){this._serviceEventsListenersAdded&&(this._serviceEventsListenersAdded=!1,this._calendarCardsSrv.removeCalendarCardEventListener("added",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("updated",this._onAddOrUpdateCard),this._calendarCardsSrv.removeCalendarCardEventListener("deleted",this._onDeleteCard))}},{kind:"method",key:"_addOrUpdateCard",value:function _addOrUpdateCard(e){e?(this._calendarCard=e.clone(),this._$scope.$evalAsync((()=>{var t;this._isAllDay=null===(t=e.isAllDay)||void 0===t||t,this._startDate=e.start,this._endDate=e.end,this._recurrenceRule=e.recurrenceRule,this._cardBoard=this._trelloIntegrationSrv.getTrelloBoardById(e.accountId,e.providerCard.boardId),this._cardBoardMembers=null,this._cardTimeRecords=null}))):this._removeCard()}},{kind:"method",key:"_removeCard",value:function _removeCard(){this._$scope.$evalAsync((()=>{this._startDate=null,this._endDate=null,this._calendarCard=null}))}},{kind:"method",key:"_setCardPropertiesAsync",value:async function _setCardPropertiesAsync(e){try{this.calendarCard.recurrenceRule&&(void 0!==e.isAllDay&&e.isAllDay!==this.calendarCard.isAllDay||e.start&&!(0,q.rs)(e.start,this.calendarCard.start)||void 0!==e.recurrenceRule&&e.isAllDay!==this.calendarCard.recurrenceRule)&&(e.exceptionDates=[],this.calendarCard.deleteExceptionDates(),(async()=>{try{await this._calendarCardsSrv.deleteRecurrenceExceptionsAsync(this.calendarCard.cardType,this.calendarCard)}catch(e){this._$log.error("Planyway delete card exceptions error:"),this._$log.error(e),this._telemetrySrv.logError("Planyway delete card exceptions error",e,{class:this.constructor.name,method:this._setCardPropertiesAsync.name})}})()),await this._calendarCardsSrv.updateCalendarCardPropertiesAsync(this.calendarCard,e)}catch(e){this._$log.error("Planyway card updating error:"),this._$log.error(e),this._notificationSrv.showNotification(this._$translate.instant("NOTIFICATIONS.UPDATE_CARD_ERROR"),G.k$.Error)}}},{kind:"method",key:"_scheduleCardAsync",value:async function _scheduleCardAsync(){let e,t=this.cardBoard.defaultCardIsAllDay,r=new Date,i=t?(0,q.h3)(r):(0,q.mH)(r,this.cardBoard.defaultCardDuration),o=this._planywayNotificationsSrv.getDefaultReminders(t);o.length>0&&(e=!0),this._logCardEvent({event:G.cN.CardEvents.Scheduled,data:{cardType:ae.eT.TrelloCard,cardRole:ae.D.Card,isAllDay:t,start:r,end:i}}),await this._setCardPropertiesAsync({isAllDay:t,start:r,end:i,notifications:o,isSubscribed:e})}},{kind:"method",key:"_logCardEvent",value:function _logCardEvent(e){this._telemetrySrv.logSessionEvent(e.event,TrelloCardPopupController_objectSpread({accountId:this.calendarCard.accountId,calendarId:this.calendarCard.calendarId,cardType:this.calendarCard.cardType,cardRole:this.calendarCard.cardRole,isAllDay:this.isAllDay,start:this.startDate,end:this.endDate,isNewCard:!1,memberIds:this.calendarCard.providerCard.memberIds,isAssignedToMe:this.calendarCard.providerCard.memberIds.has(this._currentMemberId),recurrenceRule:this.calendarCard.recurrenceRule,priority:this.calendarCard.providerCard.priority,where:G.a6.Trello,by:G.AH.TrelloPopup,durationMinutes:this.calendarCard.providerCard.durationMinutes},e.data))}}]}}));var Ct=r(49896),Dt=r(87523),Tt=r(84479),St=r(79571),Et=r(32332),Pt=r(39828),At=r(44084),Rt=r(42523),It=r(79167),xt=r(8545),$t=r(59277),zt=r(36838),Ot=r(74372),Bt=r(2433),jt=r(71128),Nt=r(11054),Ft=r(33345),Mt=r(67532),Ht=r(53801),Lt=r(4180),Ut=r(33208),Kt=r(70383),Wt=r(58281),Gt=r(61149),qt=r(86977),Zt=r(73467),Vt=r(21440),Yt=r(76913),Xt=r(43139),Qt=r(34287),Jt=r(48712),er=r(36346),tr=r(68140),rr=r(79662),ir=r(55314),or=r(59006),nr=r.n(or);function RootResizerDirective_getDecoratorsApi(){RootResizerDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!RootResizerDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=RootResizerDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:RootResizerDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=RootResizerDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function RootResizerDirective_createElementDescriptor(e){var t,r=RootResizerDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function RootResizerDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function RootResizerDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function RootResizerDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function RootResizerDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function RootResizerDirective_toPropertyKey(e){var t=function RootResizerDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let ar=function RootResizerDirective_decorate(e,t,r,i){var o,n=RootResizerDirective_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function RootResizerDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(RootResizerDirective_isDataDescriptor(o.descriptor)||RootResizerDirective_isDataDescriptor(i.descriptor)){if(RootResizerDirective_hasDecorators(o)||RootResizerDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(RootResizerDirective_hasDecorators(o)){if(RootResizerDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}RootResizerDirective_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,RootResizerDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class RootResizerDirective{constructor(){e(this),this.templateUrl=nr(),this.restrict="E",this.controller=ot.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={}}}return{F:RootResizerDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwRootResizer"}},{kind:"method",decorators:[(0,q.SG)([])],static:!0,key:"create",value:function create(){return new RootResizerDirective}}]}}));var sr=r(664),lr=r(67605),cr=r(36692),dr=r(20276),pr=r(75622),ur=r(85991),hr=r(37400),mr=r(1971),fr=r.n(mr);function TrelloButtonsDirective_getDecoratorsApi(){TrelloButtonsDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!TrelloButtonsDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloButtonsDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloButtonsDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloButtonsDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloButtonsDirective_createElementDescriptor(e){var t,r=TrelloButtonsDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloButtonsDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloButtonsDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloButtonsDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloButtonsDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloButtonsDirective_toPropertyKey(e){var t=function TrelloButtonsDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let yr=function TrelloButtonsDirective_decorate(e,t,r,i){var o,n=TrelloButtonsDirective_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloButtonsDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(TrelloButtonsDirective_isDataDescriptor(o.descriptor)||TrelloButtonsDirective_isDataDescriptor(i.descriptor)){if(TrelloButtonsDirective_hasDecorators(o)||TrelloButtonsDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(TrelloButtonsDirective_hasDecorators(o)){if(TrelloButtonsDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}TrelloButtonsDirective_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,TrelloButtonsDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloButtonsDirective{constructor(){e(this),this.templateUrl=fr(),this.restrict="E",this.controller=ut.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={}}}return{F:TrelloButtonsDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloButtons"}},{kind:"method",decorators:[(0,q.SG)([])],static:!0,key:"create",value:function create(){return new TrelloButtonsDirective}}]}}));var vr=r(41401),gr=r.n(vr);function TrelloCardPopupControlsDirective_getDecoratorsApi(){TrelloCardPopupControlsDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!TrelloCardPopupControlsDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupControlsDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupControlsDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupControlsDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupControlsDirective_createElementDescriptor(e){var t,r=TrelloCardPopupControlsDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupControlsDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupControlsDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupControlsDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupControlsDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupControlsDirective_toPropertyKey(e){var t=function TrelloCardPopupControlsDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let _r=function TrelloCardPopupControlsDirective_decorate(e,t,r,i){var o,n=TrelloCardPopupControlsDirective_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupControlsDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(TrelloCardPopupControlsDirective_isDataDescriptor(o.descriptor)||TrelloCardPopupControlsDirective_isDataDescriptor(i.descriptor)){if(TrelloCardPopupControlsDirective_hasDecorators(o)||TrelloCardPopupControlsDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(TrelloCardPopupControlsDirective_hasDecorators(o)){if(TrelloCardPopupControlsDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}TrelloCardPopupControlsDirective_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,TrelloCardPopupControlsDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloCardPopupControlsDirective{constructor(){e(this),this.templateUrl=gr(),this.restrict="E"}}return{F:TrelloCardPopupControlsDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloCardPopupControls"}},{kind:"method",decorators:[(0,q.SG)([])],static:!0,key:"create",value:function create(){return new TrelloCardPopupControlsDirective}},{kind:"method",key:"link",value:function link(e,t){t.click((e=>{it()(e.target).parents("pw-trello-card-popup-controls")[0]||(e.preventDefault(),e.stopPropagation())})),it()("body").addClass("pw--trello-card-popup-opened"),e.$on("$destroy",(()=>it()("body").removeClass("pw--trello-card-popup-opened")))}}]}}));function TrelloCardPopupInjectorDirective_getDecoratorsApi(){TrelloCardPopupInjectorDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!TrelloCardPopupInjectorDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloCardPopupInjectorDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloCardPopupInjectorDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloCardPopupInjectorDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloCardPopupInjectorDirective_createElementDescriptor(e){var t,r=TrelloCardPopupInjectorDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloCardPopupInjectorDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloCardPopupInjectorDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloCardPopupInjectorDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloCardPopupInjectorDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloCardPopupInjectorDirective_toPropertyKey(e){var t=function TrelloCardPopupInjectorDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let wr=function TrelloCardPopupInjectorDirective_decorate(e,t,r,i){var o,n=TrelloCardPopupInjectorDirective_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloCardPopupInjectorDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(TrelloCardPopupInjectorDirective_isDataDescriptor(o.descriptor)||TrelloCardPopupInjectorDirective_isDataDescriptor(i.descriptor)){if(TrelloCardPopupInjectorDirective_hasDecorators(o)||TrelloCardPopupInjectorDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(TrelloCardPopupInjectorDirective_hasDecorators(o)){if(TrelloCardPopupInjectorDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}TrelloCardPopupInjectorDirective_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,TrelloCardPopupInjectorDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloCardPopupInjectorDirective{constructor(t,r,i,o,n,a){e(this),this._$window=t,this._$log=r,this._$mdMenu=i,this._htmlHelperSrv=o,this._planywayIntegrationSrv=n,this._trelloIntegrationSrv=a,this.restrict="A",this.controller=kt.controllerName,this.controllerAs="$ctrl",this.scope={},this.bindToController={}}}return{F:TrelloCardPopupInjectorDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloCardPopupInjector"}},{kind:"method",decorators:[(0,q.SG)(["$window","$log","$mdMenu","htmlHelperSrv","planywayIntegrationSrv","trelloIntegrationSrv"])],static:!0,key:"create",value:function create(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new TrelloCardPopupInjectorDirective(...t)}},{kind:"method",key:"link",value:function link(e,t){const r=it()("body");let i=!0;const onDocumentMousedown=()=>{I()(r).call(r,"> .md-open-menu-container.md-active, > .k-animation-container > .k-list-container.k-state-border-up, > .md-panel-is-showing.md-panel-closable, .md-dialog-container")[0]?(i=!1,t.attr("data-elevation",9999)):(i=!0,t.removeAttr("data-elevation"))},onDocumentClick=e=>{it()(e.target).is(".window-overlay")&&(i||e.stopImmediatePropagation())};this._$window.document.addEventListener("mousedown",onDocumentMousedown,!0),this._$window.document.addEventListener("click",onDocumentClick,!0),e.$on("$destroy",(()=>{this._$window.document.removeEventListener("mousedown",onDocumentMousedown,!0),this._$window.document.removeEventListener("click",onDocumentClick,!0),this._htmlHelperSrv.unbindElementAdded(t)})),t.on("keydown",(e=>{e.which===G.VD.Escape&&I()(r).call(r,"> .md-open-menu-container.md-active")[0]&&(this._$mdMenu.hide(),e.stopPropagation())})),t.on("keydown",".k-timepicker",(e=>{e.which===G.VD.Escape&&(e.stopPropagation(),t.trigger("focus"))})),this._htmlHelperSrv.elementAdded(t,'img[alt="Planyway Data - DO NOT EDIT!"]',(e=>{e.hide()})),this._htmlHelperSrv.elementAdded(t,".custom-field-detail-item",(e=>{let t=I()(e).call(e,".card-detail-item-header").attr("title");_t.UW.test(t)&&e.hide()})),this._htmlHelperSrv.elementAdded(t,".js-plugin-card-back-sections",(e=>{this._htmlHelperSrv.elementAdded(e,".plugin-section-title",(e=>{e.html()===_t.Ot&&e.parents(".window-module").hide()}))})),this._htmlHelperSrv.elementAdded(t,'.card-plugin-btn .button-link[title="Plan on timeline"]',(t=>{it()(t).on("click",(t=>{t.preventDefault(),t.stopImmediatePropagation(),e.$ctrl.planOnTimelineAsync()}))})),this._htmlHelperSrv.elementAdded(t,'.card-plugin-btn .button-link[title="View on timeline"]',(t=>{it()(t).on("click",(t=>{t.preventDefault(),t.stopImmediatePropagation(),e.$ctrl.viewOnTimelineAsync()}))})),this._htmlHelperSrv.elementAdded(t,".card-detail-data",(t=>{t.prepend(this._htmlHelperSrv.compileHtml("<pw-trello-card-popup-controls></pw-trello-card-popup-controls>",e,!1))}))}}]}}));var br=r(8244),kr=r.n(br),Cr=r(31082),Dr=r.n(Cr),Tr=r(20745),Sr=r(20064),Er=r(6327),Pr=r(51701),Ar=r(16853),Rr=r(68772),Ir=r(86542),xr=r(73180),$r=r(15672),zr=r(15618),Or=r(77440),Br=r.n(Or),jr=r(94339),Nr=r.n(jr),Fr=r(60366),Mr=r.n(Fr),Hr=r(34802),Lr=r.n(Hr),Ur=r(98884),Kr=r.n(Ur),Wr=r(69762),Gr=r.n(Wr),qr=r(34583),Zr=r(85893);function TrelloInjectorDirective_ownKeys(e,t){var r=W()(e);if($()){var i=$()(e);t&&(i=O()(i).call(i,(function(t){return j()(e,t).enumerable}))),r.push.apply(r,i)}return r}function TrelloInjectorDirective_objectSpread(e){for(var t=1;t<arguments.length;t++){var r,i,o=null!=arguments[t]?arguments[t]:{};t%2?_()(r=TrelloInjectorDirective_ownKeys(Object(o),!0)).call(r,(function(t){(0,L.Z)(e,t,o[t])})):F()?H()(e,F()(o)):_()(i=TrelloInjectorDirective_ownKeys(Object(o))).call(i,(function(t){b()(e,t,j()(o,t))}))}return e}function TrelloInjectorDirective_getDecoratorsApi(){TrelloInjectorDirective_getDecoratorsApi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){var r;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r,i=e.prototype;_()(r=["method","field"]).call(r,(function(r){_()(t).call(t,(function(t){var o=t.placement;if(t.kind===r&&("static"===o||"prototype"===o)){var n="static"===o?e:i;this.defineClassElement(n,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var i=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===i?void 0:i.call(e)}}b()(e,t.key,r)},decorateClass:function(e,t){var r=[],i=[],o={static:[],prototype:[],own:[]};if(_()(e).call(e,(function(e){this.addElementPlacement(e,o)}),this),_()(e).call(e,(function(e){if(!TrelloInjectorDirective_hasDecorators(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:r,finishers:i};var n=this.decorateConstructor(r,t);return i.push.apply(i,n.finishers),n.finishers=i,n},addElementPlacement:function(e,t,r){var i=t[e.placement];if(!r&&-1!==C()(i).call(i,e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var r=[],i=[],o=e.decorators,n=o.length-1;n>=0;n--){var a=t[e.placement];T()(a).call(a,C()(a).call(a,e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[n])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var d=0;d<c.length;d++)this.addElementPlacement(c[d],t);r.push.apply(r,c)}}return{element:e,finishers:i,extras:r}},decorateConstructor:function(e,t){for(var r=[],i=t.length-1;i>=0;i--){var o=this.fromClassDescriptor(e),n=this.toClassDescriptor((0,t[i])(o)||o);if(void 0!==n.finisher&&r.push(n.finisher),void 0!==n.elements){e=n.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return b()(t,E(),{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return v()(t=(0,U.Z)(e)).call(t,(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=TrelloInjectorDirective_toPropertyKey(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var n={kind:t,key:r,placement:i,descriptor:A()({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),n.initializer=e.initializer),n},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:TrelloInjectorDirective_optionalCallableProperty(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:v()(e).call(e,this.fromElementDescriptor,this)};return b()(t,E(),{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=TrelloInjectorDirective_optionalCallableProperty(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var i=(0,t[r])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function TrelloInjectorDirective_createElementDescriptor(e){var t,r=TrelloInjectorDirective_toPropertyKey(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function TrelloInjectorDirective_coalesceGetterSetter(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function TrelloInjectorDirective_hasDecorators(e){return e.decorators&&e.decorators.length}function TrelloInjectorDirective_isDataDescriptor(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function TrelloInjectorDirective_optionalCallableProperty(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function TrelloInjectorDirective_toPropertyKey(e){var t=function TrelloInjectorDirective_toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[f()];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Vr=[Ar.N,Rr.C,Ir.l,xr.K,$r.s,zr.R];let Yr=function TrelloInjectorDirective_decorate(e,t,r,i){var o,n=TrelloInjectorDirective_getDecoratorsApi();if(i)for(var a=0;a<i.length;a++)n=i[a](n);var s=t((function initialize(e){n.initializeInstanceElements(e,l.elements)}),r),l=n.decorateClass(function TrelloInjectorDirective_coalesceClassElements(e){for(var t=[],isSameElement=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},r=0;r<e.length;r++){var i,o=e[r];if("method"===o.kind&&(i=I()(t).call(t,isSameElement)))if(TrelloInjectorDirective_isDataDescriptor(o.descriptor)||TrelloInjectorDirective_isDataDescriptor(i.descriptor)){if(TrelloInjectorDirective_hasDecorators(o)||TrelloInjectorDirective_hasDecorators(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(TrelloInjectorDirective_hasDecorators(o)){if(TrelloInjectorDirective_hasDecorators(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}TrelloInjectorDirective_coalesceGetterSetter(o,i)}else t.push(o)}return t}(v()(o=s.d).call(o,TrelloInjectorDirective_createElementDescriptor)),e);return n.initializeClassElements(s.F,l.elements),n.runClassFinishers(s.F,l.finishers)}(null,(function(e){class TrelloInjectorDirective{constructor(t,r,i,o,n,a,s,l,c,d,p,u,h,m,f,y){e(this),this._$injector=t,this._$rootScope=r,this._$log=i,this._$timeout=o,this._$window=n,this._$translate=a,this._$mdMenu=s,this._appCommonSrv=c,this._dialogSrv=d,this._htmlHelperSrv=p,this._notificationSrv=u,this._planywayIntegrationSrv=h,this._platformSrv=m,this._settingsSrv=f,this._telemetrySrv=y,l.defaultIconSet(this._platformSrv.getPlatformUrl(Br()),16).iconSet("icons-12",this._platformSrv.getPlatformUrl(Nr()),12).iconSet("icons-16",this._platformSrv.getPlatformUrl(Mr()),16).iconSet("icons-24",this._platformSrv.getPlatformUrl(Lr()),24).iconSet("icons-32",this._platformSrv.getPlatformUrl(Kr()),32).iconSet("icons-56",this._platformSrv.getPlatformUrl(Gr()),56),this.restrict="A",this._extensionOnboardingType=(0,q.lX)(this._$window,_t.zU)}}return{F:TrelloInjectorDirective,d:[{kind:"get",static:!0,key:"directiveName",value:function directiveName(){return"pwTrelloInjector"}},{kind:"method",decorators:[(0,q.SG)(["$injector","$rootScope","$log","$timeout","$window","$translate","$mdMenu","$mdIconProvider","appCommonSrv","dialogSrv","htmlHelperSrv","notificationSrv","planywayIntegrationSrv","platformSrv","settingsSrv","telemetrySrv"])],static:!0,key:"create",value:function create(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new TrelloInjectorDirective(...t)}},{kind:"method",key:"link",value:async function link(e){try{let e=this._appCommonSrv.getLanguage();this._$translate.negotiateLocale(e)&&(await this._$translate.use(e),await Pr.Z.changeLanguage(e)),(0,Sr.j)({getAppPlatform:()=>this._platformSrv.getAppPlatform(),getAppType:()=>this._platformSrv.getAppType(),getPlatformUrl:e=>this._platformSrv.getPlatformUrl(e),reloadAppAsync:e=>this._platformSrv.reloadAppAsync(e)}),(0,Er.u)({logSingleEvent:(e,t)=>this._telemetrySrv.logSingleEvent(e,t),logSessionEvent:(e,t)=>this._telemetrySrv.logSessionEvent(e,t),logError:(e,t,r)=>this._telemetrySrv.logError(e,t,r)}),await this._$translate("MISC.PLANYWAY"),this._appCommonSrv.applyLocale()}catch(e){this._$log.error("Planyway failed to set current language:"),this._$log.error(e),this._telemetrySrv.logError("Planyway failed to set current language",e,{class:this.constructor.name,method:this.link.name})}this._platformSrv.setAppTitleAsync({baseTitle:this._$translate.instant("MISC.PLANYWAY")});for(let e of Vr)e.$injector=this._$injector,kendo.ui.plugin(e);const t=it()("body");t.append(this._htmlHelperSrv.compileHtml("<pw-notification></pw-notification>",e)),this._injectGlobalElements(t),this._injectBoardElements(t,e),this._$rootScope.$on(G.FK.CloseDialogsRequested,(()=>{I()(t).call(t,"> .md-open-menu-container.md-active")[0]&&this._$mdMenu.hide()})),this._$window.document.addEventListener("keydown",(r=>{if(G.gD.has(r.which)){if(it()(this._$window.document.activeElement).closest(".pw-dialog")[0])return;if(this._schedulerWidget){let t=this._schedulerWidget.getSelectedEvents(),i=it()(".pw-card:hover",this._schedulerWidget.element);if(i[0]){let e=i.data("uid");if(kr()(t).call(t,(t=>t.uid!==e))){this._schedulerWidget.select(null);let r=this._schedulerWidget.occurrenceByUid(e);if(r.isReadOnly)return;this._schedulerWidget.select([e]),t=[r]}}else if(!this._schedulerWidget.element.is(":hover"))return;t.length>0&&(r.preventDefault(),r.stopImmediatePropagation(),e.$broadcast(G.FK.CardKeydown,{keyCode:r.which,keyModifiers:{altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey},selectedCards:t}))}}else if(r.which===G.VD.Escape){var i;if(it()(this._$window.document.activeElement).closest(".pw-dialog")[0])return;if(I()(t).call(t,".pw-dialog.pw-dialog--opaque")[0])return void r.stopPropagation();if(I()(t).call(t,"> .md-open-menu-container.md-active")[0])return this._$mdMenu.hide(),void r.stopPropagation();null!==(i=this._schedulerWidget)&&void 0!==i&&i.isEventsSelected()&&(this._schedulerWidget.select(null),r.stopPropagation())}}),!0)}},{kind:"get",key:"_userSettings",value:function _userSettings(){return this._settingsSrv.user}},{kind:"method",key:"_injectGlobalElements",value:function _injectGlobalElements(e){this._htmlHelperSrv.elementAdded(e,'a[href^="https://id.atlassian.com/signup"]',(()=>{this._$window.opener||this._showOnboardingGuy("signIn")}),!0),this._htmlHelperSrv.elementAdded(e,".js-boards-page",(async()=>{let e;if(this._extensionOnboardingType===G.lC.OpenBoard)e="openBoard";else{if("true"===pe.Xb.planywayOnboardingOpenBoardPassed)return;e="openBoard"}await this._planywayIntegrationSrv.checkSignedInAsync()||await this._showLoginDialogAsync(),this._showOnboardingGuy(e)}),!0)}},{kind:"method",key:"_injectBoardElements",value:function _injectBoardElements(e,t){let r;this._htmlHelperSrv.elementAdded(e,"#surface",(e=>{r=it()(e).parent().addClass("pw-body-wrapper")})),t.$watch((()=>this._appCommonSrv.isUiPreconditionsPassed),(e=>{r&&r.toggleClass("pw-body-wrapper--hidden",!e)})),this._htmlHelperSrv.elementAdded(e,".card-detail-window",(e=>{e.attr("pw-trello-card-popup-injector",""),this._htmlHelperSrv.compileElement(e,t)})),this._htmlHelperSrv.elementRemoved(e,".card-detail-window",(e=>{let t=e.scope();t&&t.$destroy()})),this._$window.document.addEventListener("click",(t=>{var r;let i=null===(r=t.target)||void 0===r?void 0:r.closest(".board-header-btn");if((null==i?void 0:i.getAttribute("title"))===_t.Ot){if(!this._schedulerWidget){let t=new Error("Scheduler widget undefined");try{t.trelloDOM=this._htmlHelperSrv.traceDOM(e[0],6).outerHTML}catch{}return this._$log.error("Planyway failed to handle power-up button:"),this._$log.error(t),void this._telemetrySrv.logError("Planyway failed to handle power-up button",t,{class:this.constructor.name,method:this._injectBoardElements.name})}t.stopPropagation(),this._telemetrySrv.logSingleEvent(G.cN.TrelloEvents.PlanywayPowerUpClicked),this._$rootScope.$broadcast(G.FK.SwitchPlanywayShownRequested,{isBy:G.Ch.Powerup})}}),!0),this._htmlHelperSrv.elementAdded(e,"#board",(r=>{r[0].addEventListener("mousedown",(r=>{if(!/card|badge/.test(r.target.className))return;let i,o=it()(r.target).closest(".list-card");if(!o[0])return;const onDragEnd=()=>{e.removeClass(Ir.g),i&&(i.removeClass("active-card"),i=null),t.$broadcast(G.FK.CardDragEnded)};o.removeData("kendoDraggable"),o.kendoDraggable({autoScroll:!0,group:_t.dl,hint:t=>{e.addClass(Ir.g),i=t},dragend:onDragEnd,dragcancel:onDragEnd})}),!0)})),this._htmlHelperSrv.elementAdded(e,".board-main-content",(async i=>{if(!r)return;let o=this._htmlHelperSrv.compileElement(i,t);if(o.$$destroyed)return;this._notificationSrv.clearNotificationQueue(),o.trelloButtons=this._htmlHelperSrv.compileHtml("<pw-trello-buttons></pw-trello-buttons>",o),this._htmlHelperSrv.elementAdded(e,"#header",(async e=>{if(o.$$destroyed)return;I()(e).call(e,"pw-trello-buttons").remove();let t=I()(e).call(e,"> :last-child > button")[1];t?it()(t).before(o.trelloButtons):it()(I()(e).call(e,"> :last-child button").get(-1)).parent().before(o.trelloButtons),this._planywayIntegrationSrv.isAppInitialized()||await o.$onceAsync(G.FK.AppInitialized),this._$timeout((()=>this._showButtonOnboarding()))}),!0),o.boardWrapper=this._htmlHelperSrv.compileHtml('<div class="pw-board-wrapper">    <pw-root pw-resize-listener></pw-root>    <pw-root-resizer></pw-root-resizer></div>',o),r.append(o.boardWrapper),this._hideOnboardingGuy();let n=await this._planywayIntegrationSrv.initializeAppAsync({isCanceled:()=>o.$$destroyed});if(o.$$destroyed)return;if(!n)return void(this._planywayIntegrationSrv.fatalErrorMessage&&this._dialogSrv.showFatalErrorDialogAsync(this._planywayIntegrationSrv.fatalErrorMessage,{canClose:!0}));const a=it()("#trello-root"),s=it()("#board"),l=s.scrollLeft();this._$timeout((()=>{if(o.$$destroyed)return;if(!it()(".pw-trello-buttons")[0]){let t=new Error("Cannot find Trello buttons");try{t.trelloDOM=this._htmlHelperSrv.traceDOM(e[0],6).outerHTML}catch{}this._$log.error("Planyway failed to inject extension button:"),this._$log.error(t),this._telemetrySrv.logError("Planyway failed to inject extension button",t,{class:this.constructor.name,method:this._injectBoardElements.name})}if(!this._schedulerWidget){let t=new Error("Scheduler widget undefined");try{t.trelloDOM=this._htmlHelperSrv.traceDOM(e[0],6).outerHTML}catch{}this._$log.error("Planyway failed to inject extension:"),this._$log.error(t),this._telemetrySrv.logError("Planyway failed to inject extension",t,{class:this.constructor.name,method:this._injectBoardElements.name})}}),5e3,!1),t.$watch((()=>this._appCommonSrv.isPlanywayShown()),(e=>{r.toggleClass("pw-body-wrapper--planyway-shown",!!e)})),t.$watch((()=>this._appCommonSrv.getPlanywayOrientation()),(e=>{var t;e&&(_()(t=Dr()(G.U1)).call(t,(e=>r.removeClass(`pw-body-wrapper--planyway_${e}`))),r.addClass(`pw-body-wrapper--planyway_${e}`))})),s.scrollLeft(l);let c={chooseWhen:e=>e.hasClass("list-card"),getScrollable:()=>r,getOverflowLeftTopFix:()=>this._appCommonSrv.getPlanywayOrientation()===G.U1.Top?{left:-o.boardWrapper.offsetLeft,top:-o.boardWrapper.offsetTop}:{left:0,top:0},maxVelocity:50,scrollArea:200,workBeyondScrollable:!0},d={chooseWhen:e=>e.hasClass("k-event"),getScrollable:()=>it()(".k-event-drag-hint").closest(".k-scheduler-content--scrollable"),maxVelocity:20,scrollArea:50,workBeyondScrollable:!0,nextSettings:{getScrollable:()=>r,maxVelocity:30,scrollArea:100,workBeyondScrollable:!0}},p={chooseWhen:e=>e.hasClass("pw-tasks-lane__list"),getScrollable:()=>it()(".pw-js-tasks-list-scrollable-container:hover"),maxVelocity:20,scrollArea:120,workBeyondScrollable:!0},u={chooseWhen:e=>e.hasClass("pw-tasks-lane__item"),getScrollable:()=>it()(".pw-js-tasks-list-scrollable-container:hover"),maxVelocity:20,scrollArea:120,workBeyondScrollable:!0},h={chooseWhen:e=>e.hasClass("pw-dialog-edit-card-checklist")||e.hasClass("pw-dialog-edit-card-check-item"),getScrollable:()=>it()(".pw-dialog-edit-card").closest(".md-panel-outer-wrapper"),maxVelocity:30,scrollArea:100,workBeyondScrollable:!0};Ir.l.autoScrollSettings=[c,d,p,u,h],it()("#clipboard-container").insertAfter(r);let m=null;it()(o.boardWrapper).on("click",(e=>{e.stopPropagation()})).on("mouseenter",(()=>{Ir.l.isDragging?(m=s.scrollLeft(),a.addClass("pw--mouse-over-calendar")):m=null})).on("mouseleave",(()=>{m=null,a.removeClass("pw--mouse-over-calendar")})),this._$window.addEventListener("drop",(e=>{it()(e.target).parents(".pw-board-wrapper").length>0&&(e.stopImmediatePropagation(),e.target.dispatchEvent(new CustomEvent("pwDrop",TrelloInjectorDirective_objectSpread(TrelloInjectorDirective_objectSpread({},e),{},{bubbles:!0}))))}),!0),s.on("scroll",(()=>{null!==m&&s.scrollLeft(m)})),o.$on("$destroy",(()=>{var e;r.removeClass("pw-body-wrapper--planyway-shown"),_()(e=Dr()(G.U1)).call(e,(e=>r.removeClass(`pw-body-wrapper--planyway_${e}`))),this._$rootScope.$broadcast(G.FK.CloseDialogsRequested,{force:!0})}))})),this._htmlHelperSrv.elementRemoved(e,".board-main-content",(e=>{this._notificationSrv.clearNotificationQueue();let t=e.scope();var r,i;t&&(t.$destroy(),null===(r=t.trelloButtons)||void 0===r||r.remove(),null===(i=t.boardWrapper)||void 0===i||i.remove())})),this._htmlHelperSrv.elementAdded(e,".quick-card-editor",(()=>this._$rootScope.$broadcast(G.FK.CloseDialogsRequested))),this._$window.addEventListener("popstate",(()=>this._$rootScope.$broadcast(G.FK.CloseDialogsRequested,{force:!0})))}},{kind:"method",key:"_showLoginDialogAsync",value:async function _showLoginDialogAsync(){let e=await this._platformSrv.getAppStorageDataAsync();e.isLoginDialogShown||(this._telemetrySrv.logSingleEvent(G.cN.OnboardingEvents.LoginDialogOpened),await this._dialogSrv.showLoginDialogAsync({canClose:!0})||this._telemetrySrv.logSingleEvent(G.cN.OnboardingEvents.LoginDialogClosed),e.isLoginDialogShown=!0,this._platformSrv.setAppStorageDataAsync(e))}},{kind:"method",key:"_showOnboardingGuy",value:function _showOnboardingGuy(e){this._isOnboardingGuyShown=!0;const t={signIn:{message:this._$translate.instant("MISC.ONBOARDING_SIGN_IN"),telemetryEvent:G.cN.OnboardingEvents.SignInStepShown},openBoard:{message:this._$translate.instant("MISC.ONBOARDING_OPEN_BOARD"),telemetryEvent:G.cN.OnboardingEvents.OpenBoardStepShown}},{message:r,telemetryEvent:i}=t[e],o=it()('<div class="pw-js-onboarding-guy"></div>').appendTo("body")[0];(0,Tr.createRoot)(o).render((0,Zr.jsx)(qr.l,{message:r})),this._telemetrySrv.logSingleEvent(i)}},{kind:"method",key:"_hideOnboardingGuy",value:function _hideOnboardingGuy(){if(this._isOnboardingGuyShown){it()(".pw-js-onboarding-guy").remove();try{pe.Xb.planywayOnboardingOpenBoardPassed=!0}catch{}}}},{kind:"method",key:"_showButtonOnboarding",value:function _showButtonOnboarding(){if(pe.Xb.planywayOnboardingButtonPassed||this._userSettings.global.settings.isOnboardingButtonPassed||this._showButtonOnboardingShown)return;let e=it()("#header");I()(e).call(e,".pw-js-trello-btn")[0]&&(this._showButtonOnboardingShown=!0,this._appCommonSrv.isPlanywayShown()||(it()(".pw-body-wrapper").append(this._htmlHelperSrv.compileHtml('<pw-show-button-onboarding class="pw-js-button-onboarding"></pw-show-button-onboarding>',this._$rootScope,!0)),I()(e).call(e,"> :last-child").append('<div class="pw-show-button-onboarding-header pw-js-button-onboarding"></div>'),this._telemetrySrv.logSingleEvent(G.cN.OnboardingEvents.ShowButtonShown)))}},{kind:"get",key:"_schedulerWidget",value:function _schedulerWidget(){return this._appCommonSrv.getSchedulerWidget()}}]}}));var Xr=r(37289),Qr=r(72369),Jr=r(18542),ei=r(91775),ti=r(77109),ri=r(38450),ii=r(5199),oi=r(36395),ni=r(94161),ai=r(32248),si=r(46278);const li=[d.j,p.a,u.a,h.x,V,ce,ue,he.M,me.z,fe.s,ye.B,ve.q,ge.E,_e.g,we.D,be.R,ke.$,Ce.V,De.i,Te.r,Se.g,Ee.y,Pe.T,Ae.p],ci=[Re.B,Ie.L,xe.m,$e.A,ze.O,Oe.R,Be.L,je.C,Ne.j,Fe.S,Me.o,He.o,Le.B,Ue.Z,Ke.G,We.M,Ge.j,qe.H,qe.H,Ze.E,Ve.A,Ye.u,Xe.P,Qe.p,Je.P,et.V,tt.$,ot,nt.b,at.v,st.x,lt.X,ct.f,dt.E,pt.H,ut,kt,Ct.z,Dt.C],di=[Tt.J,St.w,Et.w,Pt.O,At.C,Rt.n,It.G,xt.N,$t.n,zt.Z,Ot.l,Bt.Q,jt.O,Nt.d,Ft.p,Mt.l,Ht.w,Lt.z,Ut.U,Kt.S,Wt.B,Gt.j,qt.k,Zt.t,Vt.j,Yt.M,Xt.c,Qt.g,Jt.F,er.f,tr.U,rr.E,ir.F,ar,sr.l,lr.t,cr.F,dr.l,pr.E,ur.V,hr.z,yr,_r,wr,Yr,Xr.m,Qr.M],pi=[oi.l,ni.b,ai.j,ei.Z,si.T,ti.Z,ri.Z,ii.Z];function onLoaded(){var e;if(a()(e=window.location.href).call(e,"https://trello.com/")){Jr.default.use(),pe.Xb.setNamespace("trello"),pe.y7.setNamespace("trello"),document.body.setAttribute("pw-trello-injector","");for(let e of s.yI){let t=(0,l.s)(e);li.push(...t.services),ci.push(...t.controllers),di.push(...t.directives)}(0,c.e)("planyway",{modules:["kendo.directives"],services:li,controllers:ci,directives:di,components:pi})}}window.planywayLoadStartTime=o()(),"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?onLoaded():(document.addEventListener("DOMContentLoaded",onLoaded),window.addEventListener("beforeunload",(()=>{document.removeEventListener("DOMContentLoaded",onLoaded)})))},80600:(e,t,r)=>{e.exports=r.p+"../images/e1d380f3-cf29-408f-9d22-1eb5a41d8e4c.svg"},88095:(e,t,r)=>{e.exports=r.p+"../videos/7fd8ff56-feae-4999-bbae-74244d445e03.mp4"},69386:()=>{},31616:()=>{},69862:()=>{},40964:()=>{}},o={};function __webpack_require__(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=i,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},e=[],__webpack_require__.O=(t,r,i,o)=>{if(!r){var n=1/0;for(c=0;c<e.length;c++){for(var[r,i,o]=e[c],a=!0,s=0;s<r.length;s++)(!1&o||n>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](r[s])))?r.splice(s--,1):(a=!1,o<n&&(n=o));if(a){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,i,o]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var n={};t=t||[null,r({}),r([]),r(r)];for(var a=2&i&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(o,n),o},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",(()=>{var e={233:0};__webpack_require__.O.j=t=>0===e[t];var webpackJsonpCallback=(t,r)=>{var i,o,[n,a,s]=r,l=0;if(n.some((t=>0!==e[t]))){for(i in a)__webpack_require__.o(a,i)&&(__webpack_require__.m[i]=a[i]);if(s)var c=s(__webpack_require__)}for(t&&t(r);l<n.length;l++)o=n[l],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(c)},t=self.webpackChunk_planyway_planyway=self.webpackChunk_planyway_planyway||[];t.forEach(webpackJsonpCallback.bind(null,0)),t.push=webpackJsonpCallback.bind(null,t.push.bind(t))})(),__webpack_require__.nc=void 0;var n=__webpack_require__.O(void 0,[510,6,912,536,443,989,923,436,595,213,451,664,114,325,703,602,600,992,570,533,579,802,32,22,71,516,556,946,195,215,717,629,994,442],(()=>__webpack_require__(29937)));n=__webpack_require__.O(n)})();